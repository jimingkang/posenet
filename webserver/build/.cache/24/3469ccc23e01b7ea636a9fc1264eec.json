{"id":"NO70","dependencies":[{"name":"C:\\Users\\jmmy\\Downloads\\webrtc-master\\webrtc\\13chapter\\webserver\\build\\.babelrc","includedInParent":true,"mtime":1593743347294},{"name":"C:\\Users\\jmmy\\Downloads\\webrtc-master\\webrtc\\13chapter\\webserver\\build\\package.json","includedInParent":true,"mtime":1593753006248},{"name":"@tensorflow-models/posenet","loc":{"line":3,"column":25},"parent":"C:\\Users\\jmmy\\Downloads\\webrtc-master\\webrtc\\13chapter\\webserver\\build\\main_bw.js","resolved":"C:\\Users\\jmmy\\Downloads\\webrtc-master\\webrtc\\13chapter\\webserver\\build\\node_modules\\@tensorflow-models\\posenet\\dist\\posenet.esm.js"},{"name":"./camera","loc":{"line":4,"column":44},"parent":"C:\\Users\\jmmy\\Downloads\\webrtc-master\\webrtc\\13chapter\\webserver\\build\\main_bw.js","resolved":"C:\\Users\\jmmy\\Downloads\\webrtc-master\\webrtc\\13chapter\\webserver\\build\\camera.js"}],"generated":{"js":"\"use strict\";var e=t(require(\"@tensorflow-models/posenet\")),n=require(\"./camera\");function o(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function t(e){if(e&&e.__esModule)return e;var n=o();if(n&&n.has(e))return n.get(e);var t={};if(null!=e){var c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var r=c?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(t,i,r):t[i]=e[i]}}return t.default=e,n&&n.set(e,t),t}var c=document.querySelector(\"video#localvideo\");const i=.5,r=!1,a=16,s=c,l=.5,d=2,u=.5,g=16,v=500,f=1,m=32,p=250;var h,y=document.querySelector(\"video#remotevideo\"),b=document.querySelector(\"canvas#local_output\"),j=document.querySelector(\"canvas#remote_output\"),w=document.querySelector(\"button#connserver\"),P=document.querySelector(\"button#leave\"),S=document.querySelector(\"textarea#offer\"),D=document.querySelector(\"textarea#answer\"),O=document.querySelector(\"input#shareDesk\"),k=document.querySelector(\"select#bandwidth\"),q=null,C=null,M=null,T=null,R=null,_=\"init\",x={iceServers:[{urls:\"turn:stun.al.learningrtc.cn:3478\",credential:\"mypasswd\",username:\"garrylea\"}]};function I(e,n){console.log(\"send message to other end\",e,n),T||console.log(\"socket is null\"),T.emit(\"message\",e,n)}function L(){return(T=io.connect()).on(\"joined\",(e,n)=>{console.log(\"receive joined message!\",e,n),_=\"joined\",K(),N(),w.disabled=!0,P.disabled=!1,console.log(\"receive joined message, state=\",_)}),T.on(\"otherjoin\",e=>{console.log(\"receive joined message:\",e,_),\"joined_unbind\"===_&&(K(),N()),_=\"joined_conn\",Q(),console.log(\"receive other_join message, state=\",_)}),T.on(\"full\",(e,n)=>{console.log(\"receive full message\",e,n),T.disconnect(),X(),Y(),_=\"leaved\",console.log(\"receive full message, state=\",_),alert(\"the room is full!\")}),T.on(\"leaved\",(e,n)=>{console.log(\"receive leaved message\",e,n),_=\"leaved\",T.disconnect(),console.log(\"receive leaved message, state=\",_),w.disabled=!1,P.disabled=!0}),T.on(\"bye\",(e,n)=>{console.log(\"receive bye message\",h,n),_=\"joined_unbind\",X(),console.log(\"receive bye message, state=\",_)}),T.on(\"disconnect\",e=>{console.log(\"receive disconnect message!\",h),\"leaved\"!==_&&(X(),Y()),_=\"leaved\"}),T.on(\"message\",(e,n)=>{if(console.log(\"receive message!\",e,n),null!=n)if(n.hasOwnProperty(\"type\")&&\"offer\"===n.type)M.setRemoteDescription(new RTCSessionDescription(n)),M.createAnswer().then(H).catch(G);else if(n.hasOwnProperty(\"type\")&&\"answer\"===n.type)M.setRemoteDescription(new RTCSessionDescription(n)),k.disabled=!1;else if(n.hasOwnProperty(\"type\")&&\"candidate\"===n.type){var o=new RTCIceCandidate({sdpMLineIndex:n.label,candidate:n.candidate});M.addIceCandidate(o).then(()=>{console.log(\"Successed to add ice candidate\")}).catch(e=>{console.error(e)})}else console.log(\"the message is invalid!\",n);else console.error(\"the message is invalid!\")}),h=\"111111\",T.emit(\"join\",h),!0}async function E(){return W(),!0}function F(e){q=e,c.srcObject=q,L(),(0,n.bindPage)(c,b)}function U(e){q=e}function A(e){console.error(\"Failed to get Media Stream!\",e)}function B(){return!!IsPC()&&(navigator.mediaDevices.getDisplayMedia({video:!0}).then(U).catch(A),!0)}function W(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(F).catch(A)}else console.error(\"the getUserMedia is not supported!\")}function V(e){C=e.streams[0],y.srcObject=e.streams[0]}function z(e){console.error(\"Failed to create offer:\",e)}function G(e){console.error(\"Failed to create answer:\",e)}function H(e){M.setLocalDescription(e),k.disabled=!1,I(h,e)}function J(e){M.setLocalDescription(e),I(h,R=e)}function K(){console.log(\"create RTCPeerConnection!\"),M?console.log(\"the pc have be created!\"):((M=new RTCPeerConnection(x)).onicecandidate=(e=>{e.candidate?I(h,{type:\"candidate\",label:event.candidate.sdpMLineIndex,id:event.candidate.sdpMid,candidate:event.candidate.candidate}):console.log(\"this is the end candidate\")}),M.ontrack=V,(0,n.bindPage)(y,j))}function N(){console.log(\"bind tracks into RTCPeerConnection!\"),null!==M||void 0!==q?null!==q||void 0!==q?q.getTracks().forEach(e=>{M.addTrack(e,q)}):console.error(\"localstream is null or undefined!\"):console.error(\"pc is null or undefined!\")}function Q(){if(\"joined_conn\"===_){M.createOffer({offerToRecieveAudio:1,offerToRecieveVideo:1}).then(J).catch(z)}}function X(){M&&(R=null,M.close(),M=null)}function Y(){null!=q&&q.getTracks().forEach(e=>{e.stop()}),q=null}function Z(){T.emit(\"leave\",h),X(),Y(),w.disabled=!1,P.disabled=!0,k.disabled=!0}function $(){k.disabled=!0;var e=k.options[k.selectedIndex].value,n=null;M.getSenders().forEach(e=>{e&&\"video\"===e.track.kind&&(n=e)});var o=n.getParameters();o.encodings||(o.encodings=[{}]),\"unlimited\"===e?delete o.encodings[0].maxBitrate:o.encodings[0].maxBitrate=1e3*e,n.setParameters(o).then(()=>{k.disabled=!1}).catch(e=>{console.error(e)})}w.onclick=E,P.onclick=Z,k.onchange=$;"},"sourceMaps":{"js":{"mappings":[{"source":"main_bw.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"main_bw.js","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"main_bw.js","original":{"line":3,"column":0},"generated":{"line":1,"column":17}},{"source":"main_bw.js","original":{"line":3,"column":0},"generated":{"line":1,"column":19}},{"source":"main_bw.js","original":{"line":3,"column":0},"generated":{"line":1,"column":21}},{"source":"main_bw.js","original":{"line":3,"column":0},"generated":{"line":1,"column":29}},{"source":"main_bw.js","original":{"line":4,"column":0},"generated":{"line":1,"column":60}},{"source":"main_bw.js","original":{"line":4,"column":0},"generated":{"line":1,"column":62}},{"source":"main_bw.js","original":{"line":4,"column":0},"generated":{"line":1,"column":70}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":82}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":91}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":95}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":98}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":117}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":125}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":132}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":137}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":141}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":143}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":147}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":155}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":162}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":164}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":175}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":182}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":185}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":187}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":196}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":198}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":201}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":204}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":207}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":209}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":220}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":227}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":229}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":233}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":235}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":239}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":242}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":245}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":247}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":251}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":254}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":261}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":263}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":267}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":270}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":274}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":276}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":279}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":282}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":288}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":290}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":291}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":295}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":297}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":304}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":320}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":327}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":352}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":356}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":360}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":365}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":367}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":370}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":377}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":387}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":402}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":407}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":409}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":412}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":413}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":417}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":419}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":421}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":428}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":453}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":455}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":458}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":463}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":467}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":469}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":474}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":476}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":481}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":488}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":503}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":505}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":507}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":510}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":512}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":515}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":517}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":521}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":528}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":530}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":538}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":540}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":543}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":545}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":549}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":551}},{"source":"main_bw.js","original":{"line":527,"column":0},"generated":{"line":1,"column":554}},{"source":"main_bw.js","original":{"line":6,"column":0},"generated":{"line":1,"column":556}},{"source":"main_bw.js","name":"localVideo","original":{"line":6,"column":4},"generated":{"line":1,"column":560}},{"source":"main_bw.js","name":"document","original":{"line":6,"column":17},"generated":{"line":1,"column":562}},{"source":"main_bw.js","name":"querySelector","original":{"line":6,"column":26},"generated":{"line":1,"column":571}},{"source":"main_bw.js","original":{"line":6,"column":40},"generated":{"line":1,"column":585}},{"source":"main_bw.js","original":{"line":10,"column":0},"generated":{"line":1,"column":605}},{"source":"main_bw.js","name":"imageScaleFactor","original":{"line":10,"column":6},"generated":{"line":1,"column":611}},{"source":"main_bw.js","original":{"line":10,"column":25},"generated":{"line":1,"column":613}},{"source":"main_bw.js","name":"flipHorizontal","original":{"line":11,"column":6},"generated":{"line":1,"column":616}},{"source":"main_bw.js","original":{"line":11,"column":23},"generated":{"line":1,"column":619}},{"source":"main_bw.js","name":"outputStride","original":{"line":12,"column":6},"generated":{"line":1,"column":621}},{"source":"main_bw.js","original":{"line":12,"column":21},"generated":{"line":1,"column":623}},{"source":"main_bw.js","name":"imageElement","original":{"line":13,"column":6},"generated":{"line":1,"column":626}},{"source":"main_bw.js","name":"localVideo","original":{"line":13,"column":21},"generated":{"line":1,"column":628}},{"source":"main_bw.js","name":"scaleFactor","original":{"line":14,"column":6},"generated":{"line":1,"column":630}},{"source":"main_bw.js","original":{"line":14,"column":18},"generated":{"line":1,"column":632}},{"source":"main_bw.js","name":"defaultQuantBytes","original":{"line":23,"column":6},"generated":{"line":1,"column":635}},{"source":"main_bw.js","original":{"line":23,"column":26},"generated":{"line":1,"column":637}},{"source":"main_bw.js","name":"defaultMobileNetMultiplier","original":{"line":25,"column":6},"generated":{"line":1,"column":639}},{"source":"main_bw.js","original":{"line":25,"column":36},"generated":{"line":1,"column":641}},{"source":"main_bw.js","name":"defaultMobileNetStride","original":{"line":26,"column":6},"generated":{"line":1,"column":644}},{"source":"main_bw.js","original":{"line":26,"column":31},"generated":{"line":1,"column":646}},{"source":"main_bw.js","name":"defaultMobileNetInputResolution","original":{"line":27,"column":6},"generated":{"line":1,"column":649}},{"source":"main_bw.js","original":{"line":27,"column":40},"generated":{"line":1,"column":651}},{"source":"main_bw.js","name":"defaultResNetMultiplier","original":{"line":29,"column":6},"generated":{"line":1,"column":655}},{"source":"main_bw.js","original":{"line":29,"column":32},"generated":{"line":1,"column":657}},{"source":"main_bw.js","name":"defaultResNetStride","original":{"line":30,"column":6},"generated":{"line":1,"column":659}},{"source":"main_bw.js","original":{"line":30,"column":28},"generated":{"line":1,"column":661}},{"source":"main_bw.js","name":"defaultResNetInputResolution","original":{"line":31,"column":6},"generated":{"line":1,"column":664}},{"source":"main_bw.js","original":{"line":31,"column":37},"generated":{"line":1,"column":666}},{"source":"main_bw.js","original":{"line":36,"column":0},"generated":{"line":1,"column":670}},{"source":"main_bw.js","name":"roomid","original":{"line":58,"column":4},"generated":{"line":1,"column":674}},{"source":"main_bw.js","name":"remoteVideo","original":{"line":36,"column":4},"generated":{"line":1,"column":676}},{"source":"main_bw.js","name":"document","original":{"line":36,"column":18},"generated":{"line":1,"column":678}},{"source":"main_bw.js","name":"querySelector","original":{"line":36,"column":27},"generated":{"line":1,"column":687}},{"source":"main_bw.js","original":{"line":36,"column":41},"generated":{"line":1,"column":701}},{"source":"main_bw.js","name":"local_output","original":{"line":38,"column":4},"generated":{"line":1,"column":722}},{"source":"main_bw.js","name":"document","original":{"line":38,"column":19},"generated":{"line":1,"column":724}},{"source":"main_bw.js","name":"querySelector","original":{"line":38,"column":28},"generated":{"line":1,"column":733}},{"source":"main_bw.js","original":{"line":38,"column":42},"generated":{"line":1,"column":747}},{"source":"main_bw.js","name":"remote_output","original":{"line":39,"column":4},"generated":{"line":1,"column":770}},{"source":"main_bw.js","name":"document","original":{"line":39,"column":20},"generated":{"line":1,"column":772}},{"source":"main_bw.js","name":"querySelector","original":{"line":39,"column":29},"generated":{"line":1,"column":781}},{"source":"main_bw.js","original":{"line":39,"column":43},"generated":{"line":1,"column":795}},{"source":"main_bw.js","name":"btnConn","original":{"line":43,"column":4},"generated":{"line":1,"column":819}},{"source":"main_bw.js","name":"document","original":{"line":43,"column":15},"generated":{"line":1,"column":821}},{"source":"main_bw.js","name":"querySelector","original":{"line":43,"column":24},"generated":{"line":1,"column":830}},{"source":"main_bw.js","original":{"line":43,"column":38},"generated":{"line":1,"column":844}},{"source":"main_bw.js","name":"btnLeave","original":{"line":44,"column":4},"generated":{"line":1,"column":865}},{"source":"main_bw.js","name":"document","original":{"line":44,"column":15},"generated":{"line":1,"column":867}},{"source":"main_bw.js","name":"querySelector","original":{"line":44,"column":24},"generated":{"line":1,"column":876}},{"source":"main_bw.js","original":{"line":44,"column":38},"generated":{"line":1,"column":890}},{"source":"main_bw.js","name":"offer","original":{"line":46,"column":4},"generated":{"line":1,"column":906}},{"source":"main_bw.js","name":"document","original":{"line":46,"column":12},"generated":{"line":1,"column":908}},{"source":"main_bw.js","name":"querySelector","original":{"line":46,"column":21},"generated":{"line":1,"column":917}},{"source":"main_bw.js","original":{"line":46,"column":35},"generated":{"line":1,"column":931}},{"source":"main_bw.js","name":"answer","original":{"line":47,"column":4},"generated":{"line":1,"column":949}},{"source":"main_bw.js","name":"document","original":{"line":47,"column":13},"generated":{"line":1,"column":951}},{"source":"main_bw.js","name":"querySelector","original":{"line":47,"column":22},"generated":{"line":1,"column":960}},{"source":"main_bw.js","original":{"line":47,"column":36},"generated":{"line":1,"column":974}},{"source":"main_bw.js","name":"shareDeskBox","original":{"line":49,"column":4},"generated":{"line":1,"column":993}},{"source":"main_bw.js","name":"document","original":{"line":49,"column":20},"generated":{"line":1,"column":995}},{"source":"main_bw.js","name":"querySelector","original":{"line":49,"column":29},"generated":{"line":1,"column":1004}},{"source":"main_bw.js","original":{"line":49,"column":43},"generated":{"line":1,"column":1018}},{"source":"main_bw.js","name":"bandwidth","original":{"line":51,"column":4},"generated":{"line":1,"column":1037}},{"source":"main_bw.js","name":"document","original":{"line":51,"column":16},"generated":{"line":1,"column":1039}},{"source":"main_bw.js","name":"querySelector","original":{"line":51,"column":25},"generated":{"line":1,"column":1048}},{"source":"main_bw.js","original":{"line":51,"column":39},"generated":{"line":1,"column":1062}},{"source":"main_bw.js","name":"localStream","original":{"line":53,"column":4},"generated":{"line":1,"column":1082}},{"source":"main_bw.js","original":{"line":53,"column":18},"generated":{"line":1,"column":1084}},{"source":"main_bw.js","name":"remoteStream","original":{"line":54,"column":4},"generated":{"line":1,"column":1089}},{"source":"main_bw.js","original":{"line":54,"column":19},"generated":{"line":1,"column":1091}},{"source":"main_bw.js","name":"pc","original":{"line":56,"column":4},"generated":{"line":1,"column":1096}},{"source":"main_bw.js","original":{"line":56,"column":9},"generated":{"line":1,"column":1098}},{"source":"main_bw.js","name":"socket","original":{"line":59,"column":4},"generated":{"line":1,"column":1103}},{"source":"main_bw.js","original":{"line":59,"column":13},"generated":{"line":1,"column":1105}},{"source":"main_bw.js","name":"offerdesc","original":{"line":61,"column":4},"generated":{"line":1,"column":1110}},{"source":"main_bw.js","original":{"line":61,"column":16},"generated":{"line":1,"column":1112}},{"source":"main_bw.js","name":"state","original":{"line":62,"column":4},"generated":{"line":1,"column":1117}},{"source":"main_bw.js","original":{"line":62,"column":12},"generated":{"line":1,"column":1119}},{"source":"main_bw.js","name":"pcConfig","original":{"line":67,"column":4},"generated":{"line":1,"column":1126}},{"source":"main_bw.js","original":{"line":67,"column":15},"generated":{"line":1,"column":1128}},{"source":"main_bw.js","original":{"line":68,"column":16},"generated":{"line":1,"column":1129}},{"source":"main_bw.js","original":{"line":68,"column":16},"generated":{"line":1,"column":1140}},{"source":"main_bw.js","original":{"line":68,"column":17},"generated":{"line":1,"column":1141}},{"source":"main_bw.js","original":{"line":72,"column":11},"generated":{"line":1,"column":1142}},{"source":"main_bw.js","original":{"line":72,"column":11},"generated":{"line":1,"column":1147}},{"source":"main_bw.js","original":{"line":73,"column":18},"generated":{"line":1,"column":1182}},{"source":"main_bw.js","original":{"line":73,"column":18},"generated":{"line":1,"column":1193}},{"source":"main_bw.js","original":{"line":74,"column":16},"generated":{"line":1,"column":1204}},{"source":"main_bw.js","original":{"line":74,"column":16},"generated":{"line":1,"column":1213}},{"source":"main_bw.js","original":{"line":80,"column":0},"generated":{"line":1,"column":1227}},{"source":"main_bw.js","name":"sendMessage","original":{"line":80,"column":9},"generated":{"line":1,"column":1236}},{"source":"main_bw.js","name":"roomid","original":{"line":80,"column":21},"generated":{"line":1,"column":1238}},{"source":"main_bw.js","name":"data","original":{"line":80,"column":29},"generated":{"line":1,"column":1240}},{"source":"main_bw.js","name":"console","original":{"line":82,"column":1},"generated":{"line":1,"column":1243}},{"source":"main_bw.js","name":"log","original":{"line":82,"column":9},"generated":{"line":1,"column":1251}},{"source":"main_bw.js","original":{"line":82,"column":13},"generated":{"line":1,"column":1255}},{"source":"main_bw.js","name":"roomid","original":{"line":82,"column":42},"generated":{"line":1,"column":1283}},{"source":"main_bw.js","name":"data","original":{"line":82,"column":50},"generated":{"line":1,"column":1285}},{"source":"main_bw.js","name":"socket","original":{"line":83,"column":5},"generated":{"line":1,"column":1288}},{"source":"main_bw.js","name":"console","original":{"line":84,"column":2},"generated":{"line":1,"column":1291}},{"source":"main_bw.js","name":"log","original":{"line":84,"column":10},"generated":{"line":1,"column":1299}},{"source":"main_bw.js","original":{"line":84,"column":14},"generated":{"line":1,"column":1303}},{"source":"main_bw.js","name":"socket","original":{"line":86,"column":1},"generated":{"line":1,"column":1321}},{"source":"main_bw.js","name":"emit","original":{"line":86,"column":8},"generated":{"line":1,"column":1323}},{"source":"main_bw.js","original":{"line":86,"column":13},"generated":{"line":1,"column":1328}},{"source":"main_bw.js","name":"roomid","original":{"line":86,"column":24},"generated":{"line":1,"column":1338}},{"source":"main_bw.js","name":"data","original":{"line":86,"column":32},"generated":{"line":1,"column":1340}},{"source":"main_bw.js","original":{"line":89,"column":0},"generated":{"line":1,"column":1343}},{"source":"main_bw.js","name":"conn","original":{"line":89,"column":9},"generated":{"line":1,"column":1352}},{"source":"main_bw.js","original":{"line":214,"column":8},"generated":{"line":1,"column":1356}},{"source":"main_bw.js","name":"socket","original":{"line":91,"column":1},"generated":{"line":1,"column":1363}},{"source":"main_bw.js","name":"io","original":{"line":91,"column":10},"generated":{"line":1,"column":1365}},{"source":"main_bw.js","name":"connect","original":{"line":91,"column":13},"generated":{"line":1,"column":1368}},{"source":"main_bw.js","name":"on","original":{"line":93,"column":8},"generated":{"line":1,"column":1379}},{"source":"main_bw.js","original":{"line":93,"column":11},"generated":{"line":1,"column":1382}},{"source":"main_bw.js","original":{"line":93,"column":21},"generated":{"line":1,"column":1391}},{"source":"main_bw.js","name":"roomid","original":{"line":93,"column":22},"generated":{"line":1,"column":1392}},{"source":"main_bw.js","name":"id","original":{"line":93,"column":30},"generated":{"line":1,"column":1394}},{"source":"main_bw.js","name":"console","original":{"line":94,"column":2},"generated":{"line":1,"column":1399}},{"source":"main_bw.js","name":"log","original":{"line":94,"column":10},"generated":{"line":1,"column":1407}},{"source":"main_bw.js","original":{"line":94,"column":14},"generated":{"line":1,"column":1411}},{"source":"main_bw.js","name":"roomid","original":{"line":94,"column":41},"generated":{"line":1,"column":1437}},{"source":"main_bw.js","name":"id","original":{"line":94,"column":49},"generated":{"line":1,"column":1439}},{"source":"main_bw.js","name":"state","original":{"line":95,"column":2},"generated":{"line":1,"column":1442}},{"source":"main_bw.js","original":{"line":95,"column":10},"generated":{"line":1,"column":1444}},{"source":"main_bw.js","name":"createPeerConnection","original":{"line":102,"column":2},"generated":{"line":1,"column":1453}},{"source":"main_bw.js","name":"bindTracks","original":{"line":103,"column":2},"generated":{"line":1,"column":1457}},{"source":"main_bw.js","name":"btnConn","original":{"line":105,"column":2},"generated":{"line":1,"column":1461}},{"source":"main_bw.js","name":"disabled","original":{"line":105,"column":10},"generated":{"line":1,"column":1463}},{"source":"main_bw.js","original":{"line":105,"column":21},"generated":{"line":1,"column":1473}},{"source":"main_bw.js","name":"btnLeave","original":{"line":106,"column":2},"generated":{"line":1,"column":1475}},{"source":"main_bw.js","name":"disabled","original":{"line":106,"column":11},"generated":{"line":1,"column":1477}},{"source":"main_bw.js","original":{"line":106,"column":22},"generated":{"line":1,"column":1487}},{"source":"main_bw.js","name":"console","original":{"line":107,"column":2},"generated":{"line":1,"column":1489}},{"source":"main_bw.js","name":"log","original":{"line":107,"column":10},"generated":{"line":1,"column":1497}},{"source":"main_bw.js","original":{"line":107,"column":14},"generated":{"line":1,"column":1501}},{"source":"main_bw.js","name":"state","original":{"line":107,"column":48},"generated":{"line":1,"column":1534}},{"source":"main_bw.js","name":"socket","original":{"line":110,"column":1},"generated":{"line":1,"column":1539}},{"source":"main_bw.js","name":"on","original":{"line":110,"column":8},"generated":{"line":1,"column":1541}},{"source":"main_bw.js","original":{"line":110,"column":11},"generated":{"line":1,"column":1544}},{"source":"main_bw.js","name":"roomid","original":{"line":110,"column":25},"generated":{"line":1,"column":1556}},{"source":"main_bw.js","name":"console","original":{"line":111,"column":2},"generated":{"line":1,"column":1560}},{"source":"main_bw.js","name":"log","original":{"line":111,"column":10},"generated":{"line":1,"column":1568}},{"source":"main_bw.js","original":{"line":111,"column":14},"generated":{"line":1,"column":1572}},{"source":"main_bw.js","name":"roomid","original":{"line":111,"column":41},"generated":{"line":1,"column":1598}},{"source":"main_bw.js","name":"state","original":{"line":111,"column":49},"generated":{"line":1,"column":1600}},{"source":"main_bw.js","original":{"line":115,"column":15},"generated":{"line":1,"column":1603}},{"source":"main_bw.js","name":"state","original":{"line":115,"column":5},"generated":{"line":1,"column":1621}},{"source":"main_bw.js","name":"createPeerConnection","original":{"line":116,"column":3},"generated":{"line":1,"column":1625}},{"source":"main_bw.js","name":"bindTracks","original":{"line":117,"column":3},"generated":{"line":1,"column":1629}},{"source":"main_bw.js","name":"state","original":{"line":120,"column":2},"generated":{"line":1,"column":1634}},{"source":"main_bw.js","original":{"line":120,"column":10},"generated":{"line":1,"column":1636}},{"source":"main_bw.js","name":"call","original":{"line":121,"column":2},"generated":{"line":1,"column":1650}},{"source":"main_bw.js","name":"console","original":{"line":123,"column":2},"generated":{"line":1,"column":1654}},{"source":"main_bw.js","name":"log","original":{"line":123,"column":10},"generated":{"line":1,"column":1662}},{"source":"main_bw.js","original":{"line":123,"column":14},"generated":{"line":1,"column":1666}},{"source":"main_bw.js","name":"state","original":{"line":123,"column":52},"generated":{"line":1,"column":1703}},{"source":"main_bw.js","name":"socket","original":{"line":126,"column":1},"generated":{"line":1,"column":1708}},{"source":"main_bw.js","name":"on","original":{"line":126,"column":8},"generated":{"line":1,"column":1710}},{"source":"main_bw.js","original":{"line":126,"column":11},"generated":{"line":1,"column":1713}},{"source":"main_bw.js","original":{"line":126,"column":19},"generated":{"line":1,"column":1720}},{"source":"main_bw.js","name":"roomid","original":{"line":126,"column":20},"generated":{"line":1,"column":1721}},{"source":"main_bw.js","name":"id","original":{"line":126,"column":28},"generated":{"line":1,"column":1723}},{"source":"main_bw.js","name":"console","original":{"line":127,"column":2},"generated":{"line":1,"column":1728}},{"source":"main_bw.js","name":"log","original":{"line":127,"column":10},"generated":{"line":1,"column":1736}},{"source":"main_bw.js","original":{"line":127,"column":14},"generated":{"line":1,"column":1740}},{"source":"main_bw.js","name":"roomid","original":{"line":127,"column":38},"generated":{"line":1,"column":1763}},{"source":"main_bw.js","name":"id","original":{"line":127,"column":46},"generated":{"line":1,"column":1765}},{"source":"main_bw.js","name":"socket","original":{"line":128,"column":2},"generated":{"line":1,"column":1768}},{"source":"main_bw.js","name":"disconnect","original":{"line":128,"column":9},"generated":{"line":1,"column":1770}},{"source":"main_bw.js","name":"hangup","original":{"line":129,"column":2},"generated":{"line":1,"column":1783}},{"source":"main_bw.js","name":"closeLocalMedia","original":{"line":130,"column":2},"generated":{"line":1,"column":1787}},{"source":"main_bw.js","name":"state","original":{"line":131,"column":2},"generated":{"line":1,"column":1791}},{"source":"main_bw.js","original":{"line":131,"column":10},"generated":{"line":1,"column":1793}},{"source":"main_bw.js","name":"console","original":{"line":132,"column":2},"generated":{"line":1,"column":1802}},{"source":"main_bw.js","name":"log","original":{"line":132,"column":10},"generated":{"line":1,"column":1810}},{"source":"main_bw.js","original":{"line":132,"column":14},"generated":{"line":1,"column":1814}},{"source":"main_bw.js","name":"state","original":{"line":132,"column":46},"generated":{"line":1,"column":1845}},{"source":"main_bw.js","name":"alert","original":{"line":133,"column":2},"generated":{"line":1,"column":1848}},{"source":"main_bw.js","original":{"line":133,"column":8},"generated":{"line":1,"column":1854}},{"source":"main_bw.js","name":"socket","original":{"line":136,"column":1},"generated":{"line":1,"column":1877}},{"source":"main_bw.js","name":"on","original":{"line":136,"column":8},"generated":{"line":1,"column":1879}},{"source":"main_bw.js","original":{"line":136,"column":11},"generated":{"line":1,"column":1882}},{"source":"main_bw.js","original":{"line":136,"column":21},"generated":{"line":1,"column":1891}},{"source":"main_bw.js","name":"roomid","original":{"line":136,"column":22},"generated":{"line":1,"column":1892}},{"source":"main_bw.js","name":"id","original":{"line":136,"column":30},"generated":{"line":1,"column":1894}},{"source":"main_bw.js","name":"console","original":{"line":137,"column":2},"generated":{"line":1,"column":1899}},{"source":"main_bw.js","name":"log","original":{"line":137,"column":10},"generated":{"line":1,"column":1907}},{"source":"main_bw.js","original":{"line":137,"column":14},"generated":{"line":1,"column":1911}},{"source":"main_bw.js","name":"roomid","original":{"line":137,"column":40},"generated":{"line":1,"column":1936}},{"source":"main_bw.js","name":"id","original":{"line":137,"column":48},"generated":{"line":1,"column":1938}},{"source":"main_bw.js","name":"state","original":{"line":138,"column":2},"generated":{"line":1,"column":1941}},{"source":"main_bw.js","original":{"line":138,"column":8},"generated":{"line":1,"column":1943}},{"source":"main_bw.js","name":"socket","original":{"line":139,"column":2},"generated":{"line":1,"column":1952}},{"source":"main_bw.js","name":"disconnect","original":{"line":139,"column":9},"generated":{"line":1,"column":1954}},{"source":"main_bw.js","name":"console","original":{"line":140,"column":2},"generated":{"line":1,"column":1967}},{"source":"main_bw.js","name":"log","original":{"line":140,"column":10},"generated":{"line":1,"column":1975}},{"source":"main_bw.js","original":{"line":140,"column":14},"generated":{"line":1,"column":1979}},{"source":"main_bw.js","name":"state","original":{"line":140,"column":48},"generated":{"line":1,"column":2012}},{"source":"main_bw.js","name":"btnConn","original":{"line":142,"column":2},"generated":{"line":1,"column":2015}},{"source":"main_bw.js","name":"disabled","original":{"line":142,"column":10},"generated":{"line":1,"column":2017}},{"source":"main_bw.js","original":{"line":142,"column":21},"generated":{"line":1,"column":2027}},{"source":"main_bw.js","name":"btnLeave","original":{"line":143,"column":2},"generated":{"line":1,"column":2029}},{"source":"main_bw.js","name":"disabled","original":{"line":143,"column":11},"generated":{"line":1,"column":2031}},{"source":"main_bw.js","original":{"line":143,"column":22},"generated":{"line":1,"column":2041}},{"source":"main_bw.js","name":"socket","original":{"line":146,"column":1},"generated":{"line":1,"column":2045}},{"source":"main_bw.js","name":"on","original":{"line":146,"column":8},"generated":{"line":1,"column":2047}},{"source":"main_bw.js","original":{"line":146,"column":11},"generated":{"line":1,"column":2050}},{"source":"main_bw.js","original":{"line":146,"column":18},"generated":{"line":1,"column":2056}},{"source":"main_bw.js","name":"room","original":{"line":146,"column":19},"generated":{"line":1,"column":2057}},{"source":"main_bw.js","name":"id","original":{"line":146,"column":25},"generated":{"line":1,"column":2059}},{"source":"main_bw.js","name":"console","original":{"line":147,"column":2},"generated":{"line":1,"column":2064}},{"source":"main_bw.js","name":"log","original":{"line":147,"column":10},"generated":{"line":1,"column":2072}},{"source":"main_bw.js","original":{"line":147,"column":14},"generated":{"line":1,"column":2076}},{"source":"main_bw.js","name":"roomid","original":{"line":147,"column":37},"generated":{"line":1,"column":2098}},{"source":"main_bw.js","name":"id","original":{"line":147,"column":45},"generated":{"line":1,"column":2100}},{"source":"main_bw.js","name":"state","original":{"line":154,"column":2},"generated":{"line":1,"column":2103}},{"source":"main_bw.js","original":{"line":154,"column":10},"generated":{"line":1,"column":2105}},{"source":"main_bw.js","name":"hangup","original":{"line":155,"column":2},"generated":{"line":1,"column":2121}},{"source":"main_bw.js","name":"console","original":{"line":156,"column":2},"generated":{"line":1,"column":2125}},{"source":"main_bw.js","name":"log","original":{"line":156,"column":10},"generated":{"line":1,"column":2133}},{"source":"main_bw.js","original":{"line":156,"column":14},"generated":{"line":1,"column":2137}},{"source":"main_bw.js","name":"state","original":{"line":156,"column":45},"generated":{"line":1,"column":2167}},{"source":"main_bw.js","name":"socket","original":{"line":159,"column":1},"generated":{"line":1,"column":2172}},{"source":"main_bw.js","name":"on","original":{"line":159,"column":8},"generated":{"line":1,"column":2174}},{"source":"main_bw.js","original":{"line":159,"column":11},"generated":{"line":1,"column":2177}},{"source":"main_bw.js","name":"socket","original":{"line":159,"column":26},"generated":{"line":1,"column":2190}},{"source":"main_bw.js","name":"console","original":{"line":160,"column":2},"generated":{"line":1,"column":2194}},{"source":"main_bw.js","name":"log","original":{"line":160,"column":10},"generated":{"line":1,"column":2202}},{"source":"main_bw.js","original":{"line":160,"column":14},"generated":{"line":1,"column":2206}},{"source":"main_bw.js","name":"roomid","original":{"line":160,"column":45},"generated":{"line":1,"column":2236}},{"source":"main_bw.js","original":{"line":161,"column":17},"generated":{"line":1,"column":2239}},{"source":"main_bw.js","name":"state","original":{"line":161,"column":7},"generated":{"line":1,"column":2250}},{"source":"main_bw.js","name":"hangup","original":{"line":162,"column":3},"generated":{"line":1,"column":2254}},{"source":"main_bw.js","name":"closeLocalMedia","original":{"line":163,"column":3},"generated":{"line":1,"column":2258}},{"source":"main_bw.js","name":"state","original":{"line":166,"column":2},"generated":{"line":1,"column":2263}},{"source":"main_bw.js","original":{"line":166,"column":10},"generated":{"line":1,"column":2265}},{"source":"main_bw.js","name":"socket","original":{"line":170,"column":1},"generated":{"line":1,"column":2276}},{"source":"main_bw.js","name":"on","original":{"line":170,"column":8},"generated":{"line":1,"column":2278}},{"source":"main_bw.js","original":{"line":170,"column":11},"generated":{"line":1,"column":2281}},{"source":"main_bw.js","original":{"line":170,"column":22},"generated":{"line":1,"column":2291}},{"source":"main_bw.js","name":"roomid","original":{"line":170,"column":23},"generated":{"line":1,"column":2292}},{"source":"main_bw.js","name":"data","original":{"line":170,"column":31},"generated":{"line":1,"column":2294}},{"source":"main_bw.js","name":"data","original":{"line":173,"column":5},"generated":{"line":1,"column":2299}},{"source":"main_bw.js","name":"console","original":{"line":171,"column":2},"generated":{"line":1,"column":2302}},{"source":"main_bw.js","name":"log","original":{"line":171,"column":10},"generated":{"line":1,"column":2310}},{"source":"main_bw.js","original":{"line":171,"column":14},"generated":{"line":1,"column":2314}},{"source":"main_bw.js","name":"roomid","original":{"line":171,"column":34},"generated":{"line":1,"column":2333}},{"source":"main_bw.js","name":"data","original":{"line":171,"column":42},"generated":{"line":1,"column":2335}},{"source":"main_bw.js","name":"data","original":{"line":173,"column":5},"generated":{"line":1,"column":2338}},{"source":"main_bw.js","name":"data","original":{"line":173,"column":5},"generated":{"line":1,"column":2344}},{"source":"main_bw.js","name":"data","original":{"line":178,"column":5},"generated":{"line":1,"column":2346}},{"source":"main_bw.js","name":"data","original":{"line":178,"column":5},"generated":{"line":1,"column":2349}},{"source":"main_bw.js","name":"hasOwnProperty","original":{"line":178,"column":10},"generated":{"line":1,"column":2351}},{"source":"main_bw.js","original":{"line":178,"column":25},"generated":{"line":1,"column":2366}},{"source":"main_bw.js","original":{"line":178,"column":50},"generated":{"line":1,"column":2375}},{"source":"main_bw.js","name":"data","original":{"line":178,"column":36},"generated":{"line":1,"column":2385}},{"source":"main_bw.js","name":"type","original":{"line":178,"column":41},"generated":{"line":1,"column":2387}},{"source":"main_bw.js","name":"pc","original":{"line":180,"column":3},"generated":{"line":1,"column":2392}},{"source":"main_bw.js","name":"setRemoteDescription","original":{"line":180,"column":6},"generated":{"line":1,"column":2394}},{"source":"main_bw.js","original":{"line":180,"column":27},"generated":{"line":1,"column":2415}},{"source":"main_bw.js","name":"RTCSessionDescription","original":{"line":180,"column":31},"generated":{"line":1,"column":2419}},{"source":"main_bw.js","name":"data","original":{"line":180,"column":53},"generated":{"line":1,"column":2441}},{"source":"main_bw.js","name":"pc","original":{"line":182,"column":3},"generated":{"line":1,"column":2445}},{"source":"main_bw.js","name":"createAnswer","original":{"line":182,"column":6},"generated":{"line":1,"column":2447}},{"source":"main_bw.js","name":"then","original":{"line":183,"column":5},"generated":{"line":1,"column":2462}},{"source":"main_bw.js","name":"getAnswer","original":{"line":183,"column":10},"generated":{"line":1,"column":2467}},{"source":"main_bw.js","name":"catch","original":{"line":184,"column":5},"generated":{"line":1,"column":2470}},{"source":"main_bw.js","name":"handleAnswerError","original":{"line":184,"column":11},"generated":{"line":1,"column":2476}},{"source":"main_bw.js","original":{"line":186,"column":8},"generated":{"line":1,"column":2484}},{"source":"main_bw.js","name":"data","original":{"line":186,"column":11},"generated":{"line":1,"column":2487}},{"source":"main_bw.js","name":"hasOwnProperty","original":{"line":186,"column":16},"generated":{"line":1,"column":2489}},{"source":"main_bw.js","original":{"line":186,"column":31},"generated":{"line":1,"column":2504}},{"source":"main_bw.js","original":{"line":186,"column":56},"generated":{"line":1,"column":2513}},{"source":"main_bw.js","name":"data","original":{"line":186,"column":42},"generated":{"line":1,"column":2524}},{"source":"main_bw.js","name":"type","original":{"line":186,"column":47},"generated":{"line":1,"column":2526}},{"source":"main_bw.js","name":"pc","original":{"line":187,"column":3},"generated":{"line":1,"column":2531}},{"source":"main_bw.js","name":"setRemoteDescription","original":{"line":187,"column":6},"generated":{"line":1,"column":2533}},{"source":"main_bw.js","original":{"line":187,"column":27},"generated":{"line":1,"column":2554}},{"source":"main_bw.js","name":"RTCSessionDescription","original":{"line":187,"column":31},"generated":{"line":1,"column":2558}},{"source":"main_bw.js","name":"data","original":{"line":187,"column":53},"generated":{"line":1,"column":2580}},{"source":"main_bw.js","name":"bandwidth","original":{"line":188,"column":3},"generated":{"line":1,"column":2584}},{"source":"main_bw.js","name":"disabled","original":{"line":188,"column":13},"generated":{"line":1,"column":2586}},{"source":"main_bw.js","original":{"line":188,"column":24},"generated":{"line":1,"column":2596}},{"source":"main_bw.js","original":{"line":190,"column":8},"generated":{"line":1,"column":2603}},{"source":"main_bw.js","name":"data","original":{"line":190,"column":12},"generated":{"line":1,"column":2606}},{"source":"main_bw.js","name":"hasOwnProperty","original":{"line":190,"column":17},"generated":{"line":1,"column":2608}},{"source":"main_bw.js","original":{"line":190,"column":32},"generated":{"line":1,"column":2623}},{"source":"main_bw.js","original":{"line":190,"column":57},"generated":{"line":1,"column":2632}},{"source":"main_bw.js","name":"data","original":{"line":190,"column":43},"generated":{"line":1,"column":2646}},{"source":"main_bw.js","name":"type","original":{"line":190,"column":48},"generated":{"line":1,"column":2648}},{"source":"main_bw.js","original":{"line":190,"column":69},"generated":{"line":1,"column":2653}},{"source":"main_bw.js","name":"candidate","original":{"line":191,"column":7},"generated":{"line":1,"column":2654}},{"source":"main_bw.js","name":"candidate","original":{"line":191,"column":7},"generated":{"line":1,"column":2658}},{"source":"main_bw.js","original":{"line":191,"column":19},"generated":{"line":1,"column":2660}},{"source":"main_bw.js","name":"RTCIceCandidate","original":{"line":191,"column":23},"generated":{"line":1,"column":2664}},{"source":"main_bw.js","original":{"line":191,"column":39},"generated":{"line":1,"column":2680}},{"source":"main_bw.js","name":"sdpMLineIndex","original":{"line":192,"column":4},"generated":{"line":1,"column":2681}},{"source":"main_bw.js","name":"data","original":{"line":192,"column":19},"generated":{"line":1,"column":2695}},{"source":"main_bw.js","name":"label","original":{"line":192,"column":24},"generated":{"line":1,"column":2697}},{"source":"main_bw.js","name":"candidate","original":{"line":193,"column":4},"generated":{"line":1,"column":2703}},{"source":"main_bw.js","name":"data","original":{"line":193,"column":15},"generated":{"line":1,"column":2713}},{"source":"main_bw.js","name":"candidate","original":{"line":193,"column":20},"generated":{"line":1,"column":2715}},{"source":"main_bw.js","name":"pc","original":{"line":195,"column":3},"generated":{"line":1,"column":2727}},{"source":"main_bw.js","name":"addIceCandidate","original":{"line":195,"column":6},"generated":{"line":1,"column":2729}},{"source":"main_bw.js","name":"candidate","original":{"line":195,"column":22},"generated":{"line":1,"column":2745}},{"source":"main_bw.js","name":"then","original":{"line":196,"column":5},"generated":{"line":1,"column":2748}},{"source":"main_bw.js","original":{"line":196,"column":10},"generated":{"line":1,"column":2753}},{"source":"main_bw.js","name":"console","original":{"line":197,"column":5},"generated":{"line":1,"column":2758}},{"source":"main_bw.js","name":"log","original":{"line":197,"column":13},"generated":{"line":1,"column":2766}},{"source":"main_bw.js","original":{"line":197,"column":17},"generated":{"line":1,"column":2770}},{"source":"main_bw.js","name":"catch","original":{"line":199,"column":5},"generated":{"line":1,"column":2806}},{"source":"main_bw.js","name":"err","original":{"line":199,"column":11},"generated":{"line":1,"column":2812}},{"source":"main_bw.js","name":"console","original":{"line":200,"column":5},"generated":{"line":1,"column":2816}},{"source":"main_bw.js","name":"error","original":{"line":200,"column":13},"generated":{"line":1,"column":2824}},{"source":"main_bw.js","name":"err","original":{"line":200,"column":19},"generated":{"line":1,"column":2830}},{"source":"main_bw.js","name":"console","original":{"line":204,"column":3},"generated":{"line":1,"column":2840}},{"source":"main_bw.js","name":"log","original":{"line":204,"column":11},"generated":{"line":1,"column":2848}},{"source":"main_bw.js","original":{"line":204,"column":15},"generated":{"line":1,"column":2852}},{"source":"main_bw.js","name":"data","original":{"line":204,"column":42},"generated":{"line":1,"column":2878}},{"source":"main_bw.js","name":"console","original":{"line":174,"column":3},"generated":{"line":1,"column":2886}},{"source":"main_bw.js","name":"error","original":{"line":174,"column":11},"generated":{"line":1,"column":2894}},{"source":"main_bw.js","original":{"line":174,"column":17},"generated":{"line":1,"column":2900}},{"source":"main_bw.js","name":"roomid","original":{"line":211,"column":1},"generated":{"line":1,"column":2929}},{"source":"main_bw.js","original":{"line":211,"column":10},"generated":{"line":1,"column":2931}},{"source":"main_bw.js","name":"socket","original":{"line":212,"column":1},"generated":{"line":1,"column":2940}},{"source":"main_bw.js","name":"emit","original":{"line":212,"column":8},"generated":{"line":1,"column":2942}},{"source":"main_bw.js","original":{"line":212,"column":13},"generated":{"line":1,"column":2947}},{"source":"main_bw.js","name":"roomid","original":{"line":212,"column":21},"generated":{"line":1,"column":2954}},{"source":"main_bw.js","original":{"line":214,"column":8},"generated":{"line":1,"column":2958}},{"source":"main_bw.js","original":{"line":217,"column":0},"generated":{"line":1,"column":2960}},{"source":"main_bw.js","name":"connSignalServer","original":{"line":217,"column":15},"generated":{"line":1,"column":2975}},{"source":"main_bw.js","original":{"line":249,"column":8},"generated":{"line":1,"column":2979}},{"source":"main_bw.js","name":"start","original":{"line":220,"column":1},"generated":{"line":1,"column":2986}},{"source":"main_bw.js","original":{"line":249,"column":8},"generated":{"line":1,"column":2991}},{"source":"main_bw.js","original":{"line":252,"column":1},"generated":{"line":1,"column":2993}},{"source":"main_bw.js","name":"getMediaStream","original":{"line":252,"column":10},"generated":{"line":1,"column":3002}},{"source":"main_bw.js","name":"stream","original":{"line":252,"column":25},"generated":{"line":1,"column":3004}},{"source":"main_bw.js","name":"localStream","original":{"line":253,"column":1},"generated":{"line":1,"column":3007}},{"source":"main_bw.js","name":"stream","original":{"line":253,"column":15},"generated":{"line":1,"column":3009}},{"source":"main_bw.js","name":"localVideo","original":{"line":254,"column":1},"generated":{"line":1,"column":3011}},{"source":"main_bw.js","name":"srcObject","original":{"line":254,"column":12},"generated":{"line":1,"column":3013}},{"source":"main_bw.js","name":"localStream","original":{"line":254,"column":24},"generated":{"line":1,"column":3023}},{"source":"main_bw.js","name":"conn","original":{"line":256,"column":1},"generated":{"line":1,"column":3025}},{"source":"main_bw.js","name":"localVideo","original":{"line":258,"column":12},"generated":{"line":1,"column":3030}},{"source":"main_bw.js","name":"localVideo","original":{"line":258,"column":12},"generated":{"line":1,"column":3032}},{"source":"main_bw.js","name":"localVideo","original":{"line":258,"column":12},"generated":{"line":1,"column":3034}},{"source":"main_bw.js","name":"localVideo","original":{"line":258,"column":12},"generated":{"line":1,"column":3044}},{"source":"main_bw.js","name":"local_output","original":{"line":258,"column":23},"generated":{"line":1,"column":3046}},{"source":"main_bw.js","original":{"line":263,"column":0},"generated":{"line":1,"column":3049}},{"source":"main_bw.js","name":"getDeskStream","original":{"line":263,"column":9},"generated":{"line":1,"column":3058}},{"source":"main_bw.js","name":"stream","original":{"line":263,"column":23},"generated":{"line":1,"column":3060}},{"source":"main_bw.js","name":"localStream","original":{"line":264,"column":1},"generated":{"line":1,"column":3063}},{"source":"main_bw.js","name":"stream","original":{"line":264,"column":15},"generated":{"line":1,"column":3065}},{"source":"main_bw.js","original":{"line":267,"column":0},"generated":{"line":1,"column":3067}},{"source":"main_bw.js","name":"handleError","original":{"line":267,"column":9},"generated":{"line":1,"column":3076}},{"source":"main_bw.js","name":"err","original":{"line":267,"column":21},"generated":{"line":1,"column":3078}},{"source":"main_bw.js","name":"console","original":{"line":268,"column":1},"generated":{"line":1,"column":3081}},{"source":"main_bw.js","name":"error","original":{"line":268,"column":9},"generated":{"line":1,"column":3089}},{"source":"main_bw.js","original":{"line":268,"column":15},"generated":{"line":1,"column":3095}},{"source":"main_bw.js","name":"err","original":{"line":268,"column":46},"generated":{"line":1,"column":3125}},{"source":"main_bw.js","original":{"line":271,"column":0},"generated":{"line":1,"column":3128}},{"source":"main_bw.js","name":"shareDesk","original":{"line":271,"column":9},"generated":{"line":1,"column":3137}},{"source":"main_bw.js","name":"IsPC","original":{"line":273,"column":4},"generated":{"line":1,"column":3141}},{"source":"main_bw.js","name":"IsPC","original":{"line":273,"column":4},"generated":{"line":1,"column":3149}},{"source":"main_bw.js","name":"navigator","original":{"line":274,"column":2},"generated":{"line":1,"column":3158}},{"source":"main_bw.js","name":"mediaDevices","original":{"line":274,"column":12},"generated":{"line":1,"column":3168}},{"source":"main_bw.js","name":"getDisplayMedia","original":{"line":274,"column":25},"generated":{"line":1,"column":3181}},{"source":"main_bw.js","original":{"line":274,"column":41},"generated":{"line":1,"column":3197}},{"source":"main_bw.js","name":"video","original":{"line":274,"column":42},"generated":{"line":1,"column":3198}},{"source":"main_bw.js","original":{"line":274,"column":49},"generated":{"line":1,"column":3205}},{"source":"main_bw.js","name":"then","original":{"line":275,"column":4},"generated":{"line":1,"column":3209}},{"source":"main_bw.js","name":"getDeskStream","original":{"line":275,"column":9},"generated":{"line":1,"column":3214}},{"source":"main_bw.js","name":"catch","original":{"line":276,"column":4},"generated":{"line":1,"column":3217}},{"source":"main_bw.js","name":"handleError","original":{"line":276,"column":10},"generated":{"line":1,"column":3223}},{"source":"main_bw.js","original":{"line":278,"column":9},"generated":{"line":1,"column":3227}},{"source":"main_bw.js","original":{"line":285,"column":0},"generated":{"line":1,"column":3230}},{"source":"main_bw.js","name":"start","original":{"line":285,"column":9},"generated":{"line":1,"column":3239}},{"source":"main_bw.js","original":{"line":287,"column":4},"generated":{"line":1,"column":3243}},{"source":"main_bw.js","name":"navigator","original":{"line":287,"column":5},"generated":{"line":1,"column":3246}},{"source":"main_bw.js","name":"mediaDevices","original":{"line":287,"column":15},"generated":{"line":1,"column":3256}},{"source":"main_bw.js","name":"navigator","original":{"line":288,"column":3},"generated":{"line":1,"column":3270}},{"source":"main_bw.js","name":"mediaDevices","original":{"line":288,"column":13},"generated":{"line":1,"column":3280}},{"source":"main_bw.js","name":"getUserMedia","original":{"line":288,"column":26},"generated":{"line":1,"column":3293}},{"source":"main_bw.js","original":{"line":287,"column":4},"generated":{"line":1,"column":3306}},{"source":"main_bw.js","name":"navigator","original":{"line":300,"column":2},"generated":{"line":1,"column":3307}},{"source":"main_bw.js","name":"mediaDevices","original":{"line":300,"column":12},"generated":{"line":1,"column":3317}},{"source":"main_bw.js","name":"getUserMedia","original":{"line":300,"column":25},"generated":{"line":1,"column":3330}},{"source":"main_bw.js","original":{"line":293,"column":20},"generated":{"line":1,"column":3343}},{"source":"main_bw.js","name":"video","original":{"line":294,"column":3},"generated":{"line":1,"column":3344}},{"source":"main_bw.js","original":{"line":294,"column":10},"generated":{"line":1,"column":3351}},{"source":"main_bw.js","name":"audio","original":{"line":295,"column":3},"generated":{"line":1,"column":3353}},{"source":"main_bw.js","original":{"line":295,"column":10},"generated":{"line":1,"column":3360}},{"source":"main_bw.js","name":"then","original":{"line":301,"column":6},"generated":{"line":1,"column":3364}},{"source":"main_bw.js","name":"getMediaStream","original":{"line":301,"column":11},"generated":{"line":1,"column":3369}},{"source":"main_bw.js","name":"catch","original":{"line":302,"column":6},"generated":{"line":1,"column":3372}},{"source":"main_bw.js","name":"handleError","original":{"line":302,"column":12},"generated":{"line":1,"column":3378}},{"source":"main_bw.js","name":"console","original":{"line":289,"column":2},"generated":{"line":1,"column":3386}},{"source":"main_bw.js","name":"error","original":{"line":289,"column":10},"generated":{"line":1,"column":3394}},{"source":"main_bw.js","original":{"line":289,"column":16},"generated":{"line":1,"column":3400}},{"source":"main_bw.js","original":{"line":307,"column":0},"generated":{"line":1,"column":3438}},{"source":"main_bw.js","name":"getRemoteStream","original":{"line":307,"column":9},"generated":{"line":1,"column":3447}},{"source":"main_bw.js","name":"e","original":{"line":307,"column":25},"generated":{"line":1,"column":3449}},{"source":"main_bw.js","name":"remoteStream","original":{"line":308,"column":1},"generated":{"line":1,"column":3452}},{"source":"main_bw.js","name":"e","original":{"line":308,"column":16},"generated":{"line":1,"column":3454}},{"source":"main_bw.js","name":"streams","original":{"line":308,"column":18},"generated":{"line":1,"column":3456}},{"source":"main_bw.js","original":{"line":308,"column":26},"generated":{"line":1,"column":3464}},{"source":"main_bw.js","name":"remoteVideo","original":{"line":309,"column":1},"generated":{"line":1,"column":3467}},{"source":"main_bw.js","name":"srcObject","original":{"line":309,"column":13},"generated":{"line":1,"column":3469}},{"source":"main_bw.js","name":"e","original":{"line":309,"column":25},"generated":{"line":1,"column":3479}},{"source":"main_bw.js","name":"streams","original":{"line":309,"column":27},"generated":{"line":1,"column":3481}},{"source":"main_bw.js","original":{"line":309,"column":35},"generated":{"line":1,"column":3489}},{"source":"main_bw.js","original":{"line":313,"column":0},"generated":{"line":1,"column":3492}},{"source":"main_bw.js","name":"handleOfferError","original":{"line":313,"column":9},"generated":{"line":1,"column":3501}},{"source":"main_bw.js","name":"err","original":{"line":313,"column":26},"generated":{"line":1,"column":3503}},{"source":"main_bw.js","name":"console","original":{"line":314,"column":1},"generated":{"line":1,"column":3506}},{"source":"main_bw.js","name":"error","original":{"line":314,"column":9},"generated":{"line":1,"column":3514}},{"source":"main_bw.js","original":{"line":314,"column":15},"generated":{"line":1,"column":3520}},{"source":"main_bw.js","name":"err","original":{"line":314,"column":42},"generated":{"line":1,"column":3546}},{"source":"main_bw.js","original":{"line":317,"column":0},"generated":{"line":1,"column":3549}},{"source":"main_bw.js","name":"handleAnswerError","original":{"line":317,"column":9},"generated":{"line":1,"column":3558}},{"source":"main_bw.js","name":"err","original":{"line":317,"column":27},"generated":{"line":1,"column":3560}},{"source":"main_bw.js","name":"console","original":{"line":318,"column":1},"generated":{"line":1,"column":3563}},{"source":"main_bw.js","name":"error","original":{"line":318,"column":9},"generated":{"line":1,"column":3571}},{"source":"main_bw.js","original":{"line":318,"column":15},"generated":{"line":1,"column":3577}},{"source":"main_bw.js","name":"err","original":{"line":318,"column":43},"generated":{"line":1,"column":3604}},{"source":"main_bw.js","original":{"line":321,"column":0},"generated":{"line":1,"column":3607}},{"source":"main_bw.js","name":"getAnswer","original":{"line":321,"column":9},"generated":{"line":1,"column":3616}},{"source":"main_bw.js","name":"desc","original":{"line":321,"column":19},"generated":{"line":1,"column":3618}},{"source":"main_bw.js","name":"pc","original":{"line":322,"column":1},"generated":{"line":1,"column":3621}},{"source":"main_bw.js","name":"setLocalDescription","original":{"line":322,"column":4},"generated":{"line":1,"column":3623}},{"source":"main_bw.js","name":"desc","original":{"line":322,"column":24},"generated":{"line":1,"column":3643}},{"source":"main_bw.js","name":"bandwidth","original":{"line":323,"column":1},"generated":{"line":1,"column":3646}},{"source":"main_bw.js","name":"disabled","original":{"line":323,"column":11},"generated":{"line":1,"column":3648}},{"source":"main_bw.js","original":{"line":323,"column":22},"generated":{"line":1,"column":3658}},{"source":"main_bw.js","name":"sendMessage","original":{"line":326,"column":1},"generated":{"line":1,"column":3660}},{"source":"main_bw.js","name":"roomid","original":{"line":326,"column":13},"generated":{"line":1,"column":3662}},{"source":"main_bw.js","name":"desc","original":{"line":326,"column":21},"generated":{"line":1,"column":3664}},{"source":"main_bw.js","original":{"line":329,"column":0},"generated":{"line":1,"column":3667}},{"source":"main_bw.js","name":"getOffer","original":{"line":329,"column":9},"generated":{"line":1,"column":3676}},{"source":"main_bw.js","name":"desc","original":{"line":329,"column":18},"generated":{"line":1,"column":3678}},{"source":"main_bw.js","name":"pc","original":{"line":330,"column":1},"generated":{"line":1,"column":3681}},{"source":"main_bw.js","name":"setLocalDescription","original":{"line":330,"column":4},"generated":{"line":1,"column":3683}},{"source":"main_bw.js","name":"desc","original":{"line":330,"column":24},"generated":{"line":1,"column":3703}},{"source":"main_bw.js","name":"sendMessage","original":{"line":334,"column":1},"generated":{"line":1,"column":3706}},{"source":"main_bw.js","name":"roomid","original":{"line":334,"column":13},"generated":{"line":1,"column":3708}},{"source":"main_bw.js","name":"offerdesc","original":{"line":331,"column":1},"generated":{"line":1,"column":3710}},{"source":"main_bw.js","name":"desc","original":{"line":331,"column":13},"generated":{"line":1,"column":3712}},{"source":"main_bw.js","original":{"line":338,"column":0},"generated":{"line":1,"column":3715}},{"source":"main_bw.js","name":"createPeerConnection","original":{"line":338,"column":9},"generated":{"line":1,"column":3724}},{"source":"main_bw.js","name":"console","original":{"line":343,"column":1},"generated":{"line":1,"column":3728}},{"source":"main_bw.js","name":"log","original":{"line":343,"column":9},"generated":{"line":1,"column":3736}},{"source":"main_bw.js","original":{"line":343,"column":13},"generated":{"line":1,"column":3740}},{"source":"main_bw.js","name":"pc","original":{"line":344,"column":5},"generated":{"line":1,"column":3769}},{"source":"main_bw.js","name":"console","original":{"line":366,"column":2},"generated":{"line":1,"column":3771}},{"source":"main_bw.js","name":"log","original":{"line":366,"column":10},"generated":{"line":1,"column":3779}},{"source":"main_bw.js","original":{"line":366,"column":14},"generated":{"line":1,"column":3783}},{"source":"main_bw.js","name":"pc","original":{"line":345,"column":2},"generated":{"line":1,"column":3812}},{"source":"main_bw.js","original":{"line":345,"column":7},"generated":{"line":1,"column":3814}},{"source":"main_bw.js","name":"RTCPeerConnection","original":{"line":345,"column":11},"generated":{"line":1,"column":3818}},{"source":"main_bw.js","name":"pcConfig","original":{"line":345,"column":29},"generated":{"line":1,"column":3836}},{"source":"main_bw.js","name":"onicecandidate","original":{"line":347,"column":5},"generated":{"line":1,"column":3840}},{"source":"main_bw.js","name":"e","original":{"line":347,"column":23},"generated":{"line":1,"column":3855}},{"source":"main_bw.js","name":"e","original":{"line":347,"column":23},"generated":{"line":1,"column":3856}},{"source":"main_bw.js","name":"e","original":{"line":349,"column":6},"generated":{"line":1,"column":3860}},{"source":"main_bw.js","name":"candidate","original":{"line":349,"column":8},"generated":{"line":1,"column":3862}},{"source":"main_bw.js","name":"sendMessage","original":{"line":350,"column":4},"generated":{"line":1,"column":3872}},{"source":"main_bw.js","name":"roomid","original":{"line":350,"column":16},"generated":{"line":1,"column":3874}},{"source":"main_bw.js","original":{"line":350,"column":24},"generated":{"line":1,"column":3876}},{"source":"main_bw.js","name":"type","original":{"line":351,"column":5},"generated":{"line":1,"column":3877}},{"source":"main_bw.js","original":{"line":351,"column":11},"generated":{"line":1,"column":3882}},{"source":"main_bw.js","name":"label","original":{"line":352,"column":5},"generated":{"line":1,"column":3894}},{"source":"main_bw.js","name":"event","original":{"line":352,"column":11},"generated":{"line":1,"column":3900}},{"source":"main_bw.js","name":"candidate","original":{"line":352,"column":17},"generated":{"line":1,"column":3906}},{"source":"main_bw.js","name":"sdpMLineIndex","original":{"line":352,"column":27},"generated":{"line":1,"column":3916}},{"source":"main_bw.js","name":"id","original":{"line":353,"column":5},"generated":{"line":1,"column":3930}},{"source":"main_bw.js","name":"event","original":{"line":353,"column":8},"generated":{"line":1,"column":3933}},{"source":"main_bw.js","name":"candidate","original":{"line":353,"column":14},"generated":{"line":1,"column":3939}},{"source":"main_bw.js","name":"sdpMid","original":{"line":353,"column":24},"generated":{"line":1,"column":3949}},{"source":"main_bw.js","name":"candidate","original":{"line":354,"column":5},"generated":{"line":1,"column":3956}},{"source":"main_bw.js","name":"event","original":{"line":354,"column":16},"generated":{"line":1,"column":3966}},{"source":"main_bw.js","name":"candidate","original":{"line":354,"column":22},"generated":{"line":1,"column":3972}},{"source":"main_bw.js","name":"candidate","original":{"line":354,"column":32},"generated":{"line":1,"column":3982}},{"source":"main_bw.js","name":"console","original":{"line":357,"column":4},"generated":{"line":1,"column":3994}},{"source":"main_bw.js","name":"log","original":{"line":357,"column":12},"generated":{"line":1,"column":4002}},{"source":"main_bw.js","original":{"line":357,"column":16},"generated":{"line":1,"column":4006}},{"source":"main_bw.js","name":"pc","original":{"line":361,"column":2},"generated":{"line":1,"column":4037}},{"source":"main_bw.js","name":"ontrack","original":{"line":361,"column":5},"generated":{"line":1,"column":4039}},{"source":"main_bw.js","name":"getRemoteStream","original":{"line":361,"column":15},"generated":{"line":1,"column":4047}},{"source":"main_bw.js","name":"remoteVideo","original":{"line":362,"column":11},"generated":{"line":1,"column":4050}},{"source":"main_bw.js","name":"remoteVideo","original":{"line":362,"column":11},"generated":{"line":1,"column":4052}},{"source":"main_bw.js","name":"remoteVideo","original":{"line":362,"column":11},"generated":{"line":1,"column":4054}},{"source":"main_bw.js","name":"remoteVideo","original":{"line":362,"column":11},"generated":{"line":1,"column":4064}},{"source":"main_bw.js","name":"remote_output","original":{"line":362,"column":23},"generated":{"line":1,"column":4066}},{"source":"main_bw.js","original":{"line":374,"column":0},"generated":{"line":1,"column":4070}},{"source":"main_bw.js","name":"bindTracks","original":{"line":374,"column":9},"generated":{"line":1,"column":4079}},{"source":"main_bw.js","name":"console","original":{"line":376,"column":1},"generated":{"line":1,"column":4083}},{"source":"main_bw.js","name":"log","original":{"line":376,"column":9},"generated":{"line":1,"column":4091}},{"source":"main_bw.js","original":{"line":376,"column":13},"generated":{"line":1,"column":4095}},{"source":"main_bw.js","original":{"line":378,"column":12},"generated":{"line":1,"column":4134}},{"source":"main_bw.js","name":"pc","original":{"line":378,"column":5},"generated":{"line":1,"column":4141}},{"source":"main_bw.js","name":"undefined","original":{"line":378,"column":36},"generated":{"line":1,"column":4149}},{"source":"main_bw.js","name":"localStream","original":{"line":378,"column":20},"generated":{"line":1,"column":4153}},{"source":"main_bw.js","original":{"line":383,"column":20},"generated":{"line":1,"column":4155}},{"source":"main_bw.js","name":"localStream","original":{"line":383,"column":4},"generated":{"line":1,"column":4162}},{"source":"main_bw.js","name":"undefined","original":{"line":383,"column":44},"generated":{"line":1,"column":4170}},{"source":"main_bw.js","name":"localStream","original":{"line":383,"column":28},"generated":{"line":1,"column":4174}},{"source":"main_bw.js","name":"localStream","original":{"line":389,"column":1},"generated":{"line":1,"column":4176}},{"source":"main_bw.js","name":"getTracks","original":{"line":389,"column":13},"generated":{"line":1,"column":4178}},{"source":"main_bw.js","name":"forEach","original":{"line":389,"column":25},"generated":{"line":1,"column":4190}},{"source":"main_bw.js","name":"track","original":{"line":389,"column":34},"generated":{"line":1,"column":4198}},{"source":"main_bw.js","name":"pc","original":{"line":390,"column":2},"generated":{"line":1,"column":4202}},{"source":"main_bw.js","name":"addTrack","original":{"line":390,"column":5},"generated":{"line":1,"column":4204}},{"source":"main_bw.js","name":"track","original":{"line":390,"column":14},"generated":{"line":1,"column":4213}},{"source":"main_bw.js","name":"localStream","original":{"line":390,"column":21},"generated":{"line":1,"column":4215}},{"source":"main_bw.js","name":"console","original":{"line":384,"column":2},"generated":{"line":1,"column":4220}},{"source":"main_bw.js","name":"error","original":{"line":384,"column":10},"generated":{"line":1,"column":4228}},{"source":"main_bw.js","original":{"line":384,"column":16},"generated":{"line":1,"column":4234}},{"source":"main_bw.js","name":"console","original":{"line":379,"column":2},"generated":{"line":1,"column":4271}},{"source":"main_bw.js","name":"error","original":{"line":379,"column":10},"generated":{"line":1,"column":4279}},{"source":"main_bw.js","original":{"line":379,"column":16},"generated":{"line":1,"column":4285}},{"source":"main_bw.js","original":{"line":395,"column":0},"generated":{"line":1,"column":4313}},{"source":"main_bw.js","name":"call","original":{"line":395,"column":9},"generated":{"line":1,"column":4322}},{"source":"main_bw.js","name":"state","original":{"line":397,"column":4},"generated":{"line":1,"column":4326}},{"source":"main_bw.js","original":{"line":397,"column":14},"generated":{"line":1,"column":4329}},{"source":"main_bw.js","name":"state","original":{"line":397,"column":4},"generated":{"line":1,"column":4345}},{"source":"main_bw.js","original":{"line":397,"column":28},"generated":{"line":1,"column":4347}},{"source":"main_bw.js","name":"pc","original":{"line":404,"column":2},"generated":{"line":1,"column":4348}},{"source":"main_bw.js","name":"createOffer","original":{"line":404,"column":5},"generated":{"line":1,"column":4350}},{"source":"main_bw.js","original":{"line":399,"column":21},"generated":{"line":1,"column":4362}},{"source":"main_bw.js","name":"offerToRecieveAudio","original":{"line":400,"column":3},"generated":{"line":1,"column":4363}},{"source":"main_bw.js","original":{"line":400,"column":24},"generated":{"line":1,"column":4383}},{"source":"main_bw.js","name":"offerToRecieveVideo","original":{"line":401,"column":3},"generated":{"line":1,"column":4385}},{"source":"main_bw.js","original":{"line":401,"column":24},"generated":{"line":1,"column":4405}},{"source":"main_bw.js","name":"then","original":{"line":405,"column":4},"generated":{"line":1,"column":4409}},{"source":"main_bw.js","name":"getOffer","original":{"line":405,"column":9},"generated":{"line":1,"column":4414}},{"source":"main_bw.js","name":"catch","original":{"line":406,"column":4},"generated":{"line":1,"column":4417}},{"source":"main_bw.js","name":"handleOfferError","original":{"line":406,"column":10},"generated":{"line":1,"column":4423}},{"source":"main_bw.js","original":{"line":410,"column":0},"generated":{"line":1,"column":4427}},{"source":"main_bw.js","name":"hangup","original":{"line":410,"column":9},"generated":{"line":1,"column":4436}},{"source":"main_bw.js","name":"pc","original":{"line":412,"column":5},"generated":{"line":1,"column":4440}},{"source":"main_bw.js","name":"offerdesc","original":{"line":416,"column":1},"generated":{"line":1,"column":4444}},{"source":"main_bw.js","original":{"line":416,"column":13},"generated":{"line":1,"column":4446}},{"source":"main_bw.js","name":"pc","original":{"line":418,"column":1},"generated":{"line":1,"column":4451}},{"source":"main_bw.js","name":"close","original":{"line":418,"column":4},"generated":{"line":1,"column":4453}},{"source":"main_bw.js","name":"pc","original":{"line":419,"column":1},"generated":{"line":1,"column":4461}},{"source":"main_bw.js","original":{"line":419,"column":6},"generated":{"line":1,"column":4463}},{"source":"main_bw.js","original":{"line":423,"column":0},"generated":{"line":1,"column":4469}},{"source":"main_bw.js","name":"closeLocalMedia","original":{"line":423,"column":9},"generated":{"line":1,"column":4478}},{"source":"main_bw.js","name":"localStream","original":{"line":425,"column":6},"generated":{"line":1,"column":4482}},{"source":"main_bw.js","name":"localStream","original":{"line":425,"column":6},"generated":{"line":1,"column":4488}},{"source":"main_bw.js","name":"localStream","original":{"line":426,"column":2},"generated":{"line":1,"column":4491}},{"source":"main_bw.js","name":"getTracks","original":{"line":426,"column":14},"generated":{"line":1,"column":4493}},{"source":"main_bw.js","name":"forEach","original":{"line":426,"column":26},"generated":{"line":1,"column":4505}},{"source":"main_bw.js","name":"track","original":{"line":426,"column":35},"generated":{"line":1,"column":4513}},{"source":"main_bw.js","name":"track","original":{"line":427,"column":3},"generated":{"line":1,"column":4517}},{"source":"main_bw.js","name":"stop","original":{"line":427,"column":9},"generated":{"line":1,"column":4519}},{"source":"main_bw.js","name":"localStream","original":{"line":430,"column":1},"generated":{"line":1,"column":4528}},{"source":"main_bw.js","original":{"line":430,"column":15},"generated":{"line":1,"column":4530}},{"source":"main_bw.js","original":{"line":433,"column":0},"generated":{"line":1,"column":4535}},{"source":"main_bw.js","name":"leave","original":{"line":433,"column":9},"generated":{"line":1,"column":4544}},{"source":"main_bw.js","name":"socket","original":{"line":435,"column":1},"generated":{"line":1,"column":4548}},{"source":"main_bw.js","name":"emit","original":{"line":435,"column":8},"generated":{"line":1,"column":4550}},{"source":"main_bw.js","original":{"line":435,"column":13},"generated":{"line":1,"column":4555}},{"source":"main_bw.js","name":"roomid","original":{"line":435,"column":22},"generated":{"line":1,"column":4563}},{"source":"main_bw.js","name":"hangup","original":{"line":437,"column":1},"generated":{"line":1,"column":4566}},{"source":"main_bw.js","name":"closeLocalMedia","original":{"line":438,"column":1},"generated":{"line":1,"column":4570}},{"source":"main_bw.js","name":"btnConn","original":{"line":440,"column":1},"generated":{"line":1,"column":4574}},{"source":"main_bw.js","name":"disabled","original":{"line":440,"column":9},"generated":{"line":1,"column":4576}},{"source":"main_bw.js","original":{"line":440,"column":20},"generated":{"line":1,"column":4586}},{"source":"main_bw.js","name":"btnLeave","original":{"line":441,"column":1},"generated":{"line":1,"column":4588}},{"source":"main_bw.js","name":"disabled","original":{"line":441,"column":10},"generated":{"line":1,"column":4590}},{"source":"main_bw.js","original":{"line":441,"column":21},"generated":{"line":1,"column":4600}},{"source":"main_bw.js","name":"bandwidth","original":{"line":442,"column":1},"generated":{"line":1,"column":4602}},{"source":"main_bw.js","name":"disabled","original":{"line":442,"column":11},"generated":{"line":1,"column":4604}},{"source":"main_bw.js","original":{"line":442,"column":22},"generated":{"line":1,"column":4614}},{"source":"main_bw.js","original":{"line":445,"column":0},"generated":{"line":1,"column":4616}},{"source":"main_bw.js","name":"change_bw","original":{"line":445,"column":9},"generated":{"line":1,"column":4625}},{"source":"main_bw.js","name":"bandwidth","original":{"line":446,"column":1},"generated":{"line":1,"column":4629}},{"source":"main_bw.js","name":"disabled","original":{"line":446,"column":11},"generated":{"line":1,"column":4631}},{"source":"main_bw.js","original":{"line":446,"column":22},"generated":{"line":1,"column":4641}},{"source":"main_bw.js","name":"bw","original":{"line":447,"column":5},"generated":{"line":1,"column":4643}},{"source":"main_bw.js","name":"bw","original":{"line":447,"column":5},"generated":{"line":1,"column":4647}},{"source":"main_bw.js","name":"bandwidth","original":{"line":447,"column":10},"generated":{"line":1,"column":4649}},{"source":"main_bw.js","name":"options","original":{"line":447,"column":20},"generated":{"line":1,"column":4651}},{"source":"main_bw.js","name":"bandwidth","original":{"line":447,"column":28},"generated":{"line":1,"column":4659}},{"source":"main_bw.js","name":"selectedIndex","original":{"line":447,"column":38},"generated":{"line":1,"column":4661}},{"source":"main_bw.js","name":"value","original":{"line":447,"column":53},"generated":{"line":1,"column":4676}},{"source":"main_bw.js","name":"vsender","original":{"line":449,"column":5},"generated":{"line":1,"column":4682}},{"source":"main_bw.js","original":{"line":449,"column":15},"generated":{"line":1,"column":4684}},{"source":"main_bw.js","name":"pc","original":{"line":450,"column":15},"generated":{"line":1,"column":4689}},{"source":"main_bw.js","name":"getSenders","original":{"line":450,"column":18},"generated":{"line":1,"column":4691}},{"source":"main_bw.js","name":"forEach","original":{"line":452,"column":9},"generated":{"line":1,"column":4704}},{"source":"main_bw.js","name":"sender","original":{"line":452,"column":17},"generated":{"line":1,"column":4712}},{"source":"main_bw.js","name":"sender","original":{"line":453,"column":5},"generated":{"line":1,"column":4716}},{"source":"main_bw.js","original":{"line":453,"column":37},"generated":{"line":1,"column":4719}},{"source":"main_bw.js","name":"sender","original":{"line":453,"column":15},"generated":{"line":1,"column":4729}},{"source":"main_bw.js","name":"track","original":{"line":453,"column":22},"generated":{"line":1,"column":4731}},{"source":"main_bw.js","name":"kind","original":{"line":453,"column":28},"generated":{"line":1,"column":4737}},{"source":"main_bw.js","name":"vsender","original":{"line":454,"column":3},"generated":{"line":1,"column":4744}},{"source":"main_bw.js","name":"sender","original":{"line":454,"column":13},"generated":{"line":1,"column":4746}},{"source":"main_bw.js","name":"parameters","original":{"line":458,"column":5},"generated":{"line":1,"column":4751}},{"source":"main_bw.js","name":"parameters","original":{"line":458,"column":5},"generated":{"line":1,"column":4755}},{"source":"main_bw.js","name":"vsender","original":{"line":458,"column":18},"generated":{"line":1,"column":4757}},{"source":"main_bw.js","name":"getParameters","original":{"line":458,"column":26},"generated":{"line":1,"column":4759}},{"source":"main_bw.js","name":"parameters","original":{"line":460,"column":5},"generated":{"line":1,"column":4775}},{"source":"main_bw.js","name":"encodings","original":{"line":460,"column":16},"generated":{"line":1,"column":4777}},{"source":"main_bw.js","name":"parameters","original":{"line":461,"column":2},"generated":{"line":1,"column":4789}},{"source":"main_bw.js","name":"encodings","original":{"line":461,"column":13},"generated":{"line":1,"column":4791}},{"source":"main_bw.js","original":{"line":461,"column":23},"generated":{"line":1,"column":4801}},{"source":"main_bw.js","original":{"line":461,"column":24},"generated":{"line":1,"column":4802}},{"source":"main_bw.js","original":{"line":464,"column":11},"generated":{"line":1,"column":4807}},{"source":"main_bw.js","name":"bw","original":{"line":464,"column":4},"generated":{"line":1,"column":4821}},{"source":"main_bw.js","name":"parameters","original":{"line":465,"column":9},"generated":{"line":1,"column":4830}},{"source":"main_bw.js","name":"encodings","original":{"line":465,"column":20},"generated":{"line":1,"column":4832}},{"source":"main_bw.js","original":{"line":465,"column":30},"generated":{"line":1,"column":4842}},{"source":"main_bw.js","name":"maxBitrate","original":{"line":465,"column":33},"generated":{"line":1,"column":4845}},{"source":"main_bw.js","name":"parameters","original":{"line":467,"column":2},"generated":{"line":1,"column":4856}},{"source":"main_bw.js","name":"encodings","original":{"line":467,"column":13},"generated":{"line":1,"column":4858}},{"source":"main_bw.js","original":{"line":467,"column":23},"generated":{"line":1,"column":4868}},{"source":"main_bw.js","name":"maxBitrate","original":{"line":467,"column":26},"generated":{"line":1,"column":4871}},{"source":"main_bw.js","original":{"line":467,"column":44},"generated":{"line":1,"column":4882}},{"source":"main_bw.js","name":"bw","original":{"line":467,"column":39},"generated":{"line":1,"column":4886}},{"source":"main_bw.js","name":"vsender","original":{"line":470,"column":1},"generated":{"line":1,"column":4888}},{"source":"main_bw.js","name":"setParameters","original":{"line":470,"column":9},"generated":{"line":1,"column":4890}},{"source":"main_bw.js","name":"parameters","original":{"line":470,"column":23},"generated":{"line":1,"column":4904}},{"source":"main_bw.js","name":"then","original":{"line":471,"column":3},"generated":{"line":1,"column":4907}},{"source":"main_bw.js","original":{"line":471,"column":8},"generated":{"line":1,"column":4912}},{"source":"main_bw.js","name":"bandwidth","original":{"line":472,"column":3},"generated":{"line":1,"column":4917}},{"source":"main_bw.js","name":"disabled","original":{"line":472,"column":13},"generated":{"line":1,"column":4919}},{"source":"main_bw.js","original":{"line":472,"column":24},"generated":{"line":1,"column":4929}},{"source":"main_bw.js","name":"catch","original":{"line":474,"column":3},"generated":{"line":1,"column":4933}},{"source":"main_bw.js","name":"err","original":{"line":474,"column":9},"generated":{"line":1,"column":4939}},{"source":"main_bw.js","name":"console","original":{"line":475,"column":3},"generated":{"line":1,"column":4943}},{"source":"main_bw.js","name":"error","original":{"line":475,"column":11},"generated":{"line":1,"column":4951}},{"source":"main_bw.js","name":"err","original":{"line":475,"column":17},"generated":{"line":1,"column":4957}},{"source":"main_bw.js","name":"btnConn","original":{"line":525,"column":0},"generated":{"line":1,"column":4962}},{"source":"main_bw.js","name":"onclick","original":{"line":525,"column":8},"generated":{"line":1,"column":4964}},{"source":"main_bw.js","name":"connSignalServer","original":{"line":525,"column":18},"generated":{"line":1,"column":4972}},{"source":"main_bw.js","name":"btnLeave","original":{"line":526,"column":0},"generated":{"line":1,"column":4974}},{"source":"main_bw.js","name":"onclick","original":{"line":526,"column":9},"generated":{"line":1,"column":4976}},{"source":"main_bw.js","name":"leave","original":{"line":526,"column":19},"generated":{"line":1,"column":4984}},{"source":"main_bw.js","name":"bandwidth","original":{"line":527,"column":0},"generated":{"line":1,"column":4986}},{"source":"main_bw.js","name":"onchange","original":{"line":527,"column":10},"generated":{"line":1,"column":4988}},{"source":"main_bw.js","name":"change_bw","original":{"line":527,"column":21},"generated":{"line":1,"column":4997}}],"sources":{"main_bw.js":"'use strict'\n\nimport * as posenet from '@tensorflow-models/posenet';\nimport {bindPage,detectPoseInRealTime} from './camera';\n\nvar localVideo = document.querySelector('video#localvideo');\n\n\n//posenet \nconst imageScaleFactor = 0.50;\nconst flipHorizontal = false;\nconst outputStride = 16;\nconst imageElement = localVideo;\nconst scaleFactor=0.5;\n// load the posenet model\n/*const model =  posenet.load({\n        architecture: 'MobileNetV1',\n        outputStride: 16,\n        multiplier: 0.75\n    });\n*/\n//end posenet\nconst defaultQuantBytes = 2;\n\nconst defaultMobileNetMultiplier =  0.50 ;\nconst defaultMobileNetStride = 16;\nconst defaultMobileNetInputResolution = 500;\n\nconst defaultResNetMultiplier = 1.0;\nconst defaultResNetStride = 32;\nconst defaultResNetInputResolution = 250;\n\n\n\n\nvar remoteVideo = document.querySelector('video#remotevideo');\n\nvar local_output = document.querySelector('canvas#local_output');\nvar remote_output = document.querySelector('canvas#remote_output');\n//    var context = canvas.getContext('2d');\n\n\nvar btnConn =  document.querySelector('button#connserver');\nvar btnLeave = document.querySelector('button#leave');\n\nvar offer = document.querySelector('textarea#offer');\nvar answer = document.querySelector('textarea#answer');\n\nvar shareDeskBox  = document.querySelector('input#shareDesk');\n\nvar bandwidth = document.querySelector('select#bandwidth');\n\nvar localStream = null;\nvar remoteStream = null;\n\nvar pc = null;\n\nvar roomid;\nvar socket = null;\n\nvar offerdesc = null;\nvar state = 'init';\n\n\n    \n\nvar pcConfig = {\n  'iceServers': [{\n\t  \n  \n\n   'urls': 'turn:stun.al.learningrtc.cn:3478',\n    'credential': \"mypasswd\",\n    'username': \"garrylea\"\n  }]\n};\n\n\n\nfunction sendMessage(roomid, data){\n\n\tconsole.log('send message to other end', roomid, data);\n\tif(!socket){\n\t\tconsole.log('socket is null');\n\t}\n\tsocket.emit('message', roomid, data);\n}\n\nfunction conn(){\n\n\tsocket = io.connect();\n\n\tsocket.on('joined', (roomid, id) => {\n\t\tconsole.log('receive joined message!', roomid, id);\n\t\tstate = 'joined'\n\n\t\t//如果是多人的话，第一个人不该在这里创建peerConnection\n\t\t//都等到收到一个otherjoin时再创建\n\t\t//所以，在这个消息里应该带当前房间的用户数\n\t\t//\n\t\t//create conn and bind media track\n\t\tcreatePeerConnection();\n\t\tbindTracks();\n\n\t\tbtnConn.disabled = true;\n\t\tbtnLeave.disabled = false;\n\t\tconsole.log('receive joined message, state=', state);\n\t});\n\n\tsocket.on('otherjoin', (roomid) => {\n\t\tconsole.log('receive joined message:', roomid, state);\n\n\t\t//如果是多人的话，每上来一个人都要创建一个新的 peerConnection\n\t\t//\n\t\tif(state === 'joined_unbind'){\n\t\t\tcreatePeerConnection();\n\t\t\tbindTracks();\n\t\t}\n\n\t\tstate = 'joined_conn';\n\t\tcall();\n\n\t\tconsole.log('receive other_join message, state=', state);\n\t});\n\n\tsocket.on('full', (roomid, id) => {\n\t\tconsole.log('receive full message', roomid, id);\n\t\tsocket.disconnect();\n\t\thangup();\n\t\tcloseLocalMedia();\n\t\tstate = 'leaved';\n\t\tconsole.log('receive full message, state=', state);\n\t\talert('the room is full!');\n\t});\n\n\tsocket.on('leaved', (roomid, id) => {\n\t\tconsole.log('receive leaved message', roomid, id);\n\t\tstate='leaved'\n\t\tsocket.disconnect();\n\t\tconsole.log('receive leaved message, state=', state);\n\n\t\tbtnConn.disabled = false;\n\t\tbtnLeave.disabled = true;\n\t});\n\n\tsocket.on('bye', (room, id) => {\n\t\tconsole.log('receive bye message', roomid, id);\n\t\t//state = 'created';\n\t\t//当是多人通话时，应该带上当前房间的用户数\n\t\t//如果当前房间用户不小于 2, 则不用修改状态\n\t\t//并且，关闭的应该是对应用户的peerconnection\n\t\t//在客户端应该维护一张peerconnection表，它是\n\t\t//一个key:value的格式，key=userid, value=peerconnection\n\t\tstate = 'joined_unbind';\n\t\thangup();\n\t\tconsole.log('receive bye message, state=', state);\n\t});\n\n\tsocket.on('disconnect', (socket) => {\n\t\tconsole.log('receive disconnect message!', roomid);\n\t\tif(!(state === 'leaved')){\n\t\t\thangup();\n\t\t\tcloseLocalMedia();\n\n\t\t}\n\t\tstate = 'leaved';\n\t\n\t});\n\n\tsocket.on('message', (roomid, data) => {\n\t\tconsole.log('receive message!', roomid, data);\n\n\t\tif(data === null || data === undefined){\n\t\t\tconsole.error('the message is invalid!');\n\t\t\treturn;\t\n\t\t}\n\n\t\tif(data.hasOwnProperty('type') && data.type === 'offer') {\n\t\t\t\n\t\t\tpc.setRemoteDescription(new RTCSessionDescription(data));\n\t\t\t//create answer\n\t\t\tpc.createAnswer()\n\t\t\t\t.then(getAnswer)\n\t\t\t\t.catch(handleAnswerError);\n\n\t\t}else if(data.hasOwnProperty('type') && data.type === 'answer'){\n\t\t\tpc.setRemoteDescription(new RTCSessionDescription(data));\n\t\t\tbandwidth.disabled = false;\n\t\t\n\t\t}else if (data.hasOwnProperty('type') && data.type === 'candidate'){\n\t\t\tvar candidate = new RTCIceCandidate({\n\t\t\t\tsdpMLineIndex: data.label,\n\t\t\t\tcandidate: data.candidate\n\t\t\t});\n\t\t\tpc.addIceCandidate(candidate)\n\t\t\t\t.then(()=>{\n\t\t\t\t\tconsole.log('Successed to add ice candidate');\t\n\t\t\t\t})\n\t\t\t\t.catch(err=>{\n\t\t\t\t\tconsole.error(err);\t\n\t\t\t\t});\n\t\t\n\t\t}else{\n\t\t\tconsole.log('the message is invalid!', data);\n\t\t\n\t\t}\n\t\n\t});\n\n\n\troomid = '111111'; \n\tsocket.emit('join', roomid);\n\n\treturn true;\n}\n\nasync function connSignalServer(){\n\t\n\t//开启本地视频\n\tstart();\n\t\n\t/*\n\tconst net = await posenet.load({\n    architecture: 'MobileNetV1',\n    outputStride: defaultMobileNetStride,\n    inputResolution: defaultMobileNetInputResolution,\n    multiplier: defaultMobileNetMultiplier,\n    quantBytes: defaultQuantBytes\n  });\n\tdetectPoseInRealTime(localVideo,net);\n\t*/\n\t\n\t\n\n\t/*setupWebcam().then(\n        () => {\n            console.log(\"shoq\");\n\t\t\tconn();\n            showResult();\n        },\n        (err) => {\n            console.log(err);\n        }\n    )\n\t*/\n\t\n\t\n\n\treturn true;\n}\n\n function getMediaStream(stream){\n\tlocalStream = stream;\t\n\tlocalVideo.srcObject = localStream;\n\n\tconn();\n\n   bindPage(localVideo,local_output);\n\t\n\t\n}\n\nfunction getDeskStream(stream){\n\tlocalStream = stream;\n}\n\nfunction handleError(err){\n\tconsole.error('Failed to get Media Stream!', err);\n}\n\nfunction shareDesk(){\n\n\tif(IsPC()){\n\t\tnavigator.mediaDevices.getDisplayMedia({video: true})\n\t\t\t.then(getDeskStream)\n\t\t\t.catch(handleError);\n\n\t\treturn true;\n\t}\n\n\treturn false;\n\n}\n\nfunction start(){\n\n\tif(!navigator.mediaDevices ||\n\t\t!navigator.mediaDevices.getUserMedia){\n\t\tconsole.error('the getUserMedia is not supported!');\n\t\treturn;\n\t}else {\n\n\t\tvar constraints = {\n\t\t\tvideo: true,\n\t\t\taudio: false \n\t\t}\n\n\n\n\t\tnavigator.mediaDevices.getUserMedia(constraints)\n\t\t\t\t\t.then(getMediaStream)\n\t\t\t\t\t.catch(handleError);\n\t}\n\n}\n\nfunction getRemoteStream(e){\n\tremoteStream = e.streams[0];\n\tremoteVideo.srcObject = e.streams[0];\n\t\n}\n\nfunction handleOfferError(err){\n\tconsole.error('Failed to create offer:', err);\n}\n\nfunction handleAnswerError(err){\n\tconsole.error('Failed to create answer:', err);\n}\n\nfunction getAnswer(desc){\n\tpc.setLocalDescription(desc);\n\tbandwidth.disabled = false;\n\n\t//send answer sdp\n\tsendMessage(roomid, desc);\n}\n\nfunction getOffer(desc){\n\tpc.setLocalDescription(desc);\n\tofferdesc = desc;\n\n\t//send offer sdp\n\tsendMessage(roomid, offerdesc);\t\n\n}\n\nfunction createPeerConnection(){\n\n\t//如果是多人的话，在这里要创建一个新的连接.\n\t//新创建好的要放到一个map表中。\n\t//key=userid, value=peerconnection\n\tconsole.log('create RTCPeerConnection!');\n\tif(!pc){\n\t\tpc = new RTCPeerConnection(pcConfig);\n\n\t\tpc.onicecandidate = (e)=>{\n\n\t\t\tif(e.candidate) {\n\t\t\t\tsendMessage(roomid, {\n\t\t\t\t\ttype: 'candidate',\n\t\t\t\t\tlabel:event.candidate.sdpMLineIndex, \n\t\t\t\t\tid:event.candidate.sdpMid, \n\t\t\t\t\tcandidate: event.candidate.candidate\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.log('this is the end candidate');\n\t\t\t}\n\t\t}\n\n\t\tpc.ontrack = getRemoteStream;\n\t\tbindPage(remoteVideo,remote_output);\n\t\t\n\t\n\t}else {\n\t\tconsole.log('the pc have be created!');\n\t}\n\n\treturn;\t\n}\n\n//绑定永远与 peerconnection在一起，\n//所以没必要再单独做成一个函数\nfunction bindTracks(){\n\n\tconsole.log('bind tracks into RTCPeerConnection!');\n\n\tif( pc === null && localStream === undefined) {\n\t\tconsole.error('pc is null or undefined!');\n\t\treturn;\n\t}\n\n\tif(localStream === null && localStream === undefined) {\n\t\tconsole.error('localstream is null or undefined!');\n\t\treturn;\n\t}\n\n\t//add all track into peer connection\n\tlocalStream.getTracks().forEach((track)=>{\n\t\tpc.addTrack(track, localStream);\t\n\t});\n\n}\n\nfunction call(){\n\t\n\tif(state === 'joined_conn'){\n\n\t\tvar offerOptions = {\n\t\t\tofferToRecieveAudio: 1,\n\t\t\tofferToRecieveVideo: 1\n\t\t}\n\n\t\tpc.createOffer(offerOptions)\n\t\t\t.then(getOffer)\n\t\t\t.catch(handleOfferError);\n\t}\n}\n\nfunction hangup(){\n\n\tif(!pc) {\n\t\treturn;\n\t}\n\n\tofferdesc = null;\n\t\n\tpc.close();\n\tpc = null;\n\n}\n\nfunction closeLocalMedia(){\n\n\tif(!(localStream === null || localStream === undefined)){\n\t\tlocalStream.getTracks().forEach((track)=>{\n\t\t\ttrack.stop();\n\t\t});\n\t}\n\tlocalStream = null;\n}\n\nfunction leave() {\n\n\tsocket.emit('leave', roomid); //notify server\n\n\thangup();\n\tcloseLocalMedia();\n\n\tbtnConn.disabled = false;\n\tbtnLeave.disabled = true;\n\tbandwidth.disabled = true;\n}\n\nfunction change_bw(){\n\tbandwidth.disabled = true;\n\tvar bw = bandwidth.options[bandwidth.selectedIndex].value;\n\n\tvar vsender = null;\n\tvar senders = pc.getSenders();\n\n\tsenders.forEach(sender => {\n\t\tif(sender && sender.track.kind === 'video'){\n\t\t\tvsender = sender;\n\t\t}\n\t});\n\n\tvar parameters = vsender.getParameters();\n\t\n\tif(!parameters.encodings){\n\t\tparameters.encodings=[{}];\t\n\t}\n\n\tif(bw === 'unlimited'){\n\t\tdelete parameters.encodings[0].maxBitrate;\n\t}else{\n\t\tparameters.encodings[0].maxBitrate = bw * 1000;\t\n\t}\n\n\tvsender.setParameters(parameters)\n\t\t.then(()=>{\n\t\t\tbandwidth.disabled = false;\t\n\t\t})\n\t\t.catch(err => {\n\t\t\tconsole.error(err)\n\t\t});\n\n\treturn;\n}\n\n// query getStats every second\n/*\nwindow.setInterval(() => {\n  if (!pc) {\n    return;\n  }\n  const sender = pc.getSenders()[0];\n  if (!sender) {\n    return;\n  }\n  sender.getStats().then(res => {\n    res.forEach(report => {\n      let bytes;\n      let packets;\n      if (report.type === 'outbound-rtp') {\n        if (report.isRemote) {\n          return;\n        }\n        const now = report.timestamp;\n        bytes = report.bytesSent;\n        packets = report.packetsSent;\n        if (lastResult && lastResult.has(report.id)) {\n          // calculate bitrate\n          const bitrate = 8 * (bytes - lastResult.get(report.id).bytesSent) /\n            (now - lastResult.get(report.id).timestamp);\n\n          // append to chart\n          bitrateSeries.addPoint(now, bitrate);\n          bitrateGraph.setDataSeries([bitrateSeries]);\n          bitrateGraph.updateEndDate();\n\n          // calculate number of packets and append to chart\n          packetSeries.addPoint(now, packets -\n            lastResult.get(report.id).packetsSent);\n          packetGraph.setDataSeries([packetSeries]);\n          packetGraph.updateEndDate();\n        }\n      }\n    });\n    lastResult = res;\n  });\n}, 1000);\n\n*/\nbtnConn.onclick = connSignalServer\nbtnLeave.onclick = leave;\nbandwidth.onchange = change_bw;\n"},"lineCount":null}},"error":null,"hash":"4804e280855466031f1522e5b9e9cdbb","cacheData":{"env":{}}}