(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+5jU":function(t,e,n){var r=n("HMbd");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},"+6+2":function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setMinutes(0,0,0),e}},"+Zhm":function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("xHZb"),o=n("zB/H"),l=n("AFwO"),a=n("Mxlh"),u=n("FiyT");e.ReplaySubject=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new c(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,s=r.length;if(this.closed)throw new a.ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=o.Subscription.EMPTY:(this.observers.push(t),e=new u.SubjectSubscription(this,t)),i&&t.add(t=new l.ObserveOnSubscriber(t,i)),n)for(var c=0;c<s&&!t.closed;c++)t.next(r[c]);else for(c=0;c<s&&!t.closed;c++)t.next(r[c].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||s.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,s=0;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r},e}(i.Subject);var c=function(){return function(t,e){this.time=t,this.value=e}}()},"+f+M":function(t,e,n){var r=n("iWRJ");t.exports=function(t,e){return r(t)-r(e)}},"+nbD":function(t,e,n){var r=n("yNUO"),i=n("iUbB"),s=n("hLnY");t.exports=function(t,e){var n=r(t),o=Number(e),l=s(n);return i(n,o-l)}},"+vT+":function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.audit=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return r(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(r){return this.destination.error(r)}var n=s.subscribeToResult(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(i.OuterSubscriber)},"+zZ+":function(t,e,n){var r=n("uPm0"),i=n("yNUO");t.exports=function(t,e){var n=i(t),s=i(e);return 4*(n.getFullYear()-s.getFullYear())+(r(n)-r(s))}},"/HVE":function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return a}),n.d(e,"e",function(){return u}),n.d(e,"f",function(){return d}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return c});var r=n("8Y7J"),i=n("SVse");let s;try{s="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(f){s=!1}let o,l=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Object(i.A)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!s)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(r.A,8))},token:t,providedIn:"root"}),t})();class a{}function u(t){return function(){if(null==o&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>o=!0}))}finally{o=o||!1}return o}()?t:!!t.capture}const c=function(){var t={NORMAL:0,NEGATED:1,INVERTED:2};return t[t.NORMAL]="NORMAL",t[t.NEGATED]="NEGATED",t[t.INVERTED]="INVERTED",t}();let h;function d(){return!!("object"==typeof document&&"scrollBehavior"in document.documentElement.style)}function p(){if("object"!=typeof document||!document)return c.NORMAL;if(!h){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.height="1px",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",t.appendChild(n),document.body.appendChild(t),h=c.NORMAL,0===t.scrollLeft&&(t.scrollLeft=1,h=0===t.scrollLeft?c.NEGATED:c.INVERTED),t.parentNode.removeChild(t)}return h}},"/JYr":function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("Vi6O"),o=n("cSoz"),l=n("q3Kh"),a=n("gTqA");e.exhaustMap=function t(e,n){return n?function(r){return r.pipe(t(function(t,r){return a.from(e(t,r)).pipe(l.map(function(e,i){return n(t,e,r,i)}))}))}:function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return r(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.hasSubscription=!0,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new s.InnerSubscriber(this,void 0,void 0);this.destination.add(r),o.subscribeToResult(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},"/L1H":function(t,e,n){"use strict";n.d(e,"a",function(){return O}),n.d(e,"b",function(){return k}),n.d(e,"c",function(){return x}),n.d(e,"d",function(){return E}),n.d(e,"e",function(){return _}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return S}),n.d(e,"h",function(){return w});var r=n("mrSG"),i=n("8Y7J"),s=n("2Vo4"),o=n("XNiG"),l=n("itXk"),a=n("VRyK"),u=n("EY2u"),c=n("lJxs"),h=n("vkgz"),d=n("3UWI"),p=n("/uUt"),f=n("1G5W"),g=n("pLZG"),m=n("JX91"),b=n("5+tZ"),y=n("5VGP"),v=n("iInd");class _ extends y.p{constructor(){super(...arguments),this.isInDropDown=!1}}class w{constructor(t,e){this.nzHostSubmenuService=t,this.nzMenuService=e,this.disabled=!1,this.mode="vertical",this.mode$=this.nzMenuService.mode$.pipe(Object(c.a)(t=>"inline"===t?"inline":"vertical"===t||this.nzHostSubmenuService?"vertical":"horizontal"),Object(h.a)(t=>this.mode=t)),this.level=1,this.level$=new s.a(1),this.subMenuOpen$=new s.a(!1),this.open$=new s.a(!1),this.mouseEnterLeave$=new o.a,this.menuOpen$=Object(l.a)(this.subMenuOpen$,this.mouseEnterLeave$).pipe(Object(c.a)(t=>t[0]||t[1]),Object(d.a)(150),Object(p.a)(),Object(h.a)(t=>{this.setOpenState(t),this.nzHostSubmenuService&&this.nzHostSubmenuService.subMenuOpen$.next(t)})),this.nzHostSubmenuService&&this.setLevel(this.nzHostSubmenuService.level+1)}setOpenState(t){this.open$.next(t)}onMenuItemClick(){this.setMouseEnterState(!1)}setLevel(t){this.level$.next(t),this.level=t}setMouseEnterState(t){"horizontal"!==this.mode&&"vertical"!==this.mode&&!this.nzMenuService.isInDropDown||this.disabled||this.mouseEnterLeave$.next(t)}}let x=(()=>{class t{constructor(t,e,n,r,i,s,l,a){this.nzUpdateHostClassService=t,this.nzMenuService=e,this.nzSubmenuService=n,this.renderer=r,this.elementRef=i,this.routerLink=s,this.routerLinkWithHref=l,this.router=a,this.el=this.elementRef.nativeElement,this.destroy$=new o.a,this.originalPadding=null,this.selected$=new o.a,this.nzDisabled=!1,this.nzSelected=!1,this.nzMatchRouterExact=!1,this.nzMatchRouter=!1,a&&this.router.events.pipe(Object(f.a)(this.destroy$),Object(g.a)(t=>t instanceof v.d)).subscribe(()=>{this.updateRouterActive()})}clickMenuItem(t){if(this.nzDisabled)return t.preventDefault(),void t.stopPropagation();this.nzMenuService.onMenuItemClick(this),this.nzSubmenuService&&this.nzSubmenuService.onMenuItemClick()}setClassMap(){const t=this.nzMenuService.isInDropDown?"ant-dropdown-menu-item":"ant-menu-item";this.nzUpdateHostClassService.updateHostClass(this.el,{[`${t}`]:!0,[`${t}-selected`]:this.nzSelected,[`${t}-disabled`]:this.nzDisabled})}setSelectedState(t){this.nzSelected=t,this.selected$.next(t),this.setClassMap()}updateRouterActive(){this.listOfRouterLink&&this.listOfRouterLinkWithHref&&this.router&&this.router.navigated&&this.nzMatchRouter&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.nzSelected!==t&&(this.nzSelected=t,this.setSelectedState(this.nzSelected))})}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.routerLink&&t(this.routerLink)||this.routerLinkWithHref&&t(this.routerLinkWithHref)||this.listOfRouterLink.some(t)||this.listOfRouterLinkWithHref.some(t)}isLinkActive(t){return e=>t.isActive(e.urlTree,this.nzMatchRouterExact)}ngOnInit(){const t=this.el.style.paddingLeft;t&&(this.originalPadding=parseInt(t,10)),Object(a.a)(this.nzMenuService.mode$,this.nzMenuService.inlineIndent$,this.nzSubmenuService?this.nzSubmenuService.level$:u.a).pipe(Object(f.a)(this.destroy$)).subscribe(()=>{let t=null;(t="inline"===this.nzMenuService.mode?Object(y.T)(this.nzPaddingLeft)?this.nzPaddingLeft:(this.nzSubmenuService?this.nzSubmenuService.level+1:1)*this.nzMenuService.inlineIndent:this.originalPadding)?this.renderer.setStyle(this.el,"padding-left",`${t}px`):this.renderer.removeStyle(this.el,"padding-left")}),this.setClassMap()}ngAfterContentInit(){this.listOfRouterLink.changes.pipe(Object(f.a)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.listOfRouterLinkWithHref.changes.pipe(Object(f.a)(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.updateRouterActive()}ngOnChanges(t){t.nzSelected&&this.setSelectedState(this.nzSelected),t.nzDisabled&&this.setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSelected",void 0),Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzMatchRouterExact",void 0),Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzMatchRouter",void 0),t})();function C(t,e){return t||e}let S=(()=>{class t{constructor(t,e,n,r,s,l,a){this.elementRef=t,this.nzMenuService=e,this.cdr=n,this.nzSubmenuService=r,this.nzUpdateHostClassService=s,this.platform=l,this.noAnimation=a,this.nzOpen=!1,this.nzDisabled=!1,this.nzOpenChange=new i.m,this.placement="rightTop",this.expandState="collapsed",this.overlayPositions=[...y.e],this.destroy$=new o.a,this.isChildMenuSelected=!1,this.isMouseHover=!1}setOpenState(t){this.nzSubmenuService.setOpenState(t)}clickSubMenuTitle(){"inline"!==this.nzSubmenuService.mode||this.nzMenuService.isInDropDown||this.nzDisabled||this.setOpenState(!this.nzOpen)}setMouseEnterState(t){this.isMouseHover=t,this.setClassMap(),this.nzSubmenuService.setMouseEnterState(t)}setTriggerWidth(){"horizontal"===this.nzSubmenuService.mode&&this.platform.isBrowser&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}onPositionChange(t){this.placement=Object(y.N)(t),this.cdr.markForCheck()}setClassMap(){const t=this.nzMenuService.isInDropDown?"ant-dropdown-menu-submenu":"ant-menu-submenu";this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{[`${t}`]:!0,[`${t}-disabled`]:this.nzDisabled,[`${t}-open`]:this.nzOpen,[`${t}-selected`]:this.isChildMenuSelected,[`${t}-${this.nzSubmenuService.mode}`]:!0,[`${t}-active`]:this.isMouseHover&&!this.nzDisabled})}ngOnInit(){Object(l.a)([this.nzSubmenuService.mode$,this.nzSubmenuService.open$]).pipe(Object(f.a)(this.destroy$)).subscribe(([t,e])=>{e&&"inline"===t?this.expandState="expanded":e&&"horizontal"===t?this.expandState="bottom":e&&"vertical"===t?this.expandState="active":(this.isMouseHover=!1,this.expandState="collapsed"),this.overlayPositions="horizontal"===t?[y.B.bottomLeft]:[y.B.rightTop,y.B.leftTop],e!==this.nzOpen&&(this.setTriggerWidth(),this.nzOpen=e,this.nzOpenChange.emit(this.nzOpen)),this.setClassMap()}),this.nzSubmenuService.menuOpen$.pipe(Object(f.a)(this.destroy$)).subscribe(t=>{this.nzMenuService.menuOpen$.next(t)}),Object(a.a)(this.nzMenuService.mode$,this.nzMenuService.inlineIndent$,this.nzSubmenuService.level$,this.nzSubmenuService.open$,this.nzSubmenuService.mode$).pipe(Object(f.a)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngAfterContentInit(){this.setTriggerWidth(),this.listOfNzMenuItemDirective.changes.pipe(Object(m.a)(!0),Object(b.a)(()=>Object(a.a)(this.listOfNzMenuItemDirective.changes,...this.listOfNzMenuItemDirective.map(t=>t.selected$))),Object(m.a)(!0),Object(c.a)(()=>this.listOfNzMenuItemDirective.some(t=>t.nzSelected)),Object(f.a)(this.destroy$)).subscribe(t=>{this.isChildMenuSelected=t,this.setClassMap()})}ngOnChanges(t){t.nzOpen&&(this.nzSubmenuService.setOpenState(this.nzOpen),this.setTriggerWidth()),t.nzDisabled&&(this.nzSubmenuService.disabled=this.nzDisabled,this.setClassMap())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzOpen",void 0),Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),t})(),O=(()=>{class t{constructor(t,e,n){this.elementRef=t,this.nzMenuService=e,this.nzUpdateHostClassService=n,this.destroy$=new o.a,this.listOfOpenedNzSubMenuComponent=[],this.nzInlineIndent=24,this.nzTheme="light",this.nzMode="vertical",this.nzInDropDown=!1,this.nzInlineCollapsed=!1,this.nzSelectable=!this.nzMenuService.isInDropDown,this.nzClick=new i.m}updateInlineCollapse(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(t=>t.nzOpen),this.listOfNzSubMenuComponent.forEach(t=>t.setOpenState(!1)),this.nzMode="vertical"):(this.listOfOpenedNzSubMenuComponent.forEach(t=>t.setOpenState(!0)),this.listOfOpenedNzSubMenuComponent=[],this.nzMode=this.cacheMode),this.nzMenuService.setMode(this.nzMode))}setClassMap(){const t=this.nzMenuService.isInDropDown?"ant-dropdown-menu":"ant-menu";this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{[`${t}`]:!0,[`${t}-root`]:!0,[`${t}-${this.nzTheme}`]:!0,[`${t}-${this.nzMode}`]:!0,[`${t}-inline-collapsed`]:this.nzInlineCollapsed})}ngOnInit(){this.setClassMap(),this.nzMenuService.menuItemClick$.pipe(Object(f.a)(this.destroy$)).subscribe(t=>{this.nzClick.emit(t),this.nzSelectable&&this.listOfNzMenuItemDirective.forEach(e=>e.setSelectedState(e===t))})}ngAfterContentInit(){this.cacheMode=this.nzMode,this.updateInlineCollapse()}ngOnChanges(t){t.nzInlineCollapsed&&this.updateInlineCollapse(),t.nzInlineIndent&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),t.nzInDropDown&&(this.nzMenuService.isInDropDown=this.nzInDropDown),t.nzTheme&&this.nzMenuService.setTheme(this.nzTheme),t.nzMode&&(this.nzMenuService.setMode(this.nzMode),!t.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(t=>t.setOpenState(!1))),(t.nzTheme||t.nzMode||t.nzInlineCollapsed)&&this.setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzInDropDown",void 0),Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzInlineCollapsed",void 0),Object(r.__decorate)([Object(y.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSelectable",void 0),t})();class k{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(t.nativeElement,"ant-menu-item-group")}}class E{}},"/LN1":function(t,e,n){var r=n("ZmXw");t.exports=function(t,e){var n=Number(e);return r(t,12*n)}},"/Tkk":function(t,e,n){var r=n("CXhC");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},"/Yna":function(t,e,n){"use strict";n.d(e,"a",function(){return O});var r=n("8Y7J"),i=n("iC8E"),s=n("SVse"),o=n("QQfA"),l=(n("IP0z"),n("zMNK")),a=n("/HVE"),u=(n("hOhj"),n("66zS")),c=n("5VGP"),h=n("omvX"),d=n("5GAg"),p=r.rb({encapsulation:2,styles:[],data:{}});function f(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-drawer-mask"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.maskClick()&&r),r},null,null)),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null)],function(t,e){t(e,2,0,e.component.nzMaskStyle)},null)}function g(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function m(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"div",[["class","ant-drawer-header"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,2,"div",[["class","ant-drawer-title"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,g)),r.sb(3,540672,null,0,c.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,3,0,e.component.nzTitle)},null)}function b(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"button",[["aria-label","Close"],["class","ant-drawer-close"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closeClick()&&r),r},null,null)),(t()(),r.tb(1,0,null,null,2,"span",[["class","ant-drawer-close-x"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"i",[["nz-icon",""],["nzType","close"]],null,null,null,null,null)),r.sb(3,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,3,0,"close")},null)}function y(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(2,540672,null,0,s.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,n.templateContext,n.nzContent)},null)}function w(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function x(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,19,"div",[["class","ant-drawer"]],[[2,"ant-drawer-open",null],[2,"ant-drawer-top",null],[2,"ant-drawer-bottom",null],[2,"ant-drawer-right",null],[2,"ant-drawer-left",null],[4,"transform",null],[4,"zIndex",null],[24,"@.disabled",0]],null,null,null,null)),r.sb(1,4734976,null,0,c.q,[r.k,r.D,[2,h.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.ib(16777216,null,null,1,null,f)),r.sb(3,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(4,0,null,null,15,"div",[],[[8,"className",0],[4,"width",null],[4,"height",null],[4,"transform",null]],null,null,null,null)),(t()(),r.tb(5,0,null,null,14,"div",[["class","ant-drawer-content"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,13,"div",[["class","ant-drawer-wrapper-body"]],[[4,"overflow",null],[4,"height",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,m)),r.sb(8,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,b)),r.sb(10,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(11,0,null,null,8,"div",[["class","ant-drawer-body"]],null,null,null,null,null)),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(13,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(15,212992,[[2,4]],0,l.a,[r.j,r.P],{portal:[0,"portal"]},null),(t()(),r.ib(16777216,null,null,1,null,_)),r.sb(17,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,w)),r.sb(19,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.nzNoAnimation),t(e,3,0,n.nzMask),t(e,8,0,n.nzTitle),t(e,10,0,n.nzClosable),t(e,13,0,n.nzBodyStyle),t(e,15,0,""),t(e,17,0,n.isTemplateRef(n.nzContent)),t(e,19,0,!n.nzContent)},function(t,e){var n=e.component;t(e,0,0,n.isOpen,"top"===n.nzPlacement,"bottom"===n.nzPlacement,"right"===n.nzPlacement,"left"===n.nzPlacement,n.offsetTransform,n.nzZIndex,r.Fb(e,1).nzNoAnimation),t(e,4,0,r.xb(1,"ant-drawer-content-wrapper ",n.nzWrapClassName,""),n.width,n.height,n.transform),t(e,6,0,n.isLeftOrRight?"auto":null,n.isLeftOrRight?"100%":null)})}function C(t){return r.Pb(2,[r.Lb(402653184,1,{drawerTemplate:0}),r.Lb(671088640,2,{bodyPortalOutlet:0}),(t()(),r.ib(0,[[1,2],["drawerTemplate",2]],null,0,null,x))],null,null)}function S(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,"nz-drawer",[],null,null,null,C,p)),r.sb(1,4964352,null,0,i.a,[[2,s.d],r.D,o.d,r.q,r.h,d.b,r.P,o.g],null,null)],function(t,e){t(e,1,0)},null)}var O=r.pb("nz-drawer",i.a,S,{nzContent:"nzContent",nzClosable:"nzClosable",nzMaskClosable:"nzMaskClosable",nzMask:"nzMask",nzNoAnimation:"nzNoAnimation",nzTitle:"nzTitle",nzPlacement:"nzPlacement",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzWrapClassName:"nzWrapClassName",nzWidth:"nzWidth",nzHeight:"nzHeight",nzZIndex:"nzZIndex",nzOffsetX:"nzOffsetX",nzOffsetY:"nzOffsetY",nzVisible:"nzVisible"},{nzOnViewInit:"nzOnViewInit",nzOnClose:"nzOnClose"},["*"])},"/uUt":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return n=>n.lift(new s(t,e))}class s{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new o(t,this.compare,this.keySelector))}}class o extends r.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}},0:function(t,e,n){t.exports=n("zUnb")},"067Y":function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("1pIY"),o=n("FWf1"),l=n("p0+S"),a=n("nzqU");e.windowTime=function(t){var e=s.async,n=null,r=Number.POSITIVE_INFINITY;return a.isScheduler(arguments[3])&&(e=arguments[3]),a.isScheduler(arguments[2])?e=arguments[2]:l.isNumeric(arguments[2])&&(r=arguments[2]),a.isScheduler(arguments[1])?e=arguments[1]:l.isNumeric(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new u(t,n,r,e))}};var u=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return r(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(i.Subject),h=function(t){function e(e,n,r,i,s){var o=t.call(this,e)||this;o.destination=e,o.windowTimeSpan=n,o.windowCreationInterval=r,o.maxWindowSize=i,o.scheduler=s,o.windows=[];var l=o.openWindow();if(null!==r&&r>=0){var a={windowTimeSpan:n,windowCreationInterval:r,subscriber:o,scheduler:s};o.add(s.schedule(f,n,{subscriber:o,window:l,context:null})),o.add(s.schedule(p,r,a))}else o.add(s.schedule(d,n,{subscriber:o,window:l,windowTimeSpan:n}));return o}return r(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new c;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(o.Subscriber);function d(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function p(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,s=n.openWindow(),o={action:this,subscription:null};o.subscription=r.schedule(f,e,{subscriber:n,window:s,context:o}),this.add(o.subscription),this.schedule(t,i)}function f(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}},"0BvR":function(t,e,n){"use strict";var r=n("1pIY"),i=n("+vT+"),s=n("eJ3O");e.auditTime=function(t,e){return void 0===e&&(e=r.async),i.audit(function(){return s.timer(t,e)})}},"0CZq":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return h});var r=n("8Y7J"),i=n("5VGP"),s=n("JXeA"),o=n("XNiG");n("QQfA");const l=new r.p("NZ_NOTIFICATION_DEFAULT_CONFIG"),a=new r.p("NZ_NOTIFICATION_CONFIG");class u extends s.e{constructor(t,e,n){super(t,e,n),this.messages=[]}setConfig(t){const e=this.config=Object.assign({},this.config,t),n=this.config.nzPlacement;this.top="topLeft"===n||"topRight"===n?Object(i.nb)(e.nzTop):null,this.bottom="bottomLeft"===n||"bottomRight"===n?Object(i.nb)(e.nzBottom):null,this.cdr.markForCheck()}createMessage(t){t.options=this._mergeMessageOptions(t.options),t.onClose=new o.a;const e=t.options.nzKey,n=this.messages.find(e=>e.options.nzKey===t.options.nzKey);e&&n?this.replaceNotification(n,t):(this.messages.length>=this.config.nzMaxStack&&this.messages.splice(0,1),this.messages.push(t)),this.cdr.detectChanges()}replaceNotification(t,e){t.title=e.title,t.content=e.content,t.template=e.template,t.type=e.type}}class c extends s.d{constructor(t,e){super(t,e),this.container=t,this.cdr=e}close(){this._destroy(!0)}get state(){return"enter"===this.nzMessage.state?"topLeft"===this.container.config.nzPlacement||"bottomLeft"===this.container.config.nzPlacement?"enterLeft":"enterRight":this.nzMessage.state}}class h{}class d{}},"0EUg":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("bHdf");function i(){return Object(r.a)(1)}},"0alx":function(t,e,n){"use strict";var r=n("VKeD");e.isIterable=function(t){return t&&"function"==typeof t[r.iterator]}},"0u2M":function(t,e,n){var r=n("54Wo");t.exports=function(t,e){var n=r(t,e)/36e5;return n>0?Math.floor(n):Math.ceil(n)}},"0z0v":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}r.prototype=Object.create(Error.prototype),e.EmptyError=r},1:function(t,e){},"1+nf":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("mrSG"),n("5VGP"),n("XNiG"),n("LRne"),n("VRyK"),n("quSY"),n("iInd"),n("1G5W"),n("nYR2"),n("JX91"),n("pLZG");class r{}},"1CCG":function(t,e,n){var r=n("CXhC");t.exports=function(t,e){var n=r(t),i=r(e),s=n.getTime()-6e4*n.getTimezoneOffset(),o=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((s-o)/864e5)}},"1G5W":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("l7GE"),i=n("ZUHj");function s(t){return e=>e.lift(new o(t))}class o{constructor(t){this.notifier=t}call(t,e){const n=new l(t),r=Object(i.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class l extends r.a{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}},"1HMO":function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setMilliseconds(i),n}},"1K6H":function(t,e,n){var r=n("9d03");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},"1LmZ":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("yrbL"),i=n("DVTi"),s=n("DQLy"),o=n("AWIJ");class l{constructor(t,e,n,i,l,a){this.route=t,this.router=e,this.sheetServe=n,this.batchActionsServe=i,this.store$=l,this.memberServe=a,this.carouselActiveIndex=0,this.route.data.pipe(Object(r.map)(t=>t.homeDatas)).subscribe(([t,e,n,r])=>{this.banners=t,this.hotTags=e,this.songSheetList=n,this.singers=r}),this.store$.pipe(Object(s.z)(o.b),Object(s.z)(o.f)).subscribe(t=>{t?this.getUserDetail(t):this.user=null})}ngOnInit(){}getUserDetail(t){this.memberServe.getUserDetail(t).subscribe(t=>this.user=t)}onBeforeChange({to:t}){this.carouselActiveIndex=t}onChangeSlide(t){this.nzCarousel[t]()}onPlaySheet(t){this.sheetServe.playSheet(t).subscribe(t=>{this.batchActionsServe.selectPlayList({list:t,index:0})})}toInfo(t){this.router.navigate(["/sheetInfo",t])}openModal(){this.batchActionsServe.controlModal(!0,i.a.Default)}}},"1VEF":function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("Vi6O"),o=n("cSoz");e.skipUntil=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;r.hasValue=!1;var i=new s.InnerSubscriber(r,void 0,void 0);return r.add(i),r.innerSubscription=i,o.subscribeToResult(r,n,void 0,void 0,i),r}return r(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(i.OuterSubscriber)},"1Z+e":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.defaultValue))},t}(),o=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return r(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(i.Subscriber)},"1eu+":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},"1oRc":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("wQFA"),s=n("U77E"),o=n("iInd"),l=n("SVse"),a=n("SDxy"),u=n("KcsS"),c=n("66zS"),h=n("/HVE");class d{constructor(){this.activeIndex=0,this.changeSlide=new r.m}ngOnInit(){}onChangeSlide(t){this.changeSlide.emit(t)}}var p=r.rb({encapsulation:0,styles:[[".carousel[_ngcontent-%COMP%]{padding:10px 0;background-color:#001529}.carousel[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{position:relative}.carousel[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{display:block;width:20px;height:20px;overflow:hidden;background:url(banner.efeff2e2133d00905b1d.png) 3px -343px;cursor:pointer}.carousel[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .dot.active[_ngcontent-%COMP%]{background-position:-16px -343px}.carousel[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:block;position:absolute;width:37px;top:50%;margin-top:-20px;color:#fff;font-size:40px;cursor:pointer}.carousel[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .arrow.left[_ngcontent-%COMP%]{left:-68px}.carousel[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .arrow.right[_ngcontent-%COMP%]{right:-68px}"]],data:{}});function f(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"i",[["class","dot"]],[[2,"active",null]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.activeIndex===e.context.$implicit)})}function g(t){return r.Pb(2,[r.Lb(402653184,1,{dotRef:0}),(t()(),r.tb(1,0,null,null,7,"div",[["class","carousel"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,6,"div",[["class","wrap"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"i",[["class","arrow left"],["nz-icon",""],["nzTheme","outline"],["nzType","left"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeSlide("pre")&&r),r},null,null)),r.sb(4,2834432,null,0,c.a,[c.c,r.k,r.D,h.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),r.Eb(null,0),(t()(),r.ib(0,[[1,2],["dot",2]],null,0,null,f)),(t()(),r.tb(7,0,null,null,1,"i",[["class","arrow right"],["nz-icon",""],["nzTheme","outline"],["nzType","right"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeSlide("next")&&r),r},null,null)),r.sb(8,2834432,null,0,c.a,[c.c,r.k,r.D,h.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null)],function(t,e){t(e,4,0,"left","outline"),t(e,8,0,"right","outline")},null)}var m=n("5VGP"),b=r.rb({encapsulation:2,styles:["\n      nz-carousel {\n        display: block;\n        position: relative;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      .slick-dots {\n        display: block;\n      }\n\n      .slick-track {\n        opacity: 1;\n      }\n    "],data:{}});function y(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"li",[],[[2,"slick-active",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.goTo(t.context.index)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,y)),r.sb(2,540672,null,0,l.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(3,{$implicit:0})],function(t,e){var n=e.component,i=t(e,3,0,e.context.index);t(e,2,0,i,n.nzDotRender||r.Fb(e.parent.parent,8))},function(t,e){t(e,0,0,e.context.$implicit.isActive)})}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"ul",[["class","slick-dots"]],[[2,"slick-dots-top",null],[2,"slick-dots-bottom",null],[2,"slick-dots-left",null],[2,"slick-dots-right",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(2,278528,null,0,l.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.carouselContents)},function(t,e){var n=e.component;t(e,0,0,"top"===n.nzDotPosition,"bottom"===n.nzDotPosition,"left"===n.nzDotPosition,"right"===n.nzDotPosition)})}function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"button",[],null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.context.$implicit+1)})}function x(t){return r.Pb(2,[r.Lb(671088640,1,{slickList:0}),r.Lb(671088640,2,{slickTrack:0}),(t()(),r.tb(2,0,null,null,5,"div",[["class","slick-initialized slick-slider"]],[[2,"slick-vertical",null]],null,null,null,null)),(t()(),r.tb(3,0,[[1,0],["slickList",1]],null,2,"div",[["class","slick-list"],["tabindex","-1"]],null,[[null,"keydown"],[null,"mousedown"],[null,"touchstart"]],function(t,e,n){var r=!0,i=t.component;return"keydown"===e&&(r=!1!==i.onKeyDown(n)&&r),"mousedown"===e&&(r=!1!==i.pointerDown(n)&&r),"touchstart"===e&&(r=!1!==i.pointerDown(n)&&r),r},null,null)),(t()(),r.tb(4,0,[[2,0],["slickTrack",1]],null,1,"div",[["class","slick-track"]],null,null,null,null,null)),r.Eb(null,0),(t()(),r.ib(16777216,null,null,1,null,_)),r.sb(7,16384,null,0,l.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,[["renderDotTemplate",2]],null,0,null,w))],function(t,e){t(e,7,0,e.component.nzDots)},function(t,e){t(e,2,0,e.component.nzVertical)})}var C=n("Irb3"),S=n("GaVp"),O=n("POq0"),k=n("omvX"),E=n("W4B1"),T=n("PqYM");class z{constructor(t,e){this.memberServe=t,this.messageServe=e,this.tipTitle="",this.showTip=!1,this.openModal=new r.m}ngOnInit(){}onSignin(){this.memberServe.signin().subscribe(t=>{this.alertMessage("success","\u7b7e\u5230\u6210\u529f"),this.tipTitle="\u79ef\u5206+"+t.point,this.showTip=!0,Object(T.a)(1500).subscribe(()=>{this.showTip=!1,this.tipTitle=""})},t=>{this.alertMessage("error",t.msg||"\u7b7e\u5230\u5931\u8d25")})}alertMessage(t,e){this.messageServe.create(t,e)}}var P=n("XPT/"),I=n("JXeA"),M=r.rb({encapsulation:0,styles:[[".member[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{height:126px;background:url(index.5556d9cf1a530e492c5f.png) no-repeat}.member[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:205px;margin:0 auto;padding:16px 0;line-height:22px;font-size:12px}.member[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;color:#fff;width:100px;height:30px;margin:0 auto;background:url(index.5556d9cf1a530e492c5f.png) 0 -195px no-repeat;text-shadow:0 1px 0 #8a060b;border-color:#f5222d}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]{height:184px;padding-top:20px;background:url(index.5556d9cf1a530e492c5f.png) 0 -270px no-repeat}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .f-cb[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;float:left;display:block;width:80px;height:80px;margin-left:20px;padding:2px;background:#fff;border:1px solid #dadada}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .f-cb[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{float:left;width:115px;margin-left:12px}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .f-cb[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]{margin:5px 0 10px}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .f-cb[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]   .u-icn2[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;vertical-align:middle;background:url(icon2.ba32baac609d90c1c671.png) 0 9999px no-repeat}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .f-cb[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]   .u-lv[_ngcontent-%COMP%]{height:17px;padding-left:25px;line-height:18px;color:#999;font-weight:700;font-style:italic;background-position:-130px -64px}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .f-cb[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]   .u-lv[_ngcontent-%COMP%]   .lvright[_ngcontent-%COMP%]{float:right;width:8px;height:17px;background-position:-192px -64px}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]{margin:12px 0 0 20px;color:#666}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;height:40px;padding:0 18px;border-right:1px solid #e4e4e4}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li.fst[_ngcontent-%COMP%]{padding-left:0}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li.lst[_ngcontent-%COMP%]{padding-right:0;border-right:none}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;max-width:40px;font-size:20px;font-weight:400}.member[_ngcontent-%COMP%]   .n-myinfo[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px}"]],data:{}});function D(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,"div",[["class","login"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u767b\u5f55\u7f51\u6613\u4e91\u97f3\u4e50\uff0c\u53ef\u4ee5\u4eab\u53d7\u65e0\u9650\u6536\u85cf\u7684\u4e50\u8da3\uff0c\u5e76\u4e14\u65e0\u9650\u540c\u6b65\u5230\u624b\u673a"])),(t()(),r.tb(3,0,null,null,4,"button",[["class","btn"],["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openModal.emit()&&r),r},C.c,C.a)),r.Kb(512,null,m.y,m.y,[r.E]),r.sb(5,1818624,null,1,S.a,[r.k,r.h,r.D,O.b,m.y,r.y,[2,m.i],[2,k.a]],null,null),r.Lb(603979776,1,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u7528\u6237\u767b\u9646"]))],function(t,e){t(e,5,0)},function(t,e){t(e,3,0,r.Fb(e,5).nzWave)})}function A(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,34,"div",[["class","n-myinfo"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,17,"div",[["class","f-cb clearfix"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"div",[["class","head"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(4,0,null,null,14,"div",[["class","info"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,2,"h4",[],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,1,"a",[["class","nm ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(7,null,["",""])),(t()(),r.tb(8,0,null,null,3,"p",[["class","lv"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,2,"span",[["class","u-lv u-icn2"]],null,null,null,null,null)),(t()(),r.Nb(10,null,[" ",""])),(t()(),r.tb(11,0,null,null,0,"i",[["class","lvright u-icn2"]],null,null,null,null,null)),(t()(),r.tb(12,16777216,null,null,6,"div",[["class","btnwrap f-pr"],["nz-tooltip",""],["nzPlacement","bottom"]],[[2,"ant-tooltip-open",null]],null,null,null,null)),r.sb(13,4931584,null,0,E.c,[r.k,r.P,r.j,r.D,[2,E.a],[8,null]],{nzTitle:[0,"nzTitle"],setTitle:[1,"setTitle"],nzVisible:[2,"nzVisible"],nzPlacement:[3,"nzPlacement"]},null),(t()(),r.tb(14,0,null,null,4,"button",[["nz-button",""],["nzBlock",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSignin()&&r),r},C.c,C.a)),r.Kb(512,null,m.y,m.y,[r.E]),r.sb(16,1818624,null,1,S.a,[r.k,r.h,r.D,O.b,m.y,r.y,[2,m.i],[2,k.a]],{nzBlock:[0,"nzBlock"],nzType:[1,"nzType"]},null),r.Lb(603979776,2,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u7b7e\u5230"])),(t()(),r.tb(19,0,null,null,15,"ul",[["class","dny clearfix"]],null,null,null,null,null)),(t()(),r.tb(20,0,null,null,4,"li",[["class","fst"]],null,null,null,null,null)),(t()(),r.tb(21,0,null,null,1,"strong",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(22,null,["",""])),(t()(),r.tb(23,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u52a8\u6001"])),(t()(),r.tb(25,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),r.tb(26,0,null,null,1,"strong",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(27,null,["",""])),(t()(),r.tb(28,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u5173\u6ce8"])),(t()(),r.tb(30,0,null,null,4,"li",[["class","lst"]],null,null,null,null,null)),(t()(),r.tb(31,0,null,null,1,"strong",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(32,null,["",""])),(t()(),r.tb(33,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u7c89\u4e1d"]))],function(t,e){var n=e.component;t(e,13,0,"",n.tipTitle,n.showTip,"bottom"),t(e,16,0,"","primary")},function(t,e){var n=e.component;t(e,3,0,n.user.profile.avatarUrl,n.user.profile.nickname),t(e,7,0,n.user.profile.nickname),t(e,10,0,n.user.level),t(e,12,0,r.Fb(e,13).isTooltipOpen),t(e,14,0,r.Fb(e,16).nzWave),t(e,22,0,n.user.profile.eventCount),t(e,27,0,n.user.profile.follows),t(e,32,0,n.user.profile.followeds)})}function N(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"div",[["class","member"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,D)),r.sb(2,16384,null,0,l.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["logined",2]],null,0,null,A))],function(t,e){t(e,2,0,!e.component.user,r.Fb(e,3))},null)}var R=n("1LmZ"),F=n("mKz/"),$=n("ssPz"),L=n("DQLy");n.d(e,"a",function(){return q});var j=r.rb({encapsulation:0,styles:[[".home[_ngcontent-%COMP%]   .banner-item[_ngcontent-%COMP%]{display:block;width:100%}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;background-color:#fff;border-left:1px solid #d3d3d3;border-right:1px solid #d3d3d3}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:726px;padding:20px 20px 40px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-end;padding:0 10px 10px;border-bottom:2px solid #c10d0c;margin-bottom:15px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]{display:flex;align-items:flex-end}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:inherit}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;width:15px;height:15px;background-color:#fff;border:3px solid #c10d0c;border-radius:50%;margin-right:10px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;padding:0 12px;border-right:1px solid #d3d3d3}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .up[_ngcontent-%COMP%]   .navs[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{border-right:none}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .down[_ngcontent-%COMP%]   .down-wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .down[_ngcontent-%COMP%]   .down-wrap[_ngcontent-%COMP%]   .sheet-item[_ngcontent-%COMP%]{width:140px;height:204px;margin-right:42px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .sec[_ngcontent-%COMP%]   .down[_ngcontent-%COMP%]   .down-wrap[_ngcontent-%COMP%]   .sheet-item[_ngcontent-%COMP%]:nth-of-type(4n){margin-right:0}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:250px;border-left:1px solid #d3d3d3}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]{padding:15px;background-color:#fff}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]{font-size:12px;overflow:hidden;padding-bottom:8px;border-bottom:1px solid #d3d3d3}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{float:left}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{overflow:hidden}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-top:14px;width:210px;height:62px;background:#fafafa;cursor:pointer}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{float:left;width:62px;height:62px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{float:left;border:1px solid #e9e9e9;padding-left:14px;width:147px;height:62px}.home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .home[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .settled-singer[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;margin-top:8px}"]],data:{}});function B(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","carousel-item"],["nz-carousel-content",""]],null,null,null,null,null)),r.sb(1,16384,[[2,4]],0,i.c,[r.k,r.D],null,null),(t()(),r.tb(2,0,null,null,2,"a",[["class","banner-item"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"img",[["appImgDefault",""]],[[8,"src",4]],[[null,"mousedown"]],function(t,e,n){var i=!0;return"mousedown"===e&&(i=!1!==r.Fb(t,4).onmousedown(n)&&i),i},null,null)),r.sb(4,16384,null,0,s.a,[],null,null)],null,function(t,e){t(e,2,0,e.context.$implicit.url),t(e,3,0,e.context.$implicit.imageurl)})}function V(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"a",[["routerLink","/sheet"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(1,671744,null,0,o.p,[o.n,o.a,l.i],{queryParams:[0,"queryParams"],routerLink:[1,"routerLink"]},null),r.Ib(2,{cat:0}),(t()(),r.Nb(3,null,["",""]))],function(t,e){var n=t(e,2,0,e.context.$implicit.name);t(e,1,0,n,"/sheet")},function(t,e){t(e,0,0,r.Fb(e,1).target,r.Fb(e,1).href),t(e,3,0,e.context.$implicit.name)})}function W(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-single-sheet",[["class","sheet-item"]],null,[[null,"onPlay"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"onPlay"===e&&(r=!1!==i.onPlaySheet(n)&&r),"click"===e&&(r=!1!==i.toInfo(t.context.$implicit.id)&&r),r},a.b,a.a)),r.sb(1,114688,null,0,u.a,[],{sheet:[0,"sheet"]},{onPlay:"onPlay"})],function(t,e){t(e,1,0,e.context.$implicit)},null)}function U(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,10,"div",[["class","card"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).onClick()&&i),i},null,null)),r.sb(1,16384,null,0,o.o,[o.n,o.a,[8,null],r.D,r.k],{routerLink:[0,"routerLink"]},null),r.Gb(2,2),(t()(),r.tb(3,0,null,null,2,"div",[["class","pic"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,1,"img",[["appImgDefault",""]],[[8,"src",4],[8,"alt",0]],[[null,"mousedown"]],function(t,e,n){var i=!0;return"mousedown"===e&&(i=!1!==r.Fb(t,5).onmousedown(n)&&i),i},null,null)),r.sb(5,16384,null,0,s.a,[],null,null),(t()(),r.tb(6,0,null,null,4,"div",[["class","txt"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,1,"b",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(8,null,["",""])),(t()(),r.tb(9,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(10,null,["\u4e13\u8f91\u6570\uff1a",""]))],function(t,e){var n=t(e,2,0,"/singer",e.context.$implicit.id);t(e,1,0,n)},function(t,e){t(e,4,0,e.context.$implicit.picurl,e.context.$implicit.name),t(e,8,0,e.context.$implicit.name),t(e,10,0,e.context.$implicit.albumSize)})}function H(t){return r.Pb(0,[r.Lb(402653184,1,{nzCarousel:0}),(t()(),r.tb(1,0,null,null,39,"div",[["class","home"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,6,"app-wy-carousel",[],null,[[null,"changeSlide"]],function(t,e,n){var r=!0;return"changeSlide"===e&&(r=!1!==t.component.onChangeSlide(n)&&r),r},g,p)),r.sb(3,114688,[["wyCarousel",4]],0,d,[],{activeIndex:[0,"activeIndex"]},{changeSlide:"changeSlide"}),(t()(),r.tb(4,0,null,0,4,"nz-carousel",[["nzAutoPlay",""],["nzEffect","fade"]],[[2,"ant-carousel-vertical",null]],[[null,"nzBeforeChange"]],function(t,e,n){var r=!0;return"nzBeforeChange"===e&&(r=!1!==t.component.onBeforeChange(n)&&r),r},x,b)),r.sb(5,5947392,[[1,4]],1,i.b,[r.k,r.D,r.h,h.a,m.n,l.d,[2,i.a]],{nzDotRender:[0,"nzDotRender"],nzEffect:[1,"nzEffect"],nzAutoPlay:[2,"nzAutoPlay"]},{nzBeforeChange:"nzBeforeChange"}),r.Lb(603979776,2,{carouselContents:1}),(t()(),r.ib(16777216,null,0,1,null,B)),r.sb(8,278528,null,0,l.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(9,0,null,null,31,"div",[["class","main"]],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,30,"div",[["class","wrap"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,19,"div",[["class","left"]],null,null,null,null,null)),(t()(),r.tb(12,0,null,null,18,"div",[["class","sec"]],null,null,null,null,null)),(t()(),r.tb(13,0,null,null,13,"div",[["class","up"]],null,null,null,null,null)),(t()(),r.tb(14,0,null,null,7,"div",[["class","navs"]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,3,"h2",[],null,null,null,null,null)),(t()(),r.tb(16,0,null,null,0,"i",[],null,null,null,null,null)),(t()(),r.tb(17,0,null,null,1,"a",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u70ed\u95e8\u63a8\u8350"])),(t()(),r.tb(19,0,null,null,2,"nav",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,V)),r.sb(21,278528,null,0,l.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(22,0,null,null,4,"a",[["routerLink","/sheet"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,23).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(23,671744,null,0,o.p,[o.n,o.a,l.i],{routerLink:[0,"routerLink"]},null),(t()(),r.Nb(-1,null,[" \u66f4\u591a "])),(t()(),r.tb(25,0,null,null,1,"i",[["nz-icon",""],["theme","outline"],["type","arrow-right"]],null,null,null,null,null)),r.sb(26,2834432,null,0,c.a,[c.c,r.k,r.D,h.a],{type:[0,"type"],theme:[1,"theme"]},null),(t()(),r.tb(27,0,null,null,3,"div",[["class","down"]],null,null,null,null,null)),(t()(),r.tb(28,0,null,null,2,"div",[["class","down-wrap"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,W)),r.sb(30,278528,null,0,l.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(31,0,null,null,9,"div",[["class","right"]],null,null,null,null,null)),(t()(),r.tb(32,0,null,null,1,"app-member-card",[],null,[[null,"openModal"]],function(t,e,n){var r=!0;return"openModal"===e&&(r=!1!==t.component.openModal()&&r),r},N,M)),r.sb(33,114688,null,0,z,[P.a,I.g],{user:[0,"user"]},{openModal:"openModal"}),(t()(),r.tb(34,0,null,null,6,"div",[["class","settled-singer"]],null,null,null,null,null)),(t()(),r.tb(35,0,null,null,2,"div",[["class","tit"]],null,null,null,null,null)),(t()(),r.tb(36,0,null,null,1,"b",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["popular guru"])),(t()(),r.tb(38,0,null,null,2,"div",[["class","list"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,U)),r.sb(40,278528,null,0,l.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,3,0,n.carouselActiveIndex),t(e,5,0,r.Fb(e,3).dotRef,"fade",""),t(e,8,0,n.banners),t(e,21,0,n.hotTags),t(e,23,0,"/sheet"),t(e,26,0,"arrow-right","outline"),t(e,30,0,n.songSheetList),t(e,33,0,n.user),t(e,40,0,n.singers)},function(t,e){t(e,4,0,r.Fb(e,5).vertical),t(e,22,0,r.Fb(e,23).target,r.Fb(e,23).href)})}function G(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-home",[],null,null,null,H,j)),r.sb(1,114688,null,0,R.a,[o.a,o.n,F.a,$.a,L.m,P.a],null,null)],function(t,e){t(e,1,0)},null)}var q=r.pb("app-home",R.a,G,{},{},[])},"1pIY":function(t,e,n){"use strict";var r=n("2tF/");e.async=new(n("NTcF").AsyncScheduler)(r.AsyncAction)},"1vin":function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}},"1w6q":function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n("XOhD");var r=n("IheW"),i=n("yrbL"),s=n("8Y7J"),o=n("334H");let l=(()=>{class t{constructor(t,e){this.http=t,this.uri=e}getSongUrl(t){const e=(new r.i).set("id",t);return this.http.get(this.uri+"song/url",{params:e}).pipe(Object(i.map)(t=>t.data))}getSongList(t){const e=Array.isArray(t)?t.slice():[t],n=e.map(t=>t.id).join(",");return this.getSongUrl(n).pipe(Object(i.map)(t=>this.generateSongList(e,t)))}generateSongList(t,e){const n=[];return t.forEach(t=>{const r=e.find(e=>e.id===t.id).url;r&&n.push(Object.assign({},t,{url:r}))}),n}getSongDetail(t){const e=(new r.i).set("ids",t);return this.http.get(this.uri+"song/detail",{params:e}).pipe(Object(i.map)(t=>t.songs[0]))}getLyric(t){const e=(new r.i).set("id",t.toString());return this.http.get(this.uri+"lyric",{params:e}).pipe(Object(i.map)(t=>{try{return{lyric:t.lrc.lyric,tlyric:t.tlyric.lyric}}catch(e){return{lyric:"",tlyric:""}}}))}}return t.ngInjectableDef=s.Tb({factory:function(){return new t(s.Ub(r.c),s.Ub(o.a))},token:t,providedIn:o.b}),t})()},2:function(t,e){},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2Sgo":function(t,e,n){"use strict";var r=n("1pIY"),i=n("q3Kh");e.timestamp=function(t){return void 0===t&&(t=r.async),i.map(function(e){return new s(e,t.now())})};var s=function(){return function(t,e){this.value=t,this.timestamp=e}}();e.Timestamp=s},"2Vo4":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("XNiG"),i=n("9ppp");class s extends r.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.a;return this._value}next(t){super.next(this._value=t)}}},"2XXS":function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"2hO6":function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new o(t,n))}};var o=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.observables,this.project))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var l=0;l<o;l++)i.toRespond.push(l);for(l=0;l<o;l++){var a=n[l];i.add(s.subscribeToResult(i,a,a,l))}return i}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var s=this.toRespond;if(s.length>0){var o=s.indexOf(n);-1!==o&&s.splice(o,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(i.OuterSubscriber)},"2iAc":function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n("C6bk"),n("Yzca"),n("Bf1V"),n("SiFy");const r={title:"\u4e2a\u4eba\u4e2d\u5fc3"},i={title:"\u542c\u6b4c\u8bb0\u5f55"};class s{}},"2tF/":function(t,e,n){var r=n("mrSG").__extends;e.AsyncAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(n("Dz+M").Action)},3:function(t,e){},"3/+b":function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.debounce=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return r(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=s.subscribeToResult(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(i.OuterSubscriber)},"334H":function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return o});var r=n("8Y7J"),i=n("AytR");const s=new r.p("ApiConfigToken"),o=i.a.production?"/":"/api/";class l{}},"3N8a":function(t,e,n){"use strict";var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}n.d(e,"a",function(){return s});class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UWI":function(t,e,n){"use strict";var r=n("D0XW"),i=n("l7GE"),s=n("ZUHj");class o{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new l(t,this.durationSelector))}}class l extends i.a{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:r}=this;n=r(t)}catch(e){return this.destination.error(e)}const r=Object(s.a)(this,n);!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,n,r){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var a=n("PqYM");function u(t,e=r.a){return n=()=>Object(a.a)(t,e),function(t){return t.lift(new o(n))};var n}n.d(e,"a",function(){return u})},"3ZFI":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("dvZr"),n("8Y7J"),n("2Vo4"),n("XNiG"),n("1G5W"),n("5VGP");class r{}},"3d+l":function(t,e,n){var r=n("rMQs");t.exports=function(t){return r(t)?366:365}},"3hPP":function(t,e,n){var r=n("iWRJ"),i=n("tMf1");t.exports=function(t){var e=r(t),n=new Date(0);n.setFullYear(e+1,0,4),n.setHours(0,0,0,0);var s=i(n);return s.setDate(s.getDate()-1),s}},"3lBY":function(t,e){var n,r,i,s,o,l,a,u,c=t.exports=c||{};c.gui=c.gui||{},c.utils=c.utils||{},c.controllers=c.controllers||{},c.dom=c.dom||{},c.color=c.color||{},c.utils.css={load:function(t,e){var n=(e=e||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}},c.utils.common=(n=Array.prototype.forEach,r=Array.prototype.slice,{BREAK:{},extend:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(n&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){for(var i=0,s=t.length;i<s;i++)if(i in t&&e.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(e.call(r,t[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}),c.controllers.Controller=(c.utils.common.extend((i=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0}).prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),i),c.dom.dom=function(t){var e={};t.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(n,r){t.each(n,function(t){e[t]=r})});var n=/(\d+(\.\d+)?)px/;function r(e){if("0"===e||t.isUndefined(e))return 0;var r=e.match(n);return t.isNull(r)?0:parseFloat(r[1])}var i={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,r){t.isUndefined(n)&&(n=!0),t.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(n,r,i,s){i=i||{};var o=e[r];if(!o)throw new Error("Event type "+r+" not supported.");var l=document.createEvent(o);switch(o){case"MouseEvents":l.initMouseEvent(r,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var a=l.initKeyboardEvent||l.initKeyEvent;t.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),a(r,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:l.initEvent(r,i.bubbles||!1,i.cancelable||!0)}t.defaults(l,s),n.dispatchEvent(l)},bind:function(t,e,n,r){return r=r||!1,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),i},unbind:function(t,e,n,r){return r=r||!1,t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),i},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return i},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!=r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return i},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return r(e["border-left-width"])+r(e["border-right-width"])+r(e["padding-left"])+r(e["padding-right"])+r(e.width)},getHeight:function(t){var e=getComputedStyle(t);return r(e["border-top-width"])+r(e["border-bottom-width"])+r(e["padding-top"])+r(e["padding-bottom"])+r(e.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do{e.left+=t.offsetLeft,e.top+=t.offsetTop}while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return i}(c.utils.common),c.controllers.OptionController=function(t,e,n){var r=function(t,i,s){r.superclass.call(this,t,i);var o=this;if(this.__select=document.createElement("select"),n.isArray(s)){var l={};n.each(s,function(t){l[t]=t}),s=l}n.each(s,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),o.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){o.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.NumberController=function(t,e){var n=function(t,r,i){var s;n.superclass.call(this,t,r),this.__min=(i=i||{}).min,this.__max=i.max,this.__step=i.step,this.__impliedStep=e.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=(s=(s=this.__impliedStep).toString()).indexOf(".")>-1?s.length-s.indexOf(".")-1:0};return n.superclass=t,e.extend(n.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),n}(c.controllers.Controller,c.utils.common),c.controllers.NumberControllerBox=(o=c.dom.dom,l=c.utils.common,(a=function(t,e,n){this.__truncationSuspended=!1,a.superclass.call(this,t,e,n);var r,i=this;function s(){var t=parseFloat(i.__input.value);l.isNaN(t)||i.setValue(t)}function u(t){var e=r-t.clientY;i.setValue(i.getValue()+e*i.__impliedStep),r=t.clientY}function c(){o.unbind(window,"mousemove",u),o.unbind(window,"mouseup",c)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),o.bind(this.__input,"change",s),o.bind(this.__input,"blur",function(){s(),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),o.bind(this.__input,"mousedown",function(t){o.bind(window,"mousemove",u),o.bind(window,"mouseup",c),r=t.clientY}),o.bind(this.__input,"keydown",function(t){13===t.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)}).superclass=s=c.controllers.NumberController,l.extend(a.prototype,s.prototype,{updateDisplay:function(){var t,e;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),e=Math.pow(10,this.__precision),Math.round(t*e)/e),a.superclass.prototype.updateDisplay.call(this)}}),a),c.controllers.NumberControllerSlider=function(t,e,n,r,i){var s=function(t,n,r,i,o){s.superclass.call(this,t,n,{min:r,max:i,step:o});var l=this;function a(t){t.preventDefault();var n,r,i=e.getOffset(l.__background),s=e.getWidth(l.__background);return l.setValue((r=l.__min)+(t.clientX-(n=i.left))/(i.left+s-n)*(l.__max-r)),!1}function u(){e.unbind(window,"mousemove",a),e.unbind(window,"mouseup",u),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",function(t){e.bind(window,"mousemove",a),e.bind(window,"mouseup",u),a(t)}),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=t,s.useDefaultStyles=function(){n.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},r.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(c.controllers.NumberController,c.dom.dom,c.utils.css,c.utils.common),c.controllers.FunctionController=function(t,e,n){var r=function(t,n,i){r.superclass.call(this,t,n);var s=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,e.bind(this.__button,"click",function(t){return t.preventDefault(),s.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=t,n.extend(r.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.BooleanController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(c.utils.common),c.color.interpret=function(t,e){var n,r,i=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(i,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,s){if(n=i.read(t),!1===r&&!1!==n)return r=n,n.conversionName=s,n.conversion=i,e.BREAK}),e.BREAK}),r}}(c.color.toString,c.utils.common),c.GUI=c.gui.GUI=function(t,e,n,r,i,s,o,l,a,u,c,h,d,p,f){t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var g,m,b="Default",y=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),v=!0,_=!1,w=[],x=function(t){var e=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=f.defaults(t=t||{},{autoPlace:!0,width:x.DEFAULT_WIDTH}),t=f.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),f.isUndefined(t.load)?t.load={preset:b}:t.preset&&(t.load.preset=t.preset),f.isUndefined(t.parent)&&t.hideable&&w.push(this),t.resizable=f.isUndefined(t.parent)&&t.resizable,t.autoPlace&&f.isUndefined(t.scrollable)&&(t.scrollable=!0);var n=y&&"true"===localStorage.getItem(k(0,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return e.parent?e.getRoot().preset:t.load.preset},set:function(n){e.parent?e.getRoot().preset=n:t.load.preset=n,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}(this),e.revert()}},width:{get:function(){return t.width},set:function(n){t.width=n,T(e,n)}},name:{get:function(){return t.name},set:function(e){t.name=e,i&&(i.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(n){t.closed=n,t.closed?p.addClass(e.__ul,x.CLASS_CLOSED):p.removeClass(e.__ul,x.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=n?x.TEXT_OPEN:x.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(t){y&&(n=t,t?p.bind(window,"unload",o):p.unbind(window,"unload",o),localStorage.setItem(k(0,"isLocal"),t))}}}),f.isUndefined(t.parent)){if(t.closed=!1,p.addClass(this.domElement,x.CLASS_MAIN),p.makeSelectable(this.domElement,!1),y&&n){e.useLocalStorage=!0;var r=localStorage.getItem(k(0,"gui"));r&&(t.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=x.TEXT_CLOSED,p.addClass(this.__closeButton,x.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{void 0===t.closed&&(t.closed=!0);var i=document.createTextNode(t.name);p.addClass(i,"controller-name");var s=S(e,i);p.addClass(this.__ul,x.CLASS_CLOSED),p.addClass(s,"title"),p.bind(s,"click",function(t){return t.preventDefault(),e.closed=!e.closed,!1}),t.closed||(this.closed=!1)}function o(){localStorage.setItem(k(0,"gui"),JSON.stringify(e.getSaveObject()))}t.autoPlace&&(f.isUndefined(t.parent)&&(v&&(m=document.createElement("div"),p.addClass(m,"dg"),p.addClass(m,x.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(m),v=!1),m.appendChild(this.domElement),p.addClass(this.domElement,x.CLASS_AUTO_PLACE)),this.parent||T(e,t.width)),p.bind(window,"resize",function(){e.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){e.onResize()}),p.bind(this.__ul,"transitionend",function(){e.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){e.onResize()}),this.onResize(),t.resizable&&function(t){var e;function n(n){return n.preventDefault(),e=n.clientX,p.addClass(t.__closeButton,x.CLASS_DRAG),p.bind(window,"mousemove",r),p.bind(window,"mouseup",i),!1}function r(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function i(){p.removeClass(t.__closeButton,x.CLASS_DRAG),p.unbind(window,"mousemove",r),p.unbind(window,"mouseup",i)}t.__resize_handle=document.createElement("div"),f.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),p.bind(t.__resize_handle,"mousedown",n),p.bind(t.__closeButton,"mousedown",n),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),e.getRoot(),t.parent||function(){var t=e.getRoot();t.width+=1,f.defer(function(){t.width-=1})}()};function C(t,e,n,u){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var h;if(u.color)h=new c(e,n);else{var d=[e,n].concat(u.factoryArgs);h=r.apply(t,d)}u.before instanceof i&&(u.before=u.before.__li),O(t,h),p.addClass(h.domElement,"c");var g=document.createElement("span");p.addClass(g,"property-name"),g.innerHTML=h.property;var m=document.createElement("div");m.appendChild(g),m.appendChild(h.domElement);var b=S(t,m,u.before);return p.addClass(b,x.CLASS_CONTROLLER_ROW),p.addClass(b,typeof h.getValue()),function(t,e,n){if(n.__li=e,n.__gui=t,f.extend(n,{options:function(e){return arguments.length>1?(n.remove(),C(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(e)||f.isObject(e)?(n.remove(),C(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof a){var r=new l(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),i.apply(r,t)}}),p.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof l){var i=function(e){return f.isNumber(n.__min)&&f.isNumber(n.__max)?(n.remove(),C(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=f.compose(i,n.min),n.max=f.compose(i,n.max)}else n instanceof s?(p.bind(e,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof o?(p.bind(e,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(e,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(e,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof c&&(p.addClass(e,"color"),n.updateDisplay=f.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=f.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&I(t.getRoot(),!0),e},n.setValue)}(t,b,h),t.__controllers.push(h),h}function S(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,params.before):t.__ul.appendChild(r),t.onResize(),r}function O(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!=r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(n.__rememberedObjectIndecesToControllers[r]=i={}),i[e.property]=e,n.load&&n.load.remembered){var s,o=n.load.remembered;if(o[t.preset])s=o[t.preset];else{if(!o[b])return;s=o[b]}if(s[r]&&void 0!==s[r][e.property]){var l=s[r][e.property];e.initialValue=l,e.setValue(l)}}}}function k(t,e){return document.location.href+"."+e}function E(t){var e=t.__save_row=document.createElement("li");p.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),p.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",p.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",p.addClass(r,"button"),p.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",p.addClass(i,"button"),p.addClass(i,"save-as");var s=document.createElement("span");s.innerHTML="Revert",p.addClass(s,"button"),p.addClass(s,"revert");var o=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?f.each(t.load.remembered,function(e,n){P(t,n,n==t.preset)}):P(t,b,!1),p.bind(o,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(o),e.appendChild(n),e.appendChild(r),e.appendChild(i),e.appendChild(s),y){var l=document.getElementById("dg-save-locally"),a=document.getElementById("dg-local-explain");l.style.display="block";var u=document.getElementById("dg-local-storage");function c(){a.style.display=t.useLocalStorage?"block":"none"}"true"===localStorage.getItem(k(0,"isLocal"))&&u.setAttribute("checked","checked"),c(),p.bind(u,"change",function(){t.useLocalStorage=!t.useLocalStorage,c()})}var h=document.getElementById("dg-new-constructor");p.bind(h,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||g.hide()}),p.bind(n,"click",function(){h.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),g.show(),h.focus(),h.select()}),p.bind(r,"click",function(){t.save()}),p.bind(i,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),p.bind(s,"click",function(){t.revert()})}function T(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function z(t,e){var n={};return f.each(t.__rememberedObjects,function(r,i){var s={};f.each(t.__rememberedObjectIndecesToControllers[i],function(t,n){s[n]=e?t.initialValue:t.getValue()}),n[i]=s}),n}function P(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function I(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}return x.toggleHide=function(){_=!_,f.each(w,function(t){t.domElement.style.zIndex=_?-999:999,t.domElement.style.opacity=_?0:1})},x.CLASS_AUTO_PLACE="a",x.CLASS_AUTO_PLACE_CONTAINER="ac",x.CLASS_MAIN="main",x.CLASS_CONTROLLER_ROW="cr",x.CLASS_TOO_TALL="taller-than-window",x.CLASS_CLOSED="closed",x.CLASS_CLOSE_BUTTON="close-button",x.CLASS_DRAG="drag",x.DEFAULT_WIDTH=245,x.TEXT_CLOSED="Close Controls",x.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||x.toggleHide()},!1),f.extend(x.prototype,{add:function(t,e){return C(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return C(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;f.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&m.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new x(e);this.__folders[t]=n;var r=S(this,n.domElement);return p.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=p.getOffset(t.__ul).top,n=0;f.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=p.getHeight(e))}),window.innerHeight-e-20<n?(p.addClass(t.domElement,x.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(p.removeClass(t.domElement,x.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&f.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(f.isUndefined(g)&&((g=new d).domElement.innerHTML=e),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;f.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&E(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&T(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=z(this)),t.folders={},f.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=z(this),I(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[b]=z(this,!0)),this.load.remembered[t]=z(this),this.preset=t,P(this,t,!0)},revert:function(t){f.each(this.__controllers,function(e){this.getRoot().load.remembered?O(t||this.getRoot(),e):e.setValue(e.initialValue)},this),f.each(this.__folders,function(t){t.revert(t)}),t||I(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&function t(e){0!=e.length&&h(function(){t(e)}),f.each(e,function(t){t.updateDisplay()})}(this.__listening)}}),x}(c.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',0,c.controllers.factory=function(t,e,n,r,i,s,o){return function(l,a){var u=l[a];return o.isArray(arguments[2])||o.isObject(arguments[2])?new t(l,a,arguments[2]):o.isNumber(u)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?new n(l,a,arguments[2],arguments[3]):new e(l,a,{min:arguments[2],max:arguments[3]}):o.isString(u)?new r(l,a):o.isFunction(u)?new i(l,a,""):o.isBoolean(u)?new s(l,a):void 0}}(c.controllers.OptionController,c.controllers.NumberControllerBox,c.controllers.NumberControllerSlider,c.controllers.StringController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var i=this;function s(){i.setValue(i.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",s),e.bind(this.__input,"change",s),e.bind(this.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(c.controllers.Controller,c.dom.dom,c.utils.common),c.controllers.FunctionController,c.controllers.BooleanController,c.utils.common),c.controllers.Controller,c.controllers.BooleanController,c.controllers.FunctionController,c.controllers.NumberControllerBox,c.controllers.NumberControllerSlider,0,c.controllers.ColorController=function(t,e,n,r,i){var s=function(t,o){s.superclass.call(this,t,o),this.__color=new n(this.getValue()),this.__temp=new n(0);var a=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&p.call(this)}),e.bind(this.__input,"blur",p),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(a.__selector,"drag")})});var u,c=document.createElement("div");function h(t){g(t),e.bind(window,"mousemove",g),e.bind(window,"mouseup",d)}function d(){e.unbind(window,"mousemove",g),e.unbind(window,"mouseup",d)}function p(){var t=r(this.value);!1!==t?(a.__color.__state=t,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function f(){e.unbind(window,"mousemove",m),e.unbind(window,"mouseup",f)}function g(t){t.preventDefault();var n=e.getWidth(a.__saturation_field),r=e.getOffset(a.__saturation_field),i=(t.clientX-r.left+document.body.scrollLeft)/n,s=1-(t.clientY-r.top+document.body.scrollTop)/n;return s>1?s=1:s<0&&(s=0),i>1?i=1:i<0&&(i=0),a.__color.v=s,a.__color.s=i,a.setValue(a.__color.toOriginal()),!1}function m(t){t.preventDefault();var n=e.getHeight(a.__hue_field),r=e.getOffset(a.__hue_field),i=1-(t.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:i<0&&(i=0),a.__color.h=360*i,a.setValue(a.__color.toOriginal()),!1}i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(c.style,{width:"100%",height:"100%",background:"none"}),l(c,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(u=this.__hue_field).style.background="",u.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",u.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",u.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",u.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",u.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",h),e.bind(this.__field_knob,"mousedown",h),e.bind(this.__hue_field,"mousedown",function(t){m(t),e.bind(window,"mousemove",m),e.bind(window,"mouseup",f)}),this.__saturation_field.appendChild(c),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};s.superclass=t,i.extend(s.prototype,t.prototype,{updateDisplay:function(){var t=r(this.getValue());if(!1!==t){var e=!1;i.each(n.COMPONENTS,function(n){if(!i.isUndefined(t[n])&&!i.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&i.extend(this.__color.__state,t)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,o=255-s;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}});var o=["-moz-","-o-","-webkit-","-ms-",""];function l(t,e,n,r){t.style.background="",i.each(o,function(i){t.style.cssText+="background: "+i+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}return s}(c.controllers.Controller,c.dom.dom,c.color.Color=function(t,e,n,r){var i=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function s(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(l(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(l(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function l(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(i.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),s(i.prototype,"r",2),s(i.prototype,"g",1),s(i.prototype,"b",0),o(i.prototype,"h"),o(i.prototype,"s"),o(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),i}(c.color.interpret,c.color.math={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),s=n*(1-e),o=n*(1-i*e),l=n*(1-(1-i)*e),a=[[n,l,s],[o,n,s],[s,n,l],[s,o,n],[l,s,n],[n,s,o]][r];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(t,e,n){var r,i=Math.min(t,e,n),s=Math.max(t,e,n),o=s-i;return 0==s?{h:NaN,s:0,v:0}:(r=t==s?(e-n)/o:e==s?2+(n-t)/o:4+(t-e)/o,(r/=6)<0&&(r+=1),{h:360*r,s:o/s,v:s/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(u=8*e)|t&~(255<<u)}},c.color.toString,c.utils.common),c.color.interpret,c.utils.common),c.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},c.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(c.dom.dom,c.utils.common),c.dom.dom,c.utils.common)},"3n9G":function(t,e,n){"use strict";var r=n("1pIY"),i=n("zk/k"),s=n("Vf9T"),o=n("vLqr");e.timeout=function(t,e){return void 0===e&&(e=r.async),s.timeoutWith(t,o.throwError(new i.TimeoutError),e)}},"3zVU":function(t,e,n){var r=n("J6Hf");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},4:function(t,e){},"44p1":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("zB/H");e.finalize=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.callback))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new s.Subscription(n)),r}return r(e,t),e}(i.Subscriber)},"4I5i":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},"4Toj":function(t,e,n){var r=n("54Wo");t.exports=function(t,e){var n=r(t,e)/1e3;return n>0?Math.floor(n):Math.ceil(n)}},"4coB":function(t,e,n){var r=n("eoPS");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},"4e1p":function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function l(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&l(r,n),i.state=function(){return l(n,{})}),i}i&&i.exports?i.exports=a:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return a}).call(e,n,e,i))||(i.exports=r):this.xor128=a}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},"4ik+":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.filter=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg))},t}(),o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return r(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(i.Subscriber)},"4mvG":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.refCount=function(){return function(t){return t.lift(new s(t))}};var s=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),o=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(i.Subscriber)},"4v8u":function(t,e,n){var r=n("iUbB");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},"4xzy":function(t,e,n){"use strict";var r=n("P+eR");e.subscribeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new i(t,e))}};var i=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new r.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()},5:function(t,e){},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("ZUHj"),i=n("l7GE"),s=n("51Dv"),o=n("lJxs"),l=n("Cfvw");function a(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(a((n,r)=>Object(l.a)(t(n,r)).pipe(Object(o.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new u(t,n)))}class u{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new s.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,t,e,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"54Wo":function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()-i.getTime()}},"5A4h":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},"5GAg":function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"a",function(){return b});var r=n("SVse"),i=n("8Y7J"),s=n("XNiG"),o=(n("quSY"),n("LRne")),l=(n("dvZr"),n("vkgz"),n("Kj3r"),n("pLZG"),n("lJxs"),n("IzEk")),a=n("/HVE"),u=n("KCVW");let c=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(e){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){const t=e&&e.nodeName.toLowerCase();if(-1===d(e))return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&"object"===t)return!1;if((this._platform.BLINK||this._platform.WEBKIT)&&!this.isVisible(e))return!1}let r=t.nodeName.toLowerCase(),i=d(t);if(t.hasAttribute("contenteditable"))return-1!==i;if("iframe"===r)return!1;if("audio"===r){if(!t.hasAttribute("controls"))return!1;if(this._platform.BLINK)return!0}if("video"===r){if(!t.hasAttribute("controls")&&this._platform.TRIDENT)return!1;if(this._platform.BLINK||this._platform.FIREFOX)return!0}return("object"!==r||!this._platform.BLINK&&!this._platform.WEBKIT)&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&t.tabIndex>=0}isFocusable(t){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||h(t))}(t)&&!this.isDisabled(t)&&this.isVisible(t)}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(a.a))},token:t,providedIn:"root"}),t})();function h(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function d(t){if(!h(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class p{constructor(t,e,n,r,i=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,i||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement()))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], `+`[cdkFocusRegion${t}], `+`[cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated `+"attribute will be removed in 8.0.0.",e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', `+`use 'cdkFocusRegion${t}' instead. The deprecated attribute `+"will be removed in 8.0.0.",e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");return t?(t.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",t),Object(i.X)()&&!this._checker.isFocusable(t)&&console.warn("Element matching '[cdkFocusInitial]' is not focusable.",t),t.focus(),!0):this.focusFirstTabbableElement()}focusFirstTabbableElement(){const t=this._getRegionBoundary("start");return t&&t.focus(),!!t}focusLastTabbableElement(){const t=this._getRegionBoundary("end");return t&&t.focus(),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.asObservable().pipe(Object(l.a)(1)).subscribe(t)}}let f=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new p(t,this._checker,this._ngZone,this._document,e)}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(c),Object(i.Ub)(i.y),Object(i.Ub)(r.d))},token:t,providedIn:"root"}),t})();const g=650,m=Object(a.e)({passive:!0,capture:!0});let b=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._origin=null,this._windowFocused=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._documentKeydownListener=()=>{this._lastTouchTarget=null,this._setOriginForCurrentEventQueue("keyboard")},this._documentMousedownListener=()=>{this._lastTouchTarget||this._setOriginForCurrentEventQueue("mouse")},this._documentTouchstartListener=t=>{null!=this._touchTimeoutId&&clearTimeout(this._touchTimeoutId),this._lastTouchTarget=t.target,this._touchTimeoutId=setTimeout(()=>this._lastTouchTarget=null,g)},this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)}}monitor(t,e=!1){if(!this._platform.isBrowser)return Object(o.a)(null);const n=Object(u.e)(t);if(this._elementInfo.has(n)){let t=this._elementInfo.get(n);return t.checkChildren=e,t.subject.asObservable()}let r={unlisten:()=>{},checkChildren:e,subject:new s.a};this._elementInfo.set(n,r),this._incrementMonitoredElementCount();let i=t=>this._onFocus(t,n),l=t=>this._onBlur(t,n);return this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",i,!0),n.addEventListener("blur",l,!0)}),r.unlisten=()=>{n.removeEventListener("focus",i,!0),n.removeEventListener("blur",l,!0)},r.subject.asObservable()}stopMonitoring(t){const e=Object(u.e)(t),n=this._elementInfo.get(e);n&&(n.unlisten(),n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._decrementMonitoredElementCount())}focusVia(t,e,n){const r=Object(u.e)(t);this._setOriginForCurrentEventQueue(e),"function"==typeof r.focus&&r.focus(n)}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_setClasses(t,e){this._elementInfo.get(t)&&(this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e))}_setOriginForCurrentEventQueue(t){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originTimeoutId=setTimeout(()=>this._origin=null,1)})}_wasCausedByTouch(t){let e=t.target;return this._lastTouchTarget instanceof Node&&e instanceof Node&&(e===this._lastTouchTarget||e.contains(this._lastTouchTarget))}_onFocus(t,e){const n=this._elementInfo.get(e);if(!n||!n.checkChildren&&e!==t.target)return;let r=this._origin;r||(r=this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:this._wasCausedByTouch(t)?"touch":"program"),this._setClasses(e,r),this._emitOrigin(n.subject,r),this._lastFocusOrigin=r}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_incrementMonitoredElementCount(){1==++this._monitoredElementCount&&this._platform.isBrowser&&this._ngZone.runOutsideAngular(()=>{document.addEventListener("keydown",this._documentKeydownListener,m),document.addEventListener("mousedown",this._documentMousedownListener,m),document.addEventListener("touchstart",this._documentTouchstartListener,m),window.addEventListener("focus",this._windowFocusListener)})}_decrementMonitoredElementCount(){--this._monitoredElementCount||(document.removeEventListener("keydown",this._documentKeydownListener,m),document.removeEventListener("mousedown",this._documentMousedownListener,m),document.removeEventListener("touchstart",this._documentTouchstartListener,m),window.removeEventListener("focus",this._windowFocusListener),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._touchTimeoutId),clearTimeout(this._originTimeoutId))}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(i.y),Object(i.Ub)(a.a))},token:t,providedIn:"root"}),t})()},"5Izy":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("8Y7J"),n("5VGP");class r{}},"5R0t":function(t,e){t.exports=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date(0);return i.setFullYear(e,n,r-1),i.setHours(23,59,59,999),i}},"5VGP":function(t,e,n){"use strict";n.d(e,"a",function(){return re}),n.d(e,"b",function(){return G}),n.d(e,"c",function(){return V}),n.d(e,"d",function(){return U}),n.d(e,"e",function(){return W}),n.d(e,"f",function(){return B}),n.d(e,"g",function(){return D}),n.d(e,"h",function(){return A}),n.d(e,"i",function(){return Qt}),n.d(e,"j",function(){return x}),n.d(e,"k",function(){return _}),n.d(e,"l",function(){return $}),n.d(e,"m",function(){return et}),n.d(e,"n",function(){return nt}),n.d(e,"o",function(){return ne}),n.d(e,"p",function(){return ee}),n.d(e,"q",function(){return R}),n.d(e,"r",function(){return F}),n.d(e,"s",function(){return L}),n.d(e,"t",function(){return Q}),n.d(e,"u",function(){return w}),n.d(e,"v",function(){return se}),n.d(e,"w",function(){return Yt}),n.d(e,"x",function(){return Kt}),n.d(e,"y",function(){return tt}),n.d(e,"z",function(){return Jt}),n.d(e,"A",function(){return te}),n.d(e,"B",function(){return j}),n.d(e,"C",function(){return S}),n.d(e,"D",function(){return J}),n.d(e,"E",function(){return st}),n.d(e,"F",function(){return X}),n.d(e,"G",function(){return kt}),n.d(e,"H",function(){return bt}),n.d(e,"I",function(){return yt}),n.d(e,"J",function(){return Mt}),n.d(e,"K",function(){return mt}),n.d(e,"L",function(){return wt}),n.d(e,"M",function(){return St}),n.d(e,"N",function(){return H}),n.d(e,"O",function(){return Ot}),n.d(e,"P",function(){return ht}),n.d(e,"Q",function(){return ct}),n.d(e,"R",function(){return at}),n.d(e,"S",function(){return pt}),n.d(e,"T",function(){return lt}),n.d(e,"U",function(){return Ct}),n.d(e,"V",function(){return At}),n.d(e,"W",function(){return ft}),n.d(e,"X",function(){return _t}),n.d(e,"Y",function(){return Bt}),n.d(e,"Z",function(){return Ht}),n.d(e,"ab",function(){return xt}),n.d(e,"bb",function(){return jt}),n.d(e,"cb",function(){return Z}),n.d(e,"db",function(){return ie}),n.d(e,"eb",function(){return vt}),n.d(e,"fb",function(){return Et}),n.d(e,"gb",function(){return ot}),n.d(e,"hb",function(){return ut}),n.d(e,"ib",function(){return gt}),n.d(e,"jb",function(){return Dt}),n.d(e,"kb",function(){return q}),n.d(e,"lb",function(){return it}),n.d(e,"mb",function(){return T}),n.d(e,"nb",function(){return P}),n.d(e,"ob",function(){return z}),n.d(e,"pb",function(){return I}),n.d(e,"qb",function(){return k}),n.d(e,"rb",function(){return E}),n("SVse");var r=n("8Y7J"),i=(n("GS7A"),n("mrSG")),s=n("KCVW"),o=n("QQfA"),l=n("NAv5"),a=n("ZmXw"),u=n.n(a),c=n("/LN1"),h=n.n(c),d=n("t4rR"),p=n.n(d),f=n("OBTA"),g=n.n(f),m=n("XNiG"),b=n("2Vo4"),y=n("3UWI"),v=n("/HVE");class _{constructor(t,e){this.elementRef=t,this.renderer=e,this.classList=[]}set nzClassListAdd(t){this.classList.forEach(t=>{this.renderer.removeClass(this.elementRef.nativeElement,t)}),t.forEach(t=>{this.renderer.addClass(this.elementRef.nativeElement,t)}),this.classList=t}}class w{constructor(t,e){this.viewContainer=t,this.defaultTemplate=e,this.inputTemplate=null,this.inputViewRef=null,this.defaultViewRef=null,this.nzStringTemplateOutletContext=null}set nzStringTemplateOutlet(t){t instanceof r.L?(this.isTemplate=!0,this.inputTemplate=t):this.isTemplate=!1}recreateView(){this.isTemplate?this.inputViewRef||this.inputTemplate&&(this.inputViewRef=this.viewContainer.createEmbeddedView(this.inputTemplate,this.nzStringTemplateOutletContext)):this.defaultViewRef||this.defaultTemplate&&(this.defaultViewRef=this.viewContainer.createEmbeddedView(this.defaultTemplate,this.nzStringTemplateOutletContext))}getType(t){return t instanceof r.L?"template":"string"}shouldRecreateView(t){const{nzStringTemplateOutletContext:e,nzStringTemplateOutlet:n}=t;let r=!1;if(n)if(n.firstChange)r=!0;else{const t=this.getType(n.previousValue),e=this.getType(n.currentValue);r=!("string"===t&&"string"===e)}return e&&this.hasContextShapeChanged(e)||r}hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(const t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}updateExistingContext(t){for(const e of Object.keys(t))this.inputViewRef.context[e]=this.nzStringTemplateOutletContext[e]}ngOnChanges(t){this.shouldRecreateView(t)?(this.viewContainer&&(this.viewContainer.clear(),this.defaultViewRef=null,this.inputViewRef=null),this.recreateView()):this.inputViewRef&&this.nzStringTemplateOutletContext&&this.updateExistingContext(this.nzStringTemplateOutletContext)}}class x{}const C={},S="[NG-ZORRO]:";function O(t,...e){Object(r.X)()&&function(...t){const e=t.reduce((t,e)=>t+e.toString(),"");return!C[e]&&(C[e]=!0,!0)}(...e)&&t(...e)}const k=(...t)=>O((...t)=>console.warn(S,...t),...t),E=(...t)=>O((...t)=>console.error(S,"deprecated:",...t),...t);function T(t){return Object(s.c)(t)}function z(t,e=0){return Object(s.a)(t)?Number(t):e}function P(t){return Object(s.d)(t)}function I(t,...e){return"function"==typeof t?t(...e):t}function M(t,e){return function(n,r){const i=`$$__${r}`;Object.prototype.hasOwnProperty.call(n,i)&&k(`The prop "${i}" is already exist, it will be overrided by ${t} decorator.`),Object.defineProperty(n,i,{configurable:!0,writable:!0}),Object.defineProperty(n,r,{get(){return this[i]},set(t){this[i]=e(t)}})}}function D(){return M("InputBoolean",T)}function A(){return M("InputNumber",z)}const N="nz-animate-disabled";let R=(()=>{class t{constructor(t,e,n){this.element=t,this.renderer=e,this.animationType=n,this.nzNoAnimation=!1}ngOnChanges(){this.updateClass()}ngAfterViewInit(){this.updateClass()}updateClass(){const t=Object(s.e)(this.element);t&&(this.nzNoAnimation||"NoopAnimations"===this.animationType?this.renderer.addClass(t,N):this.renderer.removeClass(t,N))}}return Object(i.__decorate)([D(),Object(i.__metadata)("design:type",Boolean)],t.prototype,"nzNoAnimation",void 0),t})();class F{}class ${constructor(t){this.cdkConnectedOverlay=t,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop"}}class L{}const j={top:new o.c({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new o.c({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new o.c({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new o.c({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new o.c({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new o.c({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new o.c({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new o.c({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new o.c({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new o.c({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new o.c({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new o.c({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new o.c({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new o.c({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},B=[j.top,j.right,j.bottom,j.left],V=[j.bottomLeft,j.bottomRight,j.topRight,j.topLeft],W=[j.rightTop,j.leftTop],U=[j.bottomLeft,new o.c({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"})];function H(t){const e=["originX","originY","overlayX","overlayY"];for(const n in j)if(e.every(e=>t.connectionPair[e]===j[n][e]))return n}class G{constructor(t){if(t)if(t instanceof Date)this.nativeDate=t;else{if("string"!=typeof t&&"number"!=typeof t)throw new Error('The input date type is not supported ("Date" is now recommended)');k('The string type is not recommended for date-picker, use "Date" type'),this.nativeDate=new Date(t)}else this.nativeDate=new Date}calendarStart(t){return new G(Object(l.startOfWeek)(Object(l.startOfMonth)(this.nativeDate),t))}getYear(){return this.nativeDate.getFullYear()}getMonth(){return this.nativeDate.getMonth()}getDay(){return this.nativeDate.getDay()}getTime(){return this.nativeDate.getTime()}getDate(){return this.nativeDate.getDate()}getHours(){return this.nativeDate.getHours()}getMinutes(){return this.nativeDate.getMinutes()}getSeconds(){return this.nativeDate.getSeconds()}getMilliseconds(){return this.nativeDate.getMilliseconds()}clone(){return new G(new Date(this.nativeDate))}setHms(t,e,n){const r=new Date(this.nativeDate);return r.setHours(t,e,n),new G(r)}setYear(t){return new G(Object(l.setYear)(this.nativeDate,t))}addYears(t){return new G(h()(this.nativeDate,t))}setMonth(t){return new G(g()(this.nativeDate,t))}addMonths(t){return new G(u()(this.nativeDate,t))}setDay(t,e){return new G(p()(this.nativeDate,t,e))}setDate(t){const e=new Date(this.nativeDate);return e.setDate(t),new G(e)}addDays(t){return this.setDate(this.getDate()+t)}isSame(t,e="day"){let n;switch(e){case"year":n=l.isSameYear;break;case"month":n=l.isSameMonth;break;case"day":n=l.isSameDay;break;case"hour":n=l.isSameHour;break;case"minute":n=l.isSameMinute;break;case"second":n=l.isSameSecond;break;default:n=l.isSameDay}return n(this.nativeDate,this.toNativeDate(t))}isSameYear(t){return this.isSame(t,"year")}isSameMonth(t){return this.isSame(t,"month")}isSameDay(t){return this.isSame(t,"day")}isSameHour(t){return this.isSame(t,"hour")}isSameMinute(t){return this.isSame(t,"minute")}isSameSecond(t){return this.isSame(t,"second")}compare(t,e="day",n=!0){if(null===t)return!1;let r;switch(e){case"year":r=l.differenceInCalendarYears;break;case"month":r=l.differenceInCalendarMonths;break;case"day":r=l.differenceInCalendarDays;break;case"hour":r=l.differenceInHours;break;case"minute":r=l.differenceInMinutes;break;case"second":r=l.differenceInSeconds;break;default:r=l.differenceInCalendarDays}return n?r(this.nativeDate,this.toNativeDate(t))<0:r(this.nativeDate,this.toNativeDate(t))>0}isBeforeYear(t){return this.compare(t,"year")}isBeforeMonth(t){return this.compare(t,"month")}isBeforeDay(t){return this.compare(t,"day")}isBeforeHour(t){return this.compare(t,"hour")}isBeforeMinute(t){return this.compare(t,"minute")}isBeforeSecond(t){return this.compare(t,"second")}isAfterYear(t){return this.compare(t,"year",!1)}isAfterMonth(t){return this.compare(t,"month",!1)}isAfterDay(t){return this.compare(t,"day",!1)}isAfterHour(t){return this.compare(t,"hour",!1)}isAfterMinute(t){return this.compare(t,"minute",!1)}isAfterSecond(t){return this.compare(t,"second",!1)}isToday(){return Object(l.isToday)(this.nativeDate)}isValid(){return Object(l.isValid)(this.nativeDate)}toNativeDate(t){return t instanceof G?t.nativeDate:t}}const q=[["Y",31536e6],["M",2592e6],["D",864e5],["H",36e5],["m",6e4],["s",1e3],["S",1]],K=["moz","ms","webkit"];function Y(){if("undefined"==typeof window)return()=>0;if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const t=K.filter(t=>`${t}RequestAnimationFrame`in window)[0];return t?window[`${t}RequestAnimationFrame`]:function(){let t=0;return function(e){const n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=setTimeout(()=>{e(n+r)},r);return t=n+r,i}}()}function X(t){if("undefined"==typeof window)return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(t);const e=K.filter(t=>`${t}CancelAnimationFrame`in window||`${t}CancelRequestAnimationFrame`in window)[0];return e?(window[`${e}CancelAnimationFrame`]||window[`${e}CancelRequestAnimationFrame`]).call(this,t):clearTimeout(t)}const Z=Y();class Q{constructor(t){this.doc=t}setScrollTop(t,e=0){t===window?(this.doc.body.scrollTop=e,this.doc.documentElement.scrollTop=e):t.scrollTop=e}getOffset(t){const e={top:0,left:0};if(!t||!t.getClientRects().length)return e;const n=t.getBoundingClientRect();if(n.width||n.height){const r=t.ownerDocument.documentElement;e.top=n.top-r.clientTop,e.left=n.left-r.clientLeft}else e.top=n.top,e.left=n.left;return e}getScroll(t,e=!0){const n=t||window,r=e?"scrollTop":"scrollLeft",i=n===window;let s=i?n[e?"pageYOffset":"pageXOffset"]:n[r];return i&&"number"!=typeof s&&(s=this.doc.documentElement[r]),s}scrollTo(t,e=0,n,r){const i=t||window,s=this.getScroll(i),o=Date.now(),l=()=>{const t=Date.now()-o;this.setScrollTop(i,(n||function(t,e,n,r){const i=n-e;let s=t/(r/2);return s<1?i/2*s*s*s+e:i/2*((s-=2)*s*s+2)+e})(t,s,e,450)),t<450?Z(l):r&&r()};Z(l)}}function J(t,e){return e||new Q(t)}class tt{constructor(t){this.classMap={},this.renderer=t.createRenderer(null,null)}updateHostClass(t,e){this.removeClass(t,this.classMap,this.renderer),this.classMap=Object.assign({},e),this.addClass(t,this.classMap,this.renderer)}removeClass(t,e,n){for(const r in e)e.hasOwnProperty(r)&&n.removeClass(t,r)}addClass(t,e,n){for(const r in e)e.hasOwnProperty(r)&&e[r]&&n.addClass(t,r)}}class et{}let nt=(()=>{class t{constructor(t,e){this.ngZone=t,this.rendererFactory2=e,this.resizeSource=new m.a,this.domEventListeners=new Map,this.renderer=this.rendererFactory2.createRenderer(null,null)}registerResizeListener(){this.domEventListeners.has("resize")||this.domEventListeners.set("resize",{handler:()=>{this.resizeSource.next()},countOfListeners:0});const t=this.domEventListeners.get("resize");return this.tryToStartListener(t,"resize"),this.resizeSource.pipe(Object(y.a)(16))}unregisterResizeListener(){if(!this.domEventListeners.has("resize"))return;const t=this.domEventListeners.get("resize");this.tryToStopListener(t)}tryToStartListener(t,e){t.countOfListeners+=1,this.ngZone.runOutsideAngular(()=>{1===t.countOfListeners&&(t.unsubscribe=this.renderer.listen("window",e,t.handler))})}tryToStopListener(t){t.countOfListeners-=1,0===t.countOfListeners&&(t.unsubscribe(),t.unsubscribe=void 0)}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(r.y),Object(r.Ub)(r.E))},token:t,providedIn:"root"}),t})();class rt{constructor(t,e=null,n=null){if(this.level=0,t instanceof rt)return t;this.service=n||null,this.origin=t,this.key=t.key,this.parentNode=e,this._title=t.title||"---",this._icon=t.icon||"",this._isLeaf=t.isLeaf||!1,this._children=[],this._isChecked=t.checked||!1,this._isSelectable=t.disabled||!1!==t.selectable,this._isDisabled=t.disabled||!1,this._isDisableCheckbox=t.disableCheckbox||!1,this._isExpanded=!t.isLeaf&&(t.expanded||!1),this._isHalfChecked=!1,this._isSelected=!t.disabled&&t.selected||!1,this._isLoading=!1,this.isMatched=!1,this.level=e?e.level+1:0,null!=t.children&&t.children.forEach(e=>{const n=this.treeService;!n||n.isCheckStrictly||!t.checked||t.disabled||e.disabled||e.disableCheckbox||(e.checked=t.checked),this._children.push(new rt(e,this))})}get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}get title(){return this._title}set title(t){this._title=t,this.update()}get icon(){return this._icon}set icon(t){this._icon=t,this.update()}get children(){return this._children}set children(t){this._children=t,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(t){this._isLeaf=t}get isChecked(){return this._isChecked}set isChecked(t){this._isChecked=t,this._isAllChecked=t,this.origin.checked=t,this.afterValueChange("isChecked")}get isAllChecked(){return this._isAllChecked}set isAllChecked(t){E("'isAllChecked' is going to be removed in 9.0.0. Please use 'isChecked' instead."),this._isAllChecked=t}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(t){this._isHalfChecked=t,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(t){this._isSelectable=t,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(t){this._isDisabled=t,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(t){this._isDisableCheckbox=t,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(t){this._isExpanded=t,this.origin.expanded=t,this.afterValueChange("isExpanded")}get isSelected(){return this._isSelected}set isSelected(t){this._isSelected=t,this.origin.selected=t,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(t){this._isLoading=t,this.update()}setSyncChecked(t=!1,e=!1){this.setChecked(t,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(t=!1,e=!1){E("'setChecked' is going to be removed in 9.0.0. Please use 'isChecked' instead."),this.origin.checked=t,this.isChecked=t,this.isAllChecked=t,this.isHalfChecked=e}setExpanded(t){E("'setExpanded' is going to be removed in 9.0.0. Please use 'isExpanded' instead."),this.isExpanded=t}setSelected(t){E("'setSelected' is going to be removed in 9.0.0. Please use 'isExpanded' isSelected."),this.isDisabled||(this.isSelected=t)}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(t,e=-1){this.isLeaf||(t.forEach(t=>{const n=t=>{t.getChildren().forEach(t=>{t.level=t.getParentNode().level+1,t.origin.level=t.level,n(t)})};let r=t;r instanceof rt?r.parentNode=this:r=new rt(t,this),r.level=this.level+1,r.origin.level=r.level,n(r);try{-1===e?this.children.push(r):this.children.splice(e,0,r)}catch(i){}}),this.origin.children=this.getChildren().map(t=>t.origin),this.isLoading=!1)}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[]}remove(){const t=this.getParentNode();t&&(t.children=t.getChildren().filter(t=>t.key!==this.key),t.origin.children=t.origin.children.filter(t=>t.key!==this.key),this.afterValueChange("remove"))}afterValueChange(t){if(this.treeService)switch(t){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this])}this.update()}update(){this.component&&(this.component.setClassMap(),this.component.markForCheck())}}function it(t){return null==t?[]:Array.isArray(t)?t:[t]}function st(t,e){if(!t||!e||t.length!==e.length)return!1;const n=t.length;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ot(t){return t.slice()}function lt(t){return null!=t}function at(t){return null==t}function ut(t,e){if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;const i=Object.prototype.hasOwnProperty.bind(e);for(let s=0;s<n.length;s++){const r=n[s];if(!i(r))return!1;if(t[r]!==e[r])return!1}return!0}function ct(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}function ht(t){const e=t.childNodes;for(let n=0;n<e.length;n++)if(dt(e.item(n)))return!1;return!0}function dt(t){return t?1===t.nodeType&&0!==t.outerHTML.toString().trim().length?t:3===t.nodeType&&0!==t.textContent.toString().trim().length?t:null:null}function pt(t){return"string"==typeof t&&""!==t}function ft(t){return t instanceof r.L}function gt(t){t.stopPropagation(),t.preventDefault()}function mt(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;return{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}}function bt(t){const e=t.childNodes;for(let n=0;n<e.length;n++){const t=e.item(n);if(dt(t))return t}return null}function yt(t){const e=t.childNodes;for(let n=e.length-1;n>=0;n--){const t=e.item(n);if(dt(t))return t}return null}function vt(t){const e=t.childNodes;let n=e.length;if(n){const r=[];for(e.forEach((t,e)=>r[e]=t);n--;)t.appendChild(r[n])}}function _t(t){return t.type.startsWith("touch")}function wt(t,e="@"){if("string"!=typeof t)return[];const n=function(t){const e=Array.isArray(t)?t:[t];let n=e.join("").replace(/(\$|\^)/g,"\\$1");return e.length>1&&(n=`[${n}]`),new RegExp(`(\\s|^)(${n})[^\\s]*`,"g")}(e),r=t.match(n);return null!==r?r.map(t=>t.trim()):[]}function xt(t,e,n){if(t.length>e)return t;const r=`${function(t,e){return Array(t).fill(e).join("")}(e,n)}${t}`;return r.slice(r.length-e,r.length)}function Ct(t){return!!t&&"function"==typeof t.then&&"function"==typeof t.catch}function St(t,e,n){return(n-t)/(e-t)*100}function Ot(t){const e=t.toString(),n=e.indexOf(".");return n>=0?e.length-n-1:0}function kt(t,e,n){return isNaN(t)||t<e?e:t>n?n:t}function Et(t){t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!1):t.scrollIntoView&&t.scrollIntoView(!1)}const Tt=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],zt="undefined"!=typeof window,Pt=zt&&null!=window.mozInnerScreenX,It=t=>parseInt(t,10);function Mt(t,e,n){if(!zt)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");const r=n&&n.debug||!1;if(r){const t=document.querySelector("#input-textarea-caret-position-mirror-div");t&&t.parentNode.removeChild(t)}const i=document.createElement("div");i.id="input-textarea-caret-position-mirror-div",document.body.appendChild(i);const s=i.style,o=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,l="INPUT"===t.nodeName;s.whiteSpace="pre-wrap",l||(s.wordWrap="break-word"),s.position="absolute",r||(s.visibility="hidden"),Tt.forEach(t=>{l&&"lineHeight"===t?s.lineHeight=o.height:s[t]=o[t]}),Pt?t.scrollHeight>It(o.height)&&(s.overflowY="scroll"):s.overflow="hidden",i.textContent=t.value.substring(0,e),l&&(i.textContent=i.textContent.replace(/\s/g,"\xa0"));const a=document.createElement("span");a.textContent=t.value.substring(e)||".",i.appendChild(a);const u={top:a.offsetTop+It(o.borderTopWidth),left:a.offsetLeft+It(o.borderLeftWidth),height:It(o.lineHeight)};return r?(a.style.backgroundColor="#eee",function(t,e){const n=getComputedStyle(t).getPropertyValue("font-size"),r=document.querySelector("#DEBUG")||document.createElement("div");document.body.appendChild(r),r.id="DEBUG",r.style.position="absolute",r.style.backgroundColor="red",r.style.height=n,r.style.width="1px",r.style.top=`${t.getBoundingClientRect().top-t.scrollTop+window.pageYOffset+e.top}px`,r.style.left=`${t.getBoundingClientRect().left-t.scrollLeft+window.pageXOffset+e.left}px`}(t,u)):document.body.removeChild(i),u}function Dt(){return function(t,e,n){const r=n.value;let i=!1;return{configurable:!0,get(){if(i||this===t.prototype||this.hasOwnProperty(e))return r;const n=function(t){let e;const n=(...n)=>{null==e&&(e=Z((n=>()=>{e=null,t(...n)})(n)))};return n.cancel=()=>X(e),n}(r.bind(this));return i=!0,Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),i=!1,n}}}}function At(t){if("undefined"!=typeof window&&window.document&&window.document.documentElement){const e=Array.isArray(t)?t:[t],{documentElement:n}=window.document;return e.some(t=>t in n.style)}return!1}const Nt=1,Rt=3,Ft=8;let $t;const Lt={padding:"0",margin:"0",display:"inline",lineHeight:"inherit"};function jt(t){if(!t)return 0;const e=t.match(/^\d*(\.\d*)?/);return e?Number(e[0]):0}function Bt(t,e,n,r,i){$t||(($t=document.createElement("div")).setAttribute("aria-hidden","true"),document.body.appendChild($t));const s=window.getComputedStyle(t),o=(l=s,Array.prototype.slice.apply(l).map(t=>`${t}: ${l.getPropertyValue(t)};`).join(""));var l;const a=jt(s.lineHeight)*(e+1)+jt(s.paddingTop)+jt(s.paddingBottom);$t.setAttribute("style",o),$t.style.position="fixed",$t.style.left="0",$t.style.height="auto",$t.style.minHeight="auto",$t.style.maxHeight="auto",$t.style.top="-999999px",$t.style.zIndex="-1000",$t.style.textOverflow="clip",$t.style.whiteSpace="normal",$t.style.webkitLineClamp="none";const u=function(t){const e=[];return n.forEach(t=>{const n=e[e.length-1];n&&t.nodeType===Rt&&n.nodeType===Rt?n.data+=t.data:e.push(t)}),e}(),c=document.createElement("div"),h=document.createElement("span"),d=document.createElement("span");function p(){return $t.offsetHeight<a}if(Object.assign(c.style,Lt),Object.assign(h.style,Lt),Object.assign(d.style,Lt),u.forEach(t=>{h.appendChild(t)}),r.forEach(t=>{d.appendChild(t.cloneNode(!0))}),c.appendChild(h),c.appendChild(d),$t.appendChild(c),p()){const t=$t.innerHTML;return $t.removeChild(c),{contentNodes:n,text:t,ellipsis:!1}}const f=Array.prototype.slice.apply($t.childNodes[0].childNodes[0].cloneNode(!0).childNodes).filter(({nodeType:t})=>t!==Ft),g=Array.prototype.slice.apply($t.childNodes[0].childNodes[1].cloneNode(!0).childNodes);$t.removeChild(c),$t.innerHTML="";const m=document.createElement("span");$t.appendChild(m);const b=document.createTextNode(i);m.appendChild(b),g.forEach(t=>{$t.appendChild(t)});const y=[];f.some((t,e)=>{const{finished:n,node:r}=function(t,e){const n=t.nodeType;if(n===Nt)return p()?{finished:!1,node:u[e]}:(m.removeChild(t),{finished:!0,node:null});if(n===Rt){const e=t.textContent||"",n=document.createTextNode(e);return m.insertBefore(n,b),function t(e,n,r=0,i=n.length,s=0){const o=Math.floor((r+i)/2),l=n.slice(0,o);if(e.textContent=l,r>=i-1)for(let a=i;a>=r;a-=1){const t=n.slice(0,a);if(e.textContent=t,p())return a===n.length?{finished:!1,node:document.createTextNode(n)}:{finished:!0,node:document.createTextNode(t)}}return p()?t(e,n,o,i,o):t(e,n,r,o,s)}(n,e)}return{finished:!1,node:null}}(t,e);return r&&y.push(r),n});const v={contentNodes:y,text:$t.innerHTML,ellipsis:!0};for(;$t.firstChild;)$t.removeChild($t.firstChild);return v}let Vt,Wt;const Ut={position:"absolute",top:"-9999px",width:"50px",height:"50px"};function Ht(t="vertical",e="ant"){if("undefined"==typeof document||"undefined"==typeof window)return 0;const n="vertical"===t;if(n&&Vt)return Vt;if(!n&&Wt)return Wt;const r=document.createElement("div");Object.keys(Ut).forEach(t=>{r.style[t]=Ut[t]}),r.className=`${e}-hide-scrollbar scroll-div-append-to-body`,n?r.style.overflowY="scroll":r.style.overflowX="scroll",document.body.appendChild(r);let i=0;return n?Vt=i=r.offsetWidth-r.clientWidth:Wt=i=r.offsetHeight-r.clientHeight,document.body.removeChild(r),i}function Gt(t){const{isDisabled:e,isDisableCheckbox:n}=t;return!(!e&&!n)}function qt(t,e){return e.length>0&&e.indexOf(t)>-1}class Kt{constructor(){this.DRAG_SIDE_RANGE=.25,this.DRAG_MIN_GAP=2,this.isCheckStrictly=!1,this.isMultiple=!1,this.rootNodes=[],this.selectedNodeList=[],this.expandedNodeList=[],this.checkedNodeList=[],this.halfCheckedNodeList=[],this.matchedNodeList=[],this.triggerEventChange$=new m.a}eventTriggerChanged(){return this.triggerEventChange$.asObservable()}initTree(t){this.rootNodes=t,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[],setTimeout(()=>{this.refreshCheckState(this.isCheckStrictly)})}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(t){return t.every(t=>t instanceof rt)}calcSelectedKeys(t,e,n=!1){const r=e=>e.every(e=>{if(qt(e.key,t)){if(e.isSelected=!0,!n)return!1}else e.isSelected=!1;return!(e.children.length>0)||r(e.children)});r(e)}calcExpandedKeys(t,e){this.expandedNodeList=[];const n=e=>{e.forEach(e=>{e.isExpanded=qt(e.key,t),e.children.length>0&&n(e.children)})};n(e)}calcCheckedKeys(t,e,n=!1){this.checkedNodeList=[],this.halfCheckedNodeList=[];const r=e=>{e.forEach(e=>{qt(e.key,t)?(e.isChecked=!0,e.isHalfChecked=!1):(e.isChecked=!1,e.isHalfChecked=!1),e.children.length>0&&r(e.children)})};r(e),this.refreshCheckState(n)}setSelectedNode(t){this.selectedNode=t}setNodeActive(t){!this.isMultiple&&t.isSelected&&(this.selectedNodeList.forEach(e=>{t.key!==e.key&&(e.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(t,this.isMultiple)}setSelectedNodeList(t,e=!1){const n=this.selectedNodeList.findIndex(e=>t.key===e.key);e?t.isSelected&&-1===n&&this.selectedNodeList.push(t):t.isSelected&&-1===n&&(this.selectedNodeList=[t]),t.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(e=>e.key!==t.key))}setHalfCheckedNodeList(t){const e=this.halfCheckedNodeList.findIndex(e=>t.key===e.key);t.isHalfChecked&&-1===e?this.halfCheckedNodeList.push(t):!t.isHalfChecked&&e>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(e=>t.key!==e.key))}setCheckedNodeList(t){const e=this.checkedNodeList.findIndex(e=>t.key===e.key);t.isChecked&&-1===e?this.checkedNodeList.push(t):!t.isChecked&&e>-1&&(this.checkedNodeList=this.checkedNodeList.filter(e=>t.key!==e.key))}conductNodeState(t="check"){let e=[];switch(t){case"select":e=this.selectedNodeList;break;case"expand":e=this.expandedNodeList;break;case"match":e=this.matchedNodeList;break;case"check":e=this.checkedNodeList;const n=t=>{const e=t.getParentNode();return!!e&&(this.checkedNodeList.findIndex(t=>t.key===e.key)>-1||n(e))};this.isCheckStrictly||(e=this.checkedNodeList.filter(t=>!n(t)));break;case"halfCheck":this.isCheckStrictly||(e=this.halfCheckedNodeList)}return e}setExpandedNodeList(t){if(t.isLeaf)return;const e=this.expandedNodeList.findIndex(e=>t.key===e.key);t.isExpanded&&-1===e?this.expandedNodeList.push(t):!t.isExpanded&&e>-1&&(this.expandedNodeList=this.expandedNodeList.filter(e=>t.key!==e.key))}refreshCheckState(t=!1){t||this.checkedNodeList.forEach(t=>{this.conduct(t)})}conduct(t){const e=t.isChecked;t&&(this.conductUp(t),this.conductDown(t,e))}conductUp(t){const e=t.getParentNode();e&&(Gt(e)||(e.children.every(t=>Gt(t)||!t.isHalfChecked&&t.isChecked)?(e.isChecked=!0,e.isHalfChecked=!1):e.children.some(t=>t.isHalfChecked||t.isChecked)?(e.isChecked=!1,e.isHalfChecked=!0):(e.isChecked=!1,e.isHalfChecked=!1)),this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),this.conductUp(e))}conductDown(t,e){Gt(t)||(t.isChecked=e,t.isHalfChecked=!1,this.setCheckedNodeList(t),this.setHalfCheckedNodeList(t),t.children.forEach(t=>{this.conductDown(t,e)}))}searchExpand(t){this.matchedNodeList=[];const e=[];if(!lt(t))return;const n=t=>{const r=t.getParentNode();r&&(e.push(r.key),n(r))},r=e=>{t&&e.title.includes(t)?(e.isMatched=!0,this.matchedNodeList.push(e),n(e)):e.isMatched=!1,e.children.forEach(t=>{r(t)})};this.rootNodes.forEach(t=>{r(t)}),this.calcExpandedKeys(e,this.rootNodes)}afterRemove(t){const e=t=>{this.selectedNodeList=this.selectedNodeList.filter(e=>e.key!==t.key),this.expandedNodeList=this.expandedNodeList.filter(e=>e.key!==t.key),this.checkedNodeList=this.checkedNodeList.filter(e=>e.key!==t.key),t.children&&t.children.forEach(t=>{e(t)})};t.forEach(t=>{e(t)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(t){0===t.children.length?this.conductUp(t):t.children.forEach(t=>{this.refreshDragNode(t)})}resetNodeLevel(t){const e=t.getParentNode();t.level=e?e.level+1:0;for(const n of t.children)this.resetNodeLevel(n)}calcDropPosition(t){const{clientY:e}=t,{top:n,bottom:r,height:i}=t.srcElement?t.srcElement.getBoundingClientRect():t.target.getBoundingClientRect(),s=Math.max(i*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return e<=n+s?-1:e>=r-s?1:0}dropAndApply(t,e=-1){if(!t||e>1)return;const n=t.treeService,r=t.getParentNode(),i=this.selectedNode.getParentNode();switch(i?i.children=i.children.filter(t=>t.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(t=>t.key!==this.selectedNode.key),e){case 0:t.addChildren([this.selectedNode]),this.resetNodeLevel(t);break;case-1:case 1:const n=1===e?1:0;if(r){r.addChildren([this.selectedNode],r.children.indexOf(t)+n);const e=this.selectedNode.getParentNode();e&&this.resetNodeLevel(e)}else{const e=this.rootNodes.indexOf(t)+n;this.rootNodes.splice(e,0,this.selectedNode),this.rootNodes[e].parentNode=null,this.rootNodes[e].level=0}}this.rootNodes.forEach(t=>{t.treeService||(t.service=n),this.refreshDragNode(t)})}formatEvent(t,e,n){const r={eventName:t,node:e,event:n};switch(t){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(r,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(r,{selectedKeys:this.selectedNodeList}),Object.assign(r,{nodes:this.selectedNodeList}),Object.assign(r,{keys:this.selectedNodeList.map(t=>t.key)});break;case"check":const e=this.getCheckedNodeList();Object.assign(r,{checkedKeys:e}),Object.assign(r,{nodes:e}),Object.assign(r,{keys:e.map(t=>t.key)});break;case"search":Object.assign(r,{matchedKeys:this.getMatchedNodeList()}),Object.assign(r,{nodes:this.getMatchedNodeList()}),Object.assign(r,{keys:this.getMatchedNodeList().map(t=>t.key)});break;case"expand":Object.assign(r,{nodes:this.expandedNodeList}),Object.assign(r,{keys:this.expandedNodeList.map(t=>t.key)})}return r}ngOnDestroy(){this.triggerEventChange$.complete()}}class Yt{constructor(t){this.nzTreeService=t}coerceTreeNodes(t){return this.nzTreeService.isArrayOfNzTreeNode(t)?t.map(t=>(t.service=this.nzTreeService,t)):t.map(t=>new rt(t,null,this.nzTreeService))}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(t){const e=[],n=t=>{e.push(t),t.getChildren().forEach(t=>{n(t)})};return this.getTreeNodes().forEach(t=>{n(t)}),e.find(e=>e.key===t)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}}class Xt{constructor(t,e,n){this.triggerElement=t,this.ngZone=e,this.insertExtraNode=n,this.waveTransitionDuration=400,this.lastTime=0,this.platform=new v.a,this.onClick=t=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||"INPUT"===t.target.tagName||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()},this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){const t=this.triggerElement,e=this.getWaveColor(t);t.setAttribute(this.waveAttributeName,"true"),Date.now()<this.lastTime+this.waveTransitionDuration||(this.isValidColor(e)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style")),this.styleForPseudo.innerHTML=`[ant-click-animating-without-extra-node]:after { border-color: ${e}; }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",t.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{t.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(t){return!!t&&"#ffffff"!==t&&"rgb(255, 255, 255)"!==t&&this.isNotGrey(t)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(t)&&"transparent"!==t}isNotGrey(t){const e=t.match(/rgba?\((\d*), (\d*), (\d*)(, [\.\d]*)?\)/);return!(e&&e[1]&&e[2]&&e[3]&&e[1]===e[2]&&e[2]===e[3])}getWaveColor(t){const e=getComputedStyle(t);return e.getPropertyValue("border-top-color")||e.getPropertyValue("border-color")||e.getPropertyValue("background-color")}runTimeoutOutsideZone(t,e){this.ngZone.runOutsideAngular(()=>setTimeout(t,e))}}const Zt={disabled:!1},Qt=new r.p("nz-wave-global-options",{providedIn:"root",factory:function(){return Zt}});class Jt{constructor(t,e,n,r){this.ngZone=t,this.elementRef=e,this.config=n,this.animationType=r,this.nzWaveExtraNode=!1,this.waveDisabled=!1,this.waveDisabled=this.isConfigDisabled()}get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}isConfigDisabled(){let t=!1;return this.config&&"boolean"==typeof this.config.disabled&&(t=this.config.disabled),"NoopAnimations"===this.animationType&&(t=!0),t}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new Xt(this.elementRef.nativeElement,this.ngZone,this.nzWaveExtraNode))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}}class te{}class ee{constructor(){this.menuItemClick$=new m.a,this.theme$=new m.a,this.mode$=new b.a("vertical"),this.inlineIndent$=new b.a(24),this.theme="light",this.mode="vertical",this.inlineIndent=24,this.menuOpen$=new b.a(!1)}onMenuItemClick(t){this.menuItemClick$.next(t)}setMode(t){this.mode=t,this.mode$.next(t)}setTheme(t){this.theme=t,this.theme$.next(t)}setInlineIndent(t){this.inlineIndent=t,this.inlineIndent$.next(t)}}const ne=new r.p("NzMenuHigherOrder"),re={xxl:"xxl",xl:"xl",lg:"lg",md:"md",sm:"sm",xs:"xs"},ie={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};class se{}},"5WJM":function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],r[i]=n^=(t^=t<<13)^t<<9,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function l(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&l(r,n),i.state=function(){return l(n,{})}),i}i&&i.exports?i.exports=a:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return a}).call(e,n,e,i))||(i.exports=r):this.xorshift7=a}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},"5iAy":function(t,e,n){var r=n("xq5I");t.exports=function(t){return r(new Date,t)}},"5uBk":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("RGEn");class r{}},"5z3u":function(t,e,n){var r=n("yNUO"),i=n("gfz1");t.exports=function(t,e){var n=r(t),s=Number(e),o=i(n)-s;return n.setDate(n.getDate()-7*o),n}},"6+H1":function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"f",function(){return o}),n.d(e,"d",function(){return l}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("DQLy");const i=Object(r.s)("[player] Set playing",Object(r.y)()),s=Object(r.s)("[player] Set playList",Object(r.y)()),o=Object(r.s)("[player] Set songList",Object(r.y)()),l=Object(r.s)("[player] Set playMode",Object(r.y)()),a=Object(r.s)("[player] Set currentIndex",Object(r.y)()),u=Object(r.s)("[player] Set currentAction",Object(r.y)())},"6/vs":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n("RDh8"),n("7iOB");const r={title:"\u6b4c\u5355\u8be6\u60c5"};class i{}},"66zS":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("mrSG"),s=n("HXN9"),o=n("IheW"),l=n("LRne"),a=n("lJxs"),u=n("vkgz"),c=n("nYR2"),h=n("JIr8"),d=n("w1tV");const p="[@ant-design/icons-angular]: ";function f(t){return Object(s.generate)(t)[0]}function g(t,e){switch(e){case"fill":return`${t}-fill`;case"outline":return`${t}-o`;case"twotone":return`${t}-twotone`;case void 0:return t;default:throw new Error(`${p}Theme "${e}" is not a recognized theme!`)}}function m(t){return"object"==typeof t&&"string"==typeof t.name&&("string"==typeof t.theme||void 0===t.theme)&&"string"==typeof t.icon}function b(t){const e=t.split(":");switch(e.length){case 1:return[t,""];case 2:return[e[1],e[0]];default:throw new Error(`${p}The icon type ${t} is not valid!`)}}function y(){return new Error(`${p}Type should have a namespace. Try "namespace:${name}".`)}function v(){return new Error(`${p}<svg> tag not found`)}class _{constructor(t,e,n,r){this._rendererFactory=t,this._handler=e,this._document=n,this.sanitizer=r,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new o.c(this._handler))}set twoToneColor({primaryColor:t,secondaryColor:e}){this._twoToneColorPalette.primaryColor=t,this._twoToneColorPalette.secondaryColor=e||f(t)}get twoToneColor(){return Object.assign({},this._twoToneColorPalette)}changeAssetsSource(t){this._assetsUrlRoot=t.endsWith("/")?t:t+"/"}addIcon(...t){t.forEach(t=>{this._svgDefinitions.set(g(t.name,t.theme),t)})}addIconLiteral(t,e){const[n,r]=b(t);if(!r)throw y();this.addIcon({name:t,icon:e})}clear(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}getRenderedContent(t,e){const n=m(t)?t:this._svgDefinitions.get(t);return(n?Object(l.a)(n):this._getFromRemote(t)).pipe(Object(a.a)(n=>{if(!n)throw function(t){return new Error(`${p}the icon ${t} does not exist or is not registered.`)}(t);return this._loadSVGFromCacheOrCreateNew(n,e)}))}getCachedIcons(){return this._svgDefinitions}_getFromRemote(t){if(!this._http)return Object(l.a)((console.error(`${p}you need to import "HttpClientModule" to use dynamic importing.`),null));let e=this._inProgressFetches.get(t);if(!e){const[n,i]=b(t),s=i?{name:t,icon:""}:function(t){const e=n.split("-"),r="o"===(i=e.splice(e.length-1,1)[0])?"outline":i;var i;return{name:e.join("-"),theme:r,icon:""}}(),o=i?`${this._assetsUrlRoot}assets/${i}/${n}.svg`:`${this._assetsUrlRoot}assets/${s.theme}/${s.name}.svg`,f=this.sanitizer.sanitize(r.H.URL,o);if(!f)throw function(t){return new Error(`${p}The url "${t}" is unsafe.`)}(o);e=this._http.get(f,{responseType:"text"}).pipe(Object(a.a)(t=>Object.assign({},s,{icon:t})),Object(u.a)(t=>this.addIcon(t)),Object(c.a)(()=>this._inProgressFetches.delete(t)),Object(h.a)(()=>Object(l.a)(null)),Object(d.a)()),this._inProgressFetches.set(t,e)}return e}_loadSVGFromCacheOrCreateNew(t,e){let n;const r=e||this._twoToneColorPalette.primaryColor,i=f(r)||this._twoToneColorPalette.secondaryColor,s="twotone"===t.theme?function(e,n,r,i){return`${g(t.name,t.theme)}-${r}-${i}`}(0,0,r,i):void 0===t.theme?t.name:g(t.name,t.theme),o=this._svgRenderedDefinitions.get(s);return o?n=o.icon:(n=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(""!==b(t.name)[1]?t.icon:t.icon.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')),"twotone"===t.theme,r,i)),this._svgRenderedDefinitions.set(s,Object.assign({},t,{icon:n}))),function(t){return t.cloneNode(!0)}(n)}_createSVGElementFromString(t){const e=this._document.createElement("div");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw v;return n}_setSVGAttribute(t){return this._renderer.setAttribute(t,"width","1em"),this._renderer.setAttribute(t,"height","1em"),t}_colorizeSVGIcon(t,e,n,r){if(e){const e=t.childNodes,i=e.length;for(let t=0;t<i;t++){const i=e[t];"secondaryColor"===i.getAttribute("fill")?this._renderer.setAttribute(i,"fill",r):this._renderer.setAttribute(i,"fill",n)}}return this._renderer.setAttribute(t,"fill","currentColor"),t}}class w{constructor(t,e,n){this._iconService=t,this._elementRef=e,this._renderer=n}ngOnChanges(t){(t.type||t.theme||t.twoToneColor)&&this._changeIcon()}_changeIcon(){return new Promise(t=>{this.type?this._iconService.getRenderedContent(this._parseIconType(this.type,this.theme),this.twoToneColor).subscribe(e=>{this._setSVGElement(e),t(e)}):(this._clearSVGElement(),t(null))})}_parseIconType(t,e){if(m(t))return t;{const[n,r]=b(t);return r?t:function(t){return t.endsWith("-fill")||t.endsWith("-o")||t.endsWith("-twotone")}(n)?(e&&console.warn(`${p}${`'type' ${n} already gets a theme inside so 'theme' ${e} would be ignored`}.`),n):g(n,e||this._iconService.defaultTheme)}}_setSVGElement(t){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,t)}_clearSVGElement(){const t=this._elementRef.nativeElement,e=t.childNodes;for(let n=e.length-1;n>=0;n--){const r=e[n];"svg"===r.tagName.toLowerCase()&&this._renderer.removeChild(t,r)}}}var x=n("5VGP"),C=n("SVse"),S=n("cUpR");const O={name:"star",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 0 0 .6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0 0 46.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"/></svg>'};n.d(e,"a",function(){return A}),n.d(e,"b",function(){return N}),n.d(e,"c",function(){return P});const k=new r.p("nz_icons"),E=new r.p("nz_icon_default_twotone_color"),T="#1890ff",z=[{name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm0 284a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"/></svg>'},{name:"calendar",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"/></svg>'},{name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"/></svg>'},{name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z"/></svg>'},{name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"/></svg>'},{name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"/></svg>'},{name:"check-circle",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 0 1-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"/></svg>'},{name:"check-circle",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"/><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/></svg>'},{name:"check",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"/></svg>'},{name:"clock-circle",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"/></svg>'},{name:"close-circle",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"/><path d="M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/></svg>'},{name:"close-circle",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 0 1-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"/></svg>'},{name:"close",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 0 0 203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"/></svg>'},{name:"copy",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"/></svg>'},{name:"double-left",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 0 0 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 0 0 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"/></svg>'},{name:"double-right",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 0 0 188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 0 0 492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"/></svg>'},{name:"down",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"/></svg>'},{name:"edit",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"/></svg>'},{name:"ellipsis",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M176 511a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm280 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0zm280 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0z"/></svg>'},{name:"exclamation-circle",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z"/></svg>'},{name:"exclamation-circle",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/><path d="M464 688a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"/></svg>'},{name:"eye",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 0 0 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"/></svg>'},{name:"file",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"/></svg>'},{name:"file",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0 0 42 42h216v494z"/></svg>'},{name:"filter",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z"/></svg>'},{name:"info-circle",theme:"fill",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z"/></svg>'},{name:"info-circle",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/><path d="M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"/></svg>'},{name:"left",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"/></svg>'},{name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"/></svg>'},{name:"paper-clip",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0 0 12.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0 0 12.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 0 0 174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"/></svg>'},{name:"question-circle",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"/><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1 0 80 0 40 40 0 1 0-80 0z"/></svg>'},{name:"right",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z"/></svg>'},O,{name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"/></svg>'},O,{name:"upload",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 0 0-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"/></svg>'},{name:"up",theme:"outline",icon:'<svg  viewBox="64 64 896 896"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 0 0 140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"/></svg>'}];let P=(()=>{class t extends _{constructor(t,e,n,r,i,s){super(t,i,s,e),this.icons=n,this.defaultColor=r,this.iconfontCache=new Set,this.addIcon(...z,...this.icons||[]);let o=T;this.defaultColor&&(this.defaultColor.startsWith("#")?o=this.defaultColor:Object(x.qb)("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:o}}warnAPI(t){"old"===t&&Object(x.rb)("'<i class=\"anticon\"></i>' would be deprecated in 9.0.0. Please use '<i nz-icon nzType=\"\"></i>' API. Please refer https://ng.ant.design/components/icon/en."),"cross"===t&&Object(x.rb)("'cross' icon is replaced by 'close' icon. This auto correction would be removed in 9.0.0."),"vertical"===t&&Object(x.rb)("'verticle' is misspelled. Please use 'vertical'. This misspell would be fixed in 9.0.0.")}normalizeSvgElement(t){t.getAttribute("viewBox")||this._renderer.setAttribute(t,"viewBox","0 0 1024 1024"),t.getAttribute("width")&&t.getAttribute("height")||(this._renderer.setAttribute(t,"width","1em"),this._renderer.setAttribute(t,"height","1em")),t.getAttribute("fill")||this._renderer.setAttribute(t,"fill","currentColor")}fetchFromIconfont(t){const{scriptUrl:e}=t;if(this._document&&!this.iconfontCache.has(e)){const t=this._renderer.createElement("script");this._renderer.setAttribute(t,"src",e),this._renderer.setAttribute(t,"data-namespace",e.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,t),this.iconfontCache.add(e)}}createIconfontIcon(t){return this._createSVGElementFromString(`<svg><use xlink:href="${t}"></svg>`)}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(r.E),Object(r.Ub)(S.b),Object(r.Ub)(k,8),Object(r.Ub)(E,8),Object(r.Ub)(o.b,8),Object(r.Ub)(C.d,8))},token:t,providedIn:"root"}),t})();const I=/^anticon\-\w/,M=t=>{if(t){const e=t.split(/\s/),n=e.findIndex(t=>"anticon"!==t&&"anticon-spin"!==t&&!!t.match(I));return-1===n?void 0:{name:e[n],index:n}}},D=t=>{const e={type:t,crossError:!1,verticalError:!1};return e.type=t?t.replace("anticon-",""):"",e.type.includes("verticle")&&(e.type="up",e.verticalError=!0),e.type.startsWith("cross")&&(e.type="close",e.crossError=!0),e};let A=(()=>{class t extends w{constructor(t,e,n,r){super(t,e,n),this.iconService=t,this.elementRef=e,this.renderer=n,this.platform=r,this.nzRotate=0,this.spin=!1,this.el=this.elementRef.nativeElement}set nzSpin(t){this.spin=t}set nzType(t){this.type=t}set nzTheme(t){this.theme=t}set nzTwotoneColor(t){this.twoToneColor=t}set nzIconfont(t){this.iconfont=t}set type(t){if(t&&t.startsWith("anticon")){const e=M(t),n=e?D(e.name).type:"";n&&this.type!==n&&(this._type=n)}else this._type=t}get type(){return this._type}changeIcon2(t=!1){t||this.setClassName(),this._changeIcon().then(e=>{this.setSVGData(e),!t&&e&&(this.handleSpin(e),this.handleRotate(e))})}classChangeHandler(t){const e=M(t);if(e){const{type:t,crossError:n,verticalError:r}=D(e.name);n&&this.iconService.warnAPI("cross"),r&&this.iconService.warnAPI("vertical"),this.type!==t&&(this._type=t,this.changeIcon2(!0))}}handleSpin(t){!this.spin&&"loading"!==this.type||this.elementRef.nativeElement.classList.contains("anticon-spin")?this.renderer.removeClass(t,"anticon-spin"):this.renderer.addClass(t,"anticon-spin")}handleRotate(t){this.nzRotate?this.renderer.setAttribute(t,"style",`transform: rotate(${this.nzRotate}deg)`):this.renderer.removeAttribute(t,"style")}setClassName(){if("string"==typeof this.type){const t=this.el.className.split(/\s/),e=M(this.el.className);e?(t.splice(e.index,1,`anticon-${this.type}`),this.renderer.setAttribute(this.el,"class",t.join(" "))):this.renderer.addClass(this.el,`anticon-${this.type}`)}}setSVGData(t){"string"==typeof this.type&&t&&(this.renderer.setAttribute(t,"data-icon",this.type),this.renderer.setAttribute(t,"aria-hidden","true"))}ngOnChanges(t){const{type:e,nzType:n,nzTwotoneColor:r,twoToneColor:i,spin:s,nzSpin:o,theme:l,nzTheme:a,nzRotate:u}=t;e||n||r||i||s||o||l||a?this.changeIcon2():u?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon(`#${this.iconfont}`))}ngOnInit(){!this.type&&this.el.classList.contains("anticon")&&(this.iconService.warnAPI("old"),this.classChangeHandler(this.el.className),this.platform.isBrowser&&(this.classNameObserver=new MutationObserver(t=>{t.filter(t=>"class"===t.attributeName).forEach(t=>this.classChangeHandler(t.target.className))}),this.classNameObserver.observe(this.el,{attributes:!0}))),this.el.classList.contains("anticon")||this.renderer.setAttribute(this.el,"class",`anticon ${this.el.className}`.trim())}ngOnDestroy(){this.classNameObserver&&this.classNameObserver.disconnect()}ngAfterContentChecked(){const t=this.el.children;let e=t.length;if(!this.type&&t.length)for(;e--;){const n=t[e];"svg"===n.tagName.toLowerCase()&&this.iconService.normalizeSvgElement(n)}}}return Object(i.__decorate)([Object(x.g)(),Object(i.__metadata)("design:type",Boolean),Object(i.__metadata)("design:paramtypes",[Boolean])],t.prototype,"nzSpin",null),t})();class N{}},"6B6o":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("yrbL"),i=n("R36U"),s=n("XNiG"),o=n("DQLy"),l=n("hLrw"),a=n("kujU");class u{constructor(t,e,n,o,l){this.route=t,this.songServe=e,this.store$=n,this.batchActionServe=o,this.nzMessageServe=l,this.controlLyric={isExpand:!1,label:"\u5c55\u5f00",iconCls:"down"},this.destroy$=new s.a,this.route.data.pipe(Object(r.map)(t=>t.songInfo)).subscribe(([t,e])=>{this.song=t,this.lyric=new i.a(e).lines,this.listenCurrent()})}ngOnInit(){}listenCurrent(){this.store$.pipe(Object(o.z)(l.f),Object(o.z)(l.c),Object(r.takeUntil)(this.destroy$)).subscribe(t=>this.currentSong=t)}toggleLyric(){this.controlLyric.isExpand=!this.controlLyric.isExpand,this.controlLyric.isExpand?(this.controlLyric.label="\u6536\u8d77",this.controlLyric.iconCls="up"):(this.controlLyric.label="\u5c55\u5f00",this.controlLyric.iconCls="down")}onAddSong(t,e=!1){this.currentSong&&this.currentSong.id===t.id||this.songServe.getSongList(t).subscribe(t=>{t.length?this.batchActionServe.insertSong(t[0],e):this.nzMessageServe.create("warning","\u65e0url!")})}onLikeSong(t){this.batchActionServe.likeSong(t)}onShareSong(t,e="song"){const n=this.makeTxt("\u6b4c\u66f2",t.name,t.ar);this.store$.dispatch(Object(a.d)({info:{id:t.id.toString(),type:e,txt:n}}))}makeTxt(t,e,n){return`${t}: ${e} -- ${n.map(t=>t.name).join("/")}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}},"6DAA":function(t,e,n){var r=n("kOWh");t.exports=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Su","Mo","Tu","We","Th","Fr","Sa"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["AM","PM"],l=["am","pm"],a=["a.m.","p.m."],u={MMM:function(e){return t[e.getMonth()]},MMMM:function(t){return e[t.getMonth()]},dd:function(t){return n[t.getDay()]},ddd:function(t){return i[t.getDay()]},dddd:function(t){return s[t.getDay()]},A:function(t){return t.getHours()/12>=1?o[1]:o[0]},a:function(t){return t.getHours()/12>=1?l[1]:l[0]},aa:function(t){return t.getHours()/12>=1?a[1]:a[0]}};return["M","D","DDD","d","Q","W"].forEach(function(t){u[t+"o"]=function(e,n){return function(t){var e=t%100;if(e>20||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(n[t](e))}}),{formatters:u,formattingTokensRegExp:r(u)}}},"6WtA":function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setSeconds(0,0),e}},"6aLS":function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("Vi6O"),o=n("cSoz"),l=n("q3Kh"),a=n("gTqA");e.switchMap=function t(e,n){return"function"==typeof n?function(r){return r.pipe(t(function(t,r){return a.from(e(t,r)).pipe(l.map(function(e,i){return n(t,e,r,i)}))}))}:function(t){return t.lift(new u(e))}};var u=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return r(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new s.InnerSubscriber(this,void 0,void 0);this.destination.add(i),this.innerSubscription=o.subscribeToResult(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(i.OuterSubscriber)},"6eB1":function(t,e,n){"use strict";var r=n("Q1FS"),i=n("nzqU"),s=n("QtHX"),o=n("zzsZ");e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,l=null,a=t[t.length-1];return i.isScheduler(a)?(l=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof a&&(n=t.pop()),null===l&&1===t.length&&t[0]instanceof r.Observable?t[0]:s.mergeAll(n)(o.fromArray(t,l))}},"6qA3":function(t,e,n){"use strict";var r=n("Q1FS"),i=n("OAkW"),s=n("Z5tI"),o=n("poJ0"),l=n("ozli"),a=n("yRPT"),u=n("90cg"),c=n("GMZp"),h=n("VKeD"),d=n("zfKp");e.subscribeTo=function(t){if(t instanceof r.Observable)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[d.observable])return l.subscribeToObservable(t);if(a.isArrayLike(t))return i.subscribeToArray(t);if(u.isPromise(t))return s.subscribeToPromise(t);if(t&&"function"==typeof t[h.iterator])return o.subscribeToIterable(t);var e=c.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"6qX0":function(t,e,n){var r=n("yNUO");t.exports=function(t,e,n,i){var s=r(t).getTime(),o=r(e).getTime(),l=r(n).getTime(),a=r(i).getTime();if(s>o||l>a)throw new Error("The start of the range cannot be after the end of the range");return s<a&&l<o}},"76/Q":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("IKal"),o=n("aJGj");e.takeLast=function(t){return function(e){return 0===t?o.empty():e.lift(new l(t))}};var l=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return r(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var s=e++%n;t.next(r[s])}t.complete()},e}(i.Subscriber)},"7B8A":function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t).getTime(),i=Number(e);return new Date(n+i)}},"7K7o":function(t,e,n){"use strict";var r=n("Ceu0");e.multicast=function(t,e){return function(n){var s;if(s="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new i(s,e));var o=Object.create(n,r.connectableObservableDescriptor);return o.source=n,o.subjectFactory=s,o}};var i=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}();e.MulticastOperator=i},"7KIa":function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}},"7QIX":function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n("8Y7J"),i=n("/HVE");n("XNiG"),n("itXk"),n("GyhO"),n("HDdC"),n("IzEk"),n("zP0r"),n("Kj3r"),n("lJxs"),n("JX91"),n("1G5W"),n("KCVW");class s{}const o=new Set;let l,a=(()=>{class t{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):u}matchMedia(t){return this._platform.WEBKIT&&function(t){if(!o.has(t))try{l||((l=document.createElement("style")).setAttribute("type","text/css"),document.head.appendChild(l)),l.sheet&&(l.sheet.insertRule(`@media ${t} {.fx-query-test{ }}`,0),o.add(t))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(i.a))},token:t,providedIn:"root"}),t})();function u(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}},"7RJT":function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("Mxlh");e.BehaviorSubject=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new s.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.Subject)},"7iOB":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t){this.sheetServe=t}resolve(t){return this.sheetServe.getSongSheetDetail(Number(t.paramMap.get("id")))}}},"7kRp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t,e,n,r){this.route=t,this.router=e,this.sheetServe=n,this.batchActionsServe=r,this.listParams={cat:"\u5168\u90e8",order:"hot",offset:1,limit:35},this.orderValue="hot",this.listParams.cat=this.route.snapshot.queryParamMap.get("cat")||"\u5168\u90e8",this.getList()}ngOnInit(){}onOrderChange(t){this.listParams.order=t,this.listParams.offset=1,this.getList()}onPageChange(t){this.listParams.offset=t,this.getList()}getList(){this.sheetServe.getSheets(this.listParams).subscribe(t=>this.sheets=t)}onPlaySheet(t){this.sheetServe.playSheet(t).subscribe(t=>{this.batchActionsServe.selectPlayList({list:t,index:0})})}toInfo(t){this.router.navigate(["/sheetInfo",t])}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("n6bG"),i=n("gRHU"),s=n("quSY"),o=n("2QA8"),l=n("2fFW"),a=n("NJ4a");class u extends s.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof u?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,t,e,n)}}[o.a](){return this}static create(t,e,n){const r=new u(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class c extends u{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let l=this;Object(r.a)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.a&&(l=Object.create(e),Object(r.a)(l.unsubscribe)&&this.add(l.unsubscribe.bind(l)),l.unsubscribe=this.unsubscribe.bind(this))),this._context=l,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;l.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=l.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(a.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(a.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);l.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),l.a.useDeprecatedSynchronousErrorHandling)throw n;Object(a.a)(n)}}__tryOrSetError(t,e,n){if(!l.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return l.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(a.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"7pFD":function(t,e,n){var r=n("O8cK");t.exports=function(t,e){var n=r(t,e)/7;return n>0?Math.floor(n):Math.ceil(n)}},"8Iov":function(t,e,n){"use strict";var r=n("8Y7J"),i=n("iInd"),s=n("SVse"),o=n("Irb3"),l=n("5VGP"),a=n("GaVp"),u=n("POq0"),c=n("omvX"),h=n("66zS"),d=n("/HVE"),p=n("6B6o"),f=n("1w6q"),g=n("DQLy"),m=n("ssPz"),b=n("JXeA");n.d(e,"a",function(){return C});var y=r.rb({encapsulation:0,styles:[[".song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]{padding:47px 30px 40px 39px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{float:left;position:relative;display:inline;width:200px;height:200px;margin-right:-220px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;width:208px;height:208px;top:-4px;left:-4px;overflow:hidden;background:url(coverall.6cb90dbc94e586bfc5a5.png) 0 -1285px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]{float:right;width:100%}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]{margin-left:230px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]{position:relative;margin:0 0 12px;line-height:24px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .f-pr[_ngcontent-%COMP%]{position:relative;zoom:1;float:left;display:inline-block;width:54px;height:24px;background:url(icon.29cd8439e24c97d0d553.png) 0 -243px no-repeat;cursor:pointer;overflow:hidden}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]{margin-left:64px;position:relative}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]   .f-ff2[_ngcontent-%COMP%]{line-height:24px;font-size:20px;font-weight:400}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{margin:0 0 12px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .singers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .singers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .singers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .singers[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .s-fc7[_ngcontent-%COMP%]{color:#1890ff}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .al[_ngcontent-%COMP%]   .al-name[_ngcontent-%COMP%]{color:#989898}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{margin-bottom:25px;margin-right:-10px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .lyric-info[_ngcontent-%COMP%]{line-height:23px}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .lyric-info[_ngcontent-%COMP%]   .lyric-content[_ngcontent-%COMP%]{height:327px;overflow:hidden}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .lyric-info[_ngcontent-%COMP%]   .lyric-content.expand[_ngcontent-%COMP%]{height:auto}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .lyric-info[_ngcontent-%COMP%]   .lyric-content[_ngcontent-%COMP%]   .lyric-line[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .lyric-info[_ngcontent-%COMP%]   .toggle-expand[_ngcontent-%COMP%]{cursor:pointer}.song-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .lyric-info[_ngcontent-%COMP%]   .toggle-expand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff}"]],data:{}});function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"li",[],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(2,671744,null,0,i.p,[i.n,i.a,s.i],{routerLink:[0,"routerLink"]},null),r.Gb(3,2),(t()(),r.Nb(4,null,["",""])),(t()(),r.tb(5,0,null,null,1,"i",[],[[8,"hidden",0]],null,null,null,null)),(t()(),r.Nb(-1,null,["/"]))],function(t,e){var n=t(e,3,0,"/singer",e.context.$implicit.id);t(e,2,0,n)},function(t,e){t(e,1,0,r.Fb(e,2).target,r.Fb(e,2).href),t(e,4,0,e.context.$implicit.name),t(e,5,0,e.context.last)})}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","lyric-line"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Nb(2,null,["",""])),(t()(),r.tb(3,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Nb(4,null,["",""]))],null,function(t,e){t(e,2,0,e.context.$implicit.txt),t(e,4,0,e.context.$implicit.txtCn)})}function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,61,"div",[["class","song-info wrap feature-wrap"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,60,"div",[["class","g-wrap6"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,59,"div",[["class","m-info clearfix"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,2,"div",[["class","cover"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(5,0,null,null,0,"div",[["class","mask"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,55,"div",[["class","cnt"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,54,"div",[["class","cntc"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,4,"div",[["class","hd clearfix"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,0,"i",[["class","f-pr"]],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,2,"div",[["class","tit"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,1,"h2",[["class","f-ff2 f-brk"]],null,null,null,null,null)),(t()(),r.Nb(12,null,["",""])),(t()(),r.tb(13,0,null,null,11,"div",[["class","user f-cb"]],null,null,null,null,null)),(t()(),r.tb(14,0,null,null,5,"div",[["class","singers clearfix"]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6b4c\u624b\uff1a"])),(t()(),r.tb(17,0,null,null,2,"ul",[["class","clearfix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(19,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(20,0,null,null,4,"div",[["class","al"]],null,null,null,null,null)),(t()(),r.tb(21,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6240\u5c5e\u4e13\u8f91\uff1a"])),(t()(),r.tb(23,0,null,null,1,"span",[["class","al-name"]],null,null,null,null,null)),(t()(),r.Nb(24,null,["",""])),(t()(),r.tb(25,0,null,null,27,"div",[["class","btns"]],null,null,null,null,null)),(t()(),r.tb(26,0,null,null,14,"nz-button-group",[["class","btn"]],null,null,null,o.d,o.b)),r.Kb(512,null,l.y,l.y,[r.E]),r.sb(28,114688,null,0,a.b,[l.y,r.k],null,null),(t()(),r.tb(29,0,null,0,6,"button",[["class","play"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onAddSong(i.song,!0)&&r),r},o.c,o.a)),r.Kb(512,null,l.y,l.y,[r.E]),r.sb(31,1818624,null,1,a.a,[r.k,r.h,r.D,u.b,l.y,r.y,[2,l.i],[2,c.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,1,{listOfIconElement:1}),(t()(),r.tb(33,0,[[1,0]],0,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","play-circle"]],null,null,null,null,null)),r.sb(34,2834432,null,0,h.a,[h.c,r.k,r.D,d.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,0,["\u64ad\u653e "])),(t()(),r.tb(36,0,null,0,4,"button",[["class","add"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onAddSong(i.song)&&r),r},o.c,o.a)),r.Kb(512,null,l.y,l.y,[r.E]),r.sb(38,1818624,null,1,a.a,[r.k,r.h,r.D,u.b,l.y,r.y,[2,l.i],[2,c.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,2,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["+"])),(t()(),r.tb(41,0,null,null,5,"button",[["class","btn like"],["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onLikeSong(i.song.id.toString())&&r),r},o.c,o.a)),r.Kb(512,null,l.y,l.y,[r.E]),r.sb(43,1818624,null,1,a.a,[r.k,r.h,r.D,u.b,l.y,r.y,[2,l.i],[2,c.a]],null,null),r.Lb(603979776,3,{listOfIconElement:1}),(t()(),r.tb(45,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6536\u85cf"])),(t()(),r.tb(47,0,null,null,5,"button",[["class","btn share"],["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onShareSong(i.song)&&r),r},o.c,o.a)),r.Kb(512,null,l.y,l.y,[r.E]),r.sb(49,1818624,null,1,a.a,[r.k,r.h,r.D,u.b,l.y,r.y,[2,l.i],[2,c.a]],null,null),r.Lb(603979776,4,{listOfIconElement:1}),(t()(),r.tb(51,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u5206\u4eab"])),(t()(),r.tb(53,0,null,null,8,"div",[["class","lyric-info f-brk"]],null,null,null,null,null)),(t()(),r.tb(54,0,null,null,2,"div",[["class","lyric-content"]],[[2,"expand",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,_)),r.sb(56,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(57,0,null,null,4,"div",[["class","toggle-expand"]],[[8,"hidden",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleLyric()&&r),r},null,null)),(t()(),r.tb(58,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(59,null,["",""])),(t()(),r.tb(60,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"]],null,null,null,null,null)),r.sb(61,2834432,null,0,h.a,[h.c,r.k,r.D,d.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null)],function(t,e){var n=e.component;t(e,19,0,n.song.ar),t(e,28,0),t(e,31,0,"primary"),t(e,34,0,"play-circle","outline"),t(e,38,0,"primary"),t(e,43,0),t(e,49,0),t(e,56,0,n.lyric),t(e,61,0,n.controlLyric.iconCls,"outline")},function(t,e){var n=e.component;t(e,4,0,n.song.al.picUrl,n.song.name),t(e,12,0,n.song.name),t(e,24,0,n.song.al.name),t(e,29,0,r.Fb(e,31).nzWave),t(e,36,0,r.Fb(e,38).nzWave),t(e,41,0,r.Fb(e,43).nzWave),t(e,47,0,r.Fb(e,49).nzWave),t(e,54,0,n.controlLyric.isExpand),t(e,57,0,!n.lyric.length),t(e,59,0,n.controlLyric.label)})}function x(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-song-info",[],null,null,null,w,y)),r.sb(1,245760,null,0,p.a,[i.a,f.a,g.m,m.a,b.g],null,null)],function(t,e){t(e,1,0)},null)}var C=r.pb("app-song-info",p.a,x,{},{},[])},"8PdF":function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function l(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&l(r,n),i.state=function(){return l(n,{})}),i}i&&i.exports?i.exports=a:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return a}).call(e,n,e,i))||(i.exports=r):this.xorwow=a}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},"8WaK":function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n("8Y7J"),i=n("0CZq"),s=n("SVse"),o=(n("QQfA"),n("IP0z"),n("zMNK"),n("/HVE")),l=(n("hOhj"),n("66zS")),a=r.rb({encapsulation:2,styles:[],data:{animation:[{type:7,name:"notificationMotion",definitions:[{type:0,name:"enterRight",styles:{type:6,styles:{opacity:1,transform:"translateX(0)"},offset:null},options:void 0},{type:1,expr:"* => enterRight",animation:[{type:6,styles:{opacity:0,transform:"translateX(5%)"},offset:null},{type:4,styles:null,timings:"100ms linear"}],options:null},{type:0,name:"enterLeft",styles:{type:6,styles:{opacity:1,transform:"translateX(0)"},offset:null},options:void 0},{type:1,expr:"* => enterLeft",animation:[{type:6,styles:{opacity:0,transform:"translateX(-5%)"},offset:null},{type:4,styles:null,timings:"100ms linear"}],options:null},{type:0,name:"leave",styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},options:void 0},{type:1,expr:"* => leave",animation:[{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"},offset:null},{type:4,styles:null,timings:"100ms linear"}],options:null}],options:{}}]}});function u(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-notification-notice-icon ant-notification-notice-icon-success"],["nz-icon",""],["nzType","check-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"check-circle")},null)}function c(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-notification-notice-icon ant-notification-notice-icon-info"],["nz-icon",""],["nzType","info-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"info-circle")},null)}function h(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-notification-notice-icon ant-notification-notice-icon-warning"],["nz-icon",""],["nzType","exclamation-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"exclamation-circle")},null)}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-notification-notice-icon ant-notification-notice-icon-error"],["nz-icon",""],["nzType","close-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"close-circle")},null)}function p(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,17,"div",[["class","ant-notification-notice-content"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,16,"div",[["class","ant-notification-notice-content"]],null,null,null,null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(3,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Ib(4,{"ant-notification-notice-with-icon":0}),(t()(),r.tb(5,0,null,null,12,"div",[],[[2,"ant-notification-notice-with-icon",null]],null,null,null,null)),(t()(),r.tb(6,0,null,null,9,null,null,null,null,null,null,null)),r.sb(7,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,u)),r.sb(9,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,c)),r.sb(11,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,h)),r.sb(13,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,d)),r.sb(15,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.tb(16,0,null,null,0,"div",[["class","ant-notification-notice-message"]],[[8,"innerHTML",1]],null,null,null,null)),(t()(),r.tb(17,0,null,null,0,"div",[["class","ant-notification-notice-description"]],[[8,"innerHTML",1]],null,null,null,null))],function(t,e){var n=e.component,r=t(e,4,0,"blank"!==n.nzMessage.type);t(e,3,0,"ant-notification-notice-content",r),t(e,7,0,n.nzMessage.type),t(e,9,0,"success"),t(e,11,0,"info"),t(e,13,0,"warning"),t(e,15,0,"error")},function(t,e){var n=e.component;t(e,5,0,"blank"!==n.nzMessage.type),t(e,16,0,n.nzMessage.title),t(e,17,0,n.nzMessage.content)})}function f(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function g(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,14,"div",[["class","ant-notification-notice ant-notification-notice-closable"]],[[24,"@notificationMotion",0]],[[null,"mouseenter"],[null,"mouseleave"]],function(t,e,n){var r=!0,i=t.component;return"mouseenter"===e&&(r=!1!==i.onEnter()&&r),"mouseleave"===e&&(r=!1!==i.onLeave()&&r),r},null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.ib(16777216,null,null,1,null,p)),r.sb(6,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,3,null,f)),r.sb(8,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.sb(9,540672,null,0,s.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(10,{$implicit:0,data:1}),(t()(),r.tb(11,0,null,null,3,"a",[["class","ant-notification-notice-close"],["tabindex","0"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r},null,null)),(t()(),r.tb(12,0,null,null,2,"span",[["class","ant-notification-notice-close-x"]],null,null,null,null,null)),(t()(),r.tb(13,0,null,null,1,"i",[["class","ant-notification-close-icon"],["nz-icon",""],["nzType","close"]],null,null,null,null,null)),r.sb(14,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-notification-notice ant-notification-notice-closable",null==n.nzMessage.options?null:n.nzMessage.options.nzClass),t(e,4,0,null==n.nzMessage.options?null:n.nzMessage.options.nzStyle),t(e,6,0,!n.nzMessage.template),t(e,8,0,n.nzMessage.template);var r=t(e,10,0,n,null==n.nzMessage.options?null:n.nzMessage.options.nzData);t(e,9,0,r,n.nzMessage.template),t(e,14,0,"close")},function(t,e){t(e,0,0,e.component.state)})}var m=r.rb({encapsulation:2,styles:[],data:{}});function b(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-notification",[],null,null,null,g,a)),r.sb(1,245760,null,0,i.c,[i.d,r.h],{nzMessage:[0,"nzMessage"],nzIndex:[1,"nzIndex"]},null)],function(t,e){t(e,1,0,e.context.$implicit,e.context.index)},null)}function y(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,2,"div",[],[[8,"className",0],[4,"top",null],[4,"bottom",null],[4,"right",null],[4,"left",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,b)),r.sb(2,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.messages)},function(t,e){var n=e.component;t(e,0,0,r.xb(1,"ant-notification ant-notification-",n.config.nzPlacement,""),"topLeft"===n.config.nzPlacement||"topRight"===n.config.nzPlacement?n.top:null,"bottomLeft"===n.config.nzPlacement||"bottomRight"===n.config.nzPlacement?n.bottom:null,"bottomRight"===n.config.nzPlacement||"topRight"===n.config.nzPlacement?"0px":null,"topLeft"===n.config.nzPlacement||"bottomLeft"===n.config.nzPlacement?"0px":null)})}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-notification-container",[],null,null,null,y,m)),r.sb(1,49152,null,0,i.d,[r.h,[2,i.b],[2,i.a]],null,null)],null,null)}var _=r.pb("nz-notification-container",i.d,v,{},{},[])},"8Y7J":function(t,e,n){"use strict";n.d(e,"lb",function(){return qo}),n.d(e,"mb",function(){return Ko}),n.d(e,"nb",function(){return Yo}),n.d(e,"ob",function(){return Xo}),n.d(e,"kb",function(){return js}),n.d(e,"jb",function(){return Ss}),n.d(e,"g",function(){return Io}),n.d(e,"S",function(){return Eo}),n.d(e,"x",function(){return ko}),n.d(e,"T",function(){return fe}),n.d(e,"X",function(){return pe}),n.d(e,"c",function(){return Ls}),n.d(e,"B",function(){return Vs}),n.d(e,"A",function(){return Ws}),n.d(e,"b",function(){return Us}),n.d(e,"d",function(){return Fs}),n.d(e,"e",function(){return $s}),n.d(e,"V",function(){return Uo}),n.d(e,"M",function(){return bo}),n.d(e,"Z",function(){return _o}),n.d(e,"t",function(){return Gs}),n.d(e,"f",function(){return Zo}),n.d(e,"N",function(){return fn}),n.d(e,"m",function(){return As}),n.d(e,"l",function(){return ce}),n.d(e,"G",function(){return $e}),n.d(e,"H",function(){return Fe}),n.d(e,"a",function(){return kn}),n.d(e,"Q",function(){return Y}),n.d(e,"O",function(){return hr}),n.d(e,"Tb",function(){return m}),n.d(e,"U",function(){return w}),n.d(e,"q",function(){return bn}),n.d(e,"Ub",function(){return j}),n.d(e,"W",function(){return B}),n.d(e,"n",function(){return z}),n.d(e,"p",function(){return T}),n.d(e,"o",function(){return c}),n.d(e,"z",function(){return h}),n.d(e,"I",function(){return p}),n.d(e,"y",function(){return uo}),n.d(e,"D",function(){return ur}),n.d(e,"E",function(){return lr}),n.d(e,"F",function(){return ar}),n.d(e,"i",function(){return Js}),n.d(e,"j",function(){return tr}),n.d(e,"k",function(){return ir}),n.d(e,"u",function(){return H}),n.d(e,"w",function(){return U}),n.d(e,"v",function(){return Do}),n.d(e,"C",function(){return Rs}),n.d(e,"J",function(){return $o}),n.d(e,"K",function(){return Ro}),n.d(e,"L",function(){return Tr}),n.d(e,"P",function(){return Pr}),n.d(e,"h",function(){return dn}),n.d(e,"r",function(){return Cr}),n.d(e,"s",function(){return Sr}),n.d(e,"R",function(){return Mn}),n.d(e,"Y",function(){return Go}),n.d(e,"yb",function(){return Dn}),n.d(e,"cb",function(){return Hs}),n.d(e,"ab",function(){return gn}),n.d(e,"bb",function(){return er}),n.d(e,"fb",function(){return Ne}),n.d(e,"gb",function(){return Be}),n.d(e,"hb",function(){return ye}),n.d(e,"wb",function(){return E}),n.d(e,"Bb",function(){return Pn}),n.d(e,"Mb",function(){return v}),n.d(e,"zb",function(){return qn}),n.d(e,"Ab",function(){return Gn}),n.d(e,"vb",function(){return zs}),n.d(e,"ub",function(){return Ps}),n.d(e,"db",function(){return Os}),n.d(e,"eb",function(){return ks}),n.d(e,"Sb",function(){return st}),n.d(e,"Qb",function(){return En}),n.d(e,"Wb",function(){return Nn}),n.d(e,"Vb",function(){return Rn}),n.d(e,"Rb",function(){return Fn}),n.d(e,"Xb",function(){return jn}),n.d(e,"ib",function(){return Qo}),n.d(e,"pb",function(){return Fi}),n.d(e,"qb",function(){return Ca}),n.d(e,"rb",function(){return Yr}),n.d(e,"sb",function(){return ls}),n.d(e,"tb",function(){return Jo}),n.d(e,"xb",function(){return Ci}),n.d(e,"Cb",function(){return Pi}),n.d(e,"Db",function(){return zi}),n.d(e,"Eb",function(){return ul}),n.d(e,"Fb",function(){return Ki}),n.d(e,"Hb",function(){return as}),n.d(e,"Kb",function(){return us}),n.d(e,"Gb",function(){return dl}),n.d(e,"Ib",function(){return pl}),n.d(e,"Jb",function(){return hl}),n.d(e,"Lb",function(){return il}),n.d(e,"Nb",function(){return gl}),n.d(e,"Ob",function(){return Gr}),n.d(e,"Pb",function(){return yl});var r=n("XNiG"),i=n("quSY"),s=n("HDdC"),o=n("VRyK"),l=n("w1tV");const a="__parameters__";function u(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(a)?t[a]:Object.defineProperty(t,a,{value:[]})[a];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}const c=u("Inject",t=>({token:t})),h=u("Optional"),d=u("Self"),p=u("SkipSelf");var f=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function m(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function b(t){const e=t[y];return e&&e.token===t?e:null}const y=g({ngInjectableDef:g});function v(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(v).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const _=g({__forward_ref__:g});function w(t){return t.__forward_ref__=w,t.toString=function(){return v(this())},t}function x(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(_)&&e.__forward_ref__===w?e():t}const C="undefined"!=typeof globalThis&&globalThis,S="undefined"!=typeof window&&window,O="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,k="undefined"!=typeof global&&global,E=C||k||S||O;class T{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=m({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const z=new T("INJECTOR",-1),P=new Object,I="ngTempTokenPath",M="ngTokenPath",D=/\n/gm,A="\u0275",N="__source",R=g({provide:String,useValue:g});let F,$=void 0;function L(t){const e=$;return $=t,e}function j(t,e=f.Default){return(F||function(t,e=f.Default){if(void 0===$)throw new Error("inject() must be called from an injection context");return null===$?function(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&f.Optional)return null;throw new Error(`Injector: NOT_FOUND [${v(t)}]`)}(t,0,e):$.get(t,e&f.Optional?null:void 0,e)})(t,e)}const B=j;class V{get(t,e=P){if(e===P){const e=new Error(`NullInjectorError: No provider for ${v(t)}!`);throw e.name="NullInjectorError",e}return e}}function W(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==A?t.substr(2):t;let i=v(e);if(e instanceof Array)i=e.map(v).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):v(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(D,"\n  ")}`}class U{}class H{}function G(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function q(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const K=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),Y=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),X={},Z=[],Q=g({ngComponentDef:g}),J=g({ngDirectiveDef:g}),tt=g({ngPipeDef:g});let et=0;function nt(t){return function(t){return t[Q]||null}(t)||function(t){return t[J]||null}(t)}function rt(t){return function(t){return t[tt]||null}(t)}function it(t,e){if(null==t)return X;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const st=function(t){const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Y.Emulated,id:"c",styles:t.styles||Z,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:()=>{const n=t.directives,s=t.features,o=t.pipes;i.id+=et++,i.inputs=it(t.inputs,r),i.outputs=it(t.outputs),s&&s.forEach(t=>t(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(nt):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(rt):null,e.hasOwnProperty(y)||(e[y]=m({token:e,factory:t.factory}))}},i},ot=0,lt=1,at=7,ut=12,ct=19;let ht=null;const dt=new Map;let pt=null;const ft=1,gt=0;function mt(t,e){return pt&&t===pt||(pt=t,e&&(ht=dt.get(t)||null),ht=ht||{classesBitMask:gt,classesIndex:ft,stylesBitMask:gt,stylesIndex:ft}),ht}function bt(t,e){return function(t){for(;Array.isArray(t);)t=t[ot];return t}(e[t.index])}function yt(t,e){return e[lt].data[t+ct]}let vt=null;function _t(){return xt}let wt,xt,Ct,St=1,Ot=0,kt=0,Et=-1;function Tt(){return Et}function zt(){return Ct}const Pt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(E))(),It="--MAP--",Mt=0;function Dt(t,e){e===Mt?t[2]>Mt&&function(t){Nt(t,2|At(t))}(t):t[2]=e}function At(t){return t[1]}function Nt(t,e){t[1]=e}function Rt(t,e){return t[e+2]}function Ft(t,e){return 1&t[e+0]}function $t(t,e){return(1&Ft(t,e))>0}function Lt(t,e){return t[e+0]>>1}function jt(t,e,n){const r=Ft(t,e);t[e+0]=r|n<<1}function Bt(t,e){return t[e+1]}function Vt(t,e,n){return t[e+3+n]}function Wt(t,e){return!(!t||e!==t[2])}function Ut(t){return(1&At(t))>0}function Ht(t){return(2&At(t))>0}function Gt(t){return 6+t[4]}function qt(t,e){let n=Array.isArray(t)?t[0]:t,r=Array.isArray(e)?e[0]:e;return n instanceof String&&(n=n.toString()),r instanceof String&&(r=r.toString()),!(n!=n&&r!=r)&&n!==r}function Kt(t){return null!=t&&""!==t}function Yt(t,e,n=" "){return t+(e.length&&t.length?n:"")+e}function Xt(t){return t.replace(/[a-z][A-Z]/g,t=>t.charAt(0)+"-"+t.charAt(1)).toLowerCase()}function Zt(t){return Qt(t)?t[0]:t}function Qt(t){return Array.isArray(t)&&t.length>=6&&"string"!=typeof t[1]}function Jt(t,e){return t[e+0]}function te(t,e,n){t[e+1]=n}function ee(t,e){return t[e+1]}const ne=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function re(t){return!!t.listen}const ie="ngDebugContext",se="ngOriginalError",oe="ngErrorLogger";function le(t){return t[ie]}function ae(t){return t[se]}function ue(t,...e){t.error(...e)}class ce{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t[oe]||ue}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?le(t)?le(t):this._findContext(ae(t)):null}_findOriginalError(t){let e=ae(t);for(;e&&ae(e);)e=ae(e);return e}}let he=!0,de=!1;function pe(){return de=!0,he}function fe(){if(de)throw new Error("Cannot enable prod mode after platform setup.");he=!1}class ge{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const n=(new window.DOMParser).parseFromString(t,"text/html").body;return n.removeChild(n.firstChild),n}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const me=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,be=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ye(t){return(t=String(t)).match(me)||t.match(be)?t:(pe()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function ve(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function _e(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const we=ve("area,br,col,hr,img,wbr"),xe=ve("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ce=ve("rp,rt"),Se=_e(Ce,xe),Oe=_e(we,_e(xe,ve("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_e(Ce,ve("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Se),ke=ve("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ee=ve("srcset"),Te=_e(ke,Ee,ve("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ve("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ze=ve("script,style,template");class Pe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Oe.hasOwnProperty(e))return this.sanitizedSomething=!0,!ze.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!Te.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;ke[s]&&(o=ye(o)),Ee[s]&&(r=o,o=(r=String(r)).split(",").map(t=>ye(t.trim())).join(", ")),this.buf.push(" ",e,'="',De(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Oe.hasOwnProperty(e)&&!we.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(De(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Ie=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Me=/([^\#-~ |!])/g;function De(t){return t.replace(/&/g,"&amp;").replace(Ie,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Me,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ae;function Ne(t,e){let n=null;try{Ae=Ae||new ge(t);let r=e?String(e):"";n=Ae.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Ae.getInertBodyElement(r)}while(r!==s);const o=new Pe,l=o.sanitizeChildren(Re(n)||n);return pe()&&o.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),l}finally{if(n){const t=Re(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Re(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const Fe=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class $e{}const Le=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),je=/^url\(([^)]+)\)$/;function Be(t){if(!(t=String(t).trim()))return"";const e=t.match(je);return e&&ye(e[1])===e[1]||t.match(Le)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(pe()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}function Ve(t){var e;return e=t.replace(/[$@]/g,"_"),`ng-reflect-${t=e.replace(We,(...t)=>"-"+t[1].toLowerCase())}`}const We=/([A-Z])/g;function Ue(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}const He=1,Ge=0,qe=null,Ke=1;let Ye=[];function Xe(t,e,n,r,i,s,o,l,a){Ut(t)||(o?function(t,e,n,r,i){Ye.unshift(t,e,n,r,i)}(t,n,r,i,a):(Ye.length&&Ze(),Qe(t,n,r,i,a)));const u=l||qt(e[i],s);return u&&(e[i]=s),u}function Ze(){let t=0;for(;t<Ye.length;)Qe(Ye[t++],Ye[t++],Ye[t++],Ye[t++],Ye[t++]);Ye.length=0}function Qe(t,e,n,r,i){let s=!1;if(n){let o=!1,l=Gt(t);for(;l<t.length;){const s=Bt(t,l),a=Rt(t,l);if(o=n<=a){n<a&&Je(t,l,n,i),tn(t,!1,l,r,e);break}l+=3+s}o||(Je(t,t.length,n,i),tn(t,!1,l,r,e),s=!0)}else tn(t,!0,3,r,e),s=!0;return s}function Je(t,e,n,r){t.splice(e,0,r?1:0,Ke,n,qe),jt(t,e,He)}function tn(t,e,n,r,i){const s=n+3;let o=s+Bt(t,n);if(e||o--,"number"==typeof r){for(let e=s;e<=o;e++)if(t[e]===r)return;t.splice(o,0,r),t[n+1]++,jt(t,n,Lt(t,n)|1<<i)}else null!==r&&null==t[o]&&(t[o]=r)}function en(t,e,n,r,i,s,o,l){return i&&r&&(function(t){if(!Ut(t)){const e=Zt(t);e&&function(t,e){for(let n=1;n<e.length;n+=2){const r=ee(e,n);r&&Qe(t,-1,Jt(e,n),r,!1)}}(t,e),function(t){Nt(t,1|At(t))}(t)}}(r),function(t,e){return t&&e>gt}(r,s))?(function(t,e,n,r,i,s,o){const l=!0===(a=i)?-1:!1===a?0:a;var a;const u=nn,c=(l&Lt(t,3))>0?1:0;let h=Gt(t);for(;h<t.length;){const i=Bt(t,h);if(l&Lt(t,h)){let l=!1;const a=Rt(t,h),d=i-1,p=Vt(t,h,d);for(let i=0;i<d;i++){const u=Vt(t,h,i),c=r[u];if(Kt(c)){s(e,n,a,o&&$t(t,h)?o(a,c,2):c,u),l=!0;break}}if(u){const i=u(t,e,n,r,s,o,c|(l?4:2),a,p);l=l||i}l||s(e,n,a,p)}h+=3+i}u&&u(t,e,n,r,s,o,c)}(r,t,e,n,s,o,l),!0):i}let nn=null;const rn=(t,e,n,r)=>{const i=e.style;r?(r=r.toString(),t&&re(t)?t.setStyle(e,n,r,ne.DashCase):i&&i.setProperty(n,r)):t&&re(t)?t.removeStyle(e,n,ne.DashCase):i&&i.removeProperty(n)},sn=(t,e,n,r)=>{if(""!==n){const i=e.classList;r?t&&re(t)?t.addClass(e,n):i&&i.add(n):t&&re(t)?t.removeClass(e,n):i&&i.remove(n)}},on={},ln=(t,e,n,r,i,s,o,l,a)=>{let u=!1;if(Bt(t,3)){let c=!0;const h=!l;h&&-2&o&&(c=!1,u=!0),c&&(u=function t(e,n,r,i,s,o,l,a,u,c){let h=!1;if(u<Bt(e,3)){const d=Vt(e,3,u),p=i[d];let f=function(t){return t>=cn.length&&cn.push(1),cn[t]}(u);for(;f<p.length;){const g=Jt(p,f),m=a&&g>a,b=!m&&g===a,y=ee(p,f),v=Kt(y);let _=t(e,n,r,i,s,o,m?l:an(l,v,b),m?a:g,u+1,c);if(m){h||(h=_);break}if(!_&&un(l,b)){const t=b&&!v,e=t?c:y,i=t?d:null;s(n,r,g,o?o(g,e,3):e,i),_=!0}h=_&&b,f+=2}if(cn[u]=f,1===p.length||!a)return t(e,n,r,i,s,o,l,a,u+1,c)}return h}(t,e,n,r,i,s,o,l||null,0,a||null)),h&&function(){for(let t=0;t<cn.length;t++)cn[t]=1}()}return u};function an(t,e,n){let r=t;return e||4&t||!(n||1&t)?(r|=4,r&=-3):(r|=2,r&=-5),r}function un(t,e){let n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}const cn=[];function hn(t,e,n,r){for(let i=1;i<t.length;i+=2){const s=Jt(t,i);if(e<=s){let o=!1;if(s===e){const e=t[i];!r&&Kt(e)||(o=!0,te(t,i,n))}else o=!0,t.splice(i,0,e,n);return o}}return t.push(e,n),!0}let dn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>pn(),t})();const pn=(...t)=>{},fn=Function,gn=new T("The presence of this token marks an injector as being the root injector."),mn=function(t,e,n){return new Cn(t,e,n)};let bn=(()=>{class t{static create(t,e){return Array.isArray(t)?mn(t,e,""):mn(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=P,t.NULL=new V,t.ngInjectableDef=m({token:t,providedIn:"any",factory:()=>j(z)}),t.__NG_ELEMENT_ID__=-1,t})();const yn=function(t){return t},vn=[],_n=yn,wn=function(){return Array.prototype.slice.call(arguments)},xn="\u0275";class Cn{constructor(t,e=bn.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(bn,{token:bn,fn:yn,deps:vn,value:this,useNew:!1}),r.set(z,{token:z,fn:yn,deps:vn,value:this,useNew:!1}),function t(e,n){if(n)if((n=x(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw On("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw On("Unexpected provider",n);{let t=x(n.provide);const r=function(t){const e=function(t){let e=vn;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,i=x(n[t]);if(i instanceof Array)for(let t=0,e=i;t<e.length;t++){const n=e[t];n instanceof h||n==h?r|=1:n instanceof p||n==p?r&=-3:n instanceof d||n==d?r&=-5:i=n instanceof c?n.token:x(n)}e.push({token:i,options:r})}}else if(t.useExisting)e=[{token:x(t.useExisting),options:6}];else if(!(n||R in t))throw On("'deps' required",t);return e}(t);let n=yn,r=vn,i=!1,s=x(t.provide);if(R in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=x(t.useClass);else{if("function"!=typeof s)throw On("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=s}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==wn)throw Sn(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:wn,value:vn});r.deps.push({token:t=n,options:6})}const i=e.get(t);if(i&&i.fn==wn)throw Sn(t);e.set(t,r)}}}(r,t)}get(t,e,n=f.Default){const r=this._records.get(t);try{return function t(e,n,r,i,s,o){try{return function(e,n,r,i,s,o){let l;if(!n||o&f.SkipSelf)o&f.Self||(l=i.get(e,s,f.Default));else{if((l=n.value)==_n)throw Error(xn+"Circular dependency");if(l===vn){n.value=_n;let e=void 0,s=n.useNew,o=n.fn,a=n.deps,u=vn;if(a.length){u=[];for(let e=0;e<a.length;e++){const n=a[e],s=n.options,o=2&s?r.get(n.token):void 0;u.push(t(n.token,o,r,o||4&s?i:bn.NULL,1&s?null:bn.THROW_IF_NOT_FOUND,f.Default))}}n.value=l=s?new o(...u):o.apply(e,u)}}return l}(e,n,r,i,s,o)}catch(l){throw l instanceof Error||(l=new Error(l)),(l[I]=l[I]||[]).unshift(e),n&&n.value==_n&&(n.value=vn),l}}(t,r,this._records,this.parent,e,n)}catch(i){return function(t,e,n,r){const i=t[I];throw e[N]&&i.unshift(e[N]),t.message=W("\n"+t.message,i,"StaticInjectorError",r),t[M]=i,t[I]=null,t}(i,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(v(n))),`StaticInjector[${t.join(", ")}]`}}function Sn(t){return On("Cannot mix multi providers and regular providers",t)}function On(t,e){return new Error(W(t,e,"StaticInjectorError"))}const kn=new T("AnalyzeForEntryComponents");function En(t){const e=_t(),n=e[lt];n.firstTemplatePass&&(function(t,e,n){const r=t.expandoInstructions,i=r.length;i>=2&&r[i-2]===e.hostBindings?r[i-1]=r[i-1]+n:r.push(e.hostBindings,n)}(n,vt,t),function(t,e,n){for(let r=0;r<n;r++)e.push(on),t.blueprint.push(on),t.data.push(null)}(n,e,t))}let Tn=null;function zn(){if(!Tn){const t=E.Symbol;if(t&&t.iterator)Tn=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Tn=n)}}}return Tn}function Pn(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function In(t,e){const n=Dn(t),r=Dn(e);if(n&&r)return function(t,e,n){const r=t[zn()](),i=e[zn()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,In);{const i=t&&("object"==typeof t||"function"==typeof t),s=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!s)||Pn(t,e)}}class Mn{constructor(t){this.wrapped=t}static wrap(t){return new Mn(t)}static unwrap(t){return Mn.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Mn}}function Dn(t){return!!An(t)&&(Array.isArray(t)||!(t instanceof Map)&&zn()in t)}function An(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Nn(){var t,e;_t()[lt].firstTemplatePass&&(t=wt,e=Bn(),Dt(Wn(t),e),Dt(Vn(t),e))}function Rn(t){const e=Tt(),n=_t(),r=yt(e,n),i=Vn(r),s=Bn(),o=n[at]++;!s&&function(t){return 0!=(16&t.flags)}(r)&&t!==on&&(Ln(i,n,r,o,t,!1),t=on),$n(e,i,o,t,!1,Hn())}function Fn(t){!function(t,e){const n=_t(),r=yt(t,n),i=Wn(r),s=Bn(),o=n[at]++;!s&&function(t){return 0!=(8&t.flags)}(r)&&e!==on&&(Ln(i,n,r,o,e,!0),e=on),$n(t,i,o,e,!0,Hn())}(Tt(),t)}function $n(t,e,n,r,i,s){nn=ln;const o=_t();let l=!1;if(r!==on){const a=bt(yt(t,o),o),u=o[n];l=qt(u,r);const c=function(t,e,n){const r=Array.isArray(t)?t:[null];r[0]=e||null;for(let l=1;l<r.length;l+=2)te(r,l,null);let i,s=null,o=!1;if("string"==typeof e?e.length&&(s=e.split(/\s+/),o=!0):(s=e?Object.keys(e):null,i=e),s)for(let l=0;l<s.length;l++){const t=s[l];hn(r,n?Xt(t):t,!!o||i[t],!0)}return r}(u,r,!i);i?function(t,e,n,r,i,s,o,l){const u=mt(a,Ht(t)),c=Ge;!Xe(t,e,c,null,i,s,o,l,!1)&&!l||(u.classesBitMask|=1<<c)}(e,o,0,0,n,c,s,l):function(t,e,n,r,i,s,o,l,a){const u=mt(n,Ht(t)),c=Ge;!Xe(t,e,c,null,i,s,l,a,!0)&&!a||(u.stylesBitMask|=1<<c)}(e,o,a,0,n,c,zt(),s,l)}return l}function Ln(t,e,n,r,i,s){e[r]!==i&&((i||Ut(t))&&function(t,e,n){const r=t[lt];for(let i=0;i<e.length;){const s=e[i++],o=e[i++],l=e[i++],a=t[s],u=r.data[s];u.setInput?u.setInput(a,n,o,l):a[l]=n}}(e,n.inputs[s?"class":"style"],function(t,e,n){let r=e;var i;return t.length>0&&(r=n?Yt(t,((i=e)&&"string"!=typeof i&&(i=Object.keys(i).join(" ")),i||"")):Yt(t,function(t){let e="";if(t){const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];e=Yt(e,`${i}:${t[i]}`,";")}}return e}(e),";")),r}(function(t){const e=Zt(t);return e&&e[0]||""}(t),i,s)),e[r]=i)}function jn(){const t=Tt(),e=_t(),n=yt(t,e),r=function(t,e){return 3===t.type?e[ut]:null}(n,e),i=bt(n,e),s=Bn(),o=zt();(function(t,e,n,r,i,s,o){const l=n?Ht(n):!!r&&Ht(r),a=Wt(n,s),u=Wt(r,s);Ye.length&&(a||u)&&Ze();const c=mt(i,l),h=en(t,i,e,n,a,c.classesBitMask,sn,null),d=en(t,i,e,r,u,c.stylesBitMask,rn,o);h&&d?(ht=null,pt=null,l&&function(t){dt.delete(t)}(i)):l&&function(t,e){dt.set(t,e)}(i,c)})(r,e,Wn(n),Vn(n),i,s,o),Ct=null}function Bn(){return St+Ot}function Vn(t){return Un(t,!1)}function Wn(t){return Un(t,!0)}function Un(t,e){let n=e?t.classes:t.styles;return Qt(n)||(n=[n||[""],0,Mt,1,0,It],e?t.classes=n:t.styles=n),n}function Hn(){return kt>0}function Gn(t){return!!t&&"function"==typeof t.then}function qn(t){return!!t&&"function"==typeof t.subscribe}class Kn{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class Yn{}class Xn{}function Zn(t){const e=Error(`No component factory found for ${v(t)}. Did you add it to @NgModule.entryComponents?`);return e[Qn]=t,e}const Qn="ngComponent";class Jn{resolveComponentFactory(t){throw Zn(t)}}let tr=(()=>{class t{}return t.NULL=new Jn,t})();class er{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw Zn(t);return new nr(e,this._ngModule)}}class nr extends Xn{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}function rr(...t){}let ir=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>sr(t),t})();const sr=rr;class or{}class lr{}const ar=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let ur=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>cr(),t})();const cr=rr;class hr{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const dr=new hr("8.2.3");class pr{constructor(){}supports(t){return Dn(t)}create(t){return new gr(t)}}const fr=(t,e)=>e;class gr{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||fr}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<vr(n,r,i)?e:n,o=vr(s,r,i),l=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=l-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==l&&t(s,o,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Dn(t))throw new Error(`Error trying to diff '${v(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)r=this._trackByFn(e,n=t[e]),null!==i&&Pn(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Pn(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[zn()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Pn(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Pn(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Pn(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Pn(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new mr(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new yr),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yr),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class mr{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class br{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Pn(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class yr{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new br,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vr(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class _r{constructor(){}supports(t){return t instanceof Map||An(t)}create(){return new wr}}class wr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||An(t)))throw new Error(`Error trying to diff '${v(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new xr(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Pn(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class xr{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Cr=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=m({token:t,providedIn:"root",factory:()=>new t([new pr])}),t})(),Sr=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new p,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=m({token:t,providedIn:"root",factory:()=>new t([new _r])}),t})();const Or=[new _r],kr=new Cr([new pr]),Er=new Sr(Or);let Tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>zr(t,ir),t})();const zr=rr;let Pr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ir(t,ir),t})();const Ir=rr;function Mr(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Dr(n,e),n}(i,t)}function Dr(t,e){t[ie]=e,t[oe]=e.logError.bind(e)}function Ar(t){return new Error(`ViewDestroyedError: Attempt to use a destroyed view: ${t}`)}function Nr(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Rr(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Fr(t,e){return t.nodes[e]}function $r(t,e){return t.nodes[e]}function Lr(t,e){return t.nodes[e]}function jr(t,e){return t.nodes[e]}function Br(t,e){return t.nodes[e]}const Vr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},Wr=()=>{},Ur=new Map;function Hr(t){let e=Ur.get(t);return e||(e=v(t)+"_"+Ur.size,Ur.set(t,e)),e}function Gr(t,e,n,r){if(Mn.isWrapped(r)){r=Mn.unwrap(r);const i=t.def.nodes[e].bindingIndex+n,s=Mn.unwrap(t.oldValues[i]);t.oldValues[i]=new Mn(s)}return r}const qr="$$undefined",Kr="$$empty";function Yr(t){return{id:qr,styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let Xr=0;function Zr(t,e,n,r){return!(!(2&t.state)&&Pn(t.oldValues[e.bindingIndex+n],r))}function Qr(t,e,n,r){return!!Zr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function Jr(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!In(i,r)){const s=e.bindings[n].name;throw Mr(Vr.createDebugContext(t,e.nodeIndex),`${s}: ${i}`,`${s}: ${r}`,0!=(1&t.state))}}function ti(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function ei(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function ni(t,e,n,r){try{return ti(33554432&t.def.nodes[e].flags?$r(t,e).componentView:t),Vr.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function ri(t){return t.parent?$r(t.parent,t.parentNodeDef.nodeIndex):null}function ii(t){return t.parent?t.parentNodeDef.parent:null}function si(t,e){switch(201347067&e.flags){case 1:return $r(t,e.nodeIndex).renderElement;case 2:return Fr(t,e.nodeIndex).renderText}}function oi(t,e){return t?`${t}:${e}`:e}function li(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function ai(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function ui(t){return 1<<t%32}function ci(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=ui(t)):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function hi(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,N,{value:e,configurable:!0}),{flags:r,token:n,tokenKey:Hr(n)}})}function di(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===Y.Native?$r(t,n.renderParent.nodeIndex).renderElement:void 0:e}const pi=new WeakMap;function fi(t){let e=pi.get(t);return e||((e=t(()=>Wr)).factory=t,pi.set(t,e)),e}function gi(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(si(t,t.def.lastRenderRootNode))),mi(t,e,0,t.def.nodes.length-1,n,r,i)}function mi(t,e,n,r,i,s,o){for(let l=n;l<=r;l++){const n=t.def.nodes[l];11&n.flags&&yi(t,n,e,i,s,o),l+=n.childCount}}function bi(t,e,n,r,i,s){let o=t;for(;o&&!li(o);)o=o.parent;const l=o.parent,a=ii(o),u=a.nodeIndex+a.childCount;for(let c=a.nodeIndex+1;c<=u;c++){const t=l.def.nodes[c];t.ngContentIndex===e&&yi(l,t,n,r,i,s),c+=t.childCount}if(!l.parent){const o=t.root.projectableNodes[e];if(o)for(let e=0;e<o.length;e++)vi(t,o[e],n,r,i,s)}}function yi(t,e,n,r,i,s){if(8&e.flags)bi(t,e.ngContent.index,n,r,i,s);else{const o=si(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&vi(t,o,n,r,i,s),32&e.bindingFlags&&vi($r(t,e.nodeIndex).componentView,o,n,r,i,s)):vi(t,o,n,r,i,s),16777216&e.flags){const o=$r(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<o.length;t++)gi(o[t],n,r,i,s)}1&e.flags&&!e.element.name&&mi(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,s)}}function vi(t,e,n,r,i,s){const o=t.renderer;switch(n){case 1:o.appendChild(r,e);break;case 2:o.insertBefore(r,e,i);break;case 3:o.removeChild(r,e);break;case 0:s.push(e)}}const _i=/^:([^:]+):(.+)$/;function wi(t){if(":"===t[0]){const e=t.match(_i);return[e[1],e[2]]}return["",t]}function xi(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}function Ci(t,e,n,r,i,s,o,l,a,u,c,h,d,p,f,g,m,b,y,v){switch(t){case 1:return e+Si(n)+r;case 2:return e+Si(n)+r+Si(i)+s;case 3:return e+Si(n)+r+Si(i)+s+Si(o)+l;case 4:return e+Si(n)+r+Si(i)+s+Si(o)+l+Si(a)+u;case 5:return e+Si(n)+r+Si(i)+s+Si(o)+l+Si(a)+u+Si(c)+h;case 6:return e+Si(n)+r+Si(i)+s+Si(o)+l+Si(a)+u+Si(c)+h+Si(d)+p;case 7:return e+Si(n)+r+Si(i)+s+Si(o)+l+Si(a)+u+Si(c)+h+Si(d)+p+Si(f)+g;case 8:return e+Si(n)+r+Si(i)+s+Si(o)+l+Si(a)+u+Si(c)+h+Si(d)+p+Si(f)+g+Si(m)+b;case 9:return e+Si(n)+r+Si(i)+s+Si(o)+l+Si(a)+u+Si(c)+h+Si(d)+p+Si(f)+g+Si(m)+b+Si(y)+v;default:throw new Error("Does not support more than 9 expressions")}}function Si(t){return null!=t?t.toString():""}const Oi=new Object,ki=Hr(bn),Ei=Hr(z),Ti=Hr(U);function zi(t,e,n,r){return n=x(n),{index:-1,deps:hi(r,v(e)),flags:t,token:e,value:n}}function Pi(t){const e={},n=[];let r=!1;for(let i=0;i<t.length;i++){const s=t[i];s.token===gn&&!0===s.value&&(r=!0),1073741824&s.flags&&n.push(s.token),s.index=i,e[Hr(s.token)]=s}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Ii(t,e,n=bn.THROW_IF_NOT_FOUND){const r=L(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const o=e.tokenKey;switch(o){case ki:case Ei:case Ti:return t}const l=t._def.providersByKey[o];let a;if(l){let e=t._providers[l.index];return void 0===e&&(e=t._providers[l.index]=Mi(t,l)),e===Oi?void 0:e}if((a=b(e.token))&&(i=t,null!=(s=a).providedIn&&(function(t,e){return t._def.modules.indexOf(s.providedIn)>-1}(i)||"root"===s.providedIn&&i._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:a.factory,deps:[],index:n,token:e.token},t._providers[n]=Oi,t._providers[n]=Mi(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{L(r)}var i,s}function Mi(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(Ii(t,n[0]));case 2:return new e(Ii(t,n[0]),Ii(t,n[1]));case 3:return new e(Ii(t,n[0]),Ii(t,n[1]),Ii(t,n[2]));default:const i=new Array(r);for(let e=0;e<r;e++)i[e]=Ii(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(Ii(t,n[0]));case 2:return e(Ii(t,n[0]),Ii(t,n[1]));case 3:return e(Ii(t,n[0]),Ii(t,n[1]),Ii(t,n[2]));default:const i=Array(r);for(let e=0;e<r;e++)i[e]=Ii(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=Ii(t,e.deps[0]);break;case 256:n=e.value}return n===Oi||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?Oi:n}function Di(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,q(n,e),Vr.dirtyParentQueries(r),Ni(r),r}function Ai(t,e,n){const r=e?si(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),s=n.renderer.nextSibling(r);gi(n,2,i,s,void 0)}function Ni(t){gi(t,3,null,null,void 0)}const Ri=new Object;function Fi(t,e,n,r,i,s){return new $i(t,e,n,r,i,s)}class $i extends Xn{constructor(t,e,n,r,i,s){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=s,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=fi(this.viewDefFactory),s=i.nodes[0].element.componentProvider.nodeIndex,o=Vr.createRootView(t,e||[],n,i,r,Ri),l=Lr(o,s).instance;return n&&o.renderer.setAttribute($r(o,0).renderElement,"ng-version",dr.full),new Li(o,new Wi(o),l)}}class Li extends Yn{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new ir($r(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new qi(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function ji(t,e,n){return new Bi(t,e,n)}class Bi{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new ir(this._data.renderElement)}get injector(){return new qi(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=ii(t),t=t.parent;return t?new qi(t,e):new qi(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Di(this._data,t);Vr.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Wi(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;i||t instanceof nr||(i=s.get(U));const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=t,G(i,n,r),function(t,e){const n=ri(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,n){if(4&n.flags)return;e.parent.def.nodeFlags|=4,n.flags|=4;let r=n.parent;for(;r;)r.childFlags|=4,r=r.parent}(0,e.parentNodeDef)}(e,r),Vr.dirtyParentQueries(r),Ai(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,r){const i=t.viewContainer._embeddedViews,s=i[n];q(i,n),null==r&&(r=i.length),G(i,r,s),Vr.dirtyParentQueries(s),Ni(s),Ai(t,r>0?i[r-1]:null,s)}(this._data,0,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Di(this._data,t);e&&Vr.destroyView(e)}detach(t){const e=Di(this._data,t);return e?new Wi(e):null}}function Vi(t){return new Wi(t)}class Wi{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return gi(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){ti(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{Vr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){Vr.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Vr.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Ni(this._view),Vr.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function Ui(t,e){return new Hi(t,e)}class Hi extends Tr{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Wi(Vr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new ir($r(this._parentView,this._def.nodeIndex).renderElement)}}function Gi(t,e){return new qi(t,e)}class qi{constructor(t,e){this.view=t,this.elDef=e}get(t,e=bn.THROW_IF_NOT_FOUND){return Vr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:Hr(t)},e)}}function Ki(t,e){const n=t.def.nodes[e];if(1&n.flags){const e=$r(t,n.nodeIndex);return n.element.template?e.template:e.renderElement}if(2&n.flags)return Fr(t,n.nodeIndex).renderText;if(20240&n.flags)return Lr(t,n.nodeIndex).instance;throw new Error(`Illegal state: read nodeValue for node index ${e}`)}function Yi(t){return new Xi(t.renderer)}class Xi{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=wi(e),i=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,i),i}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,i]=wi(e);null!=n?this.delegate.setAttribute(t,i,n,r):this.delegate.removeAttribute(t,i,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function Zi(t,e,n,r){return new Qi(t,e,n,r)}class Qi{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Mi(t,i))}}(this)}get(t,e=bn.THROW_IF_NOT_FOUND,n=f.Default){let r=0;return n&f.SkipSelf?r|=1:n&f.Self&&(r|=4),Ii(this,{token:t,tokenKey:Hr(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(tr)}destroy(){if(this._destroyed)throw new Error(`The ng module ${v(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const e=t._providers[i];if(e&&e!==Oi){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const Ji=Hr(or),ts=Hr(ur),es=Hr(ir),ns=Hr(Pr),rs=Hr(Tr),is=Hr(dn),ss=Hr(bn),os=Hr(z);function ls(t,e,n,r,i,s,o,l){const a=[];if(o)for(let c in o){const[t,e]=o[c];a[t]={flags:8,name:c,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const u=[];if(l)for(let c in l)u.push({type:1,propName:c,target:null,eventName:l[c]});return cs(t,e|=16384,n,r,i,i,s,a,u)}function as(t,e,n){return cs(-1,t|=16,null,0,e,e,n)}function us(t,e,n,r,i){return cs(-1,t,e,0,n,r,i)}function cs(t,e,n,r,i,s,o,l,a){const{matchedQueries:u,references:c,matchedQueryIds:h}=ci(n);a||(a=[]),l||(l=[]),s=x(s);const d=hi(o,v(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:u,matchedQueryIds:h,references:c,ngContentIndex:-1,childCount:r,bindings:l,bindingFlags:xi(l),outputs:a,element:null,provider:{token:i,value:s,deps:d},text:null,query:null,ngContent:null}}function hs(t,e){return gs(t,e)}function ds(t,e){let n=t;for(;n.parent&&!li(n);)n=n.parent;return ms(n.parent,ii(n),!0,e.provider.value,e.provider.deps)}function ps(t,e){const n=ms(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],s=n[i.propName];if(!qn(s))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=s.subscribe(fs(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function fs(t,e,n){return r=>ni(t,e,n,r)}function gs(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return ms(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const s=i.length;switch(s){case 0:return r();case 1:return r(ys(t,e,n,i[0]));case 2:return r(ys(t,e,n,i[0]),ys(t,e,n,i[1]));case 3:return r(ys(t,e,n,i[0]),ys(t,e,n,i[1]),ys(t,e,n,i[2]));default:const o=Array(s);for(let r=0;r<s;r++)o[r]=ys(t,e,n,i[r]);return r(...o)}}(t,e.parent,n,r.value,r.deps);case 2048:return ys(t,e.parent,n,r.deps[0]);case 256:return r.value}}function ms(t,e,n,r,i){const s=i.length;switch(s){case 0:return new r;case 1:return new r(ys(t,e,n,i[0]));case 2:return new r(ys(t,e,n,i[0]),ys(t,e,n,i[1]));case 3:return new r(ys(t,e,n,i[0]),ys(t,e,n,i[1]),ys(t,e,n,i[2]));default:const o=new Array(s);for(let r=0;r<s;r++)o[r]=ys(t,e,n,i[r]);return new r(...o)}}const bs={};function ys(t,e,n,r,i=bn.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const s=t;2&r.flags&&(i=null);const o=r.tokenKey;o===is&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let l=t;for(;l;){if(e)switch(o){case Ji:return Yi(vs(l,e,n));case ts:return vs(l,e,n).renderer;case es:return new ir($r(l,e.nodeIndex).renderElement);case ns:return $r(l,e.nodeIndex).viewContainer;case rs:if(e.element.template)return $r(l,e.nodeIndex).template;break;case is:return Vi(vs(l,e,n));case ss:case os:return Gi(l,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[o];if(t){let e=Lr(l,t.nodeIndex);return e||(e={instance:gs(l,t)},l.nodes[t.nodeIndex]=e),e.instance}}n=li(l),e=ii(l),l=l.parent,4&r.flags&&(l=null)}const a=s.root.injector.get(r.token,bs);return a!==bs||i===bs?a:s.root.ngModule.injector.get(r.token,i)}function vs(t,e,n){let r;if(n)r=$r(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!li(r);)r=r.parent;return r}function _s(t,e,n,r,i,s){if(32768&n.flags){const e=$r(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){s=s||{};const e=Mn.unwrap(t.oldValues[n.bindingIndex+r]);s[n.bindings[r].nonMinifiedName]=new Kn(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,s}function ws(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const s=n[i];let o=s.parent;for(!o&&s.flags&e&&Cs(t,i,s.flags&e,r++),0==(s.childFlags&e)&&(i+=s.childCount);o&&1&o.flags&&i===o.nodeIndex+o.childCount;)o.directChildFlags&e&&(r=xs(t,o,e,r)),o=o.parent}}function xs(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&Cs(t,i,e.flags&n,r++),i+=e.childCount}return r}function Cs(t,e,n,r){const i=Lr(t,e);if(!i)return;const s=i.instance;s&&(Vr.setCurrentNode(t,e),1048576&n&&Rr(t,512,r)&&s.ngAfterContentInit(),2097152&n&&s.ngAfterContentChecked(),4194304&n&&Rr(t,768,r)&&s.ngAfterViewInit(),8388608&n&&s.ngAfterViewChecked(),131072&n&&s.ngOnDestroy())}const Ss=new T("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Pt}),Os={},ks=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),Es=void 0;var Ts=["en",[["a","p"],["AM","PM"],Es],[["AM","PM"],Es,Es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Es,"{1} 'at' {0}",Es],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function zs(t){return Ps(t)[ks.PluralCase]}function Ps(t){const e=t.toLowerCase().replace(/_/g,"-");let n=Os[e];if(n)return n;const r=e.split("-")[0];if(n=Os[r])return n;if("en"===r)return Ts;throw new Error(`Missing locale data for the locale "${t}".`)}const Is="en-US";let Ms=Is;function Ds(t){var e;e="Expected localeId to be defined",null==t&&function(t){throw new Error(`ASSERTION ERROR: ${t}`)}(e),"string"==typeof t&&(Ms=t.toLowerCase().replace(/_/g,"-"))}class As extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,s=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(s=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(s=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const l=super.subscribe(r,s,o);return t instanceof i.a&&t.add(l),l}}function Ns(){return this._results[zn()]()}class Rs{constructor(){this.dirty=!0,this._results=[],this.changes=new As,this.length=0;const t=zn(),e=Rs.prototype;e[t]||(e[t]=Ns)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Fs=new T("Application Initializer");class $s{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Gn(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const Ls=new T("AppId");function js(){return`${Bs()}${Bs()}${Bs()}`}function Bs(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vs=new T("Platform Initializer"),Ws=new T("Platform ID"),Us=new T("appBootstrapListener");class Hs{log(t){console.log(t)}warn(t){console.warn(t)}}const Gs=new T("LocaleId"),qs=!1;function Ks(){throw new Error("Runtime compiler is not loaded")}const Ys=Ks,Xs=Ks,Zs=Ks,Qs=Ks;class Js{constructor(){this.compileModuleSync=Ys,this.compileModuleAsync=Xs,this.compileModuleAndAllComponentsSync=Zs,this.compileModuleAndAllComponentsAsync=Qs}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class to{}let eo,no;function ro(){const t=E.wtf;return!(!t||!(eo=t.trace)||(no=eo.events,0))}const io=ro(),so=io?function(t,e=null){return no.createScope(t,e)}:(t,e)=>(function(t,e){return null}),oo=io?function(t,e){return eo.leaveScope(t,e),e}:(t,e)=>e,lo=(()=>Promise.resolve(0))();function ao(t){"undefined"==typeof Zone?lo.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class uo{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new As(!1),this.onMicrotaskEmpty=new As(!1),this.onStable=new As(!1),this.onError=new As(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,i,s,o)=>{try{return fo(e),t.invokeTask(r,i,s,o)}finally{go(e)}},onInvoke:(t,n,r,i,s,o,l)=>{try{return fo(e),t.invoke(r,i,s,o,l)}finally{go(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,po(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(uo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,ho,co,co);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function co(){}const ho={};function po(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fo(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function go(t){t._nesting--,po(t)}class mo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new As,this.onMicrotaskEmpty=new As,this.onStable=new As,this.onError=new As}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class bo{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uo.assertNotInAngularZone(),ao(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ao(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class yo{constructor(){this._applications=new Map,xo.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return xo.findTestabilityInTree(this,t,e)}}class vo{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function _o(t){xo=t}let wo,xo=new vo,Co=function(t,e,n){return t.get(to).createCompiler([e]).compileModuleAsync(n)},So=function(t){return t instanceof nr};const Oo=new T("AllowMultipleToken");class ko{constructor(t,e){this.name=t,this.token=e}}function Eo(t,e,n=[]){const r=`Platform: ${e}`,i=new T(r);return(e=[])=>{let s=To();if(!s||s.injector.get(Oo,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(wo&&!wo.destroyed&&!wo.injector.get(Oo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wo=t.get(zo);const e=t.get(Vs,null);e&&e.forEach(t=>t())}(bn.create({providers:t,name:r}))}return function(t){const e=To();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function To(){return wo&&!wo.destroyed?wo:null}class zo{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n="noop"===(i=e?e.ngZone:void 0)?new mo:("zone.js"===i?void 0:i)||new uo({enableLongStackTrace:pe()}),r=[{provide:uo,useValue:n}];var i;return n.run(()=>{const e=bn.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(ce,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return qs&&Ds(i.injector.get(Gs,Is)||Is),i.onDestroy(()=>Mo(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{s.handleError(t)}})),function(t,e,n){try{const i=n();return Gn(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get($s);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Po({},e);return Co(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Io);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${v(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function Po(t,e){return Array.isArray(e)?e.reduce(Po,t):Object.assign({},t,e)}let Io=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=pe(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new s.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new s.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{uo.assertNotInAngularZone(),ao(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(o.a)(u,c.pipe(Object(l.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Xn?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=So(n)?null:this._injector.get(U),i=n.create(bn.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const s=i.injector.get(bo,null);return s&&i.injector.get(yo).registerApplication(i.location.nativeElement,s),this._loadComponent(i),pe()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,oo(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Mo(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Us,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Mo(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=so("ApplicationRef#tick()"),t})();function Mo(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Do{}const Ao="#",No="NgFactory";class Ro{}const Fo={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};class $o{constructor(t,e){this._compiler=t,this._config=e||Fo}load(t){return!qs&&this._compiler instanceof Js?this.loadFactory(t):this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split(Ao);return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Lo(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split(Ao),i=No;return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Lo(t,e,r))}}function Lo(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}class jo{constructor(t,e){this.name=t,this.callback=e}}class Bo{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Vo&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Vo extends Bo{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof Vo&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof Vo&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof Vo&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof Vo)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Wo=new Map,Uo=function(t){return Wo.get(t)||null};function Ho(t){Wo.set(t.nativeNode,t)}const Go=Eo(null,"core",[{provide:Ws,useValue:"unknown"},{provide:zo,deps:[bn]},{provide:yo,deps:[]},{provide:Hs,deps:[]}]);function qo(){return kr}function Ko(){return Er}function Yo(t){return t?(qs&&Ds(t),t):Is}function Xo(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class Zo{constructor(t){}}function Qo(t,e,n,r,i,s){t|=1;const{matchedQueries:o,references:l,matchedQueryIds:a}=ci(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:o,matchedQueryIds:a,references:l,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:s?fi(s):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||Wr},provider:null,text:null,query:null,ngContent:null}}function Jo(t,e,n,r,i,s,o=[],l,a,u,c,h){u||(u=Wr);const{matchedQueries:d,references:p,matchedQueryIds:f}=ci(n);let g=null,m=null;s&&([g,m]=wi(s)),l=l||[];const b=new Array(l.length);for(let _=0;_<l.length;_++){const[t,e,n]=l[_],[r,i]=wi(e);let s=void 0,o=void 0;switch(15&t){case 4:o=n;break;case 1:case 8:s=n}b[_]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:s,suffix:o}}a=a||[];const y=new Array(a.length);for(let _=0;_<a.length;_++){const[t,e]=a[_];y[_]={type:0,target:t,eventName:e,propName:null}}const v=(o=o||[]).map(([t,e])=>{const[n,r]=wi(t);return[n,r,e]});return h=function(t){if(t&&t.id===qr){const e=null!=t.encapsulation&&t.encapsulation!==Y.None||t.styles.length||Object.keys(t.data).length;t.id=e?`c${Xr++}`:Kr}return t&&t.id===Kr&&(t=null),t||null}(h),c&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:d,matchedQueryIds:f,references:p,ngContentIndex:r,childCount:i,bindings:b,bindingFlags:xi(b),outputs:y,element:{ns:g,name:m,attrs:v,template:null,componentProvider:null,componentView:c||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:u||Wr},provider:null,text:null,query:null,ngContent:null}}function tl(t,e,n){const r=n.element,i=t.root.selectorOrNode,s=t.renderer;let o;if(t.parent||!i){o=r.name?s.createElement(r.name,r.ns):s.createComment("");const i=di(t,e,n);i&&s.appendChild(i,o)}else o=s.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===Y.ShadowDom);if(r.attrs)for(let l=0;l<r.attrs.length;l++){const[t,e,n]=r.attrs[l];s.setAttribute(o,e,n,t)}return o}function el(t,e,n,r){for(let i=0;i<n.outputs.length;i++){const s=n.outputs[i],o=nl(t,n.nodeIndex,oi(s.target,s.eventName));let l=s.target,a=t;"component"===s.target&&(l=null,a=e);const u=a.renderer.listen(l||r,s.eventName,o);t.disposables[n.outputIndex+i]=u}}function nl(t,e,n){return r=>ni(t,e,n,r)}function rl(t,e,n,r){if(!Qr(t,e,n,r))return!1;const i=e.bindings[n],s=$r(t,e.nodeIndex),o=s.renderElement,l=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,s){const o=e.securityContext;let l=o?t.root.sanitizer.sanitize(o,s):s;l=null!=l?l.toString():null;const a=t.renderer;null!=s?a.setAttribute(n,i,l,r):a.removeAttribute(n,i,r)}(t,i,o,i.ns,l,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,o,l,r);break;case 4:!function(t,e,n,r,i){let s=t.root.sanitizer.sanitize(Fe.STYLE,i);if(null!=s){s=s.toString();const t=e.suffix;null!=t&&(s+=t)}else s=null;const o=t.renderer;null!=s?o.setStyle(n,r,s):o.removeStyle(n,r)}(t,i,o,l,r);break;case 8:!function(t,e,n,r,i){const s=e.securityContext;let o=s?t.root.sanitizer.sanitize(s,i):i;t.renderer.setProperty(n,r,o)}(33554432&e.flags&&32&i.flags?s.componentView:t,i,o,l,r)}return!0}function il(t,e,n){let r=[];for(let i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:e,filterId:ui(e),bindings:r},ngContent:null}}function sl(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&ai(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&Br(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&Br(t,n).setDirty(),n+=e.childCount}}function ol(t,e){const n=Br(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=ll(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=Lr(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=ll(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const s=e.query.bindings;let o=!1;for(let l=0;l<s.length;l++){const t=s[l];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,o=!0}r[t.propName]=e}o&&n.notifyOnChanges()}function ll(t,e,n,r,i){for(let s=e;s<=n;s++){const e=t.def.nodes[s],n=e.matchedQueries[r.id];if(null!=n&&i.push(al(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=$r(t,s);if((e.childMatchedQueries&r.filterId)===r.filterId&&(ll(t,s+1,s+e.childCount,r,i),s+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const s=t[e],o=ri(s);o&&o===n&&ll(s,0,s.def.nodes.length-1,r,i)}}const o=n.template._projectedViews;if(o)for(let t=0;t<o.length;t++){const e=o[t];ll(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(s+=e.childCount)}return i}function al(t,e,n){if(null!=n)switch(n){case 1:return $r(t,e.nodeIndex).renderElement;case 0:return new ir($r(t,e.nodeIndex).renderElement);case 2:return $r(t,e.nodeIndex).template;case 3:return $r(t,e.nodeIndex).viewContainer;case 4:return Lr(t,e.nodeIndex).instance}}function ul(t,e){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:e}}}function cl(t,e,n){const r=di(t,e,n);r&&bi(t,n.ngContent.index,1,r,null,void 0)}function hl(t,e){return fl(128,t,new Array(e+1))}function dl(t,e){return fl(32,t,new Array(e))}function pl(t,e){const n=Object.keys(e),r=n.length,i=new Array(r);for(let s=0;s<r;s++){const t=n[s];i[e[t]]=t}return fl(64,t,i)}function fl(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const t=n[i];r[i]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:xi(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function gl(t,e,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function ml(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const s=di(t,e,n);return s&&i.appendChild(s,r),{renderText:r}}function bl(t,e){return(null!=t?t.toString():"")+e.suffix}function yl(t,e,n,r){let i=0,s=0,o=0,l=0,a=0,u=null,c=null,h=!1,d=!1,p=null;for(let f=0;f<e.length;f++){const t=e[f];if(t.nodeIndex=f,t.parent=u,t.bindingIndex=i,t.outputIndex=s,t.renderParent=c,o|=t.flags,a|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=u?u.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,d=!1,t.element.template&&(a|=t.element.template.nodeMatchedQueries)}if(_l(u,t,e.length),i+=t.bindings.length,s+=t.outputs.length,!c&&3&t.flags&&(p=t),20224&t.flags){h||(h=!0,u.element.publicProviders=Object.create(u.element.publicProviders),u.element.allProviders=u.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?u.element.publicProviders[Hr(t.provider.token)]=t:(d||(d=!0,u.element.allProviders=Object.create(u.element.publicProviders)),u.element.allProviders[Hr(t.provider.token)]=t),e&&(u.element.componentProvider=t)}if(u?(u.childFlags|=t.flags,u.directChildFlags|=t.flags,u.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(u.childMatchedQueries|=t.element.template.nodeMatchedQueries)):l|=t.flags,t.childCount>0)u=t,vl(t)||(c=t);else for(;u&&f===u.nodeIndex+u.childCount;){const t=u.parent;t&&(t.childFlags|=u.childFlags,t.childMatchedQueries|=u.childMatchedQueries),c=(u=t)&&vl(u)?u.renderParent:u}}return{factory:null,nodeFlags:o,rootNodeFlags:l,nodeMatchedQueries:a,flags:t,nodes:e,updateDirectives:n||Wr,updateRenderer:r||Wr,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:s,lastRenderRootNode:p}}function vl(t){return 0!=(1&t.flags)&&null===t.element.name}function _l(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function wl(t,e,n,r){const i=Sl(t.root,t.renderer,t,e,n);return Ol(i,t.component,r),kl(i),i}function xl(t,e,n){const r=Sl(t,t.renderer,null,null,e);return Ol(r,n,n),kl(r),r}function Cl(t,e,n,r){const i=e.element.componentRendererType;let s;return s=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,Sl(t.root,s,t,e.element.componentProvider,n)}function Sl(t,e,n,r,i){const s=new Array(i.nodes.length),o=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:s,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:o,initIndex:-1}}function Ol(t,e,n){t.component=e,t.context=n}function kl(t){let e;li(t)&&(e=$r(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const s=n.nodes[i];let o;switch(Vr.setCurrentNode(t,i),201347067&s.flags){case 1:const n=tl(t,e,s);let l=void 0;if(33554432&s.flags){const e=fi(s.element.componentView);l=Vr.createComponentView(t,s,e,n)}el(t,l,s,n),o={renderElement:n,componentView:l,viewContainer:null,template:s.element.template?Ui(t,s):void 0},16777216&s.flags&&(o.viewContainer=ji(t,s,o));break;case 2:o=ml(t,e,s);break;case 512:case 1024:case 2048:case 256:(o=r[i])||4096&s.flags||(o={instance:hs(t,s)});break;case 16:o={instance:ds(t,s)};break;case 16384:(o=r[i])||(o={instance:ps(t,s)}),32768&s.flags&&Ol($r(t,s.parent.nodeIndex).componentView,o.instance,o.instance);break;case 32:case 64:case 128:o={value:void 0};break;case 67108864:case 134217728:o=new Rs;break;case 8:cl(t,e,s),o=void 0}r[i]=o}Nl(t,Al.CreateViewNodes),Ll(t,201326592,268435456,0)}function El(t){Pl(t),Vr.updateDirectives(t,1),Rl(t,Al.CheckNoChanges),Vr.updateRenderer(t,1),Nl(t,Al.CheckNoChanges),t.state&=-97}function Tl(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Nr(t,0,256),Pl(t),Vr.updateDirectives(t,0),Rl(t,Al.CheckAndUpdate),Ll(t,67108864,536870912,0);let e=Nr(t,256,512);ws(t,2097152|(e?1048576:0)),Vr.updateRenderer(t,0),Nl(t,Al.CheckAndUpdate),Ll(t,134217728,536870912,0),ws(t,8388608|((e=Nr(t,512,768))?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Nr(t,768,1024)}function zl(t,e,n,r,i,s,o,l,a,u,c,h,d){return 0===n?function(t,e,n,r,i,s,o,l,a,u,c,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,s,o,l,a,u,c,h){const d=e.bindings.length;let p=!1;return d>0&&rl(t,e,0,n)&&(p=!0),d>1&&rl(t,e,1,r)&&(p=!0),d>2&&rl(t,e,2,i)&&(p=!0),d>3&&rl(t,e,3,s)&&(p=!0),d>4&&rl(t,e,4,o)&&(p=!0),d>5&&rl(t,e,5,l)&&(p=!0),d>6&&rl(t,e,6,a)&&(p=!0),d>7&&rl(t,e,7,u)&&(p=!0),d>8&&rl(t,e,8,c)&&(p=!0),d>9&&rl(t,e,9,h)&&(p=!0),p}(t,e,n,r,i,s,o,l,a,u,c,h);case 2:return function(t,e,n,r,i,s,o,l,a,u,c,h){let d=!1;const p=e.bindings,f=p.length;if(f>0&&Qr(t,e,0,n)&&(d=!0),f>1&&Qr(t,e,1,r)&&(d=!0),f>2&&Qr(t,e,2,i)&&(d=!0),f>3&&Qr(t,e,3,s)&&(d=!0),f>4&&Qr(t,e,4,o)&&(d=!0),f>5&&Qr(t,e,5,l)&&(d=!0),f>6&&Qr(t,e,6,a)&&(d=!0),f>7&&Qr(t,e,7,u)&&(d=!0),f>8&&Qr(t,e,8,c)&&(d=!0),f>9&&Qr(t,e,9,h)&&(d=!0),d){let d=e.text.prefix;f>0&&(d+=bl(n,p[0])),f>1&&(d+=bl(r,p[1])),f>2&&(d+=bl(i,p[2])),f>3&&(d+=bl(s,p[3])),f>4&&(d+=bl(o,p[4])),f>5&&(d+=bl(l,p[5])),f>6&&(d+=bl(a,p[6])),f>7&&(d+=bl(u,p[7])),f>8&&(d+=bl(c,p[8])),f>9&&(d+=bl(h,p[9]));const g=Fr(t,e.nodeIndex).renderText;t.renderer.setValue(g,d)}return d}(t,e,n,r,i,s,o,l,a,u,c,h);case 16384:return function(t,e,n,r,i,s,o,l,a,u,c,h){const d=Lr(t,e.nodeIndex),p=d.instance;let f=!1,g=void 0;const m=e.bindings.length;return m>0&&Zr(t,e,0,n)&&(f=!0,g=_s(t,d,e,0,n,g)),m>1&&Zr(t,e,1,r)&&(f=!0,g=_s(t,d,e,1,r,g)),m>2&&Zr(t,e,2,i)&&(f=!0,g=_s(t,d,e,2,i,g)),m>3&&Zr(t,e,3,s)&&(f=!0,g=_s(t,d,e,3,s,g)),m>4&&Zr(t,e,4,o)&&(f=!0,g=_s(t,d,e,4,o,g)),m>5&&Zr(t,e,5,l)&&(f=!0,g=_s(t,d,e,5,l,g)),m>6&&Zr(t,e,6,a)&&(f=!0,g=_s(t,d,e,6,a,g)),m>7&&Zr(t,e,7,u)&&(f=!0,g=_s(t,d,e,7,u,g)),m>8&&Zr(t,e,8,c)&&(f=!0,g=_s(t,d,e,8,c,g)),m>9&&Zr(t,e,9,h)&&(f=!0,g=_s(t,d,e,9,h,g)),g&&p.ngOnChanges(g),65536&e.flags&&Rr(t,256,e.nodeIndex)&&p.ngOnInit(),262144&e.flags&&p.ngDoCheck(),f}(t,e,n,r,i,s,o,l,a,u,c,h);case 32:case 64:case 128:return function(t,e,n,r,i,s,o,l,a,u,c,h){const d=e.bindings;let p=!1;const f=d.length;if(f>0&&Qr(t,e,0,n)&&(p=!0),f>1&&Qr(t,e,1,r)&&(p=!0),f>2&&Qr(t,e,2,i)&&(p=!0),f>3&&Qr(t,e,3,s)&&(p=!0),f>4&&Qr(t,e,4,o)&&(p=!0),f>5&&Qr(t,e,5,l)&&(p=!0),f>6&&Qr(t,e,6,a)&&(p=!0),f>7&&Qr(t,e,7,u)&&(p=!0),f>8&&Qr(t,e,8,c)&&(p=!0),f>9&&Qr(t,e,9,h)&&(p=!0),p){const p=jr(t,e.nodeIndex);let g;switch(201347067&e.flags){case 32:g=new Array(d.length),f>0&&(g[0]=n),f>1&&(g[1]=r),f>2&&(g[2]=i),f>3&&(g[3]=s),f>4&&(g[4]=o),f>5&&(g[5]=l),f>6&&(g[6]=a),f>7&&(g[7]=u),f>8&&(g[8]=c),f>9&&(g[9]=h);break;case 64:g={},f>0&&(g[d[0].name]=n),f>1&&(g[d[1].name]=r),f>2&&(g[d[2].name]=i),f>3&&(g[d[3].name]=s),f>4&&(g[d[4].name]=o),f>5&&(g[d[5].name]=l),f>6&&(g[d[6].name]=a),f>7&&(g[d[7].name]=u),f>8&&(g[d[8].name]=c),f>9&&(g[d[9].name]=h);break;case 128:const t=n;switch(f){case 1:g=t.transform(n);break;case 2:g=t.transform(r);break;case 3:g=t.transform(r,i);break;case 4:g=t.transform(r,i,s);break;case 5:g=t.transform(r,i,s,o);break;case 6:g=t.transform(r,i,s,o,l);break;case 7:g=t.transform(r,i,s,o,l,a);break;case 8:g=t.transform(r,i,s,o,l,a,u);break;case 9:g=t.transform(r,i,s,o,l,a,u,c);break;case 10:g=t.transform(r,i,s,o,l,a,u,c,h)}}p.value=g}return p}(t,e,n,r,i,s,o,l,a,u,c,h);default:throw"unreachable"}}(t,e,r,i,s,o,l,a,u,c,h,d):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)rl(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let s=0;s<n.length;s++)Qr(t,e,s,n[s])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=bl(n[t],r[t]);i=e.text.prefix+i;const s=Fr(t,e.nodeIndex).renderText;t.renderer.setValue(s,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=Lr(t,e.nodeIndex),i=r.instance;let s=!1,o=void 0;for(let l=0;l<n.length;l++)Zr(t,e,l,n[l])&&(s=!0,o=_s(t,r,e,l,n[l],o));return o&&i.ngOnChanges(o),65536&e.flags&&Rr(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),s}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let s=0;s<n.length;s++)Qr(t,e,s,n[s])&&(i=!0);if(i){const i=jr(t,e.nodeIndex);let s;switch(201347067&e.flags){case 32:s=n;break;case 64:s={};for(let e=0;e<n.length;e++)s[r[e].name]=n[e];break;case 128:const t=n[0],i=n.slice(1);s=t.transform(...i)}i.value=s}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function Pl(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=$r(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,ei(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function Il(t,e,n,r,i,s,o,l,a,u,c,h,d){return 0===n?function(t,e,n,r,i,s,o,l,a,u,c,h){const d=e.bindings.length;d>0&&Jr(t,e,0,n),d>1&&Jr(t,e,1,r),d>2&&Jr(t,e,2,i),d>3&&Jr(t,e,3,s),d>4&&Jr(t,e,4,o),d>5&&Jr(t,e,5,l),d>6&&Jr(t,e,6,a),d>7&&Jr(t,e,7,u),d>8&&Jr(t,e,8,c),d>9&&Jr(t,e,9,h)}(t,e,r,i,s,o,l,a,u,c,h,d):function(t,e,n){for(let r=0;r<n.length;r++)Jr(t,e,r,n[r])}(t,e,r),!1}function Ml(t,e){if(Br(t,e.nodeIndex).dirty)throw Mr(Vr.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function Dl(t){if(!(128&t.state)){if(Rl(t,Al.Destroy),Nl(t,Al.Destroy),ws(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=ri(t);if(e){const n=e.template._projectedViews;n&&(q(n,n.indexOf(t)),Vr.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode($r(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Fr(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&Br(t,n).destroy()}}(t),li(t)&&t.renderer.destroy(),t.state|=128}}const Al=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Nl(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Fl($r(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Rl(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=$r(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Fl(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Fl(t,e){const n=t.state;switch(e){case Al.CheckNoChanges:0==(128&n)&&(12==(12&n)?El(t):64&n&&$l(t,Al.CheckNoChangesProjectedViews));break;case Al.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?El(t):64&n&&$l(t,e));break;case Al.CheckAndUpdate:0==(128&n)&&(12==(12&n)?Tl(t):64&n&&$l(t,Al.CheckAndUpdateProjectedViews));break;case Al.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?Tl(t):64&n&&$l(t,e));break;case Al.Destroy:Dl(t);break;case Al.CreateViewNodes:kl(t)}}function $l(t,e){Rl(t,e),Nl(t,e)}function Ll(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let s=0;s<i;s++){const i=t.def.nodes[s];if(i.flags&e&&i.flags&n)switch(Vr.setCurrentNode(t,i.nodeIndex),r){case 0:ol(t,i);break;case 1:Ml(t,i)}i.childFlags&e&&i.childFlags&n||(s+=i.childCount)}}let jl=!1;function Bl(t,e,n,r,i,s){const o=i.injector.get(lr);return xl(Wl(t,i,o,e,n),r,s)}function Vl(t,e,n,r,i,s){const o=i.injector.get(lr),l=Wl(t,i,new wa(o),e,n),a=Jl(r);return va(sa.create,xl,null,[l,a,s])}function Wl(t,e,n,r,i){const s=e.injector.get($e),o=e.injector.get(ce),l=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:s,rendererFactory:n,renderer:l,errorHandler:o}}function Ul(t,e,n,r){const i=Jl(n);return va(sa.create,wl,null,[t,e,i,r])}function Hl(t,e,n,r){return n=Yl.get(e.element.componentProvider.provider.token)||Jl(n),va(sa.create,Cl,null,[t,e,n,r])}function Gl(t,e,n,r){return Zi(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===ql.size?{hasOverrides:e,hasDeprecatedOverrides:n}:(t.providers.forEach(t=>{const r=ql.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{Kl.forEach((r,i)=>{b(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:e,hasDeprecatedOverrides:n})}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=ql.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=hi(i.deps),r.value=i.value)}if(Kl.size>0){let e=new Set(t.modules);Kl.forEach((r,i)=>{if(e.has(b(i).providedIn)){let e={token:i,flags:r.flags|(n?4096:0),deps:hi(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[Hr(i)]=e}})}}(t=t.factory(()=>Wr)),t):t}(r))}const ql=new Map,Kl=new Map,Yl=new Map;function Xl(t){let e;ql.set(t.token,t),"function"==typeof t.token&&(e=b(t.token))&&"function"==typeof e.providedIn&&Kl.set(t.token,t)}function Zl(t,e){const n=fi(e.viewDefFactory),r=fi(n.nodes[0].element.componentView);Yl.set(t,r)}function Ql(){ql.clear(),Kl.clear(),Yl.clear()}function Jl(t){if(0===ql.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&ql.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>Wr);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=ql.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=hi(n.deps),t.value=n.value)}}}}function ta(t,e,n,r,i,s,o,l,a,u,c,h,d){const p=t.def.nodes[e];return zl(t,p,n,r,i,s,o,l,a,u,c,h,d),224&p.flags?jr(t,e).value:void 0}function ea(t,e,n,r,i,s,o,l,a,u,c,h,d){const p=t.def.nodes[e];return Il(t,p,n,r,i,s,o,l,a,u,c,h,d),224&p.flags?jr(t,e).value:void 0}function na(t){return va(sa.detectChanges,Tl,null,[t])}function ra(t){return va(sa.checkNoChanges,El,null,[t])}function ia(t){return va(sa.destroy,Dl,null,[t])}const sa=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let oa,la,aa;function ua(t,e){la=t,aa=e}function ca(t,e,n,r){return ua(t,e),va(sa.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function ha(t,e){if(128&t.state)throw Ar(sa[oa]);return ua(t,ga(t,0)),t.def.updateDirectives(function(t,n,r,...i){const s=t.def.nodes[n];return 0===e?pa(t,s,r,i):fa(t,s,r,i),16384&s.flags&&ua(t,ga(t,n)),224&s.flags?jr(t,s.nodeIndex).value:void 0},t)}function da(t,e){if(128&t.state)throw Ar(sa[oa]);return ua(t,ma(t,0)),t.def.updateRenderer(function(t,n,r,...i){const s=t.def.nodes[n];return 0===e?pa(t,s,r,i):fa(t,s,r,i),3&s.flags&&ua(t,ma(t,n)),224&s.flags?jr(t,s.nodeIndex).value:void 0},t)}function pa(t,e,n,r){if(zl(t,e,n,...r)){const i=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],s=i[t];8&r.flags&&(n[Ve(r.nonMinifiedName)]=Ue(s))}const r=e.parent,s=$r(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(s,e,r):t.renderer.removeAttribute(s,e)}else t.renderer.setValue(s,`bindings=${JSON.stringify(n,null,2)}`)}}}function fa(t,e,n,r){Il(t,e,n,...r)}function ga(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function ma(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class ba{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=ii(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return $r(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Gi(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){ya(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&ya(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!li(t);)t=t.parent;return t.parent?$r(t.parent,ii(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?si(this.view,this.nodeDef):si(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let s=-1;n.factory(()=>++s===i?t.error.bind(t,...e):Wr),s<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function ya(t,e,n){for(let r in e.references)n[r]=al(t,e,e.references[r])}function va(t,e,n,r){const i=oa,s=la,o=aa;try{oa=t;const a=e.apply(n,r);return la=s,aa=o,oa=i,a}catch(l){if(le(l)||!la)throw l;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Dr(t,e),t}(l,_a())}}function _a(){return la?new ba(la,aa):null}class wa{constructor(t){this.delegate=t}createRenderer(t,e){return new xa(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class xa{constructor(t){this.delegate=t,this.debugContextFactory=_a,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Uo(t);Wo.delete(e.nativeNode),e instanceof Bo&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new Vo(n,null,r);e.name=t,Ho(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Ho(new Bo(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Ho(new Bo(e,null,n)),e}appendChild(t,e){const n=Uo(t),r=Uo(e);n&&r&&n instanceof Vo&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Uo(t),i=Uo(e),s=Uo(n);r&&i&&r instanceof Vo&&r.insertBefore(s,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Uo(t),r=Uo(e);n&&r&&n instanceof Vo&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=_a();return r&&Ho(new Vo(n,null,r)),n}setAttribute(t,e,n,r){const i=Uo(t);i&&i instanceof Vo&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Uo(t);r&&r instanceof Vo&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Uo(t);n&&n instanceof Vo&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Uo(t);n&&n instanceof Vo&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=Uo(t);i&&i instanceof Vo&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Uo(t);r&&r instanceof Vo&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Uo(t);r&&r instanceof Vo&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Uo(t);r&&r.listeners.push(new jo(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function Ca(t,e,n){return new Sa(t,e,n)}class Sa extends H{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(jl)return;jl=!0;const t=pe()?{setCurrentNode:ua,createRootView:Vl,createEmbeddedView:Ul,createComponentView:Hl,createNgModuleRef:Gl,overrideProvider:Xl,overrideComponentView:Zl,clearOverrides:Ql,checkAndUpdateView:na,checkNoChangesView:ra,destroyView:ia,createDebugContext:(t,e)=>new ba(t,e),handleEvent:ca,updateDirectives:ha,updateRenderer:da}:{setCurrentNode:()=>{},createRootView:Bl,createEmbeddedView:wl,createComponentView:Cl,createNgModuleRef:Zi,overrideProvider:Wr,overrideComponentView:Wr,clearOverrides:Wr,checkAndUpdateView:Tl,checkNoChangesView:El,destroyView:Dl,createDebugContext:(t,e)=>new ba(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?ta:ea,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?ta:ea,t)};Vr.setCurrentNode=t.setCurrentNode,Vr.createRootView=t.createRootView,Vr.createEmbeddedView=t.createEmbeddedView,Vr.createComponentView=t.createComponentView,Vr.createNgModuleRef=t.createNgModuleRef,Vr.overrideProvider=t.overrideProvider,Vr.overrideComponentView=t.overrideComponentView,Vr.clearOverrides=t.clearOverrides,Vr.checkAndUpdateView=t.checkAndUpdateView,Vr.checkNoChangesView=t.checkNoChangesView,Vr.destroyView=t.destroyView,Vr.resolveDep=ys,Vr.createDebugContext=t.createDebugContext,Vr.handleEvent=t.handleEvent,Vr.updateDirectives=t.updateDirectives,Vr.updateRenderer=t.updateRenderer,Vr.dirtyParentQueries=sl}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(fi(this._ngModuleDefFactory));return Vr.createNgModuleRef(this.moduleType,t||bn.NULL,this._bootstrapComponents,e)}}},"8b5+":function(t,e,n){"use strict";var r=n("zL8a");e.concatMapTo=function(t,e){return r.concatMap(function(){return t},e)}},"90cg":function(t,e,n){"use strict";e.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},"99Un":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},"9AGB":function(t,e,n){"use strict";var r=n("w5QO");function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:r.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},"9Qnf":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},"9WSG":function(t,e,n){var r=n("6WtA");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},"9WoD":function(t,e,n){var r=n("yNUO");t.exports=function(t,e,n){var i=r(t).getTime(),s=r(e).getTime(),o=r(n).getTime();if(s>o)throw new Error("The start of the range cannot be after the end of the range");return i>=s&&i<=o}},"9d03":function(t,e,n){var r=n("ZmXw");t.exports=function(t,e){var n=Number(e);return r(t,3*n)}},"9iie":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l});var r=n("8Y7J"),i=(n("CYS+"),n("SVse"),n("s7LF")),s=n("POq0"),o=(n("5GAg"),r.rb({encapsulation:2,styles:[],data:{}}));function l(t){return r.Pb(2,[r.Lb(402653184,1,{inputElement:0}),r.Lb(671088640,2,{contentElement:0}),(t()(),r.tb(2,0,null,null,7,"span",[["class","ant-checkbox"]],[[2,"ant-checkbox-checked",null],[2,"ant-checkbox-disabled",null],[2,"ant-checkbox-indeterminate",null]],null,null,null,null)),(t()(),r.tb(3,0,[[1,0],["inputElement",1]],null,5,"input",[["class","ant-checkbox-input"],["type","checkbox"]],[[8,"checked",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"change"],[null,"blur"]],function(t,e,n){var i=!0,s=t.component;return"change"===e&&(i=!1!==r.Fb(t,4).onChange(n.target.checked)&&i),"blur"===e&&(i=!1!==r.Fb(t,4).onTouched()&&i),"ngModelChange"===e&&(i=!1!==s.innerCheckedChange(n)&&i),"click"===e&&(i=!1!==n.stopPropagation()&&i),i},null,null)),r.sb(4,16384,null,0,i.b,[r.D,r.k],null,null),r.Kb(1024,null,i.l,function(t){return[t]},[i.b]),r.sb(6,671744,null,0,i.p,[[8,null],[8,null],[8,null],[6,i.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,i.m,null,[i.p]),r.sb(8,16384,null,0,i.n,[[4,i.m]],null,null),(t()(),r.tb(9,0,null,null,0,"span",[["class","ant-checkbox-inner"]],null,null,null,null,null)),(t()(),r.tb(10,0,[[2,0],["contentElement",1]],null,2,"span",[],null,[[null,"cdkObserveContent"]],function(t,e,n){var r=!0;return"cdkObserveContent"===e&&(r=!1!==t.component.checkContent()&&r),r},null,null)),r.sb(11,1196032,null,0,s.a,[s.b,r.k,r.y],null,{event:"cdkObserveContent"}),r.Eb(null,0)],function(t,e){var n=e.component;t(e,6,0,n.nzDisabled,n.nzChecked)},function(t,e){var n=e.component;t(e,2,0,n.nzChecked&&!n.nzIndeterminate,n.nzDisabled,n.nzIndeterminate),t(e,3,0,n.nzChecked,r.Fb(e,8).ngClassUntouched,r.Fb(e,8).ngClassTouched,r.Fb(e,8).ngClassPristine,r.Fb(e,8).ngClassDirty,r.Fb(e,8).ngClassValid,r.Fb(e,8).ngClassInvalid,r.Fb(e,8).ngClassPending)})}},"9m1m":function(t,e,n){var r=n("JtXv");t.exports=function(t){return r(new Date,t)}},"9oos":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n("1LmZ"),n("Ez21");const r={title:"\u53d1\u73b0"};class i{}},"9pFA":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",function(){return INITIAL_OPTIONS}),__webpack_require__.d(__webpack_exports__,"g",function(){return STORE_DEVTOOLS_CONFIG}),__webpack_require__.d(__webpack_exports__,"i",function(){return createConfig}),__webpack_require__.d(__webpack_exports__,"l",function(){return DevtoolsDispatcher}),__webpack_require__.d(__webpack_exports__,"k",function(){return DevtoolsExtension}),__webpack_require__.d(__webpack_exports__,"j",function(){return REDUX_DEVTOOLS_EXTENSION}),__webpack_require__.d(__webpack_exports__,"c",function(){return IS_EXTENSION_OR_MONITOR_PRESENT}),__webpack_require__.d(__webpack_exports__,"d",function(){return createIsExtensionOrMonitorPresent}),__webpack_require__.d(__webpack_exports__,"e",function(){return createReduxDevtoolsExtension}),__webpack_require__.d(__webpack_exports__,"f",function(){return createStateObservable}),__webpack_require__.d(__webpack_exports__,"b",function(){return StoreDevtoolsModule}),__webpack_require__.d(__webpack_exports__,"a",function(){return StoreDevtools});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("8Y7J"),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("DQLy"),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("EY2u"),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("HDdC"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("LRne"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("VRyK"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("qgXg"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("jtHE"),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("w1tV"),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("pLZG"),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("lJxs"),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("bOdf"),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("tS1D"),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Kj3r"),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("JIr8"),rxjs_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("IzEk"),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("1G5W"),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("eIep"),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("zP0r"),rxjs_operators__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("pxpQ"),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("zp1y"),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("Kqap");class StoreDevtoolsConfig{}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.p("@ngrx/devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.p("@ngrx/devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(t){const e={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}};let n="function"==typeof t?t():t;const r=Object.assign({},e,{features:n.features||!!n.logOnly&&{pause:!0,export:!0,test:!0}||e.features},n);if(r.maxAge&&r.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${r.maxAge}`);return r}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(t,e){if(this.action=t,this.timestamp=e,this.type=PERFORM_ACTION,void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(t){this.timestamp=t,this.type=RESET}}class Rollback{constructor(t){this.timestamp=t,this.type=ROLLBACK}}class Commit{constructor(t){this.timestamp=t,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(t){this.id=t,this.type=TOGGLE_ACTION}}class JumpToState{constructor(t){this.index=t,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(t){this.actionId=t,this.type=JUMP_TO_ACTION}}class ImportState{constructor(t){this.nextLiftedState=t,this.type=IMPORT_STATE}}class LockChanges{constructor(t){this.status=t,this.type=LOCK_CHANGES}}class PauseRecording{constructor(t){this.status=t,this.type=PAUSE_RECORDING}}function difference(t,e){return t.filter(t=>e.indexOf(t)<0)}function unliftState(t){const{computedStates:e,currentStateIndex:n}=t;if(n>=e.length){const{state:t}=e[e.length-1];return t}const{state:r}=e[n];return r}function liftAction(t){return new PerformAction(t,+Date.now())}function sanitizeActions(t,e){return Object.keys(e).reduce((n,r)=>{const i=Number(r);return n[i]=sanitizeAction(t,e[i],i),n},{})}function sanitizeAction(t,e,n){return Object.assign({},e,{action:t(e.action,n)})}function sanitizeStates(t,e){return e.map((e,n)=>({state:sanitizeState(t,e.state,n),error:e.error}))}function sanitizeState(t,e,n){return t(e,n)}function shouldFilterActions(t){return t.predicate||t.actionsSafelist||t.actionsBlocklist}function filterLiftedState(t,e,n,r){const i=[],s={},o=[];return t.stagedActionIds.forEach((l,a)=>{const u=t.actionsById[l];u&&(a&&isActionFiltered(t.computedStates[a],u,e,n,r)||(s[l]=u,i.push(l),o.push(t.computedStates[a])))}),Object.assign({},t,{stagedActionIds:i,actionsById:s,computedStates:o})}function isActionFiltered(t,e,n,r,i){const s=n&&!n(t,e.action),o=r&&!e.action.type.match(r.join("|")),l=i&&e.action.type.match(i.join("|"));return s||o||l}class DevtoolsDispatcher extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.a{}const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.p("Redux Devtools Extension");class DevtoolsExtension{constructor(t,e,n){this.config=e,this.dispatcher=n,this.devtoolsExtension=t,this.createActionStreams()}notify(t,e){if(this.devtoolsExtension)if(t.type===PERFORM_ACTION){if(e.isLocked||e.isPaused)return;const n=unliftState(e);if(shouldFilterActions(this.config)&&isActionFiltered(n,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const r=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,n,e.currentStateIndex):n,i=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,t,e.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(i,r))}else{const t=Object.assign({},e,{stagedActionIds:e.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,e.actionsById):e.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,e.computedStates):e.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,t,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.a(t=>{const e=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=e,e.init(),e.subscribe(e=>t.next(e)),e.unsubscribe}):Object(rxjs__WEBPACK_IMPORTED_MODULE_2__.b)()}createActionStreams(){const t=this.createChangesObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.a)()),e=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.START)),n=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.STOP)),r=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.DISPATCH),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(t=>this.unwrapAction(t.payload)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.a)(t=>t.type===IMPORT_STATE?this.dispatcher.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.o),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.a)(1e3),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.a)(1e3),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(()=>t),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.a)(()=>Object(rxjs__WEBPACK_IMPORTED_MODULE_4__.a)(t)),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.a)(1)):Object(rxjs__WEBPACK_IMPORTED_MODULE_4__.a)(t))),i=t.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.a)(t=>t.type===ExtensionActionTypes.ACTION),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(t=>this.unwrapAction(t.payload))).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.a)(n)),s=r.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.a)(n));this.start$=e.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.a)(n)),this.actions$=this.start$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.a)(()=>i)),this.liftedActions$=this.start$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.a)(()=>s))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(t){const e={name:t.name,features:t.features,serialize:t.serialize};return!1!==t.maxAge&&(e.maxAge=t.maxAge),e}sendToReduxDevtools(t){try{t()}catch(e){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",e)}}}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.b},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(t,e,n,r,i){if(r)return{state:n,error:"Interrupted by an error up the chain"};let s,o=n;try{o=t(n,e)}catch(l){s=l.toString(),i.handleError(l.stack||l)}return{state:o,error:s}}function recomputeStates(t,e,n,r,i,s,o,l,a){if(e>=t.length&&t.length===s.length)return t;const u=t.slice(0,e),c=s.length-(a?1:0);for(let h=e;h<c;h++){const t=s[h],e=i[t].action,a=u[h-1],c=a?a.state:r,d=a?a.error:void 0,p=o.indexOf(t)>-1?a:computeNextEntry(n,e,c,d,l);u.push(p)}return a&&u.push(t[t.length-1]),u}function liftInitialState(t,e){return{monitorState:e(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(t,e,n,r,i={}){return s=>(o,l)=>{let{monitorState:a,actionsById:u,nextActionId:c,stagedActionIds:h,skippedActionIds:d,committedState:p,currentStateIndex:f,computedStates:g,isLocked:m,isPaused:b}=o||e;function y(t){let e=t,n=h.slice(1,e+1);for(let r=0;r<n.length;r++){if(g[r+1].error){n=h.slice(1,(e=r)+1);break}delete u[n[r]]}d=d.filter(t=>-1===n.indexOf(t)),h=[0,...h.slice(e+1)],p=g[e].state,g=g.slice(e),f=f>e?f-e:0}function v(){u={0:liftAction(INIT_ACTION)},c=1,h=[0],d=[],p=g[f].state,f=0,g=[]}o||(u=Object.create(u));let _=0;switch(l.type){case LOCK_CHANGES:m=l.status,_=1/0;break;case PAUSE_RECORDING:(b=l.status)?(h=[...h,c],u[c]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),c++,_=h.length-1,g=g.concat(g[g.length-1]),f===h.length-2&&f++,_=1/0):v();break;case RESET:u={0:liftAction(INIT_ACTION)},c=1,h=[0],d=[],p=t,f=0,g=[];break;case COMMIT:v();break;case ROLLBACK:u={0:liftAction(INIT_ACTION)},c=1,h=[0],d=[],f=0,g=[];break;case TOGGLE_ACTION:{const{id:t}=l,e=d.indexOf(t);d=-1===e?[t,...d]:d.filter(e=>e!==t),_=h.indexOf(t);break}case SET_ACTIONS_ACTIVE:{const{start:t,end:e,active:n}=l,r=[];for(let i=t;i<e;i++)r.push(i);d=n?difference(d,r):[...d,...r],_=h.indexOf(t);break}case JUMP_TO_STATE:f=l.index,_=1/0;break;case JUMP_TO_ACTION:{const t=h.indexOf(l.actionId);-1!==t&&(f=t),_=1/0;break}case SWEEP:h=difference(h,d),d=[],f=Math.min(f,h.length-1);break;case PERFORM_ACTION:{if(m)return o||e;if(b||o&&isActionFiltered(o.computedStates[f],l,i.predicate,i.actionsSafelist,i.actionsBlocklist)){const t=g[g.length-1];g=[...g.slice(0,-1),computeNextEntry(s,l.action,t.state,t.error,n)],_=1/0;break}i.maxAge&&h.length===i.maxAge&&y(1),f===h.length-1&&f++;const t=c++;u[t]=l,_=(h=[...h,t]).length-1;break}case IMPORT_STATE:({monitorState:a,actionsById:u,nextActionId:c,stagedActionIds:h,skippedActionIds:d,committedState:p,currentStateIndex:f,computedStates:g,isLocked:m,isPaused:b}=l.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.b:_=0,i.maxAge&&h.length>i.maxAge&&(g=recomputeStates(g,_,s,p,u,h,d,n,b),y(h.length-i.maxAge),_=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.o:if(g.filter(t=>t.error).length>0)_=0,i.maxAge&&h.length>i.maxAge&&(g=recomputeStates(g,_,s,p,u,h,d,n,b),y(h.length-i.maxAge),_=1/0);else{if(!b&&!m){f===h.length-1&&f++;const t=c++;u[t]=new PerformAction(l,+Date.now()),h=[...h,t],g=recomputeStates(g,_=h.length-1,s,p,u,h,d,n,b)}g=g.map(t=>Object.assign({},t,{state:s(t.state,RECOMPUTE_ACTION)})),f=h.length-1,i.maxAge&&h.length>i.maxAge&&y(h.length-i.maxAge),_=1/0}break;default:_=1/0}return g=recomputeStates(g,_,s,p,u,h,d,n,b),{monitorState:a=r(a,l),actionsById:u,nextActionId:c,stagedActionIds:h,skippedActionIds:d,committedState:p,currentStateIndex:f,computedStates:g,isLocked:m,isPaused:b}}}class StoreDevtools{constructor(t,e,n,r,i,s,o,l){const a=liftInitialState(o,l.monitor),u=liftReducerWith(o,a,s,l.monitor,l),c=Object(rxjs__WEBPACK_IMPORTED_MODULE_5__.a)(Object(rxjs__WEBPACK_IMPORTED_MODULE_5__.a)(e.asObservable().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.a)(1)),r.actions$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(liftAction)),t,r.liftedActions$).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.b)(rxjs__WEBPACK_IMPORTED_MODULE_6__.a)),h=n.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(u)),d=new rxjs__WEBPACK_IMPORTED_MODULE_7__.a(1),p=c.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.a)(h),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.a)(({state:t},[e,n])=>{let i=n(t,e);return e.type!==PERFORM_ACTION&&shouldFilterActions(l)&&(i=filterLiftedState(i,l.predicate,l.actionsSafelist,l.actionsBlocklist)),r.notify(e,i),{state:i,action:e}},{state:a,action:null})).subscribe(({state:t,action:e})=>{d.next(t),e.type===PERFORM_ACTION&&i.next(e.action)}),f=r.start$.subscribe(()=>{this.refresh()}),g=d.asObservable(),m=g.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.a)(unliftState));this.extensionStartSubscription=f,this.stateSubscription=p,this.dispatcher=t,this.liftedState=g,this.state=m}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new PerformAction(t,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(t){this.dispatch(new ToggleAction(t))}jumpToAction(t){this.dispatch(new JumpToAction(t))}jumpToState(t){this.dispatch(new JumpToState(t))}importState(t){this.dispatch(new ImportState(t))}lockChanges(t){this.dispatch(new LockChanges(t))}pauseRecording(t){this.dispatch(new PauseRecording(t))}}const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.p("Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(t,e){return Boolean(t)||e.monitor!==noMonitor}function createReduxDevtoolsExtension(){return"object"==typeof window&&void 0!==window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:null}function createStateObservable(t){return t.state}class StoreDevtoolsModule{static instrument(t={}){return{ngModule:StoreDevtoolsModule,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:t},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.l,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.h,useExisting:DevtoolsDispatcher}]}}}},"9ppp":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",function(){return i}),r.prototype=Object.create(Error.prototype);const i=r},A7zk:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("zMNK");class r{}},ADsi:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},AFwO:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("xKqS");e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=o;var l=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return r(e,t),e.dispatch=function(t){t.notification.observe(t.destination),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new a(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete()),this.unsubscribe()},e}(i.Subscriber);e.ObserveOnSubscriber=l;var a=function(){return function(t,e){this.notification=t,this.destination=e}}();e.ObserveOnMessage=a},AVfB:function(t,e,n){var r=n("Zipn");t.exports=function(t){return r(new Date,t)}},AWIJ:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"d",function(){return o}),n.d(e,"c",function(){return l}),n.d(e,"f",function(){return a}),n.d(e,"a",function(){return u}),n.d(e,"e",function(){return c});var r=n("DQLy");const i=t=>t,s=Object(r.t)("member"),o=Object(r.w)(i,t=>t.modalVisible),l=Object(r.w)(i,t=>t.modalType),a=Object(r.w)(i,t=>t.userId),u=Object(r.w)(i,t=>t.likeId),c=Object(r.w)(i,t=>t.shareInfo)},AYHy:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("Q1FS"),o=n("Y4kR"),l=n("cSoz");e.delayWhen=function(t,e){return e?function(n){return new c(n,e).lift(new a(t))}:function(e){return e.lift(new a(t))}};var a=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.delayDurationSelector))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(r){this.destination.error(r)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},e.prototype.tryDelay=function(t,e){var n=l.subscribeToResult(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(o.OuterSubscriber),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return r(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new h(t,this.source))},e}(s.Observable),h=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return r(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(i.Subscriber)},Agmr:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},AmbE:function(t,e,n){var r=n("mrSG").__extends,i=n("zzsZ"),s=n("mbIT"),o=n("FWf1"),l=n("Y4kR"),a=n("cSoz"),u=n("VKeD");e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),i.fromArray(t,void 0).lift(new c(n))};var c=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}();e.ZipOperator=c;var h=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return r(e,t),e.prototype._next=function(t){var e=this.iterators;s.isArray(t)?e.push(new p(t)):e.push("function"==typeof t[u.iterator]?new d(t[u.iterator]()):new f(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.destination.add(r.subscribe(r,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++)if("function"==typeof(o=t[r]).hasValue&&!o.hasValue())return;var i=!1,s=[];for(r=0;r<e;r++){var o,l=(o=t[r]).next();if(o.hasCompleted()&&(i=!0),l.done)return void n.complete();s.push(l.value)}this.resultSelector?this._tryresultSelector(s):n.next(s),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(o.Subscriber);e.ZipSubscriber=h;var d=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),p=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[u.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),f=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return r(e,t),e.prototype[u.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return a.subscribeToResult(this,this.observable,this,e)},e}(l.OuterSubscriber)},AytR:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r={production:!0}},"B/hR":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.distinctUntilChanged=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.compare,this.keySelector))},t}(),o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return r(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(i.Subscriber)},B9Yq:function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},Bf1V:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("yrbL"),i=n("XPT/"),s=n("XNiG"),o=n("DQLy"),l=n("hLrw"),a=n("calH"),u=n("kujU");class c{constructor(t,e,n,o,l,a,u,c,h){this.route=t,this.sheetServe=e,this.batchActionsServe=n,this.memberServe=o,this.songServe=l,this.batchActionServe=a,this.nzMessageServe=u,this.store$=c,this.cdr=h,this.recordType=i.b.weekData,this.currentIndex=-1,this.destory$=new s.a,this.route.data.pipe(Object(r.map)(t=>t.user)).subscribe(([t,e])=>{this.user=t,this.records=e,this.listenCurrentSong()})}ngOnInit(){}listenCurrentSong(){this.store$.pipe(Object(o.z)(l.f),Object(o.z)(l.c),Object(r.takeUntil)(this.destory$)).subscribe(t=>{if(this.currentSong=t,t){const e=this.records.map(t=>t.song);this.currentIndex=Object(a.a)(e,t)}else this.currentIndex=-1;this.cdr.markForCheck()})}onPlaySheet(t){this.sheetServe.playSheet(t).subscribe(t=>{this.batchActionsServe.selectPlayList({list:t,index:0})})}onChangeType(t){this.recordType!==t&&(this.recordType=t,this.memberServe.getUserRecord(this.user.profile.userId.toString(),t).subscribe(t=>{this.records=t,this.cdr.markForCheck()}))}onAddSong([t,e]){this.currentSong&&this.currentSong.id===t.id||this.songServe.getSongList(t).subscribe(t=>{t.length?this.batchActionServe.insertSong(t[0],e):this.nzMessageServe.create("warning","\u65e0url!")})}onLikeSong(t){this.batchActionsServe.likeSong(t)}onShareSong(t,e="song"){const n=this.makeTxt("\u6b4c\u66f2",t.name,t.ar);this.store$.dispatch(Object(u.d)({info:{id:t.id.toString(),type:e,txt:n}}))}makeTxt(t,e,n){return`${t}: ${e} -- ${n.map(t=>t.name).join("/")}`}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}},BmJ7:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("zB/H"),o=n("Y4kR"),l=n("cSoz");e.windowToggle=function(t,e){return function(n){return n.lift(new a(t,e))}};var a=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.openings,this.closingSelector))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=l.subscribeToResult(i,n,n)),i}return r(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var s=n[i];s.window.error(e),s.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,o){if(t===this.openings){var a=void 0;try{a=(0,this.closingSelector)(e)}catch(p){return this.error(p)}var u=new i.Subject,c=new s.Subscription,h={window:u,subscription:c};this.contexts.push(h);var d=l.subscribeToResult(this,a,h);d.closed?this.closeWindow(this.contexts.length-1):(d.context=h,c.add(d)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(o.OuterSubscriber)},C20g:function(t,e,n){"use strict";e.not=function(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}},C6bk:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("yrbL"),i=n("XPT/"),s=n("DQLy"),o=n("hLrw"),l=n("calH"),a=n("XNiG"),u=n("kujU");class c{constructor(t,e,n,s,o,l,u,c,h){this.route=t,this.sheetServe=e,this.batchActionsServe=n,this.memberServe=s,this.songServe=o,this.batchActionServe=l,this.nzMessageServe=u,this.store$=c,this.cdr=h,this.recordType=i.b.weekData,this.currentIndex=-1,this.destory$=new a.a,this.route.data.pipe(Object(r.map)(t=>t.user)).subscribe(([t,e,n])=>{this.user=t,this.records=e.slice(0,10),this.userSheet=n,this.listenCurrentSong()})}ngOnInit(){}listenCurrentSong(){this.store$.pipe(Object(s.z)(o.f),Object(s.z)(o.c),Object(r.takeUntil)(this.destory$)).subscribe(t=>{if(this.currentSong=t,t){const e=this.records.map(t=>t.song);this.currentIndex=Object(l.a)(e,t)}else this.currentIndex=-1;this.cdr.markForCheck()})}onPlaySheet(t){this.sheetServe.playSheet(t).subscribe(t=>{this.batchActionsServe.selectPlayList({list:t,index:0})})}onChangeType(t){this.recordType!==t&&(this.recordType=t,this.memberServe.getUserRecord(this.user.profile.userId.toString(),t).subscribe(t=>{this.records=t.slice(0,10),this.cdr.markForCheck()}))}onAddSong([t,e]){this.currentSong&&this.currentSong.id===t.id||this.songServe.getSongList(t).subscribe(t=>{t.length?this.batchActionServe.insertSong(t[0],e):this.nzMessageServe.create("warning","\u65e0url!")})}onLikeSong(t){this.batchActionsServe.likeSong(t)}onShareSong(t,e="song"){const n=this.makeTxt("\u6b4c\u66f2",t.name,t.ar);this.store$.dispatch(Object(u.d)({info:{id:t.id.toString(),type:e,txt:n}}))}makeTxt(t,e,n){return`${t}: ${e} -- ${n.map(t=>t.name).join("/")}`}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}},C82C:function(t,e,n){var r=n("mrSG").__extends,i=n("zB/H"),s=n("cSoz"),o=n("Y4kR");e.bufferToggle=function(t,e){return function(n){return n.lift(new l(t,e))}};var l=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.openings,this.closingSelector))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(s.subscribeToResult(i,n)),i}return r(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.subscription;this.destination.next(t.buffer),e.splice(e.indexOf(t),1),this.remove(n),n.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new i.Subscription,r={buffer:[],subscription:n};e.push(r);var o=s.subscribeToResult(this,t,r);!o||o.closed?this.closeBuffer(r):(o.context=r,this.add(o),n.add(o))},e}(o.OuterSubscriber)},CRDf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("kJWO");const i=t=>e=>{const n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},CXhC:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setHours(0,0,0,0),e}},"CYS+":function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return o});var r=n("mrSG"),i=n("8Y7J"),s=n("5VGP");class o{constructor(t,e){this.nzOnChange=new i.m,this.checkboxList=[],t.addClass(e.nativeElement,"ant-checkbox-group")}addCheckbox(t){this.checkboxList.push(t)}removeCheckbox(t){this.checkboxList.splice(this.checkboxList.indexOf(t),1)}outputValue(){return this.checkboxList.filter(t=>t.nzChecked).map(t=>t.nzValue)}onChange(){this.nzOnChange.emit(this.outputValue())}}let l=(()=>{class t{constructor(t,e,n,r,s){this.elementRef=t,this.renderer=e,this.nzCheckboxWrapperComponent=n,this.cdr=r,this.focusMonitor=s,this.onChange=()=>null,this.onTouched=()=>null,this.nzCheckedChange=new i.m,this.nzAutoFocus=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzChecked=!1,e.addClass(t.nativeElement,"ant-checkbox-wrapper")}hostClick(t){t.preventDefault(),this.focus(),this.innerCheckedChange(!this.nzChecked)}innerCheckedChange(t){this.nzDisabled||(this.nzChecked=t,this.onChange(this.nzChecked),this.nzCheckedChange.emit(this.nzChecked),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.onChange())}updateAutoFocus(){this.inputElement&&this.nzAutoFocus?this.renderer.setAttribute(this.inputElement.nativeElement,"autofocus","autofocus"):this.renderer.removeAttribute(this.inputElement.nativeElement,"autofocus")}writeValue(t){this.nzChecked=t,this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.nzDisabled=t,this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}checkContent(){Object(s.P)(this.contentElement.nativeElement)?this.renderer.setStyle(this.contentElement.nativeElement,"display","none"):this.renderer.removeStyle(this.contentElement.nativeElement,"display")}ngOnInit(){this.focusMonitor.monitor(this.elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>this.onTouched())}),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.addCheckbox(this)}ngOnChanges(t){t.nzAutoFocus&&this.updateAutoFocus()}ngAfterViewInit(){this.updateAutoFocus(),this.checkContent()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.nzCheckboxWrapperComponent&&this.nzCheckboxWrapperComponent.removeCheckbox(this)}}return Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzAutoFocus",void 0),Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzIndeterminate",void 0),Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzChecked",void 0),t})(),a=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.focusMonitor=e,this.cdr=n,this.onChange=()=>null,this.onTouched=()=>null,this.options=[],this.nzDisabled=!1,r.addClass(t.nativeElement,"ant-checkbox-group")}onOptionChange(){this.onChange(this.options)}trackByOption(t,e){return e.value}ngOnInit(){this.focusMonitor.monitor(this.elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>this.onTouched())})}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef)}writeValue(t){this.options=t,this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.nzDisabled=t,this.cdr.markForCheck()}}return Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),t})();class u{}},CdcT:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("1pIY"),o=n("EOBV");e.throttleTime=function(t,e,n){return void 0===e&&(e=s.async),void 0===n&&(n=o.defaultThrottleConfig),function(r){return r.lift(new l(t,e,n.leading,n.trailing))}};var l=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),a=function(t){function e(e,n,r,i,s){var o=t.call(this,e)||this;return o.duration=n,o.scheduler=r,o.leading=i,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return r(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(u,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(i.Subscriber);function u(t){t.subscriber.clearThrottle()}},Ceu0:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("Q1FS"),o=n("zB/H"),l=n("4mvG"),a=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new o.Subscription).add(this.source.subscribe(new c(this.getSubject(),this))),t.closed?(this._connection=null,t=o.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return l.refCount()(this)},e}(s.Observable);e.ConnectableObservable=a;var u=a.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:u._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.SubjectSubscriber)},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("c2HN"),s=n("I55L"),o=n("kJWO"),l=n("Lhse"),a=n("yCtX"),u=n("quSY"),c=n("a7t3"),h=n("pLzU"),d=n("CRDf"),p=n("SeVD");function f(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(p.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[o.a]}(t))return function(t,e){return new r.a(e?n=>{const r=new u.a;return r.add(e.schedule(()=>{const i=t[o.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r}:Object(d.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?n=>{const r=new u.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r}:Object(c.a)(t))}(t,e);if(Object(s.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[l.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?n=>{const r=new u.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[l.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const s=i.next();t=s.value,e=s.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",function(){return f})},CghO:function(t,e,n){"use strict";n.d(e,"a",function(){return k});var r=n("8Y7J"),i=n("SHEi"),s=(n("QfCi"),n("SVse")),o=n("POq0"),l=n("QQfA"),a=n("IP0z"),u=n("/HVE"),c=n("5VGP"),h=n("66zS"),d=n("GaVp"),p=(n("zMNK"),n("hOhj"),n("Rgb0")),f=(n("W4B1"),n("omvX")),g=n("Irb3"),m=r.rb({encapsulation:2,styles:["\n      .ant-popover {\n        position: relative;\n      }\n    "],data:{animation:[{type:7,name:"zoomBigMotion",definitions:[{type:1,expr:"void => active",animation:[{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"0.2s cubic-bezier(0.08, 0.82, 0.17, 1)"}],options:null},{type:1,expr:"active => void",animation:[{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},timings:"0.2s cubic-bezier(0.78, 0.14, 0.15, 0.86)"}],options:null}],options:{}}]}});function b(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["nz-icon",""],["nzTheme","fill"]],null,null,null,null,null)),r.sb(2,2834432,null,0,h.a,[h.c,r.k,r.D,u.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null)],function(t,e){t(e,2,0,e.component.nzIcon||"exclamation-circle","fill")},null)}function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,b)),r.sb(2,540672,null,0,c.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.tb(3,0,null,null,1,"div",[["class","ant-popover-message-title"]],null,null,null,null,null)),(t()(),r.Nb(4,null,["",""]))],function(t,e){t(e,2,0,e.component.nzIcon)},function(t,e){t(e,4,0,e.component.nzTitle)})}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzCancelText)})}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""])),r.Jb(2,1)],null,function(t,e){var n=r.Ob(e,1,0,t(e,2,0,r.Fb(e.parent.parent,0),"Modal.cancelText"));t(e,1,0,n)})}function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzOkText)})}function x(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""])),r.Jb(2,1)],null,function(t,e){var n=r.Ob(e,1,0,t(e,2,0,r.Fb(e.parent.parent,0),"Modal.okText"));t(e,1,0,n)})}function C(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,30,"div",[["class","ant-popover"]],[[24,"@zoomBigMotion",0],[24,"@.disabled",0]],[[null,"@zoomBigMotion.done"]],function(t,e,n){var r=!0;return"@zoomBigMotion.done"===e&&(r=!1!==t.component._afterVisibilityAnimation(n)&&r),r},null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),r.sb(5,4734976,null,0,c.q,[r.k,r.D,[2,f.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(6,0,null,null,24,"div",[["class","ant-popover-content"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,0,"div",[["class","ant-popover-arrow"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,22,"div",[["class","ant-popover-inner"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,21,"div",[],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,20,"div",[["class","ant-popover-inner-content"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,2,"div",[["class","ant-popover-message"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(13,540672,null,0,c.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.tb(14,0,null,null,16,"div",[["class","ant-popover-buttons"]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,7,"button",[["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onCancel()&&r),r},g.c,g.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(17,1818624,null,1,d.a,[r.k,r.h,r.D,o.b,c.y,r.y,[2,c.i],[2,f.a]],{nzSize:[0,"nzSize"]},null),r.Lb(603979776,2,{listOfIconElement:1}),(t()(),r.ib(16777216,null,0,1,null,v)),r.sb(20,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,0,1,null,_)),r.sb(22,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(23,0,null,null,7,"button",[["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onConfirm()&&r),r},g.c,g.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(25,1818624,null,1,d.a,[r.k,r.h,r.D,o.b,c.y,r.y,[2,c.i],[2,f.a]],{nzType:[0,"nzType"],nzSize:[1,"nzSize"]},null),r.Lb(603979776,3,{listOfIconElement:1}),(t()(),r.ib(16777216,null,0,1,null,w)),r.sb(28,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,0,1,null,x)),r.sb(30,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-popover",n._classMap),t(e,4,0,n.nzOverlayStyle),t(e,5,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,13,0,n.nzTitle),t(e,17,0,"small"),t(e,20,0,n.nzCancelText),t(e,22,0,!n.nzCancelText),t(e,25,0,n.nzOkType,"small"),t(e,28,0,n.nzOkText),t(e,30,0,!n.nzOkText)},function(t,e){t(e,0,0,"active",r.Fb(e,5).nzNoAnimation),t(e,15,0,r.Fb(e,17).nzWave),t(e,23,0,r.Fb(e,25).nzWave)})}function S(t){return r.Pb(2,[r.Hb(0,p.c,[p.d]),r.Lb(671088640,1,{overlay:0}),r.Eb(null,0),(t()(),r.ib(16777216,null,null,3,function(t,e,n){var r=!0,i=t.component;return"backdropClick"===e&&(r=!1!==i.hide()&&r),"detach"===e&&(r=!1!==i.hide()&&r),"positionChange"===e&&(r=!1!==i.onPositionChange(n)&&r),r},C)),r.sb(4,671744,[[1,4],["overlay",4]],0,l.a,[l.d,r.L,r.P,l.l,[2,a.b]],{origin:[0,"origin"],positions:[1,"positions"],open:[2,"open"],hasBackdrop:[3,"hasBackdrop"]},{backdropClick:"backdropClick",positionChange:"positionChange",detach:"detach"}),r.Hb(131072,s.b,[r.h]),r.sb(6,16384,null,0,c.l,[l.a],null,null)],function(t,e){var n=e.component;t(e,4,0,n.overlayOrigin,n._positions,r.Ob(e,4,2,r.Fb(e,5).transform(n.visible$)),n._hasBackdrop)},null)}function O(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"nz-popconfirm",[],null,null,null,S,m)),r.sb(1,573440,null,1,i.a,[r.h,[2,c.q]],null,null),r.Lb(335544320,1,{nzTitle:0})],null,null)}var k=r.pb("nz-popconfirm",i.a,O,{nzTitle:"nzTitle",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzMouseEnterDelay:"nzMouseEnterDelay",nzMouseLeaveDelay:"nzMouseLeaveDelay",nzVisible:"nzVisible",nzTrigger:"nzTrigger",nzPlacement:"nzPlacement",nzOkText:"nzOkText",nzOkType:"nzOkType",nzCancelText:"nzCancelText",nzCondition:"nzCondition",nzIcon:"nzIcon"},{nzVisibleChange:"nzVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},["*"])},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DDzh:function(t,e,n){"use strict";var r=n("q3Kh");e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return r.map(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var s=r[t[i]];if(void 0===s)return;r=s}return r}}(t,n))(e)}}},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},DQLy:function(t,e,n){"use strict";n.d(e,"C",function(){return at}),n.d(e,"P",function(){return st}),n.d(e,"B",function(){return lt}),n.d(e,"A",function(){return ot}),n.d(e,"N",function(){return dt}),n.d(e,"L",function(){return ct}),n.d(e,"M",function(){return ht}),n.d(e,"O",function(){return pt}),n.d(e,"K",function(){return M}),n.d(e,"G",function(){return O}),n.d(e,"E",function(){return _}),n.d(e,"F",function(){return C}),n.d(e,"I",function(){return z}),n.d(e,"D",function(){return v}),n.d(e,"H",function(){return k}),n.d(e,"J",function(){return I}),n.d(e,"s",function(){return f}),n.d(e,"y",function(){return g}),n.d(e,"m",function(){return U}),n.d(e,"z",function(){return H}),n.d(e,"r",function(){return D}),n.d(e,"v",function(){return N}),n.d(e,"a",function(){return y}),n.d(e,"b",function(){return b}),n.d(e,"g",function(){return L}),n.d(e,"i",function(){return R}),n.d(e,"h",function(){return F}),n.d(e,"o",function(){return $}),n.d(e,"j",function(){return j}),n.d(e,"w",function(){return K}),n.d(e,"t",function(){return X}),n.d(e,"k",function(){return V}),n.d(e,"l",function(){return B}),n.d(e,"d",function(){return w}),n.d(e,"f",function(){return x}),n.d(e,"c",function(){return S}),n.d(e,"e",function(){return T}),n.d(e,"p",function(){return E}),n.d(e,"q",function(){return P}),n.d(e,"n",function(){return ut}),n.d(e,"x",function(){return ft}),n.d(e,"u",function(){return gt});var r=n("8Y7J"),i=n("2Vo4"),s=n("HDdC"),o=n("XNiG"),l=n("qgXg"),a=n("pxpQ"),u=n("zp1y"),c=n("Kqap"),h=n("wO+i"),d=n("lJxs"),p=n("/uUt");function f(t,e){if("function"==typeof e)return m(t,(...n)=>Object.assign({},e(...n),{type:t}));switch(e?e._as:"empty"){case"empty":return m(t,()=>({type:t}));case"props":return m(t,e=>Object.assign({},e,{type:t}));default:throw new Error("Unexpected config.")}}function g(){return{_as:"props",_p:void 0}}function m(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}const b="@ngrx/store/init";class y extends i.a{constructor(){super({type:b})}next(t){if("function"==typeof t)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===t)throw new TypeError("Actions must be objects");if(void 0===t.type)throw new TypeError("Actions must have a type property");super.next(t)}complete(){}ngOnDestroy(){super.complete()}}const v=new r.p("@ngrx/store Internal Root Guard"),_=new r.p("@ngrx/store Internal Initial State"),w=new r.p("@ngrx/store Initial State"),x=new r.p("@ngrx/store Reducer Factory"),C=new r.p("@ngrx/store Internal Reducer Factory Provider"),S=new r.p("@ngrx/store Initial Reducers"),O=new r.p("@ngrx/store Internal Initial Reducers"),k=new r.p("@ngrx/store Internal Store Reducers"),E=new r.p("@ngrx/store User Provided Meta Reducers"),T=new r.p("@ngrx/store Meta Reducers"),z=new r.p("@ngrx/store Internal Resolved Meta Reducers"),P=new r.p("@ngrx/store User Runtime Checks Config"),I=new r.p("@ngrx/store Internal User Runtime Checks Config"),M=new r.p("@ngrx/store Internal Runtime Checks");function D(t,e={}){const n=Object.keys(t),r={};for(let s=0;s<n.length;s++){const e=n[s];"function"==typeof t[e]&&(r[e]=t[e])}const i=Object.keys(r);return function(t,n){t=void 0===t?e:t;let s=!1;const o={};for(let e=0;e<i.length;e++){const l=i[e],a=t[l],u=(0,r[l])(a,n);o[l]=u,s=s||u!==a}return s?o:t}}function A(...t){return function(e){if(0===t.length)return e;const n=t[t.length-1];return t.slice(0,-1).reduceRight((t,e)=>e(t),n(e))}}function N(t,e){return Array.isArray(e)&&e.length>0&&(t=A.apply(null,[...e,t])),(e,n)=>{const r=t(e);return(t,e)=>r(t=void 0===t?n:t,e)}}class R extends s.a{}class F extends y{}const $="@ngrx/store/update-reducers";class L extends i.a{constructor(t,e,n,r){super(r(n,e)),this.dispatcher=t,this.initialState=e,this.reducers=n,this.reducerFactory=r}addFeature(t){this.addFeatures([t])}addFeatures(t){const e=t.reduce((t,{reducers:e,reducerFactory:n,metaReducers:r,initialState:i,key:s})=>{const o="function"==typeof e?function(t){const e=Array.isArray(t)&&t.length>0?A(...t):t=>t;return(t,n)=>(t=e(t),(e,r)=>t(e=void 0===e?n:e,r))}(r)(e,i):N(n,r)(e,i);return t[s]=o,t},{});this.addReducers(e)}removeFeature(t){this.removeFeatures([t])}removeFeatures(t){this.removeReducers(t.map(t=>t.key))}addReducer(t,e){this.addReducers({[t]:e})}addReducers(t){this.reducers=Object.assign({},this.reducers,t),this.updateReducers(Object.keys(t))}removeReducer(t){this.removeReducers([t])}removeReducers(t){t.forEach(t=>{this.reducers=function(t,e){return Object.keys(t).filter(t=>t!==e).reduce((e,n)=>Object.assign(e,{[n]:t[n]}),{})}(this.reducers,t)}),this.updateReducers(t)}updateReducers(t){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:$,features:t})}ngOnDestroy(){this.complete()}}class j extends o.a{ngOnDestroy(){this.complete()}}class B extends s.a{}let V=(()=>{class t extends i.a{constructor(t,e,n,r){super(r);const i={state:r},s=t.pipe(Object(a.b)(l.a)).pipe(Object(u.a)(e)).pipe(Object(c.a)(W,i));this.stateSubscription=s.subscribe(({state:t,action:e})=>{this.next(t),n.next(e)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return t.INIT=b,t})();function W(t={state:void 0},[e,n]){const{state:r}=t;return{state:n(r,e),action:e}}class U extends s.a{constructor(t,e,n){super(),this.actionsObserver=e,this.reducerManager=n,this.source=t}select(t,...e){return H.call(null,t,...e)(this)}lift(t){const e=new U(this,this.actionsObserver,this.reducerManager);return e.operator=t,e}dispatch(t){this.actionsObserver.next(t)}next(t){this.actionsObserver.next(t)}error(t){this.actionsObserver.error(t)}complete(){this.actionsObserver.complete()}addReducer(t,e){this.reducerManager.addReducer(t,e)}removeReducer(t){this.reducerManager.removeReducer(t)}}function H(t,e,...n){return function(r){let i;if("string"==typeof t){const s=[e,...n].filter(Boolean);i=r.pipe(Object(h.a)(t,...s))}else{if("function"!=typeof t)throw new TypeError(`Unexpected type '${typeof t}' in select operator,`+" expected 'string' or 'function'");i=r.pipe(Object(d.a)(n=>t(n,e)))}return i.pipe(Object(p.a)())}}function G(t,e){return t===e}function q(t,e=G,n=G){let r,i=null,s=null;return{memoized:function(){if(void 0!==r)return r;if(!i)return s=t.apply(null,arguments),i=arguments,s;if(!function(t,e,n){for(let r=0;r<t.length;r++)if(!n(t[r],e[r]))return!0;return!1}(arguments,i,e))return s;const o=t.apply(null,arguments);return i=arguments,n(s,o)?s:(s=o,o)},reset:function(){i=null,s=null},setResult:function(t){r=t}}}function K(...t){return function(t,e={stateFn:Y}){return function(...n){let r=n;if(Array.isArray(r[0])){const[t,...e]=r;r=[...t,...e]}const i=r.slice(0,r.length-1),s=r[r.length-1],o=i.filter(t=>t.release&&"function"==typeof t.release),l=t(function(...t){return s.apply(null,t)}),a=q(function(t,n){return e.stateFn.apply(null,[t,i,n,l])});return Object.assign(a.memoized,{release:function(){a.reset(),l.reset(),o.forEach(t=>t.release())},projector:l.memoized,setResult:a.setResult})}}(q)(...t)}function Y(t,e,n,r){if(void 0===n){const n=e.map(e=>e(t));return r.memoized.apply(null,n)}const i=e.map(e=>e(t,n));return r.memoized.apply(null,[...i,n])}function X(t){return K(e=>{const n=e[t];return!Object(r.X)()||t in e||console.warn(`@ngrx/store: The feature name "${t}" does `+"not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module "+`using StoreModule.forRoot('${t}', ...) or `+`StoreModule.forFeature('${t}', ...).  If the default `+"state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored."),n},t=>t)}function Z(t){return void 0===t}function Q(t){return null===t}function J(t){return Array.isArray(t)}function tt(t){return"object"==typeof t&&null!==t}function et(t){return"function"==typeof t}function nt(t){Object.freeze(t);const e=et(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(function(t,e){return Object.prototype.hasOwnProperty.call(t,n)}(t)&&(!e||"caller"!==n&&"callee"!==n&&"arguments"!==n)){const e=t[n];!tt(e)&&!et(e)||Object.isFrozen(e)||nt(e)}}),t}function rt(t,e=[]){return(Z(t)||Q(t))&&0===e.length?{path:["root"],value:t}:Object.keys(t).reduce((n,r)=>{if(n)return n;const i=t[r];return!(Z(i)||Q(i)||function(t){return"number"==typeof i}()||function(t){return"boolean"==typeof i}()||function(t){return"string"==typeof i}()||J(i))&&(function(t){if(!function(t){return tt(t)&&!J(t)}(t))return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}(i)?rt(i,[...e,r]):{path:[...e,r],value:i})},!1)}function it(t,e){if(!1===t)return;const n=t.path.join("."),r=new Error(`Detected unserializable ${e} at "${n}"`);throw r.value=t.value,r.unserializablePath=n,r}function st(t){return Object(r.X)()?(void 0===t&&console.warn("@ngrx/store: runtime checks are currently opt-in but will be the default in the next major version with the possibility to opt-out, see https://ngrx.io/guide/migration/v8 for more information."),Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1},t)):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1}}function ot({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?function(t,e){return function(n,r){e.action&&it(rt(r),"action");const i=t(n,r);return e.state&&it(rt(i),"state"),i}}(n,{action:t,state:e}):n}function lt({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?function(t,e){return function(n,r){const i=e.action?nt(r):r,s=t(n,i);return e.state?nt(s):s}}(n,{action:t,state:e}):n}function at(t){return t}class ut{constructor(t,e,n,r,i){}}function ct(t,e){return e instanceof r.p?t.get(e):e}function ht(t){return"function"==typeof t?t():t}function dt(t,e){return t.concat(e)}function pt(t){if(t)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function ft(...t){return{reducer:t.pop(),types:t.reduce((t,e)=>[...t,e.type],[])}}function gt(t,...e){const n=new Map;for(let r of e)for(let t of r.types)if(n.has(t)){const e=n.get(t);n.set(t,(t,n)=>r.reducer(e(t,n),n))}else n.set(t,r.reducer);return function(e=t,r){const i=n.get(r.type);return i?i(e,r):e}}},DQmg:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("dvZr"),n("5VGP");class r{}},DT56:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t).getTime(),i=r(e).getTime();return n<i?-1:n>i?1:0}},DVTi:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n("DQLy"),i=n("kujU"),s=function(t){return t.Register="register",t.LoginByPhone="loginByPhone",t.Share="share",t.Like="like",t.Default="default",t}({});const o={modalVisible:!1,modalType:s.Default,userId:"",likeId:""},l=Object(r.u)(o,Object(r.x)(i.c,(t,{modalVisible:e})=>Object.assign({},t,{modalVisible:e})),Object(r.x)(i.b,(t,{modalType:e})=>Object.assign({},t,{modalType:e})),Object(r.x)(i.e,(t,{id:e})=>Object.assign({},t,{userId:e})),Object(r.x)(i.a,(t,{id:e})=>Object.assign({},t,{likeId:e})),Object(r.x)(i.d,(t,{info:e})=>Object.assign({},t,{shareInfo:e})));function a(t,e){return l(t,e)}},DXMP:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.ignoreElements=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._next=function(t){},e}(i.Subscriber)},Dxa7:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("IKal"),o=n("aJGj");e.take=function(t){return function(e){return 0===t?o.empty():e.lift(new l(t))}};var l=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(i.Subscriber)},"Dz+M":function(t,e,n){var r=n("mrSG").__extends;e.Action=function(t){function e(e,n){return t.call(this)||this}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(n("zB/H").Subscription)},EBYK:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},EMgV:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getFullYear()}},EOBV:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=function(t,n){return void 0===n&&(n=e.defaultThrottleConfig),function(e){return e.lift(new o(t,n.leading,n.trailing))}};var o=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector,this.leading,this.trailing))},t}(),l=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s.destination=e,s.durationSelector=n,s._leading=r,s._trailing=i,s._hasValue=!1,s}return r(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._sendValue;this._hasValue&&(this.destination.next(t),this.throttle(t)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=s.subscribeToResult(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(i.OuterSubscriber)},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s});var r=n("HDdC");const i=new r.a(t=>t.complete());function s(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},EZsK:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function l(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&l(r,n),i.state=function(){return l(n,{})}),i}i&&i.exports?i.exports=a:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return a}).call(e,n,e,i))||(i.exports=r):this.tychei=a}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},EcpC:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("8Y7J"),n("5VGP"),n("XNiG"),n("JX91"),n("1G5W");class r{}},Ed4d:function(t,e,n){"use strict";n.d(e,"a",function(){return X});var r=n("8Y7J"),i=n("NFMk"),s=n("SVse"),o=n("QQfA"),l=(n("IP0z"),n("POq0")),a=(n("zMNK"),n("/HVE")),u=(n("hOhj"),n("Rgb0")),c=n("5VGP"),h=n("66zS"),d=n("GaVp"),p=n("Irb3"),f=n("omvX"),g=n("5GAg"),m=r.rb({encapsulation:2,styles:[],data:{}});function b(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","ant-modal-mask"]],[[2,"ant-modal-mask-hidden",null],[4,"zIndex",null]],null,null,null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-modal-mask",n.maskAnimationClassMap),t(e,4,0,n.nzMaskStyle)},function(t,e){var n=e.component;t(e,0,0,n.hidden,n.nzZIndex)})}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"button",[["aria-label","Close"],["class","ant-modal-close"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClickCloseBtn()&&r),r},null,null)),(t()(),r.tb(1,0,null,null,2,"span",[["class","ant-modal-close-x"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"i",[["class","ant-modal-close-icon"],["nz-icon",""],["nzType","close"]],null,null,null,null,null)),r.sb(3,2834432,null,0,h.a,[h.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,3,0,"close")},null)}function _(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,r.Fb(e.parent.parent,21))},null)}function w(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,r.Fb(e.parent.parent,22))},null)}function x(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,null,null,null,null,null,null,null)),r.sb(1,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,_)),r.sb(3,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,w)),r.sb(5,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,!0),t(e,3,0,n.isModalType("default")),t(e,5,0,n.isModalType("confirm"))},null)}function C(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzTitle)},null)}function S(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function O(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,"div",[["class","ant-modal-header"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,6,"div",[["class","ant-modal-title"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,5,null,null,null,null,null,null,null)),r.sb(3,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,C)),r.sb(5,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,S)),r.sb(7,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null)],function(t,e){var n=e.component;t(e,3,0,!0),t(e,5,0,n.isTemplateRef(n.nzTitle)),t(e,7,0,n.isNonEmptyString(n.nzTitle))},null)}function k(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzContent)},null)}function E(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzContent)})}function T(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,r.Fb(e.parent.parent.parent,4))},null)}function z(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,null,null,null,null,null,null,null)),r.sb(1,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,k)),r.sb(3,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,E)),r.sb(5,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,T)),r.sb(7,16384,null,0,s.r,[r.P,r.L,s.p],null,null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,!0),t(e,3,0,n.isTemplateRef(n.nzContent)),t(e,5,0,n.isNonEmptyString(n.nzContent))},null)}function P(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzFooter)},null)}function I(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzFooter)})}function M(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"button",[["nz-button",""]],[[8,"hidden",0],[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onButtonClick(t.context.$implicit)&&r),r},p.c,p.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(2,1818624,null,1,d.a,[r.k,r.h,r.D,l.b,c.y,r.y,[2,c.i],[2,f.a]],{nzGhost:[0,"nzGhost"],nzLoading:[1,"nzLoading"],nzType:[2,"nzType"],nzShape:[3,"nzShape"],nzSize:[4,"nzSize"]},null),r.Lb(603979776,4,{listOfIconElement:1}),(t()(),r.Nb(4,0,["",""]))],function(t,e){t(e,2,0,e.context.$implicit.ghost,e.component.getButtonCallableProp(e.context.$implicit,"loading"),e.context.$implicit.type,e.context.$implicit.shape,e.context.$implicit.size)},function(t,e){var n=e.component;t(e,0,0,!n.getButtonCallableProp(e.context.$implicit,"show"),n.getButtonCallableProp(e.context.$implicit,"disabled"),r.Fb(e,2).nzWave),t(e,4,0,e.context.$implicit.label)})}function D(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,M)),r.sb(2,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,e.component.nzFooter)},null)}function A(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"button",[["nz-button",""]],[[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClickOkCancel("cancel")&&r),r},p.c,p.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(2,1818624,null,1,d.a,[r.k,r.h,r.D,l.b,c.y,r.y,[2,c.i],[2,f.a]],{nzLoading:[0,"nzLoading"]},null),r.Lb(603979776,5,{listOfIconElement:1}),(t()(),r.Nb(4,0,[" "," "]))],function(t,e){t(e,2,0,e.component.nzCancelLoading)},function(t,e){var n=e.component;t(e,0,0,n.nzCancelDisabled,r.Fb(e,2).nzWave),t(e,4,0,n.cancelText)})}function N(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"button",[["nz-button",""]],[[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClickOkCancel("ok")&&r),r},p.c,p.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(2,1818624,null,1,d.a,[r.k,r.h,r.D,l.b,c.y,r.y,[2,c.i],[2,f.a]],{nzLoading:[0,"nzLoading"],nzType:[1,"nzType"]},null),r.Lb(603979776,6,{listOfIconElement:1}),(t()(),r.Nb(4,0,[" "," "]))],function(t,e){var n=e.component;t(e,2,0,n.nzOkLoading,n.nzOkType)},function(t,e){var n=e.component;t(e,0,0,n.nzOkDisabled,r.Fb(e,2).nzWave),t(e,4,0,n.okText)})}function R(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,A)),r.sb(2,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,N)),r.sb(4,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,null!==n.nzCancelText),t(e,4,0,null!==n.nzOkText)},null)}function F(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,10,"div",[["class","ant-modal-footer"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,9,null,null,null,null,null,null,null)),r.sb(2,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,P)),r.sb(4,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,I)),r.sb(6,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,D)),r.sb(8,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,R)),r.sb(10,16384,null,0,s.r,[r.P,r.L,s.p],null,null)],function(t,e){var n=e.component;t(e,2,0,!0),t(e,4,0,n.isTemplateRef(n.nzFooter)),t(e,6,0,n.isNonEmptyString(n.nzFooter)),t(e,8,0,n.isModalButtons(n.nzFooter))},null)}function $(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,O)),r.sb(1,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(2,0,null,null,5,"div",[["class","ant-modal-body"]],null,null,null,null,null)),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.tb(5,16777216,[[2,3],["bodyContainer",1]],null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,z)),r.sb(7,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,F)),r.sb(9,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,n.nzTitle),t(e,4,0,n.nzBodyStyle),t(e,7,0,!n.isComponent(n.nzContent)),t(e,9,0,null!==n.nzFooter)},null)}function L(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzTitle)},null)}function j(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function B(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzContent)},null)}function V(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"div",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzContent)})}function W(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,null,null,null,null,null,null,null)),r.sb(1,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,r.Fb(e.parent.parent.parent,4))},null)}function U(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,null,null,null,null,null,null,null)),r.sb(1,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,B)),r.sb(3,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,V)),r.sb(5,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,W)),r.sb(7,16384,null,0,s.r,[r.P,r.L,s.p],null,null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,!0),t(e,3,0,n.isTemplateRef(n.nzContent)),t(e,5,0,n.isNonEmptyString(n.nzContent))},null)}function H(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"button",[["nz-button",""]],[[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClickOkCancel("cancel")&&r),r},p.c,p.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(2,1818624,null,1,d.a,[r.k,r.h,r.D,l.b,c.y,r.y,[2,c.i],[2,f.a]],{nzLoading:[0,"nzLoading"]},null),r.Lb(603979776,7,{listOfIconElement:1}),(t()(),r.Nb(4,0,[" "," "]))],function(t,e){t(e,2,0,e.component.nzCancelLoading)},function(t,e){var n=e.component;t(e,0,0,n.nzCancelDisabled,r.Fb(e,2).nzWave),t(e,4,0,n.cancelText)})}function G(t){return r.Pb(0,[(t()(),r.tb(0,0,[[3,0]],null,4,"button",[["nz-button",""]],[[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClickOkCancel("ok")&&r),r},p.c,p.a)),r.Kb(512,null,c.y,c.y,[r.E]),r.sb(2,1818624,[["autoFocusButtonOk",4]],1,d.a,[r.k,r.h,r.D,l.b,c.y,r.y,[2,c.i],[2,f.a]],{nzLoading:[0,"nzLoading"],nzType:[1,"nzType"]},null),r.Lb(603979776,8,{listOfIconElement:1}),(t()(),r.Nb(4,0,[" "," "]))],function(t,e){var n=e.component;t(e,2,0,n.nzOkLoading,n.nzOkType)},function(t,e){var n=e.component;t(e,0,0,n.nzOkDisabled,r.Fb(e,2).nzWave),t(e,4,0,n.okText)})}function q(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,22,"div",[["class","ant-modal-body"]],null,null,null,null,null)),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.tb(3,0,null,null,19,"div",[["class","ant-modal-confirm-body-wrapper"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,13,"div",[["class","ant-modal-confirm-body"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(6,2834432,null,0,h.a,[h.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null),(t()(),r.tb(7,0,null,null,6,"span",[["class","ant-modal-confirm-title"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,5,null,null,null,null,null,null,null)),r.sb(9,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,L)),r.sb(11,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,j)),r.sb(13,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.tb(14,0,null,null,3,"div",[["class","ant-modal-confirm-content"]],null,null,null,null,null)),(t()(),r.tb(15,16777216,[[2,3],["bodyContainer",1]],null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,U)),r.sb(17,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(18,0,null,null,4,"div",[["class","ant-modal-confirm-btns"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,H)),r.sb(20,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,G)),r.sb(22,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzBodyStyle),t(e,6,0,n.nzIconType),t(e,9,0,!0),t(e,11,0,n.isTemplateRef(n.nzTitle)),t(e,13,0,n.isNonEmptyString(n.nzTitle)),t(e,17,0,!n.isComponent(n.nzContent)),t(e,20,0,null!==n.nzCancelText),t(e,22,0,null!==n.nzOkText)},null)}function K(t){return r.Pb(0,[r.Hb(0,i.a,[]),r.Lb(402653184,1,{modalContainer:0}),r.Lb(671088640,2,{bodyContainer:0}),r.Lb(671088640,3,{autoFocusButtonOk:0}),(t()(),r.ib(0,[["tplOriginContent",2]],null,0,null,b)),(t()(),r.tb(5,0,null,null,15,"div",[],[[24,"@.disabled",0]],null,null,null,null)),r.sb(6,4734976,null,0,c.q,[r.k,r.D,[2,f.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(8,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(9,0,null,null,11,"div",[["role","dialog"],["tabindex","-1"]],[[8,"className",0],[4,"zIndex",null],[4,"visibility",null]],[[null,"click"],[null,"mouseup"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onClickMask(n)&&r),"mouseup"===e&&(r=!1!==i.onDialogUp()&&r),r},null,null)),(t()(),r.tb(10,0,[[1,0],["modalContainer",1]],null,10,"div",[["role","document"]],[[4,"width",null],[4,"transform-origin",null]],[[null,"mousedown"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==t.component.onMaskDialogDown()&&r),r},null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(12,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(14,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),r.Jb(15,1),(t()(),r.tb(16,0,null,null,4,"div",[["class","ant-modal-content"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(18,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,x)),r.sb(20,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,[["tplContentDefault",2]],null,0,null,$)),(t()(),r.ib(0,[["tplContentConfirm",2]],null,0,null,q))],function(t,e){var n=e.component;t(e,6,0,n.nzNoAnimation),t(e,8,0,n.mask),t(e,12,0,r.xb(1,"ant-modal ",n.nzClassName,""),n.modalAnimationClassMap),t(e,14,0,n.nzStyle),t(e,18,0,n.nzClosable),t(e,20,0,!n.hidden)},function(t,e){var n=e.component;t(e,5,0,r.Fb(e,6).nzNoAnimation),t(e,9,0,r.xb(1,"ant-modal-wrap ",n.nzWrapClassName,""),n.nzZIndex,n.hidden?"hidden":null);var i=r.Ob(e,10,0,t(e,15,0,r.Fb(e,0),n.nzWidth));t(e,10,0,i,n.transformOrigin)})}function Y(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,2,"nz-modal",[],null,null,null,K,m)),r.sb(1,4964352,null,1,i.c,[o.d,o.g,u.d,r.j,r.k,r.P,i.d,g.b,r.h,[2,i.b],s.d],null,null),r.Lb(603979776,1,{modalFooter:0})],function(t,e){t(e,1,0)},null)}var X=r.pb("nz-modal",i.c,Y,{nzVisible:"nzVisible",nzClosable:"nzClosable",nzOkLoading:"nzOkLoading",nzOkDisabled:"nzOkDisabled",nzCancelDisabled:"nzCancelDisabled",nzCancelLoading:"nzCancelLoading",nzKeyboard:"nzKeyboard",nzNoAnimation:"nzNoAnimation",nzMask:"nzMask",nzMaskClosable:"nzMaskClosable",nzContent:"nzContent",nzComponentParams:"nzComponentParams",nzFooter:"nzFooter",nzGetContainer:"nzGetContainer",nzZIndex:"nzZIndex",nzWidth:"nzWidth",nzWrapClassName:"nzWrapClassName",nzClassName:"nzClassName",nzStyle:"nzStyle",nzTitle:"nzTitle",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzOkText:"nzOkText",nzCancelText:"nzCancelText",nzOkType:"nzOkType",nzIconType:"nzIconType",nzModalType:"nzModalType",nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel"},{nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel",nzAfterOpen:"nzAfterOpen",nzAfterClose:"nzAfterClose",nzVisibleChange:"nzVisibleChange"},["*"])},EdHE:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("0z0v");e.single=function(t){return function(e){return e.lift(new o(t,e))}};var o=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.predicate,this.source))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return r(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},e}(i.Subscriber)},"EdU/":function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return b}),n.d(e,"b",function(){return v});var r=n("8Y7J"),i=n("phDe"),s=n("SVse"),o=(n("QQfA"),n("IP0z"),n("s7LF"),n("POq0"),n("zMNK"),n("/HVE"),n("hOhj"),n("5VGP")),l=(n("66zS"),n("GaVp"),n("/L1H"),n("omvX")),a=(n("Irb3"),r.rb({encapsulation:2,styles:["\n      nz-dropdown-context {\n        display: block;\n      }\n\n      .ant-dropdown {\n        top: 100%;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "],data:{animation:[{type:7,name:"slideMotion",definitions:[{type:0,name:"bottom",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"},offset:null},options:void 0},{type:0,name:"top",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 100%"},offset:null},options:void 0},{type:1,expr:"void => bottom",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"bottom => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null},{type:1,expr:"void => top",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"top => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null}],options:{}}]}}));function u(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function c(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-dropdown ant-dropdown-placement-bottomLeft"]],[[24,"@slideMotion",0]],[[null,"@slideMotion.done"]],function(t,e,n){var r=!0;return"@slideMotion.done"===e&&(r=!1!==t.component.afterAnimation()&&r),r},null,null)),(t()(),r.ib(16777216,null,null,1,null,u)),r.sb(2,540672,null,0,s.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.templateRef)},function(t,e){t(e,0,0,e.component.dropDownPosition)})}function h(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,c)),r.sb(1,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,1,0,e.component.open)},null)}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"nz-dropdown-context",[],null,null,null,h,a)),r.Kb(4608,null,i.i,i.i,[]),r.sb(2,180224,null,0,i.f,[r.h],null,null)],null,null)}var p=r.pb("nz-dropdown-context",i.f,d,{},{},[]),f=r.rb({encapsulation:2,styles:["\n      :root .ant-dropdown.nz-dropdown {\n        top: 0;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "],data:{animation:[{type:7,name:"slideMotion",definitions:[{type:0,name:"bottom",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"},offset:null},options:void 0},{type:0,name:"top",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 100%"},offset:null},options:void 0},{type:1,expr:"void => bottom",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"bottom => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null},{type:1,expr:"void => top",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"top => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null}],options:{}}]}});function g(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,"div",[],[[24,"@slideMotion",0],[24,"@.disabled",0]],[[null,"mouseenter"],[null,"mouseleave"]],function(t,e,n){var r=!0,i=t.component;return"mouseenter"===e&&(r=!1!==i.setVisibleStateWhen(!0,"hover")&&r),"mouseleave"===e&&(r=!1!==i.setVisibleStateWhen(!1,"hover")&&r),r},null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),r.sb(5,4734976,null,0,o.q,[r.k,r.D,[2,l.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(6,0,null,null,1,"div",[],[[2,"ant-table-filter-dropdown",null]],null,null,null,null)),r.Eb(null,0)],function(t,e){var n=e.component;t(e,2,0,r.xb(1,"","ant-dropdown nz-dropdown ant-dropdown-placement-"+n.nzPlacement,""),n.nzOverlayClassName),t(e,4,0,n.nzOverlayStyle),t(e,5,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation)},function(t,e){var n=e.component;t(e,0,0,n.dropDownPosition,r.Fb(e,5).nzNoAnimation),t(e,6,0,n.nzTableFilter)})}function m(t){return r.Pb(0,[(t()(),r.ib(16777216,[[1,2]],null,1,null,g)),r.sb(1,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.open)},null)}function b(t){return r.Pb(2,[r.Lb(402653184,1,{templateRef:0}),(t()(),r.ib(0,[[1,2]],null,0,null,m))],null,null)}function y(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,3,"nz-dropdown-menu",[],null,null,null,b,f)),r.Kb(5120,null,o.o,i.j,[[4,r.q]]),r.Kb(512,null,i.i,i.i,[]),r.sb(3,1097728,null,0,i.g,[r.h,r.k,r.D,r.P,i.i,[2,o.q]],null,null)],null,null)}var v=r.pb("nz-dropdown-menu",i.g,y,{},{},["*"])},Ev1t:function(t,e,n){var r=n("ZmXw");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},Ez21:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("cp0P"),i=n("yrbL");class s{constructor(t,e){this.homeServe=t,this.singerServe=e}resolve(){return Object(r.a)([this.homeServe.getBanners(),this.homeServe.getHotTags(),this.homeServe.getPerosonalSheetList(),this.singerServe.getEnterSinger()]).pipe(Object(i.first)())}}},EzyC:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("1pIY");e.sampleTime=function(t,e){return void 0===e&&(e=s.async),function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.period,this.scheduler))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.period=n,i.scheduler=r,i.hasValue=!1,i.add(r.schedule(a,n,{subscriber:i,period:n})),i}return r(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(i.Subscriber);function a(t){var e=t.period;t.subscriber.notifyNext(),this.schedule(t,e)}},F1k1:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("Y4kR"),o=n("cSoz");e.retryWhen=function(t){return function(e){return e.lift(new l(t,e))}};var l=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier,this.source))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,s=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{n=new i.Subject;try{r=(0,this.notifier)(n)}catch(l){return t.prototype.error.call(this,l)}s=o.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=s,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var s=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=s,this.source.subscribe(this)},e}(s.OuterSubscriber)},F809:function(t,e,n){var r=n("yNUO"),i=n("sunR"),s=n("DT56");t.exports=function(t,e){var n=r(t),o=r(e),l=s(n,o),a=Math.abs(i(n,o));return n.setMonth(n.getMonth()-l*a),l*(a-(s(n,o)===-l))}},FCKb:function(t,e,n){var r=n("mrSG").__extends,i=n("nzqU"),s=n("mbIT"),o=n("Y4kR"),l=n("cSoz"),a=n("zzsZ"),u={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return i.isScheduler(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),a.fromArray(t,r).lift(new c(n))};var c=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},t}();e.CombineLatestOperator=c;var h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return r(e,t),e.prototype._next=function(t){this.values.push(u),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(l.subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var s=this.values,o=this.toRespond?s[n]===u?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(o.OuterSubscriber);e.CombineLatestSubscriber=h},FF6D:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setMilliseconds(999),e}},FPpa:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l});var r=n("8Y7J"),i=n("5VGP"),s=n("W4B1");class o extends s.a{constructor(t,e){super(t,e),this.noAnimation=e,this._prefix="ant-popover-placement"}isContentEmpty(){const t=!(this.nzTitle instanceof r.L||""!==this.nzTitle&&Object(i.T)(this.nzTitle)),e=!(this.nzContent instanceof r.L||""!==this.nzContent&&Object(i.T)(this.nzContent));return t&&e}}class l{}},FWf1:function(t,e,n){var r=n("mrSG").__extends,i=n("pshJ"),s=n("GiSu"),o=n("zB/H"),l=n("p//D"),a=n("n3uD"),u=n("MkmW"),c=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!n){o.destination=s.empty;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new h(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new h(o,n,r,i)}return o}return r(e,t),e.prototype[l.rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(o.Subscription);e.Subscriber=c;var h=function(t){function e(e,n,r,o){var l,a=t.call(this)||this;a._parentSubscriber=e;var u=a;return i.isFunction(n)?l=n:n&&(l=n.next,r=n.error,o=n.complete,n!==s.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=l,a._error=r,a._complete=o,a}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.config.useDeprecatedSynchronousErrorHandling)throw n;u.hostReportError(n)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(u.hostReportError(r),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(c);e.SafeSubscriber=h},FYWq:function(t,e,n){"use strict";var r=n("FCKb");e.combineAll=function(t){return function(e){return e.lift(new r.CombineLatestOperator(t))}}},FYuM:function(t,e,n){var r=n("yNUO"),i=n("OBTA");t.exports=function(t,e){var n=r(t),s=Number(e)-(Math.floor(n.getMonth()/3)+1);return i(n,n.getMonth()+3*s)}},Fa1C:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("Y4kR"),o=n("cSoz");e.window=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new a(t),r=e.subscribe(n);return r.closed||n.add(o.subscribeToResult(n,this.windowBoundaries)),r},t}(),a=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new i.Subject,e.next(n.window),n}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new i.Subject;e.next(n)},e}(s.OuterSubscriber)},Fh4B:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.distinct=function(t,e){return function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.flushes))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(s.subscribeToResult(i,r)),i}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(r){return void n.error(r)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(i.OuterSubscriber);e.DistinctSubscriber=l},FiyT:function(t,e,n){var r=n("mrSG").__extends;e.SubjectSubscription=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(n("zB/H").Subscription)},"G6+r":function(t,e,n){var r=n("x84W");t.exports=function(t,e,n){var i=r(t,n),s=r(e,n);return i.getTime()===s.getTime()}},G7d8:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},GH6G:function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n("8Y7J"),i=n("d5e7"),s=n("ROAe"),o=n("Bf1V"),l=n("iInd"),a=n("mKz/"),u=n("ssPz"),c=n("XPT/"),h=n("1w6q"),d=n("JXeA"),p=n("DQLy"),f=r.rb({encapsulation:0,styles:[".record-detail[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%] { padding: 40px; }"],data:{}});function g(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,3,"div",[["class","record-detail wrap feature-wrap"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,2,"div",[["class","page-wrap"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"app-records",[],null,[[null,"onChangeType"],[null,"onAddSong"],[null,"onLikeSong"],[null,"onShareSong"]],function(t,e,n){var r=!0,i=t.component;return"onChangeType"===e&&(r=!1!==i.onChangeType(n)&&r),"onAddSong"===e&&(r=!1!==i.onAddSong(n)&&r),"onLikeSong"===e&&(r=!1!==i.onLikeSong(n)&&r),"onShareSong"===e&&(r=!1!==i.onShareSong(n)&&r),r},i.b,i.a)),r.sb(3,114688,null,0,s.a,[],{records:[0,"records"],recordType:[1,"recordType"],listenSongs:[2,"listenSongs"],currentIndex:[3,"currentIndex"]},{onChangeType:"onChangeType",onAddSong:"onAddSong",onLikeSong:"onLikeSong",onShareSong:"onShareSong"})],function(t,e){var n=e.component;t(e,3,0,n.records,n.recordType,n.user.listenSongs,n.currentIndex)},null)}function m(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-record-detail",[],null,null,null,g,f)),r.sb(1,245760,null,0,o.a,[l.a,a.a,u.a,c.a,h.a,u.a,d.g,p.m,r.h],null,null)],function(t,e){t(e,1,0)},null)}var b=r.pb("app-record-detail",o.a,m,{},{},[])},GLf8:function(t,e,n){var r=n("crfB");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},GMZp:function(t,e,n){"use strict";e.isObject=function(t){return null!==t&&"object"==typeof t}},GS7A:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return s}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return c}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return o}),n.d(e,"d",function(){return p}),n.d(e,"k",function(){return f}),n.d(e,"l",function(){return g});class r{}class i{}const s="*";function o(t,e){return{type:7,name:t,definitions:e,options:{}}}function l(t,e=null){return{type:4,styles:e,timings:t}}function a(t,e=null){return{type:2,steps:t,options:e}}function u(t){return{type:6,styles:t,offset:null}}function c(t,e,n){return{type:0,name:t,styles:e,options:n}}function h(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function d(t){Promise.resolve(null).then(t)}class p{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){d(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){}setPosition(t){}getPosition(){return 0}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class f{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?d(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){let t=0;return this.players.forEach(e=>{const n=e.getPosition();t=Math.min(n,t)}),t}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}const g="!"},GaVp:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c});var r=n("mrSG"),i=n("5VGP"),s=n("XNiG"),o=n("JX91"),l=n("1G5W");let a=(()=>{class t{constructor(t,e,n,r,o,l,a,u){this.elementRef=t,this.cdr=e,this.renderer=n,this.contentObserver=r,this.nzUpdateHostClassService=o,this.ngZone=l,this.waveConfig=a,this.animationType=u,this.el=this.elementRef.nativeElement,this.iconOnly=!1,this.destroy$=new s.a,this.nzWave=new i.z(this.ngZone,this.elementRef,this.waveConfig,this.animationType),this.nzBlock=!1,this.nzGhost=!1,this.nzSearch=!1,this.nzLoading=!1,this.nzType="default",this.nzShape=null,this.nzSize="default",this.renderer.addClass(t.nativeElement,"ant-btn")}setClassMap(){const t={large:"lg",small:"sm"};this.nzUpdateHostClassService.updateHostClass(this.el,{[`ant-btn-${this.nzType}`]:this.nzType,[`ant-btn-${this.nzShape}`]:this.nzShape,[`ant-btn-${t[this.nzSize]}`]:t[this.nzSize],"ant-btn-loading":this.nzLoading,"ant-btn-icon-only":this.iconOnly,"ant-btn-background-ghost":this.nzGhost,"ant-btn-block":this.nzBlock,"ant-input-search-button":this.nzSearch})}updateIconDisplay(t){this.iconElement&&this.renderer.setStyle(this.iconElement,"display",t?"none":"inline-block")}checkContent(){const t=this.listOfIconElement&&this.listOfIconElement.length;t&&this.moveIcon(),this.renderer.removeStyle(this.contentElement.nativeElement,"display"),Object(i.P)(this.contentElement.nativeElement)?(this.renderer.setStyle(this.contentElement.nativeElement,"display","none"),this.iconOnly=!!t):(this.renderer.removeStyle(this.contentElement.nativeElement,"display"),this.iconOnly=!1),this.setClassMap(),this.updateIconDisplay(this.nzLoading),this.cdr.destroyed||this.cdr.detectChanges()}moveIcon(){if(this.listOfIconElement&&this.listOfIconElement.length){const t=Object(i.H)(this.contentElement.nativeElement),e=Object(i.I)(this.contentElement.nativeElement);t&&t===this.listOfIconElement.first.nativeElement?(this.renderer.insertBefore(this.el,t,this.contentElement.nativeElement),this.iconElement=t):e&&e===this.listOfIconElement.last.nativeElement&&this.renderer.appendChild(this.el,e)}}ngAfterContentInit(){this.contentObserver.observe(this.contentElement).pipe(Object(o.a)(!0),Object(l.a)(this.destroy$)).subscribe(()=>{Promise.resolve().then(()=>this.checkContent())})}ngOnInit(){this.setClassMap(),this.nzWave.ngOnInit()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.nzWave.ngOnDestroy()}ngOnChanges(t){(t.nzBlock||t.nzGhost||t.nzSearch||t.nzType||t.nzShape||t.nzSize||t.nzLoading)&&this.setClassMap(),t.nzLoading&&this.updateIconDisplay(this.nzLoading),t.nzType&&"link"===t.nzType.currentValue?this.nzWave.disable():this.nzWave.enable()}}return Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzBlock",void 0),Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzGhost",void 0),Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSearch",void 0),Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzLoading",void 0),t})();class u{constructor(t,e){this.nzUpdateHostClassService=t,this.elementRef=e}get nzSize(){return this._size}set nzSize(t){this._size=t,this.setClassMap()}setClassMap(){this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{"ant-btn-group":!0,"ant-btn-group-lg":"large"===this.nzSize,"ant-btn-group-sm":"small"===this.nzSize})}ngOnInit(){this.setClassMap()}}class c{}},GiSu:function(t,e,n){"use strict";var r=n("n3uD"),i=n("MkmW");e.empty={closed:!0,next:function(t){},error:function(t){if(r.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},GoQk:function(t,e,n){var r=n("yNUO");t.exports=function(){var t=Array.prototype.slice.call(arguments).map(function(t){return r(t)}),e=Math.min.apply(null,t);return new Date(e)}},GvSz:function(t,e,n){"use strict";var r=n("+Zhm"),i=n("7K7o");e.publishReplay=function(t,e,n,s){n&&"function"!=typeof n&&(s=n);var o="function"==typeof n?n:void 0,l=new r.ReplaySubject(t,e,s);return function(t){return i.multicast(function(){return l},o)(t)}}},GyhO:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("LRne"),i=n("0EUg");function s(...t){return Object(i.a)()(Object(r.a)(...t))}},H2PQ:function(t,e,n){var r=n("mrSG").__extends;e.QueueScheduler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(n("NTcF").AsyncScheduler)},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),s=n("gRHU"),o=n("kJWO"),l=n("mCNh"),a=n("2fFW");n.d(e,"a",function(){return u});let u=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,l=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(s.a)}(t,e,n);if(l.add(o?o.call(l,this.source):this.source||a.a.useDeprecatedSynchronousErrorHandling&&!l.syncErrorThrowable?this._subscribe(l):this._trySubscribe(l)),a.a.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable&&(l.syncErrorThrowable=!1,l.syncErrorThrown))throw l.syncErrorValue;return l}_trySubscribe(t){try{return this._subscribe(t)}catch(e){a.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=c(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.a](){return this}pipe(...t){return 0===t.length?this:Object(l.b)(t)(this)}toPromise(t){return new(t=c(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function c(t){if(t||(t=a.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},HMbd:function(t,e,n){var r=n("7B8A");t.exports=function(t,e){var n=Number(e);return r(t,36e5*n)}},HXN9:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("d0bx"));e.generate=i.default;var s={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"};e.presetPrimaryColors=s;var o={};e.presetPalettes=o,Object.keys(s).forEach(function(t){o[t]=i.default(s[t]),o[t].primary=o[t][6]}),e.red=o.red,e.volcano=o.volcano,e.gold=o.gold,e.yellow=o.yellow,e.lime=o.lime,e.green=o.green,e.cyan=o.cyan,e.blue=o.blue,e.geekblue=o.geekblue,e.purple=o.purple,e.magenta=o.magenta,e.grey=o.grey},HZF8:function(t,e,n){"use strict";var r=n("zfKp");e.isInteropObservable=function(t){return t&&"function"==typeof t[r.observable]}},HhpN:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("5VGP"),n("mrSG"),n("XNiG"),n("LRne"),n("1G5W");class r{}},HmDv:function(t,e,n){"use strict";var r=n("0z0v"),i=n("4ik+"),s=n("76/Q"),o=n("W96K"),l=n("1Z+e"),a=n("yoF8");e.last=function(t,e){var n=arguments.length>=2;return function(u){return u.pipe(t?i.filter(function(e,n){return t(e,n,u)}):a.identity,s.takeLast(1),n?l.defaultIfEmpty(e):o.throwIfEmpty(function(){return new r.EmptyError}))}}},HzbE:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.buffer=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.closingNotifier))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(s.subscribeToResult(r,n)),r}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var s=this.buffer;this.buffer=[],this.destination.next(s)},e}(i.OuterSubscriber)},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},I65S:function(t,e,n){"use strict";var r=n("nzqU"),i=n("zzsZ"),s=n("aJGj"),o=n("yFcd");e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(r.isScheduler(n)?t.pop():n=void 0,t.length){case 0:return s.empty(n);case 1:return n?i.fromArray(t,n):o.scalar(t[0]);default:return i.fromArray(t,n)}}},IEvo:function(t,e,n){var r=n("mrSG").__extends;e.QueueAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(n("2tF/").AsyncAction)},IKMM:function(t,e,n){"use strict";var r=n("I65S"),i=n("c4Wt");e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.concatAll()(r.of.apply(void 0,t))}},IKal:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}r.prototype=Object.create(Error.prototype),e.ArgumentOutOfRangeError=r},ILER:function(t,e,n){var r=n("CXhC");t.exports=function(t){var e=new Date;return e.setDate(e.getDate()+1),r(t).getTime()===r(e).getTime()}},IP0z:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return l});var r=n("SVse"),i=n("8Y7J");const s=new i.p("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(i.W)(r.d)}});let o=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new i.m,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(s,8))},token:t,providedIn:"root"}),t})();class l{}},IW2O:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.takeUntil=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new l(t),r=s.subscribeToResult(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.seenValue=!1,n}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(i.OuterSubscriber)},IYs4:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("8Y7J"),i=n("5VGP"),s=n("xgIS"),o=n("gcYM"),l=n("/uUt");class a{constructor(t,e,n,i){this.scrollSrv=t,this.doc=e,this.platform=n,this.cd=i,this.scroll$=null,this.target=null,this.visible=!1,this._visibilityHeight=400,this.nzClick=new r.m}set nzVisibilityHeight(t){this._visibilityHeight=Object(i.ob)(t,400)}get nzVisibilityHeight(){return this._visibilityHeight}set nzTarget(t){this.target="string"==typeof t?this.doc.querySelector(t):t,this.registerScrollEvent()}ngOnInit(){this.scroll$||this.registerScrollEvent()}clickBackTop(){this.scrollSrv.scrollTo(this.getTarget(),0),this.nzClick.emit(!0)}getTarget(){return this.target||window}handleScroll(){this.visible!==this.scrollSrv.getScroll(this.getTarget())>this.nzVisibilityHeight&&(this.visible=!this.visible,this.cd.markForCheck())}removeListen(){this.scroll$&&this.scroll$.unsubscribe()}registerScrollEvent(){this.platform.isBrowser&&(this.removeListen(),this.handleScroll(),this.scroll$=Object(s.a)(this.getTarget(),"scroll").pipe(Object(o.a)(50),Object(l.a)()).subscribe(()=>this.handleScroll()))}ngOnDestroy(){this.removeListen()}}class u{}},IheW:function(t,e,n){"use strict";n.d(e,"p",function(){return M}),n.d(e,"s",function(){return F}),n.d(e,"t",function(){return $}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return N}),n.d(e,"b",function(){return h}),n.d(e,"g",function(){return c}),n.d(e,"c",function(){return k}),n.d(e,"h",function(){return d}),n.d(e,"a",function(){return T}),n.d(e,"d",function(){return B}),n.d(e,"e",function(){return j}),n.d(e,"o",function(){return L}),n.d(e,"i",function(){return g}),n.d(e,"j",function(){return v}),n.d(e,"f",function(){return _}),n.d(e,"k",function(){return C}),n.d(e,"l",function(){return D}),n.d(e,"n",function(){return I}),n.d(e,"m",function(){return R});var r=n("8Y7J"),i=n("LRne"),s=n("HDdC"),o=n("bOdf"),l=n("pLZG"),a=n("lJxs"),u=n("SVse");class c{}class h{}class d{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof d?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new d;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof d?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;0===(t=t.filter(t=>-1===i.indexOf(t))).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class p{encodeKey(t){return f(t)}encodeValue(t){return f(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function f(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class g{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new p,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,s]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],o=n.get(i)||[];o.push(s),n.set(i,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).join("&")}clone(t){const e=new g({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function m(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function b(t){return"undefined"!=typeof Blob&&t instanceof Blob}function y(t){return"undefined"!=typeof FormData&&t instanceof FormData}class v{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new d),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new g,this.urlWithParams=e}serializeBody(){return null===this.body?null:m(this.body)||b(this.body)||y(this.body)||"string"==typeof this.body?this.body:this.body instanceof g?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body?null:y(this.body)?null:b(this.body)?this.body.type||null:m(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof g?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,o=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,a=t.params||this.params;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),l)),t.setParams&&(a=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),a)),new v(e,n,i,{params:a,headers:l,reportProgress:o,responseType:r,withCredentials:s})}}const _=function(){var t={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return t[t.Sent]="Sent",t[t.UploadProgress]="UploadProgress",t[t.ResponseHeader]="ResponseHeader",t[t.DownloadProgress]="DownloadProgress",t[t.Response]="Response",t[t.User]="User",t}();class w{constructor(t,e=200,n="OK"){this.headers=t.headers||new d,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class x extends w{constructor(t={}){super(t),this.type=_.ResponseHeader}clone(t={}){return new x({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class C extends w{constructor(t={}){super(t),this.type=_.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new C({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class S extends w{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function O(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}class k{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof v)r=t;else{let i=void 0;i=n.headers instanceof d?n.headers:new d(n.headers);let s=void 0;n.params&&(s=n.params instanceof g?n.params:new g({fromObject:n.params})),r=new v(t,e,void 0!==n.body?n.body:null,{headers:i,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const s=Object(i.a)(r).pipe(Object(o.a)(t=>this.handler.handle(t)));if(t instanceof v||"events"===n.observe)return s;const u=s.pipe(Object(l.a)(t=>t instanceof C));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return u.pipe(Object(a.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe(Object(a.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe(Object(a.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe(Object(a.a)(t=>t.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new g).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,O(n,e))}post(t,e,n={}){return this.request("POST",t,O(n,e))}put(t,e,n={}){return this.request("PUT",t,O(n,e))}}class E{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const T=new r.p("HTTP_INTERCEPTORS");class z{intercept(t,e){return e.handle(t)}}const P=/^\)\]\}',?\n/;class I{}class M{constructor(){}build(){return new XMLHttpRequest}}class D{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new s.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const s=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",s=new d(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new x({headers:s,status:e,statusText:r,url:o})},o=()=>{let{headers:r,status:i,statusText:o,url:l}=s(),a=null;204!==i&&(a=void 0===n.response?n.responseText:n.response),0===i&&(i=a?200:0);let u=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof a){const t=a;a=a.replace(P,"");try{a=""!==a?JSON.parse(a):null}catch(c){a=t,u&&(u=!1,a={error:c,text:a})}}u?(e.next(new C({body:a,headers:r,status:i,statusText:o,url:l||void 0})),e.complete()):e.error(new S({error:a,headers:r,status:i,statusText:o,url:l||void 0}))},l=t=>{const{url:r}=s(),i=new S({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let a=!1;const u=r=>{a||(e.next(s()),a=!0);let i={type:_.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},c=t=>{let n={type:_.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",l),t.reportProgress&&(n.addEventListener("progress",u),null!==r&&n.upload&&n.upload.addEventListener("progress",c)),n.send(r),e.next({type:_.Sent}),()=>{n.removeEventListener("error",l),n.removeEventListener("load",o),t.reportProgress&&(n.removeEventListener("progress",u),null!==r&&n.upload&&n.upload.removeEventListener("progress",c)),n.abort()}})}}const A=new r.p("XSRF_COOKIE_NAME"),N=new r.p("XSRF_HEADER_NAME");class R{}class F{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(u.J)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}class ${constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}class L{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(T,[]);this.chain=t.reduceRight((t,e)=>new E(t,e),this.backend)}return this.chain.handle(t)}}class j{static disable(){return{ngModule:j,providers:[{provide:$,useClass:z}]}}static withOptions(t={}){return{ngModule:j,providers:[t.cookieName?{provide:A,useValue:t.cookieName}:[],t.headerName?{provide:N,useValue:t.headerName}:[]]}}}class B{}},IjjT:function(t,e,n){"use strict";let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();n.d(e,"a",function(){return i});class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},IpkJ:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setMilliseconds(0),e}},Irb3:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return h});var r=n("8Y7J"),i=(n("GaVp"),n("SVse")),s=(n("POq0"),n("/HVE")),o=(n("5VGP"),n("66zS")),l=(n("omvX"),r.rb({encapsulation:2,styles:[],data:{}}));function a(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","loading"]],null,null,null,null,null)),r.sb(1,2834432,null,0,o.a,[o.c,r.k,r.D,s.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"loading")},null)}function u(t){return r.Pb(2,[r.Lb(402653184,1,{contentElement:0}),(t()(),r.ib(16777216,null,null,1,null,a)),r.sb(2,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(3,0,[[1,0],["contentElement",1]],null,1,"span",[],null,null,null,null,null)),r.Eb(null,0)],function(t,e){t(e,2,0,e.component.nzLoading)},null)}var c=r.rb({encapsulation:2,styles:[],data:{}});function h(t){return r.Pb(2,[r.Eb(null,0)],null,null)}},IxzM:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getSeconds()}},IzEk:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("4I5i"),s=n("EY2u");function o(t){return e=>0===t?Object(s.b)():e.lift(new l(t))}class l{constructor(t){if(this.total=t,this.total<0)throw new i.a}call(t,e){return e.subscribe(new a(t,this.total))}}class a extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}},J66h:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(t,e){module.exports=e(t)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?fromCharCode(192|e>>>6)+fromCharCode(128|63&e):fromCharCode(224|e>>>12&15)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return fromCharCode(240|e>>>18&7)+fromCharCode(128|e>>>12&63)+fromCharCode(128|e>>>6&63)+fromCharCode(128|63&e)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(t){return t.replace(re_utob,cb_utob)},cb_encode=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),e>=2?"=":b64chars.charAt(n>>>6&63),e>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(t){return global.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t)).toString("base64")}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t)).toString("base64")}:function(t){return btoa(utob(t))},encode=function(t,e){return e?_encode(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):_encode(String(t))},encodeURI=function(t){return encode(t,!0)},re_btou=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),cb_btou=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return fromCharCode(55296+(e>>>10))+fromCharCode(56320+(1023&e));case 3:return fromCharCode((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return fromCharCode((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=function(t){return t.replace(re_btou,cb_btou)},cb_decode=function(t){var e=t.length,n=e%4,r=(e>0?b64tab[t.charAt(0)]<<18:0)|(e>1?b64tab[t.charAt(1)]<<12:0)|(e>2?b64tab[t.charAt(2)]<<6:0)|(e>3?b64tab[t.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(t){return global.atob(t)}:function(t){return t.replace(/\S{1,4}/g,cb_decode)},atob=function(t){return _atob(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(t){return(t.constructor===buffer.constructor?t:buffer.from(t,"base64")).toString()}:function(t){return(t.constructor===buffer.constructor?t:new buffer(t,"base64")).toString()}:function(t){return btou(_atob(t))},decode=function(t){return _decode(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var t=global.Base64;return global.Base64=_Base64,t};if(global.Base64={VERSION:version,atob,btoa,fromBase64:decode,toBase64:encode,utob,encode,encodeURI,btou,decode,noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(t){return encode(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports?module.exports.Base64=global.Base64:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=(function(){return global.Base64}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),{Base64:global.Base64}})},J6Hf:function(t,e,n){var r=n("iWRJ"),i=n("lwZq");t.exports=function(t,e){var n=Number(e);return i(t,r(t)+n)}},JIr8:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("l7GE"),i=n("51Dv"),s=n("ZUHj");function o(t){return function(e){const n=new l(t),r=e.lift(n);return n.caught=r}}class l{constructor(t){this.selector=t}call(t,e){return e.subscribe(new a(t,this.selector,this.caught))}}class a extends r.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new i.a(this,void 0,void 0);this.add(r),Object(s.a)(this,n,void 0,void 0,r)}}}},JK0T:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("QQfA"),n("8Y7J"),n("s7LF"),n("XNiG"),n("VRyK"),n("xgIS"),n("mrSG"),n("dvZr"),n("zMNK"),n("5VGP");class r{}},JQcg:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 1===r(t).getDay()}},JRKe:function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r=n("8Y7J"),i=n("JXeA"),s=n("SVse"),o=(n("QQfA"),n("IP0z"),n("zMNK"),n("/HVE")),l=(n("hOhj"),n("66zS")),a=n("5VGP"),u=r.rb({encapsulation:2,styles:[],data:{animation:[{type:7,name:"moveUpMotion",definitions:[{type:1,expr:"* => enter",animation:[{type:6,styles:{transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0},offset:null},{type:4,styles:{type:6,styles:{transformOrigin:"0 0",transform:"translateY(0%)",opacity:1},offset:null},timings:"0.2s"}],options:null},{type:1,expr:"* => leave",animation:[{type:6,styles:{transformOrigin:"0 0",transform:"translateY(0%)",opacity:1},offset:null},{type:4,styles:{type:6,styles:{transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0},offset:null},timings:"0.2s"}],options:null}],options:{}}]}});function c(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","check-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"check-circle")},null)}function h(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","info-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"info-circle")},null)}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","exclamation-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"exclamation-circle")},null)}function p(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","close-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"close-circle")},null)}function f(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","loading"]],null,null,null,null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"loading")},null)}function g(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(t,e){t(e,1,0,e.component.nzMessage.content)})}function m(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,18,"div",[["class","ant-message-notice"]],[[24,"@moveUpMotion",0]],[[null,"mouseenter"],[null,"mouseleave"]],function(t,e,n){var r=!0,i=t.component;return"mouseenter"===e&&(r=!1!==i.onEnter()&&r),"mouseleave"===e&&(r=!1!==i.onLeave()&&r),r},null,null)),(t()(),r.tb(1,0,null,null,17,"div",[["class","ant-message-notice-content"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,16,"div",[["class","ant-message-custom-content"]],null,null,null,null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(4,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r.tb(5,0,null,null,11,null,null,null,null,null,null,null)),r.sb(6,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,c)),r.sb(8,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,h)),r.sb(10,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,d)),r.sb(12,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,p)),r.sb(14,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,f)),r.sb(16,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,g)),r.sb(18,540672,null,0,a.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,4,0,"ant-message-custom-content","ant-message-"+n.nzMessage.type),t(e,6,0,n.nzMessage.type),t(e,8,0,"success"),t(e,10,0,"info"),t(e,12,0,"warning"),t(e,14,0,"error"),t(e,16,0,"loading"),t(e,18,0,n.nzMessage.content)},function(t,e){t(e,0,0,e.component.nzMessage.state)})}var b=r.rb({encapsulation:2,styles:[],data:{}});function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-message",[],null,null,null,m,u)),r.sb(1,245760,null,0,i.d,[i.e,r.h],{nzMessage:[0,"nzMessage"],nzIndex:[1,"nzIndex"]},null)],function(t,e){t(e,1,0,e.context.$implicit,e.context.index)},null)}function v(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-message"]],[[4,"top",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(2,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.messages)},function(t,e){t(e,0,0,e.component.top)})}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-message-container",[],null,null,null,v,b)),r.sb(1,49152,null,0,i.e,[r.h,[2,i.b],[2,i.a]],null,null)],null,null)}var w=r.pb("nz-message-container",i.e,_,{},{},[])},JX91:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("yCtX"),i=n("XUOw"),s=n("EY2u"),o=n("GyhO"),l=n("z+Ro");function a(...t){return e=>{let n=t[t.length-1];Object(l.a)(n)?t.pop():n=null;const a=t.length;return 1!==a||n?a>0?Object(o.a)(Object(r.a)(t,n),e):Object(o.a)(Object(s.b)(n),e):Object(o.a)(Object(i.a)(t[0]),e)}}},JXeA:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"d",function(){return g}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return m}),n.d(e,"g",function(){return f}),n.d(e,"h",function(){return p});var r=n("QQfA"),i=n("8Y7J"),s=n("XNiG"),o=n("5VGP");let l=0;const a=new Map;class u{constructor(t,e,n,r,i,s=""){this.overlay=t,this.containerClass=e,this.injector=n,this.cfr=r,this.appRef=i,this.name=s,this._container=this.createContainer(),a.set(this.name,this._container)}remove(t){t?this._container.removeMessage(t):this._container.removeMessageAll()}createMessage(t,e){const n=Object.assign({},t,{createdAt:new Date,messageId:this._generateMessageId(),options:e});return this._container.createMessage(n),n}config(t){this._container.setConfig(t)}_generateMessageId(){return`${this.name}-${l++}`}createContainer(){if(a.has(this.name))return a.get(this.name);const t=this.cfr.resolveComponentFactory(this.containerClass).create(this.injector);t.changeDetectorRef.detectChanges(),this.appRef.attachView(t.hostView);const e=this.overlay.create().overlayElement;return e.style.zIndex="1010",e.appendChild(t.hostView.rootNodes[0]),t.instance}}const c=new i.p("NZ_MESSAGE_DEFAULT_CONFIG"),h=new i.p("NZ_MESSAGE_CONFIG");class d{constructor(t,e,n){this.cdr=t,this.messages=[],this.setConfig(Object.assign({},e,n))}setConfig(t){this.config=Object.assign({},this.config,t),this.top=Object(o.nb)(this.config.nzTop),this.cdr.markForCheck()}createMessage(t){this.messages.length>=this.config.nzMaxStack&&this.messages.splice(0,1),t.options=this._mergeMessageOptions(t.options),t.onClose=new s.a,this.messages.push(t),this.cdr.detectChanges()}removeMessage(t,e=!1){this.messages.some((n,r)=>n.messageId===t&&(this.messages.splice(r,1),this.cdr.detectChanges(),n.onClose.next(e),n.onClose.complete(),!0))}removeMessageAll(){this.messages=[],this.cdr.detectChanges()}_mergeMessageOptions(t){return Object.assign({},{nzDuration:this.config.nzDuration,nzAnimate:this.config.nzAnimate,nzPauseOnHover:this.config.nzPauseOnHover},t)}}class p{}let f=(()=>{class t extends u{constructor(t,e,n,r){super(t,d,e,n,r,"message")}success(t,e){return this.createMessage({type:"success",content:t},e)}error(t,e){return this.createMessage({type:"error",content:t},e)}info(t,e){return this.createMessage({type:"info",content:t},e)}warning(t,e){return this.createMessage({type:"warning",content:t},e)}loading(t,e){return this.createMessage({type:"loading",content:t},e)}create(t,e,n){return this.createMessage({type:t,content:e},n)}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(r.d),Object(i.Ub)(i.n),Object(i.Ub)(i.j),Object(i.Ub)(i.g))},token:t,providedIn:p}),t})();class g{constructor(t,e){this._messageContainer=t,this.cdr=e,this._eraseTimer=null}ngOnInit(){this._options=this.nzMessage.options,this._options.nzAnimate&&(this.nzMessage.state="enter"),this._autoErase=this._options.nzDuration>0,this._autoErase&&(this._initErase(),this._startEraseTimeout())}ngOnDestroy(){this._autoErase&&this._clearEraseTimeout()}onEnter(){this._autoErase&&this._options.nzPauseOnHover&&(this._clearEraseTimeout(),this._updateTTL())}onLeave(){this._autoErase&&this._options.nzPauseOnHover&&this._startEraseTimeout()}_destroy(t=!1){this._options.nzAnimate?(this.nzMessage.state="leave",this.cdr.detectChanges(),setTimeout(()=>this._messageContainer.removeMessage(this.nzMessage.messageId,t),200)):this._messageContainer.removeMessage(this.nzMessage.messageId,t)}_initErase(){this._eraseTTL=this._options.nzDuration,this._eraseTimingStart=Date.now()}_updateTTL(){this._autoErase&&(this._eraseTTL-=Date.now()-this._eraseTimingStart)}_startEraseTimeout(){this._eraseTTL>0?(this._clearEraseTimeout(),this._eraseTimer=setTimeout(()=>this._destroy(),this._eraseTTL),this._eraseTimingStart=Date.now()):this._destroy()}_clearEraseTimeout(){null!==this._eraseTimer&&(clearTimeout(this._eraseTimer),this._eraseTimer=null)}}class m{}},JeDe:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("haRT"),s=n("v67d"),o=n("5VGP"),l=n("iInd"),a=n("SVse"),u=n("jvIg"),c=n("Irb3"),h=n("GaVp"),d=n("POq0"),p=n("omvX"),f=n("66zS"),g=n("/HVE"),m=n("Rgb0"),b=n("WmCX"),y=n("DQLy"),v=n("1w6q"),_=n("ssPz"),w=n("JXeA"),x=n("XPT/");n.d(e,"a",function(){return T});var C=r.rb({encapsulation:0,styles:[[".singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]{float:left;max-width:710px}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]{padding:47px 30px 40px 39px}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]{position:relative}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .names[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{float:left;max-width:75%;height:34px;line-height:24px;font-size:24px;color:#333}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .names[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{float:left;max-width:23%;padding-left:10px;font-size:14px;line-height:32px;color:#999;font-weight:400}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .cover-img[_ngcontent-%COMP%]{width:640px}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{position:absolute;bottom:18px;right:20px;display:inline-block;width:76px;height:32px;background:url(iconall.de77152ca400e40498b5.png) no-repeat;cursor:pointer;overflow:hidden;border:none}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .btn-like[_ngcontent-%COMP%]{background-position:0 -502px}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .btn-liked[_ngcontent-%COMP%]{background-position:0 -735px}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .n-artist[_ngcontent-%COMP%]   .btn-liked[_ngcontent-%COMP%]:hover{background-position:0 -781px}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .top-50[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{margin:20px 0}.singer-detail[_ngcontent-%COMP%]   .dt-left[_ngcontent-%COMP%]   .left-wrap[_ngcontent-%COMP%]   .top-50[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{float:left;margin-right:10px}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]{float:right;width:268px}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]{padding:20px 40px 40px 30px}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{height:23px;margin-bottom:20px;border-bottom:1px solid #ccc;color:#333}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:50px;float:left;font-size:12px;margin-right:24px;cursor:pointer}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-of-type(3n){margin-right:0}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:100%;height:50px}.singer-detail[_ngcontent-%COMP%]   .dt-right[_ngcontent-%COMP%]   .right-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:8px;text-align:center}"]],data:{}});function S(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,28,"tr",[],[[2,"ant-table-row",null]],null,null,null,null)),r.sb(1,16384,null,0,i.g,[r.k,r.D,[2,i.a]],null,null),(t()(),r.tb(2,0,null,null,5,"td",[["class","first-col"]],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.f,s.b)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(4,573440,null,0,i.d,[r.k,o.y],null,null),(t()(),r.tb(5,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(6,null,["",""])),(t()(),r.tb(7,0,null,0,0,"i",[["class","ico play-song"],["title","\u64ad\u653e"]],[[2,"current",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSong(t.context.$implicit,!0)&&r),r},null,null)),(t()(),r.tb(8,0,null,null,6,"td",[["class","song-name"]],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.f,s.b)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(10,573440,null,0,i.d,[r.k,o.y],null,null),(t()(),r.tb(11,0,null,0,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,12).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(12,671744,null,0,l.p,[l.n,l.a,a.i],{routerLink:[0,"routerLink"]},null),r.Gb(13,2),(t()(),r.Nb(14,null,["",""])),(t()(),r.tb(15,0,null,null,9,"td",[["class","time-col"]],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.f,s.b)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(17,573440,null,0,i.d,[r.k,o.y],null,null),(t()(),r.tb(18,0,null,0,2,"span",[],null,null,null,null,null)),(t()(),r.Nb(19,null,["",""])),r.Jb(20,1),(t()(),r.tb(21,0,null,0,3,"p",[["class","icons"]],null,null,null,null,null)),(t()(),r.tb(22,0,null,null,0,"i",[["class","ico add"],["title","\u6dfb\u52a0"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSong(t.context.$implicit)&&r),r},null,null)),(t()(),r.tb(23,0,null,null,0,"i",[["class","ico like"],["title","\u6536\u85cf"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLikeSong(t.context.$implicit.id)&&r),r},null,null)),(t()(),r.tb(24,0,null,null,0,"i",[["class","ico share"],["title","\u5206\u4eab"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onShareSong(t.context.$implicit)&&r),r},null,null)),(t()(),r.tb(25,0,null,null,3,"td",[],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.f,s.b)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(27,573440,null,0,i.d,[r.k,o.y],null,null),(t()(),r.Nb(28,0,["",""]))],function(t,e){var n=t(e,13,0,"/songInfo",e.context.$implicit.id);t(e,12,0,n)},function(t,e){var n=e.component;t(e,0,0,r.Fb(e,1).nzTableComponent),t(e,2,0,r.Fb(e,4).nzLeft,r.Fb(e,4).nzRight,r.Fb(e,4).nzAlign),t(e,6,0,e.context.index+1),t(e,7,0,n.currentIndex===e.context.index),t(e,8,0,r.Fb(e,10).nzLeft,r.Fb(e,10).nzRight,r.Fb(e,10).nzAlign),t(e,11,0,r.Fb(e,12).target,r.Fb(e,12).href),t(e,14,0,e.context.$implicit.name),t(e,15,0,r.Fb(e,17).nzLeft,r.Fb(e,17).nzRight,r.Fb(e,17).nzAlign);var i=r.Ob(e,19,0,t(e,20,0,r.Fb(e.parent,0),e.context.$implicit.dt/1e3));t(e,19,0,i),t(e,25,0,r.Fb(e,27).nzLeft,r.Fb(e,27).nzRight,r.Fb(e,27).nzAlign),t(e,28,0,e.context.$implicit.al.name)})}function O(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"li",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).onClick()&&i),i},null,null)),r.sb(1,16384,null,0,l.o,[l.n,l.a,[8,null],r.D,r.k],{routerLink:[0,"routerLink"]},null),r.Gb(2,2),(t()(),r.tb(3,0,null,null,1,"div",[["class","pic"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(5,0,null,null,1,"p",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(6,null,["",""]))],function(t,e){var n=t(e,2,0,"/singer",e.context.$implicit.id);t(e,1,0,n)},function(t,e){t(e,4,0,e.context.$implicit.picUrl,e.context.$implicit.name),t(e,6,0,e.context.$implicit.name)})}function k(t){return r.Pb(0,[r.Hb(0,u.a,[]),(t()(),r.tb(1,0,null,null,66,"div",[["class","singer-detail wrap feature-wrap clearfix"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,58,"div",[["class","dt-left"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,57,"div",[["class","left-wrap"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,8,"div",[["class","n-artist"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,4,"div",[["class","names clearfix"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,1,"h2",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(7,null,["",""])),(t()(),r.tb(8,0,null,null,1,"h3",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(9,null,["",""])),(t()(),r.tb(10,0,null,null,1,"div",[["class","cover-img"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,0,"img",[["class","full-height"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(12,0,null,null,0,"button",[["class","btn btn-like"]],[[2,"btn-liked",null]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onLikeSinger(i.singerDetail.artist.id.toString())&&r),r},null,null)),(t()(),r.tb(13,0,null,null,47,"div",[["class","top-50"]],null,null,null,null,null)),(t()(),r.tb(14,0,null,null,22,"div",[["class","btns clearfix"]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,14,"nz-button-group",[["class","btn"]],null,null,null,c.d,c.b)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(17,114688,null,0,h.b,[o.y,r.k],null,null),(t()(),r.tb(18,0,null,0,6,"button",[["class","play"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onAddSongs(i.singerDetail.hotSongs,!0)&&r),r},c.c,c.a)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(20,1818624,null,1,h.a,[r.k,r.h,r.D,d.b,o.y,r.y,[2,o.i],[2,p.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,1,{listOfIconElement:1}),(t()(),r.tb(22,0,[[1,0]],0,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","play-circle"]],null,null,null,null,null)),r.sb(23,2834432,null,0,f.a,[f.c,r.k,r.D,g.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,0,["\u64ad\u653e "])),(t()(),r.tb(25,0,null,0,4,"button",[["class","add"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onAddSongs(i.singerDetail.hotSongs)&&r),r},c.c,c.a)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(27,1818624,null,1,h.a,[r.k,r.h,r.D,d.b,o.y,r.y,[2,o.i],[2,p.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,2,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["+"])),(t()(),r.tb(30,0,null,null,6,"button",[["class","btn like"],["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onLikeSongs(i.singerDetail.hotSongs)&&r),r},c.c,c.a)),r.Kb(512,null,o.y,o.y,[r.E]),r.sb(32,1818624,null,1,h.a,[r.k,r.h,r.D,d.b,o.y,r.y,[2,o.i],[2,p.a]],null,null),r.Lb(603979776,3,{listOfIconElement:1}),(t()(),r.tb(34,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6536\u85cf"])),(t()(),r.Nb(36,0,[""," "])),(t()(),r.tb(37,0,null,null,23,"nz-table",[["class","wy-table"],["nzBordered",""],["nzNoResult","\u6682\u65e0\u97f3\u4e50\uff01"]],[[2,"ant-table-empty",null]],null,null,s.e,s.a)),r.sb(38,6012928,[["basicTable",4]],2,i.a,[r.D,r.y,r.h,m.d,g.a,r.k],{nzNoResult:[0,"nzNoResult"],nzData:[1,"nzData"],nzFrontPagination:[2,"nzFrontPagination"],nzBordered:[3,"nzBordered"]},null),r.Lb(603979776,4,{listOfNzThComponent:1}),r.Lb(603979776,5,{nzVirtualScrollDirective:0}),(t()(),r.tb(41,0,null,0,15,"thead",[],null,null,null,s.h,s.d)),r.sb(42,5423104,null,1,i.f,[[2,i.a],r.k,r.D],null,null),r.Lb(603979776,6,{listOfNzThComponent:1}),(t()(),r.tb(44,0,null,0,12,"tr",[],[[2,"ant-table-row",null]],null,null,null,null)),r.sb(45,16384,null,0,i.g,[r.k,r.D,[2,i.a]],null,null),(t()(),r.tb(46,0,null,null,1,"th",[["nzWidth","80px"]],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.g,s.c)),r.sb(47,770048,[[6,4],[4,4]],0,i.e,[r.h,m.d],{nzWidth:[0,"nzWidth"]},null),(t()(),r.tb(48,0,null,null,2,"th",[],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.g,s.c)),r.sb(49,770048,[[6,4],[4,4]],0,i.e,[r.h,m.d],null,null),(t()(),r.Nb(-1,0,["\u6807\u9898"])),(t()(),r.tb(51,0,null,null,2,"th",[["nzWidth","120px"]],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.g,s.c)),r.sb(52,770048,[[6,4],[4,4]],0,i.e,[r.h,m.d],{nzWidth:[0,"nzWidth"]},null),(t()(),r.Nb(-1,0,["\u65f6\u957f"])),(t()(),r.tb(54,0,null,null,2,"th",[],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,s.g,s.c)),r.sb(55,770048,[[6,4],[4,4]],0,i.e,[r.h,m.d],null,null),(t()(),r.Nb(-1,0,["\u4e13\u8f91"])),(t()(),r.tb(57,0,null,0,3,"tbody",[],[[2,"ant-table-tbody",null]],null,null,null,null)),r.sb(58,16384,null,0,i.c,[[2,i.a]],null,null),(t()(),r.ib(16777216,null,null,1,null,S)),r.sb(60,278528,null,0,a.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(61,0,null,null,6,"div",[["class","dt-right"]],null,null,null,null,null)),(t()(),r.tb(62,0,null,null,5,"div",[["class","right-wrap"]],null,null,null,null,null)),(t()(),r.tb(63,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u76f8\u4f3c\u6b4c\u624b"])),(t()(),r.tb(65,0,null,null,2,"ul",[["class","clearfix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,O)),r.sb(67,278528,null,0,a.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,17,0),t(e,20,0,"primary"),t(e,23,0,"play-circle","outline"),t(e,27,0,"primary"),t(e,32,0),t(e,38,0,"\u6682\u65e0\u97f3\u4e50\uff01",n.singerDetail.hotSongs,!1,""),t(e,47,0,"80px"),t(e,49,0),t(e,52,0,"120px"),t(e,55,0),t(e,60,0,r.Fb(e,38).data),t(e,67,0,n.simiSingers)},function(t,e){var n=e.component;t(e,7,0,n.singerDetail.artist.name),t(e,9,0,n.singerDetail.artist.alias.join(";")),t(e,11,0,n.singerDetail.artist.picUrl,n.singerDetail.artist.name),t(e,12,0,n.hasLiked),t(e,18,0,r.Fb(e,20).nzWave),t(e,25,0,r.Fb(e,27).nzWave),t(e,30,0,r.Fb(e,32).nzWave),t(e,36,0,n.singerDetail.hotSongs.length),t(e,37,0,0===r.Fb(e,38).data.length),t(e,44,0,r.Fb(e,45).nzTableComponent),t(e,46,1,[r.Fb(e,47).nzShowFilter||r.Fb(e,47).nzShowSort||r.Fb(e,47).nzCustomFilter,r.Fb(e,47).nzShowFilter||r.Fb(e,47).nzCustomFilter,r.Fb(e,47).nzShowSort,r.Fb(e,47).nzShowRowSelection,r.Fb(e,47).nzShowCheckbox,r.Fb(e,47).nzExpand,r.Fb(e,47).nzLeft,r.Fb(e,47).nzRight,"descend"===r.Fb(e,47).nzSort||"ascend"===r.Fb(e,47).nzSort,r.Fb(e,47).nzLeft,r.Fb(e,47).nzRight,r.Fb(e,47).nzAlign]),t(e,48,1,[r.Fb(e,49).nzShowFilter||r.Fb(e,49).nzShowSort||r.Fb(e,49).nzCustomFilter,r.Fb(e,49).nzShowFilter||r.Fb(e,49).nzCustomFilter,r.Fb(e,49).nzShowSort,r.Fb(e,49).nzShowRowSelection,r.Fb(e,49).nzShowCheckbox,r.Fb(e,49).nzExpand,r.Fb(e,49).nzLeft,r.Fb(e,49).nzRight,"descend"===r.Fb(e,49).nzSort||"ascend"===r.Fb(e,49).nzSort,r.Fb(e,49).nzLeft,r.Fb(e,49).nzRight,r.Fb(e,49).nzAlign]),t(e,51,1,[r.Fb(e,52).nzShowFilter||r.Fb(e,52).nzShowSort||r.Fb(e,52).nzCustomFilter,r.Fb(e,52).nzShowFilter||r.Fb(e,52).nzCustomFilter,r.Fb(e,52).nzShowSort,r.Fb(e,52).nzShowRowSelection,r.Fb(e,52).nzShowCheckbox,r.Fb(e,52).nzExpand,r.Fb(e,52).nzLeft,r.Fb(e,52).nzRight,"descend"===r.Fb(e,52).nzSort||"ascend"===r.Fb(e,52).nzSort,r.Fb(e,52).nzLeft,r.Fb(e,52).nzRight,r.Fb(e,52).nzAlign]),t(e,54,1,[r.Fb(e,55).nzShowFilter||r.Fb(e,55).nzShowSort||r.Fb(e,55).nzCustomFilter,r.Fb(e,55).nzShowFilter||r.Fb(e,55).nzCustomFilter,r.Fb(e,55).nzShowSort,r.Fb(e,55).nzShowRowSelection,r.Fb(e,55).nzShowCheckbox,r.Fb(e,55).nzExpand,r.Fb(e,55).nzLeft,r.Fb(e,55).nzRight,"descend"===r.Fb(e,55).nzSort||"ascend"===r.Fb(e,55).nzSort,r.Fb(e,55).nzLeft,r.Fb(e,55).nzRight,r.Fb(e,55).nzAlign]),t(e,57,0,r.Fb(e,58).nzTableComponent)})}function E(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-singer-detail",[],null,null,null,k,C)),r.sb(1,245760,null,0,b.a,[l.a,y.m,v.a,_.a,w.g,x.a],null,null)],function(t,e){t(e,1,0)},null)}var T=r.pb("app-singer-detail",b.a,E,{},{},[])},JtXv:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getFullYear()===i.getFullYear()}},JxoX:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setMinutes(59,59,999),e}},K1fy:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 0===r(t).getDay()}},K2dx:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getTime()>(new Date).getTime()}},KCVW:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"f",function(){return s}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return u});var r=n("8Y7J");function i(t){return null!=t&&"false"!==`${t}`}function s(t,e=0){return o(t)?Number(t):e}function o(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function l(t){return Array.isArray(t)?t:[t]}function a(t){return null==t?"":"string"==typeof t?t:`${t}px`}function u(t){return t instanceof r.k?t.nativeElement:t}},KcsS:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("8Y7J");class i{constructor(){this.onPlay=new r.m}ngOnInit(){}playSheet(t,e){t.stopPropagation(),this.onPlay.emit(e)}get coverImg(){return this.sheet.picUrl||this.sheet.coverImgUrl}}},"Kd/A":function(t,e,n){var r,i,s;!function(o){if("object"==typeof t.exports){var l=o(0,e);void 0!==l&&(t.exports=l)}else i=[n,e],void 0===(s="function"==typeof(r=o)?r.apply(e,i):r)||(t.exports=s)}(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=void 0;e.default=["zh",[["\u4e0a\u5348","\u4e0b\u5348"],n,n],n,[["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"]],n,[["1","2","3","4","5","6","7","8","9","10","11","12"],["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]],n,[["\u516c\u5143\u524d","\u516c\u5143"],n,n],0,[6,0],["y/M/d","y\u5e74M\u6708d\u65e5",n,"y\u5e74M\u6708d\u65e5EEEE"],["ah:mm","ah:mm:ss","z ah:mm:ss","zzzz ah:mm:ss"],["{1} {0}",n,n,n],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"\uffe5","\u4eba\u6c11\u5e01",{AUD:["AU$","$"],CNY:["\uffe5","\xa5"],ILR:["ILS"],JPY:["JP\xa5","\xa5"],KRW:["\uffe6","\u20a9"],TWD:["NT$"],USD:["US$","$"]},function(t){return 5}]})},Kj3r:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("D0XW");function s(t,e=i.a){return n=>n.lift(new o(t,e))}class o{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new l(t,this.dueTime,this.scheduler))}}class l extends r.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(a,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function a(t){t.debouncedNext()}},KoBQ:function(t,e,n){var r=n("mqoM");t.exports=function(t){return r(new Date,t)}},Kpyc:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getFullYear()-i.getFullYear()}},Kqap:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(t,e,n))}}class s{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new o(t,this.accumulator,this.seed,this.hasSeed))}}class o extends r.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},"L/99":function(t,e,n){var r=n("RJeW");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},L486:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setFullYear(i),n}},LBXl:function(t,e,n){"use strict";function r(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}r.prototype=Object.create(Error.prototype),e.UnsubscriptionError=r},LQIB:function(t,e,n){"use strict";function r(t,e,n){return Math.min(Math.max(t,e),n)}function i(t,e,n){return(n-t)/(e-t)*100}function s(t){return Math.floor(Math.random()*(t[1]-t[0]+1)+t[0])}n.d(e,"c",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("z+Ro"),i=n("yCtX"),s=n("EY2u"),o=n("XUOw");function l(...t){let e=t[t.length-1];switch(Object(r.a)(e)?t.pop():e=void 0,t.length){case 0:return Object(s.b)(e);case 1:return e?Object(i.a)(t,e):Object(o.a)(t[0]);default:return Object(i.a)(t,e)}}},LSME:function(t,e,n){var r=n("G6+r");t.exports=function(t,e){return r(new Date,t,e)}},LZbM:function(t,e){t.exports=function(){var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,n,r){var i;return r=r||{},i="string"==typeof t[e]?t[e]:1===n?t[e].one:t[e].other.replace("{{count}}",n),r.addSuffix?r.comparison>0?"in "+i:i+" ago":i}}}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},LxoM:function(t,e,n){var r=n("x84W");t.exports=function(t,e,n){var i=r(t,n),s=r(e,n),o=i.getTime()-6e4*i.getTimezoneOffset(),l=s.getTime()-6e4*s.getTimezoneOffset();return Math.round((o-l)/6048e5)}},MNHD:function(t,e,n){var r=n("CXhC");t.exports=function(t){return r(t).getTime()===r(new Date).getTime()}},Mc5n:function(t,e,n){"use strict";n.d(e,"e",function(){return X}),n.d(e,"b",function(){return Z}),n.d(e,"f",function(){return rt}),n.d(e,"g",function(){return K}),n.d(e,"a",function(){return tt}),n.d(e,"c",function(){return et}),n.d(e,"d",function(){return J}),n.d(e,"h",function(){return Q});var r=n("/HVE"),i=n("KCVW"),s=n("XNiG"),o=n("quSY"),l=n("l5mm"),a=n("eNwd"),u=n("HDdC"),c=n("VRyK"),h=n("JX91"),d=n("1G5W"),p=n("lJxs"),f=n("IzEk"),g=n("vkgz"),m=n("eIep"),b=n("8Y7J"),y=n("SVse"),v=n("hOhj");function _(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function w(t,e){const n=e?"":"none";_(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}function x(t){const e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function C(t,e){return t.getPropertyValue(e).split(",").map(t=>t.trim())}const S=Object(r.e)({passive:!0}),O=Object(r.e)({passive:!1}),k=800;class E{constructor(t,e,n,r,i,l){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=l,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new s.a,this._pointerMoveSubscription=o.a.EMPTY,this._pointerUpSubscription=o.a.EMPTY,this._scrollSubscription=o.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new s.a,this.started=new s.a,this.released=new s.a,this.ended=new s.a,this.entered=new s.a,this.exited=new s.a,this.dropped=new s.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=>{const n=t.target;return!!n&&(n===e||e.contains(n))});!e||this._disabledHandles.has(e)||this.disabled||this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{if(!this._hasStartedDragging){const e=this._getPointerPositionOnPage(t);if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){if(!(Date.now()>=this._dragStartTime+(this.dragStartDelay||0)))return void this._endDragSequence(t);this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const e=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,t.preventDefault(),this._updatePointerDirectionDelta(e),this._dropContainer)this._updateActiveDropContainer(e);else{const t=this._activeTransform;t.x=e.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=e.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:e,event:t,distance:this._getDragDistance(e),delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{this._endDragSequence(t)},this.withRootElement(t),l.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Object(i.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}withHandles(t){return this._handles=t.map(t=>Object(i.e)(t)),this._handles.forEach(t=>w(t,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Object(i.e)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),e.addEventListener("mousedown",this._pointerDown,O),e.addEventListener("touchstart",this._pointerDown,S),this._initialTransform=void 0,this._rootElement=e),this}withBoundaryElement(t){return this._boundaryElement=t?Object(i.e)(t):null,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&I(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._nextSibling=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}enableHandle(t){this._disabledHandles.delete(t)}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}_sortFromLastPointerPosition(){const t=this._pointerPositionAtLastDirectionChange;t&&this._dropContainer&&this._updateActiveDropContainer(t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&I(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&I(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(t))})}),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(t){if(this.started.next({source:this}),M(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions(),this._dropContainer){const t=this._rootElement;this._nextSibling=t.nextSibling;const n=this._preview=this._createPreviewElement(),r=this._placeholder=this._createPlaceholderElement();t.style.display="none",this._document.body.appendChild(t.parentNode.replaceChild(r,t)),(e=this._document,e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.body).appendChild(n),this._dropContainer.start()}var e}_initializeDragSequence(t,e){e.stopPropagation();const n=this.isDragging(),r=M(e),i=!r&&0!==e.button,s=this._rootElement,o=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+k>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),n||i||o)return;this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor,s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this._dropContainer,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.pipe(Object(h.a)(null)).subscribe(()=>{this._scrollPosition=this._viewportRuler.getViewportScrollPosition()}),this._boundaryElement&&(this._boundaryRect=this._boundaryElement.getBoundingClientRect()),this._pickupPositionInElement=this._previewTemplate&&this._previewTemplate.template?{x:0,y:0}:this._getPointerPositionInElement(t,e);const l=this._pickupPositionOnPage=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:l.x,y:l.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):Object(i.e)(this._initialContainer.element).appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),i=this._getDragDistance(this._getPointerPositionOnPage(t)),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:i}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialContainer.getItemIndex(this),container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:i}),e.drop(this,n,this._initialContainer,s,i),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e}){let n=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!n&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(n=this._initialContainer),n&&n!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=n,this._dropContainer.enter(this,t,e),this.entered.next({item:this,container:n,currentIndex:n.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(t,e),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._preview.style.transform=T(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y)}_createPreviewElement(){const t=this._previewTemplate,e=t?t.template:null;let n;if(e){const r=t.viewContainer.createEmbeddedView(e,t.context);n=r.rootNodes[0],this._previewRef=r,n.style.transform=T(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement,e=t.getBoundingClientRect();(n=z(t)).style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=T(e.left,e.top)}return _(n.style,{pointerEvents:"none",position:"fixed",top:"0",left:"0",zIndex:"1000"}),w(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=T(t.left,t.top);const e=function(t){const e=getComputedStyle(t),n=C(e,"transition-property"),r=n.find(t=>"transform"===t||"all"===t);if(!r)return 0;const i=n.indexOf(r),s=C(e,"transition-duration"),o=C(e,"transition-delay");return x(s[i])+x(o[i])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const n=e=>{(!e||e.target===this._preview&&"transform"===e.propertyName)&&(this._preview.removeEventListener("transitionend",n),t(),clearTimeout(r))},r=setTimeout(n,1.5*e);this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),n=this._placeholderRef.rootNodes[0]):n=z(this._rootElement),n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e){const n=this._rootElement.getBoundingClientRect(),r=t===this._rootElement?null:t,i=r?r.getBoundingClientRect():n,s=M(e)?e.targetTouches[0]:e;return{x:i.left-n.left+(s.pageX-i.left-this._scrollPosition.left),y:i.top-n.top+(s.pageY-i.top-this._scrollPosition.top)}}_getPointerPositionOnPage(t){const e=M(t)?t.touches[0]||t.changedTouches[0]:t;return{x:e.pageX-this._scrollPosition.left,y:e.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(t){const e=this._getPointerPositionOnPage(t),n=this.constrainPosition?this.constrainPosition(e,this):e,r=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===r?n.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==r||(n.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,r=this._boundaryRect,i=this._previewRect,s=r.top+e,o=r.bottom-(i.height-e);n.x=P(n.x,r.left+t,r.right-(i.width-t)),n.y=P(n.y,s,o)}return n}_updatePointerDirectionDelta(t){const{x:e,y:n}=t,r=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-i.x),o=Math.abs(n-i.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>i.x?1:-1,i.x=e),o>this._config.pointerDirectionChangeThreshold&&(r.y=n>i.y?1:-1,i.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,w(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,O),t.removeEventListener("touchstart",this._pointerDown,S)}_applyRootElementTransform(t,e){const n=T(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?n+" "+this._initialTransform:n}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}}function T(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function z(t){const e=t.cloneNode(!0),n=e.querySelectorAll("[id]"),r=t.querySelectorAll("canvas");e.removeAttribute("id");for(let i=0;i<n.length;i++)n[i].removeAttribute("id");if(r.length){const t=e.querySelectorAll("canvas");for(let e=0;e<r.length;e++){const n=t[e].getContext("2d");n&&n.drawImage(r[e],0,0)}}return e}function P(t,e,n){return Math.max(e,Math.min(n,t))}function I(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function M(t){return"t"===t.type[0]}function D(t,e){return Math.max(0,Math.min(e,t))}let A=0;const N=.05,R=.05,F=2;class ${constructor(t,e,n,r,u){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=u,this.id=`cdk-drop-list-ref-${A++}`,this.disabled=!1,this.sortingDisabled=!0,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new s.a,this.entered=new s.a,this.exited=new s.a,this.dropped=new s.a,this.sorted=new s.a,this._isDragging=!1,this._itemPositions=[],this._scrollPosition={top:0,left:0},this._viewportScrollPosition={top:0,left:0},this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=o.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new s.a,this._handleScroll=()=>{if(!this.isDragging())return;const t=Object(i.e)(this.element);this._updateAfterScroll(this._scrollPosition,t.scrollTop,t.scrollLeft)},this._startScrollInterval=()=>{this._stopScrolling(),Object(l.a)(0,a.a).pipe(Object(d.a)(this._stopScrollTimers)).subscribe(()=>{const t=this._scrollNode;1===this._verticalScrollDirection?W(t,-F):2===this._verticalScrollDirection&&W(t,F),1===this._horizontalScrollDirection?U(t,-F):2===this._horizontalScrollDirection&&U(t,F)})},e.registerDropContainer(this),this._document=n,this.element=t instanceof b.k?t.nativeElement:t}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._removeListeners(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const t=Object(i.e)(this.element);this.beforeStarted.next(),this._isDragging=!0,this._cacheItems(),this._siblings.forEach(t=>t._startReceiving(this)),this._removeListeners(),this._ngZone?this._ngZone.runOutsideAngular(()=>t.addEventListener("scroll",this._handleScroll)):t.addEventListener("scroll",this._handleScroll),this._viewportRuler&&(this._viewportScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(()=>{if(this.isDragging()){const t=this._viewportRuler.getViewportScrollPosition();this._updateAfterScroll(this._viewportScrollPosition,t.top,t.left,this._clientRect)}}))}enter(t,e,n){this.start();let r=this.sortingDisabled?this._draggables.indexOf(t):-1;-1===r&&(r=this._getItemIndexFromPointerPosition(t,e,n));const s=this._activeDraggables,o=s.indexOf(t),l=t.getPlaceholderElement();let a=s[r];if(a===t&&(a=s[r+1]),o>-1&&s.splice(o,1),a&&!this._dragDropRegistry.isDragging(a)){const e=a.getRootElement();e.parentElement.insertBefore(l,e),s.splice(r,0,t)}else Object(i.e)(this.element).appendChild(l),s.push(t);l.style.transform="",this._cacheItemPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,r,i={x:0,y:0}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n.getItemIndex(t),container:this,previousContainer:n,isPointerOverContainer:r,distance:i})}withItems(t){return this._draggables=t,t.forEach(t=>t._withDropContainer(this)),this.isDragging()&&this._cacheItems(),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}getItemIndex(t){return this._isDragging?j("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=>e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,r){if(this.sortingDisabled||!this._isPointerNearDropContainer(e,n))return;const i=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,n,r);if(-1===s&&i.length>0)return;const o="horizontal"===this._orientation,l=j(i,e=>e.drag===t),a=i[s],u=i[l].clientRect,c=a.clientRect,h=l>s?1:-1;this._previousSwap.drag=a.drag,this._previousSwap.delta=o?r.x:r.y;const d=this._getItemOffsetPx(u,c,h),p=this._getSiblingOffsetPx(l,i,h),f=i.slice();!function(t,e,n){const r=D(l,t.length-1),i=D(n,t.length-1);if(r===i)return;const s=t[r],o=i<r?-1:1;for(let l=r;l!==i;l+=o)t[l]=t[l+o];t[i]=s}(i,0,s),this.sorted.next({previousIndex:l,currentIndex:s,container:this,item:t}),i.forEach((e,n)=>{if(f[n]===e)return;const r=e.drag===t,i=r?d:p,s=r?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=i,o?(s.style.transform=`translate3d(${Math.round(e.offset)}px, 0, 0)`,L(e.clientRect,0,i)):(s.style.transform=`translate3d(0, ${Math.round(e.offset)}px, 0)`,L(e.clientRect,i,0))})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,r=0,s=0;if(this._viewportRuler){const{width:i,height:o}=this._viewportRuler.getViewportSize(),l={width:i,height:o,top:0,right:i,bottom:o,left:0};r=H(l,e),s=G(l,t),n=window}r||s||!this._isPointerNearDropContainer(t,e)||(r=H(this._clientRect,e),s=G(this._clientRect,t),n=Object(i.e)(this.element)),!n||r===this._verticalScrollDirection&&s===this._horizontalScrollDirection&&n===this._scrollNode||(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=n,(r||s)&&n?this._ngZone?this._ngZone.runOutsideAngular(this._startScrollInterval):this._startScrollInterval():this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheOwnPosition(){const t=Object(i.e)(this.element);this._clientRect=V(t),this._scrollPosition={top:t.scrollTop,left:t.scrollLeft}}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const e=this._dragDropRegistry.isDragging(t)?t.getPlaceholderElement():t.getRootElement();return{drag:t,offset:0,clientRect:V(e)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1,this._activeDraggables.forEach(t=>t.getRootElement().style.transform=""),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._removeListeners()}_getSiblingOffsetPx(t,e,n){const r="horizontal"===this._orientation,i=e[t].clientRect,s=e[t+-1*n];let o=i[r?"width":"height"]*n;if(s){const t=r?"left":"top",e=r?"right":"bottom";-1===n?o-=s.clientRect[t]-i[e]:o+=i[t]-s.clientRect[e]}return o}_isPointerNearDropContainer(t,e){const{top:n,right:r,bottom:i,left:s,width:o,height:l}=this._clientRect,a=o*N,u=l*N;return e>n-u&&e<i+u&&t>s-a&&t<r+a}_getItemOffsetPx(t,e,n){const r="horizontal"===this._orientation;let i=r?e.left-t.left:e.top-t.top;return-1===n&&(i+=r?e.width-t.width:e.height-t.height),i}_getItemIndexFromPointerPosition(t,e,n,r){const i="horizontal"===this._orientation;return j(this._itemPositions,({drag:s,clientRect:o},l,a)=>{if(s===t)return a.length<2;if(r){const t=i?r.x:r.y;if(s===this._previousSwap.drag&&t===this._previousSwap.delta)return!1}return i?e>=Math.floor(o.left)&&e<=Math.floor(o.right):n>=Math.floor(o.top)&&n<=Math.floor(o.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheOwnPosition()}_updateAfterScroll(t,e,n,r){const i=t.top-e,s=t.left-n;r&&L(r,i,s),this._itemPositions.forEach(({clientRect:t})=>{L(t,i,s)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()}),t.top=e,t.left=n}_removeListeners(){Object(i.e)(this.element).removeEventListener("scroll",this._handleScroll),this._viewportScrollSubscription.unsubscribe()}_isOverContainer(t,e){return B(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(r=>r._canReceive(t,e,n))}_canReceive(t,e,n){if(!this.enterPredicate(t,this)||!B(this._clientRect,e,n))return!1;const r=this._document.elementFromPoint(e,n);if(!r)return!1;const s=Object(i.e)(this.element);return r===s||s.contains(r)}_startReceiving(t){const e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheOwnPosition())}_stopReceiving(t){this._activeSiblings.delete(t)}}function L(t,e,n){t.top+=e,t.bottom=t.top+t.height,t.left+=n,t.right=t.left+t.width}function j(t,e){for(let n=0;n<t.length;n++)if(e(t[n],n,t))return n;return-1}function B(t,e,n){const{top:r,bottom:i,left:s,right:o}=t;return n>=r&&n<=i&&e>=s&&e<=o}function V(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function W(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function U(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function H(t,e){const{top:n,bottom:r,height:i}=t,s=i*R;return e>=n-s&&e<=n+s?1:e>=r-s&&e<=r+s?2:0}function G(t,e){const{left:n,right:r,width:i}=t,s=i*R;return e>=n-s&&e<=n+s?1:e>=r-s&&e<=r+s?2:0}const q=Object(r.e)({passive:!1,capture:!0});let K=(()=>{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new s.a,this.pointerUp=new s.a,this.scroll=new s.a,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.size&&t.preventDefault()},this._document=e}registerDropContainer(t){if(!this._dropInstances.has(t)){if(this.getDropContainer(t.id))throw Error(`Drop instance with id "${t.id}" has already been registered.`);this._dropInstances.add(t)}}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,q)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,q)}startDragging(t,e){if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){const t=e.type.startsWith("touch"),n=t?"touchend":"mouseup";this._globalListeners.set(t?"touchmove":"mousemove",{handler:t=>this.pointerMove.next(t),options:q}).set(n,{handler:t=>this.pointerUp.next(t),options:!0}).set("scroll",{handler:t=>this.scroll.next(t)}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:q}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,e)=>{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances.has(t)}getDropContainer(t){return Array.from(this._dropInstances).find(e=>e.id===t)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.ngInjectableDef=Object(b.Tb)({factory:function(){return new t(Object(b.Ub)(b.y),Object(b.Ub)(y.d))},token:t,providedIn:"root"}),t})();const Y={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let X=(()=>{class t{constructor(t,e,n,r){this._document=t,this._ngZone=e,this._viewportRuler=n,this._dragDropRegistry=r}createDrag(t,e=Y){return new E(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new $(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.ngInjectableDef=Object(b.Tb)({factory:function(){return new t(Object(b.Ub)(y.d),Object(b.Ub)(b.y),Object(b.Ub)(v.j),Object(b.Ub)(K))},token:t,providedIn:"root"}),t})();const Z=new b.p("CDK_DROP_LIST"),Q=new b.p("CDK_DRAG_PARENT");class J{constructor(t,e){this.element=t,this._stateChanges=new s.a,this._disabled=!1,this._parentDrag=e,w(t.nativeElement,!1)}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(i.c)(t),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}const tt=new b.p("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}});class et{constructor(t,e,n,r,i,o,l,a,c){this.element=t,this.dropContainer=e,this._document=n,this._ngZone=r,this._viewContainerRef=i,this._dir=l,this._changeDetectorRef=c,this._destroyed=new s.a,this.dragStartDelay=0,this._disabled=!1,this.started=new b.m,this.released=new b.m,this.ended=new b.m,this.entered=new b.m,this.exited=new b.m,this.dropped=new b.m,this.moved=new u.a(t=>{const e=this._dragRef.moved.pipe(Object(p.a)(t=>({source:this,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}))).subscribe(t);return()=>{e.unsubscribe()}}),this._dragRef=a.createDrag(t,o),this._dragRef.data=this,this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get boundaryElementSelector(){return"string"==typeof this.boundaryElement?this.boundaryElement:void 0}set boundaryElementSelector(t){this.boundaryElement=t}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=Object(i.c)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.onStable.asObservable().pipe(Object(f.a)(1),Object(d.a)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._handles.changes.pipe(Object(h.a)(this._handles),Object(g.a)(t=>{const e=t.filter(t=>t._parentDrag===this).map(t=>t.element);this._dragRef.withHandles(e)}),Object(m.a)(t=>Object(c.a)(...t.map(t=>t._stateChanges))),Object(d.a)(this._destroyed)).subscribe(t=>{const e=this._dragRef,n=t.element.nativeElement;t.disabled?e.disableHandle(n):e.enableHandle(n)}),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})}ngOnChanges(t){const e=t.rootElementSelector,n=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()}_updateRootElement(){const t=this.element.nativeElement,e=this.rootElementSelector?nt(t,this.rootElementSelector):t;if(e&&e.nodeType!==this._document.ELEMENT_NODE)throw Error("cdkDrag must be attached to an element node. "+`Currently attached to "${e.nodeName}".`);this._dragRef.withRootElement(e||t)}_getBoundaryElement(){const t=this.boundaryElement;if(!t)return null;if("string"==typeof t)return nt(this.element.nativeElement,t);const e=Object(i.e)(t);if(Object(b.X)()&&!e.contains(this.element.nativeElement))throw Error("Draggable element is not inside of the node passed into cdkDragBoundary.");return e}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const e=this._dir,n=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,r=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay=Object(i.f)(this.dragStartDelay),t.constrainPosition=this.constrainPosition,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(n).withPreviewTemplate(r),e&&t.withDirection(e.value)}})}_handleEvents(t){t.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=>{this.released.emit({source:this})}),t.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),t.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance})})}}function nt(t,e){let n=t.parentElement;for(;n;){if(n.matches?n.matches(e):n.msMatchesSelector(e))return n;n=n.parentElement}return null}class rt{}},MgzW:function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,l,a=o(t),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(a[c]=n[c]);if(r){l=r(n);for(var h=0;h<l.length;h++)s.call(n,l[h])&&(a[l[h]]=n[l[h]])}}return a}},MhJ4:function(t,e,n){"use strict";var r=n("6aLS");e.switchMapTo=function(t,e){return e?r.switchMap(function(){return t},e):r.switchMap(function(){return t})}},MkmW:function(t,e,n){"use strict";e.hostReportError=function(t){setTimeout(function(){throw t})}},Mxlh:function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}r.prototype=Object.create(Error.prototype),e.ObjectUnsubscribedError=r},N2O2:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("5VGP");class r{}},NAv5:function(t,e,n){t.exports={addDays:n("iUbB"),addHours:n("HMbd"),addISOYears:n("J6Hf"),addMilliseconds:n("7B8A"),addMinutes:n("crfB"),addMonths:n("ZmXw"),addQuarters:n("9d03"),addSeconds:n("rxuJ"),addWeeks:n("eoPS"),addYears:n("/LN1"),areRangesOverlapping:n("6qX0"),closestIndexTo:n("f9gI"),closestTo:n("T2d4"),compareAsc:n("DT56"),compareDesc:n("yHON"),differenceInCalendarDays:n("1CCG"),differenceInCalendarISOWeeks:n("gtzP"),differenceInCalendarISOYears:n("+f+M"),differenceInCalendarMonths:n("sunR"),differenceInCalendarQuarters:n("+zZ+"),differenceInCalendarWeeks:n("LxoM"),differenceInCalendarYears:n("Kpyc"),differenceInDays:n("O8cK"),differenceInHours:n("0u2M"),differenceInISOYears:n("s/X6"),differenceInMilliseconds:n("54Wo"),differenceInMinutes:n("ZXDK"),differenceInMonths:n("F809"),differenceInQuarters:n("gwEV"),differenceInSeconds:n("4Toj"),differenceInWeeks:n("7pFD"),differenceInYears:n("b8ws"),distanceInWords:n("NmtT"),distanceInWordsStrict:n("u3z5"),distanceInWordsToNow:n("YlT8"),eachDay:n("xMJQ"),endOfDay:n("l0SJ"),endOfHour:n("JxoX"),endOfISOWeek:n("QXXb"),endOfISOYear:n("hh1I"),endOfMinute:n("OsOA"),endOfMonth:n("1vin"),endOfQuarter:n("NpEG"),endOfSecond:n("FF6D"),endOfToday:n("dEPG"),endOfTomorrow:n("b056"),endOfWeek:n("dJQg"),endOfYear:n("2XXS"),endOfYesterday:n("5R0t"),format:n("cPJV"),getDate:n("tg+8"),getDay:n("wrXb"),getDayOfYear:n("WA8B"),getDaysInMonth:n("VBar"),getDaysInYear:n("3d+l"),getHours:n("XZVX"),getISODay:n("hLnY"),getISOWeek:n("gfz1"),getISOWeeksInYear:n("O3uf"),getISOYear:n("iWRJ"),getMilliseconds:n("jIFe"),getMinutes:n("xYlI"),getMonth:n("czgO"),getOverlappingDaysInRanges:n("Yzd8"),getQuarter:n("uPm0"),getSeconds:n("IxzM"),getTime:n("kC7l"),getYear:n("EMgV"),isAfter:n("pDEI"),isBefore:n("a4+5"),isDate:n("pzWd"),isEqual:n("q9S1"),isFirstDayOfMonth:n("NT44"),isFriday:n("qFJL"),isFuture:n("K2dx"),isLastDayOfMonth:n("Pu5f"),isLeapYear:n("rMQs"),isMonday:n("JQcg"),isPast:n("qTUo"),isSameDay:n("/Tkk"),isSameHour:n("Zipn"),isSameISOWeek:n("zM65"),isSameISOYear:n("L/99"),isSameMinute:n("9WSG"),isSameMonth:n("WmBB"),isSameQuarter:n("mqoM"),isSameSecond:n("xq5I"),isSameWeek:n("G6+r"),isSameYear:n("JtXv"),isSaturday:n("SKYL"),isSunday:n("K1fy"),isThisHour:n("AVfB"),isThisISOWeek:n("zGRt"),isThisISOYear:n("l6+5"),isThisMinute:n("PvkQ"),isThisMonth:n("m7nI"),isThisQuarter:n("KoBQ"),isThisSecond:n("5iAy"),isThisWeek:n("LSME"),isThisYear:n("9m1m"),isThursday:n("Wjgk"),isToday:n("MNHD"),isTomorrow:n("ILER"),isTuesday:n("dgaN"),isValid:n("fupu"),isWednesday:n("yYDL"),isWeekend:n("mthE"),isWithinRange:n("9WoD"),isYesterday:n("xPkr"),lastDayOfISOWeek:n("UpIE"),lastDayOfISOYear:n("3hPP"),lastDayOfMonth:n("7KIa"),lastDayOfQuarter:n("zj0I"),lastDayOfWeek:n("y5a+"),lastDayOfYear:n("uKeJ"),max:n("leoV"),min:n("GoQk"),parse:n("yNUO"),setDate:n("lX9Q"),setDay:n("t4rR"),setDayOfYear:n("lTB2"),setHours:n("bwD0"),setISODay:n("+nbD"),setISOWeek:n("5z3u"),setISOYear:n("lwZq"),setMilliseconds:n("1HMO"),setMinutes:n("iu1C"),setMonth:n("OBTA"),setQuarter:n("FYuM"),setSeconds:n("kRN8"),setYear:n("L486"),startOfDay:n("CXhC"),startOfHour:n("+6+2"),startOfISOWeek:n("tMf1"),startOfISOYear:n("RJeW"),startOfMinute:n("6WtA"),startOfMonth:n("lCuP"),startOfQuarter:n("Q5nM"),startOfSecond:n("IpkJ"),startOfToday:n("PK5m"),startOfTomorrow:n("gUhM"),startOfWeek:n("x84W"),startOfYear:n("pLeS"),startOfYesterday:n("aTp7"),subDays:n("4v8u"),subHours:n("+5jU"),subISOYears:n("3zVU"),subMilliseconds:n("uttN"),subMinutes:n("GLf8"),subMonths:n("Ev1t"),subQuarters:n("1K6H"),subSeconds:n("g/AU"),subWeeks:n("4coB"),subYears:n("iQJf")}},NDed:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("dvZr"),n("8Y7J"),n("5VGP");class r{}},NFMk:function(t,e,n){"use strict";n.d(e,"a",function(){return v}),n.d(e,"b",function(){return d}),n.d(e,"c",function(){return y}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return p}),n.d(e,"f",function(){return w}),n.d(e,"g",function(){return C}),n.d(e,"h",function(){return _});var r=n("mrSG"),i=n("dvZr"),s=n("QQfA"),o=n("8Y7J"),l=n("XNiG"),a=n("xgIS"),u=n("1G5W"),c=n("5VGP"),h=n("zMNK");const d=new o.p("NZ_MODAL_CONFIG");class p{}let f=(()=>{class t{constructor(t){this.parentService=t,this.rootOpenModals=this.parentService?null:[],this.rootAfterAllClose=this.parentService?null:new l.a,this.rootRegisteredMetaMap=this.parentService?null:new Map}get afterAllClose(){return this.parentService?this.parentService.afterAllClose:this.rootAfterAllClose}get openModals(){return this.parentService?this.parentService.openModals:this.rootOpenModals}get registeredMetaMap(){return this.parentService?this.parentService.registeredMetaMap:this.rootRegisteredMetaMap}registerModal(t){if(!this.hasRegistered(t)){const e=t.afterOpen.subscribe(()=>this.openModals.push(t)),n=t.afterClose.subscribe(()=>this.removeOpenModal(t));this.registeredMetaMap.set(t,{modalRef:t,afterOpenSubscription:e,afterCloseSubscription:n})}}deregisterModal(t){const e=this.registeredMetaMap.get(t);e&&(this.removeOpenModal(e.modalRef),e.afterOpenSubscription.unsubscribe(),e.afterCloseSubscription.unsubscribe(),this.registeredMetaMap.delete(t))}hasRegistered(t){return this.registeredMetaMap.has(t)}closeAll(){let t=this.openModals.length;for(;t--;)this.openModals[t].close()}removeOpenModal(t){const e=this.openModals.indexOf(t);e>-1&&(this.openModals.splice(e,1),this.openModals.length||this.afterAllClose.next())}}return t.ngInjectableDef=Object(o.Tb)({factory:function(){return new t(Object(o.Ub)(t,12))},token:t,providedIn:p}),t})();class g{}const m=200,b="ant-modal-wrap";let y=(()=>{class t extends g{constructor(t,e,n,r,i,s,a,u,c,h,d){super(),this.overlay=t,this.overlayKeyboardDispatcher=e,this.i18n=n,this.cfr=r,this.elementRef=i,this.viewContainer=s,this.modalControl=a,this.focusTrapFactory=u,this.cdr=c,this.nzModalGlobalConfig=h,this.document=d,this.nzVisible=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzGetContainer=()=>this.overlay.create(),this.nzZIndex=1e3,this.nzWidth=520,this.nzOkType="primary",this.nzIconType="question-circle",this.nzModalType="default",this.nzOnOk=new o.m,this.nzOnCancel=new o.m,this.nzAfterOpen=new o.m,this.nzAfterClose=new o.m,this.nzVisibleChange=new o.m,this.locale={},this.transformOrigin="0px 0px 0px",this.unsubscribe$=new l.a,this.dialogMouseDown=!1,this.scrollStrategy=this.overlay.scrollStrategies.block()}set modalFooter(t){t&&t.templateRef&&this.setFooterWithTemplate(t.templateRef)}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}get cancelText(){return this.nzCancelText||this.locale.cancelText}get okText(){return this.nzOkText||this.locale.okText}get hidden(){return!this.nzVisible&&!this.animationState}get mask(){return null!=this.nzMask?this.nzMask:!this.nzModalGlobalConfig||null==this.nzModalGlobalConfig.nzMask||this.nzModalGlobalConfig.nzMask}get maskClosable(){return null!=this.nzMaskClosable?this.nzMaskClosable:!this.nzModalGlobalConfig||null==this.nzModalGlobalConfig.nzMaskClosable||this.nzModalGlobalConfig.nzMaskClosable}ngOnInit(){this.i18n.localeChange.pipe(Object(u.a)(this.unsubscribe$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Modal")}),this.isComponent(this.nzContent)&&this.createDynamicComponent(this.nzContent),this.isModalButtons(this.nzFooter)&&(this.nzFooter=this.formatModalButtons(this.nzFooter)),this.container="function"==typeof this.nzGetContainer?this.nzGetContainer():this.nzGetContainer,this.container instanceof HTMLElement?(this.container.appendChild(this.elementRef.nativeElement),Object(a.a)(this.document.body,"keydown").pipe(Object(u.a)(this.unsubscribe$)).subscribe(t=>this.keydownListener(t))):this.container instanceof s.j&&(this.setOverlayRef(this.container),this.container.overlayElement.appendChild(this.elementRef.nativeElement)),this.overlayRef&&this.overlayRef.keydownEvents().pipe(Object(u.a)(this.unsubscribe$)).subscribe(t=>this.keydownListener(t)),this.modalControl.registerModal(this)}ngOnChanges(t){t.nzVisible&&this.handleVisibleStateChange(this.nzVisible,!t.nzVisible.firstChange)}ngAfterViewInit(){this.contentComponentRef&&this.bodyContainer.insert(this.contentComponentRef.hostView),this.autoFocusButtonOk&&this.autoFocusButtonOk.nativeElement.focus()}ngOnDestroy(){this.changeVisibleFromInside(!1).then(()=>{this.modalControl.deregisterModal(this),this.container instanceof s.j&&this.container.dispose(),this.unsubscribe$.next(),this.unsubscribe$.complete()}),clearTimeout(this.timeoutId)}setFooterWithTemplate(t){this.nzFooter=t,this.cdr.markForCheck()}setOverlayRef(t){this.overlayRef=t}keydownListener(t){t.keyCode===i.e&&this.nzKeyboard&&this.onClickOkCancel("cancel")}open(){this.changeVisibleFromInside(!0)}close(t){this.changeVisibleFromInside(!1,t)}destroy(t){this.close(t)}triggerOk(){this.onClickOkCancel("ok")}triggerCancel(){this.onClickOkCancel("cancel")}getInstance(){return this}getContentComponentRef(){return this.contentComponentRef}getContentComponent(){return this.contentComponentRef&&this.contentComponentRef.instance}getElement(){return this.elementRef&&this.elementRef.nativeElement}onMaskDialogDown(){this.dialogMouseDown=!0}onDialogUp(){this.dialogMouseDown&&(this.timeoutId=setTimeout(()=>{this.dialogMouseDown=!1},0))}onClickMask(t){this.mask&&this.maskClosable&&t.target.classList.contains(b)&&this.nzVisible&&!this.dialogMouseDown&&this.onClickOkCancel("cancel")}isModalType(t){return this.nzModalType===t}onClickCloseBtn(){this.nzVisible&&this.onClickOkCancel("cancel")}onClickOkCancel(t){const e={ok:this.nzOnOk,cancel:this.nzOnCancel}[t],n={ok:"nzOkLoading",cancel:"nzCancelLoading"}[t];if(e instanceof o.m)e.emit(this.getContentComponent());else if("function"==typeof e){const t=e(this.getContentComponent()),r=t=>!1!==t&&this.close(t);if(Object(c.U)(t)){this[n]=!0;const e=t=>{this[n]=!1,r(t)};t.then(e).catch(e)}else r(t)}}isNonEmptyString(t){return"string"==typeof t&&""!==t}isTemplateRef(t){return t instanceof o.L}isComponent(t){return t instanceof o.N}isModalButtons(t){return Array.isArray(t)&&t.length>0}handleVisibleStateChange(t,e=!0,n){return t?(this.scrollStrategy.enable(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.container instanceof s.j&&this.overlayKeyboardDispatcher.add(this.overlayRef)):this.container instanceof s.j&&this.overlayKeyboardDispatcher.remove(this.overlayRef),Promise.resolve(e?this.animateTo(t):void 0).then(()=>{t?this.nzAfterOpen.emit():(this.nzAfterClose.emit(n),this.restoreFocus(),this.scrollStrategy.disable(),this.cdr.markForCheck())})}getButtonCallableProp(t,e){const n=t[e],r=[];return this.contentComponentRef&&r.push(this.contentComponentRef.instance),"function"==typeof n?n.apply(t,r):n}onButtonClick(t){const e=this.getButtonCallableProp(t,"onClick");Object(c.U)(e)&&(t.loading=!0,e.then(()=>t.loading=!1).catch(()=>t.loading=!1))}changeVisibleFromInside(t,e){return this.nzVisible!==t?(this.nzVisible=t,this.nzVisibleChange.emit(t),this.handleVisibleStateChange(t,!0,e)):Promise.resolve()}changeAnimationState(t){this.animationState=t,t?(this.maskAnimationClassMap={[`fade-${t}`]:!0,[`fade-${t}-active`]:!0},this.modalAnimationClassMap={[`zoom-${t}`]:!0,[`zoom-${t}-active`]:!0}):this.maskAnimationClassMap=this.modalAnimationClassMap=null}animateTo(t){return t&&setTimeout(()=>this.updateTransformOrigin()),this.changeAnimationState(t?"enter":"leave"),new Promise(t=>setTimeout(()=>{this.changeAnimationState(null),t()},this.nzNoAnimation?0:m))}formatModalButtons(t){return t.map(t=>Object.assign({type:"default",size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1},t))}createDynamicComponent(t){const e=this.cfr.resolveComponentFactory(t),n=o.q.create({providers:[{provide:g,useValue:this}],parent:this.viewContainer.parentInjector});this.contentComponentRef=e.create(n),this.nzComponentParams&&Object.assign(this.contentComponentRef.instance,this.nzComponentParams),this.contentComponentRef.changeDetectorRef.detectChanges()}updateTransformOrigin(){const t=this.modalContainer.nativeElement;if(this.previouslyFocusedElement){const e=this.previouslyFocusedElement.getBoundingClientRect(),n=Object(c.K)(this.previouslyFocusedElement);this.transformOrigin=`${n.left+e.width/2-t.offsetLeft}px ${n.top+e.height/2-t.offsetTop}px 0px`}}savePreviouslyFocusedElement(){this.document&&(this.previouslyFocusedElement=this.document.activeElement)}trapFocus(){this.focusTrap||(this.focusTrap=this.focusTrapFactory.create(this.elementRef.nativeElement)),this.focusTrap.focusInitialElementWhenReady()}restoreFocus(){this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}}return Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzVisible",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzClosable",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzOkLoading",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzOkDisabled",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzCancelDisabled",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzCancelLoading",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzKeyboard",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzNoAnimation",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzMask",void 0),Object(r.__decorate)([Object(c.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzMaskClosable",void 0),t})();class v{transform(t,e="px"){const n=+t;return isNaN(n)?`${t}`:`${n}${e}`}}class _{}class w{}class x{constructor(t,e={}){this.overlay=t,this.createModal(),"nzGetContainer"in e||(e.nzGetContainer=void 0),this.changeProps(e),this.modalRef.instance.setOverlayRef(this.overlayRef),this.modalRef.instance.open(),this.modalRef.instance.nzAfterClose.subscribe(()=>this.destroyModal())}getInstance(){return this.modalRef&&this.modalRef.instance}destroyModal(){this.modalRef&&(this.overlayRef.dispose(),this.modalRef=null)}changeProps(t){this.modalRef&&Object.assign(this.modalRef.instance,t)}createModal(){this.overlayRef=this.overlay.create(),this.modalRef=this.overlayRef.attach(new h.b(y))}}let C=(()=>{class t{constructor(t,e){this.overlay=t,this.modalControl=e}get openModals(){return this.modalControl.openModals}get afterAllClose(){return this.modalControl.afterAllClose.asObservable()}closeAll(){this.modalControl.closeAll()}create(t={}){return"function"!=typeof t.nzOnCancel&&(t.nzOnCancel=()=>{}),new x(this.overlay,t).getInstance()}confirm(t={},e="confirm"){return"nzFooter"in t&&Object(c.qb)('The Confirm-Modal doesn\'t support "nzFooter", this property will be ignored.'),"nzWidth"in t||(t.nzWidth=416),"function"!=typeof t.nzOnOk&&(t.nzOnOk=()=>{}),t.nzModalType="confirm",t.nzClassName=`ant-modal-confirm ant-modal-confirm-${e} ${t.nzClassName||""}`,t.nzMaskClosable=!1,this.create(t)}info(t={}){return this.simpleConfirm(t,"info")}success(t={}){return this.simpleConfirm(t,"success")}error(t={}){return this.simpleConfirm(t,"error")}warning(t={}){return this.simpleConfirm(t,"warning")}simpleConfirm(t={},e){return"nzIconType"in t||(t.nzIconType={info:"info-circle",success:"check-circle",error:"close-circle",warning:"exclamation-circle"}[e]),"nzCancelText"in t||(t.nzCancelText=null),this.confirm(t,e)}}return t.ngInjectableDef=Object(o.Tb)({factory:function(){return new t(Object(o.Ub)(s.d),Object(o.Ub)(f))},token:t,providedIn:_}),t})()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t})}n.d(e,"a",function(){return r})},NQti:function(t,e,n){var r;!function(i,s){var o,l=this,a=256,u=6,c="random",h=s.pow(a,u),d=s.pow(2,52),p=2*d,f=a-1;function g(t,e,n){var r=[],f=y(function t(e,n){var r,i=[],s=typeof e;if(n&&"object"==s)for(r in e)try{i.push(t(e[r],n-1))}catch(o){}return i.length?i:"string"==s?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(i)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(a):(t=new Uint8Array(a),(l.crypto||l.msCrypto).getRandomValues(t)),v(t)}catch(r){var e=l.navigator,n=e&&e.plugins;return[+new Date,l,n,l.screen,v(i)]}}():t,3),r),g=new m(r),_=function(){for(var t=g.g(u),e=h,n=0;t<d;)t=(t+n)*a,e*=a,n=g.g(1);for(;t>=p;)t/=2,e/=2,n>>>=1;return(t+n)/e};return _.int32=function(){return 0|g.g(4)},_.quick=function(){return g.g(4)/4294967296},_.double=_,y(v(g.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&b(r,g),t.state=function(){return b(g,{})}),n?(s[c]=t,e):t})(_,f,"global"in e?e.global:this==s,e.state)}function m(t){var e,n=t.length,r=this,i=0,s=r.i=r.j=0,o=r.S=[];for(n||(t=[n++]);i<a;)o[i]=i++;for(i=0;i<a;i++)o[i]=o[s=f&s+t[i%n]+(e=o[i])],o[s]=e;(r.g=function(t){for(var e,n=0,i=r.i,s=r.j,o=r.S;t--;)e=o[i=f&i+1],n=n*a+o[f&(o[i]=o[s=f&s+e])+(o[s]=e)];return r.i=i,r.j=s,n})(a)}function b(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){for(var n,r=t+"",i=0;i<r.length;)e[f&i]=f&(n^=19*e[f&i])+r.charCodeAt(i++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(s["seed"+c]=g,y(s.random(),i),t.exports){t.exports=g;try{o=n(3)}catch(_){}}else void 0===(r=(function(){return g}).call(e,n,e,t))||(t.exports=r)}([],Math)},NT44:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 1===r(t).getDate()}},NTcF:function(t,e,n){var r=n("mrSG").__extends,i=n("ffpz");e.AsyncScheduler=function(t){function e(n,r){void 0===r&&(r=i.Scheduler.now);var s=t.call(this,n,function(){return e.delegate&&e.delegate!==s?e.delegate.now():r()})||this;return s.actions=[],s.active=!1,s.scheduled=void 0,s}return r(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(i.Scheduler)},NVjP:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h});var r=n("8Y7J"),i=(n("fb/r"),n("SVse")),s=(n("POq0"),r.rb({encapsulation:2,styles:["\n      nz-spin {\n        display: block;\n      }\n    "],data:{}}));function o(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"span",[["class","ant-spin-dot"]],[[2,"ant-spin-dot-spin",null]],null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"i",[["class","ant-spin-dot-item"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,0,"i",[["class","ant-spin-dot-item"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,0,"i",[["class","ant-spin-dot-item"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"i",[["class","ant-spin-dot-item"]],null,null,null,null,null))],null,function(t,e){t(e,0,0,e.component.loading)})}function l(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function a(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"div",[["class","ant-spin-text"]],null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzTip)})}function u(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"div",[["class","ant-spin"]],[[2,"ant-spin-spinning",null],[2,"ant-spin-lg",null],[2,"ant-spin-sm",null],[2,"ant-spin-show-text",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,l)),r.sb(3,540672,null,0,i.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,a)),r.sb(5,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,n.nzIndicator||r.Fb(e.parent,0)),t(e,5,0,n.nzTip)},function(t,e){var n=e.component;t(e,1,0,n.loading,"large"===n.nzSize,"small"===n.nzSize,n.nzTip)})}function c(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"div",[["class","ant-spin-container"]],[[2,"ant-spin-blur",null]],null,null,null,null)),r.Eb(null,0)],null,function(t,e){t(e,0,0,e.component.loading)})}function h(t){return r.Pb(2,[(t()(),r.ib(0,[["defaultIndicatorTemplate",2]],null,0,null,o)),(t()(),r.ib(16777216,null,null,1,null,u)),r.sb(2,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,c)),r.sb(4,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.loading),t(e,4,0,!n.nzSimple)},null)}},NXyV:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("Cfvw"),s=n("EY2u");function o(t){return new r.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(i.a)(n):Object(s.b)()).subscribe(e)})}},NZaV:function(t,e,n){"use strict";var r=n("7RJT"),i=n("7K7o");e.publishBehavior=function(t){return function(e){return i.multicast(new r.BehaviorSubject(t))(e)}}},NmtT:function(t,e,n){var r=n("yHON"),i=n("yNUO"),s=n("4Toj"),o=n("F809"),l=n("Us+F");t.exports=function(t,e,n){var a=n||{},u=r(t,e),c=a.locale,h=l.distanceInWords.localize;c&&c.distanceInWords&&c.distanceInWords.localize&&(h=c.distanceInWords.localize);var d,p,f={addSuffix:Boolean(a.addSuffix),comparison:u};u>0?(d=i(t),p=i(e)):(d=i(e),p=i(t));var g,m=s(p,d),b=p.getTimezoneOffset()-d.getTimezoneOffset(),y=Math.round(m/60)-b;if(y<2)return a.includeSeconds?m<5?h("lessThanXSeconds",5,f):m<10?h("lessThanXSeconds",10,f):m<20?h("lessThanXSeconds",20,f):m<40?h("halfAMinute",null,f):h(m<60?"lessThanXMinutes":"xMinutes",1,f):0===y?h("lessThanXMinutes",1,f):h("xMinutes",y,f);if(y<45)return h("xMinutes",y,f);if(y<90)return h("aboutXHours",1,f);if(y<1440)return h("aboutXHours",Math.round(y/60),f);if(y<2520)return h("xDays",1,f);if(y<43200)return h("xDays",Math.round(y/1440),f);if(y<86400)return h("aboutXMonths",g=Math.round(y/43200),f);if((g=o(p,d))<12)return h("xMonths",Math.round(y/43200),f);var v=g%12,_=Math.floor(g/12);return v<3?h("aboutXYears",_,f):v<9?h("overXYears",_,f):h("almostXYears",_+1,f)}},NpEG:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getMonth();return e.setMonth(n-n%3+3,0),e.setHours(23,59,59,999),e}},O3uf:function(t,e,n){var r=n("RJeW"),i=n("eoPS");t.exports=function(t){var e=r(t),n=r(i(e,60)).valueOf()-e.valueOf();return Math.round(n/6048e5)}},O4nG:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t){this.router=t}ngOnInit(){}toInfo(t){t[1]&&this.router.navigate(t)}}},O8cK:function(t,e,n){var r=n("yNUO"),i=n("1CCG"),s=n("DT56");t.exports=function(t,e){var n=r(t),o=r(e),l=s(n,o),a=Math.abs(i(n,o));return n.setDate(n.getDate()-l*a),l*(a-(s(n,o)===-l))}},OAkW:function(t,e,n){"use strict";e.subscribeToArray=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},OBTA:function(t,e,n){var r=n("yNUO"),i=n("VBar");t.exports=function(t,e){var n=r(t),s=Number(e),o=n.getFullYear(),l=n.getDate(),a=new Date(0);a.setFullYear(o,s,15),a.setHours(0,0,0,0);var u=i(a);return n.setMonth(s,Math.min(l,u)),n}},OHRA:function(t,e,n){"use strict";var r=n("UNqx");e.mergeMapTo=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?r.mergeMap(function(){return t},e,n):("number"==typeof e&&(n=e),r.mergeMap(function(){return t},n))}},OsOA:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setSeconds(59,999),e}},OvZZ:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("l5mm"),n("SVse"),n("5VGP");class r{}},"P+eR":function(t,e,n){var r=n("mrSG").__extends,i=n("Q1FS"),s=n("zvlq"),o=n("p0+S");e.SubscribeOnObservable=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=s.asap);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!o.isNumeric(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=s.asap),i}return r(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=s.asap),new e(t,n,r)},e.dispatch=function(t){return this.add(t.source.subscribe(t.subscriber))},e.prototype._subscribe=function(t){return this.scheduler.schedule(e.dispatch,this.delayTime,{source:this.source,subscriber:t})},e}(i.Observable)},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},PK5m:function(t,e,n){var r=n("CXhC");t.exports=function(){return r(new Date)}},POq0:function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return h});var r=n("KCVW"),i=n("8Y7J"),s=n("HDdC"),o=n("XNiG"),l=n("Kj3r");let a=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),u=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Object(r.e)(t);return new s.a(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new o.a,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(a))},token:t,providedIn:"root"}),t})();class c{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new i.m,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Object(r.c)(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Object(r.f)(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Object(l.a)(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}class h{}},PmpX:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},PqYM:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("D0XW"),s=n("Y7HM"),o=n("z+Ro");function l(t=0,e,n){let l=-1;return Object(s.a)(e)?l=Number(e)<1?1:Number(e):Object(o.a)(e)&&(n=e),Object(o.a)(n)||(n=i.a),new r.a(e=>{const r=Object(s.a)(t)?t:+t-n.now();return n.schedule(a,r,{index:0,period:l,subscriber:e})})}function a(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},Pu5f:function(t,e,n){var r=n("yNUO"),i=n("l0SJ"),s=n("1vin");t.exports=function(t){var e=r(t);return i(e).getTime()===s(e).getTime()}},PvkQ:function(t,e,n){var r=n("9WSG");t.exports=function(t){return r(new Date,t)}},Q1FS:function(t,e,n){"use strict";var r=n("yx2s"),i=n("Xwq/"),s=n("zfKp"),o=n("9AGB"),l=n("n3uD");function a(t){if(t||(t=l.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,s=i.toSubscriber(t,e,n);if(s.add(r?r.call(s,this.source):this.source||l.config.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),l.config.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){l.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),r.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=a(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[s.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:o.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=a(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},Q5nM:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getMonth();return e.setMonth(n-n%3,1),e.setHours(0,0,0,0),e}},QFPx:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},QQfA:function(t,e,n){"use strict";n.d(e,"d",function(){return j}),n.d(e,"f",function(){return P}),n.d(e,"b",function(){return W}),n.d(e,"a",function(){return U}),n.d(e,"j",function(){return I}),n.d(e,"g",function(){return z}),n.d(e,"i",function(){return $}),n.d(e,"e",function(){return S}),n.d(e,"c",function(){return O}),n.d(e,"k",function(){return C}),n.d(e,"h",function(){return G}),n.d(e,"l",function(){return V}),n.d(e,"m",function(){return H});var r=n("KCVW"),i=n("hOhj"),s=n("SVse"),o=n("8Y7J"),l=n("XNiG"),a=n("quSY"),u=n("HDdC"),c=n("VRyK"),h=n("IzEk"),d=n("1G5W"),p=n("/HVE"),f=n("zMNK"),g=n("dvZr");class m{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Object(r.d)(-this._previousScrollPosition.left),t.style.top=Object(r.d)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),e.scrollBehavior=n.scrollBehavior="auto",window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),e.scrollBehavior=r,n.scrollBehavior=i}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}function b(){return Error("Scroll strategy has already been attached.")}class y{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){if(this._overlayRef)throw b();this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class v{enable(){}disable(){}attach(){}}function _(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function w(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class x{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){if(this._overlayRef)throw b();this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();_(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let C=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new v,this.close=t=>new y(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new m(this._viewportRuler,this._document),this.reposition=t=>new x(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.ngInjectableDef=Object(o.Tb)({factory:function(){return new t(Object(o.Ub)(i.f),Object(o.Ub)(i.j),Object(o.Ub)(o.y),Object(o.Ub)(s.d))},token:t,providedIn:"root"}),t})();class S{constructor(t){if(this.scrollStrategy=new v,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class O{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class k{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}function E(t,e){if("top"!==e&&"bottom"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "top", "bottom" or "center".')}function T(t,e){if("start"!==e&&"end"!==e&&"center"!==e)throw Error(`ConnectedPosition: Invalid ${t} "${e}". `+'Expected "start", "end" or "center".')}let z=(()=>{class t{constructor(t){this._attachedOverlays=[],this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEventSubscriptions>0){e[n]._keydownEvents.next(t);break}},this._document=t}ngOnDestroy(){this._detach()}add(t){this.remove(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this._detach()}_detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.ngInjectableDef=Object(o.Tb)({factory:function(){return new t(Object(o.Ub)(s.d))},token:t,providedIn:"root"}),t})(),P=(()=>{class t{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.getElementsByClassName("cdk-overlay-container");for(let n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);const e=this._document.createElement("div");e.classList.add("cdk-overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}return t.ngInjectableDef=Object(o.Tb)({factory:function(){return new t(Object(o.Ub)(s.d))},token:t,providedIn:"root"}),t})();class I{constructor(t,e,n,r,i,s,o,c){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=s,this._document=o,this._location=c,this._backdropElement=null,this._backdropClick=new l.a,this._attachments=new l.a,this._detachments=new l.a,this._locationChanges=a.a.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEventsObservable=new u.a(t=>{const e=this._keydownEvents.subscribe(t);return this._keydownEventSubscriptions++,()=>{e.unsubscribe(),this._keydownEventSubscriptions--}}),this._keydownEvents=new l.a,this._keydownEventSubscriptions=0,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.asObservable().pipe(Object(h.a)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&this._location&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick.asObservable()}attachments(){return this._attachments.asObservable()}detachments(){return this._detachments.asObservable()}keydownEvents(){return this._keydownEventsObservable}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign({},this._config,t),this._updateElementSize()}setDirection(t){this._config=Object.assign({},this._config,{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){const t=this._pane.style;t.width=Object(r.d)(this._config.width),t.height=Object(r.d)(this._config.height),t.minWidth=Object(r.d)(this._config.minWidth),t.minHeight=Object(r.d)(this._config.minHeight),t.maxWidth=Object(r.d)(this._config.maxWidth),t.maxHeight=Object(r.d)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"auto":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})}):this._backdropElement.classList.add("cdk-overlay-backdrop-showing")}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const i=t.classList;Object(r.b)(e).forEach(t=>{n?i.add(t):i.remove(t)})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.asObservable().pipe(Object(d.a)(Object(c.a)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const M="cdk-overlay-connected-position-bounding-box";class D{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new l.a,this._resizeSubscription=a.a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges.asObservable(),this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){if(this._overlayRef&&t!==this._overlayRef)throw Error("This position strategy is already attached to an overlay");this._validatePositions(),t.hostElement.classList.add(M),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let s of this._preferredPositions){let o=this._getOriginPoint(t,s),l=this._getOverlayPoint(o,e,s),a=this._getOverlayFit(l,e,n,s);if(a.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(a,l,n)?r.push({position:s,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!i||i.overlayFit.visibleArea<a.visibleArea)&&(i={overlayFit:a,overlayPoint:l,originPoint:o,position:s,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&A(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(M),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return{x:n,y:r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,{x:t.x+r,y:t.y+(i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height)}}_getOverlayFit(t,e,n,r){let{x:i,y:s}=t,o=this._getOffset(r,"x"),l=this._getOffset(r,"y");o&&(i+=o),l&&(s+=l);let a=0-s,u=s+e.height-n.height,c=this._subtractOverflows(e.width,0-i,i+e.width-n.width),h=this._subtractOverflows(e.height,a,u),d=c*h;return{visibleArea:d,isCompletelyWithinViewport:e.width*e.height===d,fitsInViewportVertically:h===e.height,fitsInViewportHorizontally:c==e.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,s=this._overlayRef.getConfig().minHeight,o=this._overlayRef.getConfig().minWidth,l=t.fitsInViewportHorizontally||null!=o&&o<=i;return(t.fitsInViewportVertically||null!=s&&s<=r)&&l}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=this._viewportRect,i=Math.max(t.x+e.width-r.right,0),s=Math.max(t.y+e.height-r.bottom,0),o=Math.max(r.top-n.top-t.y,0),l=Math.max(r.left-n.left-t.x,0);let a=0,u=0;return this._previousPushAmount={x:a=e.width<=r.width?l||-i:t.x<this._viewportMargin?r.left-n.left-t.x:0,y:u=e.height<=r.height?o||-s:t.y<this._viewportMargin?r.top-n.top-t.y:0},{x:t.x+a,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new k(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,s,o,l,a,u;if("top"===e.overlayY)i=n.height-(s=t.y)+this._viewportMargin;else if("bottom"===e.overlayY)i=n.height-(o=n.height-t.y+2*this._viewportMargin)+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;s=t.y-e,(i=2*e)>r&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)u=n.width-t.x+this._viewportMargin,l=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)a=t.x,l=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=t.x-e,(l=2*e)>r&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.x-r/2)}return{top:s,left:a,bottom:o,right:u,width:l,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right="",i.width=i.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=Object(r.d)(n.height),i.top=Object(r.d)(n.top),i.bottom=Object(r.d)(n.bottom),i.width=Object(r.d)(n.width),i.left=Object(r.d)(n.left),i.right=Object(r.d)(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(i.maxHeight=Object(r.d)(t)),s&&(i.maxWidth=Object(r.d)(s))}this._lastBoundingBoxSize=n,A(this._boundingBox.style,i)}_resetBoundingBoxStyles(){A(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){A(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={};if(this._hasExactPosition()){const r=this._viewportRuler.getViewportScrollPosition();A(n,this._getExactOverlayY(e,t,r)),A(n,this._getExactOverlayX(e,t,r))}else n.position="static";let r="",i=this._getOffset(e,"x"),s=this._getOffset(e,"y");i&&(r+=`translateX(${i}px) `),s&&(r+=`translateY(${s}px)`),n.transform=r.trim(),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxHeight&&(n.maxHeight=""),this._hasFlexibleDimensions&&this._overlayRef.getConfig().maxWidth&&(n.maxWidth=""),A(this._pane.style,n)}_getExactOverlayY(t,e,n){let i={top:null,bottom:null},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return s.y-=o,"bottom"===t.overlayY?i.bottom=`${this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)}px`:i.top=Object(r.d)(s.y),i}_getExactOverlayX(t,e,n){let i,s={left:null,right:null},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),"right"==(i=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left")?s.right=`${this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)}px`:s.left=Object(r.d)(o.x),s}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:w(t,n),isOriginOutsideView:_(t,n),isOverlayClipped:w(e,n),isOverlayOutsideView:_(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){if(!this._preferredPositions.length)throw Error("FlexibleConnectedPositionStrategy: At least one position is required.");this._preferredPositions.forEach(t=>{T("originX",t.originX),E("originY",t.originY),T("overlayX",t.overlayX),E("overlayY",t.overlayY)})}_addPanelClasses(t){this._pane&&Object(r.b)(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;return t instanceof o.k?t.nativeElement.getBoundingClientRect():t instanceof HTMLElement?t.getBoundingClientRect():{top:t.y,bottom:t.y,left:t.x,right:t.x,height:0,width:0}}}function A(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}class N{constructor(t,e,n,r,i,s,o){this._preferredPositions=[],this._positionStrategy=new D(n,r,i,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e)}get _isRtl(){return"rtl"===this._overlayRef.getDirection()}get onPositionChange(){return this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new O(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const R="cdk-global-overlay-wrapper";class F{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(R),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig();t.position=this._cssPosition,t.marginLeft="100%"===n.width?"0":this._leftOffset,t.marginTop="100%"===n.height?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,"100%"===n.width?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems="100%"===n.height?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(R),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let $=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new F}connectedTo(t,e,n){return new N(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new D(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.ngInjectableDef=Object(o.Tb)({factory:function(){return new t(Object(o.Ub)(i.j),Object(o.Ub)(s.d),Object(o.Ub)(p.a),Object(o.Ub)(P))},token:t,providedIn:"root"}),t})(),L=0;class j{constructor(t,e,n,r,i,s,o,l,a,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=s,this._ngZone=o,this._document=l,this._directionality=a,this._location=u}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new S(t);return i.direction=i.direction||this._directionality.value,new I(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id=`cdk-overlay-${L++}`,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(o.g)),new f.c(t,this._componentFactoryResolver,this._appRef,this._injector)}}const B=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],V=new o.p("cdk-connected-overlay-scroll-strategy");class W{constructor(t){this.elementRef=t}}class U{constructor(t,e,n,r,i){this._overlay=t,this._dir=i,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=a.a.EMPTY,this.viewportMargin=0,this.open=!1,this.backdropClick=new o.m,this.positionChange=new o.m,this.attach=new o.m,this.detach=new o.m,this.overlayKeydown=new o.m,this._templatePortal=new f.f(e,n),this._scrollStrategyFactory=r,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Object(r.c)(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Object(r.c)(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Object(r.c)(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Object(r.c)(t)}get push(){return this._push}set push(t){this._push=Object(r.c)(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._overlayRef&&this._overlayRef.dispose(),this._backdropSubscription.unsubscribe()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=B),this._overlayRef=this._overlay.create(this._buildConfig()),this._overlayRef.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),t.keyCode!==g.e||Object(g.n)(t)||(t.preventDefault(),this._detachOverlay())})}_buildConfig(){const t=this._position=this._createPositionStrategy(),e=new S({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),this.panelClass&&(e.panelClass=this.panelClass),e}_updatePositionStrategy(t){const e=this.positions.map(t=>({originX:t.originX,originY:t.originY,overlayX:t.overlayX,overlayY:t.overlayY,offsetX:t.offsetX||this.offsetX,offsetY:t.offsetY||this.offsetY,panelClass:t.panelClass||void 0}));return t.setOrigin(this.origin.elementRef).withPositions(e).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t.positionChanges.subscribe(t=>this.positionChange.emit(t)),t}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||(this._overlayRef.attach(this._templatePortal),this.attach.emit()),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe()}_detachOverlay(){this._overlayRef&&(this._overlayRef.detach(),this.detach.emit()),this._backdropSubscription.unsubscribe()}}function H(t){return()=>t.scrollStrategies.reposition()}class G{}},QUyD:function(t,e,n){var r=n("mrSG").__extends,i=n("1pIY"),s=n("FWf1"),o=n("nzqU");e.bufferTime=function(t){var e=arguments.length,n=i.async;o.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var s=Number.POSITIVE_INFINITY;return e>=3&&(s=arguments[2]),function(e){return e.lift(new l(t,r,s,n))}};var l=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),a=function(){return function(){this.buffer=[]}}(),u=function(t){function e(e,n,r,i,s){var o=t.call(this,e)||this;o.bufferTimeSpan=n,o.bufferCreationInterval=r,o.maxBufferSize=i,o.scheduler=s,o.contexts=[];var l=o.openContext();if(o.timespanOnly=null==r||r<0,o.timespanOnly)o.add(l.closeAction=s.schedule(c,n,{subscriber:o,context:l,bufferTimeSpan:n}));else{var a={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:o,scheduler:s};o.add(l.closeAction=s.schedule(d,n,{subscriber:o,context:l})),o.add(s.schedule(h,r,a))}return o}return r(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var s=n[i],o=s.buffer;o.push(t),o.length==this.maxBufferSize&&(e=s)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var r=e.shift();n.next(r.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan;this.add(t.closeAction=this.scheduler.schedule(c,n,{subscriber:this,context:t,bufferTimeSpan:n}))}},e.prototype.openContext=function(){var t=new a;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(s.Subscriber);function c(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function h(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,s=r.openContext();r.closed||(r.add(s.closeAction=i.schedule(d,n,{subscriber:r,context:s})),this.schedule(t,e))}function d(t){t.subscriber.closeContext(t.context)}},QXXb:function(t,e,n){var r=n("dJQg");t.exports=function(t){return r(t,{weekStartsOn:1})}},QfCi:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("8Y7J"),i=n("W4B1"),s=n("SVse"),o=n("QQfA"),l=n("IP0z"),a=(n("zMNK"),n("/HVE"),n("hOhj"),n("5VGP")),u=n("omvX"),c=r.rb({encapsulation:2,styles:["\n      .ant-tooltip {\n        position: relative;\n      }\n    "],data:{animation:[{type:7,name:"zoomBigMotion",definitions:[{type:1,expr:"void => active",animation:[{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"0.2s cubic-bezier(0.08, 0.82, 0.17, 1)"}],options:null},{type:1,expr:"active => void",animation:[{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},timings:"0.2s cubic-bezier(0.78, 0.14, 0.15, 0.86)"}],options:null}],options:{}}]}});function h(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,10,"div",[["class","ant-tooltip"]],[[24,"@zoomBigMotion",0],[24,"@.disabled",0]],[[null,"@zoomBigMotion.done"]],function(t,e,n){var r=!0;return"@zoomBigMotion.done"===e&&(r=!1!==t.component._afterVisibilityAnimation(n)&&r),r},null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),r.sb(5,4734976,null,0,a.q,[r.k,r.D,[2,u.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(6,0,null,null,4,"div",[["class","ant-tooltip-content"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,0,"div",[["class","ant-tooltip-arrow"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,2,"div",[["class","ant-tooltip-inner"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,h)),r.sb(10,540672,null,0,a.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-tooltip",n._classMap),t(e,4,0,n.nzOverlayStyle),t(e,5,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,10,0,n.nzTitle)},function(t,e){t(e,0,0,"active",r.Fb(e,5).nzNoAnimation)})}function p(t){return r.Pb(2,[r.Lb(671088640,1,{overlay:0}),r.Eb(null,0),(t()(),r.ib(16777216,null,null,3,function(t,e,n){var r=!0,i=t.component;return"backdropClick"===e&&(r=!1!==i.hide()&&r),"detach"===e&&(r=!1!==i.hide()&&r),"positionChange"===e&&(r=!1!==i.onPositionChange(n)&&r),r},d)),r.sb(3,671744,[[1,4],["overlay",4]],0,o.a,[o.d,r.L,r.P,o.l,[2,l.b]],{origin:[0,"origin"],positions:[1,"positions"],open:[2,"open"],hasBackdrop:[3,"hasBackdrop"]},{backdropClick:"backdropClick",positionChange:"positionChange",detach:"detach"}),r.Hb(131072,s.b,[r.h]),r.sb(5,16384,null,0,a.l,[o.a],null,null)],function(t,e){var n=e.component;t(e,3,0,n.overlayOrigin,n._positions,r.Ob(e,3,2,r.Fb(e,4).transform(n.visible$)),n._hasBackdrop)},null)}function f(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"nz-tooltip",[],null,null,null,p,c)),r.sb(1,573440,null,1,i.a,[r.h,[2,a.q]],null,null),r.Lb(335544320,1,{nzTitle:0})],null,null)}var g=r.pb("nz-tooltip",i.a,f,{nzTitle:"nzTitle",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzMouseEnterDelay:"nzMouseEnterDelay",nzMouseLeaveDelay:"nzMouseLeaveDelay",nzVisible:"nzVisible",nzTrigger:"nzTrigger",nzPlacement:"nzPlacement"},{nzVisibleChange:"nzVisibleChange"},["*"])},Qlto:function(t,e,n){"use strict";var r=n("B/hR");e.distinctUntilKeyChanged=function(t,e){return r.distinctUntilChanged(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}},QtHX:function(t,e,n){"use strict";var r=n("UNqx"),i=n("yoF8");e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),r.mergeMap(i.identity,t)}},R36U:function(t,e,n){"use strict";var r=n("XNiG"),i=n("yCtX"),s=n("DH7j"),o=n("7o/Q"),l=n("l7GE"),a=n("ZUHj"),u=n("Lhse");function c(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(i.a)(t,void 0).lift(new h(e))}class h{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new d(t,this.resultSelector))}}class d extends o.a{constructor(t,e,n=Object.create(null)){super(t),this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:null,this.values=n}_next(t){const e=this.iterators;Object(s.a)(t)?e.push(new f(t)):e.push("function"==typeof t[u.a]?new p(t[u.a]()):new g(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe(e,n)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let s=0;s<e;s++){let e=t[s];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let s=0;s<e;s++){let e=t[s],o=e.next();if(e.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class p{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return t&&t.done}}class f{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[u.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class g extends l.a{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[u.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()}subscribe(t,e){return Object(a.a)(this,this.observable,this,e)}}var m=n("Cfvw"),b=n("PqYM"),y=n("yrbL");n.d(e,"a",function(){return _});const v=/\[(\d{1,2}):(\d{2})(?:\.(\d{2,3}))?\]/;class _{constructor(t){this.lines=[],this.playing=!1,this.handler=new r.a,this.lrc=t,this.init()}init(){this.lrc.tlyric?this.generTLyric():this.generLyric()}generLyric(){this.lrc.lyric.split("\n").forEach(t=>this.makeLine(t))}generTLyric(){const t=this.lrc.lyric.split("\n"),e=this.lrc.tlyric.split("\n").filter(t=>null!==v.exec(t)),n=t.length-e.length;let r=[];const i=v.exec((r=n>=0?[t,e]:[e,t])[1][0])[0],s=r[0].findIndex(t=>{const e=v.exec(t);if(e)return e[0]===i}),o=-1===s?0:s,l=r[0].slice(0,o);let a;l.length&&l.forEach(t=>this.makeLine(t)),(a=n>0?c(Object(m.a)(t).pipe(Object(y.skip)(o)),Object(m.a)(e)):c(Object(m.a)(t),Object(m.a)(e).pipe(Object(y.skip)(o)))).subscribe(([t,e])=>this.makeLine(t,e))}makeLine(t,e=""){const n=v.exec(t);if(n){const r=t.replace(v,"").trim(),i=e?e.replace(v,"").trim():"";if(r){const t=n[3]||"00",e=t.length>2?parseInt(t):10*parseInt(t),s=60*Number(n[1])*1e3+1e3*Number(n[2])+e;this.lines.push({txt:r,txtCn:i,time:s})}}}play(t=0,e=!1){this.lines.length&&(this.playing||(this.playing=!0),this.curNum=this.findCurNum(t),this.startStamp=Date.now()-t,e||this.callHandler(this.curNum-1),this.curNum<this.lines.length&&(this.clearTimer(),this.playReset()))}playReset(){const t=this.lines[this.curNum].time-(Date.now()-this.startStamp);this.timer$=Object(b.a)(t).subscribe(()=>{this.callHandler(this.curNum++),this.curNum<this.lines.length&&this.playing&&this.playReset()})}clearTimer(){this.timer$&&this.timer$.unsubscribe()}callHandler(t){t>0&&this.handler.next({txt:this.lines[t].txt,txtCn:this.lines[t].txtCn,lineNum:t})}findCurNum(t){const e=this.lines.findIndex(e=>t<=e.time);return-1===e?this.lines.length-1:e}togglePlay(t){const e=Date.now();this.playing=t,t?this.play((this.pauseStamp||e)-(this.startStamp||e),!0):(this.stop(),this.pauseStamp=e)}stop(){this.playing&&(this.playing=!1),this.clearTimer()}seek(t){this.play(t)}}},R7wr:function(t,e,n){"use strict";e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},RDh8:function(t,e,n){"use strict";var r={};n.r(r),n.d(r,"shuffle",function(){return dt}),n.d(r,"clamp",function(){return pt}),n.d(r,"nearestLargerEven",function(){return ft}),n.d(r,"sum",function(){return gt}),n.d(r,"randUniform",function(){return mt}),n.d(r,"distSquared",function(){return bt}),n.d(r,"assert",function(){return yt}),n.d(r,"assertShapesMatch",function(){return vt}),n.d(r,"assertNonNull",function(){return _t}),n.d(r,"flatten",function(){return wt}),n.d(r,"sizeFromShape",function(){return xt}),n.d(r,"isScalarShape",function(){return Ct}),n.d(r,"arraysEqual",function(){return St}),n.d(r,"isInt",function(){return Ot}),n.d(r,"tanh",function(){return kt}),n.d(r,"sizeToSquarishShape",function(){return Et}),n.d(r,"createShuffledIndices",function(){return Tt}),n.d(r,"rightPad",function(){return zt}),n.d(r,"repeatedTry",function(){return Pt}),n.d(r,"inferFromImplicitShape",function(){return It}),n.d(r,"parseAxisParam",function(){return Mt}),n.d(r,"squeezeShape",function(){return Dt}),n.d(r,"getTypedArrayFromDType",function(){return At}),n.d(r,"getArrayFromDType",function(){return Nt}),n.d(r,"checkConversionForErrors",function(){return Rt}),n.d(r,"isValidDtype",function(){return Ft}),n.d(r,"hasEncodingLoss",function(){return $t}),n.d(r,"isTypedArray",function(){return Lt}),n.d(r,"bytesPerElement",function(){return jt}),n.d(r,"bytesFromStringArray",function(){return Bt}),n.d(r,"isString",function(){return Vt}),n.d(r,"isBoolean",function(){return Wt}),n.d(r,"isNumber",function(){return Ut}),n.d(r,"inferDtype",function(){return Ht}),n.d(r,"isFunction",function(){return Gt}),n.d(r,"nearestDivisor",function(){return qt}),n.d(r,"computeStrides",function(){return Kt}),n.d(r,"toTypedArray",function(){return Yt}),n.d(r,"toNestedArray",function(){return Xt}),n.d(r,"makeOnesTypedArray",function(){return Zt}),n.d(r,"makeZerosTypedArray",function(){return Qt}),n.d(r,"now",function(){return Jt}),n.d(r,"assertNonNegativeIntegerDimensions",function(){return te}),n.d(r,"fetch",function(){return ee}),n.d(r,"encodeString",function(){return ne}),n.d(r,"decodeString",function(){return re}),n.d(r,"locToIndex",function(){return ie}),n.d(r,"indexToLoc",function(){return se});var i={};n.r(i),n.d(i,"makeTypesMatch",function(){return Te}),n.d(i,"assertTypesMatch",function(){return ze}),n.d(i,"isTensorInList",function(){return Pe}),n.d(i,"getTensorsInContainer",function(){return Ie});var s={};n.r(s),n.d(s,"isMobile",function(){return Ne}),n.d(s,"isBrowser",function(){return Re});var o={};n.r(o),n.d(o,"assertParamsValid",function(){return Mo}),n.d(o,"maskToAxes",function(){return Do}),n.d(o,"computeOutShape",function(){return Ao}),n.d(o,"stridesWithElidedDims",function(){return No}),n.d(o,"startIndicesWithElidedDims",function(){return Ro}),n.d(o,"stopIndicesWithElidedDims",function(){return Fo}),n.d(o,"stridesForAxis",function(){return $o}),n.d(o,"startForAxis",function(){return Lo}),n.d(o,"stopForAxis",function(){return jo}),n.d(o,"isSliceContinous",function(){return Bo}),n.d(o,"computeFlatOffset",function(){return Vo});var l={};n.r(l),n.d(l,"copyModel",function(){return vl}),n.d(l,"listModels",function(){return bl}),n.d(l,"moveModel",function(){return _l}),n.d(l,"removeModel",function(){return yl}),n.d(l,"browserFiles",function(){return Kl}),n.d(l,"browserHTTPRequest",function(){return sa}),n.d(l,"concatenateArrayBuffers",function(){return il}),n.d(l,"decodeWeights",function(){return tl}),n.d(l,"encodeWeights",function(){return Jo}),n.d(l,"fromMemory",function(){return aa}),n.d(l,"getLoadHandlers",function(){return dl}),n.d(l,"getModelArtifactsInfoForJSON",function(){return ol}),n.d(l,"getSaveHandlers",function(){return hl}),n.d(l,"http",function(){return ia}),n.d(l,"isHTTPScheme",function(){return na}),n.d(l,"loadWeights",function(){return Zl}),n.d(l,"registerLoadRouter",function(){return cl}),n.d(l,"registerSaveRouter",function(){return ul}),n.d(l,"weightsLoaderFactory",function(){return Ql}),n.d(l,"withSaveHandler",function(){return ua});var a={};n.r(a),n.d(a,"confusionMatrix",function(){return ha});var u={};n.r(u),n.d(u,"toPixels",function(){return pa}),n.d(u,"fromPixels",function(){return fa});var c={};n.r(c),n.d(c,"prepareAndValidate",function(){return ga});var h={};n.r(h),n.d(h,"validateUpdateShape",function(){return ma}),n.d(h,"validateInput",function(){return ba}),n.d(h,"calculateShapes",function(){return ya});var d={};n.r(d),n.d(d,"Serializable",function(){return va}),n.d(d,"SerializationMap",function(){return _a}),n.d(d,"registerClass",function(){return wa});var p={};n.r(p),n.d(p,"TEST_EPSILON_FLOAT16",function(){return Ca}),n.d(p,"expectArraysClose",function(){return Sa}),n.d(p,"testEpsilon",function(){return Oa}),n.d(p,"expectPromiseToFail",function(){return Ea}),n.d(p,"expectArraysEqual",function(){return Ta}),n.d(p,"expectNumbersClose",function(){return za}),n.d(p,"expectValuesInRange",function(){return Ia}),n.d(p,"expectArrayBuffersEqual",function(){return Ma});var f={};n.r(f),n.d(f,"segOpComputeOptimalWindowSize",function(){return uc}),n.d(f,"computeOutShape",function(){return cc}),n.d(f,"collectGatherOpShapeInfo",function(){return hc});var g={};n.r(g),n.d(g,"fft",function(){return Gc}),n.d(g,"ifft",function(){return qc}),n.d(g,"rfft",function(){return Kc}),n.d(g,"irfft",function(){return Yc});var m={};n.r(m),n.d(m,"hannWindow",function(){return th}),n.d(m,"hammingWindow",function(){return eh}),n.d(m,"frame",function(){return nh}),n.d(m,"stft",function(){return rh});var b={};n.r(b),n.d(b,"Reduction",function(){return sh}),n.d(b,"absoluteDifference",function(){return oh}),n.d(b,"computeWeightedLoss",function(){return lh}),n.d(b,"cosineDistance",function(){return ah}),n.d(b,"hingeLoss",function(){return uh}),n.d(b,"huberLoss",function(){return ch}),n.d(b,"logLoss",function(){return hh}),n.d(b,"meanSquaredError",function(){return dh}),n.d(b,"sigmoidCrossEntropy",function(){return ph}),n.d(b,"softmaxCrossEntropy",function(){return fh});var y={};n.r(y),n.d(y,"bandPart",function(){return mh}),n.d(y,"gramSchmidt",function(){return bh}),n.d(y,"qr",function(){return yh});var v={};n.r(v),n.d(v,"nonMaxSuppression",function(){return Th}),n.d(v,"resizeBilinear",function(){return zh}),n.d(v,"resizeNearestNeighbor",function(){return Ph}),n.d(v,"nonMaxSuppressionAsync",function(){return Ih}),n.d(v,"nonMaxSuppressionWithScore",function(){return Mh}),n.d(v,"nonMaxSuppressionWithScoreAsync",function(){return Dh}),n.d(v,"cropAndResize",function(){return Ah});var _={};n.r(_),n.d(_,"matMul",function(){return Lh}),n.d(_,"conv2d",function(){return jh}),n.d(_,"depthwiseConv2d",function(){return Bh});var w={};n.r(w),n.d(w,"add",function(){return dr}),n.d(w,"addN",function(){return eu}),n.d(w,"atan2",function(){return nu}),n.d(w,"avgPool",function(){return ru}),n.d(w,"avgPool3d",function(){return iu}),n.d(w,"batchToSpaceND",function(){return Oo}),n.d(w,"batchNorm",function(){return ou}),n.d(w,"batchNorm2d",function(){return lu}),n.d(w,"batchNorm3d",function(){return au}),n.d(w,"batchNorm4d",function(){return uu}),n.d(w,"broadcastTo",function(){return hu}),n.d(w,"clone",function(){return cu}),n.d(w,"complex",function(){return gr}),n.d(w,"concat",function(){return Ar}),n.d(w,"concat1d",function(){return du}),n.d(w,"concat2d",function(){return pu}),n.d(w,"concat3d",function(){return fu}),n.d(w,"concat4d",function(){return gu}),n.d(w,"conv1d",function(){return mu}),n.d(w,"conv2d",function(){return Es}),n.d(w,"conv2dTranspose",function(){return bu}),n.d(w,"conv3d",function(){return yu}),n.d(w,"conv3dTranspose",function(){return vu}),n.d(w,"cumsum",function(){return Ds}),n.d(w,"depthToSpace",function(){return _u}),n.d(w,"depthwiseConv2d",function(){return wu}),n.d(w,"diag",function(){return xu}),n.d(w,"div",function(){return Hr}),n.d(w,"divNoNan",function(){return Cu}),n.d(w,"dot",function(){return Su}),n.d(w,"elu",function(){return Ou}),n.d(w,"equal",function(){return ku}),n.d(w,"eye",function(){return Eu}),n.d(w,"fill",function(){return Tu}),n.d(w,"floorDiv",function(){return Ur}),n.d(w,"greater",function(){return no}),n.d(w,"greaterEqual",function(){return Ys}),n.d(w,"imag",function(){return mr}),n.d(w,"leakyRelu",function(){return Pu}),n.d(w,"less",function(){return Xs}),n.d(w,"lessEqual",function(){return ro}),n.d(w,"localResponseNormalization",function(){return Iu}),n.d(w,"matMul",function(){return bs}),n.d(w,"max",function(){return Mu}),n.d(w,"maxPool",function(){return Du}),n.d(w,"maxPool3d",function(){return Au}),n.d(w,"maxPoolWithArgmax",function(){return Nu}),n.d(w,"maximum",function(){return zu}),n.d(w,"minimum",function(){return Ru}),n.d(w,"mod",function(){return Fu}),n.d(w,"mul",function(){return Gr}),n.d(w,"multinomial",function(){return $u}),n.d(w,"notEqual",function(){return Lu}),n.d(w,"oneHot",function(){return ca}),n.d(w,"outerProduct",function(){return ju}),n.d(w,"pad",function(){return Io}),n.d(w,"pad1d",function(){return Bu}),n.d(w,"pad2d",function(){return Vu}),n.d(w,"pad3d",function(){return Wu}),n.d(w,"pad4d",function(){return Uu}),n.d(w,"pool",function(){return Hu}),n.d(w,"pow",function(){return bo}),n.d(w,"prelu",function(){return Gu}),n.d(w,"rand",function(){return qu}),n.d(w,"randomGamma",function(){return Qu}),n.d(w,"randomNormal",function(){return Ju}),n.d(w,"randomUniform",function(){return tc}),n.d(w,"real",function(){return br}),n.d(w,"relu",function(){return ec}),n.d(w,"relu6",function(){return nc}),n.d(w,"selu",function(){return rc}),n.d(w,"separableConv2d",function(){return ic}),n.d(w,"spaceToBatchND",function(){return vs}),n.d(w,"split",function(){return xs}),n.d(w,"square",function(){return vi}),n.d(w,"squaredDifference",function(){return sc}),n.d(w,"sub",function(){return Bs}),n.d(w,"tile",function(){return Vs}),n.d(w,"truncatedNormal",function(){return oc}),n.d(w,"op",function(){return hr}),n.d(w,"image",function(){return v}),n.d(w,"linalg",function(){return y}),n.d(w,"losses",function(){return b}),n.d(w,"spectral",function(){return g}),n.d(w,"fused",function(){return _}),n.d(w,"signal",function(){return m}),n.d(w,"booleanMaskAsync",function(){return mc}),n.d(w,"reverse",function(){return bc}),n.d(w,"reverse1d",function(){return yc}),n.d(w,"reverse2d",function(){return vc}),n.d(w,"reverse3d",function(){return _c}),n.d(w,"reverse4d",function(){return wc}),n.d(w,"slice",function(){return Wo}),n.d(w,"slice1d",function(){return Uo}),n.d(w,"slice2d",function(){return Ho}),n.d(w,"slice3d",function(){return Go}),n.d(w,"slice4d",function(){return qo}),n.d(w,"abs",function(){return _i}),n.d(w,"acos",function(){return wi}),n.d(w,"acosh",function(){return xi}),n.d(w,"asin",function(){return Ci}),n.d(w,"asinh",function(){return Si}),n.d(w,"atan",function(){return Oi}),n.d(w,"atanh",function(){return ki}),n.d(w,"ceil",function(){return Ei}),n.d(w,"clipByValue",function(){return Ti}),n.d(w,"cos",function(){return zi}),n.d(w,"cosh",function(){return Pi}),n.d(w,"erf",function(){return Ii}),n.d(w,"exp",function(){return Mi}),n.d(w,"expm1",function(){return Di}),n.d(w,"floor",function(){return Ai}),n.d(w,"log",function(){return Ni}),n.d(w,"log1p",function(){return Ri}),n.d(w,"logSigmoid",function(){return Fi}),n.d(w,"neg",function(){return $i}),n.d(w,"reciprocal",function(){return Li}),n.d(w,"round",function(){return ji}),n.d(w,"rsqrt",function(){return Bi}),n.d(w,"sigmoid",function(){return Vi}),n.d(w,"sign",function(){return Wi}),n.d(w,"isNaN",function(){return Ui}),n.d(w,"isInf",function(){return Hi}),n.d(w,"isFinite",function(){return Gi}),n.d(w,"sin",function(){return qi}),n.d(w,"sinh",function(){return Ki}),n.d(w,"softplus",function(){return Yi}),n.d(w,"sqrt",function(){return Xi}),n.d(w,"step",function(){return Zi}),n.d(w,"tan",function(){return Qi}),n.d(w,"tanh",function(){return Ji}),n.d(w,"all",function(){return ui}),n.d(w,"any",function(){return ci}),n.d(w,"argMax",function(){return hi}),n.d(w,"argMin",function(){return di}),n.d(w,"logSumExp",function(){return pi}),n.d(w,"mean",function(){return fi}),n.d(w,"min",function(){return gi}),n.d(w,"moments",function(){return mi}),n.d(w,"sum",function(){return bi}),n.d(w,"prod",function(){return yi}),n.d(w,"equalStrict",function(){return xc}),n.d(w,"greaterEqualStrict",function(){return Cc}),n.d(w,"greaterStrict",function(){return Sc}),n.d(w,"lessEqualStrict",function(){return Oc}),n.d(w,"lessStrict",function(){return kc}),n.d(w,"notEqualStrict",function(){return Ec}),n.d(w,"addStrict",function(){return Tc}),n.d(w,"divStrict",function(){return zc}),n.d(w,"maximumStrict",function(){return Pc}),n.d(w,"minimumStrict",function(){return Ic}),n.d(w,"modStrict",function(){return Mc}),n.d(w,"mulStrict",function(){return Dc}),n.d(w,"powStrict",function(){return Ac}),n.d(w,"squaredDifferenceStrict",function(){return Nc}),n.d(w,"subStrict",function(){return Rc}),n.d(w,"logicalAnd",function(){return co}),n.d(w,"logicalNot",function(){return ho}),n.d(w,"logicalOr",function(){return po}),n.d(w,"logicalXor",function(){return fo}),n.d(w,"where",function(){return go}),n.d(w,"whereAsync",function(){return mo}),n.d(w,"buffer",function(){return Nr}),n.d(w,"print",function(){return Rr}),n.d(w,"cast",function(){return Fr}),n.d(w,"expandDims",function(){return $r}),n.d(w,"reshape",function(){return Lr}),n.d(w,"squeeze",function(){return jr}),n.d(w,"stack",function(){return Br}),n.d(w,"unstack",function(){return Vr}),n.d(w,"setdiff1dAsync",function(){return Wr}),n.d(w,"linspace",function(){return Pr}),n.d(w,"ones",function(){return Tr}),n.d(w,"range",function(){return Ir}),n.d(w,"scalar",function(){return _r}),n.d(w,"tensor",function(){return yr}),n.d(w,"tensor1d",function(){return wr}),n.d(w,"tensor2d",function(){return xr}),n.d(w,"tensor3d",function(){return Cr}),n.d(w,"tensor4d",function(){return Sr}),n.d(w,"tensor5d",function(){return Or}),n.d(w,"tensor6d",function(){return kr}),n.d(w,"variable",function(){return Er}),n.d(w,"zeros",function(){return zr}),n.d(w,"onesLike",function(){return Mr}),n.d(w,"zerosLike",function(){return Dr}),n.d(w,"transpose",function(){return Ms}),n.d(w,"softmax",function(){return Fc}),n.d(w,"logSoftmax",function(){return $c}),n.d(w,"norm",function(){return Lc}),n.d(w,"gather",function(){return fc}),n.d(w,"unsortedSegmentSum",function(){return gc}),n.d(w,"basicLSTMCell",function(){return jc}),n.d(w,"multiRNNCell",function(){return Bc}),n.d(w,"movingAverage",function(){return Vc}),n.d(w,"stridedSlice",function(){return Wc}),n.d(w,"topk",function(){return Uc}),n.d(w,"scatterND",function(){return Hc}),n.d(w,"fft",function(){return Gc}),n.d(w,"ifft",function(){return qc}),n.d(w,"rfft",function(){return Kc}),n.d(w,"irfft",function(){return Yc}),n.d(w,"sparseToDense",function(){return Xc}),n.d(w,"gatherND",function(){return Zc}),n.d(w,"dropout",function(){return Qc}),n.d(w,"hannWindow",function(){return th}),n.d(w,"hammingWindow",function(){return eh}),n.d(w,"frame",function(){return nh}),n.d(w,"stft",function(){return rh}),n.d(w,"inTopKAsync",function(){return ih});var x={};n.r(x),n.d(x,"nonMaxSuppressionV3",function(){return wh}),n.d(x,"nonMaxSuppressionV5",function(){return xh}),n.d(x,"upcastType",function(){return ke}),n.d(x,"prepareAndValidate",function(){return ga}),n.d(x,"validateUpdateShape",function(){return ma}),n.d(x,"validateInput",function(){return ba}),n.d(x,"calculateShapes",function(){return ya}),n.d(x,"segment_util",function(){return f}),n.d(x,"castTensor",function(){return wd}),n.d(x,"reshapeTensor",function(){return xd}),n.d(x,"linspaceImpl",function(){return Cd}),n.d(x,"axesAreInnerMostDims",function(){return ti}),n.d(x,"combineLocations",function(){return ei}),n.d(x,"computeOutAndReduceShapes",function(){return ni}),n.d(x,"expandShapeToKeepDim",function(){return ri}),n.d(x,"assertAxesAreInnerMostDims",function(){return ii}),n.d(x,"getAxesPermutation",function(){return si}),n.d(x,"getUndoAxesPermutation",function(){return oi}),n.d(x,"getInnerMostAxes",function(){return li}),n.d(x,"getBroadcastDims",function(){return nr}),n.d(x,"getReductionAxes",function(){return rr}),n.d(x,"assertAndGetBroadcastShape",function(){return ir}),n.d(x,"assertParamsConsistent",function(){return pr}),n.d(x,"computeOutShape",function(){return fr}),n.d(x,"computePool2DInfo",function(){return es}),n.d(x,"computePool3DInfo",function(){return ns}),n.d(x,"computeConv2DInfo",function(){return rs}),n.d(x,"computeConv3DInfo",function(){return is}),n.d(x,"computeDefaultPad",function(){return ss}),n.d(x,"tupleValuesAreOne",function(){return cs}),n.d(x,"eitherStridesOrDilationsAreOne",function(){return hs}),n.d(x,"convertConv2DDataFormat",function(){return ds}),n.d(x,"PARALLELIZE_THRESHOLD",function(){return lc}),n.d(x,"computeOptimalWindowSize",function(){return ac}),n.d(x,"getReshaped",function(){return td}),n.d(x,"getPermuted",function(){return ed}),n.d(x,"getReshapedPermuted",function(){return nd}),n.d(x,"getSliceBeginCoords",function(){return rd}),n.d(x,"getSliceSize",function(){return id}),n.d(x,"SELU_SCALEALPHA",function(){return xo}),n.d(x,"SELU_SCALE",function(){return Co}),n.d(x,"shouldFuse",function(){return Nh}),n.d(x,"ERF_P",function(){return sd}),n.d(x,"ERF_A1",function(){return od}),n.d(x,"ERF_A2",function(){return ld}),n.d(x,"ERF_A3",function(){return ad}),n.d(x,"ERF_A4",function(){return ud}),n.d(x,"ERF_A5",function(){return cd}),n.d(x,"warn",function(){return hd}),n.d(x,"log",function(){return dd}),n.d(x,"mergeRealAndImagArrays",function(){return pd}),n.d(x,"splitRealAndImagArrays",function(){return fd}),n.d(x,"complexWithEvenIndex",function(){return gd}),n.d(x,"complexWithOddIndex",function(){return md}),n.d(x,"getComplexWithIndex",function(){return bd}),n.d(x,"assignToTypedArray",function(){return yd}),n.d(x,"exponents",function(){return vd}),n.d(x,"exponent",function(){return _d});var C={};n.r(C),n.d(C,"nonMaxSuppressionV3",function(){return wh}),n.d(C,"nonMaxSuppressionV5",function(){return xh}),n.d(C,"split",function(){return Sd}),n.d(C,"tile",function(){return Od}),n.d(C,"topkImpl",function(){return kd}),n.d(C,"whereImpl",function(){return uo});var S={};n.r(S),n.d(S,"AdadeltaOptimizer",function(){return Wh}),n.d(S,"AdagradOptimizer",function(){return Uh}),n.d(S,"AdamOptimizer",function(){return Hh}),n.d(S,"AdamaxOptimizer",function(){return Gh}),n.d(S,"MomentumOptimizer",function(){return Kh}),n.d(S,"Optimizer",function(){return Vh}),n.d(S,"RMSPropOptimizer",function(){return Yh}),n.d(S,"SGDOptimizer",function(){return qh}),n.d(S,"Tensor",function(){return ye}),n.d(S,"TensorBuffer",function(){return fe}),n.d(S,"Variable",function(){return ve}),n.d(S,"Rank",function(){return _e}),n.d(S,"sumOutType",function(){return Ee}),n.d(S,"upcastType",function(){return ke}),n.d(S,"Reduction",function(){return sh}),n.d(S,"customGrad",function(){return Qr}),n.d(S,"grad",function(){return qr}),n.d(S,"grads",function(){return Kr}),n.d(S,"valueAndGrad",function(){return Yr}),n.d(S,"valueAndGrads",function(){return Xr}),n.d(S,"variableGrads",function(){return Zr}),n.d(S,"Environment",function(){return X}),n.d(S,"env",function(){return Z}),n.d(S,"ENV",function(){return J}),n.d(S,"version_core",function(){return Da}),n.d(S,"nextFrame",function(){return Jh}),n.d(S,"browser",function(){return u}),n.d(S,"io",function(){return l}),n.d(S,"math",function(){return a}),n.d(S,"serialization",function(){return d}),n.d(S,"test_util",function(){return p}),n.d(S,"util",function(){return r}),n.d(S,"backend_util",function(){return x}),n.d(S,"tensor_util",function(){return i}),n.d(S,"slice_util",function(){return o}),n.d(S,"gather_util",function(){return c}),n.d(S,"scatter_util",function(){return h}),n.d(S,"device_util",function(){return s}),n.d(S,"kernel_impls",function(){return C}),n.d(S,"KernelBackend",function(){return Pd}),n.d(S,"DataStorage",function(){return zd}),n.d(S,"add",function(){return dr}),n.d(S,"addN",function(){return eu}),n.d(S,"atan2",function(){return nu}),n.d(S,"avgPool",function(){return ru}),n.d(S,"avgPool3d",function(){return iu}),n.d(S,"batchToSpaceND",function(){return Oo}),n.d(S,"batchNorm",function(){return ou}),n.d(S,"batchNorm2d",function(){return lu}),n.d(S,"batchNorm3d",function(){return au}),n.d(S,"batchNorm4d",function(){return uu}),n.d(S,"broadcastTo",function(){return hu}),n.d(S,"clone",function(){return cu}),n.d(S,"complex",function(){return gr}),n.d(S,"concat",function(){return Ar}),n.d(S,"concat1d",function(){return du}),n.d(S,"concat2d",function(){return pu}),n.d(S,"concat3d",function(){return fu}),n.d(S,"concat4d",function(){return gu}),n.d(S,"conv1d",function(){return mu}),n.d(S,"conv2d",function(){return Es}),n.d(S,"conv2dTranspose",function(){return bu}),n.d(S,"conv3d",function(){return yu}),n.d(S,"conv3dTranspose",function(){return vu}),n.d(S,"cumsum",function(){return Ds}),n.d(S,"depthToSpace",function(){return _u}),n.d(S,"depthwiseConv2d",function(){return wu}),n.d(S,"diag",function(){return xu}),n.d(S,"div",function(){return Hr}),n.d(S,"divNoNan",function(){return Cu}),n.d(S,"dot",function(){return Su}),n.d(S,"elu",function(){return Ou}),n.d(S,"equal",function(){return ku}),n.d(S,"eye",function(){return Eu}),n.d(S,"fill",function(){return Tu}),n.d(S,"floorDiv",function(){return Ur}),n.d(S,"greater",function(){return no}),n.d(S,"greaterEqual",function(){return Ys}),n.d(S,"imag",function(){return mr}),n.d(S,"leakyRelu",function(){return Pu}),n.d(S,"less",function(){return Xs}),n.d(S,"lessEqual",function(){return ro}),n.d(S,"localResponseNormalization",function(){return Iu}),n.d(S,"matMul",function(){return bs}),n.d(S,"max",function(){return Mu}),n.d(S,"maxPool",function(){return Du}),n.d(S,"maxPool3d",function(){return Au}),n.d(S,"maxPoolWithArgmax",function(){return Nu}),n.d(S,"maximum",function(){return zu}),n.d(S,"minimum",function(){return Ru}),n.d(S,"mod",function(){return Fu}),n.d(S,"mul",function(){return Gr}),n.d(S,"multinomial",function(){return $u}),n.d(S,"notEqual",function(){return Lu}),n.d(S,"oneHot",function(){return ca}),n.d(S,"outerProduct",function(){return ju}),n.d(S,"pad",function(){return Io}),n.d(S,"pad1d",function(){return Bu}),n.d(S,"pad2d",function(){return Vu}),n.d(S,"pad3d",function(){return Wu}),n.d(S,"pad4d",function(){return Uu}),n.d(S,"pool",function(){return Hu}),n.d(S,"pow",function(){return bo}),n.d(S,"prelu",function(){return Gu}),n.d(S,"rand",function(){return qu}),n.d(S,"randomGamma",function(){return Qu}),n.d(S,"randomNormal",function(){return Ju}),n.d(S,"randomUniform",function(){return tc}),n.d(S,"real",function(){return br}),n.d(S,"relu",function(){return ec}),n.d(S,"relu6",function(){return nc}),n.d(S,"selu",function(){return rc}),n.d(S,"separableConv2d",function(){return ic}),n.d(S,"spaceToBatchND",function(){return vs}),n.d(S,"split",function(){return xs}),n.d(S,"square",function(){return vi}),n.d(S,"squaredDifference",function(){return sc}),n.d(S,"sub",function(){return Bs}),n.d(S,"tile",function(){return Vs}),n.d(S,"truncatedNormal",function(){return oc}),n.d(S,"op",function(){return hr}),n.d(S,"image",function(){return v}),n.d(S,"linalg",function(){return y}),n.d(S,"losses",function(){return b}),n.d(S,"spectral",function(){return g}),n.d(S,"fused",function(){return _}),n.d(S,"signal",function(){return m}),n.d(S,"train",function(){return Zh}),n.d(S,"enableProdMode",function(){return Aa}),n.d(S,"enableDebugMode",function(){return Na}),n.d(S,"disableDeprecationWarnings",function(){return Ra}),n.d(S,"deprecationWarn",function(){return Fa}),n.d(S,"disposeVariables",function(){return $a}),n.d(S,"engine",function(){return La}),n.d(S,"memory",function(){return ja}),n.d(S,"profile",function(){return Ba}),n.d(S,"tidy",function(){return Va}),n.d(S,"dispose",function(){return Wa}),n.d(S,"keep",function(){return Ua}),n.d(S,"time",function(){return Ha}),n.d(S,"setBackend",function(){return Ga}),n.d(S,"ready",function(){return qa}),n.d(S,"getBackend",function(){return Ka}),n.d(S,"removeBackend",function(){return Ya}),n.d(S,"findBackend",function(){return Xa}),n.d(S,"findBackendFactory",function(){return Za}),n.d(S,"registerBackend",function(){return Qa}),n.d(S,"backend",function(){return Ja}),n.d(S,"setPlatform",function(){return tu}),n.d(S,"getKernel",function(){return it}),n.d(S,"getGradient",function(){return st}),n.d(S,"getKernelsForBackend",function(){return ot}),n.d(S,"registerKernel",function(){return lt}),n.d(S,"registerGradient",function(){return at}),n.d(S,"unregisterKernel",function(){return ut}),n.d(S,"unregisterGradient",function(){return ct}),n.d(S,"Add",function(){return $e}),n.d(S,"AddN",function(){return Le}),n.d(S,"Atan2",function(){return je}),n.d(S,"AvgPool",function(){return Be}),n.d(S,"AvgPoolBackprop",function(){return Ve}),n.d(S,"AvgPool3D",function(){return We}),n.d(S,"AvgPool3DBackprop",function(){return Ue}),n.d(S,"BatchMatMul",function(){return He}),n.d(S,"BatchToSpaceND",function(){return Ge}),n.d(S,"BroadcastTo",function(){return qe}),n.d(S,"Complex",function(){return Ke}),n.d(S,"Concat",function(){return Ye}),n.d(S,"Conv2D",function(){return Xe}),n.d(S,"Conv2DBackpropFilter",function(){return Ze}),n.d(S,"Conv2DBackpropInput",function(){return Qe}),n.d(S,"Conv3D",function(){return Je}),n.d(S,"Conv3DBackpropFilterV2",function(){return tn}),n.d(S,"Conv3DBackpropInputV2",function(){return en}),n.d(S,"Cumsum",function(){return nn}),n.d(S,"DepthToSpace",function(){return rn}),n.d(S,"DepthwiseConv2dNative",function(){return sn}),n.d(S,"DepthwiseConv2dNativeBackpropFilter",function(){return on}),n.d(S,"DepthwiseConv2dNativeBackpropInput",function(){return ln}),n.d(S,"Diag",function(){return an}),n.d(S,"Div",function(){return un}),n.d(S,"Elu",function(){return cn}),n.d(S,"EluGrad",function(){return hn}),n.d(S,"Equal",function(){return dn}),n.d(S,"FloorDiv",function(){return pn}),n.d(S,"Fill",function(){return fn}),n.d(S,"FusedBatchNorm",function(){return gn}),n.d(S,"GatherNd",function(){return mn}),n.d(S,"Greater",function(){return bn}),n.d(S,"GreaterEqual",function(){return yn}),n.d(S,"Identity",function(){return vn}),n.d(S,"Imag",function(){return _n}),n.d(S,"Less",function(){return wn}),n.d(S,"LessEqual",function(){return xn}),n.d(S,"LRN",function(){return Cn}),n.d(S,"LRNBackprop",function(){return Sn}),n.d(S,"Max",function(){return On}),n.d(S,"Maximum",function(){return kn}),n.d(S,"MaxPool",function(){return En}),n.d(S,"MaxPoolBackprop",function(){return Tn}),n.d(S,"MaxPool3D",function(){return zn}),n.d(S,"MaxPool3DBackprop",function(){return Pn}),n.d(S,"MaxPoolWithArgmax",function(){return In}),n.d(S,"Minimum",function(){return Mn}),n.d(S,"Mod",function(){return Dn}),n.d(S,"Multiply",function(){return An}),n.d(S,"NotEqual",function(){return Nn}),n.d(S,"NonMaxSuppressionV3",function(){return Rn}),n.d(S,"NonMaxSuppressionV5",function(){return Fn}),n.d(S,"OneHot",function(){return $n}),n.d(S,"PadV2",function(){return Ln}),n.d(S,"Pool",function(){return jn}),n.d(S,"Pow",function(){return Bn}),n.d(S,"Prelu",function(){return Vn}),n.d(S,"Real",function(){return Wn}),n.d(S,"Relu",function(){return Un}),n.d(S,"Relu6",function(){return Hn}),n.d(S,"SelectV2",function(){return Gn}),n.d(S,"Selu",function(){return qn}),n.d(S,"SpaceToBatchND",function(){return Kn}),n.d(S,"SplitV",function(){return Yn}),n.d(S,"SquaredDifference",function(){return Xn}),n.d(S,"Square",function(){return Zn}),n.d(S,"Sub",function(){return Qn}),n.d(S,"Tile",function(){return Jn}),n.d(S,"Transpose",function(){return tr}),n.d(S,"FromPixels",function(){return er}),n.d(S,"booleanMaskAsync",function(){return mc}),n.d(S,"reverse",function(){return bc}),n.d(S,"reverse1d",function(){return yc}),n.d(S,"reverse2d",function(){return vc}),n.d(S,"reverse3d",function(){return _c}),n.d(S,"reverse4d",function(){return wc}),n.d(S,"slice",function(){return Wo}),n.d(S,"slice1d",function(){return Uo}),n.d(S,"slice2d",function(){return Ho}),n.d(S,"slice3d",function(){return Go}),n.d(S,"slice4d",function(){return qo}),n.d(S,"abs",function(){return _i}),n.d(S,"acos",function(){return wi}),n.d(S,"acosh",function(){return xi}),n.d(S,"asin",function(){return Ci}),n.d(S,"asinh",function(){return Si}),n.d(S,"atan",function(){return Oi}),n.d(S,"atanh",function(){return ki}),n.d(S,"ceil",function(){return Ei}),n.d(S,"clipByValue",function(){return Ti}),n.d(S,"cos",function(){return zi}),n.d(S,"cosh",function(){return Pi}),n.d(S,"erf",function(){return Ii}),n.d(S,"exp",function(){return Mi}),n.d(S,"expm1",function(){return Di}),n.d(S,"floor",function(){return Ai}),n.d(S,"log",function(){return Ni}),n.d(S,"log1p",function(){return Ri}),n.d(S,"logSigmoid",function(){return Fi}),n.d(S,"neg",function(){return $i}),n.d(S,"reciprocal",function(){return Li}),n.d(S,"round",function(){return ji}),n.d(S,"rsqrt",function(){return Bi}),n.d(S,"sigmoid",function(){return Vi}),n.d(S,"sign",function(){return Wi}),n.d(S,"isNaN",function(){return Ui}),n.d(S,"isInf",function(){return Hi}),n.d(S,"isFinite",function(){return Gi}),n.d(S,"sin",function(){return qi}),n.d(S,"sinh",function(){return Ki}),n.d(S,"softplus",function(){return Yi}),n.d(S,"sqrt",function(){return Xi}),n.d(S,"step",function(){return Zi}),n.d(S,"tan",function(){return Qi}),n.d(S,"tanh",function(){return Ji}),n.d(S,"all",function(){return ui}),n.d(S,"any",function(){return ci}),n.d(S,"argMax",function(){return hi}),n.d(S,"argMin",function(){return di}),n.d(S,"logSumExp",function(){return pi}),n.d(S,"mean",function(){return fi}),n.d(S,"min",function(){return gi}),n.d(S,"moments",function(){return mi}),n.d(S,"sum",function(){return bi}),n.d(S,"prod",function(){return yi}),n.d(S,"equalStrict",function(){return xc}),n.d(S,"greaterEqualStrict",function(){return Cc}),n.d(S,"greaterStrict",function(){return Sc}),n.d(S,"lessEqualStrict",function(){return Oc}),n.d(S,"lessStrict",function(){return kc}),n.d(S,"notEqualStrict",function(){return Ec}),n.d(S,"addStrict",function(){return Tc}),n.d(S,"divStrict",function(){return zc}),n.d(S,"maximumStrict",function(){return Pc}),n.d(S,"minimumStrict",function(){return Ic}),n.d(S,"modStrict",function(){return Mc}),n.d(S,"mulStrict",function(){return Dc}),n.d(S,"powStrict",function(){return Ac}),n.d(S,"squaredDifferenceStrict",function(){return Nc}),n.d(S,"subStrict",function(){return Rc}),n.d(S,"logicalAnd",function(){return co}),n.d(S,"logicalNot",function(){return ho}),n.d(S,"logicalOr",function(){return po}),n.d(S,"logicalXor",function(){return fo}),n.d(S,"where",function(){return go}),n.d(S,"whereAsync",function(){return mo}),n.d(S,"buffer",function(){return Nr}),n.d(S,"print",function(){return Rr}),n.d(S,"cast",function(){return Fr}),n.d(S,"expandDims",function(){return $r}),n.d(S,"reshape",function(){return Lr}),n.d(S,"squeeze",function(){return jr}),n.d(S,"stack",function(){return Br}),n.d(S,"unstack",function(){return Vr}),n.d(S,"setdiff1dAsync",function(){return Wr}),n.d(S,"linspace",function(){return Pr}),n.d(S,"ones",function(){return Tr}),n.d(S,"range",function(){return Ir}),n.d(S,"scalar",function(){return _r}),n.d(S,"tensor",function(){return yr}),n.d(S,"tensor1d",function(){return wr}),n.d(S,"tensor2d",function(){return xr}),n.d(S,"tensor3d",function(){return Cr}),n.d(S,"tensor4d",function(){return Sr}),n.d(S,"tensor5d",function(){return Or}),n.d(S,"tensor6d",function(){return kr}),n.d(S,"variable",function(){return Er}),n.d(S,"zeros",function(){return zr}),n.d(S,"onesLike",function(){return Mr}),n.d(S,"zerosLike",function(){return Dr}),n.d(S,"transpose",function(){return Ms}),n.d(S,"softmax",function(){return Fc}),n.d(S,"logSoftmax",function(){return $c}),n.d(S,"norm",function(){return Lc}),n.d(S,"gather",function(){return fc}),n.d(S,"unsortedSegmentSum",function(){return gc}),n.d(S,"basicLSTMCell",function(){return jc}),n.d(S,"multiRNNCell",function(){return Bc}),n.d(S,"movingAverage",function(){return Vc}),n.d(S,"stridedSlice",function(){return Wc}),n.d(S,"topk",function(){return Uc}),n.d(S,"scatterND",function(){return Hc}),n.d(S,"fft",function(){return Gc}),n.d(S,"ifft",function(){return qc}),n.d(S,"rfft",function(){return Kc}),n.d(S,"irfft",function(){return Yc}),n.d(S,"sparseToDense",function(){return Xc}),n.d(S,"gatherND",function(){return Zc}),n.d(S,"dropout",function(){return Qc}),n.d(S,"hannWindow",function(){return th}),n.d(S,"hammingWindow",function(){return eh}),n.d(S,"frame",function(){return nh}),n.d(S,"stft",function(){return rh}),n.d(S,"inTopKAsync",function(){return ih});var O={};n.r(O),n.d(O,"json",function(){return Vd});var k={};n.r(k),n.d(k,"json",function(){return Wd});var E={};n.r(E),n.d(E,"json",function(){return Ud});var T={};n.r(T),n.d(T,"json",function(){return Hd});var z={};n.r(z),n.d(z,"json",function(){return Gd});var P={};n.r(P),n.d(P,"json",function(){return qd});var I={};n.r(I),n.d(I,"json",function(){return Kd});var M={};n.r(M),n.d(M,"json",function(){return Yd});var D={};n.r(D),n.d(D,"json",function(){return Xd});var A={};n.r(A),n.d(A,"json",function(){return Zd});var N={};n.r(N),n.d(N,"json",function(){return Qd});var R={};n.r(R),n.d(R,"json",function(){return Jd});var F={};n.r(F),n.d(F,"json",function(){return tp});var $={};n.r($),n.d($,"json",function(){return ep});var L={};n.r(L),n.d(L,"json",function(){return np});var j={};n.r(j),n.d(j,"json",function(){return rp});var B={};n.r(B),n.d(B,"maxImpl",function(){return R_}),n.d(B,"transposeImpl",function(){return F_});var V=n("mrSG"),W=n("yrbL"),U=n("DQLy"),H=n("XNiG"),G=n("hLrw"),q=n("calH"),K=n("kujU");const Y="tfjsflags";class X{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. `+`Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(e instanceof Promise)throw new Error(`Flag ${t} cannot be synchronously evaluated. `+"Please use getAsync() instead.");return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=function(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(t,...n)=>(function(t,e,r){t[decodeURIComponent(n[0])]=decodeURIComponent(r||"")}(e,0,n[1]),n.join("="))),e}(this.global.location.search);Y in t&&t[Y].split(",").forEach(t=>{const[e,n]=t.split(":");this.urlFlags[e]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(`${+e}`===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}(e,n)})}}function Z(){return J}let Q,J=null;function tt(){if(null==Q){let t;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof global)t=global;else if("undefined"!=typeof process)t=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}Q=t}return Q}function et(t,e){const n=function(){const t=tt();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const nt=et("kernelRegistry",()=>new Map),rt=et("gradRegistry",()=>new Map);function it(t,e){const n=ht(t,e);return nt.get(n)}function st(t){return rt.get(t)}function ot(t){const e=nt.entries(),n=[];for(;;){const{done:r,value:i}=e.next();if(r)break;const[s,o]=i,[l]=s.split("_");l===t&&n.push(o)}return n}function lt(t){const{kernelName:e,backendName:n}=t,r=ht(e,n);nt.has(r)&&console.warn(`The kernel '${e}' for backend `+`'${n}' is already registered`),nt.set(r,t)}function at(t){const{kernelName:e}=t;rt.has(e)&&console.warn(`Overriding the gradient for '${e}'`),rt.set(e,t)}function ut(t,e){const n=ht(t,e);if(!nt.has(n))throw new Error(`The kernel '${t}' for backend `+`'${e}' is not registered`);nt.delete(n)}function ct(t){if(!rt.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);rt.delete(t)}function ht(t,e){return`${e}_${t}`}function dt(t){let e=t.length,n=0,r=0;for(;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function pt(t,e,n){return Math.max(t,Math.min(e,n))}function ft(t){return t%2==0?t:t+1}function gt(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function mt(t,e){const n=Math.random();return e*n+(1-n)*t}function bt(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function yt(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function vt(t,e,n=""){yt(St(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function _t(t){yt(null!=t,()=>"The input to the tensor constructor must be a non-null value.")}function wt(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||Lt(t)&&!n)for(let r=0;r<t.length;++r)wt(t[r],e,n);else e.push(t);return e}function xt(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Ct(t){return 0===t.length}function St(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Ot(t){return t%1==0}function kt(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function Et(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Tt(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return dt(e),e}function zt(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function Pt(t,e=(t=>0),n){return new Promise((r,i)=>{let s=0;const o=()=>{if(t())return void r();const l=e(++s);null!=n&&s>=n?i():setTimeout(o,l)};o()})}function It(t,e){let n=1,r=-1;for(let s=0;s<t.length;++s)if(t[s]>=0)n*=t[s];else if(-1===t[s]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+`Found -1 at dim ${r} and dim ${s}`);r=s}else if(t[s]<0)throw Error(`Shapes can not be < 0. Found ${t[s]} at dim ${s}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when `+"there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. "+`Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function Mt(t,e){const n=e.length;return yt((t=null==t?e.map((t,e)=>e):[].concat(t)).every(t=>t>=-n&&t<n),()=>`All values in axis param must be in range [-${n}, ${n}) but `+`got axis ${t}`),yt(t.every(t=>Ot(t)),()=>"All values in axis param must be integers but "+`got axis ${t}`),t.map(t=>t<0?n+t:t)}function Dt(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,s=null==e||i?null:Mt(e,t).sort();let o=0;for(let l=0;l<t.length;++l){if(null!=s){if(s[o]===l&&1!==t[l])throw new Error(`Can't squeeze axis ${l} since its dim '${t[l]}' is not 1`);(null==s[o]||s[o]>l)&&1===t[l]&&(n.push(t[l]),r.push(l)),s[o]<=l&&o++}1!==t[l]&&(n.push(t[l]),r.push(l))}return{newShape:n,keptDims:r}}function At(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);n=new Uint8Array(e)}return n}function Nt(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);n=new Array(e)}return n}function Rt(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function Ft(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function $t(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function Lt(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function jt(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function Bt(t){if(null==t)return 0;let e=0;return t.forEach(t=>e+=t.length),e}function Vt(t){return"string"==typeof t||t instanceof String}function Wt(t){return"boolean"==typeof t}function Ut(t){return"number"==typeof t}function Ht(t){return Array.isArray(t)?Ht(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Ut(t)?"float32":Vt(t)?"string":Wt(t)?"bool":"float32"}function Gt(t){return!!(t&&t.constructor&&t.call&&t.apply)}function qt(t,e){for(let n=e;n<t;++n)if(t%n==0)return n;return t}function Kt(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function Yt(t,e,n){if("string"===e)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=wt(t)),n&&Rt(t,e),function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e))return t;if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e){const e=new Uint8Array(t.length);for(let n=0;n<e.length;++n)0!==Math.round(t[n])&&(e[n]=1);return e}throw new Error(`Unknown data type ${e}`)}function Xt(t,e){if(0===t.length)return e[0];const n=t.reduce((t,e)=>t*e);if(0===n)return[];if(n!==e.length)throw new Error(`[${t}] does not match the input size.`);return function t(e,n,r){const i=new Array;if(1===n.length){const t=n[0];for(let n=0;n<t;n++)i[n]=r[e+n]}else{const s=n[0],o=n.slice(1),l=o.reduce((t,e)=>t*e);for(let n=0;n<s;n++)i[n]=t(e+n*l,o,r)}return i}(0,t,e)}function Zt(t,e){const n=Qt(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Qt(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function Jt(){return Z().platform.now()}function te(t){t.forEach(e=>{yt(Number.isInteger(e)&&e>=0,()=>"Tensor must have a shape comprised of positive integers but got "+`shape [${t}].`)})}function ee(t,e){return Z().platform.fetch(t,e)}function ne(t,e="utf-8"){return e=e||"utf-8",Z().platform.encode(t,e)}function re(t,e="utf-8"){return e=e||"utf-8",Z().platform.decode(t,e)}function ie(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let i=0;i<t.length-1;++i)r+=n[i]*t[i];return r}function se(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let i=0;i<r.length-1;++i)r[i]=Math.floor(t/n[i]),t-=r[i]*n[i];return r[r.length-1]=t,r}class oe{constructor(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new le)}profileKernel(t,e,n){let r;const i=this.backendTimer.time(()=>{r=n()});return r.forEach(n=>{n.data().then(r=>{!function(t,e,r){if("float32"!==n.dtype)return!1;for(let n=0;n<t.length;n++){const e=t[n];if(isNaN(e)||!isFinite(e))return console.warn(`Found ${e} in the result of '${r}'`),!0}}(r,0,t),i.then(i=>{let s="";null!=i.getExtraProfileInfo&&(s=i.getExtraProfileInfo()),this.logger.logKernelProfile(t,n,r,i.kernelMs,e,s)})})}),r}}class le{logKernelProfile(t,e,n,r,i,s){const o="number"==typeof r?zt(`${r}ms`,9):r.error,l=zt(t,25),a=e.rank,u=e.size,c=zt(e.shape.toString(),14);let h="";for(const d in i){const t=i[d].shape||e.shape,n=t.length;h+=`${d}: ${n}D ${n>0?t:""} `}console.log(`%c${l}\t%c${o}\t%c${a}D ${c}\t%c${u}\t%c${h}\t%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}const ae=20,ue=3,ce=7;function he(t,e,n){let r;return zt(r=Array.isArray(t)?`${parseFloat(t[0].toFixed(ce))} + `+`${parseFloat(t[1].toFixed(ce))}j`:Vt(t)?`'${t}'`:"bool"===n?de(t):parseFloat(t.toFixed(ce)).toString(),e)}function de(t){return 0===t?"false":"true"}function pe(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}class fe{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=xt(t),null!=n){const t=n.length;yt(t===this.size,()=>`Length of values '${t}' does not match the size `+`inferred by the shape '${this.size}'.`)}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Nt(e,this.size),this.strides=Kt(t)}set(t,...e){0===e.length&&(e=[0]),yt(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must `+`match the rank (${this.rank})`);const n=this.locToIndex(e);this.values[n]=t}get(...t){0===t.length&&(t=[0]);let e=0;for(const r of t){if(r<0||r>=this.shape[e])throw new Error(`Requested out of range element at ${t}. `+`  Buffer shape=${this.shape}`);e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(0===this.rank)return[];if(1===this.rank)return[t];const e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return ge().makeTensor(this.values,this.shape,this.dtype)}}let ge=null,me=null,be=null;class ye{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=xt(t),this.strides=Kt(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}flatten(){return this.throwIfDisposed(),this.as1D()}asScalar(){return this.throwIfDisposed(),yt(1===this.size,()=>"The array must have only 1 element."),this.reshape([])}as1D(){return this.throwIfDisposed(),this.reshape([this.size])}as2D(t,e){return this.throwIfDisposed(),this.reshape([t,e])}as3D(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])}as4D(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])}as5D(t,e,n,r,i){return this.throwIfDisposed(),this.reshape([t,e,n,r,i])}asType(t){return this.throwIfDisposed(),me.cast(this,t)}get rank(){return this.shape.length}async buffer(){const t=await this.data();return me.buffer(this.shape,this.dtype,t)}bufferSync(){return me.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return Xt(this.shape,t)}arraySync(){return Xt(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const t=ge().read(this.dataId);if("string"===this.dtype){const n=await t;try{return n.map(t=>re(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataSync(){this.throwIfDisposed();const t=ge().readSync(this.dataId);if("string"===this.dtype)try{return t.map(t=>re(t))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await ge().read(this.dataId);return"string"===this.dtype?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(ge().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}toFloat(){return this.asType("float32")}toInt(){return this.asType("int32")}toBool(){return this.asType("bool")}print(t=!1){return me.print(this,t)}reshape(t){return this.throwIfDisposed(),me.reshape(this,t)}reshapeAs(t){return this.throwIfDisposed(),this.reshape(t.shape)}expandDims(t=0){return me.expandDims(this,t)}squeeze(t){return this.throwIfDisposed(),me.squeeze(this,t)}clone(){return this.throwIfDisposed(),me.clone(this)}toString(t=!1){return function(t,e,n,r){const i=Kt(e),s=function(t,e,n,r){const i=xt(e),s=r[r.length-1],o=new Array(s).fill(0),l=e.length,a="complex64"===n?pe(t):t;if(l>1)for(let u=0;u<i/s;u++){const t=u*s;for(let e=0;e<s;e++)o[e]=Math.max(o[e],he(a[t+e],0,n).length)}return o}(t,e,n,i),o=e.length,l=function t(e,n,r,i,s,o=!0){const l="complex64"===r?2:1,a=n[0],u=n.length;if(0===u)return"complex64"===r?[he(pe(e)[0],0,r)]:"bool"===r?[de(e[0])]:[e[0].toString()];if(1===u){if(a>ae){let t=Array.from(e.slice(0,ue*l)),n=Array.from(e.slice((a-ue)*l,a*l));return"complex64"===r&&(t=pe(t),n=pe(n)),["["+t.map((t,e)=>he(t,s[e],r)).join(", ")+", ..., "+n.map((t,e)=>he(t,s[a-ue+e],r)).join(", ")+"]"]}return["["+("complex64"===r?pe(e):Array.from(e)).map((t,e)=>he(t,s[e],r)).join(", ")+"]"]}const c=n.slice(1),h=i.slice(1),d=i[0]*l,p=[];if(a>ae){for(let n=0;n<ue;n++){const i=n*d;p.push(...t(e.slice(i,i+d),c,r,h,s,!1))}p.push("...");for(let n=a-ue;n<a;n++){const i=n*d;p.push(...t(e.slice(i,i+d),c,r,h,s,n===a-1))}}else for(let m=0;m<a;m++){const n=m*d;p.push(...t(e.slice(n,n+d),c,r,h,s,m===a-1))}const f=2===u?",":"";p[0]="["+p[0]+f;for(let m=1;m<p.length-1;m++)p[m]=" "+p[m]+f;let g=",\n";for(let m=2;m<u;m++)g+="\n";return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":g),p}(t,e,n,i,s),a=["Tensor"];return r&&(a.push(`  dtype: ${n}`),a.push(`  rank: ${o}`),a.push(`  shape: [${e}]`),a.push("  values:")),a.push(l.map(t=>"    "+t).join("\n")),a.join("\n")}(this.dataSync(),this.shape,this.dtype,t)}gather(t,e=0){return this.throwIfDisposed(),me.gather(this,t,e)}norm(t="euclidean",e=null,n=!1){return this.throwIfDisposed(),me.norm(this,t,e,n)}slice(t,e){return this.throwIfDisposed(),me.slice(this,t,e)}reverse(t){return this.throwIfDisposed(),me.reverse(this,t)}stack(t,e=0){return me.stack([this,t],e)}unstack(t=0){return me.unstack(this,t)}all(t=null,e=!1){return this.throwIfDisposed(),me.all(this,t,e)}any(t=null,e=!1){return this.throwIfDisposed(),me.any(this,t,e)}logSumExp(t=null,e=!1){return this.throwIfDisposed(),me.logSumExp(this,t,e)}sum(t=null,e=!1){return this.throwIfDisposed(),me.sum(this,t,e)}prod(t=null,e=!1){return this.throwIfDisposed(),me.prod(this,t,e)}mean(t=null,e=!1){return this.throwIfDisposed(),me.mean(this,t,e)}min(t=null,e=!1){return this.throwIfDisposed(),me.min(this,t,e)}argMin(t=null){return this.throwIfDisposed(),me.argMin(this,t)}argMax(t=null){return this.throwIfDisposed(),me.argMax(this,t)}cast(t){return this.throwIfDisposed(),me.cast(this,t)}addStrict(t){return this.throwIfDisposed(),me.addStrict(this,t)}subStrict(t){return this.throwIfDisposed(),me.subStrict(this,t)}powStrict(t){return this.throwIfDisposed(),me.powStrict(this,t)}mulStrict(t){return this.throwIfDisposed(),me.mulStrict(this,t)}divStrict(t){return this.throwIfDisposed(),me.divStrict(this,t)}minimumStrict(t){return this.throwIfDisposed(),me.minimumStrict(this,t)}maximumStrict(t){return this.throwIfDisposed(),me.maximumStrict(this,t)}modStrict(t){return this.throwIfDisposed(),me.modStrict(this,t)}squaredDifferenceStrict(t){return this.throwIfDisposed(),me.squaredDifferenceStrict(this,t)}notEqualStrict(t){return this.throwIfDisposed(),me.notEqualStrict(this,t)}lessStrict(t){return this.throwIfDisposed(),me.lessStrict(this,t)}equalStrict(t){return this.throwIfDisposed(),me.equalStrict(this,t)}lessEqualStrict(t){return this.throwIfDisposed(),me.lessEqualStrict(this,t)}greaterStrict(t){return this.throwIfDisposed(),me.greaterStrict(this,t)}greaterEqualStrict(t){return this.throwIfDisposed(),me.greaterEqualStrict(this,t)}logicalAnd(t){return this.throwIfDisposed(),me.logicalAnd(this,t)}logicalOr(t){return this.throwIfDisposed(),me.logicalOr(this,t)}logicalNot(){return this.throwIfDisposed(),me.logicalNot(this)}logicalXor(t){return this.throwIfDisposed(),me.logicalXor(this,t)}where(t,e){return this.throwIfDisposed(),me.where(t,this,e)}neg(){return this.throwIfDisposed(),me.neg(this)}ceil(){return this.throwIfDisposed(),me.ceil(this)}floor(){return this.throwIfDisposed(),me.floor(this)}sign(){return this.throwIfDisposed(),me.sign(this)}isNaN(){return this.throwIfDisposed(),me.isNaN(this)}isInf(){return this.throwIfDisposed(),me.isInf(this)}isFinite(){return this.throwIfDisposed(),me.isFinite(this)}exp(){return this.throwIfDisposed(),me.exp(this)}expm1(){return this.throwIfDisposed(),me.expm1(this)}log(){return this.throwIfDisposed(),me.log(this)}log1p(){return this.throwIfDisposed(),me.log1p(this)}sqrt(){return this.throwIfDisposed(),me.sqrt(this)}rsqrt(){return this.throwIfDisposed(),me.rsqrt(this)}square(){return this.throwIfDisposed(),me.square(this)}reciprocal(){return this.throwIfDisposed(),me.reciprocal(this)}abs(){return this.throwIfDisposed(),me.abs(this)}clipByValue(t,e){return this.throwIfDisposed(),me.clipByValue(this,t,e)}sigmoid(){return this.throwIfDisposed(),me.sigmoid(this)}logSigmoid(){return this.throwIfDisposed(),me.logSigmoid(this)}softplus(){return this.throwIfDisposed(),me.softplus(this)}zerosLike(){return this.throwIfDisposed(),me.zerosLike(this)}onesLike(){return this.throwIfDisposed(),me.onesLike(this)}sin(){return this.throwIfDisposed(),me.sin(this)}cos(){return this.throwIfDisposed(),me.cos(this)}tan(){return this.throwIfDisposed(),me.tan(this)}asin(){return this.throwIfDisposed(),me.asin(this)}acos(){return this.throwIfDisposed(),me.acos(this)}atan(){return this.throwIfDisposed(),me.atan(this)}sinh(){return this.throwIfDisposed(),me.sinh(this)}cosh(){return this.throwIfDisposed(),me.cosh(this)}tanh(){return this.throwIfDisposed(),me.tanh(this)}asinh(){return this.throwIfDisposed(),me.asinh(this)}acosh(){return this.throwIfDisposed(),me.acosh(this)}atanh(){return this.throwIfDisposed(),me.atanh(this)}erf(){return this.throwIfDisposed(),me.erf(this)}round(){return this.throwIfDisposed(),me.round(this)}step(t=0){return this.throwIfDisposed(),me.step(this,t)}softmax(t=-1){return this.throwIfDisposed(),me.softmax(this,t)}logSoftmax(t=-1){return this.throwIfDisposed(),me.logSoftmax(this,t)}resizeBilinear(t,e=!1){return this.throwIfDisposed(),me.image.resizeBilinear(this,t,e)}resizeNearestNeighbor(t,e=!1){return this.throwIfDisposed(),me.image.resizeNearestNeighbor(this,t,e)}variable(t=!0,e,n){return this.throwIfDisposed(),ge().makeVariable(this,t,e,n)}unsortedSegmentSum(t,e){return this.throwIfDisposed(),me.unsortedSegmentSum(this,t,e)}topk(t=1,e=!0){return this.throwIfDisposed(),me.topk(this,t,e)}stridedSlice(t,e,n,r=0,i=0,s=0,o=0,l=0){return this.throwIfDisposed(),me.stridedSlice(this,t,e,n,r,i,s,o,l)}fft(){return this.throwIfDisposed(),me.spectral.fft(this)}ifft(){return this.throwIfDisposed(),me.spectral.ifft(this)}rfft(){return this.throwIfDisposed(),me.spectral.rfft(this)}irfft(){return this.throwIfDisposed(),me.spectral.irfft(this)}}Object.defineProperty(ye,Symbol.hasInstance,{value:t=>!!t&&null!=t.dataId&&null!=t.shape&&null!=t.dtype});class ve extends ye{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and `+`previous value (${this.dtype}) must match`);if(!St(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and `+`previous value (${this.shape}) must match`);ge().disposeTensor(this),this.dataId=t.dataId,ge().incRef(this,null)}dispose(){ge().disposeVariable(this),this.isDisposedInternal=!0}}var _e,we,xe,Ce,Se;Object.defineProperty(ve,Symbol.hasInstance,{value:t=>t instanceof ye&&null!=t.assign&&t.assign instanceof Function}),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(_e||(_e={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(we||(we={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(xe||(xe={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(Ce||(Ce={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(Se||(Se={}));const Oe={float32:Ce,int32:we,bool:xe,complex64:Se};function ke(t,e){if("string"===t||"string"===e){if("string"===t&&"string"===e)return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Oe[t][e]}function Ee(t){return ke(t,"int32")}function Te(t,e){if(t.dtype===e.dtype)return[t,e];const n=ke(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function ze(t,e){yt(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and`+` second(${e.dtype}) input must match`)}function Pe(t,e){return e.some(e=>e.id===t.id)}function Ie(t){const e=[];return function t(e,n,r){if(null==e)return;if(e instanceof ye)return void n.push(e);if(i=e,!Array.isArray(i)&&"object"!=typeof i)return;var i;const s=e;for(const o in s){const e=s[o];r.has(e)||(r.add(e),t(e,n,r))}}(t,e,new Set),e}class Me{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class De{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Me}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e];if(await this.initializeBackend(n).success)return void(await this.setBackend(n))}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make `+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been `+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(`${t} backend was already registered. `+"Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new oe(this.backendInstance),!0}setupRegisteredKernels(){ot(this.backendName).forEach(t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){ot(t).forEach(e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])})}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=e.factory();if(Promise.resolve(r)===r){const e=++this.pendingBackendInitId,n=r.then(n=>!(e<this.pendingBackendInitId||(this.registry[t]=n,this.pendingBackendInit=null,0))).catch(n=>!(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),1)));return this.pendingBackendInit=n,{success:n,asyncInit:!0}}return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(n){return console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,i=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>((n=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(r){throw e(),r}}nextTensorId(){return De.nextTensorId++}nextVariableId(){return De.nextVariableId++}clone(t){const e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype);return this.addTapeNode(this.state.activeScope.name,{x:t},[e],t=>({x:()=>t.toFloat()}),[],{}),e}runKernel(t,e,n,r,i){return this.runKernelFunc(null,e,null,t,n,r,i)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let i=0;n.forEach(t=>{i+="complex64"===t.dtype?3:1});const s=r-e-i-this.state.numDataMovesStack[this.state.numDataMovesStack.length-1];if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak `+`(${s} data ids) after running '${t}'`)}runKernelFunc(t,e,n,r,i,s,o){let l,a=[];const u=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");const c=this.state.numBytes,h=this.state.numTensors;let d;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const p=it(r,this.backendName);let f;if(null!=p)d=()=>{const t=this.backend.numDataIds();f=p.kernelFunc({inputs:e,attrs:i,backend:this.backend});const n=Array.isArray(f)?f:[f];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,t,n);const l=n.map(({dataId:t,shape:e,dtype:n})=>this.makeTensorFromDataId(t,e,n));if(u){let t=this.getTensorsForGradient(r,e,l);if(null==t){null==o&&(o=[]);const e=l.filter((t,e)=>o[e]);t=(s||[]).slice().concat(e)}a=this.saveTensorsForBackwardMode(t)}return l};else{const e=t=>{u&&(a=t.map(t=>this.keep(this.clone(t))))};d=()=>{const n=this.backend.numDataIds();f=this.tidy(()=>t(this.backend,e));const i=Array.isArray(f)?f:[f];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,n,i),i}}return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{l=this.ENV.getBool("DEBUG")?this.profiler.profileKernel(r,e,()=>d()):d()}),u&&this.addTapeNode(r,e,l,n,a,i),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(t=>e[t].shape),outputShapes:l.map(t=>t.shape)}),Array.isArray(f)?l:l[0]}saveTensorsForBackwardMode(t){return t.map(t=>this.keep(this.clone(t)))}getTensorsForGradient(t,e,n){const r=st(t);if(null!=r){const t=r.inputsToSave||[],i=r.outputsToSave||[];let s;r.saveAllInputs?(yt(Array.isArray(e),()=>"saveAllInputs is true, expected inputs to be an array."),s=Object.keys(e).map(t=>e[t])):s=t.map(t=>e[t]);const o=n.filter((t,e)=>i[e]);return s.concat(o)}return null}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");r=r||this.backend;let i=t;"string"===(n=n||"float32")&&Vt(t[0])&&(i=t.map(t=>ne(t)));const s=r.write(i,e,n),o=new ye(e,n,s,this.nextTensorId());if(this.incRef(o,r),"string"===n){const t=this.state.tensorInfo.get(s),e=Bt(i);this.state.numBytes+=e-t.bytes,t.bytes=e}return o}makeTensorFromDataId(t,e,n,r){const i=new ye(e,n=n||"float32",t,this.nextTensorId());return this.incRef(i,r),i}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.asType(r));const i=new ve(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}incRef(t,e){const n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*jt(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n,refCount:0}),this.state.numBytes+=n}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof ve||this.track(t)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;const e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}disposeVariables(){for(const t in this.state.registeredVariables)this.disposeVariable(this.state.registeredVariables[t])}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;return this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(t=>t.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n,this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,i,s){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:i},l=st(t);null!=l&&(r=l.gradFunc),null!=r&&(o.gradient=t=>(t=t.map((t,e)=>{if(null==t){const t=n[e],r=Qt(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t}),r(t.length>1?t:t[0],i,s))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Ie(t),n=new Set(e.map(t=>t.id));for(let i=0;i<this.state.activeScope.track.length;i++){const t=this.state.activeScope.track[i];t.kept||n.has(t.id)||t.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach(t=>{t.kept||t.scopeId!==r.id||this.track(t)})}gradients(t,e,n,r=!1){if(yt(e.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));yt(i instanceof ye,()=>"The result y returned by f() must be a tensor.");const s=function(t,e,n){const r={},i={};for(let a=0;a<e.length;a++)r[e[a].id]=!0;for(let a=0;a<t.length;a++){const n=t[a],s=n.inputs;for(const t in s){const o=s[t];let l=!1;for(let t=0;t<e.length;t++)if(r[o.id]){n.outputs.forEach(t=>r[t.id]=!0),l=!0,i[n.id]=!0;break}if(l)break}}const s={};s[n.id]=!0;const o={};for(let a=t.length-1;a>=0;a--){const e=t[a],n=e.inputs;for(let t=0;t<e.outputs.length;t++)if(s[e.outputs[t].id]){for(const t in n)s[n[t].id]=!0,o[e.id]=!0;break}}const l=[];for(let a=0;a<t.length;a++){const e=t[a];if(i[e.id]&&o[e.id]){const t={};for(const i in e.inputs){const n=e.inputs[i];r[n.id]&&(t[i]=n)}const n=Object.assign({},e);n.inputs=t,n.outputs=e.outputs,l.push(n)}}return l}(this.state.activeTape,e,i);if(!r&&0===s.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const t={};t[i.id]=null==n?function(t){const e=Zt(xt(t),"float32");return Ae.makeTensor(e,t,"float32")}(i.shape):n,function(t,e,n){for(let r=e.length-1;r>=0;r--){const i=e[r],s=[];if(i.outputs.forEach(e=>{const n=t[e.id];s.push(null!=n?n:null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+`for ${i.kernelName}.`);const o=i.gradient(s);for(const e in i.inputs){if(!(e in o))throw new Error(`Cannot backprop through input ${e}. `+`Available gradients found: ${Object.keys(o)}.`);const r=n(()=>o[e]());if("float32"!==r.dtype)throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input `+`${e} must have 'float32' dtype, but has '${r.dtype}'`);const s=i.inputs[e];if(!St(r.shape,s.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input `+`'${e}' has shape '${r.shape}', which does not match `+`the shape of the input '${s.shape}'`);if(null==t[s.id])t[s.id]=r;else{const e=t[s.id];t[s.id]=e.add(r),e.dispose()}}}}(t,s,t=>this.tidy(t));const r=e.map(e=>t[e.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(t=>{for(const e of t.saved)e.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(t){return yt(Gt(t),()=>"The f passed in customGrad(f) must be a function."),(...e)=>{let n;yt(e.every(t=>t instanceof ye),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");const r={};return e.forEach((t,e)=>{r[e]=t}),this.runKernelFunc((r,i)=>(yt((n=t(...e,i)).value instanceof ye,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),yt(Gt(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),r,(t,r)=>{const i=n.gradFunc(t,r),s=Array.isArray(i)?i:[i];yt(s.length===e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),yt(s.every(t=>t instanceof ye),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const o={};return s.forEach((t,e)=>{o[e]=()=>t}),o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}async time(t){const e=Jt(),n=await this.backend.time(t);return n.wallMs=Jt()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Me;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}De.nextTensorId=0,De.nextVariableId=0;const Ae=function(){const t=tt();if(null==t._tfengine){const e=new X(t);t._tfengine=new De(e)}return J=t._tfengine.ENV,ge=()=>t._tfengine,t._tfengine}();function Ne(){if("undefined"!=typeof navigator&&null!=navigator){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Re(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const Fe=Z();Fe.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Fe.registerFlag("IS_BROWSER",()=>Re()),Fe.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node),Fe.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),Fe.registerFlag("PROD",()=>!1),Fe.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Fe.getBool("DEBUG")),Fe.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),Fe.registerFlag("IS_TEST",()=>!1);const $e="Add",Le="AddN",je="Atan2",Be="AvgPool",Ve="AvgPoolBackprop",We="AvgPool3D",Ue="AvgPool3DBackprop",He="BatchMatMul",Ge="BatchToSpaceND",qe="BroadcastTo",Ke="Complex",Ye="Concat",Xe="Conv2D",Ze="Conv2DBackpropFilter",Qe="Conv2DBackpropInput",Je="Conv3D",tn="Conv3DBackpropFilterV2",en="Conv3DBackpropInputV2",nn="Cumsum",rn="DepthToSpace",sn="DepthwiseConv2dNative",on="DepthwiseConv2dNativeBackpropFilter",ln="DepthwiseConv2dNativeBackpropInput",an="Diag",un="Div",cn="Elu",hn="EluGrad",dn="Equal",pn="FloorDiv",fn="Fill",gn="FusedBatchNorm",mn="GatherNd",bn="Greater",yn="GreaterEqual",vn="Identity",_n="Imag",wn="Less",xn="LessEqual",Cn="LRN",Sn="LRNBackprop",On="Max",kn="Maximum",En="MaxPool",Tn="MaxPoolBackprop",zn="MaxPool3D",Pn="MaxPool3DBackprop",In="MaxPoolWithArgmax",Mn="Minimum",Dn="Mod",An="Multiply",Nn="NotEqual",Rn="NonMaxSuppressionV3",Fn="NonMaxSuppressionV5",$n="OneHot",Ln="PadV2",jn="Pool",Bn="Pow",Vn="Prelu",Wn="Real",Un="Relu",Hn="Relu6",Gn="SelectV2",qn="Selu",Kn="SpaceToBatchND",Yn="SplitV",Xn="SquaredDifference",Zn="Square",Qn="Sub",Jn="Tile",tr="Transpose",er="FromPixels";function nr(t,e){const n=t.length,r=[];for(let i=0;i<n;i++){const s=n-1-i,o=t[s]||1;(e[e.length-1-i]||1)>1&&1===o&&r.unshift(s)}return r}function rr(t,e){const n=[];for(let r=0;r<e.length;r++){const i=t[t.length-r-1],s=e.length-r-1,o=e[s];(null==i||1===i&&o>1)&&n.unshift(s)}return n}function ir(t,e){const n=[],r=Math.max(t.length,e.length);for(let i=0;i<r;i++){let r=t[t.length-i-1];null==r&&(r=1);let s=e[e.length-i-1];if(null==s&&(s=1),1===r)n.unshift(s);else if(1===s)n.unshift(r);else{if(r!==s)throw Error("Operands could not be broadcast together with shapes "+`${t} and ${e}.`);n.unshift(r)}}return n}const sr={kernelName:$e,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{let e=t;const r=rr(n.shape,i);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},b:()=>{let e=t;const n=rr(r.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}}},or={kernelName:Le,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((e,r)=>{n[r]=()=>t.clone()}),n}};function lr(t,e){let n=t;if(Lt(t))return"string"===e?[]:[t.length];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Lt(n)&&"string"!==e;)r.push(n.length),n=n[0];return Array.isArray(t)&&Z().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function t(e,n,r){if(r=r||[],!Array.isArray(e)&&!Lt(e))return void yt(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, `+`but should be an array/TypedArray of ${n[0]} elements`);yt(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, `+`but is an array of ${e.length} elements`),yt(e.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} `+`elements, but has ${e.length} elements`);const i=n.slice(1);for(let s=0;s<e.length;++s)t(e[s],i,r.concat(s))}(t,r,[]),r}function ar(t,e,n,r){if(null!=t&&("numeric"!==t&&t!==e||"numeric"===t&&"string"===e))throw new Error(`Argument '${n}' passed to '${r}' must `+`be ${t} tensor, but got ${e} tensor`)}function ur(t,e,n,r="numeric"){if(t instanceof ye)return ar(r,t.dtype,e,n),t;let i=Ht(t);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),ar(r,i,e,n),null==t||!Lt(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error(`Argument '${e}' passed to '${n}' must be a `+`Tensor or TensorLike, but got '${null==t?"null":t.constructor.name}'`);const s=lr(t,i);Lt(t)||Array.isArray(t)||(t=[t]);const o="string"!==i?Yt(t,i,Z().getBool("DEBUG")):wt(t,[],!0);return Ae.makeTensor(o,s,i)}function cr(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a `+"`Tensor[]` or `TensorLike[]`");return t.map((t,r)=>ur(t,`${e}[${r}]`,n),r)}function hr(t){const e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+`${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));const i=(...t)=>{Ae.startScope(n);try{const n=r(...t);return n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ae.endScope(n),n}catch(e){throw Ae.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}const dr=hr({add_:function(t,e){let n=ur(t,"a","add"),r=ur(e,"b","add");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.add(n,r);return e([n,r]),i},{a:n,b:r},null,$e)}});function pr(t,e){const n=t[0].length;t.forEach((t,e)=>{yt(t.length===n,()=>`Error in concat${n}D: rank of tensors[${e}] must be the same `+`as the rank of the rest (${n})`)}),yt(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((t,i)=>{for(let s=0;s<n;s++)yt(s===e||t[s]===r[s],()=>`Error in concat${n}D: Shape of tensors[${i}] (${t}) `+`does not match the shape of the rest (${r}) `+`along the non-concatenated axis ${i}.`)})}function fr(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}const gr=hr({complex_:function(t,e){const n=ur(t,"real","complex"),r=ur(e,"imag","complex");return vt(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, `+"must match in call to tf.complex()."),Ae.runKernelFunc(t=>t.complex(n,r),{real:n,imag:r},null,Ke)}}),mr=hr({imag_:function(t){const e=ur(t,"input","imag");return Ae.runKernelFunc(t=>t.imag(e),{input:e},null,_n)}}),br=hr({real_:function(t){const e=ur(t,"input","real");return Ae.runKernelFunc(t=>t.real(e),{input:e},null,Wn)}});function yr(t,e,n){return vr(t,e,lr(t,n),n)}function vr(t,e,n,r){if(null==r&&(r=Ht(t)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Lt(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t&&"string"!=typeof t)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=e){te(e);const t=xt(e),r=xt(n);yt(t===r,()=>`Based on the provided shape, [${e}], the tensor should have `+`${t} values but has ${r}`);for(let i=0;i<n.length;++i){const t=n[i],r=i!==n.length-1||t!==xt(e.slice(i));yt(n[i]===e[i]||!r,()=>"Error creating a new Tensor. Inferred shape "+`(${n}) does not match the provided `+`shape (${e}). `)}}return Lt(t)||Array.isArray(t)||(t=[t]),e=e||n,t="string"!==r?Yt(t,r,Z().getBool("DEBUG")):wt(t,[],!0),Ae.makeTensor(t,e,r)}function _r(t,e){if((Lt(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&Lt(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vr(t,[],[],e)}function wr(t,e){_t(t);const n=lr(t,e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vr(t,null,n,e)}function xr(t,e,n){if(_t(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");const r=lr(t,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vr(t,e,r,n)}function Cr(t,e,n){if(_t(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const r=lr(t,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vr(t,e,r,n)}function Sr(t,e,n){if(_t(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");const r=lr(t,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vr(t,e,r,n)}function Or(t,e,n){if(_t(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");const r=lr(t,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vr(t,e,r,n)}function kr(t,e,n){if(_t(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");const r=lr(t,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return vr(t,e=e||r,r,n)}function Er(t,e=!0,n,r){return Ae.makeVariable(t,e,n,r)}function Tr(t,e="float32"){if("complex64"===e){const e=Tr(t,"float32"),n=zr(t,"float32");return gr(e,n)}const n=Zt(xt(t),e);return Ae.makeTensor(n,t,e)}function zr(t,e="float32"){if("complex64"===e){const e=zr(t,"float32"),n=zr(t,"float32");return gr(e,n)}const n=Qt(xt(t),e);return Ae.makeTensor(n,t,e)}function Pr(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return Ae.runKernelFunc(r=>r.linspace(t,e,n),{})}function Ir(t,e,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return zr([0],r);const i=Qt(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+n;return wr(i,r)}const Mr=hr({onesLike_:function(t){const e=ur(t,"x","onesLike");if("complex64"===e.dtype){const t=Mr(br(e)),n=Dr(mr(e));return gr(t,n)}return Ae.runKernelFunc(t=>t.onesLike(e),{x:e},(t,e)=>({x:()=>Dr(t)}),"OnesLike")}}),Dr=hr({zerosLike_:function(t){const e=ur(t,"x","zerosLike");return Ae.runKernelFunc(t=>t.zerosLike(e),{x:e},(t,e)=>({x:()=>Dr(t)}),"ZerosLike")}}),Ar=hr({concat_:function(t,e=0){yt(t.length>=1,()=>"Pass at least one tensor to concat");let n=cr(t,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(t=>{if("complex64"!==t.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${t.dtype}. `)});const r=Mt(e,n[0].shape)[0],i=fr(n.map(t=>t.shape),r);return 0===xt(i)?yr([],i):1===(n=n.filter(t=>t.size>0)).length?n[0]:(pr(n.map(t=>t.shape),r),Ae.runKernelFunc((t,e)=>{const i=t.concat(n,r);return e(n),i},n,null,Ye,{axis:e}))}});function Nr(t,e="float32",n){return e=e||"float32",te(t),new fe(t,e,n)}function Rr(t,e=!1){console.log(t.toString(e))}const Fr=hr({cast_:function(t,e){const n=ur(t,"x","cast");if(!Ft(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if("string"===e&&"string"!==n.dtype||"string"!==e&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return Ae.runKernelFunc(t=>t.cast(n,e),{x:n},t=>({x:()=>t.clone()}),"Cast",{dtype:e})}}),$r=hr({expandDims_:function(t,e=0){const n=ur(t,"x","expandDims",null);yt(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r=n.shape.slice();return e<0&&(yt(-(n.rank+1)<=e,()=>`Axis must be in the interval [${-(n.rank+1)}, ${n.rank}]`),e=n.rank+e+1),r.splice(e,0,1),Lr(n,r)}}),Lr=hr({reshape_:function(t,e){const n=ur(t,"x","reshape",null);return e=It(e,n.size),yt(n.size===xt(e),()=>"new shape and old shape must have the same number of elements."),Ae.runKernelFunc(t=>t.reshape(n,e),{x:n},t=>({x:()=>t.reshape(n.shape)}),"Reshape",{shape:e})}}),jr=hr({squeeze_:function(t,e){const n=ur(t,"x","squeeze");return Lr(n,Dt(n.shape,e).newShape)}}),Br=hr({stack_:function(t,e=0){const n=cr(t,"tensors","stack");if(yt(n.length>=1,()=>"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(e);const r=n[0].shape,i=n[0].dtype;yt(e<=n[0].rank,()=>"Axis must be <= rank of the tensor"),n.forEach(t=>{vt(r,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(t=>{yt(i===t.dtype,()=>"All tensors passed to stack must have matching dtypes")});const s=n.map(t=>t.expandDims(e));return Ar(s,e)}}),Vr=hr({unstack_:function(t,e=0){e=e||0;const n=ur(t,"x","unstack");return yt(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`),e<0&&(e+=n.shape.length),Ae.runKernelFunc(t=>t.unstack(n,e),{x:n},t=>({x:()=>Br(t,e)}),"Unpack",{axis:e})}}),Wr=async function(t,e){const n=ur(t,"x","setdiff1d"),r=ur(e,"y","setdiff1d");yt(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),yt(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),yt(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);const i=await n.data(),s=await r.data(),o=new Set(s);let l=0;for(let c=0;c<i.length;c++)o.has(i[c])||l++;const a=new fe([l],n.dtype),u=new fe([l],"int32");for(let c=0,h=0;c<i.length;c++)o.has(i[c])||(a.values[h]=i[c],u.values[h]=c,h++);return[a.toTensor(),u.toTensor()]},Ur=hr({floorDiv_:function(t,e){let n=ur(t,"a","floorDiv"),r=ur(e,"b","floorDiv");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.floorDiv(n,r);return e([n,r]),i},{a:n,b:r},null,pn)}}),Hr=hr({div_:function(t,e){let n=ur(t,"a","div"),r=ur(e,"b","div");return[n,r]=Te(n,r),"int32"===n.dtype&&"int32"===r.dtype?Ur(n,r):Ae.runKernelFunc((t,e)=>{const i=t.realDivide(n,r);return e([n,r]),i},{a:n,b:r},null,un,{})}}),Gr=hr({mul_:function(t,e){let n=ur(t,"a","mul"),r=ur(e,"b","mul");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.multiply(n,r);return e([n,r]),i},{a:n,b:r},null,An)}});function qr(t){return yt(Gt(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=ur(e,"x","tf.grad",null),i=null!=n?ur(n,"dy","tf.grad"):null;return Ae.tidy(()=>{const{value:e,grads:n}=Ae.gradients(()=>t(r),[r],i);return null!=i&&vt(e.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Jr(n),n[0]})}}function Kr(t){return yt(Gt(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{yt(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=cr(e,"args","tf.grads",null),i=null!=n?ur(n,"dy","tf.grads"):null;return Ae.tidy(()=>{const{value:e,grads:n}=Ae.gradients(()=>t(...r),r,i);return null!=i&&vt(e.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Jr(n),n})}}function Yr(t){return yt(Gt(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{yt(e instanceof ye,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),yt(null==n||n instanceof ye,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:i}=Ae.gradients(()=>t(e),[e],n);return Jr(r),{grad:r[0],value:i}}}function Xr(t){return yt(Gt(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{yt(Array.isArray(e)&&e.every(t=>t instanceof ye),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),yt(null==n||n instanceof ye,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=Ae.gradients(()=>t(...e),e,n);return null!=n&&vt(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Jr(r.grads),r}}function Zr(t,e){yt(Gt(t),()=>"The f passed in variableGrads(f) must be a function"),yt(null==e||Array.isArray(e)&&e.every(t=>t instanceof ve),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=null!=e;if(!n){e=[];for(const t in Ae.registeredVariables)e.push(Ae.registeredVariables[t])}const r=n?e.filter(t=>!t.trainable):null,i=e.length;yt((e=e.filter(t=>t.trainable)).length>0,()=>"variableGrads() expects at least one of the input variables to "+`be trainable, but none of the ${i} variables is `+"trainable.");const{value:s,grads:o}=Ae.gradients(t,e,null,!0);yt(o.some(t=>null!=t),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),yt(0===s.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it "+`returned a rank-${s.rank} tensor`);const l={};return e.forEach((t,e)=>{null!=o[e]&&(l[t.name]=o[e])}),null!=r&&r.forEach(t=>l[t.name]=null),{value:s,grads:l}}function Qr(t){return Ae.customGrad(t)}function Jr(t){if(t.filter(t=>null==t).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}function ti(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function ei(t,e,n){const r=t.length+e.length,i=[];let s=0,o=0;for(let l=0;l<r;l++)-1===n.indexOf(l)?i.push(t[s++]):i.push(e[o++]);return i}function ni(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map(e=>t[e])]}function ri(t,e){return ei(t,e.map(t=>1),e)}function ii(t,e,n){yt(ti(e,n),()=>`${t} supports only inner-most axes for now. `+`Got axes ${e} and rank-${n} input.`)}function si(t,e){if(ti(t,e))return null;const n=[];for(let r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(t=>n.push(t)),n}function oi(t){return t.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function li(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}function ai(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(ri(e.shape,r))),t.rank<n.rank&&(t=t.reshape(ri(t.shape,r))),{x:()=>{const r=t.mul(n.equal(e).cast(t.dtype));return null==i?r:r.transpose(i)}}}const ui=hr({all_:function(t,e=null,n=!1){let r=ur(t,"x","all","bool");const i=Mt(e,r.shape);let s=i;const o=si(s,r.rank);null!=o&&(r=r.transpose(o),s=li(s.length,r.rank));const l=Ae.runKernelFunc(t=>t.all(r,s),{$x:r});if(n){const t=ri(l.shape,i);return l.reshape(t)}return l}}),ci=hr({any_:function(t,e=null,n=!1){let r=ur(t,"x","any","bool");const i=Mt(e,r.shape);let s=i;const o=si(s,r.rank);null!=o&&(r=r.transpose(o),s=li(s.length,r.rank));const l=Ae.runKernelFunc(t=>t.any(r,s),{$x:r});if(n){const t=ri(l.shape,i);return l.reshape(t)}return l}}),hi=hr({argMax_:function(t,e=0){let n=ur(t,"x","argMax");null==e&&(e=0);let r=Mt(e,n.shape);const i=si(r,n.rank);return null!=i&&(n=n.transpose(i),r=li(r.length,n.rank)),Ae.runKernelFunc((t,e)=>{const i=t.argMax(n,r[0]);return e([n]),i},{x:n},(t,e)=>{const[n]=e;return{x:()=>Dr(n)}},"ArgMax",{axis:r[0]},[n])}}),di=hr({argMin_:function(t,e=0){let n=ur(t,"x","argMin");null==e&&(e=0);let r=Mt(e,n.shape);const i=si(r,n.rank);return null!=i&&(n=n.transpose(i),r=li(r.length,n.rank)),Ae.runKernelFunc((t,e)=>{const i=t.argMin(n,r[0]);return e([n]),i},{$x:n},(t,e)=>{const[n]=e;return{$x:()=>Dr(n)}})}}),pi=hr({logSumExp_:function(t,e=null,n=!1){const r=ur(t,"x","logSumExp"),i=Mt(e,r.shape),s=r.max(i,!0),o=r.sub(s).exp().sum(i).log(),l=s.reshape(o.shape).add(o);if(n){const t=ri(l.shape,i);return l.reshape(t)}return l}}),fi=hr({mean_:function(t,e=null,n=!1){const r=ur(t,"x","mean"),i=Mt(e,r.shape),s=xt(ni(r.shape,i)[1]);return Qr(t=>{const r=_r(s);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:e=>{const n=t.shape.slice();return i.forEach(t=>{n[t]=1}),e.reshape(n).mul(Tr(t.shape,"float32")).div(s)}}})(r)}}),gi=hr({min_:function(t,e=null,n=!1){let r=ur(t,"x","min");const i=r,s=Mt(e,r.shape);let o=s;const l=si(o,r.rank);null!=l&&(r=r.transpose(l),o=li(o.length,r.rank));let a=Ae.runKernelFunc((t,e)=>{const n=t.min(r,o);return e([i,n]),n},{x:r},(t,e)=>ai(t,e[1],e[0],s,l),"Min",{axes:o},[r],[!0]);if(n){const t=ri(a.shape,s);a=a.reshape(t)}return a}}),mi=hr({moments_:function(t,e=null,n=!1){const r=Mt(e,(t=ur(t,"x","moments")).shape),i=t.mean(r,n);let s=i.shape;n||(s=ri(i.shape,r));const o=t.toFloat().sub(i.reshape(s)).square();return{mean:i,variance:o.mean(r,n)}}}),bi=hr({sum_:function(t,e=null,n=!1){let r=ur(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());const i=Mt(e,r.shape);return Qr(t=>{const e=si(i,t.rank);let r=i,s=t;null!=e&&(s=t.transpose(e),r=li(r.length,t.rank));const o=e=>{const n=t.shape.slice();return i.forEach(t=>{n[t]=1}),e.reshape(n).mul(Tr(t.shape,"float32"))};let l=Ae.runKernelFunc(t=>t.sum(s,r),{x:s},t=>({x:()=>o(t)}),"Sum",{axes:r});if(n){const t=ri(l.shape,i);l=l.reshape(t)}return{value:l,gradFunc:o}})(r)}}),yi=hr({prod_:function(t,e=null,n=!1){let r=ur(t,"x","prod");"bool"===r.dtype&&(r=r.toInt());const i=Mt(e,r.shape),s=si(i,r.rank);let o=i,l=r;null!=s&&(l=r.transpose(s),o=li(o.length,r.rank));let a=Ae.runKernelFunc(t=>t.prod(l,o),{permutedX:l});if(n){const t=ri(a.shape,i);a=a.reshape(t)}return a}}),vi=hr({square_:function(t){const e=ur(t,"x","square");return Ae.runKernelFunc((t,n)=>(n([e]),t.square(e)),{x:e},null,"Square",{},[e],[])}}),_i=hr({abs_:function(t){const e=ur(t,"x","abs");return"complex64"===e.dtype?Ae.runKernelFunc(t=>t.complexAbs(e),{$x:e}):Ae.runKernelFunc((t,n)=>{const r=t.abs(e);return n([e]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>t.mul(n.toFloat().step(-1))}},"Abs")}}),wi=hr({acos_:function(t){const e=ur(t,"x","acos");return Ae.runKernelFunc((t,n)=>{const r=t.acos(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>{const e=n.toFloat().square(),r=_r(1).sub(e).sqrt();return t.div(r).neg()}}})}}),xi=hr({acosh_:function(t){const e=ur(t,"x","acosh");return Ae.runKernelFunc((t,n)=>{const r=t.acosh(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>{const e=n.toFloat().square().sub(1).sqrt();return t.div(e)}}})}}),Ci=hr({asin_:function(t){const e=ur(t,"x","asin");return Ae.runKernelFunc((t,n)=>{const r=t.asin(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.div(_r(1).sub(n.toFloat().square()).sqrt())}})}}),Si=hr({asinh_:function(t){const e=ur(t,"x","asinh");return Ae.runKernelFunc((t,n)=>{const r=t.asinh(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>{const e=_r(1).add(n.toFloat().square()).sqrt();return t.div(e)}}})}}),Oi=hr({atan_:function(t){const e=ur(t,"x","atan");return Ae.runKernelFunc((t,n)=>{const r=t.atan(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.div(n.toFloat().square().add(1))}})}}),ki=hr({atanh_:function(t){const e=ur(t,"x","atanh");return Ae.runKernelFunc((t,n)=>{const r=t.atanh(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.div(_r(1).sub(n.toFloat().square()))}})}}),Ei=hr({ceil_:function(t){const e=ur(t,"x","ceil");return Ae.runKernelFunc(t=>t.ceil(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),Ti=hr({clipByValue_:function(t,e,n){const r=ur(t,"x","clipByValue");return yt(e<=n,()=>`Error in clip: min (${e}) must be `+`less than or equal to max (${n}).`),Ae.runKernelFunc((t,i)=>{const s=t.clip(r,e,n);return i([r]),s},{x:r},(t,r)=>{const[i]=r;return{x:()=>t.where(i.greaterEqual(e).logicalAnd(i.lessEqual(n)),Dr(t))}},"ClipByValue",{min:e,max:n},[r])}}),zi=hr({cos_:function(t){const e=ur(t,"x","cos");return Ae.runKernelFunc((t,n)=>{const r=t.cos(e);return n([e]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>n.toFloat().sin().neg().mul(t)}},"Cos",{},[e])}}),Pi=hr({cosh_:function(t){const e=ur(t,"x","cosh");return Ae.runKernelFunc((t,n)=>{const r=t.cosh(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>n.toFloat().sinh().mul(t)}})}}),Ii=hr({erf_:function(t){let e=ur(t,"x","erf");return yt("int32"===e.dtype||"float32"===e.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=e.toFloat()),Ae.runKernelFunc((t,n)=>{const r=t.erf(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}})}}),Mi=hr({exp_:function(t){const e=ur(t,"x","exp");return Ae.runKernelFunc((t,n)=>{const r=t.exp(e);return n([r]),r},{x:e},(t,e)=>({x:()=>t.mul(e[0])}),"Exp",{},[],[!0])}}),Di=hr({expm1_:function(t){const e=ur(t,"x","expm1");return Ae.runKernelFunc((t,n)=>{const r=t.expm1(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.mul(n.exp())}})}}),Ai=hr({floor_:function(t){const e=ur(t,"x","floor");return Ae.runKernelFunc(t=>t.floor(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),Ni=hr({log_:function(t){const e=ur(t,"x","log");return Ae.runKernelFunc((t,n)=>{const r=t.log(e);return n([e]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>t.div(n.toFloat())}},"Log",{},[e])}}),Ri=hr({log1p_:function(t){const e=ur(t,"x","log1p");return Ae.runKernelFunc((t,n)=>{const r=t.log1p(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.div(n.add(1))}})}}),Fi=hr({logSigmoid_:function(t){const e=ur(t,"x","logSigmoid");return Ae.runKernelFunc((t,n)=>{const r=t.softplus(e.neg()).neg();return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.mul(n.neg().sigmoid())}})}}),$i=hr({neg_:function(t){const e=ur(t,"x","neg");return Ae.runKernelFunc(t=>t.neg(e),{x:e},t=>({x:()=>t.neg()}),"Neg",{},[e])}}),Li=hr({reciprocal_:function(t){const e=ur(t,"x","reciprocal");return Ae.runKernelFunc((t,n)=>{const r=t.reciprocal(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.div(n.square().neg())}})}}),ji=hr({round_:function(t){const e=ur(t,"x","round");return Ae.runKernelFunc(t=>t.round(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),Bi=hr({rsqrt_:function(t){const e=ur(t,"x","rsqrt");return Ae.runKernelFunc((t,n)=>{const r=t.rsqrt(e);return n([e]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>t.div(n.pow(1.5).mul(2)).neg()}},"Rsqrt",{},[e])}}),Vi=hr({sigmoid_:function(t){const e=ur(t,"x","sigmoid");return Ae.runKernelFunc((t,n)=>{const r=t.sigmoid(e);return n([r]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>t.mul(n.mul(_r(1).sub(n)))}},"Sigmoid")}}),Wi=hr({sign_:function(t){const e=ur(t,"x","sign");return Ae.runKernelFunc(t=>t.sign(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),Ui=hr({isNaN_:function(t){const e=ur(t,"x","isNaN");return Ae.runKernelFunc(t=>t.isNaN(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),Hi=hr({isInf_:function(t){const e=ur(t,"x","isInf");return Ae.runKernelFunc(t=>t.isInf(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),Gi=hr({isFinite_:function(t){const e=ur(t,"x","isFinite");return Ae.runKernelFunc(t=>t.isFinite(e),{$x:e},t=>({$x:()=>Dr(t)}))}}),qi=hr({sin_:function(t){const e=ur(t,"x","sin");return Ae.runKernelFunc((t,n)=>{const r=t.sin(e);return n([e]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>n.toFloat().cos().mul(t)}},"Sin",{},[e])}}),Ki=hr({sinh_:function(t){const e=ur(t,"x","sinh");return Ae.runKernelFunc((t,n)=>{const r=t.sinh(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>n.toFloat().cosh().mul(t)}})}}),Yi=hr({softplus_:function(t){const e=ur(t,"x","softplus");return Ae.runKernelFunc((t,n)=>{const r=t.softplus(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.mul(n.sigmoid())}})}}),Xi=hr({sqrt_:function(t){const e=ur(t,"x","sqrt");return Ae.runKernelFunc((t,n)=>{const r=t.sqrt(e);return n([e]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>t.div(n.toFloat().sqrt().mul(2))}},"Sqrt",{})}}),Zi=hr({step_:function(t,e=0){const n=ur(t,"x","step");return Ae.runKernelFunc(t=>t.step(n,e),{$x:n},t=>({$x:()=>Dr(t)}))}}),Qi=hr({tan_:function(t){const e=ur(t,"x","tan");return Ae.runKernelFunc((t,n)=>{const r=t.tan(e);return n([e]),r},{$x:e},(t,e)=>{const[n]=e;return{$x:()=>t.div(n.cos().square())}})}}),Ji=hr({tanh_:function(t){const e=ur(t,"x","tanh");return Ae.runKernelFunc((t,n)=>{const r=t.tanh(e);return n([r]),r},{x:e},(t,e)=>{const[n]=e;return{x:()=>_r(1).sub(n.square()).mul(t)}},"Tanh",{},null,[!0])}}),ts={kernelName:je,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{const e=dr(vi(n),vi(r));let s=Gr(t,Hr(r,e));const o=rr(n.shape,i);return o.length>0&&(s=bi(s,o)),Lr(s,n.shape)},b:()=>{const e=dr(vi(n),vi(r));let s=$i(Gr(t,Hr(n,e)));const o=rr(r.shape,i);return o.length>0&&(s=bi(s,o)),Lr(s,r.shape)}}}};function es(t,e,n,r,i,s,o="channelsLast"){const[l,a]=os(e);let u;if("channelsLast"===o)u=[l,a,t[3],t[3]];else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);u=[l,a,t[1],t[1]]}return rs(t,u,n,r,i,s,!1,o)}function ns(t,e,n,r,i,s,o="NDHWC"){const[l,a,u]=ls(e);let c,h;if("NDHWC"===o)h="channelsLast",c=[l,a,u,t[4],t[4]];else{if("NCDHW"!==o)throw new Error(`Unknown dataFormat ${o}`);h="channelsFirst",c=[l,a,u,t[1],t[1]]}return is(t,c,n,r,i,!1,h,s)}function rs(t,e,n,r,i,s,o=!1,l="channelsLast"){let[a,u,c,h]=[-1,-1,-1,-1];if("channelsLast"===l)[a,u,c,h]=t;else{if("channelsFirst"!==l)throw new Error(`Unknown dataFormat ${l}`);[a,h,u,c]=t}const[d,p,,f]=e,[g,m]=os(n),[b,y]=os(r),v=as(d,b),_=as(p,y),{padInfo:w,outHeight:x,outWidth:C}=function(t,e,n,r,i,s,o,l,a){let u,c,h;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};const i=function(t,e,n,r,i){null==r&&(r=ss(t,e,n));const s=t[1],o=us((t[0]-e+2*r)/n+1,i);yt(Ot(o),()=>`The output # of rows (${o}) must be an integer. `+"Change the stride and/or zero pad parameters");const l=us((s-e+2*r)/n+1,i);return yt(Ot(l),()=>`The output # of columns (${l}) must be an integer. `+"Change the stride and/or zero pad parameters"),[o,l]}([e,n],s,r,t,l);c=i[0],h=i[1]}else if("same"===t){c=Math.ceil(e/r),h=Math.ceil(n/i);const t=Math.max(0,(c-1)*r+s-e),l=Math.max(0,(h-1)*i+o-n),a=Math.floor(t/2),d=t-a,p=Math.floor(l/2);u={top:a,bottom:d,left:p,right:l-p,type:"SAME"}}else if("valid"===t)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-s+1)/r),h=Math.ceil((n-o+1)/i);else{if("object"!=typeof t)throw Error(`Unknown padding parameter: ${t}`);{const d="channelsLast"===a?t[1][0]:t[2][0],p="channelsLast"===a?t[1][1]:t[2][1],f="channelsLast"===a?t[2][0]:t[3][0],g="channelsLast"===a?t[2][1]:t[3][1];u={top:d,bottom:p,left:f,right:g,type:0===d&&0===p&&0===f&&0===g?"VALID":"EXPLICIT"},c=us((e-s+d+p)/r+1,l),h=us((n-o+f+g)/i+1,l)}}return{padInfo:u,outHeight:c,outWidth:h}}(i,u,c,g,m,v,_,s,l),S=o?f*h:f;let O;return"channelsFirst"===l?O=[a,S,x,C]:"channelsLast"===l&&(O=[a,x,C,S]),{batchSize:a,dataFormat:l,inHeight:u,inWidth:c,inChannels:h,outHeight:x,outWidth:C,outChannels:S,padInfo:w,strideHeight:g,strideWidth:m,filterHeight:d,filterWidth:p,effectiveFilterHeight:v,effectiveFilterWidth:_,dilationHeight:b,dilationWidth:y,inShape:t,outShape:O,filterShape:e}}function is(t,e,n,r,i,s=!1,o="channelsLast",l){let[a,u,c,h,d]=[-1,-1,-1,-1,-1];if("channelsLast"===o)[a,u,c,h,d]=t;else{if("channelsFirst"!==o)throw new Error(`Unknown dataFormat ${o}`);[a,d,u,c,h]=t}const[p,f,g,,m]=e,[b,y,v]=ls(n),[_,w,x]=ls(r),C=as(p,_),S=as(f,w),O=as(g,x),{padInfo:k,outDepth:E,outHeight:T,outWidth:z}=function(t,e,n,r,i,s,o,l,a,u,c){let h,d,p,f;if("number"==typeof t){h={top:t,bottom:t,left:t,right:t,front:t,back:t,type:0===t?"VALID":"NUMBER"};const s=function(t,e,n,r,i,s){null==i&&(i=ss(t,e,r));const o=t[1],l=t[2],a=us((t[0]-e+2*i)/r+1,s);yt(Ot(a),()=>`The output # of depths (${a}) must be an integer. `+"Change the stride and/or zero pad parameters");const u=us((o-e+2*i)/r+1,s);yt(Ot(u),()=>`The output # of rows (${u}) must be an integer. `+"Change the stride and/or zero pad parameters");const c=us((l-e+2*i)/r+1,s);return yt(Ot(c),()=>`The output # of columns (${c}) must be an integer. `+"Change the stride and/or zero pad parameters"),[a,u,c,1]}([e,n,r,1],l,0,i,t,c);d=s[0],p=s[1],f=s[2]}else if("same"===t){const t=((d=Math.ceil(e/i))-1)*i+l-e,c=((p=Math.ceil(n/s))-1)*s+a-n,g=((f=Math.ceil(r/o))-1)*o+u-r,m=Math.floor(t/2),b=t-m,y=Math.floor(c/2),v=c-y,_=Math.floor(g/2);h={top:y,bottom:v,left:_,right:g-_,front:m,back:b,type:"SAME"}}else{if("valid"!==t)throw Error(`Unknown padding parameter: ${t}`);h={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((e-l+1)/i),p=Math.ceil((n-a+1)/s),f=Math.ceil((r-u+1)/o)}return{padInfo:h,outDepth:d,outHeight:p,outWidth:f}}(i,u,c,h,b,y,v,C,S,O,l),P=s?m*d:m;let I;return"channelsFirst"===o?I=[a,P,E,T,z]:"channelsLast"===o&&(I=[a,E,T,z,P]),{batchSize:a,dataFormat:o,inDepth:u,inHeight:c,inWidth:h,inChannels:d,outDepth:E,outHeight:T,outWidth:z,outChannels:P,padInfo:k,strideDepth:b,strideHeight:y,strideWidth:v,filterDepth:p,filterHeight:f,filterWidth:g,effectiveFilterDepth:C,effectiveFilterHeight:S,effectiveFilterWidth:O,dilationDepth:_,dilationHeight:w,dilationWidth:x,inShape:t,outShape:I,filterShape:e}}function ss(t,e,n,r=1){const i=as(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function os(t){return"number"==typeof t?[t,t,t]:2===t.length?[t[0],t[1],1]:t}function ls(t){return"number"==typeof t?[t,t,t]:t}function as(t,e){return e<=1?t:t+(t-1)*(e-1)}function us(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function cs(t){const[e,n,r]=os(t);return 1===e&&1===n&&1===r}function hs(t,e){return cs(t)||cs(e)}function ds(t){if("NHWC"===t)return"channelsLast";if("NCHW"===t)return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}const ps=hr({avgPool3dBackprop_:function(t,e,n,r,i=[1,1,1],s,o){const l=ur(t,"dy","avgPool3dBackprop"),a=ur(e,"input","avgPool3dBackprop");let u=l,c=a,h=!1;4===a.rank&&(h=!0,u=Lr(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),c=Lr(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),yt(5===u.rank,()=>"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+`${u.rank}.`),yt(5===c.rank,()=>"Error in avgPool3dBackprop: input must be rank 5 but got rank "+`${c.rank}.`),yt(hs(r,i),()=>"Error in avgPool3dBackprop: Either strides or dilations "+`must be 1. Got strides ${r} and dilations '${i}'`),null!=o&&yt(Ot(s),()=>"Error in maxPool3dBackprop: pad must be an integer when "+`using, dimRoundingMode ${o} but got pad ${s}.`);const d=Ae.runKernelFunc(t=>{const e=ns(c.shape,n,r,i,s,o);return t.avgPool3dBackprop(u,c,e)},{dy:u,input:c},null,Ue,{filterSize:n,strides:r,dilations:i,pad:s,dimRoundingMode:o});return h?Lr(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),fs={kernelName:We,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,dilations:o,pad:l,dimRoundingMode:a}=n,u=null==o?[1,1,1]:o;return{x:()=>ps(t,r,i,s,u,l,a)}}},gs=hr({avgPoolBackprop_:function(t,e,n,r,i){const s=ur(t,"dy","avgPoolBackprop"),o=ur(e,"input","avgPoolBackprop");yt(o.rank===s.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${s.rank})`);let l=o,a=s,u=!1;3===o.rank&&(u=!0,l=Lr(o,[1,o.shape[0],o.shape[1],o.shape[2]]),a=Lr(s,[1,s.shape[0],s.shape[1],s.shape[2]])),yt(4===a.rank,()=>"Error in avgPoolBackprop: dy must be rank 4 but got rank "+`${a.rank}.`),yt(4===l.rank,()=>"Error in avgPoolBackprop: input must be rank 4 but got rank "+`${l.rank}.`);const c=Ae.runKernelFunc(t=>{const e=es(l.shape,n,r,1,i);return t.avgPoolBackprop(a,l,e)},{dy:a,input:l},null,Ve,{filterSize:n,strides:r,pad:i});return u?Lr(c,[c.shape[1],c.shape[2],c.shape[3]]):c}}),ms={kernelName:Be,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:i,strides:s,pad:o}=n;return{x:()=>gs(t,r,i,s,o)}}},bs=hr({matMul_:function(t,e,n=!1,r=!1){let i=ur(t,"a","matMul"),s=ur(e,"b","matMul");[i,s]=Te(i,s),yt(i.rank>=2&&s.rank>=2&&i.rank===s.rank,()=>"Error in matMul: inputs must have the same rank of at least 2, "+`got ranks ${i.rank} and ${s.rank}.`);const o=n?i.shape[i.rank-2]:i.shape[i.rank-1],l=r?s.shape[s.rank-1]:s.shape[s.rank-2],a=n?i.shape[i.rank-1]:i.shape[i.rank-2],u=r?s.shape[s.rank-2]:s.shape[s.rank-1],c=i.shape.slice(0,-2),h=s.shape.slice(0,-2),d=xt(c),p=xt(h);yt(St(c,h),()=>`Error in matMul: outer dimensions (${c}) and (`+`${h}) of Tensors with shapes ${i.shape} and `+`${s.shape} must match.`),yt(o===l,()=>`Error in matMul: inner shapes (${o}) and (`+`${l}) of Tensors with shapes ${i.shape} and `+`${s.shape} and transposeA=${n}`+` and transposeB=${r} must match.`);const f=i.shape.slice(0,-2).concat([a,u]),g=Lr(i,n?[d,o,a]:[d,a,o]),m=Lr(s,r?[p,u,l]:[p,l,u]),b=Ae.runKernelFunc((t,e)=>(e([g,m]),t.batchMatMul(g,m,n,r)),{a:g,b:m},null,He,{transposeA:n,transposeB:r});return Lr(b,f)}}),ys={kernelName:He,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,i]=e,{transposeA:s,transposeB:o}=n;return s||o?!s&&o?{a:()=>bs(t,i,!1,!1),b:()=>bs(t,r,!0,!1)}:s&&!o?{a:()=>bs(i,t,!1,!0),b:()=>bs(r,t,!1,!1)}:{a:()=>bs(i,t,!0,!0),b:()=>bs(t,r,!0,!0)}:{a:()=>bs(t,i,!1,!0),b:()=>bs(r,t,!0,!1)}}},vs=hr({spaceToBatchND_:function(t,e,n){const r=ur(t,"x","spaceToBatchND");return yt(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),yt(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),yt(r.shape.reduce((t,r,i)=>i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`),Ae.runKernelFunc(t=>t.spaceToBatchND(r,e,n),{x:r},null,Kn,{blockShape:e,paddings:n})}}),_s={kernelName:Ge,gradFunc:(t,e,n)=>{const{blockShape:r,crops:i}=n;return{x:()=>vs(t,r,i)}}},ws={kernelName:qe,gradFunc:(t,e,n)=>{const r=n.inputShape,i=n.shape,s=Array.from(i);for(let l=r.length-1;l>=0;l--)if(r[l]===i[l])s[l]=1;else if(1!==r[l])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${i}].`);const o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>bi(t,o,!0)}}},xs=hr({split_:function(t,e,n=0){const r=ur(t,"x","split"),i=Mt(n,r.shape)[0];let s;return"number"==typeof e?(yt(r.shape[i]%e==0,()=>"Number of splits must evenly divide the axis."),s=new Array(e).fill(r.shape[i]/e)):(yt(r.shape[i]===e.reduce((t,e)=>t+e),()=>"The sum of sizes must match the size of the axis dimension."),s=e),Ae.runKernelFunc((t,e)=>t.split(r,s,i),{x:r},null,Yn,{numOrSizeSplits:e,axis:n})}}),Cs={kernelName:Ye,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(t=>t.shape),{axis:i}=n,s=Mt(i,e[0].shape)[0],o=r.map(t=>t[s]);return xs(t,o,s).map(t=>()=>t)}},Ss=hr({conv2DBackpropFilter_:function(t,e,n,r,i,s="NHWC",o){let l=t;3===t.rank&&(l=Lr(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let a=e;3===a.rank&&(a=Lr(e,[1,e.shape[0],e.shape[1],e.shape[2]])),yt(4===l.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape "+`${l.shape}.`),yt(4===a.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape "+`${a.shape}.`),yt(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got "+`${n}.`);const u="NHWC"===s?l.shape[3]:l.shape[1],c="NHWC"===s?a.shape[3]:a.shape[1];return yt(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must `+`match input depth in filter (${n[2]}.`),yt(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must `+`match output depth for filter (${n[3]}).`),null!=o&&yt(Ot(i),()=>"Error in conv2dDerFilter: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${i}.`),Ae.runKernelFunc(t=>{const e=ds(s),u=rs(l.shape,n,r,1,i,o,!1,e);return t.conv2dDerFilter(l,a,u)},{x:l,dy:a},null,Ze,{strides:r,pad:i,dataFormat:s,dimRoundingMode:o})}}),Os=hr({conv2DBackpropInput_:function(t,e,n,r,i,s="NHWC",o){yt(t.length===e.rank,()=>"Length of inShape "+`(${t.length}) and rank of dy (${e.rank}) must match`);let l=t,a=e,u=!1;3===e.rank&&(u=!0,a=Lr(e,[1,e.shape[0],e.shape[1],e.shape[2]]),l=[1,t[0],t[1],t[2]]),yt(4===l.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length "+`${l.length}.`),yt(4===a.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got "+`rank ${a.rank}`),yt(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got "+`rank ${n.rank}`);const c="NHWC"===s?l[3]:l[1],h="NHWC"===s?a.shape[3]:a.shape[1];yt(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must `+`match input depth for filter ${n.shape[2]}.`),yt(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must `+`match output depth for filter ${n.shape[3]}.`),null!=o&&yt(Ot(i),()=>"Error in conv2dDerInput: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${i}.`);const d=Ae.runKernelFunc((t,e)=>{const u=ds(s),c=rs(l,n.shape,r,1,i,o,!1,u),h=t.conv2dDerInput(a,n,c);return e([a,n]),h},{dy:a,filter:n},null,Qe,{strides:r,pad:i,dataFormat:s,dimRoundingMode:o});return u?Lr(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),ks={kernelName:Xe,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{dilations:s,strides:o,pad:l,dataFormat:a}=n;return yt(cs(s),()=>"Error in gradient of conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`),{x:()=>Os(r.shape,t,i,o,l,a),filter:()=>Ss(r,t,i.shape,o,l,a)}}},Es=hr({conv2d_:function(t,e,n,r,i="NHWC",s=[1,1],o){const l=ur(t,"x","conv2d"),a=ur(e,"filter","conv2d");let u=l,c=!1;3===l.rank&&(c=!0,u=Lr(l,[1,l.shape[0],l.shape[1],l.shape[2]])),yt(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),yt(4===a.rank,()=>"Error in conv2d: filter must be rank 4, but got rank "+`${a.rank}.`),null!=o&&yt(Ot(r),()=>"Error in conv2d: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${r}.`);const h="NHWC"===i?u.shape[3]:u.shape[1];yt(h===a.shape[2],()=>`Error in conv2d: depth of input (${h}) must match `+`input depth for filter ${a.shape[2]}.`),yt(hs(n,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`);const d=Ae.runKernelFunc((t,e)=>{const l=ds(i),c=rs(u.shape,a.shape,n,s,r,o,!1,l),h=t.conv2d(u,a,c);return e([u,a]),h},{x:u,filter:a},null,Xe,{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o});return c?Lr(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Ts={kernelName:Qe,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,i]=e,{strides:s,pad:o,dataFormat:l,dimRoundingMode:a}=n;return{dy:()=>Es(t,i,s,o,l,1,a),filter:()=>Ss(t,r,i.shape,s,o,l,a)}}},zs=hr({conv3DBackpropFilter_:function(t,e,n,r,i){let s=t;4===t.rank&&(s=Lr(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;return 4===o.rank&&(o=Lr(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),yt(5===s.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape "+`${s.shape}.`),yt(5===o.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape "+`${o.shape}.`),yt(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got "+`${n}.`),yt(s.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${s.shape[4]}) must `+`match input depth in filter (${n[3]}.`),yt(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must `+`match output depth for filter (${n[4]}).`),Ae.runKernelFunc(t=>{const e=is(s.shape,n,r,1,i);return t.conv3dDerFilter(s,o,e)},{x:s,y:o},null,tn,{strides:r,pad:i})}}),Ps=hr({conv3DBackpropInput_:function(t,e,n,r,i){yt(t.length===e.rank,()=>"Length of inShape "+`(${t.length}) and rank of dy (${e.rank}) must match`);let s=t,o=e,l=!1;4===e.rank&&(l=!0,o=Lr(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),s=[1,t[0],t[1],t[2],t[3]]);const a=s[4],u=o.shape[4];yt(5===s.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length "+`${s.length}.`),yt(5===o.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got "+`rank ${o.rank}`),yt(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got "+`rank ${n.rank}`),yt(a===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${a}) must `+`match input depth for filter ${n.shape[3]}.`),yt(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must `+`match output depth for filter ${n.shape[4]}.`);const c=Ae.runKernelFunc(t=>{const e=is(s,n.shape,r,1,i);return t.conv3dDerInput(o,n,e)},{dy:o},null,en,{pad:i});return l?Lr(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Is={kernelName:Je,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s}=n;yt(cs(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are "+`not yet supported in gradients. Got dilations '${r}'`);const[o,l]=e;return{x:()=>Ps(o.shape,t,l,i,s),filter:()=>zs(o,t,l.shape,i,s)}}},Ms=hr({transpose_:function(t,e){const n=ur(t,"x","transpose");return null==e&&(e=n.shape.map((t,e)=>e).reverse()),yt(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} `+`must match length of perm ${e}.`),e.forEach(t=>{yt(t>=0&&t<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1}`+` but got ${e}`)}),n.rank<=1?n.clone():Ae.runKernelFunc(t=>t.transpose(n,e),{x:n},null,"Transpose",{perm:e})}}),Ds=hr({cumsum_:function(t,e=0,n=!1,r=!1){const i=ur(t,"x","cumsum");return Ae.runKernelFunc((t,s)=>{const o=si([e],i.rank);let l=i;null!=o&&(l=Ms(i,o));const a=li(1,i.rank)[0];let u=t.cumsum(l,a,n,r);return s([i]),null!=o&&(u=Ms(u,o)),u},{x:i},null,nn,{axis:e,exclusive:n,reverse:r})}}),As={kernelName:nn,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:i,exclusive:s,reverse:o}=n;return{x:()=>{const e=si([i],r.rank);let n=Ds(t,i,s,!o);return null!=e&&(n=Ms(n,e)),n}}}},Ns=hr({depthwiseConv2dNativeBackpropFilter_:function(t,e,n,r){let i=t;3===t.rank&&(i=Lr(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let s=e;return 3===s.rank&&(s=Lr(e,[1,e.shape[0],e.shape[1],e.shape[2]])),Ae.runKernelFunc(t=>t.depthwiseConv2DDerFilter(i,s,r),{x:i,dy:s},null,on)}}),Rs=hr({depthwiseConv2dNativeBackpropInput_:function(t,e,n,r){let i=e,s=!1;3===e.rank&&(s=!0,i=Lr(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const o=Ae.runKernelFunc(t=>t.depthwiseConv2DDerInput(i,n,r),{dy:i},null,ln);return s?Lr(o,[o.shape[1],o.shape[2],o.shape[3]]):o}}),Fs={kernelName:sn,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:i,pad:s,dimRoundingMode:o}=n,l=null==r?[1,1]:r;yt(cs(l),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations "+`'${l}'`);const[a,u]=e;yt(4===a.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be "+`rank 4, but got rank ${a.rank}.`),yt(4===u.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be "+`rank 4, but got rank ${u.rank}.`),yt(a.shape[3]===u.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input "+`channels (${a.shape[3]}) must match the inChannels dimension `+`in filter ${u.shape[2]}.`),yt(hs(i,l),()=>"Error in gradient of depthwiseConv2d: Either strides or "+`dilations must be  1. Got strides ${i} and dilations `+`'${l}'.`),null!=o&&yt(Ot(s),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${s}.`);const c=rs(a.shape,u.shape,i,l,s,o,!0);return{x:()=>Rs(a.shape,t,u,c),filter:()=>Ns(a,t,u.shape,c)}}},$s={kernelName:un,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{const e=Hr(t,r.toFloat()),s=rr(n.shape,i);return s.length>0?bi(e,s).reshape(n.shape):e},b:()=>{let e=Gr(t,n.toFloat());const s=rr(r.shape,i);s.length>0&&(e=Lr(bi(e,s),r.shape));const o=vi(r);return $i(Hr(e,o.toFloat()))}}}},Ls={kernelName:cn,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r=e=>e.eluDer(t,n),i={dy:t,y:n};return{x:()=>Ae.runKernelFunc(r,i,null,hn)}}},js={kernelName:pn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{const e=t.div(r.toFloat()),s=rr(n.shape,i);return s.length>0?e.sum(s).reshape(n.shape):e},b:()=>{let e=t.mul(n.toFloat());const s=rr(r.shape,i);s.length>0&&(e=e.sum(s).reshape(r.shape));const o=r.square();return e.div(o.toFloat()).neg()}}}},Bs=hr({sub_:function(t,e){let n=ur(t,"a","sub"),r=ur(e,"b","sub");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.subtract(n,r);return e([n,r]),i},{a:n,b:r},null,Qn)}}),Vs=hr({tile_:function(t,e){const n=ur(t,"x","tile",null);return yt(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} `+`must match length of reps ${e}.`),Ae.runKernelFunc((t,r)=>{const i=t.tile(n,e);return r([n]),i},{x:n},null,Jn,{reps:e},[n])}}),Ws={kernelName:gn,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[i,s,o,l]=e,a=null==l?_r(1):l,u=rr(s.shape,i.shape),c=[];if(1===s.rank){for(let t=0;t<i.shape.length-1;++t)c.push(i.shape[t]);c.push(1)}const h=Bs(i,s),d=Gr(t,a),p=Bi(dr(o,_r(r))),f=Gr(Gr(Gr(p,p),p),_r(-.5));return{x:()=>Lr(Gr(Gr(t,1===s.rank?Vs(p.as4D(1,1,1,s.shape[0]),c):p),a),i.shape),mean:()=>{let t=Gr(Gr(p,_r(-1)),d);return 1===s.rank&&(t=bi(t,u)),Lr(t,s.shape)},variance:()=>{let t=Gr(Gr(f,h),d);return 1===s.rank&&(t=bi(t,u)),Lr(t,s.shape)},scale:()=>{const e=Gr(h,p);let n=Gr(t,e);return 1===s.rank&&(n=bi(n,u)),Lr(n,s.shape)},offset:()=>{let e=t;return 1===s.rank&&(e=bi(e,u)),Lr(e,s.shape)}}}},Us={kernelName:yn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Dr(n),b:()=>Dr(r)}}},Hs={kernelName:vn,gradFunc:t=>({x:()=>t.toFloat()})},Gs=hr({localResponseNormalizationBackprop_:function(t,e,n,r=5,i=1,s=1,o=.5){return Ae.runKernelFunc(l=>l.LRNGrad(n,t,e,r,i,s,o),{x:t,y:e,dy:n},null,Sn,{depthRadius:r,bias:i,alpha:s,beta:o})}}),qs={kernelName:Cn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{depthRadius:s,bias:o,alpha:l,beta:a}=n;return{x:()=>Gs(r,i,t,s,o,l,a)}}},Ks={kernelName:On,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:i}=r,[s,o]=e,l=Mt(i,s.shape),a=si(l,s.rank),u=ai(t,o,s,l,a);return{x:()=>{let t=u.x();return null!=a&&(t=Ms(t)),t}}}},Ys=hr({greaterEqual_:function(t,e){let n=ur(t,"a","greaterEqual"),r=ur(e,"b","greaterEqual");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc((t,e)=>{const i=t.greaterEqual(n,r);return e([n,r]),i},{a:n,b:r},null,yn)}}),Xs=hr({less_:function(t,e){let n=ur(t,"a","less"),r=ur(e,"b","less");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc(t=>t.less(n,r),{a:n,b:r},null,wn)}}),Zs={kernelName:kn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Gr(t,Fr(Ys(n,r),"float32")),b:()=>Gr(t,Fr(Xs(n,r),"float32"))}}},Qs=hr({maxPool3dBackprop_:function(t,e,n,r,i,s=[1,1,1],o,l){const a=ur(t,"dy","maxPool3dBackprop"),u=ur(e,"input","maxPool3dBackprop"),c=ur(n,"output","maxPool3dBackprop");let h=a,d=u,p=c,f=!1;4===u.rank&&(f=!0,h=Lr(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Lr(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),p=Lr(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),yt(5===h.rank,()=>"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+`${h.rank}.`),yt(5===d.rank,()=>"Error in maxPool3dBackprop: input must be rank 5 but got rank "+`${d.rank}.`),yt(5===p.rank,()=>"Error in maxPool3dBackprop: output must be rank 5 but got rank "+`${p.rank}.`),yt(hs(i,s),()=>"Error in maxPool3dBackprop: Either strides or dilations "+`must be 1. Got strides ${i} and dilations '${s}'`),null!=l&&yt(Ot(o),()=>"Error in maxPool3dBackprop: pad must be an integer when "+`using, dimRoundingMode ${l} but got pad ${o}.`);const g=Ae.runKernelFunc(t=>{const e=ns(d.shape,r,i,s,o,l);return t.maxPool3dBackprop(h,d,p,e)},{dy:h,input:d,output:p},null,Pn,{filterSize:r,strides:i,dilations:s,pad:o,dimRoundingMode:l});return f?Lr(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),Js={kernelName:zn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,dilations:l,pad:a,dimRoundingMode:u}=n,c=null==l?[1,1,1]:l;return{x:()=>Qs(t,r,i,s,o,c,a,u)}}},to=hr({maxPoolBackprop_:function(t,e,n,r,i,s,o){const l=ur(t,"dy","maxPoolBackprop"),a=ur(e,"input","maxPoolBackprop"),u=ur(n,"output","maxPoolBackprop");return yt(a.rank===l.rank,()=>`Rank of input (${a.rank}) does not match rank of dy `+`(${l.rank})`),yt(4===l.rank,()=>"Error in maxPoolBackprop: dy must be rank 4 but got rank "+`${l.rank}.`),yt(4===a.rank,()=>"Error in maxPoolBackprop: input must be rank 4 but got rank "+`${a.rank}.`),null!=o&&yt(Ot(s),()=>"Error in maxPoolBackprop: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${s}.`),Ae.runKernelFunc(t=>{const e=es(a.shape,r,i,1,s,o);return t.maxPoolBackprop(l,a,u,e)},{dy:l,input:a,output:u},null,Tn,{filterSize:r,strides:i,pad:s,dimRoundingMode:o})}}),eo={kernelName:En,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,i]=e,{filterSize:s,strides:o,pad:l}=n;return{x:()=>to(t,r,i,s,o,l)}}},no=hr({greater_:function(t,e){let n=ur(t,"a","greater"),r=ur(e,"b","greater");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc(t=>t.greater(n,r),{a:n,b:r},null,bn)}}),ro=hr({lessEqual_:function(t,e){let n=ur(t,"a","lessEqual"),r=ur(e,"b","lessEqual");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc((t,e)=>{const i=t.lessEqual(n,r);return e([n,r]),i},{a:n,b:r},null,xn)}}),io={kernelName:Mn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Gr(t,Fr(ro(n,r),"float32")),b:()=>Gr(t,Fr(no(n,r),"float32"))}}},so={kernelName:Dn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{const e=rr(n.shape,i);return e.length>0?Lr(bi(t,e),n.shape):t},b:()=>{const e=Gr(t,$i(Ai(Hr(n,r)))),s=rr(r.shape,i);return s.length>0?Lr(bi(e,s),r.shape):e}}}},oo={kernelName:An,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{const e=Gr(t,Fr(r,"float32")),s=rr(n.shape,i);return s.length>0?Lr(bi(e,s),n.shape):e},b:()=>{const e=Gr(t,Fr(n,"float32")),s=rr(r.shape,i);return s.length>0?Lr(bi(e,s),r.shape):e}}}},lo={kernelName:$n,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>zr(n.shape,"float32")}}},ao={kernelName:Ln,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:i}=n,s=i.map(t=>t[0]);return{x:()=>t.slice(s,r.shape)}}};function uo(t,e){const n=[];for(let s=0;s<e.length;s++)e[s]&&n.push(s);const r=Nr(t,"int32"),i=Nr([n.length,t.length],"int32");for(let s=0;s<n.length;s++){const e=r.indexToLoc(n[s]);i.values.set(e,s*t.length)}return i.toTensor()}const co=hr({logicalAnd_:function(t,e){const n=ur(t,"a","logicalAnd","bool"),r=ur(e,"b","logicalAnd","bool");return ir(n.shape,r.shape),Ae.runKernelFunc(t=>t.logicalAnd(n,r),{a:n,b:r},null,"LogicalAnd")}}),ho=hr({logicalNot_:function(t){const e=ur(t,"x","logicalNot","bool");return Ae.runKernelFunc(t=>t.logicalNot(e),{$x:e})}}),po=hr({logicalOr_:function(t,e){const n=ur(t,"a","logicalOr","bool"),r=ur(e,"b","logicalOr","bool");return ir(n.shape,r.shape),Ae.runKernelFunc(t=>t.logicalOr(n,r),{$a:n,$b:r})}}),fo=hr({logicalXor_:function(t,e){const n=ur(t,"a","logicalXor","bool"),r=ur(e,"b","logicalXor","bool");return ir(n.shape,r.shape),po(t,e).logicalAnd(co(t,e).logicalNot())}}),go=hr({where_:function(t,e,n){const r=ur(e,"a","where"),i=ur(n,"b","where"),s=ur(t,"condition","where","bool");return vt(r.shape,i.shape,"Error in where: "),1===s.rank?yt(s.shape[0]===r.shape[0],()=>"The first dimension of `a` must match the size of `condition`."):vt(s.shape,i.shape,"Error in where: "),Ae.runKernelFunc((t,e)=>{const n=t.select(s,r,i);return e([s]),n},{condition:s,t:r,e:i},(t,e)=>{const[n]=e;return{condition:()=>Dr(n).toFloat(),t:()=>t.mul(n.cast(t.dtype)),e:()=>t.mul(n.logicalNot().cast(t.dtype))}},Gn)}}),mo=async function(t){const e=ur(t,"condition","whereAsync","bool"),n=await e.data(),r=uo(e.shape,n);return t!==e&&e.dispose(),r},bo=hr({pow_:function(t,e){let n=ur(t,"base","pow"),r=ur(e,"exp","pow");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.pow(n,r);return e([n,r,i]),i},{a:n,b:r},null,Bn)}}),yo={kernelName:Bn,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,i]=e,s=n,o=r,l=ir(s.shape,o.shape);return{a:()=>{const e=Fr(o,"float32");let n=Gr(t,Gr(e,bo(s,Bs(e,_r(1)))));const r=rr(s.shape,l);return r.length>0&&(n=bi(n,r)),Lr(n,s.shape)},b:()=>{const e=no(s,0),n=go(e,Ni(s),Dr(s));let r=Gr(t,Gr(i,n));const a=rr(o.shape,l);return a.length>0&&(r=bi(r,a)),Lr(r,o.shape)}}}},vo={kernelName:Vn,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,i=no(n,0);return{x:()=>go(i,t,Gr(t,r)),alpha:()=>{let e=go(i,Dr(t),Gr(t,n));const s=rr(r.shape,t.shape);return s.length>0&&(e=bi(e,s)),Lr(e,r.shape)}}}},_o={kernelName:Hn,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Gr(ro(n,6),Zi(n));return{x:()=>Gr(t,Fr(r,"float32"))}}},wo={kernelName:Un,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Gr(t,Fr(Zi(n),"float32"))}}},xo=1.7580993408473768,Co=1.0507009873554805,So={kernelName:qn,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const e=no(n,_r(0)),r=_r(xo),i=_r(Co),s=Gr(t,i),o=Gr(Gr(t,r),Mi(Fr(n,"float32")));return go(e,s,o)}}}},Oo=hr({batchToSpaceND_:function(t,e,n){const r=ur(t,"x","batchToSpaceND"),i=e.reduce((t,e)=>t*e);return yt(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),yt(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),yt(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of `+`the elements of blockShape ${e.join(" * ")} === ${i}`),Ae.runKernelFunc(t=>t.batchToSpaceND(r,e,n),{x:r},null,Ge,{blockShape:e,crops:n})}}),ko={kernelName:Kn,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:i}=n;return{x:()=>Oo(t,r,i)}}},Eo={kernelName:Yn,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Ar(t,r)}}},To={kernelName:Zn,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Gr(t,Gr(n.toFloat(),2))}}},zo={kernelName:Xn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=_r(2);return{a:()=>Gr(t,Gr(i,Bs(n,r))),b:()=>Gr(t,Gr(i,Bs(r,n)))}}},Po={kernelName:Qn,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,i=ir(n.shape,r.shape);return{a:()=>{let e=t;const r=rr(n.shape,i);return r.length>0&&(e=bi(e,r)),Lr(e,n.shape)},b:()=>{let e=t;const n=rr(r.shape,i);return n.length>0&&(e=bi(e,n)),Lr($i(e),r.shape)}}}},Io=hr({pad_:function(t,e,n=0){const r=ur(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");return Ae.runKernelFunc((t,i)=>(i([r]),t.pad(r,e,n)),{x:r},null,Ln,{paddings:e,constantValue:n})}});function Mo(t,e,n){yt(t.rank===e.length,()=>`Error in slice${t.rank}D: Length of begin ${e} must `+`match the rank of the array (${t.rank}).`),yt(t.rank===n.length,()=>`Error in slice${t.rank}D: Length of size ${n} must `+`match the rank of the array (${t.rank}).`);for(let r=0;r<t.rank;++r)yt(e[r]+n[r]<=t.shape[r],()=>`Error in slice${t.rank}D: begin[${r}] + size[${r}] `+`(${e[r]+n[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function Do(t){const e=[];let n=0;for(;t>0;)1&t&&e.push(n),t/=2,n++;return e}function Ao(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function No(t,e,n){const r=[...t];for(let i=0;i<n;i++)0===i?r[e]=1:(r.splice(e,0,1),r.pop());return r}function Ro(t,e,n){const r=[...t];for(let i=0;i<n;i++)0===i?r[e]=0:(r.splice(e,0,0),r.pop());return r}function Fo(t,e,n,r){const i=[...t];for(let s=0;s<n;s++)0===s?i[e]=Number.MAX_SAFE_INTEGER:(i.splice(e,0,Number.MAX_SAFE_INTEGER),i.pop());for(let s=0;s<i.length;s++)i[s]=pt(0,i[s],r[s]);return i}function $o(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function Lo(t,e,n,r,i,s){let o=e[i];(t&1<<i||s&1<<i||null==o)&&(o=(n[i]||1)>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=r[i];return o<0&&(o+=l),pt(0,o,l-1)}function jo(t,e,n,r,i,s){let o=e[i];const l=n[i]||1;(t&1<<i||s&1<<i||null==o)&&(o=l>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const a=r[i];return o<0&&(o+=a),l>0?pt(0,o,a):pt(-1,o,a-1)}function Bo(t,e,n){let r=n.length;for(let i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Vo(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}const Wo=hr({slice_:function(t,e,n){const r=ur(t,"x","slice");if(0===r.rank)throw new Error("Slicing scalar is not possible");let i,s;(i="number"==typeof e?[e,...new Array(r.rank-1).fill(0)]:e.length<r.rank?e.concat(new Array(r.rank-e.length).fill(0)):e.slice()).forEach(t=>{yt(-1!==t,()=>"slice() does not support negative begin indexing.")}),s=(s=null==n?new Array(r.rank).fill(-1):"number"==typeof n?[n,...new Array(r.rank-1).fill(-1)]:n.length<r.rank?n.concat(new Array(r.rank-n.length).fill(-1)):n).map((t,e)=>t>=0?t:(yt(-1===t,()=>"Negative size values should be exactly -1 but got "+`${t} for the slice() size at index ${e}.`),r.shape[e]-i[e])),Mo(r,i,s);const o=r.shape;return Ae.runKernelFunc(t=>t.slice(r,i,s),{x:r},t=>{const e=[];for(let n=0;n<t.rank;n++)e.push([i[n],o[n]-i[n]-s[n]]);return{x:()=>Io(t,e)}},"Slice",{begin:i,size:s})}}),Uo=hr({slice1d_:function(t,e,n){const r=ur(t,"x","slice1d");return yt(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Wo(r,[e],[n])}}),Ho=hr({slice2d_:function(t,e,n){const r=ur(t,"x","slice2d");return yt(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Wo(r,e,n)}}),Go=hr({slice3d_:function(t,e,n){const r=ur(t,"x","slice3d");return yt(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Wo(r,e,n)}}),qo=hr({slice4d_:function(t,e,n){const r=ur(t,"x","slice4d");return yt(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Wo(r,e,n)}}),Ko=[sr,or,ts,ms,fs,ys,_s,ws,Cs,ks,Ts,Is,As,Fs,$s,Ls,js,Ws,Us,Hs,qs,lo,ao,Eo,Ks,ko,Ks,Zs,eo,Js,io,so,oo,lo,ao,yo,vo,wo,_o,So,ko,Eo,To,zo,{kernelName:Jn,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:i}=n;return{x:()=>{let e=Dr(r);if(1===r.rank)for(let n=0;n<i[0];++n)e=dr(e,Wo(t,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)e=dr(e,Wo(t,[n*r.shape[0],s*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)for(let o=0;o<i[2];++o)e=dr(e,Wo(t,[n*r.shape[0],s*r.shape[1],o*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+`${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let s=0;s<i[1];++s)for(let o=0;o<i[2];++o)for(let l=0;l<i[3];++l)e=dr(e,Wo(t,[n*r.shape[0],s*r.shape[1],o*r.shape[2],l*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return e}}}},{kernelName:tr,gradFunc:(t,e,n)=>{const r=n,{perm:i}=r,s=oi(i);return{x:()=>Ms(t,s)}}},Po];for(const Ak of Ko)at(Ak);Z().get("IS_BROWSER")&&Z().setPlatform("browser",new class{fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}});const Yo=()=>n(1);let Xo;Z().get("IS_NODE")&&Z().setPlatform("node",new class{constructor(){this.util=n(2),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return null!=Z().global.fetch?Z().global.fetch(t,e):(null==Xo&&(Xo=Yo()),Xo(t,e))}now(){const t=process.hrtime();return 1e3*t[0]+t[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}});const Zo={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Qo=4;async function Jo(t,e){const n=[],r=[],i=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);for(let s=0;s<i.length;++s){const o=i[s],l=Array.isArray(t)?t[s].tensor:t[o];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype&&"complex64"!==l.dtype)throw new Error(`Unsupported dtype in weight '${o}': ${l.dtype}`);const a={name:o,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){const t=new Promise(async t=>{const e=await l.bytes(),n=e.reduce((t,e)=>t+e.length,0)+Qo*e.length,r=new Uint8Array(n);let i=0;for(let s=0;s<e.length;s++){const t=e[s],n=new Uint8Array(new Uint32Array([t.length]).buffer);r.set(n,i),r.set(t,i+=Qo),i+=t.length}t(r)});r.push(t)}else r.push(l.data());null!=e&&(a.group=e),n.push(a)}return{data:el(await Promise.all(r)),specs:n}}function tl(t,e){const n={};let r,i=0;for(const s of e){const e=s.name,o=s.dtype,l=s.shape,a=xt(l);let u;if("quantization"in s){const n=s.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n&&"scale"in n))throw new Error(`Weight ${s.name} with quantization ${n.dtype} `+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==n.dtype)throw new Error(`Weight ${s.name} has unknown `+`quantization dtype ${n.dtype}. `+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==o)throw new Error(`Weight ${s.name} is quantized with ${n.dtype} `+`which only supports weights of type float32 not ${o}.`)}const l=Zo[n.dtype],c=t.slice(i,i+a*l),h="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===o)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(h.length);for(let t=0;t<h.length;t++)u[t]=h[t]*n.scale+n.min}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} `+"for weight type float32.");void 0===r&&(r=ll()),u=r(h)}else{if("int32"!==o)throw new Error(`Unsupported dtype in weight '${e}': ${o}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} `+"for weight type int32.");u=new Int32Array(h.length);for(let t=0;t<h.length;t++)u[t]=Math.round(h[t]*n.scale+n.min)}i+=a*l}else if("string"===o){const e=xt(s.shape);u=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(i,i+Qo))[0];i+=Qo;const n=new Uint8Array(t.slice(i,i+e));u.push(n),i+=e}}else{const r=Zo[o],s=t.slice(i,i+a*r);if("float32"===o)u=new Float32Array(s);else if("int32"===o)u=new Int32Array(s);else if("bool"===o)u=new Uint8Array(s);else{if("complex64"!==o)throw new Error(`Unsupported dtype in weight '${e}': ${o}`);{u=new Float32Array(s);const t=new Float32Array(u.length/2),r=new Float32Array(u.length/2);for(let e=0;e<t.length;e++)t[e]=u[2*e],r[e]=u[2*e+1];const i=yr(t,l,"float32"),o=yr(r,l,"float32");n[e]=gr(i,o)}}i+=a*r}"complex64"!==o&&(n[e]=yr(u,l,o))}return n}function el(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${t.constructor.name}`)});const r=new Uint8Array(e);let i=0;return n.forEach(t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}const nl="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function rl(t){return nl?Buffer.byteLength(t):new Blob([t]).size}function il(t){if(1===t.length)return t[0];let e=0;t.forEach(t=>{e+=t.byteLength});const n=new Uint8Array(e);let r=0;return t.forEach(t=>{n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function sl(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function ol(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:rl(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:rl(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function ll(){const t=function(){const t=t=>{let e=t<<13,n=0;for(;0==(8388608&e);)n-=8388608,e<<=1;return(e&=-8388609)|n+947912704},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}(),e=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const i=new ArrayBuffer(4*r.length),s=new Uint32Array(i);for(let o=0;o<r.length;o++){const i=r[o];s[o]=t[n[i>>10]+(1023&i)]+e[i>>10]}return new Float32Array(i)}}class al{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==al.instance&&(al.instance=new al),al.instance}static registerSaveRouter(t){al.getInstance().saveRouters.push(t)}static registerLoadRouter(t){al.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return al.getHandlers(t,"save")}static getLoadHandlers(t,e){return al.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[];return("load"===e?al.getInstance().loadRouters:al.getInstance().saveRouters).forEach(e=>{const i=e(t,n);null!==i&&r.push(i)}),r}}const ul=t=>al.registerSaveRouter(t),cl=t=>al.registerLoadRouter(t),hl=t=>al.getSaveHandlers(t),dl=(t,e)=>al.getLoadHandlers(t,e),pl="://";class fl{constructor(){this.managers={}}static getInstance(){return null==fl.instance&&(fl.instance=new fl),fl.instance}static registerManager(t,e){yt(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(pl)&&(t=t.slice(0,t.indexOf(pl))),yt(t.length>0,()=>"scheme must not be an empty string.");const n=fl.getInstance();yt(null==n.managers[t],()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function gl(t){if(-1===t.indexOf(pl))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+`${fl.getSchemes().join(",")}`);return{scheme:t.split(pl)[0],path:t.split(pl)[1]}}async function ml(t,e,n=!1){yt(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=al.getLoadHandlers(t);yt(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),yt(r.length<2,()=>`Copying failed because more than one (${r.length}) `+`load handlers for source URL ${t}.`);const i=r[0],s=al.getSaveHandlers(e);yt(s.length>0,()=>"Copying failed because no save handler is found for destination "+`URL ${e}.`),yt(s.length<2,()=>`Copying failed because more than one (${r.length}) `+`save handlers for destination URL ${e}.`);const o=s[0],l=gl(t).scheme,a=gl(t).path,u=l===gl(t).scheme,c=await i.load();n&&u&&await fl.getManager(l).removeModel(a);const h=await o.save(c);return n&&!u&&await fl.getManager(l).removeModel(a),h.modelArtifactsInfo}async function bl(){const t=fl.getSchemes(),e={};for(const n of t){const t=await fl.getManager(n).listModels();for(const r in t)e[n+pl+r]=t[r]}return e}async function yl(t){const e=gl(t);return fl.getManager(e.scheme).removeModel(e.path)}async function vl(t,e){return ml(t,e,!1)}async function _l(t,e){return ml(t,e,!0)}const wl="tensorflowjs",xl=1,Cl="models_store",Sl="model_info_store";function Ol(){if(!Z().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"==typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function kl(t){const e=t.result;e.createObjectStore(Cl,{keyPath:"modelPath"}),e.createObjectStore(Sl,{keyPath:"modelPath"})}class El{constructor(t){if(this.indexedDB=Ol(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise((t,n)=>{const r=this.indexedDB.open(wl,xl);r.onupgradeneeded=()=>kl(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction(Cl,"readonly"),r=e.objectStore(Cl).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' `+"in IndexedDB."));t(r.result.modelArtifacts)},r.onerror=t=>(i.close(),n(r.error)),e.oncomplete=()=>i.close()}else{const r=ol(e),s=i.transaction(Sl,"readwrite");let o=s.objectStore(Sl);const l=o.put({modelPath:this.modelPath,modelArtifactsInfo:r});let a;l.onsuccess=()=>{const l=(a=i.transaction(Cl,"readwrite")).objectStore(Cl).put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});l.onsuccess=()=>t({modelArtifactsInfo:r}),l.onerror=t=>{const e=(o=s.objectStore(Sl)).delete(this.modelPath);e.onsuccess=()=>(i.close(),n(l.error)),e.onerror=t=>(i.close(),n(l.error))}},l.onerror=t=>(i.close(),n(l.error)),s.oncomplete=()=>{null==a?i.close():a.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)})}}El.URL_SCHEME="indexeddb://";const Tl=t=>Z().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(El.URL_SCHEME)?function(t){return new El(t)}(t.slice(El.URL_SCHEME.length)):null;al.registerSaveRouter(Tl),al.registerLoadRouter(Tl);class zl{constructor(){this.indexedDB=Ol()}async listModels(){return new Promise((t,e)=>{const n=this.indexedDB.open(wl,xl);n.onupgradeneeded=()=>kl(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(Sl,"readonly"),s=i.objectStore(Sl).getAll();s.onsuccess=()=>{const e={};for(const t of s.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},s.onerror=t=>(r.close(),e(s.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)})}async removeModel(t){var e;return t=(e=t).startsWith(El.URL_SCHEME)?e.slice(El.URL_SCHEME.length):e,new Promise((e,n)=>{const r=this.indexedDB.open(wl,xl);r.onupgradeneeded=()=>kl(r),r.onsuccess=()=>{const i=r.result,s=i.transaction(Sl,"readwrite"),o=s.objectStore(Sl),l=o.get(t);let a;l.onsuccess=()=>{if(null==l.result)return i.close(),n(new Error(`Cannot find model with path '${t}' `+"in IndexedDB."));{const r=o.delete(t),s=()=>{const r=(a=i.transaction(Cl,"readwrite")).objectStore(Cl).delete(t);r.onsuccess=()=>e(l.result.modelArtifactsInfo),r.onerror=t=>n(l.error)};r.onsuccess=s,r.onerror=t=>(s(),i.close(),n(l.error))}},l.onerror=t=>(i.close(),n(l.error)),s.oncomplete=()=>{null==a?i.close():a.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)})}}if(Z().getBool("IS_BROWSER"))try{fl.registerManager(El.URL_SCHEME,new zl)}catch(Dk){}const Pl="/",Il="tensorflowjs_models",Ml="info",Dl="model_topology",Al="weight_specs",Nl="weight_data",Rl="model_metadata";function Fl(t){return{info:[Il,t,Ml].join(Pl),topology:[Il,t,Dl].join(Pl),weightSpecs:[Il,t,Al].join(Pl),weightData:[Il,t,Nl].join(Pl),modelMetadata:[Il,t,Rl].join(Pl)}}function $l(t){const e=t.split(Pl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Pl)}class Ll{constructor(t){if(!Z().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Fl(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=ol(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){if(nl)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);return btoa(n)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),{modelArtifactsInfo:r}}catch(Dk){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: `+"size quota being exceeded is a possible cause of this failure: "+`modelTopologyBytes=${r.modelTopologyBytes}, `+`weightSpecsBytes=${r.weightSpecsBytes}, `+`weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' `+"is missing.");e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' `+"are missing.");e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,e.userDefinedMetadata=t.userDefinedMetadata}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error("In local storage, the binary weight values of model "+`'${this.modelPath}' are missing.`);return e.weightData=function(t){if(nl){const e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}(s),e}}Ll.URL_SCHEME="localstorage://";const jl=t=>Z().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ll.URL_SCHEME)?function(t){return new Ll(t)}(t.slice(Ll.URL_SCHEME.length)):null;al.registerSaveRouter(jl),al.registerLoadRouter(jl);class Bl{constructor(){yt(Z().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),yt("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},e=Il+Pl,n=Pl+Ml;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);i.startsWith(e)&&i.endsWith(n)&&(t[$l(i)]=JSON.parse(this.LS.getItem(i)))}return t}async removeModel(t){var e;const n=Fl(t=(e=t).startsWith(Ll.URL_SCHEME)?e.slice(Ll.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}if(Z().getBool("IS_BROWSER"))try{fl.registerManager(Ll.URL_SCHEME,new Bl)}catch(Dk){}const Vl="model",Wl=".json",Ul=".weights.bin";function Hl(t){return new Promise(t=>setTimeout(t)).then(t)}class Gl{constructor(t){if(!Z().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Gl.URL_SCHEME)&&(t=t.slice(Gl.URL_SCHEME.length)),null!=t&&0!==t.length||(t=Vl),this.modelTopologyFileName=t+Wl,this.weightDataFileName=t+Ul}async save(t){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=window.URL.createObjectURL(new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}]})],{type:"application/json"})),r=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(r.download=this.modelTopologyFileName,r.href=n,await Hl(()=>r.dispatchEvent(new MouseEvent("click"))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await Hl(()=>t.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ol(t)}}}}Gl.URL_SCHEME="downloads://";class ql{constructor(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, "+`but received ${t}`);this.files=t}async load(){const t=this.files[0],e=this.files.slice(1);return new Promise((n,r)=>{const i=new FileReader;i.onload=i=>{const s=JSON.parse(i.target.result),o=s.modelTopology;if(null==o)return void r(new Error(`modelTopology field is missing from file ${t.name}`));0===e.length&&n({modelTopology:o});const l=s.weightsManifest;if(null==l)return void r(new Error(`weightManifest field is missing from file ${t.name}`));let a;try{a=this.checkManifestAndWeightFiles(l,e)}catch(Dk){return void r(Dk)}const u=[],c=[],h=[];l.forEach(t=>{t.paths.forEach(t=>{c.push(t),h.push(null)}),u.push(...t.weights)}),l.forEach(t=>{t.paths.forEach(t=>{const e=new FileReader;e.onload=e=>{const r=e.target.result,i=c.indexOf(t);h[i]=r,-1===h.indexOf(null)&&n({modelTopology:o,weightSpecs:u,weightData:il(h),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy,userDefinedMetadata:s.userDefinedMetadata})},e.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),e.readAsArrayBuffer(a[t])})})},i.onerror=e=>r("Failed to read model topology and weights manifest JSON "+`from file '${t.name}'. BrowserFiles supports loading `+"Keras-style tf.Model artifacts only."),i.readAsText(t)})}checkManifestAndWeightFiles(t,e){const n=[],r=e.map(t=>sl(t.name)),i={};for(const s of t)s.paths.forEach(t=>{const s=sl(t);if(-1!==n.indexOf(s))throw new Error("Duplicate file basename found in weights manifest: "+`'${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);i[t]=e[r.indexOf(s)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest "+`(${n.length}) and the number of weight files provided `+`(${e.length}).`);return i}}function Kl(t){return new ql(t)}function Yl(t,e,n,r){!function(t){yt(null!=t&&Array.isArray(t)&&t.length>0,()=>"promises must be a none empty array")}(t),function(t,e){yt(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but "+`got startFraction ${t}`),yt(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but "+`got endFraction ${e}`),yt(e>=t,()=>"startFraction must be no more than endFraction, but "+`got startFraction ${t} and endFraction `+`${e}`)}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(t.map(s=>(s.then(s=>{const o=n+ ++i/t.length*(r-n);return e(o),s}),s)))}async function Xl(t,e){null==e&&(e={});const n=null==e.fetchFunc?Z().platform.fetch:e.fetchFunc,r=t.map(t=>n(t,e.requestInit,{isBinary:!0})),i=(null==e.onProgress?await Promise.all(r):await Yl(r,e.onProgress,0,.5)).map(t=>t.arrayBuffer());return null==e.onProgress?await Promise.all(i):await Yl(i,e.onProgress,.5,1)}async function Zl(t,e="",n,r){return Ql(t=>Xl(t,{requestInit:r}))(t,e,n)}function Ql(t){return async(e,n="",r)=>{const i=e.map(()=>!1),s={},o=null!=r?r.map(()=>!1):[],l=[];if(e.forEach((t,e)=>{let n=0;t.weights.forEach(t=>{const a=Zo["quantization"in t?t.quantization.dtype:t.dtype]*xt(t.shape),u=()=>{i[e]=!0,null==s[e]&&(s[e]=[]),s[e].push({manifestEntry:t,groupOffset:n,sizeBytes:a})};null!=r?r.forEach((e,n)=>{e===t.name&&(u(),o[n]=!0)}):u(),l.push(t.name),n+=a})}),!o.every(t=>t)){const t=r.filter((t,e)=>!o[e]);throw new Error("Could not find weights in manifest with names: "+`${t.join(", ")}. \n`+"Manifest JSON has weights with names: "+`${l.join(", ")}.`)}const a=i.reduce((t,e,n)=>(e&&t.push(n),t),[]),u=[];a.forEach(t=>{e[t].paths.forEach(t=>{const e=n+(n.endsWith("/")?"":"/")+t;u.push(e)})});const c=await t(u),h={};let d=0;return a.forEach(t=>{const n=e[t].paths.length;let r=0;for(let e=0;e<n;e++)r+=c[d+e].byteLength;const i=new ArrayBuffer(r),o=new Uint8Array(i);let l=0;for(let e=0;e<n;e++){const t=new Uint8Array(c[d+e]);o.set(t,l),l+=t.byteLength}s[t].forEach(t=>{const e=tl(i.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(const n in e)h[n]=e[n]}),d+=n}),h}}al.registerSaveRouter(t=>Z().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Gl.URL_SCHEME)?function(t="model"){return new Gl(t)}(t.slice(Gl.URL_SCHEME.length)):null);const Jl="application/octet-stream",ta="application/json";class ea{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,null!=e.fetchFunc?(yt("function"==typeof e.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=e.fetchFunc):this.fetch=Z().platform.fetch,yt(null!=t&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&yt(2===t.length,()=>"URL paths for http must have a length of 2, "+`(actual length is ${t.length}).`),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData,e.body.append("model.json",new Blob([JSON.stringify({modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:[{paths:["./model.weights.bin"],weights:t.weightSpecs}]})],{type:ta}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:Jl}),"model.weights.bin");const n=await this.fetch(this.path,e);if(n.ok)return{modelArtifactsInfo:ol(t),responses:[n]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+`${n.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code `+`${t.status}. Please verify this URL points to `+"the model JSON of the model to load.");let e;try{e=await t.json()}catch(c){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=e.modelTopology,r=e.weightsManifest,i=e.generatedBy,s=e.convertedBy,o=e.format,l=e.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model `+"topology or manifest for weights.");let a,u;if(null!=r){const t=await this.loadWeights(r);[a,u]=t}return{modelTopology:n,weightSpecs:a,weightData:u,userDefinedMetadata:l,generatedBy:i,convertedBy:s,format:o}}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),i=this.weightPathPrefix||n,s=[];for(const l of t)s.push(...l.weights);const o=[];return t.forEach(t=>{t.paths.forEach(t=>{o.push(i+t+r)})}),[s,il(await Xl(o,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function na(t){return null!=t.match(ea.URL_SCHEME_REGEX)}ea.URL_SCHEME_REGEX=/^https?:\/\//;const ra=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every(t=>na(t)):na(t))return ia(t,e)}return null};function ia(t,e){return new ea(t,e)}function sa(t,e){return ia(t,e)}al.registerSaveRouter(ra),al.registerLoadRouter(ra);class oa{constructor(t){this.modelArtifacts=t}async load(){return this.modelArtifacts}}class la{constructor(t){this.saveHandler=t}async save(t){return this.saveHandler(t)}}function aa(t,e,n,r){return 1===arguments.length?null!=t.modelTopology||null!=t.weightSpecs?new oa(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new oa({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new oa({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function ua(t){return new la(t)}const ca=hr({oneHot_:function(t,e,n=1,r=0){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);let i=ur(t,"indices","oneHot","int32");const s=[...i.shape,e];return i=i.flatten(),Ae.runKernelFunc((t,o)=>(o([i]),Lr(t.oneHot(i,e,n,r),s)),{indices:i},null,$n,{depth:e,onValue:n,offValue:r})}}),ha=hr({confusionMatrix_:function(t,e,n){const r=ur(t,"labels","confusionMatrix"),i=ur(e,"predictions","confusionMatrix");yt(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, "+`but got ${n}`),yt(1===r.rank,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),yt(1===i.rank,()=>"Expected the rank of predictions to be 1, "+`but got ${i.rank}`),yt(r.shape[0]===i.shape[0],()=>"Mismatch in the number of examples: "+`${r.shape[0]} vs. ${i.shape[0]}. `+"Labels and predictions should have the same number of elements."),yt(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+`${n}`);const s=ca(r.asType("int32"),n),o=ca(i.asType("int32"),n);return s.transpose().matMul(o).asType("int32")}});let da;async function pa(t,e){let n=ur(t,"img","toPixels");if(!(t instanceof ye)){const t=n;n=t.toInt(),t.dispose()}if(2!==n.rank&&3!==n.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${n.rank}.`);const[r,i]=n.shape.slice(0,2),s=2===n.rank?1:n.shape[2];if(s>4||2===s)throw new Error("toPixels only supports depth of size "+`1, 3 or 4 but got ${s}`);const o=await n.data(),l=n.min(),a=n.max(),u=await Promise.all([l.data(),a.data()]),c=u[0][0],h=u[1][0];if(l.dispose(),a.dispose(),"float32"===n.dtype){if(c<0||h>1)throw new Error("Tensor values for a float32 Tensor must be in the "+`range [0 - 1] but got range [${c} - ${h}].`)}else{if("int32"!==n.dtype)throw new Error(`Unsupported type for toPixels: ${n.dtype}.`+" Please use float32 or int32 tensors.");if(c<0||h>255)throw new Error("Tensor values for a int32 Tensor must be in the "+`range [0 - 255] but got range [${c} - ${h}].`)}const d="float32"===n.dtype?255:1,p=new Uint8ClampedArray(i*r*4);for(let f=0;f<r*i;++f){let t,e,n,r;1===s?(t=o[f]*d,e=o[f]*d,n=o[f]*d,r=255):3===s?(t=o[3*f]*d,e=o[3*f+1]*d,n=o[3*f+2]*d,r=255):4===s&&(t=o[4*f]*d,e=o[4*f+1]*d,n=o[4*f+2]*d,r=o[4*f+3]*d);const i=4*f;p[i+0]=Math.round(t),p[i+1]=Math.round(e),p[i+2]=Math.round(n),p[i+3]=Math.round(r)}if(null!=e){e.width=i,e.height=r;const t=e.getContext("2d"),n=new ImageData(p,i,r);t.putImageData(n,0,0)}return n!==t&&n.dispose(),p}const fa=hr({fromPixels_:function(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,s=!1,o=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)s=!0;else{if(null==t.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+`but was ${t.constructor.name}`);o=!0}if(i){const e=2;if(i&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=it(er,Ae.backendName))return Ae.runKernel(er,{pixels:t},{numChannels:e});const[l,a]=i?[t.videoWidth,t.videoHeight]:[t.width,t.height];let u,c;if(o?u=t.getContext("2d").getImageData(0,0,l,a).data:r||n?u=t.data:(s||i)&&(null==da&&(da=document.createElement("canvas").getContext("2d")),da.canvas.width=l,da.canvas.height=a,da.drawImage(t,0,0,l,a),u=da.getImageData(0,0,l,a).data),4===e)c=new Int32Array(u);else{const t=l*a;c=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)c[n*e+t]=u[4*n+t]}return Cr(c,[a,l,e],"int32")}});function ga(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+` but the rank was ${t.rank}.`);if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if("int32"!==e.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+` but the dtype was ${e.dtype}.`);if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+`${e.shape[e.rank-1]} vs. ${t.rank}`);if(0===t.size)throw new Error("Requested more than 0 entries, but input is empty."+` Input shape: ${t.shape}.`);const n=e.shape,r=n[n.length-1];let i=1;for(let u=0;u<n.length-1;++u)i*=n[u];const s=t.shape,o=n.slice();o.pop();let l=1;for(let u=r;u<t.rank;++u)l*=s[u],o.push(s[u]);const a=[...Kt(t.shape).map(t=>t/l),1].slice(0,r);return[o,i,l,a]}function ma(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,i=e.rank>1?e.rank-1:1,s="Must have updates.shape = indices.shape[:batchDim] + "+`shape[sliceDim:], got updates.shape: ${n.shape}`+`, indices.shape: ${e.shape}, shape: ${t}`+`, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(s+` update.rank < ${i}. `);if(t.length<r+(n.rank-i))throw new Error(s+` Output shape length < ${r+(n.rank-i)}`);if(n.rank!==i+t.length-r)throw new Error(s+` update.rank != ${i+t.length-r}`);for(let o=0;o<i;++o)if(n.shape[o]!==e.shape[o])throw new Error(s+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-i;++o)if(n.shape[o+i]!==t[o+r])throw new Error(s+` updates.shape[${o+i}] (${n.shape[o+i]}) != shape[${o+i}] (${t[o+i]})`)}function ba(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+` but the rank was ${e.rank}.`);if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+` but the rank was ${t.rank}.`);if("int32"!==e.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===e.size)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(0===t.size)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}ma(n,e,t)}function ya(t,e,n){const r=e.shape.length,i=r>1?e.shape[r-1]:1,s=n.length;let o=1;for(let a=i;a<s;++a)o*=n[a];const l=i<1?1:i;return{sliceRank:i,numUpdates:xt(e.shape)/l,sliceSize:o,strides:[...Kt(n.slice(0,i)),1],outputSize:xt(n)}}class va{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}}class _a{constructor(){this.classNameMap={}}static getMap(){return null==_a.instance&&(_a.instance=new _a),_a.instance}static register(t){_a.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function wa(t){yt(null!=t.className,()=>"Class being registered does not have the static className property defined."),yt("string"==typeof t.className,()=>"className is required to be a string, but got type "+typeof t.className),yt(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),_a.register(t)}const xa=.001,Ca=.1;function Sa(t,e,n){return null==n&&(n=Oa()),ka(t,e,(t,e)=>Pa(t,e,n))}function Oa(){return 32===Ae.backend.floatPrecision()?xa:Ca}function ka(t,e,n){let r=!0;if((Lt(t)||Lt(e))&&(r=!1),Lt(t)&&Lt(e)&&(r=!0),r){const n=t.constructor.name,r=e.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. `+`Expected: ${r}`)}if(Array.isArray(t)&&Array.isArray(e)){const n=lr(t),r=lr(e);if(!St(n,r))throw new Error("Arrays have different shapes. "+`Actual: [${n}]. Expected: [${r}]`)}const i=Lt(t)?t:wt(t),s=Lt(e)?e:wt(e);if(i.length!==s.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs `+`expected: ${s.length}.\n`+`Actual:   ${i}.\n`+`Expected: ${s}.`);for(let o=0;o<s.length;++o){const t=i[o],e=s[o];if(!n(t,e))throw new Error(`Arrays differ: actual[${o}] = ${t}, expected[${o}] = ${e}.\n`+`Actual:   ${i}.\n`+`Expected: ${s}.`)}}function Ea(t,e){t().then(()=>e.fail(),()=>e())}function Ta(t,e){const n="string"==typeof e||"number"==typeof e||"boolean"==typeof e?[e]:e;return Vt(t)||Vt(t[0])||Vt(e)||Vt(e[0])?ka(t,n,(t,e)=>t==e):ka(t,e,(t,e)=>Pa(t,e,0))}function za(t,e,n){if(null==n&&(n=Oa()),!Pa(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`)}function Pa(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function Ia(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function Ma(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}const Da="2.0.1";function Aa(){Z().set("PROD",!0)}function Na(){Z().set("DEBUG",!0)}function Ra(){Z().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Fa(t){Z().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function $a(){Ae.disposeVariables()}function La(){return Ae}function ja(){return Ae.memory()}function Ba(t){return Ae.profile(t)}function Va(t,e){return Ae.tidy(t,e)}function Wa(t){Ie(t).forEach(t=>t.dispose())}function Ua(t){return Ae.keep(t)}function Ha(t){return Ae.time(t)}function Ga(t){return Ae.setBackend(t)}function qa(){return Ae.ready()}function Ka(){return Ae.backendName}function Ya(t){Ae.removeBackend(t)}function Xa(t){return Ae.findBackend(t)}function Za(t){return Ae.findBackendFactory(t)}function Qa(t,e,n=1){return Ae.registerBackend(t,e,n)}function Ja(){return Ae.backend}function tu(t,e){Z().setPlatform(t,e)}be=Fa;const eu=hr({addN_:function(t){yt(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),yt(t.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+`${t.length}`);const e=t.map((t,e)=>ur(t,`tensors${e}`,"addN")),n=e[0];return e.forEach(t=>{if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(t=>{if(!St(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}),Ae.runKernelFunc((t,n)=>{const r=t.addN(e);return n(e),r},e,null,Le)}}),nu=hr({atan2_:function(t,e){let n=ur(t,"a","atan2"),r=ur(e,"b","atan2");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.atan2(n,r);return e([n,r]),i},{a:n,b:r},null,je)}}),ru=hr({avgPool_:function(t,e,n,r,i){const s=ur(t,"x","avgPool","float32");yt(hs(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '1'`);let o=s,l=!1;3===s.rank&&(l=!0,o=Lr(s,[1,s.shape[0],s.shape[1],s.shape[2]])),yt(4===o.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${o.rank}.`),null!=i&&yt(Ot(r),()=>"Error in avgPool: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);let a=Ae.runKernelFunc((t,s)=>{const l=es(o.shape,e,n,1,r,i);return s([o]),1===l.filterWidth&&1===l.filterHeight&&St(l.inShape,l.outShape)?o.clone():t.avgPool(o,l)},{x:o},null,Be,{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return a=Fr(a,s.dtype),l?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),iu=hr({avgPool3d_:function(t,e,n,r,i,s="NDHWC",o){null==o?o=[1,1,1]:Fa("dilations is deprecated, this field will be gone in v3.0.0.");const l=ur(t,"x","avgPool3d","float32");let a=l,u=!1;4===l.rank&&(u=!0,a=Lr(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),yt(5===a.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),yt("NDHWC"===s,()=>"Error in avgPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${s}`),yt(hs(n,o),()=>"Error in avgPool3d: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${o}'`),null!=i&&yt(Ot(r),()=>"Error in avgPool3d: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);let c=Ae.runKernelFunc((t,l)=>{null==o&&(o=[1,1,1]);const u=ns(a.shape,e,n,o,r,i,s);return l([a]),t.avgPool3d(a,u)},{x:a},null,We,{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s,dilations:o});return c=Fr(c,a.dtype),u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}});function su(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}const ou=hr({batchNorm_:function(t,e,n,r,i,s){null==s&&(s=.001);const o=ur(t,"x","batchNorm"),l=ur(e,"mean","batchNorm"),a=ur(n,"variance","batchNorm");let u,c;null!=i&&(u=ur(i,"scale","batchNorm")),null!=r&&(c=ur(r,"offset","batchNorm")),yt(l.rank===a.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),yt(null==c||l.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),yt(null==u||l.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h=function(t){return 0===t.rank||1===t.rank?t.as4D(1,1,1,t.size):2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}(o),d=Ae.runKernelFunc((t,e)=>(e([h,l,a,u]),t.batchNorm(h,su(l),su(a),su(c),su(u),s)),{x:h,scale:u,offset:c,mean:l,variance:a},null,gn,{varianceEpsilon:s});return Lr(d,o.shape)}}),lu=hr({batchNorm2d_:function(t,e,n,r,i,s){const o=ur(t,"x","batchNorm"),l=ur(e,"mean","batchNorm"),a=ur(n,"variance","batchNorm");let u,c;return null!=i&&(u=ur(i,"scale","batchNorm")),null!=r&&(c=ur(r,"offset","batchNorm")),yt(2===o.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${o.rank}.`),yt(2===l.rank||1===l.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+`got rank ${l.rank}.`),yt(2===a.rank||1===a.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 "+`but got rank ${a.rank}.`),null!=u&&yt(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 "+`but got rank ${u.rank}.`),null!=c&&yt(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 "+`but got rank ${c.rank}.`),ou(o,l,a,c,u,s)}}),au=hr({batchNorm3d_:function(t,e,n,r,i,s){const o=ur(t,"x","batchNorm"),l=ur(e,"mean","batchNorm"),a=ur(n,"variance","batchNorm");let u,c;return null!=i&&(u=ur(i,"scale","batchNorm")),null!=r&&(c=ur(r,"offset","batchNorm")),yt(3===o.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank "+`${o.rank}.`),yt(3===l.rank||1===l.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+`got rank ${l.rank}.`),yt(3===a.rank||1===a.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 "+`but got rank ${a.rank}.`),null!=u&&yt(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 "+`but got rank ${u.rank}.`),null!=c&&yt(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 "+`but got rank ${c.rank}.`),ou(o,l,a,c,u,s)}}),uu=hr({batchNorm4d_:function(t,e,n,r,i,s){const o=ur(t,"x","batchNorm"),l=ur(e,"mean","batchNorm"),a=ur(n,"variance","batchNorm");let u,c;return null!=i&&(u=ur(i,"scale","batchNorm")),null!=r&&(c=ur(r,"offset","batchNorm")),yt(4===o.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank "+`${o.rank}.`),yt(4===l.rank||1===l.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+`got rank ${l.rank}.`),yt(4===a.rank||1===a.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 "+`but got rank ${a.rank}.`),null!=u&&yt(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 "+`but got rank ${u.rank}.`),null!=c&&yt(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 "+`but got rank ${c.rank}.`),ou(o,l,a,c,u,s)}}),cu=hr({clone_:function(t){const e=ur(t,"x","clone",null);return Ae.runKernelFunc(()=>Ae.makeTensorFromDataId(e.dataId,e.shape,e.dtype),{x:e},null,vn)}}),hu=hr({broadcastTo_:function(t,e){let n=ur(t,"broadcastTo","x");const r=n.shape;if(e.some(t=>!(t>0)||t%1!=0))throw new Error(`broadcastTo(): Invalid broadcast shape [${e}].`);if(e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const t=n.shape.slice();for(;t.length<e.length;)t.unshift(1);n=Lr(n,t)}const i=n.shape,s=Array.from(e);for(let o=e.length-1;o>=0;o--)if(i[o]===e[o])s[o]=1;else if(1!==n.shape[o])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);return 0===s.map((t,e)=>t>1?e:-1).filter(t=>t>=0).length?cu(n):Ae.runKernelFunc(t=>t.tile(n,s),{x:n},null,qe,{shape:e,inputShape:i})}}),du=hr({concat1d_:function(t){return Ar(t,0)}}),pu=hr({concat2d_:function(t,e){return Ar(t,e)}}),fu=hr({concat3d_:function(t,e){return Ar(t,e)}}),gu=hr({concat4d_:function(t,e){return Ar(t,e)}}),mu=hr({conv1d_:function(t,e,n,r,i="NWC",s=1,o){const l=ur(t,"x","conv1d"),a=ur(e,"filter","conv1d");let u=l,c=!1;2===l.rank&&(c=!0,u=Lr(l,[1,l.shape[0],l.shape[1]])),yt(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),yt(3===a.rank,()=>"Error in conv1d: filter must be rank 3, but got rank "+`${a.rank}.`),null!=o&&yt(Ot(r),()=>"Error in conv1d: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${r}.`),yt(u.shape[2]===a.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match `+`input depth for filter ${a.shape[1]}.`),yt(hs(n,s),()=>"Error in conv1D: Either stride or dilation must be 1. "+`Got stride ${n} and dilation '${s}'`),yt("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);const h=Lr(a,[1,a.shape[0],a.shape[1],a.shape[2]]),d=Lr(u,[u.shape[0],1,u.shape[1],u.shape[2]]),p=Es(d,h,[1,n],r,"NHWC",[1,s],o);return Lr(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}}),bu=hr({conv2dTranspose_:function(t,e,n,r,i,s){const o=ur(t,"x","conv2dTranspose"),l=ur(e,"filter","conv2dTranspose");return Os(n,o,l,r,i,"NHWC",s)}}),yu=hr({conv3d_:function(t,e,n,r,i="NDHWC",s=[1,1,1]){const o=ur(t,"x","conv3d"),l=ur(e,"filter","conv3d");let a=o,u=!1;4===o.rank&&(u=!0,a=Lr(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),yt(5===a.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${a.rank}.`),yt(5===l.rank,()=>"Error in conv3d: filter must be rank 5, but got rank "+`${l.rank}.`),yt(a.shape[4]===l.shape[3],()=>`Error in conv3d: depth of input (${a.shape[4]}) must match `+`input depth for filter ${l.shape[3]}.`),yt(hs(n,s),()=>"Error in conv3D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`),yt("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`);const c=Ae.runKernelFunc((t,e)=>{const i=is(a.shape,l.shape,n,s,r),o=t.conv3d(a,l,i);return e([a,l]),o},{x:a,filter:l},null,Je,{strides:n,pad:r,dataFormat:i,dilations:s});return u?c.as4D(c.shape[1],c.shape[2],c.shape[3],c.shape[4]):c}}),vu=hr({conv3dTranspose_:function(t,e,n,r,i){const s=ur(t,"x","conv3dTranspose"),o=ur(e,"filter","conv3dTranspose");return Ps(n,s,o,r,i)}}),_u=hr({depthToSpace_:function(t,e,n="NHWC"){const r=ur(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],s="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return yt(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${e}  for depthToSpace with input shape\n    ${r.shape}`),yt(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${s} and ${e} for depthToSpace with input shape\n        ${r.shape}`),yt(o%(e*e)==0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`),Ae.runKernelFunc(t=>t.depthToSpace(r,e,n),{x:r},null,rn,{blockSize:e,dataFormat:n})}}),wu=hr({depthwiseConv2d_:function(t,e,n,r,i="NHWC",s=[1,1],o){const l=ur(t,"x","depthwiseConv2d"),a=ur(e,"filter","depthwiseConv2d");let u=l,c=!1;3===l.rank&&(c=!0,u=Lr(l,[1,l.shape[0],l.shape[1],l.shape[2]])),yt(4===u.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got "+`rank ${u.rank}.`),yt(4===a.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank "+`${a.rank}.`),yt(u.shape[3]===a.shape[2],()=>"Error in depthwiseConv2d: number of input channels "+`(${u.shape[3]}) must match the inChannels dimension in `+`filter ${a.shape[2]}.`),null!=o&&yt(Ot(r),()=>"Error in depthwiseConv2d: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${r}.`);const h=Ae.runKernelFunc((t,e)=>{null==s&&(s=[1,1]),yt(hs(n,s),()=>"Error in depthwiseConv2d: Either strides or dilations must be "+`1. Got strides ${n} and dilations '${s}'`);const i=rs(u.shape,a.shape,n,s,r,o,!0),l=t.depthwiseConv2D(u,a,i);return e([u,a]),l},{x:u,filter:a},null,sn,{strides:n,pad:r,dataFormat:i,dilations:s,dimRoundingMode:o});return c?Lr(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),xu=hr({diag_:function(t){const e=ur(t,"x","diag").flatten();return Ae.runKernelFunc(n=>{const r=n.diag(e),i=[...t.shape,...t.shape];return Lr(r,i)},{x:e},null,an)}}),Cu=hr({divNoNan_:function(t,e){let n=ur(t,"a","div"),r=ur(e,"b","div");[n,r]=Te(n,r);const i=Hr(n,r),s=Dr(i),o=r.equal(s);return go(o,s,i)}}),Su=hr({dot_:function(t,e){const n=ur(t,"t1","dot"),r=ur(e,"t2","dot");yt(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks "+`${n.rank} and ${r.rank}.`);const i=1===n.rank?n.size:n.shape[1],s=1===r.rank?r.size:r.shape[0];if(yt(i===s,()=>"Error in dot: inner dimensions of inputs must match, but got "+`${i} and ${s}.`),1===n.rank&&1===r.rank){const t=Lr(n,[1,-1]),e=Lr(r,[-1,1]),i=bs(t,e);return Lr(i,[])}if(1===n.rank&&2===r.rank){const t=Lr(n,[1,-1]),e=Lr(r,[r.shape[0],r.shape[1]]),i=bs(t,e);return Lr(i,[i.size])}if(2===n.rank&&1===r.rank){const t=Lr(r,[-1,1]),e=bs(n,t);return Lr(e,[e.size])}{const t=Lr(r,[r.shape[0],r.shape[1]]);return bs(n,t)}}}),Ou=hr({elu_:function(t){const e=ur(t,"x","elu");return Ae.runKernelFunc((t,n)=>{const r=t.elu(e);return n([r]),r},{x:e},null,cn)}}),ku=hr({equal_:function(t,e){let n=ur(t,"a","equal"),r=ur(e,"b","equal");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc(t=>t.equal(n,r),{a:n,b:r},null,dn)}}),Eu=hr({eye_:function(t,e,n,r="float32"){null==e&&(e=t);const i=Nr([t,e],r),s=t<=e?t:e;for(let l=0;l<s;++l)i.set(1,l,l);const o=i.toTensor().as2D(t,e);if(null==n)return o;if(1===n.length)return Vs($r(o,0),[n[0],1,1]);if(2===n.length)return Vs($r($r(o,0),0),[n[0],n[1],1,1]);if(3===n.length)return Vs($r($r($r(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+`batchShapes, but received ${n.length}D.`)}});function Tu(t,e,n){return Ae.runKernelFunc(r=>r.fill(t,e,n),{},null,fn,{shape:t,value:e,dtype:n})}const zu=hr({maximum_:function(t,e){let n=ur(t,"a","maximum"),r=ur(e,"b","maximum");return[n,r]=Te(n,r),"bool"===n.dtype&&(n=Fr(n,"int32"),r=Fr(r,"int32")),ir(n.shape,r.shape),Ae.runKernelFunc((t,e)=>{const i=t.maximum(n,r);return e([n,r]),i},{a:n,b:r},null,kn)}}),Pu=hr({leakyRelu_:function(t,e=.2){const n=ur(t,"x","leakyRelu");return zu(Gr(_r(e),n),n)}}),Iu=hr({localResponseNormalization_:function(t,e=5,n=1,r=1,i=.5){const s=ur(t,"x","localResponseNormalization");yt(4===s.rank||3===s.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${s.rank}.`),yt(Ot(e),()=>"Error in localResponseNormalization: depthRadius must be an "+`integer but got depthRadius ${e}.`);let o=s,l=!1;3===s.rank&&(l=!0,o=Lr(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a=Ae.runKernelFunc((t,s)=>{const l=t.localResponseNormalization4D(o,e,n,r,i);return s([o,l]),l},{x:o},null,Cn,{depthRadius:e,bias:n,alpha:r,beta:i});return l?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),Mu=hr({max_:function(t,e=null,n=!1){const r=ur(t,"x","max"),i=Ae.runKernelFunc((t,n)=>{let i=Mt(e,r.shape);const s=si(i,r.rank);let o=r;null!=s&&(o=Ms(r,s),i=li(i.length,o.rank));const l=t.max(o,i);return n([r,l]),null!=s&&t.disposeData(o.dataId),l},{x:r},null,On,{reductionIndices:e,keepDims:n});return n?Lr(i,ri(i.shape,Mt(e,r.shape))):i}}),Du=hr({maxPool_:function(t,e,n,r,i){const s=ur(t,"x","maxPool");let o=s,l=!1;3===s.rank&&(l=!0,o=Lr(s,[1,s.shape[0],s.shape[1],s.shape[2]])),yt(4===o.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${o.rank}.`),yt(hs(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '1'`),null!=i&&yt(Ot(r),()=>"Error in maxPool: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);const a=Ae.runKernelFunc((t,s)=>{const l=es(o.shape,e,n,1,r,i);let a;return a=1===l.filterWidth&&1===l.filterHeight&&St(l.inShape,l.outShape)?o.clone():t.maxPool(o,l),s([o,a]),a},{x:o},null,En,{filterSize:e,strides:n,pad:r,dimRoundingMode:i});return l?Lr(a,[a.shape[1],a.shape[2],a.shape[3]]):a}}),Au=hr({maxPool3d_:function(t,e=[1,1,1],n,r,i,s="NDHWC",o){null==o?o=[1,1,1]:Fa("dilations is deprecated, this field will be gone in v3.0.0.");const l=ur(t,"x","maxPool3d");let a=l,u=!1;4===l.rank&&(u=!0,a=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),yt(5===a.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),yt("NDHWC"===s,()=>"Error in maxPool3d: Only NDHWC is currently supported, "+`but got dataFormat of ${s}`),yt(hs(n,o),()=>"Error in maxPool3d: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${o}'`),null!=i&&yt(Ot(r),()=>"Error in maxPool3d: pad must be an integer when using, "+`dimRoundingMode ${i} but got pad ${r}.`);const c=Ae.runKernelFunc((t,l)=>{null==o&&(o=[1,1,1]);const u=ns(a.shape,e,n,o,r,i,s),c=t.maxPool3d(a,u);return l([a,c]),c},{x:a},null,zn,{filterSize:e,strides:n,pad:r,dimRoundingMode:i,dataFormat:s,dilations:o});return u?Lr(c,[c.shape[1],c.shape[2],c.shape[3],c.shape[4]]):c}}),Nu=hr({maxPoolWithArgmax_:function(t,e,n,r,i=!1){const s=ur(t,"x","maxPoolWithArgmax"),o=Ae.runKernel(In,{x:s},{filterSize:e,strides:n,pad:r,includeBatchInIndex:i});return{result:o[0],indexes:o[1]}}}),Ru=hr({minimum_:function(t,e){let n=ur(t,"a","minimum"),r=ur(e,"b","minimum");return[n,r]=Te(n,r),"bool"===n.dtype&&(n=Fr(n,"int32"),r=Fr(r,"int32")),ir(n.shape,r.shape),Ae.runKernelFunc((t,e)=>{const i=t.minimum(n,r);return e([n,r]),i},{a:n,b:r},null,Mn)}}),Fu=hr({mod_:function(t,e){let n=ur(t,"a","mod"),r=ur(e,"b","mod");return[n,r]=Te(n,r),Ae.runKernelFunc((t,e)=>{const i=t.mod(n,r);return e([n,r]),i},{a:n,b:r},null,Dn)}}),$u=hr({multinomial_:function(t,e,n,r=!1){const i=ur(t,"logits","multinomial"),s=i.size,o=i.rank;if(s<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+`${s}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l=1===o?i.as2D(1,-1):i,a=Ae.runKernelFunc(t=>t.multinomial(l,r,e,n),{logits2D:l});return 1===o?a.as1D():a}}),Lu=hr({notEqual_:function(t,e){let n=ur(t,"a","notEqual"),r=ur(e,"b","notEqual");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc(t=>t.notEqual(n,r),{a:n,b:r},null,Nn)}}),ju=hr({outerProduct_:function(t,e){const n=ur(t,"v1","outerProduct"),r=ur(e,"v2","outerProduct");yt(1===n.rank&&1===r.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks "+`${n.rank} and ${r.rank}.`);const i=Lr(n,[-1,1]),s=Lr(r,[1,-1]);return bs(i,s)}}),Bu=hr({pad1d_:function(t,e,n=0){return yt(2===e.length,()=>"Invalid number of paddings. Must be length of 2."),Io(t,[e],n)}}),Vu=hr({pad2d_:function(t,e,n=0){return yt(2===e.length&&2===e[0].length&&2===e[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),Io(t,e,n)}}),Wu=hr({pad3d_:function(t,e,n=0){return yt(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),Io(t,e,n)}}),Uu=hr({pad4d_:function(t,e,n=0){return yt(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),Io(t,e,n)}}),Hu=hr({pool_:function(t,e,n,r,i,s){null==i&&(i=[1,1]),null==s&&(s=1),0===r&&(r="valid");const o=ur(t,"x","maxPool");let l=o,a=!1;3===o.rank&&(a=!0,l=Lr(o,[1,o.shape[0],o.shape[1],o.shape[2]])),yt(hs(s,i),()=>"Error in pool: Either strides or dilations must be 1. "+`Got strides ${s} and dilations '${i}'`);const u=es(l.shape,e,s,i,r),c=[u.dilationHeight,u.dilationWidth];let h;h="same"===r?function(t,e){const n=[u.filterHeight,u.filterWidth].map((t,n)=>t+(t-1)*(e[n]-1)).map(t=>t-1),r=n.map(t=>Math.floor(t/2)),i=n.map((t,e)=>t-r[e]);return n.map((t,e)=>[r[e],i[e]])}(0,c):[[0,0],[0,0]];const d=1===c[0]&&1===c[1],[p,f]=function(t,e,n){const r=n.map(t=>t[0]),i=n.map(t=>t[1]),s=t.concat(r,i),o=e.map((t,e)=>(t-s[e]%t)%t),l=i.map((t,e)=>t+o[e]);return[e.map((t,e)=>[r[e],l[e]]),e.map((t,e)=>[0,o[e]])]}([u.inHeight,u.inWidth],c,h),g=d?r:"valid",m=d?l:vs(l,c,p),b=("avg"===n?()=>ru(m,e,s,g):()=>Du(m,e,s,g))(),y=d?b:Oo(b,c,f);return a?Lr(y,[y.shape[1],y.shape[2],y.shape[3]]):y}}),Gu=hr({prelu_:function(t,e){const n=ur(t,"x","prelu"),r=ur(e,"alpha","prelu");return Ae.runKernelFunc((t,e)=>{const i=t.prelu(n,r);return e([n,r]),i},{x:n,alpha:r},null,Vn)}}),qu=hr({rand_:function(t,e,n){const r=xt(t);let i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error(`Unknown data type ${n}`);i=new Uint8Array(r)}for(let s=0;s<r;s++)i[s]=e();return Ae.makeTensor(i,t,n)}});var Ku=n("vaoY");class Yu{constructor(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const s=i||Math.random();this.random=Ku.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){const t=this.nextVal;return this.nextVal=NaN,t}let t,e,n=!1;for(;!n;){let r,i,s;do{s=(r=2*this.random()-1)*r+(i=2*this.random()-1)*i}while(s>=1||0===s);const o=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*o,e=this.mean+this.stdDev*i*o,this.truncated&&!this.isValidTruncated(t)||(n=!0)}return this.truncated&&!this.isValidTruncated(e)||(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class Xu{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;const i=r||Math.random();this.randu=Ku.alea(i.toString()),this.randn=new Yu(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,i,s;for(;;){do{r=this.randn.nextValue(),s=1+this.c*r}while(s<=0);if(e=1-.331*(t=r*r)*t,n=.5*t+this.d*(1-(s*=s*s)+Math.log(s)),(i=this.randu())<e||Math.log(i)<n)break}return s*=1/this.beta*this.d,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return"float32"===this.dtype?t:Math.round(t)}}class Zu{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=t,this.range=e-t,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=Ku.alea(r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const Qu=hr({randomGamma_:function(t,e,n=1,r="float32",i){if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error(`Unsupported data type ${r}`);const s=new Xu(e,n,r,i),o=Nr(t,r);for(let l=0;l<o.values.length;l++)o.values[l]=s.nextValue();return o.toTensor()}}),Ju=hr({randomNormal_:function(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error(`Unsupported data type ${r}`);const s=new Yu(e,n,r,!1,i),o=Nr(t,r);for(let l=0;l<o.values.length;l++)o.values[l]=s.nextValue();return o.toTensor()}}),tc=hr({randomUniform_:function(t,e=0,n=1,r="float32",i){const s=Nr(t,r),o=new Zu(e,n,null,i);for(let l=0;l<s.values.length;l++)s.values[l]=o.nextValue();return s.toTensor()}}),ec=hr({relu_:function(t){const e=ur(t,"x","relu");return Ae.runKernelFunc((t,n)=>(n([e]),"bool"===e.dtype?e.toInt():t.relu(e)),{x:e},null,Un)}}),nc=hr({relu6_:function(t){const e=ur(t,"x","relu6");return Ae.runKernelFunc((t,n)=>(n([e]),"bool"===e.dtype?Fr(e,"int32"):t.relu6(e)),{x:e},null,Hn)}}),rc=hr({selu_:function(t){const e=ur(t,"x","selu");return Ae.runKernelFunc((t,n)=>{const r=t.selu(e);return n([e]),r},{x:e},null,qn)}}),ic=hr({separableConv2d_:function(t,e,n,r,i,s=[1,1],o="NHWC"){const l=ur(t,"x","separableConv2d"),a=ur(e,"depthwiseFilter","separableConv2d"),u=ur(n,"pointwiseFilter","separableConv2d");let c=l,h=!1;if(3===l.rank&&(h=!0,c=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");yt(4===c.rank,()=>"Error in separableConv2d: input must be rank 4, but got "+`rank ${c.rank}.`),yt(4===a.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but "+`got rank ${a.rank}.`),yt(4===u.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but "+`got rank ${a.rank}.`),yt(1===u.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter "+` must be 1, but got ${u.shape[0]}.`),yt(1===u.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise "+`filter must be 1, but got ${u.shape[1]}.`);const d=a.shape[2],p=a.shape[3];yt(u.shape[2]===d*p,()=>"Error in separableConv2d: the third dimension of pointwise filter "+`must be ${d*p}, `+`but got ${u.shape[2]}.`);const f=wu(c,a,r,i,o,s),g=Es(f,u,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),sc=hr({squaredDifference_:function(t,e){let n=ur(t,"a","squaredDifference"),r=ur(e,"b","squaredDifference");return[n,r]=Te(n,r),ir(n.shape,r.shape),Ae.runKernelFunc((t,e)=>{const i=t.squaredDifference(n,r);return e([n,r]),i},{a:n,b:r},null,Xn,{})}}),oc=hr({truncatedNormal_:function(t,e=0,n=1,r,i){if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");const s=new Yu(e,n,r,!0,i),o=Nr(t,r);for(let l=0;l<o.values.length;l++)o.values[l]=s.nextValue();return o.toTensor()}}),lc=30;function ac(t){return t<=lc?t:qt(t,Math.floor(Math.sqrt(t)))}function uc(t,e){let n,r=!1;for(t<=lc?(n=t,r=!0):n=qt(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=qt(t,n+1);return n}function cc(t,e,n){const r=[],i=t.length;for(let s=0;s<i;s++)r.push(s!==e?t[s]:n);return r}function hc(t,e,n){const r=t.shape[n],i=[];let s=1,o=1;for(let l=0;l<n;l++)i.push(t.shape[l]),s*=t.shape[l];for(let l=0;l<e.rank;l++)i.push(e.shape[l]);for(let l=n+1;l<t.rank;l++)i.push(t.shape[l]),o*=t.shape[l];return{batchSize:s,sliceSize:o,dimSize:r,outputShape:i}}function dc(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function pc(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}const fc=hr({gather_:function(t,e,n=0){const r=ur(t,"x","gather"),i=ur(e,"indices","gather","int32");n=Mt(n,r.shape)[0];const s=hc(r,i,n);return Ae.runKernelFunc((t,e)=>{const s=t.gather(r,i.flatten(),n);return e([i]),s},{x:r,indices:i},(t,e)=>{const[i]=e;return{x:()=>{const e=r.shape,s=i.size,o=e.slice(0,n),l=o.length,a=e.slice(n,e.length).slice(1),u=a.length,c=dc(0,l),h=dc(l+1,l+1+u),d=pc([o,[s],a]),p=t.reshape(d),f=i.reshape([s]),g=pc([[l],c,h]),m=p.transpose(g);let b=gc(m,f,r.shape[n]);const y=oi(g);return b.transpose(y)},indices:()=>i}},"Gather",{axis:n}).reshape(s.outputShape)}}),gc=hr({unsortedSegmentSum_:function(t,e,n){const r=ur(t,"x","unsortedSegmentSum"),i=ur(e,"segmentIds","unsortedSegmentSum","int32");return yt(Ot(n),()=>"numSegments must be of dtype int"),Ae.runKernelFunc((t,e)=>{const s=t.unsortedSegmentSum(r,i,n);return e([i]),s},{$x:r},(t,e)=>{const[n]=e;return{$x:()=>(function(t,e){const n=zu(e,Dr(e)),r=fc(t,n);let i=Ys(e,_r(0,"int32"));const s=r.rank-i.rank;for(let l=0;l<s;++l)i=$r(i,l+1);i=co(i,Tr(r.shape,"bool"));const o=Dr(r);return go(i,r,o)})(t,n)}})}}),mc=async function(t,e,n){const r=ur(t,"tensor","boolMask"),i=ur(e,"mask","boolMask","bool"),s=null==n?0:n,o=i.rank,l=r.shape;yt(o>0,()=>"mask cannot be scalar"),vt(l.slice(s,s+o),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let a=1;for(let g=s;g<s+o;g++)a*=l[g];const u=l.slice(0,s).concat([a],l.slice(s+o)),c=r.reshape(u),h=i.reshape([-1]),d=await mo(h),p=d.squeeze([1]),f=fc(c,p,s);return t!==r&&r.dispose(),e!==i&&i.dispose(),p.dispose(),c.dispose(),h.dispose(),d.dispose(),f},bc=hr({reverse_:function(t,e){const n=ur(t,"x","reverse");if(0===n.rank)return n.clone();const r=Mt(e,n.shape);return Ae.runKernelFunc(t=>t.reverse(n,r),{$x:n},t=>({$x:()=>t.reverse(r)})).reshapeAs(n)}}),yc=hr({reverse1d_:function(t){const e=ur(t,"x","reverse");return yt(1===e.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),bc(e,0)}}),vc=hr({reverse2d_:function(t,e){const n=ur(t,"x","reverse");return yt(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),bc(n,e)}}),_c=hr({reverse3d_:function(t,e){const n=ur(t,"x","reverse");return yt(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),bc(n,e)}}),wc=hr({reverse4d_:function(t,e){const n=ur(t,"x","reverse");return yt(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),bc(n,e)}}),xc=hr({equalStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","equalStrict"),r=ur(e,"b","equalStrict");return vt(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Cc=hr({greaterEqualStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","greaterEqualStrict"),r=ur(e,"b","greaterEqualStrict");return vt(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Sc=hr({greaterStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","greaterStrict"),r=ur(e,"b","greaterStrict");return vt(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Oc=hr({lessEqualStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","lessEqualStrict"),r=ur(e,"b","lessEqualStrict");return vt(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),kc=hr({lessStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","lessStrict"),r=ur(e,"b","lessStrict");return vt(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Ec=hr({notEqualStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","notEqualStrict"),r=ur(e,"b","notEqualStrict");return vt(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}}),Tc=hr({addStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","addStrict"),r=ur(e,"b","addStrict");return vt(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),zc=hr({divStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","div"),r=ur(e,"b","div");return vt(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Pc=hr({maximumStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","maximumStrict"),r=ur(e,"b","maximumStrict");return vt(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Ic=hr({minimumStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","minimumStrict"),r=ur(e,"b","minimumStrict");return vt(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Mc=hr({modStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","modStrict"),r=ur(e,"b","modStrict");return vt(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Dc=hr({mulStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","mul"),r=ur(e,"b","mul");return vt(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Ac=hr({powStrict_:function(t,e){return Fa("strict variants of ops have been deprecated and will be removed in future"),vt(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Nc=hr({squaredDifferenceStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","squaredDifferenceStrict"),r=ur(e,"b","squaredDifferenceStrict");return vt(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Rc=hr({subStrict_:function(t,e){Fa("strict variants of ops have been deprecated and will be removed in future");const n=ur(t,"a","subStrict"),r=ur(e,"b","subStrict");return vt(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Fc=hr({softmax_:function(t,e=-1){const n=ur(t,"logits","softmax","float32");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${n.rank} and dim was ${e}`);return Ae.runKernelFunc((t,r)=>{const i=t.softmax(n,e);return r([i]),i},{logits:n},(t,n)=>{const[r]=n,i=t.mul(r);return{logits:()=>i.sub(i.sum([e],!0).mul(r))}},"Softmax",{dim:e},[],[!0])}}),$c=hr({logSoftmax_:function(t,e=-1){const n=ur(t,"logits","logSoftmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+`Logits was rank ${n.rank} and axis was ${e}`);return Qr((t,n)=>{const r=t.max(e,!0),i=t.sub(r),s=i.toFloat().sub(i.exp().sum(e,!0).log());return n([s]),{value:s,gradFunc:(t,n)=>{const[r]=n,i=r.exp();return t.sub(t.sum(e,!0).mul(i))}}})(n)}}),Lc=hr({norm_:function(t,e="euclidean",n=null,r=!1){const i=function t(e,n,r=null){if(0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(_r(2,"int32")).sum(r).sqrt();throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(r)&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${r}`)}(t=ur(t,"x","norm"),e,n);let s=i.shape;if(r){const e=Mt(n,t.shape);s=ri(i.shape,e)}return i.reshape(s)}}),jc=hr({basicLSTMCell_:function(t,e,n,r,i,s){const o=ur(t,"forgetBias","basicLSTMCell"),l=ur(e,"lstmKernel","basicLSTMCell"),a=ur(n,"lstmBias","basicLSTMCell"),u=ur(r,"data","basicLSTMCell"),c=ur(i,"c","basicLSTMCell"),h=ur(s,"h","basicLSTMCell"),d=u.concat(h,1).matMul(l).add(a),p=d.shape[1]/4,f=[d.shape[0],p],g=d.slice([0,0],f),m=d.slice([0,p],f),b=d.slice([0,2*p],f),y=d.slice([0,3*p],f),v=g.sigmoid().mul(m.tanh()).add(c.mul(o.add(b).sigmoid())),_=v.tanh().mul(y.sigmoid());return[v,_]}}),Bc=hr({multiRNNCell_:function(t,e,n,r){const i=ur(e,"data","multiRNNCell"),s=cr(n,"c","multiRNNCell"),o=cr(r,"h","multiRNNCell");let l=i;const a=[];for(let h=0;h<t.length;h++){const e=t[h](l,s[h],o[h]);a.push(e[0]),a.push(e[1]),l=e[1]}const u=[],c=[];for(let h=0;h<a.length;h+=2)u.push(a[h]),c.push(a[h+1]);return[u,c]}}),Vc=hr({movingAverage_:function(t,e,n,r,i=!0){const s=ur(t,"v","movingAverage"),o=ur(e,"x","movingAverage"),l=ur(n,"decay","movingAverage");ze(s,o),yt(St(s.shape,o.shape),()=>"Shape mismatch in v and x");const a=_r(1),u=a.sub(l);let c=o.sub(s).mul(u);if(i){yt(null!=r,()=>"When using zeroDebias: true, step is required.");const t=ur(r,"step","movingAverage");c=c.div(a.sub(bo(l,t)))}return s.add(c)}}),Wc=hr({stridedSlice_:function(t,e,n,r,i=0,s=0,o=0,l=0,a=0){null==r&&(r=new Array(e.length));const u=Do(o);if(u.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==l)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==a)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");let c=ur(t,"x","stridedSlice");const h=c.rank-e.length,d=Do(l),p=c.shape.slice();d.forEach(t=>{e[t]=0,n[t]=1,p.splice(t,0,1)}),c=c.reshape(p);for(let b=0;b<c.rank;b++)e[b]=Lo(i,e,r,c.shape,b,o),n[b]=jo(s,n,r,c.shape,b,o),r[b]=$o(r,b,o);if(u.length&&h>0){const t=u[0],i=h+1;e=Ro(e,t,i),n=Fo(n,t,i,c.shape),r=No(r,t,i)}const f=Do(a);f.forEach(t=>{n[t]=e[t]+1,r[t]=1});const g=Ao(e,n,r),m=g.filter((t,e)=>-1===f.indexOf(e));return r.every(t=>1===t)?Wo(c,e,g).reshape(m):Ae.runKernelFunc(t=>t.stridedSlice(c,e,n,r),{$x:c}).reshape(m)}}),Uc=hr({topk_:function(t,e=1,n=!0){const r=ur(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const i=r.shape[r.shape.length-1];if(e>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) `+`but got ${e}`);const[s,o]=Ae.runKernelFunc(t=>t.topk(r,e,n),{$x:r});return{values:s,indices:o}}}),Hc=hr({scatterND_:function(t,e,n){const r=ur(t,"indices","scatterND","int32"),i=ur(e,"updates","scatterND");return ba(i,r,n),Ae.runKernelFunc(t=>t.scatterND(r,i,n),{indices:r,updates:i},null,"ScatterNd",{shape:n})}}),Gc=hr({fft_:function(t){yt("complex64"===t.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 "+`but got ${t.dtype}.`);const e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return Ae.runKernelFunc(t=>t.fft(n),{input:t}).reshape(t.shape)}}),qc=hr({ifft_:function(t){yt("complex64"===t.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 "+`but got ${t.dtype}.`);const e=t.shape[t.shape.length-1],n=t.as2D(t.size/e,e);return Ae.runKernelFunc(t=>t.ifft(n),{input:t}).reshape(t.shape)}}),Kc=hr({rfft_:function(t,e){yt("float32"===t.dtype,()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let i;if(null!=e&&e<n){const r=t.shape.map(t=>0),s=t.shape.map(t=>t);s[t.shape.length-1]=e,i=t.slice(r,s),n=e}else if(null!=e&&e>n){const r=t.shape.map(t=>t);r[t.shape.length-1]=e-n,i=t.concat(zr(r),t.shape.length-1),n=e}else i=t;const s=i.zerosLike(),o=gr(i,s).as2D(r,n),l=Gc(o),a=Math.floor(n/2)+1,u=br(l),c=mr(l),h=u.split([a,n-a],u.shape.length-1),d=c.split([a,n-a],c.shape.length-1),p=i.shape.slice();return p[i.shape.length-1]=a,gr(h[0],d[0]).reshape(p)}}),Yc=hr({irfft_:function(t){const e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){const r=t.as2D(n,e),i=qc(r);return br(i)}{const r=[n,2*(e-1)],i=br(t).as2D(n,e),s=mr(t).as2D(n,e),o=i.slice([0,1],[n,e-2]).reverse(1),l=s.slice([0,1],[n,e-2]).reverse(1).mul(_r(-1)),a=i.concat(o,1),u=s.concat(l,1),c=gr(a,u).as2D(r[0],r[1]),h=qc(c);return br(h)}}}),Xc=hr({sparseToDense_:function(t,e,n,r=0){const i=ur(t,"sparseIndices","sparseToDense","int32"),s=ur(e,"sparseValues","sparseToDense"),o=ur(r,"defaultValue","sparseToDense",s.dtype);return function(t,e,n,r){if("int32"!==t.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+` but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+` but got shape ${t.shape}.`);const i=t.rank>0?t.shape[0]:1,s=t.rank>1?t.shape[1]:1;if(n.length!==s)throw new Error("outputShape has incorrect number of elements:,"+` ${n.length}, should be: ${s}.`);if(0!==e.rank&&(1!==e.rank||e.size!==i))throw new Error("sparseValues has incorrect shape "+`${e.shape}, should be [] or [${i}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,s,n,o),Ae.runKernelFunc(t=>t.sparseToDense(i,s,n,o),{$sparseIndices:i,$sparseValues:s,$defaultValue:o})}}),Zc=hr({gatherND_:function(t,e){const n=ur(e,"indices","gatherND","int32"),r=ur(t,"x","gatherND");return Ae.runKernelFunc(t=>t.gatherND(r,n),{params:r,indices:n},null,mn)}}),Qc=hr({dropout_:function(t,e,n,r){const i=ur(t,"x","dropout");if(yt("float32"===i.dtype,()=>"x has to be a floating point tensor since it's going to be "+`scaled, but got a ${i.dtype} tensor instead.`),yt(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),0===e)return t instanceof ye?i.clone():i;const s=function(t,e){if(null==e)return t.shape.slice();if(St(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)n.push(null==e[r]&&null!=t.shape[r]?t.shape[r]:e[r]);return n}return e}(i,n),o=1-e,l=tc(s,0,1,"float32",r).add(o).floor().div(o);return i.mul(l)}});function Jc(t,e,n){const r=1-t%2,i=new Float32Array(t);for(let s=0;s<t;++s){const o=2*Math.PI*s/(t+r-1);i[s]=e-n*Math.cos(o)}return wr(i,"float32")}const th=hr({hannWindow_:function(t){return Jc(t,.5,.5)}}),eh=hr({hammingWindow_:function(t){return Jc(t,.54,.46)}}),nh=hr({frame_:function(t,e,n,r=!1,i=0){let s=0;const o=[];for(;s+e<=t.size;)o.push(Wo(t,s,e)),s+=n;if(r)for(;s<t.size;){const r=s+e-t.size,l=Ar([Wo(t,s,e-r),Tu([r],i)]);o.push(l),s+=n}return 0===o.length?xr([],[0,e]):Ar(o).as2D(o.length,e)}}),rh=hr({stft_:function(t,e,n,r,i=th){null==r&&(r=Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))));const s=nh(t,e,n),o=Gr(s,i(e)),l=[];for(let a=0;a<s.shape[0];a++)l.push(Kc(o.slice([a,0],[1,e]),r));return Ar(l)}}),ih=async function(t,e,n=1){const r=ur(t,"predictions","inTopK"),i=ur(e,"targets","inTopK");yt(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, "+`but got ${r.rank}`),yt(r.rank-1===i.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank "+`${r.rank} and targets rank ${i.rank}`),vt(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const s=r.shape[r.shape.length-1];yt(n>0&&n<=s,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last "+`dimension (${s}), but got ${n}`);const o=await r.data(),l=await i.data(),[a,u]=[o.length/s,s],c=At("bool",a);for(let h=0;h<a;h++){const t=h*u,e=o.subarray(t,t+u),r=[];for(let n=0;n<e.length;n++)r.push({value:e[n],index:n});r.sort((t,e)=>e.value-t.value),c[h]=0;for(let i=0;i<n;i++)if(r[i].index===l[h]){c[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),yr(c,i.shape,"bool")};var sh;!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(sh||(sh={}));const oh=hr({absoluteDifference_:function(t,e,n,r=sh.SUM_BY_NONZERO_WEIGHTS){const i=ur(t,"labels","absoluteDifference"),s=ur(e,"predictions","absoluteDifference");let o=null;null!=n&&(o=ur(n,"weights","absoluteDifference")),vt(i.shape,s.shape,"Error in absoluteDifference: ");const l=i.sub(s).abs();return lh(l,o,r)}}),lh=hr({computeWeightedLoss_:function(t,e,n=sh.SUM_BY_NONZERO_WEIGHTS){const r=ur(t,"losses","computeWeightedLoss");let i=null;null!=e&&(i=ur(e,"weights","computeWeightedLoss"));const s=null==i?r:r.mul(i);if(n===sh.NONE)return s;if(n===sh.SUM)return s.sum();if(n===sh.MEAN){if(null==i)return s.mean();{const t=r.size/i.size,e=s.sum().div(i.sum());return t>1?e.div(_r(t)):e}}if(n===sh.SUM_BY_NONZERO_WEIGHTS){if(null==i)return s.sum().div(_r(r.size));{const t=i.mul(Tr(r.shape)).notEqual(_r(0)).sum().toFloat();return s.sum().div(t)}}throw Error(`Unknown reduction: ${n}`)}}),ah=hr({cosineDistance_:function(t,e,n,r,i=sh.SUM_BY_NONZERO_WEIGHTS){const s=ur(t,"labels","cosineDistance"),o=ur(e,"predictions","cosineDistance");let l=null;null!=r&&(l=ur(r,"weights","cosineDistance")),vt(s.shape,o.shape,"Error in cosineDistance: ");const a=_r(1).sub(s.mul(o).sum(n,!0));return lh(a,l,i)}}),uh=hr({hingeLoss_:function(t,e,n,r=sh.SUM_BY_NONZERO_WEIGHTS){let i=ur(t,"labels","hingeLoss");const s=ur(e,"predictions","hingeLoss");let o=null;null!=n&&(o=ur(n,"weights","hingeLoss")),vt(i.shape,s.shape,"Error in hingeLoss: ");const l=_r(1);i=_r(2).mul(i).sub(l);const a=l.sub(i.mul(s)).relu();return lh(a,o,r)}}),ch=hr({huberLoss_:function(t,e,n,r=1,i=sh.SUM_BY_NONZERO_WEIGHTS){const s=ur(t,"labels","huberLoss"),o=ur(e,"predictions","huberLoss");let l=null;null!=n&&(l=ur(n,"weights","huberLoss")),vt(s.shape,o.shape,"Error in huberLoss: ");const a=_r(r),u=o.sub(s).abs(),c=Ru(u,a),h=u.sub(c),d=_r(.5).mul(c.square()).add(a.mul(h));return lh(d,l,i)}}),hh=hr({logLoss_:function(t,e,n,r=1e-7,i=sh.SUM_BY_NONZERO_WEIGHTS){const s=ur(t,"labels","logLoss"),o=ur(e,"predictions","logLoss");let l=null;null!=n&&(l=ur(n,"weights","logLoss")),vt(s.shape,o.shape,"Error in logLoss: ");const a=_r(1),u=_r(r),c=s.mul(o.add(u).log()).neg().sub(a.sub(s).mul(a.sub(o).add(u).log()));return lh(c,l,i)}}),dh=hr({meanSquaredError_:function(t,e,n,r=sh.SUM_BY_NONZERO_WEIGHTS){const i=ur(t,"labels","meanSquaredError"),s=ur(e,"predictions","meanSquaredError");let o=null;null!=n&&(o=ur(n,"weights","meanSquaredError")),vt(i.shape,s.shape,"Error in meanSquaredError: ");const l=i.squaredDifference(s);return lh(l,o,r)}}),ph=hr({sigmoidCrossEntropy_:function(t,e,n,r=0,i=sh.SUM_BY_NONZERO_WEIGHTS){let s=ur(t,"multiClassLabels","sigmoidCrossEntropy");const o=ur(e,"logits","sigmoidCrossEntropy");let l=null;if(null!=n&&(l=ur(n,"weights","sigmoidCrossEntropy")),vt(s.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const t=_r(r),e=_r(1),n=_r(.5);s=s.mul(e.sub(t)).add(n.mul(t))}const a=function(t,e){const n=ur(s,"labels","sigmoidCrossEntropyWithLogits"),r=ur(e,"logits","sigmoidCrossEntropyWithLogits");vt(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const i=r.relu(),o=r.mul(n),l=r.abs().neg().exp().log1p();return i.sub(o).add(l)}(0,o);return lh(a,l,i)}}),fh=hr({softmaxCrossEntropy_:function(t,e,n,r=0,i=sh.SUM_BY_NONZERO_WEIGHTS){let s=ur(t,"onehotLabels","softmaxCrossEntropy");const o=ur(e,"logits","softmaxCrossEntropy");let l=null;if(null!=n&&(l=ur(n,"weights","softmaxCrossEntropy")),vt(s.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const t=_r(r),e=_r(1),n=_r(s.shape[1]);s=s.mul(e.sub(t)).add(t.div(n))}const a=function(t,e,n=-1){if(-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+`supported. Labels / logits was rank ${e.rank} `+`and dim was ${n}`);return Qr((t,e,r)=>{const i=e.logSumExp([n],!0),s=e.toFloat().sub(i);return r([t,s]),{value:s.mul(t).neg().sum([n]),gradFunc:(t,e)=>{const[r,i]=e,s=ri(t.shape,[n]);return[t.reshape(s).mul(r.toFloat().sub(i.exp())),t.reshape(s).mul(i.exp().sub(r.toFloat()))]}}})(t,e)}(s,o);return lh(a,l,i)}});function gh(t,e=!1){return Ae.tidy(()=>{if(2!==t.shape.length)throw new Error(`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let i=Eu(n),s=t.clone();const o=xr([[1]],[1,1]);let l=o.clone();const a=n>=r?r:n;for(let t=0;t<a;++t){const e=s,a=l,u=i;[l,s,i]=Ae.tidy(()=>{const e=s.slice([t,t],[n-t,1]),a=e.norm(),u=s.slice([t,t],[1,1]),c=xr([[-1]]).where(u.greater(0),xr([[1]])),h=u.sub(c.mul(a)),d=e.div(h);l=1===d.shape[0]?o.clone():o.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);const p=c.matMul(h).div(a).neg(),f=s.slice([t,0],[n-t,r]),g=p.mul(l),m=l.transpose();if(0===t)s=f.sub(g.matMul(m.matMul(f)));else{const e=f.sub(g.matMul(m.matMul(f)));s=s.slice([0,0],[t,r]).concat(e,0)}const b=g.transpose(),y=i.slice([0,t],[n,i.shape[1]-t]);if(0===t)i=y.sub(y.matMul(l).matMul(b));else{const e=y.sub(y.matMul(l).matMul(b));i=i.slice([0,0],[n,t]).concat(e,1)}return[l,s,i]}),Wa([e,a,u])}return!e&&n>r&&(i=i.slice([0,0],[n,r]),s=s.slice([0,0],[r,r])),[i,s]})}const mh=hr({bandPart_:function(t,e,n){if(e%1!=0)throw new Error(`bandPart(): numLower must be an integer, got ${e}.`);if(n%1!=0)throw new Error(`bandPart(): numUpper must be an integer, got ${n}.`);const r=ur(t,"a","bandPart");if(r.rank<2)throw new Error(`bandPart(): Rank must be at least 2, got ${r.rank}.`);const i=r.shape,[s,o]=r.shape.slice(-2);if(!(e<=s))throw new Error(`bandPart(): numLower (${e})`+` must not be greater than the number of rows (${s}).`);if(!(n<=o))throw new Error(`bandPart(): numUpper (${n})`+` must not be greater than the number of columns (${o}).`);e<0&&(e=s),n<0&&(n=o);const l=Ir(0,s,1,"int32").reshape([-1,1]),a=Ir(0,o,1,"int32"),u=Bs(l,a),c=co(u.lessEqual(_r(+e,"int32")),u.greaterEqual(_r(-n,"int32"))),h=zr([s,o],r.dtype);return Br(Vr(r.reshape([-1,s,o])).map(t=>go(c,t,h))).reshape(i)}}),bh=hr({gramSchmidt_:function(t){let e;if(Array.isArray(t)){e=!1,yt(null!=t&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const n=t[0].shape[0];for(let e=1;e<t.length;++e)yt(t[e].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: "+`(${t[e].shape[0]} vs. ${n})`)}else e=!0,t=xs(t,t.shape[0],0).map(t=>jr(t,[0]));yt(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds `+`number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let i=0;i<t.length;++i)n.push(Ae.tidy(()=>{let t=r[i];if(i>0)for(let e=0;e<i;++e){const r=bi(n[e].mul(t)).mul(n[e]);t=t.sub(r)}return t.div(Lc(t,"euclidean"))}));return e?Br(n,0):n}}),yh=hr({qr_:function(t,e=!1){if(t.rank<2)throw new Error(`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`);if(2===t.rank)return gh(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((t,e)=>t*e),r=Vr(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],s=[];return r.forEach(t=>{const[n,r]=gh(t,e);i.push(n),s.push(r)}),[Br(i,0).reshape(t.shape),Br(s,0).reshape(t.shape)]}}});function vh(t,e,n){const r=function(t,n,r){return function(t,e,n){let r=0,i=t.length,s=0,o=!1;for(;r<i;){const l=n(e,t[s=r+(i-r>>>1)]);l>0?r=s+1:(i=s,o=!l)}return o?r:-r-1}(t,e,r||_h)}(t,0,n);t.splice(r<0?-(r+1):r,0,e)}function _h(t,e){return t>e?1:t<e?-1:0}function wh(t,e,n,r,i){const s=Ch(t,e,n,r,i,0);return s.selectedScores.dispose(),s.numValidOutputs.dispose(),s.selectedIndices}function xh(t,e,n,r,i,s){const o=Ch(t,e,n,r,i,s,!0);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function Ch(t,e,n,r,i,s,o=!1,l=!1){const a=[];for(let p=0;p<e.length;p++)e[p]>i&&a.push({score:e[p],boxIndex:p,suppressBeginIndex:0});a.sort(kh);const u=s>0?-.5/s:0,c=[],h=[];for(;c.length<n&&a.length>0;){const e=a.pop(),{score:n,boxIndex:s,suppressBeginIndex:o}=e;if(n<i)break;let l=!1;for(let a=c.length-1;a>=o;--a){const n=Sh(t,s,c[a]);if(n>=r){l=!0;break}if(e.score=e.score*Oh(r,u,n),e.score<=i)break}e.suppressBeginIndex=c.length,l||(e.score===n?(c.push(s),h.push(e.score)):e.score>i&&vh(a,e,kh))}const d=c.length;return l&&(c.fill(0,d),h.fill(0,d)),{selectedIndices:wr(c,"int32"),selectedScores:wr(h,"float32"),numValidOutputs:_r(d,"int32")}}function Sh(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),s=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),a=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),p=(l-s)*(a-o),f=(h-u)*(d-c);if(p<=0||f<=0)return 0;const g=Math.max(s,u),m=Math.max(o,c),b=Math.min(l,h),y=Math.min(a,d),v=Math.max(b-g,0)*Math.max(y-m,0);return v/(p+f-v)}function Oh(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function kh(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}function Eh(t,e,n,r,i,s){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==s&&(s=0);const o=t.shape[0];return n=Math.min(n,o),yt(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),yt(2===t.rank,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),yt(4===t.shape[1],()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),yt(1===e.rank,()=>"scores must be a 1D tensor"),yt(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, `+`but was ${e.shape[0]}`),yt(0<=s&&s<=1,()=>`softNmsSigma must be in [0, 1], but was '${s}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:s}}const Th=hr({nonMaxSuppression_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=ur(t,"boxes","nonMaxSuppression"),o=ur(e,"scores","nonMaxSuppression"),l=Eh(s,o,n,r,i);return Ae.runKernelFunc(t=>t.nonMaxSuppression(s,o,n,r,i),{boxes:s,scores:o},null,Rn,{maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold})}}),zh=hr({resizeBilinear_:function(t,e,n=!1){const r=ur(t,"images","resizeBilinear");yt(3===r.rank||4===r.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got "+`rank ${r.rank}.`),yt(2===e.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape "+`${e}.`);let i=r,s=!1;3===r.rank&&(s=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));const[o,l]=e,a=Ae.runKernelFunc((t,e)=>(e([i]),t.resizeBilinear(i,o,l,n)),{x:i},(t,e)=>({x:()=>Ae.runKernelFunc(r=>r.resizeBilinearBackprop(t,e[0],n),{})}),"ResizeBilinear",{alignCorners:n,newHeight:o,newWidth:l});return s?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),Ph=hr({resizeNearestNeighbor_:function(t,e,n=!1){const r=ur(t,"images","resizeNearestNeighbor");yt(3===r.rank||4===r.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+`rank ${r.rank}.`),yt(2===e.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+`${e}.`),yt("float32"===r.dtype||"int32"===r.dtype,()=>"`images` must have `int32` or `float32` as dtype");let i=r,s=!1;3===r.rank&&(s=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));const[o,l]=e,a=Ae.runKernelFunc((t,e)=>(e([i]),t.resizeNearestNeighbor(i,o,l,n)),{batchImages:i},(t,e)=>({batchImages:()=>Ae.runKernelFunc(r=>r.resizeNearestNeighborBackprop(t,e[0],n),{})}));return s?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),Ih=async function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY){const s=ur(t,"boxes","nonMaxSuppressionAsync"),o=ur(e,"scores","nonMaxSuppressionAsync"),l=Eh(s,o,n,r,i);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold;const a=await Promise.all([s.data(),o.data()]),u=wh(a[0],a[1],n,r,i);return s!==t&&s.dispose(),o!==e&&o.dispose(),u},Mh=hr({nonMaxSuppressionWithScore_:function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=ur(t,"boxes","nonMaxSuppression"),l=ur(e,"scores","nonMaxSuppression"),a=Eh(o,l,n,r,i,s),u=Ae.runKernel("NonMaxSuppressionV5",{boxes:o,scores:l},{maxOutputSize:n=a.maxOutputSize,iouThreshold:r=a.iouThreshold,scoreThreshold:i=a.scoreThreshold,softNmsSigma:s=a.softNmsSigma});return{selectedIndices:u[0],selectedScores:u[1]}}}),Dh=async function(t,e,n,r=.5,i=Number.NEGATIVE_INFINITY,s=0){const o=ur(t,"boxes","nonMaxSuppressionAsync"),l=ur(e,"scores","nonMaxSuppressionAsync"),a=Eh(o,l,n,r,i,s);n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,s=a.softNmsSigma;const u=await Promise.all([o.data(),l.data()]),c=xh(u[0],u[1],n,r,i,s);return o!==t&&o.dispose(),l!==e&&l.dispose(),c},Ah=hr({cropAndResize_:function(t,e,n,r,i,s){const o=ur(t,"image","cropAndResize"),l=ur(e,"boxes","cropAndResize","float32"),a=ur(n,"boxInd","cropAndResize","int32");i=i||"bilinear",s=s||0;const u=l.shape[0];return yt(4===o.rank,()=>"Error in cropAndResize: image must be rank 4,"+`but got rank ${o.rank}.`),yt(2===l.rank&&4===l.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] `+`but had shape ${l.shape}.`),yt(1===a.rank&&a.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] `+`but had shape ${l.shape}.`),yt(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got "+`length ${r.length}.`),yt(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),yt("bilinear"===i||"nearest"===i,()=>`method must be bilinear or nearest, but was ${i}`),Ae.runKernelFunc((t,e)=>t.cropAndResize(o,l,a,r,i,s),{images:o,boxes:l,boxInd:a},null,"CropAndResize",{method:i,extrapolationValue:s,cropSize:r})}}),Nh=(t,e)=>!(t>0)||"linear"===e,Rh=(t,e,n)=>{if(null==n||"linear"===n)return t;if("relu"===n)return t.mul(e.step());throw new Error(`Gradient for activation ${n} has not been `+"implemented yet.")},Fh=(t,e)=>{let n=e;const r=rr(t.shape,e.shape);return r.length>0&&(n=n.sum(r)),n.reshape(t.shape)},$h=(t,e,n)=>{if("linear"===e)return t;if("relu"===e)return ec(t);if("elu"===e)return Ou(t);if("relu6"===e)return nc(t);if("prelu"===e)return Gu(t,n);throw new Error(`Unknown fused activation ${e}.`)},Lh=hr({fusedMatMul_:function({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:i,activation:s="linear",preluActivationWeights:o}){if(!1===Nh(Ae.state.gradientDepth,s)){let l=bs(t,e,n,r);return null!=i&&(l=dr(l,i)),$h(l,s,o)}let l=ur(t,"a","fused matMul"),a=ur(e,"b","fused matMul");[l,a]=Te(l,a);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],c=r?a.shape[a.rank-1]:a.shape[a.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],d=r?a.shape[a.rank-2]:a.shape[a.rank-1],p=l.shape.slice(0,-2),f=a.shape.slice(0,-2),g=xt(p),m=xt(f);yt(l.rank>=2&&a.rank>=2&&l.rank===a.rank,()=>"Error in fused matMul: inputs must have the same rank of at least "+`2, got ranks ${l.rank} and ${a.rank}.`),yt(St(p,f),()=>`Error in fused matMul: outer dimensions (${p}) and (`+`${f}) of Tensors with shapes ${l.shape} and `+`${a.shape} must match.`),yt(u===c,()=>`Error in fused matMul: inner shapes (${u}) and (`+`${c}) of Tensors with shapes ${l.shape} and `+`${a.shape} and transposeA=${n}`+` and transposeB=${r} must match.`);const b=l.shape.slice(0,-2).concat([h,d]),y=n?l.as3D(g,u,h):l.as3D(g,h,u),v=r?a.as3D(m,d,c):a.as3D(m,c,d);let _,w;null!=i&&(_=ur(i,"bias","fused matMul"),[_]=Te(_,l),ir(b,_.shape)),null!=o&&(w=ur(o,"prelu weights","fused matMul"));const x={a:y,b:v};return null!=i&&(x.bias=_),null!=o&&(x.preluActivationWeights=w),Ae.runKernelFunc((t,e)=>{const i=t.fusedBatchMatMul({a:y,b:v,transposeA:n,transposeB:r,bias:_,activation:s,preluActivationWeights:w});return e([y,v,i]),i},x,(t,e)=>{const[o,l,a]=e,u=Rh(t,a,s);let c={};return null!=i&&(c={bias:()=>Fh(_,u)}),n||r?!n&&r?Object.assign({a:()=>u.matMul(l,!1,!1),b:()=>u.matMul(o,!0,!1)},c):n&&!r?Object.assign({a:()=>l.matMul(u,!1,!0),b:()=>o.matMul(u,!1,!1)},c):Object.assign({a:()=>l.matMul(u,!0,!0),b:()=>u.matMul(o,!0,!0)},c):Object.assign({a:()=>u.matMul(l,!1,!0),b:()=>o.matMul(u,!0,!1)},c)},"_FusedMatMul",{transposeA:n,transposeB:r,activation:s},[y,v],[!0]).reshape(b)}}),jh=hr({fusedConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:l,activation:a="linear",preluActivationWeights:u}){if(!1===Nh(Ae.state.gradientDepth,a=a||"linear")){let c=Es(t,e,n,r,i,s,o);return null!=l&&(c=dr(c,l)),$h(c,a,u)}const c=ur(t,"x","conv2d"),h=ur(e,"filter","conv2d");let d=c,p=!1;3===c.rank&&(p=!0,d=c.as4D(1,c.shape[0],c.shape[1],c.shape[2])),yt(4===d.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank "+`${d.rank}.`),yt(4===h.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank "+`${h.rank}.`),null!=o&&yt(Ot(r),()=>"Error in fused conv2d: pad must be an integer when using, "+`dimRoundingMode ${o} but got pad ${r}.`),yt(d.shape[3]===h.shape[2],()=>`Error in conv2d: depth of input (${d.shape[3]}) must match `+`input depth for filter ${h.shape[2]}.`),yt(hs(n,s),()=>"Error in conv2D: Either strides or dilations must be 1. "+`Got strides ${n} and dilations '${s}'`),yt("NHWC"===i,()=>`Error in conv2d: got dataFormat of ${i} but only NHWC is currently supported.`);const f=rs(d.shape,h.shape,n,s,r,o);let g,m;null!=l&&(g=ur(l,"bias","fused conv2d"),[g]=Te(g,c),ir(f.outShape,g.shape)),null!=u&&(m=ur(u,"prelu weights","fused conv2d"));const b={x:d,filter:h};null!=l&&(b.bias=g),null!=u&&(b.preluActivationWeights=m);const y=Ae.runKernelFunc((t,e)=>{const n=t.fusedConv2d({input:d,filter:h,convInfo:f,bias:g,activation:a,preluActivationWeights:m});return e([h,d,n]),n},b,(t,e)=>{const[i,o,u]=e,c=Rh(t,u,a);yt(cs(s),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 "+`are not yet supported in gradients. Got dilations '${s}'`);let h={};return null!=l&&(h={bias:()=>Fh(g,c)}),Object.assign({x:()=>Os(o.shape,c,i,n,r),filter:()=>Ss(o,c,i.shape,n,r)},h)},"FusedConv2D",{convInfo:f,activation:a},[h,d],[!0]);return p?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),Bh=hr({fusedDepthwiseConv2d_:function({x:t,filter:e,strides:n,pad:r,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:l,activation:a="linear",preluActivationWeights:u}){if(!1===Nh(Ae.state.gradientDepth,a)){let c=wu(t,e,n,r,i,s,o);return null!=l&&(c=dr(c,l)),$h(c,a,u)}const c=ur(t,"x","depthwiseConv2d"),h=ur(e,"filter","depthwiseConv2d");let d=c,p=!1;3===c.rank&&(p=!0,d=c.as4D(1,c.shape[0],c.shape[1],c.shape[2])),yt(4===d.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got "+`rank ${d.rank}.`),yt(4===h.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, "+`but got rank ${h.rank}.`),yt(d.shape[3]===h.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels "+`(${d.shape[3]}) must match the inChannels dimension in `+`filter ${h.shape[2]}.`),null==s&&(s=[1,1]),yt(hs(n,s),()=>"Error in fused depthwiseConv2d: Either strides or dilations must "+`be 1. Got strides ${n} and dilations '${s}'`),null!=o&&yt(Ot(r),()=>"Error in fused depthwiseConv2d: pad must be an integer when "+`using dimRoundingMode ${o} but got pad ${r}.`);const f=rs(d.shape,h.shape,n,s,r,o,!0);let g,m;null!=l&&(g=ur(l,"bias","fused conv2d"),[g]=Te(g,c),ir(f.outShape,g.shape)),null!=u&&(m=ur(u,"prelu weights","fused depthwiseConv2d"));const b={x:d,filter:h};null!=l&&(b.bias=g),null!=u&&(b.preluActivationWeights=m);const y=Ae.runKernelFunc((t,e)=>{const n=t.fusedDepthwiseConv2D({input:d,filter:h,convInfo:f,bias:g,activation:a,preluActivationWeights:m});return e([h,d,n]),n},b,(t,e)=>{yt(cs(s),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+`'${s}'`);const[n,r,i]=e,o=Rh(t,i,a);let u={};return null!=l&&(u={bias:()=>Fh(g,o)}),Object.assign({x:()=>Rs(r.shape,o,n,f),filter:()=>Ns(r,o,n.shape,f)},u)},"FusedDepthwiseConv2D",{convInfo:f,activation:a},[h,d],[!0]);return p?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}});class Vh extends va{minimize(t,e=!1,n){const{value:r,grads:i}=this.computeGradients(t,n);if(null!=n){const t=n.map(t=>({name:t.name,tensor:i[t.name]}));this.applyGradients(t)}else this.applyGradients(i);return Wa(i),e?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return Zr(t,e)}dispose(){null!=this.iterations_&&Wa(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:_r(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for this optimizer class "+`${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Vh,Symbol.hasInstance,{value:t=>null!=t.minimize&&null!=t.computeGradients&&null!=t.applyGradients});class Wh extends Vh{constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=Ae.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Ae.registeredVariables[e];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${e}/accum_grad`,variable:Va(()=>Dr(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${e}/accum_var`,variable:Va(()=>Dr(r).variable(!1))});const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;Va(()=>{const t=s.mul(this.rho).add(i.square().mul(1-this.rho)),e=o.add(this.epsilon).sqrt().div(s.add(this.epsilon).sqrt()).mul(i),n=o.mul(this.rho).add(e.square().mul(1-this.rho));s.assign(t),o.assign(n);const l=e.mul(-this.learningRate).add(r);r.assign(l)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Wa(this.accumulatedGrads.map(t=>t.variable)),Wa(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){const e=(t=await this.extractIterations(t)).length/2;this.accumulatedGrads=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedUpdates=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}Wh.className="Adadelta",wa(Wh);class Uh extends Vh{constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Ae.registeredVariables[e];if(null==this.accumulatedGrads[n]){const t=!1;this.accumulatedGrads[n]={originalName:`${e}/accumulator`,variable:Va(()=>Tu(r.shape,this.initialAccumulatorValue).variable(t))}}const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const s=this.accumulatedGrads[n].variable;Va(()=>{const t=s.add(i.square());s.assign(t);const e=i.div(t.add(Ae.backend.epsilon()).sqrt()).mul(-this.learningRate).add(r);r.assign(e)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Wa(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulatedGrads=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}Uh.className="Adagrad",wa(Uh);class Hh extends Vh{constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Va(()=>{this.accBeta1=_r(e).variable(),this.accBeta2=_r(n).variable()}),null==r&&(this.epsilon=Ae.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Va(()=>{const n=Bs(1,this.accBeta1),r=Bs(1,this.accBeta2);e.forEach((e,i)=>{const s=Ae.registeredVariables[e];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${e}/m`,variable:Va(()=>Dr(s).variable(!1))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:`${e}/v`,variable:Va(()=>Dr(s).variable(!1))});const o=Array.isArray(t)?t[i].tensor:t[e];if(null==o)return;const l=this.accumulatedFirstMoment[i].variable,a=this.accumulatedSecondMoment[i].variable,u=l.mul(this.beta1).add(o.mul(1-this.beta1)),c=a.mul(this.beta2).add(o.square().mul(1-this.beta2)),h=u.div(n),d=c.div(r);l.assign(u),a.assign(c);const p=h.div(d.sqrt().add(this.epsilon)).mul(-this.learningRate).add(s);s.assign(p)}),this.accBeta1.assign(this.accBeta1.mul(this.beta1)),this.accBeta2.assign(this.accBeta2.mul(this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Wa(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedSecondMoment&&Wa(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),Va(()=>{this.accBeta1.assign(bo(this.beta1,this.iterations_+1)),this.accBeta2.assign(bo(this.beta2,this.iterations_+1))});const e=t.length/2;this.accumulatedFirstMoment=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedSecondMoment=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}Hh.className="Adam",wa(Hh);class Gh extends Vh{constructor(t,e,n,r=null,i=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Va(()=>{this.iteration=_r(0).variable(),this.accBeta1=_r(e).variable()}),null==r&&(this.epsilon=Ae.backend.epsilon())}applyGradients(t){const e=Array.isArray(t)?t.map(t=>t.name):Object.keys(t);Va(()=>{const n=Bs(1,this.accBeta1),r=Hr(-this.learningRate,this.iteration.mul(this.decay).add(1));e.forEach((e,i)=>{const s=Ae.registeredVariables[e];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:`${e}/m`,variable:Dr(s).variable(!1)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:`${e}/v`,variable:Dr(s).variable(!1)});const o=Array.isArray(t)?t[i].tensor:t[e];if(null==o)return;const l=this.accumulatedFirstMoment[i].variable,a=this.accumulatedWeightedInfNorm[i].variable,u=l.mul(this.beta1).add(o.mul(1-this.beta1)),c=a.mul(this.beta2),h=o.abs(),d=c.maximum(h);l.assign(u),a.assign(d);const p=r.div(n).mul(u.div(d.add(this.epsilon))).add(s);s.assign(p)}),this.iteration.assign(this.iteration.add(1)),this.accBeta1.assign(this.accBeta1.mul(this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Wa(this.accumulatedFirstMoment.map(t=>t.variable)),null!=this.accumulatedWeightedInfNorm&&Wa(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}Gh.className="Adamax",wa(Gh);class qh extends Vh{constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Array.isArray(t)?t[n].tensor:t[e];if(null==r)return;const i=Ae.registeredVariables[e];Va(()=>{const t=this.c.mul(r).add(i);i.assign(t)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=Ua(_r(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(0!==(t=await this.extractIterations(t)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}qh.className="SGD",wa(qh);class Kh extends qh{constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=_r(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Ae.registeredVariables[e];if(null==this.accumulations[n]){const t=!1;this.accumulations[n]={originalName:`${e}/momentum`,variable:Va(()=>Dr(r).variable(t))}}const i=this.accumulations[n].variable,s=Array.isArray(t)?t[n].tensor:t[e];null!=s&&Va(()=>{let t;const e=this.m.mul(i).add(s);t=this.useNesterov?this.c.mul(s.add(e.mul(this.m))).add(r):this.c.mul(e).add(r),i.assign(e),r.assign(t)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Wa(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t),this.accumulations=t.map(t=>({originalName:t.name,variable:t.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}Kh.className="Momentum",wa(Kh);class Yh extends Vh{constructor(t,e=.9,n=0,r=null,i=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=Ae.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(t=>t.name):Object.keys(t)).forEach((e,n)=>{const r=Ae.registeredVariables[e];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${e}/rms`,variable:Va(()=>Dr(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${e}/momentum`,variable:Va(()=>Dr(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${e}/mg`,variable:Va(()=>Dr(r).variable(!1))});const i=Array.isArray(t)?t[n].tensor:t[e];if(null==i)return;const s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;Va(()=>{const t=s.mul(this.decay).add(i.square().mul(1-this.decay));if(this.centered){const e=this.accumulatedMeanGrads[n].variable,l=e.mul(this.decay).add(i.mul(1-this.decay)),a=o.mul(this.momentum).add(i.mul(this.learningRate).div(t.sub(l.square().add(this.epsilon)).sqrt()));s.assign(t),e.assign(l),o.assign(a);const u=r.sub(a);r.assign(u)}else{const t=s.mul(this.decay).add(i.square().mul(1-this.decay)),e=o.mul(this.momentum).add(i.mul(this.learningRate).div(t.add(this.epsilon).sqrt()));s.assign(t),o.assign(e);const n=r.sub(e);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Wa(this.accumulatedMeanSquares.map(t=>t.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Wa(this.accumulatedMeanGrads.map(t=>t.variable)),null!=this.accumulatedMoments&&Wa(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const e=this.centered?t.length/3:t.length/2;this.accumulatedMeanSquares=t.slice(0,e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.accumulatedMoments=t.slice(e,2*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*e,3*e).map(t=>({originalName:t.name,variable:t.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}Yh.className="RMSProp",wa(Yh);class Xh{static sgd(t){return new qh(t)}static momentum(t,e,n=!1){return new Kh(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,i=!1){return new Yh(t,e,n,r,i)}static adam(t=.001,e=.9,n=.999,r=null){return new Hh(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new Wh(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,i=0){return new Gh(t,e,n,r,i)}static adagrad(t,e=.1){return new Uh(t,e)}}const Zh={sgd:Xh.sgd,momentum:Xh.momentum,adadelta:Xh.adadelta,adagrad:Xh.adagrad,rmsprop:Xh.rmsprop,adamax:Xh.adamax,adam:Xh.adam},Qh=(()=>"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:t=>t())();function Jh(){return new Promise(t=>Qh(()=>t()))}function td(t,e,n,r=!0){let i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function ed(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function nd(t,e,n,r=!0){const i=[];i.push(r?t[0]/n:t[0]*n);for(let s=1;s<t.length;++s)i.push(s<=e.length?r?e[s-1]*t[s]:t[s]/e[s-1]:t[s]);return i}function rd(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function id(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}const sd=.3275911,od=.254829592,ld=-.284496736,ad=1.421413741,ud=-1.453152027,cd=1.061405429;function hd(...t){Z().getBool("IS_TEST")||console.warn(...t)}function dd(...t){Z().getBool("IS_TEST")||console.log(...t)}function pd(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+`${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function fd(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function gd(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=0;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function md(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let i=2;i<t.length;i+=4)n[Math.floor(i/4)]=t[i],r[Math.floor(i/4)]=t[i+1];return{real:n,imag:r}}function bd(t,e){return{real:t[2*e],imag:t[2*e+1]}}function yd(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function vd(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const s=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(s),r[i]=Math.sin(s)}return{real:n,imag:r}}function _d(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function wd(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();const e=zr(t.shape),r=t.toFloat(),i=n.complex(r,e);return e.dispose(),r.dispose(),i}if(!$t(t.dtype,e))return Ae.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){const r=n.real(t),i=r.cast(e);return r.dispose(),i}if("int32"===e)return n.int(t);if("bool"===e){const e=_r(0,t.dtype),r=n.notEqual(t,e);return e.dispose(),r}throw new Error(`Error in Cast: failed to cast ${t.dtype} to ${e}`)}function xd(t,e){return Ae.makeTensorFromDataId(t.dataId,e,t.dtype)}function Cd(t,e,n){const r=(e-t)/(n-1),i=Qt(n,"float32");i[0]=t;for(let s=1;s<i.length;s++)i[s]=i[s-1]+r;return wr(i,"float32")}function Sd(t,e,n){const r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(e=>{const s=[...i];s[n]=e;const o=t.slice(r,s);return r[n]+=e,o})}function Od(t,e){const n=new Array(t.rank);for(let i=0;i<n.length;i++)n[i]=t.shape[i]*e[i];const r=Nr(n,t.dtype);for(let i=0;i<r.values.length;++i){const e=r.indexToLoc(i),n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=e[r]%t.shape[r];const s=t.locToIndex(n);r.values[i]=t.values[s]}return r.toTensor()}function kd(t,e,n,r,i){const s=e[e.length-1],[o,l]=[t.length/s,s],a=At(n,o*r),u=At("int32",o*r);for(let h=0;h<o;h++){const e=h*l,n=t.subarray(e,e+l),i=[];for(let t=0;t<n.length;t++)i.push({value:n[t],index:t});i.sort((t,e)=>e.value-t.value);const s=h*r,o=a.subarray(s,s+r),c=u.subarray(s,s+r);for(let t=0;t<r;t++)o[t]=i[t].value,c[t]=i[t].index}const c=e.slice();return c[c.length-1]=r,[yr(a,c,n),yr(u,c,"int32")]}const Ed=1e-7,Td=1e-4;class zd{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class Pd{time(t){return Id("time")}read(t){return Id("read")}readSync(t){return Id("readSync")}numDataIds(){return Id("numDataIds")}disposeData(t){return Id("disposeData")}write(t,e,n){return Id("write")}move(t,e,n,r){return Id("move")}memory(){return Id("memory")}floatPrecision(){return Id("floatPrecision")}epsilon(){return 32===this.floatPrecision()?Ed:Td}batchMatMul(t,e,n,r){return Id("batchMatMul")}fusedBatchMatMul({}){return Id("fusedBatchMatMul")}slice(t,e,n){return Id("slice")}stridedSlice(t,e,n,r){return Id("stridedSlice")}unstack(t,e){return Id("unstack")}reverse(t,e){return Id("reverse")}concat(t,e){return Id("concat")}neg(t){return Id("neg")}add(t,e){return Id("add")}addN(t){return Id("addN")}subtract(t,e){return Id("subtract")}multiply(t,e){return Id("multiply")}realDivide(t,e){return Id("realDivide")}floorDiv(t,e){return Id("floorDiv")}sum(t,e){return Id("sum")}prod(t,e){return Id("prod")}unsortedSegmentSum(t,e,n){return Id("unsortedSegmentSum")}argMin(t,e){return Id("argMin")}argMax(t,e){return Id("argMax")}equal(t,e){return Id("equal")}notEqual(t,e){return Id("notEqual")}less(t,e){return Id("less")}lessEqual(t,e){return Id("lessEqual")}greater(t,e){return Id("greater")}greaterEqual(t,e){return Id("greaterEqual")}logicalNot(t){return Id("logicalNot")}logicalAnd(t,e){return Id("logicalAnd")}logicalOr(t,e){return Id("logicalOr")}where(t){return Id("where")}select(t,e,n){return Id("select")}topk(t,e,n){return Id("topk")}min(t,e){return Id("min")}minimum(t,e){return Id("minimum")}mod(t,e){return Id("mod")}max(t,e){return Id("max")}maximum(t,e){return Id("maximum")}all(t,e){return Id("all")}any(t,e){return Id("any")}squaredDifference(t,e){return Id("squaredDifference")}ceil(t){return Id("ceil")}floor(t){return Id("floor")}round(t){return Id("round")}sign(t){return Id("sign")}isNaN(t){return Id("isNaN")}isInf(t){return Id("isInf")}isFinite(t){return Id("isFinite")}pow(t,e){return Id("pow")}exp(t){return Id("exp")}expm1(t){return Id("expm1")}softmax(t,e){return Id("softmax")}log(t){return Id("log")}log1p(t){return Id("log1p")}sqrt(t){return Id("sqrt")}rsqrt(t){return Id("rsqrt")}square(t){return Id("square")}reciprocal(t){return Id("reciprocal")}relu(t){return Id("relu")}relu6(t){return Id("relu6")}prelu(t,e){return Id("prelu")}elu(t){return Id("elu")}eluDer(t,e){return Id("eluDer")}selu(t){return Id("selu")}int(t){return Id("int")}clip(t,e,n){return Id("clip")}abs(t){return Id("abs")}complexAbs(t){return Id("complexAbs")}sigmoid(t){return Id("sigmoid")}softplus(t){return Id("softplus")}sin(t){return Id("sin")}cos(t){return Id("cos")}tan(t){return Id("tan")}asin(t){return Id("asin")}acos(t){return Id("acos")}atan(t){return Id("atan")}atan2(t,e){return Id("atan2")}sinh(t){return Id("sinh")}cosh(t){return Id("cosh")}tanh(t){return Id("tanh")}asinh(t){return Id("asinh")}acosh(t){return Id("acosh")}atanh(t){return Id("atanh")}erf(t){return Id("erf")}step(t,e){return Id("step")}fusedConv2d({}){return Id("fusedConv2d")}conv2d(t,e,n){return Id("conv2d")}conv2dDerInput(t,e,n){return Id("conv2dDerInput")}conv2dDerFilter(t,e,n){return Id("conv2dDerFilter")}fusedDepthwiseConv2D({}){return Id("fusedDepthwiseConv2D")}depthwiseConv2D(t,e,n){return Id("depthwiseConv2D")}depthwiseConv2DDerInput(t,e,n){return Id("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(t,e,n){return Id("depthwiseConv2DDerFilter")}conv3d(t,e,n){return Id("conv3d")}conv3dDerInput(t,e,n){return Id("conv3dDerInput")}conv3dDerFilter(t,e,n){return Id("conv3dDerFilter")}maxPool(t,e){return Id("maxPool")}maxPoolBackprop(t,e,n,r){return Id("maxPoolBackprop")}avgPool(t,e){return Id("avgPool")}avgPoolBackprop(t,e,n){return Id("avgPoolBackprop")}avgPool3d(t,e){return Id("avgPool3d")}avgPool3dBackprop(t,e,n){return Id("avgPool3dBackprop")}maxPool3d(t,e){return Id("maxPool3d")}maxPool3dBackprop(t,e,n,r){return Id("maxPool3dBackprop")}reshape(t,e){return Id("reshape")}cast(t,e){return Id("cast")}tile(t,e){return Id("tile")}pad(t,e,n){return Id("pad")}transpose(t,e){return Id("transpose")}gather(t,e,n){return Id("gather")}gatherND(t,e){return Id("gatherND")}scatterND(t,e,n){return Id("scatterND")}batchToSpaceND(t,e,n){return Id("batchToSpaceND")}spaceToBatchND(t,e,n){return Id("spaceToBatchND")}resizeBilinear(t,e,n,r){return Id("resizeBilinear")}resizeBilinearBackprop(t,e,n){return Id("resizeBilinearBackprop")}resizeNearestNeighbor(t,e,n,r){return Id("resizeNearestNeighbor")}resizeNearestNeighborBackprop(t,e,n){return Id("resizeNearestNeighborBackprop")}batchNorm(t,e,n,r,i,s){return Id("batchNorm")}localResponseNormalization4D(t,e,n,r,i){return Id("localResponseNormalization4D")}LRNGrad(t,e,n,r,i,s,o){return Id("LRNGrad")}multinomial(t,e,n,r){return Id("multinomial")}oneHot(t,e,n,r){return Id("oneHot")}cumsum(t,e,n,r){return Id("cumsum")}nonMaxSuppression(t,e,n,r,i){return Id("nonMaxSuppression")}fft(t){return Id("fft")}ifft(t){return Id("ifft")}complex(t,e){return Id("complex")}real(t){return Id("real")}imag(t){return Id("imag")}cropAndResize(t,e,n,r,i,s){return Id("cropAndResize")}depthToSpace(t,e,n){return Id("depthToSpace")}split(t,e,n){return Id("split")}sparseToDense(t,e,n,r){return Id("sparseToDense")}diag(t){return Id("diag")}fill(t,e,n){return Id("fill")}onesLike(t){return Id("onesLike")}zerosLike(t){return Id("zerosLike")}linspace(t,e,n){return Id("linspace")}dispose(){return Id("dispose")}}function Id(t){throw new Error(`'${t}' not yet implemented or not found in the registry. `+"Did you forget to import the kernel?")}var Md,Dd;ye.prototype.add=function(t){return this.throwIfDisposed(),dr(this,t)},ye.prototype.atan2=function(t){return this.throwIfDisposed(),nu(this,t)},ye.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),ru(this,t,e,n,r)},ye.prototype.batchNorm=function(t,e,n,r,i){return this.throwIfDisposed(),ou(this,t,e,n,r,i)},ye.prototype.broadcastTo=function(t){return this.throwIfDisposed(),hu(this,t)},ye.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Oo(this,t,e)},ye.prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof ye&&(t=[t]),Ar([this,...t],e)},ye.prototype.conv1d=function(t,e,n,r,i,s){return this.throwIfDisposed(),mu(this,t,e,n,r,i,s)},ye.prototype.conv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),Es(this,t,e,n,r,i,s)},ye.prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),bu(this,t,e,n,r,i)},ye.prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),Ds(this,t,e,n)},ye.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),_u(this,t,e)},ye.prototype.depthwiseConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),wu(this,t,e,n,r,i,s)},ye.prototype.depthwiseConv2D=function(t,e,n,r,i,s){return Fa("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),wu(this,t,e,n,r,i,s)},ye.prototype.div=function(t){return this.throwIfDisposed(),Hr(this,t)},ye.prototype.divNoNan=function(t){return this.throwIfDisposed(),Cu(this,t)},ye.prototype.dot=function(t){return this.throwIfDisposed(),Su(this,t)},ye.prototype.elu=function(){return this.throwIfDisposed(),Ou(this)},ye.prototype.equal=function(t){return this.throwIfDisposed(),ku(this,t)},ye.prototype.floorDiv=function(t){return this.throwIfDisposed(),Ur(this,t)},ye.prototype.greater=function(t){return this.throwIfDisposed(),no(this,t)},ye.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Ys(this,t)},ye.prototype.leakyRelu=function(t){return this.throwIfDisposed(),Pu(this,t)},ye.prototype.less=function(t){return this.throwIfDisposed(),Xs(this,t)},ye.prototype.lessEqual=function(t){return this.throwIfDisposed(),ro(this,t)},ye.prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),Iu(this,t,e,n,r)},ye.prototype.matMul=function(t,e,n){return this.throwIfDisposed(),bs(this,t,e,n)},ye.prototype.max=function(t,e){return this.throwIfDisposed(),Mu(this,t,e)},ye.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Du(this,t,e,n,r)},ye.prototype.maximum=function(t){return this.throwIfDisposed(),zu(this,t)},ye.prototype.minimum=function(t){return this.throwIfDisposed(),Ru(this,t)},ye.prototype.mod=function(t){return this.throwIfDisposed(),Fu(this,t)},ye.prototype.mul=function(t){return this.throwIfDisposed(),Gr(this,t)},ye.prototype.notEqual=function(t){return this.throwIfDisposed(),Lu(this,t)},ye.prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),ca(this,t,e,n)},ye.prototype.pad=function(t,e){return this.throwIfDisposed(),Io(this,t,e)},ye.prototype.pool=function(t,e,n,r,i){return this.throwIfDisposed(),Hu(this,t,e,n,r,i)},ye.prototype.pow=function(t){return this.throwIfDisposed(),bo(this,t)},ye.prototype.prelu=function(t){return this.throwIfDisposed(),Gu(this,t)},ye.prototype.relu=function(){return this.throwIfDisposed(),ec(this)},ye.prototype.relu6=function(){return this.throwIfDisposed(),nc(this)},ye.prototype.selu=function(){return this.throwIfDisposed(),rc(this)},ye.prototype.separableConv2d=function(t,e,n,r,i,s){return this.throwIfDisposed(),ic(this,t,e,n,r,i,s)},ye.prototype.split=function(t,e){return this.throwIfDisposed(),xs(this,t,e)},ye.prototype.squaredDifference=function(t){return this.throwIfDisposed(),sc(this,t)},ye.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),vs(this,t,e)},ye.prototype.sub=function(t){return this.throwIfDisposed(),Bs(this,t)},ye.prototype.tile=function(t){return this.throwIfDisposed(),Vs(this,t)},ye.prototype.transpose=function(t){return this.throwIfDisposed(),Ms(this,t)},me=w,function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(Md||(Md={})),function(t){let e;!function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"}(e=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(Dd||(Dd={}));const Ad={};function Nd(t){return Ad[t]}function Rd(t,e,n,r){const i=e.inputParams[t];if(i&&void 0!==i.inputIndexStart){const t=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?t+1:i.inputIndexEnd;if("tensor"===i.type)return Fd(e.inputNames[i.inputIndexStart],n,r);if("tensors"===i.type)return e.inputNames.slice(t,s).map(t=>Fd(t,n,r));const o=Array.prototype.slice.call(Fd(e.inputNames.slice(t)[0],n,r).dataSync());return"number"===i.type?o[0]:o}const s=e.attrParams[t];return s&&s.value}function Fd(t,e,n){const[r,i]=jd(t),s=n.currentContextIds.find(t=>!!e[Ld(r,t)]);return void 0!==s?e[Ld(r,s)][i]:void 0}function $d(t,e){const[n,r]=jd(t);return[Ld(n,e&&e.currentContextId),r]}function Ld(t,e){return e?`${t}-${e}`:t}function jd(t){const e=t.split(":");return 1===e.length?[t,0]:[e[0],Number(e[e.length-1])]}function Bd(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}const Vd=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Wd=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ud=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]}],Hd=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],Gd=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],qd=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Kd=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],Yd=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Xd=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],Zd=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Qd=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Jd=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],tp=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],ep=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],np=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],rp=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}];class ip{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[].concat(...[O,k,E,T,z,P,I,A,D,M,N,R,F,$,L,j].map(t=>t.json));this.opMappers=t.reduce((t,e)=>(t[e.tfOpName]=e,t),{})}transformGraph(t,e={}){const n=[],r=[],i=t.node.reduce((t,e)=>(t[e.name]=this.mapNode(e),e.op.startsWith("Placeholder")&&n.push(t[e.name]),"Const"===e.op&&r.push(t[e.name]),t),{});let s=[];const o=[];let l={},a={};null!=e&&(l=this.mapSignatureEntries(e.inputs),a=this.mapSignatureEntries(e.outputs));const u=Object.keys(i);u.forEach(t=>{const e=i[t];e.inputNames.forEach(t=>{const[n]=$d(t);e.inputs.push(i[n]),i[n].children.push(e)})}),0===Object.keys(a).length?u.forEach(t=>{const e=i[t];0===e.children.length&&o.push(e)}):Object.keys(a).forEach(t=>{const[e]=$d(t),n=i[e];null!=n&&(n.signatureKey=a[t],o.push(n))}),Object.keys(l).length>0?Object.keys(l).forEach(t=>{const[e]=$d(t),n=i[e];n&&(n.signatureKey=l[t],s.push(n))}):s=n;let c={};return null!=t.library&&null!=t.library.function&&(c=t.library.function.reduce((t,e)=>(t[e.signature.name]=this.mapFunction(e),t),{})),{nodes:i,inputs:s,outputs:o,weights:r,placeholders:n,signature:e,functions:c}}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,n)=>(e[t[n].name]=n,e),{})}mapNode(t){const e=Nd(t.op)||this.opMappers[t.op]||{};null==t.attr&&(t.attr={});const n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(t=>t.startsWith("^")?t.substr(1):t),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr};return null!=e.inputs&&(n.inputParams=e.inputs.reduce((t,e)=>(t[e.name]={type:e.type,inputIndexStart:e.start,inputIndexEnd:e.end},t),{})),null!=e.attrs&&(n.attrParams=e.attrs.reduce((e,n)=>{const r=n.type;let i=void 0;switch(n.type){case"string":void 0===(i=op(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=op(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(i=mp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=mp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(i=ap(t.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(i=ap(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(i=gp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=gp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(i=lp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=lp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(i=yp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=yp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(i=fp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=fp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(i=bp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=bp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(i=hp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=hp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(i=dp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=dp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(i=cp(t.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=cp(t.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${t.op}`)}return e[n.name]={value:i,type:r},e},{})),n}mapFunction(t){const e=t.nodeDef,n=[];let r={};null!=e&&(r=e.reduce((t,e)=>(t[e.name]=this.mapNode(e),"Const"===e.op&&n.push(t[e.name]),t),{}));const i=[],s=[];t.signature.inputArg.forEach(t=>{const[e]=$d(t.name),n={name:e,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:up(t.type),type:"dtype"}},children:[]};n.signatureKey=t.name,i.push(n),r[e]=n}),Object.keys(r).forEach(t=>{const e=r[t];e.inputNames.forEach(t=>{const[n]=$d(t);e.inputs.push(r[n]),r[n].children.push(e)})});const o=t.ret;t.signature.outputArg.forEach(t=>{const[e,n]=$d(o[t.name]),i=r[e];null!=i&&(i.defaultOutput=n,s.push(i))});const l=this.mapArgsToSignature(t);return{nodes:r,inputs:i,outputs:s,weights:n,placeholders:[],signature:l}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((t,e)=>(t[e.name]=this.mapArgToTensorInfo(e),t),{}),outputs:t.signature.outputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e),{})}}mapArgToTensorInfo(t,e){let n=t.name;return null!=e&&(n=e[n]),{name:n,dtype:t.type}}}function sp(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):function(t){const e=Z().global;if(void 0!==e.atob)return e.atob(t);if("undefined"!=typeof Buffer)return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(t);return e?n:n.toLowerCase()}function op(t,e,n,r=!1){const i=t[e];return null!=i?sp(i.s,r):n}function lp(t,e,n){const r=t[e];return r?r.b:n}function ap(t,e,n){const r=t[e]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function up(t){switch("string"==typeof t&&(t=Md[t]),t){case Md.DT_FLOAT:return"float32";case Md.DT_INT32:case Md.DT_INT64:case Md.DT_INT8:case Md.DT_UINT8:return"int32";case Md.DT_BOOL:return"bool";case Md.DT_DOUBLE:return"float32";case Md.DT_STRING:return"string";default:return null}}function cp(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function hp(t,e,n){const r=t[e];return r&&r.type?up(r.type):n}function dp(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(t=>up(t)):n}function pp(t){if(!t.unknownRank)return null!=t.dim?t.dim.map(t=>"number"==typeof t.size?t.size:parseInt(t.size,10)):[]}function fp(t,e,n){const r=t[e];return r&&r.shape?pp(r.shape):n}function gp(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(t=>"number"==typeof t?t:parseInt(t,10)):n}function mp(t,e,n,r=!1){const i=t[e];return i&&i.list&&i.list.s?i.list.s.map(t=>sp(t,r)):n}function bp(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(t=>pp(t)):n}function yp(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}class vp{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(t=>this.getInput(t)),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((t,e)=>(t[e]=this.getAttr(e),t),{}))}getInput(t){return Fd(t,this.tensorMap,this.context)}getAttr(t,e){const n=this.node.rawAttrs[t];if(null!=n.tensor)return Fd(t,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return ap(this.node.rawAttrs,t,e);if(null!=n.s)return op(this.node.rawAttrs,t,e);if(null!=n.b)return lp(this.node.rawAttrs,t,e);if(null!=n.shape)return fp(this.node.rawAttrs,t,e);if(null!=n.type)return hp(this.node.rawAttrs,t,e);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return gp(this.node.rawAttrs,t,e);if(null!=n.list.s)return mp(this.node.rawAttrs,t,e);if(null!=n.list.shape)return bp(this.node.rawAttrs,t,e);if(null!=n.list.b)return yp(this.node.rawAttrs,t,e);if(null!=n.list.type)return dp(this.node.rawAttrs,t,e)}return e}}const _p=(t,e,n)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[dr(Rd("a",t,e,n),Rd("b",t,e,n))];case"AddN":return[eu(Rd("tensors",t,e,n))];case"FloorMod":case"Mod":return[Fu(Rd("a",t,e,n),Rd("b",t,e,n))];case"Mul":return[Gr(Rd("a",t,e,n),Rd("b",t,e,n))];case"RealDiv":case"Div":return[Hr(Rd("a",t,e,n),Rd("b",t,e,n))];case"DivNoNan":return[Cu(Rd("a",t,e,n),Rd("b",t,e,n))];case"FloorDiv":return[Ur(Rd("a",t,e,n),Rd("b",t,e,n))];case"Sub":return[Bs(Rd("a",t,e,n),Rd("b",t,e,n))];case"Minimum":return[Ru(Rd("a",t,e,n),Rd("b",t,e,n))];case"Maximum":return[zu(Rd("a",t,e,n),Rd("b",t,e,n))];case"Pow":return[bo(Rd("a",t,e,n),Rd("b",t,e,n))];case"SquaredDifference":return[sc(Rd("a",t,e,n),Rd("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},wp=(t,e,n)=>{switch(t.op){case"Abs":case"ComplexAbs":return[_i(Rd("x",t,e,n))];case"Acos":return[wi(Rd("x",t,e,n))];case"Acosh":return[xi(Rd("x",t,e,n))];case"Asin":return[Ci(Rd("x",t,e,n))];case"Asinh":return[Si(Rd("x",t,e,n))];case"Atan":return[Oi(Rd("x",t,e,n))];case"Atan2":return[nu(Rd("x",t,e,n),Rd("y",t,e,n))];case"Atanh":return[ki(Rd("x",t,e,n))];case"Ceil":return[Ei(Rd("x",t,e,n))];case"Complex":return[gr(Rd("real",t,e,n),Rd("imag",t,e,n))];case"Cos":return[zi(Rd("x",t,e,n))];case"Cosh":return[Pi(Rd("x",t,e,n))];case"Elu":return[Ou(Rd("x",t,e,n))];case"Erf":return[Ii(Rd("x",t,e,n))];case"Exp":return[Mi(Rd("x",t,e,n))];case"Expm1":return[Di(Rd("x",t,e,n))];case"Floor":return[Ai(Rd("x",t,e,n))];case"Log":return[Ni(Rd("x",t,e,n))];case"Log1p":return[Ri(Rd("x",t,e,n))];case"Imag":return[mr(Rd("x",t,e,n))];case"Neg":return[$i(Rd("x",t,e,n))];case"Reciprocal":return[Li(Rd("x",t,e,n))];case"Real":return[br(Rd("x",t,e,n))];case"Relu":return[ec(Rd("x",t,e,n))];case"Round":return[ji(Rd("x",t,e,n))];case"Selu":return[rc(Rd("x",t,e,n))];case"Sigmoid":return[Vi(Rd("x",t,e,n))];case"Sin":return[qi(Rd("x",t,e,n))];case"Sign":return[Wi(Rd("x",t,e,n))];case"Sinh":return[Ki(Rd("x",t,e,n))];case"Softplus":return[Yi(Rd("x",t,e,n))];case"Sqrt":return[Xi(Rd("x",t,e,n))];case"Square":return[vi(Rd("x",t,e,n))];case"Tanh":return[Ji(Rd("x",t,e,n))];case"Tan":return[Qi(Rd("x",t,e,n))];case"Relu6":case"ClipByValue":return[Ti(Rd("x",t,e,n),Rd("clipValueMin",t,e,n),Rd("clipValueMax",t,e,n))];case"Rsqrt":return[Bi(Fd(t.inputNames[0],e,n))];case"Prod":return[yi(Rd("x",t,e,n),Rd("axes",t,e,n))];case"LeakyRelu":return[Pu(Rd("x",t,e,n),Rd("alpha",t,e,n))];case"Prelu":return[Gu(Rd("x",t,e,n),Rd("alpha",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function xp(t,e,n=""){r.assert(function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0}(t,e),()=>n+` Shapes ${t} and ${e} must match`)}class Cp{constructor(t,e,n,r,i,s,o){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=s,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.id=Cp.nextId++}get closed(){return this.closed_}clearAndClose(){this.tensors.forEach(t=>t.tensor.dispose()),this.tensors=[],this.closed_=!0}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read `+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(t=>this.read(t))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},\n          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=e.shape),xp(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n&&n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n&&n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,`+`because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((t,n)=>this.write(t,e[n]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let e=0;e<this.size();e++)t.push(e)}if(0===t.length)return yr([],[0].concat(this.elementShape));const n=this.readMany(t);return xp(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),Br(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(0===this.size())return yr([],[0].concat(this.elementShape));const e=[];for(let r=0;r<this.size();r++)e.push(r);const n=this.readMany(e);return xp(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Ar(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,Vr(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0;const r=t.map(t=>n+=t);if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), `+"and the TensorArray is not marked as dynamically resizeable");const i=0===n?0:e.size/n,s=[];Va(()=>{e=e.reshape([1,n,i]);for(let n=0;n<t.length;++n)s[n]=Wo(e,[0,0===n?0:r[n-1],0],[1,t[n],i]).reshape(this.elementShape);return s});const o=[];for(let l=0;l<t.length;l++)o[l]=l;this.writeMany(o,s)}}Cp.nextId=0;const Sp=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=Rd("thenBranch",t,e,n),i=Rd("elseBranch",t,e,n),s=Rd("cond",t,e,n),o=Rd("args",t,e,n);return(await s.data())[0]?n.functionMap[r].executeFunctionAsync(o):n.functionMap[i].executeFunctionAsync(o)}case"While":case"StatelessWhile":{const r=Rd("body",t,e,n),i=Rd("cond",t,e,n),s=Rd("args",t,e,n),o=(await n.functionMap[i].executeFunctionAsync(s))[0];let l=await o.data(),a=s;for(;l[0];){a=await n.functionMap[r].executeFunctionAsync(a);const t=(await n.functionMap[i].executeFunctionAsync(a))[0];l=await t.data()}return a}case"LoopCond":return[Rd("pred",t,e,n).clone()];case"Switch":{const r=Rd("pred",t,e,n),i=Rd("data",t,e,n);return(await r.data())[0]?[void 0,i.clone()]:[i.clone(),void 0]}case"Merge":const r=t.inputNames.find(t=>void 0!==Fd(t,e,n));return r?[Fd(r,e,n).clone()]:void 0;case"Enter":const i=Rd("frameName",t,e,n),s=Rd("tensor",t,e,n);return n.enterFrame(i),[s.clone()];case"Exit":const o=Rd("tensor",t,e,n);return n.exitFrame(),[o.clone()];case"NextIteration":const l=Rd("tensor",t,e,n);return n.nextIteration(),[l.clone()];case"TensorArrayV3":const a=Rd("size",t,e,n),u=Rd("dtype",t,e,n),c=Rd("elementShape",t,e,n),h=Rd("dynamicSize",t,e,n),d=Rd("clearAfterRead",t,e,n),p=Rd("identicalElementShapes",t,e,n),f=Rd("name",t,e,n),g=new Cp(f,u,a,c,p,h,d);return n.addTensorArray(g),[_r(g.id),_r(1)];case"TensorArrayWriteV3":const m=Rd("tensorArrayId",t,e,n),b=Rd("index",t,e,n),y=Rd("tensor",t,e,n);return n.getTensorArray(m).write(b,y),[_r(1)];case"TensorArrayReadV3":const v=Rd("tensorArrayId",t,e,n),_=Rd("index",t,e,n);return[n.getTensorArray(v).read(_)];case"TensorArrayGatherV3":const w=Rd("tensorArrayId",t,e,n),x=Rd("indices",t,e,n),C=Rd("dtype",t,e,n);return[n.getTensorArray(w).gather(x,C)];case"TensorArrayScatterV3":const S=Rd("tensorArrayId",t,e,n),O=Rd("indices",t,e,n),k=Rd("tensor",t,e,n);return n.getTensorArray(S).scatter(O,k),[_r(1)];case"TensorArrayConcatV3":const E=Rd("tensorArrayId",t,e,n),T=n.getTensorArray(E),z=Rd("dtype",t,e,n);return[T.concat(z)];case"TensorArraySplitV3":const P=Rd("tensorArrayId",t,e,n),I=Rd("tensor",t,e,n),M=Rd("lengths",t,e,n);return n.getTensorArray(P).split(M,I),[_r(1)];case"TensorArraySizeV3":const D=Rd("tensorArrayId",t,e,n);return[_r(n.getTensorArray(D).size(),"int32")];case"TensorArrayCloseV3":const A=Rd("tensorArrayId",t,e,n);return n.getTensorArray(A).clearAndClose(),[_r(0)];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Op=(t,e,n)=>{switch(t.op){case"Conv1D":{const r=Rd("stride",t,e,n),i=Rd("pad",t,e,n),s=Rd("dataFormat",t,e,n).toUpperCase(),o=Rd("dilation",t,e,n);return[mu(Rd("x",t,e,n),Rd("filter",t,e,n),r,i,s,o)]}case"Conv2D":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("dataFormat",t,e,n).toUpperCase(),o=Rd("dilations",t,e,n);return[Es(Rd("x",t,e,n),Rd("filter",t,e,n),[r[1],r[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":case"FusedDepthwiseConv2dNative":{const[r,i]=Rd("fusedOps",t,e,n),s="biasadd"===r,o="prelu"===i,l="fusedbatchnorm"===r,a=Rd("numArgs",t,e,n);if(s){if(o&&2!==a)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==a)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");const u=Rd("strides",t,e,n),c=Rd("pad",t,e,n),h=Rd("dataFormat",t,e,n).toUpperCase(),d=Rd("dilations",t,e,n),[p,f]=Rd("args",t,e,n);return[("_FusedConv2D"===t.op?_.conv2d:_.depthwiseConv2d)({x:Rd("x",t,e,n),filter:Rd("filter",t,e,n),strides:[u[1],u[2]],pad:c,dataFormat:h,dilations:[d[1],d[2]],bias:p,activation:i,preluActivationWeights:f})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const r=Rd("outputShape",t,e,n),i=Rd("strides",t,e,n),s=Rd("pad",t,e,n);return[bu(Rd("x",t,e,n),Rd("filter",t,e,n),r,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("dilations",t,e,n),o=Rd("dataFormat",t,e,n).toUpperCase();return[wu(Rd("input",t,e,n),Rd("filter",t,e,n),[r[1],r[2]],i,o,[s[1],s[2]])]}case"Conv3D":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("dataFormat",t,e,n).toUpperCase(),o=Rd("dilations",t,e,n);return[yu(Rd("x",t,e,n),Rd("filter",t,e,n),[r[1],r[2],r[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("kernelSize",t,e,n);return[ru(Rd("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPool":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("kernelSize",t,e,n);return[Du(Rd("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i)]}case"MaxPoolWithArgmax":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("kernelSize",t,e,n),o=Rd("includeBatchInIndex",t,e,n),{result:l,indexes:a}=Nu(Rd("x",t,e,n),[s[1],s[2]],[r[1],r[2]],i,o);return[l,a]}case"AvgPool3D":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("kernelSize",t,e,n);return[iu(Rd("x",t,e,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}case"MaxPool3D":{const r=Rd("strides",t,e,n),i=Rd("pad",t,e,n),s=Rd("kernelSize",t,e,n);return[Au(Rd("x",t,e,n),[s[1],s[2],s[3]],[r[1],r[2],r[3]],i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},kp=(t,e,n)=>{switch(t.op){case"Fill":{const r=Rd("shape",t,e,n),i=Rd("dtype",t,e,n);return[Tu(r,Rd("value",t,e,n),i)]}case"LinSpace":return[Pr(Rd("start",t,e,n),Rd("stop",t,e,n),Rd("num",t,e,n))];case"Multinomial":{const r=Rd("logits",t,e,n),i=Rd("numSamples",t,e,n),s=Rd("seed",t,e,n);return[$u(r,i,s)]}case"OneHot":{const r=Rd("indices",t,e,n),i=Rd("depth",t,e,n),s=Rd("onValue",t,e,n),o=Rd("offValue",t,e,n);return[ca(r,i,s,o)]}case"Ones":return[Tr(Rd("shape",t,e,n),Rd("dtype",t,e,n))];case"OnesLike":return[Mr(Rd("x",t,e,n))];case"RandomUniform":return[tc(Rd("shape",t,e,n),Rd("minval",t,e,n),Rd("maxval",t,e,n),Rd("dtype",t,e,n))];case"Range":return[Ir(Rd("start",t,e,n),Rd("stop",t,e,n),Rd("step",t,e,n),Rd("dtype",t,e,n))];case"TruncatedNormal":{const r=Rd("shape",t,e,n),i=Rd("mean",t,e,n),s=Rd("stdDev",t,e,n),o=Rd("seed",t,e,n);return[oc(r,i,s,Rd("dtype",t,e,n),o)]}case"Zeros":return[zr(Rd("shape",t,e,n),Rd("dtype",t,e,n))];case"ZerosLike":return[Dr(Rd("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Ep=async(t,e,n)=>{switch(t.op){case"NonMaxSuppressionV5":case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const r=Rd("boxes",t,e,n),i=Rd("scores",t,e,n),s=Rd("maxOutputSize",t,e,n),o=Rd("iouThreshold",t,e,n),l=Rd("scoreThreshold",t,e,n);if("NonMaxSuppressionV5"===t.op){const a=Rd("softNmsSigma",t,e,n),u=await v.nonMaxSuppressionWithScoreAsync(r,i,s,o,l,a);return[u.selectedIndices,u.selectedScores]}return[await v.nonMaxSuppressionAsync(r,i,s,o,l)]}case"Where":{const r=Rd("condition",t,e,n).asType("bool"),i=[await mo(r)];return r.dispose(),i}case"ListDiff":return Wr(Rd("x",t,e,n),Rd("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}},Tp=(t,e,n)=>{switch(t.op){case"TopKV2":{const r=Rd("x",t,e,n),i=Rd("k",t,e,n),s=Rd("sorted",t,e,n),o=Uc(r,i,s);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},zp=(t,e,n)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const r=Rd("default",t,e,n);return[Fd(t.name,e,n)||r];case"Placeholder":return[Fd(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[Rd("x",t,e,n).clone()];case"IdentityN":return Rd("x",t,e,n).map(t=>t.clone());case"Snapshot":return[Rd("x",t,e,n).clone()];case"Shape":return[wr(Rd("x",t,e,n).shape,"int32")];case"ShapeN":return Rd("x",t,e,n).map(t=>wr(t.shape));case"Size":return[_r(Rd("x",t,e,n).size,"int32")];case"Rank":return[_r(Rd("x",t,e,n).rank,"int32")];case"NoOp":return[_r(1)];case"Print":const i=Rd("x",t,e,n),s=Rd("data",t,e,n),o=Rd("message",t,e,n),l=Rd("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let t=0;t<s.length;t++)console.log(Array.prototype.slice.call(s[t].dataSync()).slice(0,l));return[i];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Pp=(t,e,n)=>{switch(t.op){case"ResizeBilinear":{const r=Rd("images",t,e,n),i=Rd("size",t,e,n),s=Rd("alignCorners",t,e,n);return[v.resizeBilinear(r,[i[0],i[1]],s)]}case"ResizeNearestNeighbor":{const r=Rd("images",t,e,n),i=Rd("size",t,e,n),s=Rd("alignCorners",t,e,n);return[v.resizeNearestNeighbor(r,[i[0],i[1]],s)]}case"CropAndResize":{const r=Rd("image",t,e,n),i=Rd("boxes",t,e,n),s=Rd("boxInd",t,e,n),o=Rd("cropSize",t,e,n),l=Rd("method",t,e,n),a=Rd("extrapolationValue",t,e,n);return[v.cropAndResize(r,i,s,o,l,a)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Ip=(t,e,n)=>{switch(t.op){case"Equal":return[ku(Rd("a",t,e,n),Rd("b",t,e,n))];case"NotEqual":return[Lu(Rd("a",t,e,n),Rd("b",t,e,n))];case"Greater":return[no(Rd("a",t,e,n),Rd("b",t,e,n))];case"GreaterEqual":return[Ys(Rd("a",t,e,n),Rd("b",t,e,n))];case"Less":return[Xs(Rd("a",t,e,n),Rd("b",t,e,n))];case"LessEqual":return[ro(Rd("a",t,e,n),Rd("b",t,e,n))];case"LogicalAnd":return[co(Rd("a",t,e,n),Rd("b",t,e,n))];case"LogicalNot":return[ho(Rd("a",t,e,n))];case"LogicalOr":return[po(Rd("a",t,e,n),Rd("b",t,e,n))];case"Select":case"SelectV2":return[go(Rd("condition",t,e,n),Rd("a",t,e,n),Rd("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Mp=(t,e,n)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[bs(Rd("a",t,e,n),Rd("b",t,e,n),Rd("transposeA",t,e,n),Rd("transposeB",t,e,n))];case"Transpose":return[Ms(Rd("x",t,e,n),Rd("perm",t,e,n))];case"_FusedMatMul":const[r,i]=Rd("fusedOps",t,e,n),s="biasadd"===r,o="prelu"===i,l=Rd("numArgs",t,e,n);if(s){if(o&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[a,u]=Rd("args",t,e,n);return[_.matMul({a:Rd("a",t,e,n),b:Rd("b",t,e,n),transposeA:Rd("transposeA",t,e,n),transposeB:Rd("transposeB",t,e,n),bias:a,activation:i,preluActivationWeights:u})];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Dp=(t,e,n)=>{switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[ou(Rd("x",t,e,n),Rd("mean",t,e,n),Rd("variance",t,e,n),Rd("offset",t,e,n),Rd("scale",t,e,n),Rd("epsilon",t,e,n))];case"LRN":return[Iu(Rd("x",t,e,n),Rd("radius",t,e,n),Rd("bias",t,e,n),Rd("alpha",t,e,n),Rd("beta",t,e,n))];case"Softmax":return[Fc(Rd("x",t,e,n))];case"LogSoftmax":return[$c(Rd("x",t,e,n))];case"SparseToDense":return[Xc(Rd("sparseIndices",t,e,n),Rd("outputShape",t,e,n),Rd("sparseValues",t,e,n),Rd("defaultValue",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Ap=(t,e,n)=>{switch(t.op){case"Max":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[Mu(Rd("x",t,e,n),r,i)]}case"Mean":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[fi(Rd("x",t,e,n),r,i)]}case"Min":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[gi(Rd("x",t,e,n),r,i)]}case"Sum":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[bi(Rd("x",t,e,n),r,i)]}case"All":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[ui(Rd("x",t,e,n),r,i)]}case"Any":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[ci(Rd("x",t,e,n),r,i)]}case"ArgMax":{const r=Rd("axis",t,e,n);return[hi(Rd("x",t,e,n),r)]}case"ArgMin":{const r=Rd("axis",t,e,n);return[di(Rd("x",t,e,n),r)]}case"Prod":{const r=Rd("axis",t,e,n),i=Rd("keepDims",t,e,n);return[yi(Rd("x",t,e,n),r,i)]}case"Cumsum":{const r=Rd("axis",t,e,n),i=Rd("exclusive",t,e,n),s=Rd("reverse",t,e,n);return[Ds(Rd("x",t,e,n),r,i,s)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Np=(t,e,n)=>{switch(t.op){case"ConcatV2":case"Concat":{const r=Rd("n",t,e,n),i=Rd("axis",t,e,n);let s=Rd("tensors",t,e,n);return s=s.slice(0,r),[Ar(s,i)]}case"GatherV2":case"Gather":{const r=Rd("axis",t,e,n),i=Rd("x",t,e,n),s=Rd("indices",t,e,n);return[fc(i,s.asType("int32"),r)]}case"ReverseV2":case"Reverse":{const r=Rd("axis",t,e,n),i=Rd("x",t,e,n);return[bc(i,r)]}case"Slice":{const r=Rd("begin",t,e,n),i=Rd("size",t,e,n);return[Wo(Rd("x",t,e,n),r,i)]}case"StridedSlice":{const r=Rd("begin",t,e,n),i=Rd("end",t,e,n),s=Rd("strides",t,e,n),o=Rd("beginMask",t,e,n),l=Rd("endMask",t,e,n),a=Rd("ellipsisMask",t,e,n),u=Rd("newAxisMask",t,e,n),c=Rd("shrinkAxisMask",t,e,n),h=Rd("x",t,e,n);if(1===r.length&&h.shape.length>1)for(let t=1;t<h.shape.length;t++)r.push(0),i.push(h.shape[t]),s.push(s[0]);return[Wc(h,r,i,s,o,l,a,u,c)]}case"Pack":return Va(()=>{const i=Rd("axis",t,e,n),s=Rd("tensors",t,e,n),o=s[0].shape,l=s[0].squeeze().shape,a=s.map(t=>{const e=r.arraysEqual(t.shape,o);if(!e&&!r.arraysEqual(t.squeeze().shape,l))throw new Error("the input tensors shape does not match");return e?t:t.reshape(o)});return[Br(a,i)]});case"Unpack":return Va(()=>{const r=Rd("axis",t,e,n),i=Rd("tensor",t,e,n);return Vr(i,r)});case"Tile":{const r=Rd("reps",t,e,n);return[Vs(Rd("x",t,e,n),r)]}case"Split":case"SplitV":{const r=Rd("axis",t,e,n),i=Rd("numOrSizeSplits",t,e,n);return xs(Rd("x",t,e,n),i,r)}case"ScatterNd":{const r=Rd("indices",t,e,n),i=Rd("values",t,e,n),s=Rd("shape",t,e,n);return[Hc(r,i,s)]}case"GatherNd":{const r=Rd("x",t,e,n),i=Rd("indices",t,e,n);return[Zc(r,i)]}case"SparseToDense":{const r=Rd("sparseIndices",t,e,n),i=Rd("outputShape",t,e,n),s=Rd("sparseValues",t,e,n),o=Rd("defaultValue",t,e,n);return[Xc(r,s,i,s.dtype===o.dtype?o:o.asType(s.dtype))]}default:throw TypeError(`Node type ${t.op} is not implemented`)}},Rp=(t,e,n)=>{switch(t.op){case"FFT":return[Gc(Rd("x",t,e,n))];case"IFFT":return[qc(Rd("x",t,e,n))];case"RFFT":return[Kc(Rd("x",t,e,n))];case"IRFFT":return[Yc(Rd("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}},Fp=(t,e,n)=>{switch(t.op){case"Cast":return[Fr(Rd("x",t,e,n),Rd("dtype",t,e,n))];case"ExpandDims":{const r=Rd("axis",t,e,n);return[$r(Rd("x",t,e,n),r)]}case"Squeeze":{const r=Rd("axis",t,e,n);return[jr(Rd("x",t,e,n),r)]}case"Reshape":return[Lr(Rd("x",t,e,n),Rd("shape",t,e,n))];case"PadV2":case"Pad":return[Io(Rd("x",t,e,n),Bd(Rd("padding",t,e,n),2),Rd("constantValue",t,e,n))];case"SpaceToBatchND":{const r=Rd("blockShape",t,e,n),i=Bd(Rd("paddings",t,e,n),2);return[vs(Rd("x",t,e,n),r,i)]}case"BatchToSpaceND":{const r=Rd("blockShape",t,e,n),i=Bd(Rd("crops",t,e,n),2);return[Oo(Rd("x",t,e,n),r,i)]}case"DepthToSpace":{const r=Rd("blockSize",t,e,n),i=Rd("dataFormat",t,e,n).toUpperCase();return[_u(Rd("x",t,e,n),r,i)]}case"BroadcastTo":return[hu(Rd("x",t,e,n),Rd("shape",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};function $p(t,e,n){const r=((t,e,n)=>{switch(t.category){case"arithmetic":return Va(()=>_p(t,e,n));case"basic_math":return Va(()=>wp(t,e,n));case"control":return Sp(t,e,n);case"convolution":return Va(()=>Op(t,e,n));case"creation":return Va(()=>kp(t,e,n));case"dynamic":return Ep(t,e,n);case"evaluation":return Va(()=>Tp(t,e,n));case"image":return Va(()=>Pp(t,e,n));case"graph":return Va(()=>zp(t,e,n));case"logical":return Va(()=>Ip(t,e,n));case"matrices":return Va(()=>Mp(t,e,n));case"normalization":return Va(()=>Dp(t,e,n));case"reduction":return Va(()=>Ap(t,e,n));case"slice_join":return Va(()=>Np(t,e,n));case"spectral":return Va(()=>Rp(t,e,n));case"transformation":return Va(()=>Fp(t,e,n));case"custom":const r=Nd(t.op);if(r&&r.customExecutor)return r.customExecutor(new vp(t,e,n));throw TypeError(`Custom op ${t.op} is not registered.`);default:throw TypeError(`Unknown op '${t.op}'. File an issue at `+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}})(t,e,n);return r instanceof Promise?r.then(t=>[].concat(t)):[].concat(r)}class Lp{constructor(t,e,n={}){this.weightMap=t,this.tensorArrayMap=e,this.functionMap=n,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let e=0;e<this.contexts.length-1;e++){const n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(t=>0===t.id&&0===t.iterationId?"":`${t.frameName}-${t.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}}function jp(t,e,n){const r=new Set,i=[];let s=null,o=null;const l=new Set,a=Object.keys(t).map(t=>jd(t)[0]),u=[...e];for(;u.length>0;){const t=u.pop();(Wp(t)||Up(t))&&null==s&&(o=(s=t).children.map(t=>t.name).filter(t=>r.has(t))),r.add(t.name),null==n[t.name]&&-1===a.indexOf(t.name)&&(0!==t.inputs.length?t.inputs.forEach(t=>{l.has(t.name)||(l.add(t.name),u.push(t))}):i.push(t.name))}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:s,syncInputs:o}}const Bp=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile"],Vp=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"];function Wp(t){return Bp.indexOf(t.op)>=0}function Up(t){return Vp.indexOf(t.op)>=0}class Hp{constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(e=>{this._functionExecutorMap[e]=new Hp(t.functions[e],this)})}get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const e=Object.keys(t).map(e=>t[e].map(t=>t.id));this._weightIds=[].concat(...e),this._weightMap=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}getCompilationKey(t,e){const n=t.map(t=>t.name).sort(),r=e.map(t=>t.name).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}compile(t,e){const n=jp(t,e,this.weightMap),{missingInputs:r,dynamicNode:i,syncInputs:s}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has `+`the dynamic op '${i.op}'. Please use `+"model.executeAsync() instead. Alternatively, to avoid the "+`dynamic ops, specify the inputs [${s}]`);if(r.length>0){const n=e.map(t=>t.name),i=Object.keys(t);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs `+`[${i}]. Missing the following inputs: [${r}]`)}return function(t,e,n){const{usedNodes:r,inputs:i}=n,s=[];Object.keys(i).map(t=>jd(t)[0]).map(e=>t.nodes[e]).forEach(t=>{r.has(t.name)&&s.push(t)}),t.weights.forEach(t=>{r.has(t.name)&&s.push(t)});const o=new Set,l=[];for(;s.length>0;){const t=s.pop();o.add(t.name),e[t.name]||l.push(t),t.children.forEach(t=>{!o.has(t.name)&&r.has(t.name)&&t.inputs.every(t=>o.has(t.name))&&s.push(t)})}return l}(this.graph,this.weightMap,n)}execute(t,e){t=this.mapInputs(t);const n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=n.map(t=>this.graph.nodes[jd(t)[0]]),i=e.map(t=>this.graph.nodes[jd(t)[0]]),s=this.getCompilationKey(r,i);let o=this.compiledMap.get(s);null==o&&(o=this.compile(t,i),this.compiledMap.set(s,o));const l={};return Va(()=>{const n=new Lp(this.weightMap,l,this.functionExecutorMap),r=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,i]=jd(e),s=[];s[i]=t[e],r[n]=s});const i=this.getFrozenTensorIds(r),s={};for(let t=0;t<o.length;t++){const l=o[t];if(!r[l.name]){const t=$p(l,r,n);if(t instanceof Promise)throw new Error(`The execution of the op '${l.op}' returned a promise. `+"Please use model.executeAsync() instead.");r[l.name]=t,this.checkTensorForDisposal(l.name,l,r,n,i,e,s)}}return e.map(t=>Fd(t,r,n))})}getFrozenTensorIds(t){const e=[].concat.apply([],Object.keys(t).map(e=>t[e]).map(t=>t.map(t=>t.id)));return new Set(e)}checkTensorForDisposal(t,e,n,r,i,s,o){"control"!==e.category&&-1===s.indexOf(t)&&(n[t].forEach(t=>{null!=t&&(o[t.id]=(o[t.id]||0)+e.children.length)}),e.inputs.forEach(t=>{if("control"!==t.category){const e=function(e,r,i){return n[Ld(t.name,i.currentContextId)]}(0,0,r);null!=e&&e.forEach(t=>{if(t&&!i.has(t.id)){const e=o[t.id];1===e?(t.dispose(),delete o[t.id]):null!=e&&o[t.id]--}})}}))}async executeAsync(t,e,n=!1){t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);const r=new Lp(this.weightMap,{},this.functionExecutorMap),i=await this.executeWithControlFlow(t,r,e,n),s=e.map(t=>Fd(t,i,r)),o=new Set(s.map(t=>t.id)),l=new Set(Object.keys(t).map(e=>t[e].id));return Object.keys(i).forEach(t=>{i[t].forEach(t=>{!t||t.isDisposed||o.has(t.id)||l.has(t.id)||-1!==this.weightIds.indexOf(t.id)||t.dispose()})}),s}async executeFunctionAsync(t){const e=t.reduce((t,e,n)=>(t[this.inputs[n].name]=e,t),{});return this.executeAsync(e,this.outputNodes,!0)}async executeWithControlFlow(t,e,n,r){const i=Object.keys(t),s=i.map(t=>this.graph.nodes[jd(t)[0]]),o=n.map(t=>this.graph.nodes[jd(t)[0]]),{usedNodes:l,missingInputs:a,dynamicNode:u,syncInputs:c}=jp(t,o,this.weightMap),h=[...s,...this.graph.weights].map(t=>({node:t,contexts:e.currentContext})),d=Object.assign({},this.weightMap);Object.keys(t).forEach(e=>{const[n,r]=jd(e),i=[];i[r]=t[e],d[n]=i});const p={},f=this.getFrozenTensorIds(d),g={};for(;h.length>0;){const t=this.processStack(s,h,e,d,g,f,n,p,l);await Promise.all(t)}null!=u||r||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const m=o.filter(t=>!Wp(t)&&!Fd(t.name,d,e)).map(t=>t.name);if(m.length>0){let t="";throw null!=u&&(t="Alternatively, to avoid the dynamic ops, use model.execute() "+`and specify the inputs [${c}]`),new Error(`Cannot compute the outputs [${m}] from the provided `+`inputs [${i}]. Consider providing the following inputs: `+`[${a}]. ${t}`)}return d}processStack(t,e,n,r,i,s,o,l,a){const u=[];for(;e.length>0;){const c=e.pop();n.currentContext=c.contexts;let h="";if("Enter"===c.node.op&&Rd("isConstant",c.node,r,n)&&([h]=$d(c.node.name,n)),-1===t.indexOf(c.node)){const t=$p(c.node,r,n);h||([h]=$d(c.node.name,n));const d=n.currentContext;t instanceof Promise?u.push(t.then(t=>(r[h]=t,n.currentContext=d,this.checkTensorForDisposal(h,c.node,r,n,s,o,l),this.processChildNodes(c.node,e,n,r,i,a),t))):(r[h]=t,this.checkTensorForDisposal(h,c.node,r,n,s,o,l),this.processChildNodes(c.node,e,n,r,i,a))}else this.processChildNodes(c.node,e,n,r,i,a)}return u}processChildNodes(t,e,n,r,i,s){t.children.forEach(t=>{const[o]=$d(t.name,n);!i[o]&&s.has(t.name)&&("Merge"===t.op?t.inputNames.some(t=>!!Fd(t,r,n))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(t=>!!Fd(t,r,n))&&(i[o]=!0,e.push({contexts:n.currentContext,node:t})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(t=>t.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{const n=t[e],[i]=jd(e),s=this.graph.nodes[i];if(s.attrParams.shape&&s.attrParams.shape.value){const t=s.attrParams.shape.value,e=t.length===n.shape.length&&n.shape.every((e,n)=>-1===t[n]||t[n]===e);r.assert(e,()=>`The shape of dict['${s.name}'] provided in `+`model.execute(dict) must be [${t}], but was `+`[${n.shape}]`)}s.attrParams.dtype&&s.attrParams.dtype.value&&r.assert(n.dtype===s.attrParams.dtype.value,()=>`The dtype of dict['${s.name}'] provided in `+"model.execute(dict) must be "+`${s.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(t){const e={};for(const n in t)null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n]?e[this._signature.inputs[n].name]=t[n]:e[n]=t[n];return e}checkInputs(t){const e=Object.keys(t).filter(t=>{const[e]=jd(t);return null==this.graph.nodes[e]});if(e.length>0)throw new Error("The dict provided in model.execute(dict) has "+`keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(t=>null!=this._signature&&null!=this._signature.outputs&&null!=this._signature.outputs[t]?this._signature.outputs[t].name:t,{})}checkOutputs(t){t.forEach(t=>{const[e]=jd(t);if(!this.graph.nodes[e])throw new Error(`The output '${t}' is not found in the graph`)})}}const Gp="?tfjs-format=file",qp="model.json";class Kp{constructor(t,e={}){this.modelUrl=t,this.loadOptions=e,this.version="n/a",null==e&&(this.loadOptions={})}get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}findIOHandler(){const t=this.modelUrl;if(null!=t.load)this.handler=t;else if(null!=this.loadOptions.requestInit)this.handler=l.browserHTTPRequest(t,this.loadOptions);else{const e=l.getLoadHandlers(t,this.loadOptions);if(0===e.length)e.push(l.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for `+`URL '${[t]}'`);this.handler=e[0]}}async load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=await this.handler.load();return this.loadSync(t)}loadSync(t){this.artifacts=t;const e=this.artifacts.modelTopology;let n={};null!=this.artifacts.userDefinedMetadata&&(n=this.artifacts.userDefinedMetadata.signature),this.version=`${e.versions.producer}.${e.versions.minConsumer}`;const r=l.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);return this.executor=new Hp(ip.Instance.transformGraph(e,n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),!0}async save(t,e){if("string"==typeof t){const e=l.getSaveHandlers(t);if(0===e.length)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new Error(`Found more than one (${e.length}) save handlers for `+`URL '${t}'`);t=e[0]}if(null==t.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}predict(t,e){return this.execute(t,this.outputNodes)}normalizeInputs(t){if(!(t instanceof ye||Array.isArray(t)))return t;if((t=Array.isArray(t)?t:[t]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+`the graph model has ${this.inputNodes.length} placeholders, `+`while there are ${t.length} input tensors.`);return this.inputNodes.reduce((e,n,r)=>(e[n]=t[r],e),{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}execute(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=this.executor.execute(t,e);return n.length>1?n:n[0]}async executeAsync(t,e){t=this.normalizeInputs(t),e=this.normalizeOutputs(e);const n=await this.executor.executeAsync(t,e);return n.length>1?n:n[0]}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,n)=>(e[n]=[t[n]],e),{})}dispose(){this.executor.dispose()}}async function Yp(t,e={}){if(null==t)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==e&&(e={}),e.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t=`${t}${qp}${Gp}`);const n=new Kp(t,e);return await n.load(),n}var Xp=function(t,e){return(Xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Zp(t,e){function n(){this.constructor=t}Xp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Qp=function(){return(Qp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Jp(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{a(r.next(t))}catch(t){s(t)}}function l(t){try{a(r.throw(t))}catch(t){s(t)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,l)}a((r=r.apply(t,e||[])).next())})}function tf(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var ef=function(){function t(t,e){this.model=t,this.outputStride=e;var n=this.model.inputs[0].shape;r.assert(-1===n[1]&&-1===n[2],function(){return"Input shape ["+n[1]+", "+n[2]+"] must both be equal to or -1"})}return t.prototype.predict=function(t){var e=this;return Va(function(){var n=e.preprocessInput(t.toFloat()).expandDims(0),r=e.model.predict(n).map(function(t){return t.squeeze([0])}),i=e.nameOutputResults(r);return{heatmapScores:i.heatmap.sigmoid(),offsets:i.offsets,displacementFwd:i.displacementFwd,displacementBwd:i.displacementBwd}})},t.prototype.dispose=function(){this.model.dispose()},t}(),nf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zp(e,t),e.prototype.preprocessInput=function(t){return Va(function(){return Hr(t,127.5).sub(1)})},e.prototype.nameOutputResults=function(t){return{offsets:t[0],heatmap:t[1],displacementFwd:t[2],displacementBwd:t[3]}},e}(ef);function rf(t){return Math.floor(t/2)}var sf=function(){function t(t,e){this.priorityQueue=new Array(t),this.numberOfElements=-1,this.getElementValue=e}return t.prototype.enqueue=function(t){this.priorityQueue[++this.numberOfElements]=t,this.swim(this.numberOfElements)},t.prototype.dequeue=function(){var t=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,t},t.prototype.empty=function(){return-1===this.numberOfElements},t.prototype.size=function(){return this.numberOfElements+1},t.prototype.all=function(){return this.priorityQueue.slice(0,this.numberOfElements+1)},t.prototype.max=function(){return this.priorityQueue[0]},t.prototype.swim=function(t){for(;t>0&&this.less(rf(t),t);)this.exchange(t,rf(t)),t=rf(t)},t.prototype.sink=function(t){for(;2*t<=this.numberOfElements;){var e=2*t;if(e<this.numberOfElements&&this.less(e,e+1)&&e++,!this.less(t,e))break;this.exchange(t,e),t=e}},t.prototype.getValueAt=function(t){return this.getElementValue(this.priorityQueue[t])},t.prototype.less=function(t,e){return this.getValueAt(t)<this.getValueAt(e)},t.prototype.exchange=function(t,e){var n=this.priorityQueue[t];this.priorityQueue[t]=this.priorityQueue[e],this.priorityQueue[e]=n},t}();function of(t,e,n,r,i,s){for(var o=s.shape,l=o[0],a=o[1],u=!0,c=Math.max(n-i,0),h=Math.min(n+i+1,l),d=c;d<h;++d){for(var p=Math.max(r-i,0),f=Math.min(r+i+1,a),g=p;g<f;++g)if(s.get(d,g,t)>e){u=!1;break}if(!u)break}return u}var lf=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],af=lf.length,uf=lf.reduce(function(t,e,n){return t[e]=n,t},{}),cf=[["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map(function(t){return[uf[t[0]],uf[t[1]]]});function hf(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+af)}}function df(t,e,n){var r=hf(t.heatmapY,t.heatmapX,t.id,n);return{x:t.heatmapX*e+r.x,y:t.heatmapY*e+r.y}}function pf(t,e,n){return t<e?e:t>n?n:t}function ff(t,e){return{x:t.x+e.x,y:t.y+e.y}}var gf=[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]].map(function(t){return[uf[t[0]],uf[t[1]]]}),mf=gf.map(function(t){return t[1]}),bf=gf.map(function(t){return t[0]});function yf(t,e,n,r){return{y:pf(Math.round(t.y/e),0,n-1),x:pf(Math.round(t.x/e),0,r-1)}}function vf(t,e,n,r,i,s,o,l){void 0===l&&(l=2);for(var a=r.shape,u=a[0],c=a[1],h=function(t,e,n){var r=n.shape[2]/2;return{y:n.get(e.y,e.x,t),x:n.get(e.y,e.x,r+t)}}(t,yf(e.position,s,u,c),o),d=ff(e.position,h),p=0;p<l;p++){var f=yf(d,s,u,c),g=hf(f.y,f.x,n,i);d=ff({x:f.x*s,y:f.y*s},{x:g.x,y:g.y})}var m=yf(d,s,u,c),b=r.get(m.y,m.x,n);return{position:d,part:lf[n],score:b}}function _f(t,e,n,r,i,s){var o=mf.length,l=new Array(e.shape[2]),a=t.part,u=t.score,c=df(a,r,n);l[a.id]={score:u,part:lf[a.id],position:c};for(var h=o-1;h>=0;--h){var d=mf[h],p=bf[h];l[d]&&!l[p]&&(l[p]=vf(h,l[d],p,e,n,r,s))}for(h=0;h<o;++h)p=mf[h],l[d=bf[h]]&&!l[p]&&(l[p]=vf(h,l[d],p,e,n,r,i));return l}function wf(t,e,n,r){var i=n.x,s=n.y;return t.some(function(t){var n=t.keypoints[r].position;return function(t,e,n,r){var i=n-t,s=r-e;return i*i+s*s}(s,i,n.y,n.x)<=e})}function xf(t,e,n){return n.reduce(function(n,r,i){var s=r.score;return wf(t,e,r.position,i)||(n+=s),n},0)/n.length}var Cf=1;function Sf(t,e,n,r,i,s,o,l){void 0===o&&(o=.5),void 0===l&&(l=20);for(var a=[],u=function(t,e,n){for(var r=n.shape,i=r[0],s=r[1],o=r[2],l=new sf(i*s*o,function(t){return t.score}),a=0;a<i;++a)for(var u=0;u<s;++u)for(var c=0;c<o;++c){var h=n.get(a,u,c);h<t||of(c,h,a,u,e,n)&&l.enqueue({score:h,part:{heatmapY:a,heatmapX:u,id:c}})}return l}(o,Cf,t),c=l*l;a.length<s&&!u.empty();){var h=u.dequeue();if(!wf(a,c,df(h.part,i,e),h.part.id)){var d=_f(h,t,e,i,n,r),p=xf(a,c,d);a.push({keypoints:d,score:p})}}return a}function Of(t,e,n,r){return{y:r.get(t,e,n),x:r.get(t,e,n+af)}}function kf(t,e,n){return Va(function(){var r=function(t,e){for(var n=[],r=0;r<af;r++){var i=Of(t.get(r,0).valueOf(),t.get(r,1).valueOf(),r,e),s=i.x;n.push(i.y),n.push(s)}return xr(n,[af,2])}(t,n);return t.toTensor().mul(_r(e,"int32")).toFloat().add(r)})}function Ef(t,e,n){return Jp(this,void 0,void 0,function(){var r,i,s,o,l,a,u,c,h;return tf(this,function(d){switch(d.label){case 0:return r=0,i=function(t){var e=t.shape,n=e[0],r=e[1],i=e[2];return Va(function(){var e=t.reshape([n*r,i]).argMax(0),s=e.div(_r(r,"int32")).expandDims(1),o=function(t,e){return Va(function(){var n=t.div(_r(e,"int32"));return t.sub(n.mul(_r(e,"int32")))})}(e,r).expandDims(1);return Ar([s,o],1)})}(t),[4,Promise.all([t.buffer(),e.buffer(),i.buffer()])];case 1:return s=d.sent(),o=s[0],[4,(a=kf(l=s[2],n,s[1])).buffer()];case 2:return u=d.sent(),c=Array.from(function(t,e){for(var n=e.shape[0],r=new Float32Array(n),i=0;i<n;i++){var s=e.get(i,0),o=e.get(i,1);r[i]=t.get(s,o,i)}return r}(o,l)),h=c.map(function(t,e){return r+=t,{position:{y:u.get(e,0),x:u.get(e,1)},part:lf[e],score:t}}),i.dispose(),a.dispose(),[2,{keypoints:h,score:r/h.length}]}})})}var Tf="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/mobilenet/",zf="https://storage.googleapis.com/tfjs-models/savedmodel/posenet/resnet50/",Pf=[-123.15,-115.9,-103.06],If=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zp(e,t),e.prototype.preprocessInput=function(t){return t.add(Pf)},e.prototype.nameOutputResults=function(t){return{offsets:t[2],heatmap:t[3],displacementFwd:t[0],displacementBwd:t[1]}},e}(ef);function Mf(t){return Jp(this,void 0,void 0,function(){return tf(this,function(e){return[2,Promise.all(t.map(function(t){return t.buffer()}))]})})}function Df(t,e){return Ff(t,e)?t:Math.floor(t/e)*e+1}function Af(t){r.assert("number"==typeof t||"object"==typeof t,function(){return"Invalid inputResolution "+t+". Should be a number or an object with width and height"}),"object"==typeof t&&(r.assert("number"==typeof t.width,function(){return"inputResolution.width has a value of "+t.width+" which is invalid; it must be a number"}),r.assert("number"==typeof t.height,function(){return"inputResolution.height has a value of "+t.height+" which is invalid; it must be a number"}))}function Nf(t,e){return Af(t),"object"==typeof t?[Df(t.height,e),Df(t.width,e)]:[Df(t,e),Df(t,e)]}Number,Number;var Rf=[8,16,32];function Ff(t,e){return(t-1)%e==0}function $f(t){return t instanceof ye?[t.shape[0],t.shape[1]]:[t.height,t.width]}function Lf(t,e){var n=e[0],r=e[1],i=$f(t),s=i[0],o=i[1],l=r/n,a=[0,0,0,0],c=a[0],h=a[1],d=a[2],p=a[3];return o/s<l?(c=0,h=0,d=Math.round(.5*(l*s-o)),p=Math.round(.5*(l*s-o))):(c=Math.round(.5*(1/l*o-s)),h=Math.round(.5*(1/l*o-s)),d=0,p=0),{resized:Va(function(){var e=function(t){return t instanceof ye?t:u.fromPixels(t)}(t);return(e=Wu(e,[[c,h],[d,p],[0,0]])).resizeBilinear([n,r])}),padding:{top:c,left:d,right:p,bottom:h}}}function jf(t,e,n,r,i){var s=e[1],o=function(t,e,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=0),1===n&&1===e&&0===r&&0===i?t:t.map(function(t){return function(t,e,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=0),{score:t.score,keypoints:t.keypoints.map(function(t){var s=t.position;return{score:t.score,part:t.part,position:{x:s.x*n+i,y:s.y*e+r}}})}}(t,e,n,r,i)})}(t,(e[0]+r.top+r.bottom)/n[0],(s+r.left+r.right)/n[1],-r.top,-r.left);return i?function(t,e){return e<=0?o:o.map(function(t){return function(t,e){return{score:t.score,keypoints:t.keypoints.map(function(t){var n=t.position;return{score:t.score,part:t.part,position:{x:e-1-n.x,y:n.y}}})}}(t,e)})}(0,s):o}var Bf={architecture:"MobileNetV1",outputStride:16,multiplier:.75,inputResolution:257},Vf=["MobileNetV1","ResNet50"],Wf={MobileNetV1:[8,16,32],ResNet50:[32,16]},Uf={MobileNetV1:[.5,.75,1],ResNet50:[1]},Hf=[1,2,4],Gf={flipHorizontal:!1},qf={flipHorizontal:!1,maxDetections:5,scoreThreshold:.5,nmsRadius:20},Kf=function(){function t(t,e){(function(t){r.assert("number"==typeof t,function(){return"outputStride is not a number"}),r.assert(Rf.indexOf(t)>=0,function(){return"outputStride of "+t+" is invalid. It must be either 8, 16, or 32"})})(t.outputStride),function(t,e){r.assert("number"==typeof t[0]&&"number"==typeof t[1],function(){return"both resolution values must be a number but had values "+t}),r.assert(Ff(t[0],e),function(){return"height of "+t[0]+" is invalid for output stride "+e+"."}),r.assert(Ff(t[1],e),function(){return"width of "+t[1]+" is invalid for output stride "+e+"."})}(e,t.outputStride),this.baseModel=t,this.inputResolution=e}return t.prototype.estimateMultiplePoses=function(t,e){return void 0===e&&(e=qf),Jp(this,void 0,void 0,function(){var n,r,i,s,o,l,a,u,c,h,d,p,f,g,m,b,y;return tf(this,function(v){switch(v.label){case 0:return n=Qp({},qf,e),function(t){var e=t.maxDetections,n=t.scoreThreshold,r=t.nmsRadius;if(e<=0)throw new Error("Invalid maxDetections "+e+". Should be > 0");if(n<0||n>1)throw new Error("Invalid scoreThreshold "+n+". Should be in range [0.0, 1.0]");if(r<=0)throw new Error("Invalid nmsRadius "+r+".")}(e),r=this.baseModel.outputStride,i=this.inputResolution,s=$f(t),o=s[0],l=s[1],a=Lf(t,i),c=a.padding,h=this.baseModel.predict(u=a.resized),[4,Mf([d=h.heatmapScores,p=h.offsets,f=h.displacementFwd,g=h.displacementBwd])];case 1:return[4,Sf((m=v.sent())[0],m[1],m[2],m[3],r,n.maxDetections,n.scoreThreshold,n.nmsRadius)];case 2:return b=v.sent(),y=jf(b,[o,l],i,c,n.flipHorizontal),d.dispose(),p.dispose(),f.dispose(),g.dispose(),u.dispose(),[2,y]}})})},t.prototype.estimateSinglePose=function(t,e){return void 0===e&&(e=Gf),Jp(this,void 0,void 0,function(){var n,r,i,s,o,l,a,u,c,h,d,p,f,g,m,b;return tf(this,function(y){switch(y.label){case 0:return n=Qp({},Gf,e),r=this.baseModel.outputStride,i=this.inputResolution,s=$f(t),o=s[0],l=s[1],a=Lf(t,i),c=a.padding,h=this.baseModel.predict(u=a.resized),f=h.displacementFwd,g=h.displacementBwd,[4,Ef(d=h.heatmapScores,p=h.offsets,r)];case 1:return m=y.sent(),b=jf([m],[o,l],i,c,n.flipHorizontal),d.dispose(),p.dispose(),f.dispose(),g.dispose(),u.dispose(),[2,b[0]]}})})},t.prototype.estimatePoses=function(t,e){return Jp(this,void 0,void 0,function(){return tf(this,function(n){switch(n.label){case 0:return"single-person"!==e.decodingMethod?[3,2]:[4,this.estimateSinglePose(t,e)];case 1:return[2,[n.sent()]];case 2:return[2,this.estimateMultiplePoses(t,e)]}})})},t.prototype.dispose=function(){this.baseModel.dispose()},t}();function Yf(t){return Jp(this,void 0,void 0,function(){var e,n,r,i,s,o,l;return tf(this,function(a){switch(a.label){case 0:if(e=t.outputStride,n=t.quantBytes,r=t.multiplier,null==S)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\n        model.");return i=function(t,e,n){var r={1:"100",.75:"075",.5:"050"},i="model-stride"+t+".json";return 4===n?Tf+"float/"+r[e]+"/"+i:Tf+"quant"+n+"/"+r[e]+"/"+i}(e,r,n),[4,Yp(t.modelUrl||i)];case 1:return s=a.sent(),o=new nf(s,e),l=Nf(t.inputResolution,o.outputStride),[2,new Kf(o,l)]}})})}function Xf(t){return Jp(this,void 0,void 0,function(){var e,n,r,i,s,o;return tf(this,function(l){switch(l.label){case 0:if(e=t.outputStride,n=t.quantBytes,null==S)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this\n        model.");return r=function(t,e){var n="model-stride"+t+".json";return 4===e?zf+"float/"+n:zf+"quant"+e+"/"+n}(e,n),[4,Yp(t.modelUrl||r)];case 1:return i=l.sent(),s=new If(i,e),o=Nf(t.inputResolution,s.outputStride),[2,new Kf(s,o)]}})})}var Zf=n("c37Y");let Qf;function Jf(){return null==Qf&&(Qf=Ja().epsilon()),Qf}class tg extends Error{constructor(t){super(t),Object.setPrototypeOf(this,tg.prototype)}}class eg extends Error{constructor(t){super(t),Object.setPrototypeOf(this,eg.prototype)}}class ng extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ng.prototype)}}class rg extends Error{constructor(t){super(t),Object.setPrototypeOf(this,rg.prototype)}}class ig extends Error{constructor(t){super(t),Object.setPrototypeOf(this,ig.prototype)}}function sg(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}{const n=new Array(e);return n.fill(t),n}}function og(t,e){if(!t)throw new ig(e)}function lg(t,e){let n=0;for(const r of t)r===e&&n++;return n}function ag(t){return 1===t.length?t[0]:t}function ug(t){return Array.isArray(t)?t:[t]}function cg(t){const e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}function hg(t){return t.length<=1?t:-1===t.indexOf("_")?t:t.replace(/[_]+(\w|$)/g,(t,e)=>e.toUpperCase())}let dg={};function pg(t){if(null==t)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function fg(t,e={},n={},r="object",i=!1){if("string"==typeof t){const i=t;let s;if(i in n)s=n[i];else if(i in dg)s=dg[i];else if(null==(s=e[i]))throw new ng(`Unknown ${r}: ${t}. `+"This may be due to one of the following reasons:\n"+`1. The ${r} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${r} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");return s}{const s=t;if(null==s.className||null==s.config)throw new ng(`${r}: Improper config format: `+`${JSON.stringify(s)}.\n`+"'className' and 'config' must set.");const o=s.className;let l,a;if(o in n?[l,a]=n[o]:o in dg?[l,a]=dg.className:o in e&&([l,a]=e[o]),null==l)throw new ng(`Unknown ${r}: ${o}. `+"This may be due to one of the following reasons:\n"+`1. The ${r} is defined in Python, in which `+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+`2. The custom ${r} is defined in JavaScript, `+"but is not registered properly with tf.serialization.registerClass().");if(null!=a){const t={};for(const n of Object.keys(dg))t[n]=dg[n];for(const i of Object.keys(n))t[i]=n[i];s.config.customObjects=t;const e=Object.assign({},dg);for(const i of Object.keys(n))dg[i]=n[i];!function t(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>t(e));else{const n=Object.keys(e);for(const r of n){const n=e[r];null!=n&&"object"==typeof n&&(Array.isArray(n)||"ndarray"!==n.type||"number"!=typeof n.value?t(n):e[r]=n.value)}}}(s.config);const r=a(l,s.config,n,i);return dg=Object.assign({},e),r}{const t=Object.assign({},dg);for(const r of Object.keys(n))dg[r]=n[r];const e=new l(s.config);return dg=Object.assign({},t),e}}}function gg(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function mg(t){if(null==t)return t;const e=[];for(const n of t)-1===e.indexOf(n)&&e.push(n);return e}function bg(t){if(null==t)throw new ng(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function yg(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new ng(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function vg(t,e,n=0,r=1/0){return og(n>=0),og(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(t=>typeof t===e)}function _g(t,e){Array.isArray(t)?(r.assert(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((t,n)=>_g(t,`element ${n+1} of ${e}`))):r.assert(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got `+`${function t(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>t(e)).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}(t)}.`)}function wg(t){return"relu"===t?"relu":"linear"===t?"linear":"elu"===t?"elu":null}function xg(t,e){return Va(()=>Xi(bi(Gr(t,t),e,!0)))}class Cg extends d.Serializable{getConfig(){return{}}}class Sg extends Cg{constructor(t){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Va(()=>{const e=xg(t,this.axis),n=Ti(e,0,this.maxValue);return Gr(t,Hr(n,dr(Jf(),e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}Sg.className="MaxNorm",d.registerClass(Sg);class Og extends Cg{constructor(t){super(),this.defaultAxis=0,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Va(()=>Hr(t,dr(Jf(),xg(t,this.axis))))}getConfig(){return{axis:this.axis}}}Og.className="UnitNorm",d.registerClass(Og);class kg extends Cg{apply(t){return ec(t)}}kg.className="NonNeg",d.registerClass(kg);class Eg extends Cg{constructor(t){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=t.minValue?t.minValue:this.defaultMinValue,this.maxValue=null!=t.maxValue?t.maxValue:this.defaultMaxValue,this.rate=null!=t.rate?t.rate:this.defaultRate,this.axis=null!=t.axis?t.axis:this.defaultAxis}apply(t){return Va(()=>{const e=xg(t,this.axis),n=dr(Gr(this.rate,Ti(e,this.minValue,this.maxValue)),Gr(1-this.rate,e));return Gr(t,Hr(n,dr(Jf(),e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}Eg.className="MinMaxNorm",d.registerClass(Eg);const Tg={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function zg(t){return pg(t)}function Pg(t,e={}){return fg(t,d.SerializationMap.getMap().classNameMap,e,"constraint")}function Ig(t){return null==t?null:"string"==typeof t?Pg({className:t in Tg?Tg[t]:t,config:{}}):t instanceof Cg?t:Pg(t)}const Mg=["channelsFirst","channelsLast"],Dg=["valid","same","causal"],Ag=["max","avg"],Ng=["sum","mul","concat","ave"],Rg=new Map;function Fg(t){yg(Mg,"DataFormat",t)}function $g(t){yg(Dg,"PaddingMode",t)}function Lg(t){yg(Ag,"PoolMode",t)}const jg=[],Bg="/";function Vg(t,e){jg.push(t);try{const t=e();return jg.pop(),t}catch(n){throw jg.pop(),n}}function Wg(t){if(!Gg(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===jg.length?"":jg.join(Bg)+Bg)+t}function Ug(t){if(!Gg(t))throw new Error("Not a valid tensor name: '"+t+"'");Rg.has(t)||Rg.set(t,0);const e=Rg.get(t);if(Rg.set(t,Rg.get(t)+1),e>0){const n=`${t}_${e}`;return Rg.set(n,1),n}return t}const Hg=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Gg(t){return!!t.match(Hg)}function qg(t,e,n){null==e&&(e=0),null==n&&(n=t.length);let r=1;for(let i=e;i<n;++i)r*=t[i];return r}function Kg(t){return wr(t=Array.isArray(t)?new Float32Array(t):t)}function Yg(t){return gi(Kg(t)).dataSync()[0]}function Xg(t){return Mu(Kg(t)).dataSync()[0]}function Zg(t,e){if(e<t)throw new ng(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}function Qg(t,e){return t.asType(e)}function Jg(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function tm(t,e,n){return Va(()=>{switch(t.rank){case 1:return Uo(t,e,n);case 2:return Ho(t,[e,0],[n,t.shape[1]]);case 3:return Go(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return qo(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Wo(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Wo(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new ng("sliceAlongFirstAxis() received an unsupported tensor rank: "+`${t.rank}`)}})}function em(t,e,n){return Va(()=>{switch(t.rank){case 1:return Uo(t,e,n);case 2:return Ho(t,[0,e],[t.shape[0],n]);case 3:return Go(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return qo(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new ng("sliceAlongLastAxis() received an unsupported tensor rank: "+`${t.rank}`)}})}function nm(t,e,n,r){return Va(()=>{switch(t.rank){case 1:return Uo(t,e,n);case 2:switch(r){case 1:return tm(t,e,n);case 2:return em(t,e,n);default:throw new ng("The axis is not within the rank of the tensor "+`${r}`)}case 3:switch(r){case 1:return tm(t,e,n);case 2:return Go(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return em(t,e,n);default:throw new ng("The axis is not within the rank of the tensor "+`${r}`)}case 4:switch(r){case 1:return tm(t,e,n);case 2:return qo(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return qo(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return em(t,e,n);default:throw new ng("The axis is not within the rank of the tensor "+`${r}`)}default:throw new ng("sliceAlongLastAxis() received an unsupported tensor rank: "+`${t.rank}`)}})}function rm(t,e=-1){let n;return e<0&&(e=0!==(n=t[0].rank)?n:0),e===t[0].rank&&(e=-1),Ar(t,e)}function im(t,e){switch(t.rank){case 1:return du([t,e]);case 2:return pu([t,e],0);case 3:return fu([t,e],0);case 4:return gu([t,e],0);default:throw new ng("concatAlongFirstAxis() received an unsupported "+`tensor rank: ${t.rank}`)}}function sm(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new ng(`The length of input n (${e.length}) does not match `+`the number of dimensions in input x (${t.rank})`);return Vs(t,e)}function om(t,e=0,n=1,r,i){return Ju(t,e,n,r,i)}function lm(t,e,n,r){if(t.rank<2||e.rank<2)throw new rg("dot requires both inputs to be rank >= 2"+` but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3&&t.shape.slice(-1)[0]!==e.shape.slice(-2)[0])throw new rg("If rank y >= 3, then the second last dim"+` of y must equal the last dim of x but got x shape = ${t.shape} and `+` y shape = ${e.shape}`);if(2===t.rank&&2===e.rank)return _.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?cm(t.rank,r,"channelsLast"):null,activation:n});{const i=t.shape.slice(),s=i.pop();t=t.reshape([-1,s]);const o=e.shape.slice(),l=o.pop(),a=o.pop(),u=[...o,l],c=Array.from({length:e.rank},(t,n)=>0===n?e.rank-2:n<=e.rank-2?n-1:n);e=e.transpose(c).reshape([a,-1]);const h=[...i,...u];return _.matMul({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?cm(t.rank,r,"channelsLast"):null,activation:n}).reshape(h)}}function am(t,e,n){return Va(()=>(e=Array.isArray(e)?wr(e,"int32"):e.toInt(),fc(t,e,n)))}function um(t){return Gr(t,t)}function cm(t,e,n){const r=e.shape;if(1!==e.rank&&e.rank!==t)throw new ng(`Unexpected bias dimensions: ${e.rank}`+`; expected it to be 1 or ${t}`);if(5===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1,1]:[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,1,r[0]]:[1].concat(r))}else if(4===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1,1]:[1,r[2],r[0],r[1]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,1,r[0]]:[1].concat(r))}else if(3===t){if("channelsFirst"===n)return e.reshape(1===r.length?[1,r[0],1]:[1,r[1],r[0]]);if("channelsLast"===n)return e.reshape(1===r.length?[1,1,r[0]]:[1].concat(r))}else if(t<3)return e;throw new ng(`Unsupported input rank by biasAdd: ${e.rank}`)}function hm(t,e,n){return Va(()=>(null==n&&(n="channelsLast"),Fg(n),t.add(cm(t.rank,e,n))))}function dm(t,e,n,r){return Va(()=>Qc(t,e,n,r))}function pm(t,e,n=!1){return n?t():e()}const fm=["fanIn","fanOut","fanAvg"],gm=["normal","uniform","truncatedNormal"];class mm extends d.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class bm extends mm{apply(t,e){return zr(t,e)}}bm.className="Zeros",d.registerClass(bm);class ym extends mm{apply(t,e){return Tr(t,e)}}ym.className="Ones",d.registerClass(ym);class vm extends mm{constructor(t){if(super(),"object"!=typeof t)throw new ng(`Expected argument of type ConstantConfig but got ${t}`);if(void 0===t.value)throw new ng(`config must have value set but got ${t}`);this.value=t.value}apply(t,e){return Va(()=>Gr(_r(this.value),Tr(t,e)))}getConfig(){return{value:this.value}}}vm.className="Constant",d.registerClass(vm);class _m extends mm{constructor(t){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,e){return tc(t,this.minval,this.maxval,e)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}_m.className="RandomUniform",d.registerClass(_m);class wm extends mm{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new rg(`randomNormal does not support dType ${e}.`);return om(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}wm.className="RandomNormal",d.registerClass(wm);class xm extends mm{constructor(t){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new rg(`truncatedNormal does not support dType ${e}.`);return oc(t,this.mean,this.stddev,e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}xm.className="TruncatedNormal",d.registerClass(xm);class Cm extends mm{constructor(t){super(),this.gain=null!=t.gain?t.gain:1}apply(t,e){return Va(()=>{if(2!==t.length||t[0]!==t[1])throw new ng("Identity matrix initializer can only be used for 2D square matrices.");return Gr(this.gain,Eu(t[0]))})}getConfig(){return{gain:this.gain}}}Cm.className="Identity",d.registerClass(Cm);class Sm extends mm{constructor(t){if(super(),t.scale<0)throw new ng(`scale must be a positive float. Got: ${t.scale}`);this.scale=null==t.scale?1:t.scale,this.mode=null==t.mode?"fanIn":t.mode,yg(fm,"FanMode",this.mode),this.distribution=null==t.distribution?"normal":t.distribution,function(t){yg(gm,"Distribution",t)}(this.distribution),this.seed=t.seed}apply(t,e){const n=function(t,e="channelsLast"){let n,r;if(Fg(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length)){if("channelsFirst"===e){const e=qg(t,2);n=t[1]*e,r=t[0]*e}else if("channelsLast"===e){const e=qg(t,0,t.length-2);n=t[t.length-2]*e,r=t[t.length-1]*e}}else{const e=qg(t);n=Math.sqrt(e),r=Math.sqrt(e)}return[n,r]}(t),r=n[0],i=n[1];let s=this.scale;if(s/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,i):Math.max(1,(r+i)/2),"normal"===this.distribution){const n=Math.sqrt(s);if("float32"!==(e=e||"float32")&&"int32"!==e)throw new rg(`${this.getClassName()} does not support dType ${e}.`);return oc(t,0,n,e,this.seed)}{const n=Math.sqrt(3*s);return tc(t,-n,n,e)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}Sm.className="VarianceScaling",d.registerClass(Sm);class Om extends Sm{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Sm.className}}Om.className="GlorotUniform",d.registerClass(Om);class km extends Sm{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Sm.className}}km.className="GlorotNormal",d.registerClass(km);class Em extends Sm{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Sm.className}}Em.className="HeNormal",d.registerClass(Em);class Tm extends Sm{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Sm.className}}Tm.className="HeUniform",d.registerClass(Tm);class zm extends Sm{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})}getClassName(){return Sm.className}}zm.className="LeCunNormal",d.registerClass(zm);class Pm extends Sm{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})}getClassName(){return Sm.className}}Pm.className="LeCunNormal",d.registerClass(Pm);class Im extends mm{constructor(t){if(super(),this.DEFAULT_GAIN=1,this.gain=null==t.gain?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,null!=this.seed)throw new rg("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,e){return Va(()=>{if(2!==t.length)throw new rg("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+`than 2000 (${t[0]*t[1]}) elements: `+"Slowness may result.");const e=om(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32");let n=y.gramSchmidt(e);return t[0]>t[1]&&(n=n.transpose()),Gr(this.gain,n)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Im.className="Orthogonal",d.registerClass(Im);const Mm={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Dm(t,e={}){return fg(t,d.SerializationMap.getMap().classNameMap,e,"initializer")}function Am(t){return pg(t)}function Nm(t){if("string"==typeof t){const e=t in Mm?Mm[t]:t;if("GlorotNormal"===e)return new km;if("GlorotUniform"===e)return new Om;if("HeNormal"===e)return new Em;if("HeUniform"===e)return new Tm;if("LeCunNormal"===e)return new zm;if("LeCunUniform"===e)return new Pm;{const t={};return t.className=e,t.config={},Dm(t)}}return t instanceof mm?t:Dm(t)}let Rm=0;function Fm(){return Rm++}const $m={};function Lm(t=""){return t in $m||($m[t]=0),$m[t]+=1,t+$m[t].toString()}function jm(t){return Array.isArray(t)&&Array.isArray(t[0])}function Bm(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Vm(t){let e;if(Array.isArray(t)){if(1!==t.length)throw new ng(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Wm(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new ng(`Expected exactly 1 Shape; got ${t.length}`)}return t}function Um(t){let e=0;for(const n of t)e+=0===n.shape.length?1:n.shape.reduce((t,e)=>t*e);return e}const Hm="Variable";class Gm{constructor(t,e="float32",n=Hm,r=!0,i=null){this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=Fm(),this.originalName=Wg(n=null==n?Hm:n),this.name=Ug(this.originalName),this.trainable_=r,this.constraint=i,this.val=Er(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function qm(t){return t.map(t=>t.read())}function Km(t){t.forEach(t=>{t[0].write(t[1])})}class Ym{constructor(t){this.dtype=t.dtype,this.shape=t.shape,this.ndim=null!=t.shape?t.shape.length:t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class Xm{constructor(t,e,n,r,i,s,o){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=Fm(),null!=s&&(this.originalName=Wg(s),this.name=Ug(this.originalName)),this.rank=e.length}}let Zm=0;class Qm{constructor(t,e){this.callArgs=e,this.id=Zm++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const n of t.inboundLayers)null!=n&&n.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const e of this.inboundLayers)t.push(null!=e?e.name:null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Jm=0;class tb extends d.Serializable{constructor(t={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Jm++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=t.name;if(!e){const t=this.getClassName();e=cg(t)+"_"+Lm(t)}if(this.name=e,this.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){let e;if(null!=t.batchInputShape)e=t.batchInputShape;else if(null!=t.inputShape){let n=null;null!=t.batchSize&&(n=t.batchSize),e=[n].concat(t.inputShape)}this.batchInputShape=e;let n=t.dtype;null==n&&(n=t.inputDType),null==n&&(n="float32"),this.dtype=n}this.initialWeights=null!=t.weights?t.weights:null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,e){return t.name+"_ib-"+e.toString()}getNodeAtIndex(t,e){if(0===this.inboundNodes.length)throw new eg("The layer has never been called "+`and thus has no defined ${e}.`);if(this.inboundNodes.length<=t)throw new ng(`Asked to get ${e} at node ${t}, `+`but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return ag(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return ag(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new tg(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new tg(`Layer ${this.name}`+" is not connected, no input to return.");return ag(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new tg(`Layer ${this.name}`+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new tg(`Layer ${this.name}`+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return ag(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(e=>e.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=ug(t),null==this.inputSpec||0===this.inputSpec.length)return;const e=ug(this.inputSpec);if(t.length!==e.length)throw new ng(`Layer ${this.name} expects ${e.length} inputs, `+`but it received ${t.length} input tensors. `+`Input received: ${t}`);for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(null==i)continue;const s=r.rank;if(null!=i.ndim&&s!==i.ndim)throw new ng(`Input ${n} is incompatible with layer ${this.name}: `+`expected ndim=${i.ndim}, found ndim=${s}`);if(null!=i.maxNDim&&s>i.maxNDim)throw new ng(`Input ${n} is incompatible with layer ${this.name}`+`: expected max_ndim=${i.maxNDim}, found ndim=${s}`);if(null!=i.minNDim&&s<i.minNDim)throw new ng(`Input ${n} is incompatible with layer ${this.name}`+`: expected min_ndim=${i.minNDim}, found ndim=${s}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new ng(`Input ${n} is incompatible with layer ${this.name} `+`: expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){const t=r.shape;for(const e in i.axes){const r=Number(e),s=i.axes[e],o=r>=0?t[r]:t[t.length+r];if(null!=s&&-1===[s,null].indexOf(o))throw new ng(`Input ${n} is incompatible with layer `+`${this.name}: expected axis ${r} of input shape to `+`have value ${s} but got shape ${t}.`)}}if(null!=i.shape)for(let t=0;t<i.shape.length;++t){const e=i.shape[t],s=r.shape[t];if(null!=e&&null!=s&&e!==s)throw new ng(`Input ${n} is incompatible with layer `+`${this.name}: expected shape=${i.shape}, `+`found shape=${r.shape}.`)}}}call(t,e){return t}invokeCallHook(t,e){null!=this._callHook&&this._callHook(t,e)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,e){e=e||{},this.assertNotDisposed();const n=ug(t);let r=!0;for(const s of n)if(!(s instanceof Xm)){r=!1;break}let i=!0;for(const s of n)if(s instanceof Xm){i=!1;break}if(r===i)throw new ng("Arguments to apply() must be all SymbolicTensors or all Tensors");return Vg(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const e=[];for(const n of ug(t))e.push(n.shape);this.build(ag(e)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(t),i){let r=this.call(t,e);const i=ug(r),s=[];for(let t of i)-1!==n.indexOf(t)&&(t=t.clone()),s.push(t);if(r=ag(s),null!=this.activityRegularizer)throw new rg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{const n=function(t){t=ug(t);const e=[];for(const n of t)e.push(n.shape);return ag(e)}(t),r=this.computeOutputShape(n);let i;const s="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(t)?n[0]:n),i=null!=r&&r.length>0&&Array.isArray(r[0])?r.map((n,r)=>new Xm(s,n,this,ug(t),e,this.name,r)):new Xm(s,r,this,ug(t),e,this.name),this.addInboundNode(t,i,null,null,n,r,e),this._refCount++,null!=this.activityRegularizer)throw new rg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}})}warnOnIncompatibleInputShape(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+`${JSON.stringify(t)}) does not match that of the `+`batchInputShape (${JSON.stringify(this.batchInputShape)}) `+`of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor "+`(${JSON.stringify(t)}) does not `+`match the expectation of layer ${this.name}: `+`${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new tg(`The layer ${this.name} has never been called and thus has no `+"defined output shape.");const t=[];for(const e of this.inboundNodes){const n=JSON.stringify(e.outputShapes);-1===t.indexOf(n)&&t.push(n)}if(1===t.length){const t=this.inboundNodes[0].outputShapes;return Array.isArray(t)&&Array.isArray(t[0])&&1===t.length?t[0]:t}throw new tg(`The layer ${this.name} has multiple inbound nodes with different `+'output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')}countParams(){if(!this.built)throw new eg(`You tried to call countParams() on ${this.name}, `+"but the layer is not built yet. Build it first by calling build(batchInputShape).");return Um(this.weights)}build(t){this.built=!0}getWeights(t=!1){return qm(t?this.trainableWeights:this.weights)}setWeights(t){Va(()=>{const e=this.weights;if(e.length!==t.length)throw new ng(`You called setWeights(weights) on layer "${this.name}" `+`with a weight list of length ${t.length}, `+`but the layer was expecting ${e.length} weights. `+`Provided weights: ${t}...`);if(0===e.length)return;const n=[],i=qm(e);for(let s=0;s<i.length;++s){const o=i[s],l=e[s],a=t[s];if(!r.arraysEqual(o.shape,a.shape))throw new ng(`Layer weight shape ${o.shape} `+`not compatible with provided weight shape ${a.shape}`);n.push([l,a])}Km(n)})}addWeight(t,e,n,r,i,s,o){if(-1!==this._addedWeightNames.indexOf(t))throw new ng(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=Nm("zeros"));const l=r.apply(e,n),a=new Gm(l,n,t,s,o);return l.dispose(),null!=i&&this.addLoss(()=>i.apply(a.read())),null==s&&(s=!0),s?this._trainableWeights.push(a):this._nonTrainableWeights.push(a),a}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){null==t||Array.isArray(t)&&0===t.length||(t=ug(t),null!=this._losses&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,e){if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.");e.forEach(t=>{if(null!=t)throw new TypeError(`Layer ${this.name} does not support masking, `+"but was passed an inputMask.")})}return null}return e}addInboundNode(t,e,n,r,i,s,o=null){const l=ug(t);e=ug(e),n=ug(n),r=ug(r),i=Bm(i),s=Bm(s);const a=[],u=[],c=[];for(const h of l)a.push(h.sourceLayer),u.push(h.nodeIndex),c.push(h.tensorIndex);new Qm({outboundLayer:this,inboundLayers:a,nodeIndices:u,tensorIndices:c,inputTensors:l,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:s},o);for(let h=0;h<e.length;h++)e[h].sourceLayer=this,e[h].nodeIndex=this.inboundNodes.length-1,e[h].tensorIndex=h}getConfig(){const t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been `+"built yet.");if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used `+"yet.");this.assertNotDisposed();let t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}class eb extends tb{constructor(t){if(super({dtype:t.dtype,name:null!=t.name?t.name:Lm("input").toString()}),null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new ng("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let e=t.batchInputShape;if(null==e){if(null==t.inputShape)throw new ng("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");e=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new ng("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=t.dtype||"float32";this.batchInputShape=e,this.dtype=n,this.inputSpec=[{shape:e}];const r=new Xm(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new Qm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[e],outputShapes:[e]})}apply(t,e){throw new ng("Cannot pass any input to an "+`InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}async function nb(t){if(null==t)return;const e=[],n=[],r=[];for(const i in t){const s=t[i];if("number"!=typeof s){const t=s;e.push(t.data()),n.push(i),r.push(t)}}if(e.length>0){const i=await Promise.all(e);for(let e=0;e<i.length;++e)t[n[e]]=i[e][0];Wa(r)}}function rb(t){if(null!=t)for(const e in t){const n=t[e];"number"!=typeof n&&n.dispose()}}var ib;eb.className="InputLayer",d.registerClass(eb),function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"}(ib||(ib={}));const sb=125;class ob{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,e){}async onEpochEnd(t,e){}async onBatchBegin(t,e){}async onBatchEnd(t,e){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class lb{constructor(t,e=10){null==t&&(t=[]),this.callbacks=t,this.queueLength=e}append(t){this.callbacks.push(t)}setParams(t){for(const e of this.callbacks)e.setParams(t)}setModel(t){for(const e of this.callbacks)e.setModel(t)}async onEpochBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochBegin(t,e)}async onEpochEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onEpochEnd(t,e)}async onBatchBegin(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchBegin(t,e)}async onBatchEnd(t,e){null==e&&(e={});for(const n of this.callbacks)await n.onBatchEnd(t,e)}async onTrainBegin(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainBegin(t)}async onTrainEnd(t){null==t&&(t={});for(const e of this.callbacks)await e.onTrainEnd(t)}}class ab extends ob{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,e){null==e&&(e={});const n=null==e.size?0:e.size;this.seen+=n;for(const r in e){const t=e[r];if("number"==typeof t)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+t*n;else{let e;r in this.totals?e=this.totals[r]:this.totals[r]=0;const i=Va(()=>dr(this.totals[r],Gr(t,n)));this.totals[r]=i,null!=e&&e.dispose()}}}async onEpochEnd(t,e){if(null!=e)for(const n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?e[n]=this.totals[n]/this.seen:Va(()=>{const t=Gr(Hr(1,this.seen),this.totals[n]);e[n]=t,this.totals[n].dispose(),Ua(e[n])}))}}class ub extends ob{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,e){null==e&&(e={}),this.epoch.push(t);for(const n in e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n])}async syncData(){const t=[],e=[],n=[];for(const i in this.history){const r=this.history[i];for(let s=0;s<r.length;++s)"number"!=typeof r[s]&&(t.push(r[s].data()),e.push(i),n.push(s))}const r=await Promise.all(t);for(let i=0;i<r.length;++i)this.history[e[i]][n[i]].dispose(),this.history[e[i]][n[i]]=r[i][0]}}class cb extends ob{constructor(t,e){if(super(),this.currentEpoch=0,this.yieldEvery=e||"auto","auto"===this.yieldEvery&&(this.yieldEvery=sb),"never"===this.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");r.isNumber(this.yieldEvery)&&(this.maybeWait=function(t,e){let n,i=r.now();return(...s)=>{const o=r.now();return o-i<e?n:(i=o,n=t(...s))}}(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,e,n){const r=[];null!=this.yield&&(await nb(n),r.push(this.yield(t,e,n))),r.push(Jh()),await Promise.all(r)}async onEpochBegin(t,e){this.currentEpoch=t,null!=this.epochBegin&&(await nb(e),await this.epochBegin(t,e))}async onEpochEnd(t,e){const n=[];null!=this.epochEnd&&(await nb(e),n.push(this.epochEnd(t,e))),"epoch"===this.yieldEvery&&n.push(Jh()),await Promise.all(n)}async onBatchBegin(t,e){null!=this.batchBegin&&(await nb(e),await this.batchBegin(t,e))}async onBatchEnd(t,e){const n=[];null!=this.batchEnd&&(await nb(e),n.push(this.batchEnd(t,e))),"batch"===this.yieldEvery?n.push(Jh()):r.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,t,e)),await Promise.all(n)}async onTrainBegin(t){null!=this.trainBegin&&(await nb(t),await this.trainBegin(t))}async onTrainEnd(t){null!=this.trainEnd&&(await nb(t),await this.trainEnd(t))}}function hb(t,e){return null==t&&(t={}),t instanceof ob?[t]:Array.isArray(t)&&t[0]instanceof ob?t:ug(t).map(t=>new cb(t,e))}class db{constructor(){}static registerCallbackConstructor(t,e){r.assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, "+`but got ${t}`),db.checkForDuplicate(e),null==db.constructors[t]&&(db.constructors[t]=[]),db.constructors[t].push(e)}static checkForDuplicate(t){for(const e in db.constructors)db.constructors[+e].forEach(e=>{if(e===t)throw new ng("Duplicate callback constructor.")})}static clear(){db.constructors={}}static createCallbacks(t){const e=[];for(const n in db.constructors){const r=+n;t>=r&&e.push(...db.constructors[r])}return e.map(t=>new t)}}function pb(t,e,n,r,i,s,o,l,a){const u=new ub,c=[new ab,...db.createCallbacks(e)];null!=t&&c.push(...t),c.push(u);const h=new lb(c);return h.setParams({epochs:n,initialEpoch:r,samples:i,steps:s,batchSize:o,verbose:e,doValidation:l,metrics:a}),{callbackList:h,history:u}}function fb(t,e={},n=!1){return fg(t,d.SerializationMap.getMap().classNameMap,e,"layer",n)}function gb(t,e){return Va(()=>{"float32"!==t.dtype&&(t=t.asType("float32"));const n=bi(um(t),e,!0),r=Tu(n.shape,Jf()),i=Xi(zu(n,r));return Hr(t,i)})}function mb(t,e){return Va(()=>fi(um(Bs(e,t)),-1))}function bb(t,e){return Va(()=>fi(_i(Bs(e,t)),-1))}function yb(t,e){return Va(()=>{const n=Bs(t,e),r=Ti(_i(t),Jf(),Number.MAX_VALUE),i=_i(Hr(n,r));return Gr(100,fi(i,-1))})}function vb(t,e,n=!1){return Va(()=>{if(n)e=Fc(e);else{const t=bi(e,e.shape.length-1,!0);e=Hr(e,t)}return e=Ti(e,Jf(),1-Jf()),$i(bi(Gr(t.toFloat(),Ni(e)),e.shape.length-1))})}function _b(t,e,n=!1){return Va(()=>{const r=Ai(function(t){const e=[qg(t.shape)];return t.reshape(e)}(t)).toInt(),i=(e=Ti(e,Jf(),1-Jf())).shape;return vb(ca(r,i[i.length-1]).reshape(i),e,n)})}function wb(t,e){return Va(()=>{let n;return n=Ti(e,Jf(),1-Jf()),n=Ni(Hr(n,Bs(1,n))),fi(function(t,e){if(!r.arraysEqual(t.shape,e.shape))throw new ng("logits and labels must have the same shape, but got shapes "+`${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return Va(()=>{const n=e.relu(),r=e.abs().neg();return n.sub(e.mul(t)).add(r.exp().log1p())})}(t,n),-1)})}function xb(t,e){return Va(()=>{const n=gb(t,-1),r=gb(e,-1),i=Gr(n,r);return $i(bi(i,-1))})}db.constructors={};const Cb={meanSquaredError:mb,meanAbsoluteError:bb,meanAbsolutePercentageError:yb,meanSquaredLogarithmicError:function(t,e){return Va(()=>{const n=Ti(e,Jf(),Number.MAX_VALUE),r=Ni(dr(1,n)),i=Ti(t,Jf(),Number.MAX_VALUE),s=Ni(dr(1,i));return fi(um(Bs(r,s)),-1)})},squaredHinge:function(t,e){return Va(()=>{const n=zu(0,Bs(1,Gr(t,e)));return fi(um(n),-1)})},hinge:function(t,e){return Va(()=>{const n=zu(0,Bs(1,Gr(t,e)));return fi(n,-1)})},categoricalHinge:function(t,e){return Va(()=>{const n=bi(Gr(t,e),-1),r=Mu(Gr(Bs(1,t),e),-1);return zu(0,dr(1,Bs(r,n)))})},logcosh:function(t,e){return Va(()=>{const n=Math.log(2),r=Bs(e,t),i=Bs(dr(r,Yi(Gr(-2,r))),n);return fi(i,-1)})},categoricalCrossentropy:vb,sparseCategoricalCrossentropy:_b,binaryCrossentropy:wb,kullbackLeiblerDivergence:function(t,e){return Va(()=>{const n=Ti(t,Jf(),1),r=Ti(e,Jf(),1);return bi(Gr(t,Ni(Hr(n,r))),-1)})},poisson:function(t,e){return Va(()=>{const n=Ni(dr(Jf(),e));return fi(Bs(e,Gr(t,n)),-1)})},cosineProximity:xb};function Sb(t){if("string"==typeof t){if(t in Cb)return Cb[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. `+'Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new ng(e)}return t}function Ob(t,e){return Va(()=>{const n=Gr(.5,Mr(e)),r=Qg(no(e,n),t.dtype);return fi(ku(t,r),-1)})}function kb(t,e){return Va(()=>Qg(ku(hi(t,-1),hi(e,-1)),"float32"))}function Eb(t,e){return wb(t,e)}function Tb(t,e){return t.rank===e.rank&&(t=t.squeeze([t.rank-1])),(e=e.argMax(-1)).dtype!==t.dtype&&(e=e.asType(t.dtype)),ku(t,e).asType("float32")}const zb=vb,Pb=_b,Ib={binaryAccuracy:Ob,categoricalAccuracy:kb,precision:function(t,e){return Va(()=>{const n=function(t,e){return Va(()=>co(t.equal(1),e.equal(1)).sum().cast("float32"))}(t,e),r=function(t,e){return Va(()=>co(t.equal(0),e.equal(1)).sum().cast("float32"))}(t,e),i=n.add(r);return go(no(i,0),n.div(i),0).cast("float32")})},categoricalCrossentropy:zb,sparseCategoricalCrossentropy:Pb,mse:mb,MSE:mb,mae:bb,MAE:bb,mape:yb,MAPE:yb,cosine:xb};function Mb(t){if("string"==typeof t&&t in Ib)return Ib[t];if("string"!=typeof t&&null!=t)return t;throw new ng(`Unknown metric ${t}`)}function Db(t){if(og(null!==t,`Unknown LossOrMetricFn ${t}`),"string"==typeof t)return t;{let e;for(const n of Object.keys(Cb))if(Cb[n]===t){e=n;break}if(void 0!==e)return e;for(const n of Object.keys(Ib))if(Ib[n]===t){e=n;break}return void 0!==e?e:t.name}}const Ab=1048576;function Nb(t,e,n=!1){if(null==t||"object"!=typeof t||Object.getPrototypeOf(t)!==Object.prototype||!function t(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const n=Object.keys(e);for(const r of n){if("string"!=typeof r)return!1;if(!t(e[r]))return!1}return!0}if(Array.isArray(e)){for(const n of e)if(!t(n))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(t);n.length>Ab&&console.warn(`User-defined metadata of model "${e}" is too large in `+`size (length=${n.length} when serialized). It is not `+"recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+`${Ab}.`)}}function Rb(t,e,n=console.log){let r="";for(let i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[i]).slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function Fb(t,e,n){let r;try{r=JSON.stringify(t.outputShape)}catch(Dk){r="multiple"}Rb([`${t.name} (${t.getClassName()})`,r,t.countParams().toString()],e,n)}function $b(t,e,n,r){let i;try{i=JSON.stringify(t.outputShape)}catch(Dk){i="multiple"}const s=[];for(const u of t.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let t=0;t<u.inboundLayers.length;++t)s.push(`${u.inboundLayers[t].name}[${u.nodeIndices[t]}][${u.tensorIndices[t]}]`);const o=t.name,l=t.getClassName(),a=0===s.length?"":s[0];Rb([`${o} (${l})`,i,t.countParams().toString(),a],e,r);for(let u=1;u<s.length;++u)Rb(["","","",s[u]],e,r)}function Lb(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}const jb="2.0.1";class Bb{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof Bb)for(const e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(const e of t)this.add(e.key,e.value)}}add(t,e,n){if(null!=this.id2Value[t.id])throw new ng(`Duplicate key: name=${t.name}, id=${t.id}`);return this.id2Value[t.id]=function(t,e){if(null==t.dtype||t.dtype===e.dtype)return e;try{return Fr(e,t.dtype)}catch(Dk){throw new ng(`The dtype of the feed (${e.dtype}) can not be cast to the dtype `+`of the key '${t.name}' (${t.dtype}).`)}}(t,e),this.name2Id[t.name]=t.id,null!=n&&(this.id2Mask[t.id]=n),this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return null!=this.id2Value[t.id]}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof Xm){if(null==this.id2Value[t.id])throw new ng(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}{const e=this.name2Id[t];if(null==e)throw new ng(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[e]}}getMask(t){if(t instanceof Xm){if(null==this.id2Value[t.id])throw new ng(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}{const e=this.name2Id[t];if(null==e)throw new ng(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[e]}}disposeMasks(){null!=this.id2Mask&&Wa(this.id2Mask)}}const Vb={},Wb={};function Ub(t,e,n,i){const s=null!=n&&n.training,o=Array.isArray(t),l=o?t:[t],a=l.map(t=>t.name),u=[],c=e.names();for(const r of a)-1!==c.indexOf(r)?u.push(e.getValue(r)):u.push(null);null!=i&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);const h=a.join(",")+"|"+e.names().join(",");let d,p;if(null==Vb[h]){const t=function(t,e){r.assert(null!=t&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],i={};if(1===t.length){const r=Gb(t[0],e);n=r.sorted,i=r.recipientMap}else{const r=new Set;for(const s of t){const{sorted:t,recipientMap:o}=Gb(s,e);for(const e of t)r.has(e.name)||(n.push(e),r.add(e.name));for(const e in o)null==i[e]&&(i[e]=new Set),o[e].forEach(t=>i[e].add(t))}}return{sorted:n,recipientCounts:Hb(i)}}(l,e);p=t.recipientCounts,Vb[h]=d=t.sorted,Wb[h]=p}d=Vb[h],p={},s||Object.assign(p,Wb[h]);const f=new Bb(e);for(let r=0;r<d.length;++r){if(null!=i){const t=ja().numTensors;t>i.maxNumTensors&&(i.maxNumTensors=t),t<i.minNumTensors&&(i.minNumTensors=t)}const t=d[r],o=t.sourceLayer;if(o instanceof eb)continue;const l=[],c=[],h=[];let g=!1;for(const n of t.inputs){const t=f.getValue(n),r=f.getMask(n);l.push(t),c.push(r),null!=r&&(g=!0),s||(p[n.name]--,0!==p[n.name]||e.hasKey(n)||-1!==a.indexOf(n.name)||t.isDisposed||!0===n.sourceLayer.stateful||h.push(t))}g&&((n=n||{}).mask=c[0]);const m=ug(o.apply(l,n));let b=null;o.supportsMasking&&(b=o.computeMask(l,c));const y=qb(t),v=Array.isArray(y)?y:[y];for(let e=0;e<v.length;++e){f.hasKey(v[e])||f.add(v[e],m[e],Array.isArray(b)?b[0]:b);const t=a.indexOf(v[e].name);-1!==t&&(u[t]=m[e])}s||Wa(h)}return f.disposeMasks(),o?u:u[0]}function Hb(t){const e={};for(const n in t)e[n]=t[n].size;return e}function Gb(t,e){const n=new Set,r=[],i={};for(const l of e.names())n.add(l);const s=[],o=[];for(s.push(t);s.length>0;){const t=s[s.length-1];if(n.has(t.name)){s.pop();continue}const e=o[o.length-1]===s.length-1;if(0===t.inputs.length||e)s.pop(),r.push(t),n.add(t.name),e&&o.pop();else{o.push(s.length-1);for(const e of t.inputs)null==i[e.name]&&(i[e.name]=new Set),i[e.name].add(t.name),n.has(e.name)||s.push(e)}}return{sorted:r,recipientMap:i}}function qb(t){let e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{let n=null;for(let e=0;e<t.sourceLayer.inboundNodes.length;++e)for(const r of t.sourceLayer.inboundNodes[e].outputTensors)if(r.id===t.id){n=e;break}e=t.sourceLayer.getOutputAt(n)}return e}class Kb extends tb{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){const t=this.getClassName().toLowerCase();this.name=Lm(t)}if(this.supportsMasking=!1,this.trainable_=!0,this.inputs=Array.isArray(t.inputs)?t.inputs.slice():[t.inputs],this.outputs=Array.isArray(t.outputs)?t.outputs.slice():[t.outputs],mg(this.inputs).length!==this.inputs.length)throw new ng("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+`${this.inputs.map(t=>t.name)}`);mg(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+`${this.outputs.map(t=>t.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const t=b.nodeIndex,e=b.tensorIndex;this.outputLayers.push(b.sourceLayer),this.outputLayersNodeIndices.push(t),this.outputLayersTensorIndices.push(e)}for(const b of this.inputs){const t=b.sourceLayer,e=b.nodeIndex,n=b.tensorIndex;og(0===e,"input layer has >1 nodes"),og(0===n,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(e),this.inputLayersTensorIndices.push(n)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const e=this.inputLayers[b];if(!(e instanceof eb))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. "+`Received inputs: ${t.inputs}. `+`Input ${b} (0-based) originates `+`from layer type ${e.getClassName()}.`);this.inputNames.push(e.name),this.feedInputShapes.push(e.batchInputShape),this.feedInputNames.push(e.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(t=>t.shape),this.internalOutputShapes=this.outputs.map(t=>t.shape);const e={},n={},r={},i={},s={},o=[],l=(t,e,n,r,i,a)=>{null!=r&&null!=i&&null!=a||(r=t.sourceLayer,i=t.nodeIndex,a=t.tensorIndex);const u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new eg(`The tensor ${t.name} at layer "${r.name}" `+"is part of a cycle.");if(-1!==e.indexOf(u))return;this.containerNodes.add(Kb.nodeKey(r,i)),r.id in s||(s[r.id]=Object.keys(s).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let s=0;s<c;s++)l(u.inputTensors[s],e,n,u.inboundLayers[s],u.nodeIndices[s],u.tensorIndices[s]);for(e.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);o.push(u)},a=[],u=[];for(const b of this.outputs)l(b,a,u);const c=o.slice().reverse();for(const b of c){n[b.id]=b,b.id in e||(e[b.id]=0);let t=e[b.id];t=Math.max(t,null==r[b.outboundLayer.id]?0:r[b.outboundLayer.id]),r[b.outboundLayer.id]=t,i[b.outboundLayer.id]=b.outboundLayer,e[b.id]=t;for(let r=0;r<b.inboundLayers.length;r++){const i=b.inboundLayers[r].inboundNodes[b.nodeIndices[r]];e[i.id]=Math.max(t+1,null==e[i.id]?0:e[i.id]),n[i.id]=i}}const h={};for(const b in e){const t=e[b];t in h||(h[t]=[]),h[t].push(n[b])}const d={};for(const b in r){const t=r[b];t in d||(d[t]=[]),d[t].push(i[b])}let p=Object.keys(d).map(t=>parseInt(t,10)).sort(gg);this.layers=[];for(const b of p){const t=d[b];t.sort((t,e)=>{const n=s[t.id],r=s[e.id];return n<r?-1:n>r?1:0});for(const e of t)e instanceof Kb&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,p=Object.keys(h).map(t=>parseInt(t,10)).sort(gg);const f=this.inputs.slice(),g=[];for(const b of p)for(const t of h[b]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new eg(`Graph disconnected: cannot obtain value for tensor ${n}`+` at layer "${e.name}". `+"The following previous layers were accessed without "+`issue: ${g}`);for(const e of t.outputTensors)f.push(e);g.push(e.name)}}this.nodesByDepth=h;const m=this.layers.map(t=>t.name);for(const b of m){const t=m.filter(t=>t===b).length;if(1!==t)throw new eg(`The name "${b}" is used ${t} times `+"in the model. All layer names should be unique. Layer names: "+JSON.stringify(m))}this.outboundNodes=[],this.inboundNodes=[],new Qm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(t=>null),outputMasks:this.outputs.map(t=>null),inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs.map(t=>t.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const e of this.layers)t.numDisposedVariables+=e.dispose().numDisposedVariables;for(const e of this.internalContainerRefs)t.numDisposedVariables+=e.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(e=>{e._trainableWeights.forEach(e=>e.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new ng("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const e of this.layers)t=t.concat(e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.layers)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.layers)e.push(...t.trainableWeights);return e.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,e=!0){const n={};let r=0;for(const s of this.layers)for(const t of s.weights){if(null!=n[t.originalName])throw new ng(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,r++}const i=[];for(const s in t){let r=s;if(null==n[s]){const t=s.split("/");r=t.slice(0,-2).concat([t[t.length-1]]).join("/")}if(null!=n[r])i.push([n[r],t[s]]);else if(e)throw new ng(`Provided weight data has no target variable: ${s}`);delete n[r]}if(e){const t=[];for(const e in n)t.push(e);if(t.length>0)throw new ng(`${t.length} of ${r} weights are not set: `+`${t}`)}Km(i)}updatedConfig(){const t=this.getConfig(),e={};return e.className=this.getClassName(),e.config=t,e.kerasVersion=`tfjs-layers ${jb}`,e.backend="TensorFlow.js",e}toJSON(t,e=!0){const n=function t(e,n){if(null==e)return null;if("string"==typeof e)return cg(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const r=[],i=e.length;for(let s=0;s<i;++s){const i=e[s];Lb(n,s,i)?r.push(i):r.push(t(i,n))}return r}{const n={};for(const r of Object.keys(e)){const i=e[r];n[cg(r)]="name"!==r&&"className"!==r||"string"!=typeof i?t(i,r):i}return n}}(this.updatedConfig());return e?JSON.stringify(n):n}call(t,e){return Va(()=>{t=ug(t);const n=new Bb;for(let e=0;e<this.inputs.length;++e)n.add(this.inputs[e],t[e]);return Ub(this.outputs,n,e)})}computeMask(t,e){return Va(()=>{let n;return t=ug(t),n=null==e?sg(null,t.length):ug(e),this.runInternalGraph(t,n)[1]})}computeOutputShape(t){const e=Bm(t);if(e.length!==this.inputLayers.length)throw new ng(`Invalid inputShape argument ${t}: `+`model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let o=0;o<e.length;o++)n[this.inputLayers[o].name+"_0_0"]=e[o];const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(gg);if(r.length>1)for(const o of r){const t=this.nodesByDepth[o];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map(t=>t.id).indexOf(t.id))continue;const r=[];for(let o=0;o<e.inboundLayers.length;o++)r.push(n[`${e.inboundLayers[o].name}_${e.nodeIndices[o]}_${e.tensorIndices[o]}`]);const i=Bm(t.computeOutputShape(ag(r))),s=t.inboundNodes.indexOf(e);for(let e=0;e<i.length;e++)n[`${t.name}_${s}_${e}`]=i[e]}}const i=[],s=[];for(let o=0;o<this.outputLayers.length;o++)s.push(`${this.outputLayers[o].name}_${this.outputLayersNodeIndices[o]}_${this.outputLayersTensorIndices[o]}`);for(let o=0;o<s.length;o++){const t=s[o];og(t in n),i.push(n[t])}return ag(i)}runInternalGraph(t,e){null==e&&(e=sg(null,t.length));const n={};for(let l=0;l<this.inputs.length;++l)n[this.inputs[l].id]=[t[l],e[l]];const r=Object.keys(this.nodesByDepth).map(t=>parseInt(t,10)).sort(gg);for(const l of r){const t=this.nodesByDepth[l];for(const e of t){const t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,s=new Array;for(const e of r)e.id in n&&s.push(n[e.id]);if(s.length===r.length){let r,o,l,a,u={};if(null!=e.callArgs&&(u=e.callArgs),1===s.length){const[e,n]=s[0];null==u.mask&&(u.mask=n),l=ug(t.call(e,u)),a=ug(t.computeMask(e,n)),r=[e],o=[n]}else r=s.map(t=>t[0]),o=s.map(t=>t[1]),null==u.mask&&(u.mask=o),l=ug(t.call(r,u)),a=ug(t.computeMask(r,o));if(t.activityRegularizer)throw new rg("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let t=0;t<i.length;++t)n[i[t].id]=[l[t],a[t]]}}}const i=[],s=[],o=[];for(const l of this.outputs){og(l.id in n,`Could not compute output ${l.name} : ${l.id}`);const[t,e]=n[l.id];o.push(t.shape),i.push(t),s.push(e)}return[i,s,o]}buildNodeConversionMap(t){const e={};let n;for(const r of this.layers){n=r instanceof Kb?1:0;for(let t=0;t<r.inboundNodes.length;t++){const i=Kb.nodeKey(r,t);this.containerNodes.has(i)&&(e[i]=n,n+=1)}}return e}getLayer(t,e){if(null!=e){if(this.layers.length<=e)throw new ng(`Was asked to retrieve layer at index ${e}, but model only `+`has ${this.layers.length} layer(s).`);return this.layers[e]}if(null==t)throw new ng("Provide either a layer name or layer index");for(const n of this.layers)if(n.name===t)return n;throw new ng(`No such layer: ${t}`)}calculateLosses(){return Va(()=>{const t=[];for(const e of this.layers)for(let n=0;n<e.inboundNodes.length;++n){const r=Kb.nodeKey(e,n);this.containerNodes.has(r)&&t.push(...e.calculateLosses())}return t})}getConfig(){const t={name:this.name},e=this.buildNodeConversionMap(this.layers),n=[];for(const s of this.layers){const t=s.getClassName(),r=s.getConfig(),i=[];for(let n=0;n<s.inboundNodes.length;n++){const t=s.inboundNodes[n],r=Kb.nodeKey(s,n);let o={};if(this.containerNodes.has(r)){if(t.callArgs)try{JSON.stringify(t.callArgs),o=t.callArgs}catch(Dk){console.warn(`Layer ${s.name} was passed `+"non-serializable keyword arguments: "+`${t.callArgs}. They will not be included `+"in the serialized model (and thus will be missing at deserialization time)."),o={}}if(t.inboundLayers.length>0){const n=[];for(let r=0;r<t.inboundLayers.length;r++){const i=t.inboundLayers[r],s=t.tensorIndices[r];let l=e[Kb.nodeKey(i,t.nodeIndices[r])];null==l&&(l=0),n.push([i.name,l,s,o])}i.push(n)}}}const o={};o.name=s.name,o.className=t,o.config=r,o.inboundNodes=i,n.push(o)}t.layers=n;const r=[];for(let s=0;s<this.inputLayers.length;s++){const t=this.inputLayers[s],n=Kb.nodeKey(t,this.inputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let i=e[n];null==i&&(i=0),r.push([t.name,i,this.inputLayersTensorIndices[s]])}t.inputLayers=r;const i=[];for(let s=0;s<this.outputLayers.length;s++){const t=this.outputLayers[s],n=Kb.nodeKey(t,this.outputLayersNodeIndices[s]);if(!this.containerNodes.has(n))continue;let r=e[n];null==r&&(r=0),i.push([t.name,r,this.outputLayersTensorIndices[s]])}return t.outputLayers=i,t}static fromConfig(t,e,n={},r=!1){const i={},s={};function o(t,e){t.name in s?s[t.name].push(e):s[t.name]=[e]}function l(t,e){const n=[];let r;for(const s of e){const l=s[0],a=s[1],u=s[2];if(r=null==s[3]?{}:s[3],!(l in i))return void o(t,e);const c=i[l];if(c.inboundNodes.length<=a)return void o(t,e);n.push(c.inboundNodes[a].outputTensors[u])}n.length>0&&t.apply(ag(n),r)}function a(t){const n=t.name,s=fb(t,null!=e.customObjects?e.customObjects:{});s.setFastWeightInitDuringBuild(r),i[n]=s,t.inboundNodes.forEach(t=>{if(!(t instanceof Array))throw new ng(`Corrupted configuration, expected array for nodeData: ${t}`);o(s,t)})}const u=e.name,c=e.layers;for(const g of c)a(g);for(;!bg(s);)for(const t of c){const e=i[t.name];if(e.name in s){const t=s[e.name];delete s[e.name];for(const n of t)l(e,n)}}const h=[],d=[],p=e.inputLayers;for(const g of p){const t=g[0],e=g[1],n=g[2];og(t in i),h.push(i[t].inboundNodes[e].outputTensors[n])}const f=e.outputLayers;for(const g of f){const t=g[0],e=g[1],n=g[2];og(t in i),d.push(i[t].inboundNodes[e].outputTensors[n])}return new t({inputs:h,outputs:d,name:u})}get stateful(){if(this._stateful)throw new ng("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Va(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}function Yb(t,e){return function(t,e,n){const r=e.length;if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>null);if(1===r)return Array.isArray(t)&&1===t.length?t:"object"==typeof t&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided classWeight is an array of ${t.length} `+`element(s), but the model has ${r} outputs. `+"Make sure a set of weights is provided for each model output.");return t}if("object"==typeof t&&Object.keys(t).length>0&&"object"==typeof t[Object.keys(t)[0]]){const n=[];return e.forEach(e=>{n.push(e in t?t[e]:null)}),n}throw new Error(`The model has multiple (${r}) outputs, `+"so classWeight must be either an array with "+`${r} elements or an object with ${e} keys. `+`Provided classWeight not understood: ${JSON.stringify(t)}`)}(t,e)}async function Xb(t,e,n,r){if(null!=e||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const e=Va(()=>{if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1)return t.argMax(1);if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) `+"during handling of class weights. The size is expected to be >= 1.")}throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during `+"handling of class weights. The rank is expected to be 1 or 2.")}),r=Array.from(await e.data());Wa(e);const i=[];return r.forEach(t=>{if(null==n[t])throw new Error("classWeight must contain all classes in the training data. "+`The class ${t} exists in the data but not in `+"classWeight");i.push(n[t])}),wr(i,"float32")}return null}function Zb(t,e){return Gr(t,e)}const Qb=32;function Jb(t,e){let n,i;i=e.ys,r.assert(null!=(n=e.xs)&&null!=i,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+`${e}`);const s=ty("input",t.inputNames,n),o=ty("output",t.outputNames,i),l=s[0].shape[0];r.assert(s.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset `+`provides ${s.length} inputs.  (Expected input keys: `+`${JSON.stringify(t.inputNames)})`),r.assert(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset `+`provides ${o.length} outputs.  (Expected output keys: `+`${JSON.stringify(t.outputNames)})`);for(let a=0;a<s.length;a++)r.assert(s[a].shape[0]===l,()=>"Batch size mismatch: input "+`${t.inputNames[a]} has ${s[a].shape[0]}; `+`expected  ${l} based on input ${t.inputNames[0]}.`);for(let a=0;a<o.length;a++)r.assert(o[a].shape[0]===l,()=>"Batch size mismatch: output "+`${t.outputNames[a]} has ${o[a].shape[0]}; `+`expected  ${l} based on input ${t.inputNames[0]}.`);return{xs:s,ys:o}}function ty(t,e,n){if(n instanceof ye)return[n];if(Array.isArray(n))return r.assert(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const i of e){if(null==n[i])throw new ng("The feature data generated by the dataset lacks the required "+`${t} key '${i}'.`);r.push(n[i])}return r}}function ey(t){return"function"==typeof t.iterator}function ny(t){r.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function ry(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(t=>tm(t,e,n-e)):tm(t,e,n-e)}function iy(t,e){return Va(()=>null==t?null:Array.isArray(t)?t.map(t=>iy(t,e)):am(t,"int32"===e.dtype?e:e.toInt()))}function sy(t,e){const n=[];let r=0,i=null;for(;r<t;)(i=r+e)>=t&&(i=t),n.push([r,i]),r=i;return n}function oy(t){const e=[];t instanceof ye&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(1===r.rank)e.push(Jg(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function ly(t,e){if(null==t)return;const n=[];if(e instanceof ye)n.push(e.id);else if(Array.isArray(e))e.forEach(t=>n.push(t.id));else if(null!=e)for(const i in e)n.push(e[i].id);const r=[];if(t instanceof ye)-1===n.indexOf(t.id)&&r.push(t);else if(Array.isArray(t))t.forEach(t=>{-1===n.indexOf(t.id)&&r.push(t)});else if(null!=t)for(const i in t){const e=t[i];-1===n.indexOf(e.id)&&r.push(e)}r.forEach(t=>{t.isDisposed||t.dispose()})}function ay(t){return Array.isArray(t)}function uy(t){return!function(t){return t instanceof ye}(t)&&!ay(t)}function cy(t,e,n,r=!0,i=""){if(null==e||0===e.length){if(null!=t){let e=!1;if(ay(t)&&t.length>0)e=!0;else if(uy(t)){for(const n in t)if(t.hasOwnProperty(n)){e=!0;break}}else e=!0;if(e)throw new ng(`Error when checking model ${i} expected no data, `+`but got ${t}`)}return[]}if(null==t)return e.map(t=>null);let s;if(uy(t)){t=t,s=[];for(const n of e){if(null==t[n])throw new ng(`No data provided for "${n}". Need data for each key in: `+`${e}`);s.push(t[n])}}else if(ay(t)){if((t=t).length!==e.length)throw new ng(`Error when checking model ${i}: the Array of `+"Tensors that you are passing to your model is not the size the "+`model expected. Expected to see ${e.length} Tensor(s), but `+`instead got the following list of Tensor(s): ${t}`);s=t}else{if(t=t,e.length>1)throw new ng(`The model ${i} expects ${e.length} Tensor(s), `+`but only received one Tensor. Found: Tensor with shape ${t.shape}`);s=[t]}if(s=oy(s),null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=s[o];if(t.shape.length!==n[o].length)throw new ng(`Error when checking ${i}: expected ${e[o]} `+`to have ${n[o].length} dimension(s). but got array with `+`shape ${t.shape}`);for(let s=0;s<n[o].length;++s){if(0===s&&!r)continue;const l=t.shape[s],a=n[o][s];if(null!=a&&a>=0&&l!==a)throw new ng(`Error when checking ${i}: expected ${e[o]} `+`to have shape [${n[o]}], but got array with shape `+`[${t.shape}].`)}}return s}function hy(t,e,n,r=!0,i=""){let s;if(Array.isArray(t)){if(t.length!==e.length)throw new ng(`Error when checking model ${i}: the Array of `+"Tensors that you are passing to your model is not the size the "+`the model expected. Expected to see ${e.length} Tensor(s),`+` but instead got ${t.length} Tensors(s).`);s=t}else{if(e.length>1)throw new ng(`The model expects ${e.length} ${i} Tensors, `+"but only received one Tensor. Found: array with shape "+`${JSON.stringify(t.shape)}.`);s=[t]}if(null!=n)for(let o=0;o<e.length;++o){if(null==n[o])continue;const t=s[o];if(t.shape.length!==n[o].length)throw new ng(`Error when checking ${i}: expected ${e[o]} `+`to have ${n[o].length} dimension(s), but got array with `+`shape ${JSON.stringify(t.shape)}`);for(let s=0;s<n[o].length;++s){if(0===s&&!r)continue;const l=t.shape[s],a=n[o][s];if(null!=a&&a!==l)throw new ng(`Error when checking ${i}: expected `+`${e[o]} to have shape ${JSON.stringify(n[o])} but `+`got array with shape ${JSON.stringify(t.shape)}.`)}}}const dy="layers-model";class py extends Kb{constructor(t){super(t),this.isTraining=!1}summary(t,e,n=console.log){if(!this.built)throw new ng("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");!function(t,e,n,r=console.log){const i=function(t){let e=!0;const n=[],r=[];for(const i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(const i of n){if(i.length>1||1===i.length&&i[0].inboundLayers.length>1){e=!1;break}r.push(...i)}if(e)for(const i of t.layers){let t=!1;for(const n of i.inboundNodes)if(-1!==r.indexOf(n)){if(t){e=!1;break}t=!0}if(!e)break}return e}(t),s=["Layer (type)","Output shape","Param #"];let o;if(i?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(t=>Math.floor(e*t))),!i){s.push("Receives inputs"),o=[];for(const e in t.nodesByDepth)o.push(...t.nodesByDepth[e])}r("_".repeat(e)),Rb(s,n,r),r("=".repeat(e));const l=t.layers;for(let c=0;c<l.length;++c)i?Fb(l[c],n,r):$b(l[c],n,o,r),r((c===l.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const a=function(t){return Um(null!=t.collectedTrainableWeights?t.collectedTrainableWeights:t.trainableWeights)}(t),u=Um(t.nonTrainableWeights);r(`Total params: ${a+u}`),r(`Trainable params: ${a}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}(this,t,e,n)}compile(t){if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer_=function(t){const e={Adagrad:()=>Zh.adagrad(.01),Adadelta:()=>Zh.adadelta(1,.95,Jf()),Adam:()=>Zh.adam(.001,.9,.999,Jf()),Adamax:()=>Zh.adamax(.002,.9,.999,Jf(),0),RMSProp:()=>Zh.rmsprop(.001,.9,0,Jf()),SGD:()=>Zh.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new ng(`Unknown Optimizer ${t}`)}(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof Vh))throw new ng("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let e=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new ng("When passing an Array as loss, it should have one entry per "+`model output. The model has ${this.outputs.length} output(s), `+`but you passed loss=${t.loss}.`);e=t.loss.map(t=>Sb(t))}else{const n=Sb(t.loss);this.outputs.forEach(t=>{e.push(n)})}else{t.loss=t.loss;for(const e in t.loss)if(-1===this.outputNames.indexOf(e))throw new ng(`Unknown entry in loss dictionary: "${e}". `+`Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==t.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume `+"this was done on purpose, and we will not be expecting data "+`to be passed to ${n} during training`),e.push(Sb(t.loss[n]))}this.lossFunctions=e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let s=0;s<this.outputs.length;++s){const t=this.internalOutputShapes[s];this.feedOutputNames.push(this.outputNames[s]),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[s])}const n=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Vg("loss",()=>{for(let t=0;t<this.outputs.length;++t){if(-1!==n.indexOf(t))continue;const e=this.lossFunctions[t];this.outputs.length>1&&(this.metricsTensors.push([e,t]),this.metricsNames.push(this.outputNames[t]+"_loss"))}});const r=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(t=>[]);let n;if("string"==typeof t||"function"==typeof t)n=[t];else{if(!Array.isArray(t)&&"object"!=typeof t)throw new TypeError("Type of metrics argument not understood. Expected an string,"+`function, Array, or Object, found: ${t}`);n=t}if(Array.isArray(n))return e.map(t=>n);{const t=[];for(const r of e){let e=n.hasOwnProperty(r)?n[r]:[];Array.isArray(e)||(e=[e]),t.push(e)}return t}}(t.metrics,this.outputNames),i=(t,e,n)=>{this.outputNames.length>1&&(e=this.outputNames[t]+"_"+e),this.metricsNames.push(e),this.metricsTensors.push([n,t])};Vg("metric",()=>{for(let t=0;t<this.outputs.length;++t)-1===n.indexOf(t)&&(e=>{let n,r,s;for(const o of e){if("string"==typeof o&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(o)){const e=this.internalOutputShapes[t];let i;1===e[e.length-1]||this.lossFunctions[t]===wb?-1!==["accuracy","acc"].indexOf(o)?r=Ob:-1!==["crossentropy","ce"].indexOf(o)&&(r=Eb):this.lossFunctions[t]===_b?-1!==["accuracy","acc"].indexOf(o)?r=Tb:-1!==["crossentropy","ce"].indexOf(o)&&(r=Pb):-1!==["accuracy","acc"].indexOf(o)?r=kb:-1!==["crossentropy","ce"].indexOf(o)&&(r=zb),-1!==["accuracy","acc"].indexOf(o)?i="acc":-1!==["crossentropy","ce"].indexOf(o)&&(i="ce"),s=r,n=""+i}else{const t=Mb(o);s=t,n=""+Db(o)}let e;Vg(n,()=>{e=s}),i(t,n,e)}})(r[t])}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,e,n={}){const r=null==n.batchSize?32:n.batchSize;ny(r);const i=this.standardizeUserDataXY(t,e,!0,r);try{const s=i[0].concat(i[1]);return this.makeTestFunction(),ag(this.testLoop(this.testFunction,s,r,n.verbose,n.steps))}finally{ly(i[0],t),ly(i[1],e)}}async evaluateDataset(t,e){return this.makeTestFunction(),async function(t,e,n){const i=null!=(n=n||{}).batches,s=t.testFunction;let o=[];if(n.verbose>0)throw new rg("Verbose mode is not implemented yet.");r.assert(!i||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but "+`received ${JSON.stringify(n.batches)}`);const l="function"==typeof e.next?e:await e.iterator();let a=0,u=0;for(;!i||u<n.batches;){const e=await l.next();if(o=Va(()=>{if(e.value){const{xs:n,ys:r}=Jb(t,e.value),i=n.concat(r),l=Va(()=>s(i));if(Wa(i),0===u)for(let t=0;t<l.length;++t)o.push(_r(0));const c=i[0].shape[0];for(let t=0;t<l.length;++t){const e=l[t],n=o[t];o[t]=Va(()=>dr(o[t],Gr(c,e))),u>0&&Wa(n)}Wa(l),a+=c,++u}return o}),e.done){i&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` "+`batches (in this case, ${n.batches} batches). `+"You may need to use the repeat() function when building your dataset.");break}}for(let r=0;r<o.length;++r){const t=o[r];o[r]=Hr(o[r],a),Wa(t)}return ag(o)}(this,t,e)}checkNumSamples(t,e,n,r="steps"){let i;if(null!=n){if(i=null,null!=e)throw new ng(`If ${r} is set, batchSize must be null or undefined.`+`Got batchSize = ${e}`)}else{if(null==t)throw new ng("Either the input data should have a defined shape, or "+`${r} shoud be specified.`);i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i}execute(t,e){if(Array.isArray(e)&&0===e.length)throw new ng("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(e),r=this.retrieveSymbolicTensors(n?e:[e]),i=new Bb;if(t instanceof ye&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new ng(`The number of inputs provided (${t.length}) `+"does not match the number of inputs of this model "+`(${this.inputs.length}).`);for(let e=0;e<this.inputs.length;++e)i.add(this.inputs[e],t[e])}else for(const o of this.inputs){const e=t[o.name];if(null==e)throw new ng(`No value is provided for the model's input ${o.name}`);i.add(o,e)}const s=Ub(r,i);return n?s:s[0]}retrieveSymbolicTensors(t){const e=sg(null,t.length);let n=t.length;for(const r of this.layers){const i=Array.isArray(r.output)?r.output:[r.output],s=i.map(t=>t.name);for(let r=0;r<t.length;++r){const o=s.indexOf(t[r]);if(-1!==o&&(e[r]=i[o],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw e.forEach((e,r)=>{null==e&&n.push(t[r])}),new ng("Cannot find SymbolicTensors for output name(s): "+`${JSON.stringify(n)}`)}return e}predictLoop(t,e=32,n=!1){return Va(()=>{const r=this.checkNumSamples(t);if(n)throw new rg("Verbose predictLoop() is not implemented yet.");const i=sy(r,e),s=this.outputs.map(t=>[]);for(let e=0;e<i.length;++e)Va(()=>{const n=ry(t,i[e][0],i[e][1]),r=[];if(Array.isArray(n))for(let t=0;t<n.length;++t)r.push({key:this.inputs[t],value:n[t]});else r.push({key:this.inputs[0],value:n});const s=new Bb(r);return Ub(this.outputs,s)}).forEach((t,e)=>s[e].push(t));return ag(s.map(t=>Ar(t,0)))})}predict(t,e={}){const n=oy(t);hy(n,this.inputNames,this.feedInputShapes,!1);try{const r=null==e.batchSize?32:e.batchSize;return ny(r),this.predictLoop(n,r)}finally{ly(n,t)}}predictOnBatch(t){hy(t,this.inputNames,this.feedInputShapes,!0);const e=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,e)}standardizeUserDataXY(t,e,n=!0,i){if(null==this.optimizer_)throw new eg("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const s=[];for(let r=0;r<this.feedOutputShapes.length;++r){const t=this.feedOutputShapes[r];s.push(this.feedLossFns[r]===_b?t.slice(0,t.length-1).concat([1]):t)}if(function(t,e,n){const i=mg(t.map(t=>t.shape[0]));i.sort();const s=mg(e.map(t=>t.shape[0]));if(s.sort(),i.length>1)throw new ng("All input Tensors (x) should have the same number of samples. Got array shapes: "+`${JSON.stringify(t.map(t=>t.shape))}`);if(s.length>1)throw new ng("All target Tensors (y) should have the same number of samples. Got array shapes: "+`${JSON.stringify(e.map(t=>t.shape))}`);if(i.length>0&&s.length>0&&!r.arraysEqual(i,s))throw new ng("Input Tensors should have the same number of samples as target "+`Tensors. Found ${i[0]} input sample(s) and ${s[0]} target `+"sample(s).")}(t=cy(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=cy(e,this.feedOutputNames,s,!1,"target")),function(t,e,n){const r=[mb,wb,vb];for(let i=0;i<t.length;++i){const s=t[i],o=e[i],l=n[i];if(null!=o){if(o===vb&&1===s.shape[s.shape.length-1])throw new ng(`You are passing a target array of shape ${s.shape} while using `+"a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o)){const t=s.shape.slice(1),e=l.slice(1);for(let n=0;n<t.length;++n){const r=t[n],i=e[n];if(null!=i&&r!==i)throw new ng(`A target Tensor with shape ${s.shape} was passed for an `+`output of shape ${l}, while using a loss function that `+"expects targets to have the same shape as the output.")}}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&t[0].shape[0]%i!=0)throw new ng("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+`${i}. Found: ${t[0].shape[0]} sample(s).`);return[t,e]}async standardizeUserData(t,e,n,r,i=!0,s){const[o,l]=this.standardizeUserDataXY(t,e,i,s);if(null!=n)throw new Error("sample weight is not supported yet.");let a=null;if(null!=r){const t=Yb(r,this.outputNames);a=[];for(let e=0;e<t.length;++e)a.push(await Xb(l[e],null,t[e]))}return[o,l,a]}testLoop(t,e,n,r=0,i){return Va(()=>{const s=this.checkNumSamples(e,n,i,"steps"),o=[];if(r>0)throw new rg("Verbose mode is not implemented yet.");if(null!=i)throw new rg("steps mode in testLoop() is not implemented yet");{const r=sy(s,n),i=wr(Zg(0,s));for(let n=0;n<r.length;++n){const s=r[n][0],l=r[n][1],a=tm(i,s,l-s),u=iy(e,a),c=t(u);if(0===n)for(let t=0;t<c.length;++t)o.push(_r(0));for(let t=0;t<c.length;++t)o[t]=dr(o[t],Gr(l-s,c[t]))}for(let t=0;t<o.length;++t)o[t]=Hr(o[t],s)}return o})}getDedupedMetricsNames(){const t=this.metricsNames,e=[];for(let n=0;n<t.length;++n){const r=t[n];let i=r;lg(t,r)>1&&(i+=`_${lg(t.slice(0,n),r)}`),e.push(i)}return e}makeTrainFunction(){return t=>{const e=[],n=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),s=[],o=this.collectedTrainableWeights.map(t=>t.read());return[this.optimizer_.minimize(()=>{const t=[];for(let e=0;e<this.inputs.length;++e)t.push({key:this.inputs[e],value:n[e]});const o=new Bb(t),l=Ub(this.outputs,o,{training:!0});let a;for(let n=0;n<this.lossFunctions.length;++n){let t=(0,this.lossFunctions[n])(r[n],l[n]);null!=i[n]&&(t=Zb(t,i[n]));const s=fi(t);e.push(s),a=0===n?t:dr(a,t)}for(let n=0;n<this.metricsTensors.length;++n){let t;if(this.outputs.length>1&&n<this.outputs.length)t=e[n];else{const e=this.metricsTensors[n][1];t=fi((0,this.metricsTensors[n][0])(r[e],l[e]))}Ua(t),s.push(t)}return a=fi(a),this.calculateLosses().forEach(t=>{a=dr(a,t)}),a},!0,o)].concat(s)}}makeTestFunction(){this.testFunction=t=>Va(()=>{const e=[];let n;const r=t.slice(0,this.inputs.length),i=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=[];for(let t=0;t<this.inputs.length;++t)s.push({key:this.inputs[t],value:r[t]});const o=new Bb(s),l=Ub(this.outputs,o);for(let t=0;t<this.lossFunctions.length;++t){const r=fi((0,this.lossFunctions[t])(i[t],l[t]));n=0===t?r:dr(n,r),e.push(n)}for(let t=0;t<this.metricsTensors.length;++t){const n=this.metricsTensors[t][1],r=fi((0,this.metricsTensors[t][0])(i[n],l[n]));e.push(r)}return e})}async fit(t,e,n={}){return async function(t,e,n,i={}){if(t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let s,o,l,a,u,c,h;t.isTraining=!0;try{const d=null==i.batchSize?32:i.batchSize;ny(d);const p=!1,f=await t.standardizeUserData(e,n,i.sampleWeight,i.classWeight,p,d);s=f[0],o=f[1],h=f[2];let g,m=!1;if(null!=i.validationData&&i.validationData.length>0){if(m=!0,2!==i.validationData.length)throw 3===i.validationData.length?new rg("validationData including sample weights is not supported yet."):new ng("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+`${i.validationData} is invalid.`);l=i.validationData[0],a=i.validationData[1];const e=!0,n=await t.standardizeUserData(l,a,null,null,e,d);g=(u=n[0]).concat(c=n[1])}else if(null!=i.validationSplit&&i.validationSplit>0&&i.validationSplit<1){m=!0;const t=Math.floor(s[0].shape[0]*(1-i.validationSplit)),e=s[0].shape[0];u=ry(s,t,e),s=ry(s,0,t),c=ry(o,t,e),o=ry(o,0,t),g=u.concat(c)}else null!=i.validationSteps&&(m=!0);const b=s.concat(o).concat(h);t.checkTrainableWeightsConsistency();const y=t.makeTrainFunction(),v=t.getDedupedMetricsNames();let _,w;m?(t.makeTestFunction(),_=t.testFunction,w=v.slice().concat(v.map(t=>"val_"+t))):(_=null,g=[],w=v.slice());const x=hb(i.callbacks,i.yieldEvery);return await async function(t,e,n,i,s,o,l,a,u,c,h,d,p,f,g){null==s&&(s=32),null==o&&(o=1),null==h&&(h=!0),null==p&&(p=0);let m=!1;null!=u&&null!=c&&(m=!0);const b=t.checkNumSamples(n,s,null,"steps_per_epoch");let y;null!=b&&(y=Zg(0,b)),null==l&&(l=1);const{callbackList:v,history:_}=pb(a,l,o,p,b,null,s,m,d);v.setModel(t),t.history=_,await v.onTrainBegin(),t.stopTraining_=!1;for(let w=p;w<o;++w){await v.onEpochBegin(w);const o={};{if("batch"===h)throw new rg("batch shuffling is not implemneted yet");h&&r.shuffle(y);const l=wr(y),a=sy(b,s);for(let r=0;r<a.length;++r){const h={};if(await v.onBatchBegin(r,h),Va(()=>{const d=a[r][0],p=a[r][1],f=tm(l,d,p-d);h.batch=r,h.size=p-d;const g=iy(n,f),b=e(g);for(let t=0;t<i.length;++t){const e=b[t];h[i[t]]=e,Ua(e)}if(r===a.length-1&&m){const e=t.testLoop(u,c,s);for(let t=0;t<i.length;++t){const n=i[t],r=e[t];Ua(r),o["val_"+n]=r}}}),await v.onBatchEnd(r,h),rb(h),t.stopTraining_)break}l.dispose()}if(await v.onEpochEnd(w,o),t.stopTraining_)break}return await v.onTrainEnd(),await t.history.syncData(),t.history}(t,y,b,v,d,i.epochs,i.verbose,x,_,g,i.shuffle,w,i.initialEpoch)}finally{t.isTraining=!1,ly(s,e),ly(o,n),ly(u,l),ly(c,a),null!=h&&Wa(h)}}(this,t,e,n)}async fitDataset(t,e){return async function(t,e,n){const i=null!=n.batchesPerEpoch;if(r.assert(null!=t.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),r.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),r.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive "+`integer, but got ${n.epochs}`),r.assert(!i||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a "+`positive integer if specified, but got ${n.batchesPerEpoch}`),r.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=null!=n.validationData;let o,l;if(s)if(ey(n.validationData))r.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, "+`but got ${n.validationBatches}`);else{const t=function(t){if(3===t.length)throw new rg("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}(n.validationData);o=t.xs,l=t.ys}const a=t.makeTrainFunction(),u=t.getDedupedMetricsNames();let c;c=s?u.slice().concat(u.map(t=>"val_"+t)):u.slice();const h=hb(n.callbacks,n.yieldEvery),d=null==n.verbose?1:n.verbose,{callbackList:p,history:f}=pb(h,d,n.epochs,null,null,function(t,e){let n=null;return null!=e.batchesPerEpoch?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}(e,n),null,s,c);p.setModel(t),t.history=f,await p.onTrainBegin(),t.stopTraining_=!1;let g=null==n.initialEpoch?0:n.initialEpoch,m=await e.iterator();for(;g<n.epochs;){const r={};await p.onEpochBegin(g);let c=0,h=0;for(i||(m=await e.iterator());!i||c<n.batchesPerEpoch;){const e=await m.next();if(i&&e.done){console.warn("You provided `batchesPerEpoch` as "+`${n.batchesPerEpoch}, `+"but your dataset iterator ran out of data after "+`${c} batches; `+"interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+`${n.batchesPerEpoch*n.epochs} batches). `+"You may need to use the repeat() function when building your dataset.");break}if(null!=e.value){const{xs:r,ys:i}=Jb(t,e.value),s={};s.batch=h,s.size=r[0].shape[0],await p.onBatchBegin(h,s);const o=[];if(null!=n.classWeight){const e=Yb(n.classWeight,t.outputNames);for(let t=0;t<e.length;++t)o.push(await Xb(i[t],null,e[t]))}const l=r.concat(i).concat(o),d=a(l);Wa(l);for(let t=0;t<u.length;++t){const e=d[t];s[u[t]]=e,Ua(e)}await p.onBatchEnd(h,s),rb(s),h++,c++}if(i?c>=n.batchesPerEpoch:e.done){if(s){let e;e=ey(n.validationData)?ug(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):ug(t.evaluate(o,l,{batchSize:null==n.validationBatchSize?Qb:n.validationBatchSize,verbose:0}));for(let n=0;n<t.metricsNames.length;++n)r[`val_${t.metricsNames[n]}`]=e[n]}break}if(t.stopTraining_)break}if(await p.onEpochEnd(g,r),g++,t.stopTraining_)break}return await p.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}(this,t,e)}async trainOnBatch(t,e){const n=await this.standardizeUserData(t,e),r=n[0],i=n[1],s=this.makeTrainFunction()(r.concat(i)),o=[];for(const l of s){const t=await l.data();o.push(t[0])}return Wa(s),ag(o)}getNamedWeights(t){const e=[],n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let s=0;s<r.length;++s)n&&!r[s].trainable||e.push({name:r[s].originalName,tensor:i[s]});return e}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const e=ja().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=e-ja().numTensors}return t}getLossIdentifiers(){let t;if("string"==typeof this.loss)t=cg(this.loss);else if(Array.isArray(this.loss)){for(const t of this.loss)if("string"!=typeof t)throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(t=>cg(t))}else{const e=Object.keys(this.loss);t={};const n=this.loss;for(const r of e){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");t[r]=cg(n[r])}}return t}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[cg(Db(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>cg(Db(t)));{const t={};for(const e in this.metrics)t[e]=cg(Db(this.metrics[e]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(null!=t.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=t.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=t.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const e=fb(function t(e,n){if(null===e)return null;if("string"==typeof e)return hg(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const r=[],i=e.length;for(let s=0;s<i;++s){const i=e[s];Lb(n,s,i)?r.push(i):r.push(t(i,n))}return r}{const n={};for(const r of Object.keys(e)){const i=e[r];if("name"===r&&"string"==typeof i)n[r]=i;else{const e=hg(r);n[e]=t(i,e)}}return n}}(t.optimizer_config));let n,r;if("string"==typeof t.loss)n=hg(t.loss);else if(Array.isArray(t.loss))n=t.loss.map(t=>hg(t));else if(null!=t.loss){n={};for(const e in t.loss)n[e]=hg(t.loss[e])}if(Array.isArray(t.metrics))r=t.metrics.map(t=>hg(t));else if(null!=t.metrics){r={};for(const e in t.metrics)r[e]=hg(t.metrics[e])}this.compile({loss:n,metrics:r,optimizer:e})}async save(t,e){if("string"==typeof t){const e=l.getSaveHandlers(t);if(0===e.length)throw new ng(`Cannot find any save handlers for URL '${t}'`);if(e.length>1)throw new ng(`Found more than one (${e.length}) save handlers for `+`URL '${t}'`);t=e[0]}if(null==t.save)throw new ng("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const n=await l.encodeWeights(this.getNamedWeights(e)),r={modelTopology:this.toJSON(null,!1),format:dy,generatedBy:`TensorFlow.js tfjs-layers v${jb}`,convertedBy:null};if(null!=e&&e.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const t="optimizer",{data:e,specs:i}=await l.encodeWeights(await this.optimizer.getWeights(),t);n.specs.push(...i),n.data=l.concatenateArrayBuffers([n.data,e])}return null!=this.userDefinedMetadata&&(Nb(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,t.save(r)}setUserDefinedMetadata(t){Nb(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}py.className="Model",d.registerClass(py);class fy extends py{constructor(t){if(super({inputs:[],outputs:[]}),t=t||{},this.trainable=!0,this.built=!1,this.name=null!=t.name?t.name:Lm("sequential_"),null!=t.layers)for(const e of t.layers)this.add(e)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(t=>t<0))throw new ng("Negative dimension size caused by adding layer "+`${t.name} with input shape [`+`${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const e=t instanceof fy||t instanceof py;let n;if(e){if(1!==(n=t).outputs.length)throw new ng("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new ng("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new ng("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const e=function(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new ng("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));let n=t.dtype;return null==n&&(n="float32"),new eb({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(e)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new ng("A layer added to a Sequential model must not already be "+`connected somewhere else. LayersModel received layer ${t.name} `+`which has ${t.inboundNodes.length} pre-existing inbound `+"connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new ng("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=function t(e,n,r){if((null==n||null!=r&&r>0)&&(n=e.sourceLayer,r=e.nodeIndex),0===n.inboundNodes.length)return[e];{const e=n.inboundNodes[r];if(0===e.inboundLayers.length)return e.inputTensors;{const n=[];for(let r=0;r<e.inboundLayers.length;r++){const i=t(e.inputTensors[r],e.inboundLayers[r],e.nodeIndices[r]);for(const t of i)-1===n.indexOf(t)&&n.push(t)}return n}}}(this.outputs[0])}this.inboundNodes=[],new Qm({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:sg(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(t=>t.shape),outputShapes:this.outputs[0].shape})}else{const e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,e){return null==this.model&&this.build(),this.model.call(t,e)}build(t){if(Wm(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new py({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,e,n=console.log){this.built||this.build(),super.summary(t,e,n)}setWeights(t){null==this.model&&this.build(),this.model.setWeights(t)}evaluate(t,e,n={}){if(!this.built)throw new eg("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)}async evaluateDataset(t,e){if(!this.built)throw new eg("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,e)}predict(t,e={}){return null==this.model&&this.build(),this.model.predict(t,e)}predictOnBatch(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,e,n={}){if(!this.built)throw new eg("The model needs to be compiled before being used.");return this.model.fit(t,e,n)}async fitDataset(t,e){if(!this.built)throw new eg("The model needs to be compiled before being used.");return this.model.fitDataset(t,e)}async trainOnBatch(t,e){return this.model.trainOnBatch(t,e)}static fromConfig(t,e,n={},i=!1){let s,o={};if(e instanceof Array){if(null==e[0].className||"Merge"===e[0].className)throw new ng("Legacy serialization format not supported yet.");s=e}else r.assert(null!=e.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=e.layers,delete e.layers,o=e;const l=new t(o);if(!(l instanceof fy))throw new rg(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(const r of s){const t=fb(r,void 0,i);i&&t.setFastWeightInitDuringBuild(!0),l.add(t)}return l}set stopTraining(t){if(null==this.model)throw new ng("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(null==this.model)throw new ng("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const e of this.layers){const n={};n.className=e.getClassName(),n.config=e.getConfig(),t.push(n)}return{name:this.name,layers:t}}}fy.className="Sequential",d.registerClass(fy);class gy extends d.Serializable{getConfig(){return{}}}class my extends gy{apply(t,e=1){return function(t,e=1){if(1!==e)throw new rg(`Support for alpha values other than 1 (${e}) is not implemented `+"yet.");return Ou(t)}(t,e)}}my.className="elu",d.registerClass(my);class by extends gy{apply(t){return rc(t)}}by.className="selu",d.registerClass(by);class yy extends gy{apply(t){return ec(t)}}yy.className="relu",d.registerClass(yy);class vy extends gy{apply(t){return Va(()=>Ru(6,ec(t)))}}vy.className="relu6",d.registerClass(vy);class _y extends gy{apply(t){return t}}_y.className="linear",d.registerClass(_y);class wy extends gy{apply(t){return Vi(t)}}wy.className="sigmoid",d.registerClass(wy);class xy extends gy{apply(t){return function(t){return Va(()=>{const e=dr(.5,Gr(.2,t));return Ti(e,0,1)})}(t)}}xy.className="hardSigmoid",d.registerClass(xy);class Cy extends gy{apply(t){return Yi(t)}}Cy.className="softplus",d.registerClass(Cy);class Sy extends gy{apply(t){return function(t){return Va(()=>Hr(t,_i(t).add(1)))}(t)}}Sy.className="softsign",d.registerClass(Sy);class Oy extends gy{apply(t){return Ji(t)}}Oy.className="tanh",d.registerClass(Oy);class ky extends gy{apply(t,e=-1){return Fc(t,e)}}ky.className="softmax",d.registerClass(ky);class Ey extends gy{apply(t,e=-1){return $c(t,e)}}function Ty(t){return t.getClassName()}function zy(t,e={}){return fg(t,d.SerializationMap.getMap().classNameMap,e,"activation")}function Py(t){if(null==t)return zy({className:"linear",config:{}});if("string"==typeof t){const e={};return e.className=t,e.config={},zy(e)}return t instanceof gy?t:zy(t)}Ey.className="logSoftmax",d.registerClass(Ey);class Iy extends d.Serializable{}class My extends Iy{constructor(t){super(),function(t){if(null!=t&&"object"!=typeof t)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an "+`object, but received: ${t}`)}(t),this.l1=null==t||null==t.l1?.01:t.l1,this.l2=null==t||null==t.l2?.01:t.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(t){return Va(()=>{let e=zr([1]);return this.hasL1&&(e=dr(e,bi(Gr(this.l1,_i(t))))),this.hasL2&&(e=dr(e,bi(Gr(this.l2,um(t))))),e.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,e){return new t({l1:e.l1,l2:e.l2})}}My.className="L1L2",d.registerClass(My);const Dy={l1l2:"L1L2"};function Ay(t){return pg(t)}function Ny(t,e={}){return fg(t,d.SerializationMap.getMap().classNameMap,e,"regularizer")}function Ry(t){return null==t?null:"string"==typeof t?Ny({className:t in Dy?Dy[t]:t,config:{}}):t instanceof Iy?t:Ny(t)}class Fy extends tb{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,null!=t&&(this.maxValue=t.maxValue)}call(t,e){t=Vm(t);let n=ec(t);return null!=this.maxValue&&(n=Ti(n,0,this.maxValue)),n}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},e=super.getConfig();return Object.assign(t,e),t}}Fy.className="ReLU",d.registerClass(Fy);class $y extends tb{constructor(t){super(null==t?{}:t),this.DEFAULT_ALPHA=.3,null==t&&(t={}),this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Vm(t);return Pu(n,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}$y.className="LeakyReLU",d.registerClass($y);class Ly extends tb{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),this.supportsMasking=!0,this.alphaInitializer=Nm(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Ry(t.alphaRegularizer),this.alphaConstraint=Ig(t.alphaConstraint),null==t.sharedAxes)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else{if("number"!=typeof t.sharedAxes)throw new ng("Expected sharedAxes to be a number or an array of numbers, "+`but got ${t.sharedAxes}`);this.sharedAxes=[t.sharedAxes]}}build(t){const e=(t=Wm(t)).slice(1);if(null!=this.sharedAxes)for(const r of this.sharedAxes)e[r-1]=1;this.alpha=this.addWeight("alpha",e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let r=1;r<t.length;++r)n[r]=t[r];this.inputSpec=[new Ym({ndim:t.length,axes:n})],this.built=!0}call(t,e){return t=Vm(t),Gu(t,this.alpha.read())}getConfig(){const t={alphaInitializer:Am(this.alphaInitializer),alphaRegularizer:Ay(this.alphaRegularizer),alphaConstraint:zg(this.alphaConstraint),sharedAxes:this.sharedAxes},e=super.getConfig();return Object.assign(t,e),t}}Ly.className="PReLU",d.registerClass(Ly);class jy extends tb{constructor(t){if(super(null==t?{}:t),this.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==this.DEFAULT_ALPHA)throw new rg(`Non-default alpha value (${t.alpha}) is not supported by the `+"ELU layer yet.");this.alpha=null==t.alpha?this.DEFAULT_ALPHA:t.alpha}call(t,e){const n=Vm(t);return Ou(n)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},e=super.getConfig();return Object.assign(t,e),t}}jy.className="ELU",d.registerClass(jy);class By extends tb{constructor(t){super(null==t?{}:t),this.DEFAULT_THETA=1,null==t&&(t={}),this.theta=null==t.theta?this.DEFAULT_THETA:t.theta}call(t,e){const n=Vm(t);return n.mul(Qg(n.greater(this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},e=super.getConfig();return Object.assign(t,e),t}}By.className="ThresholdedReLU",d.registerClass(By);class Vy extends tb{constructor(t){super(null==t?{}:t),this.DEFAULT_AXIS=1,null==t&&(t={}),this.softmax=(new ky).apply,this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis}call(t,e){const n=Vm(t);return this.softmax(n,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function Wy(t,e,n){if("number"==typeof t)return sg(t,e);if(t.length!==e)throw new ng(`The ${n} argument must be an integer or tuple of ${e} integers.`+` Received: ${t.length} elements.`);for(let i=0;i<e;++i){const s=t[i];if((r=s)!==parseInt(r.toString(),10))throw new ng(`The ${n} argument must be an integer or tuple of ${e}`+` integers. Received: ${JSON.stringify(t)} including a`+` non-integer number ${s}`)}return t;var r}function Uy(t,e,n,r,i=1){if(null==t)return t;let s;return Math.floor(((s="same"===n?t:t-(e+(e-1)*(i-1))+1)+r-1)/r)}function Hy(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+Xg([n-e,0]);else{if("same"!==r)throw new ng(`Unsupport padding mode: ${r}.`);t*=e}return t}function Gy(t,e){return Va(()=>(Fg(e),"channelsFirst"===e?Ms(t,[0,2,3,1]):t))}function qy(t,e){return Va(()=>(Fg(e),"channelsFirst"===e?Ms(t,[0,2,3,4,1]):t))}function Ky(t,e,n,r=[1,1],i="valid",s,o,l=null){return Va(()=>{if(null==s&&(s="channelsLast"),Fg(s),3!==t.rank&&4!==t.rank)throw new ng("conv2dWithBiasActivation expects input to be of rank 3 or 4, "+`but received ${t.rank}.`);if(3!==e.rank&&4!==e.rank)throw new ng("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, "+`but received ${t.rank}.`);let a=Gy(t,s);if("causal"===i)throw new rg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return a=_.conv2d({x:a,filter:e,strides:r,pad:"same"===i?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:l}),"channelsFirst"===s&&(a=Ms(a,[0,3,1,2])),a})}Vy.className="Softmax",d.registerClass(Vy);class Yy extends tb{constructor(t,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Yy.verifyArgs(e),this.rank=t,_g(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new rg(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is `+"not implemented yet.");if(this.kernelSize=Wy(e.kernelSize,t,"kernelSize"),this.strides=Wy(null==e.strides?1:e.strides,t,"strides"),this.padding=null==e.padding?"valid":e.padding,$g(this.padding),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Fg(this.dataFormat),this.activation=Py(e.activation),this.useBias=null==e.useBias||e.useBias,this.biasInitializer=Nm(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ig(e.biasConstraint),this.biasRegularizer=Ry(e.biasRegularizer),this.activityRegularizer=Ry(e.activityRegularizer),this.dilationRate=Wy(null==e.dilationRate?1:e.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new ng("dilationRate must be a number or an array of a single number for 1D convolution, but received "+`${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new ng("dilationRate must be a number or array of two numbers for 2D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new ng("dilationRate must be a number or array of three numbers for 3D "+`convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(t){if(og("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!vg(t.kernelSize,"number",1,3))throw new ng("BaseConv expects config.kernelSize to be number or number[] with "+`length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Ty(this.activation),useBias:this.useBias,biasInitializer:Am(this.biasInitializer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),biasConstraint:zg(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}class Xy extends Yy{constructor(t,e){super(t,e),this.kernel=null,Xy.verifyArgs(e),this.filters=e.filters,_g(this.filters,"filters"),this.kernelInitializer=Nm(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ig(e.kernelConstraint),this.kernelRegularizer=Ry(e.kernelRegularizer)}build(t){t=Wm(t);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new ng("The channel dimension of the input should be defined. "+`Found ${t[e]}`);const n=t[e],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:n}}],this.built=!0}call(t,e){return Va(()=>{let e;t=Vm(t);const n=null==this.bias?null:this.bias.read(),r=wg(this.activation.getClassName());if(null!=r&&2===this.rank)e=Ky(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)e=function(t,e,n,r=1,i="valid",s,o=1){return Va(()=>{if(null==s&&(s="channelsLast"),Fg(s),3!==t.shape.length)throw new ng("The input of a conv1dWithBias operation should be 3, but is "+`${t.shape.length} instead.`);if(3!==e.shape.length)throw new ng("The kernel for a conv1dWithBias operation should be 3, but is "+`${e.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new ng("The bias for a conv1dWithBias operation should be 1, but is "+`${e.shape.length} instead`);if("channelsFirst"===s&&(t=Ms(t,[0,2,1])),"causal"===i)throw new rg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let l=mu(t,e,r,"same"===i?"same":"valid","NWC",o);return null!=n&&(l=hm(l,n)),l})}(t,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)e=Ky(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new rg("convolutions greater than 3D are not implemented yet.");e=function(t,e,n,r=[1,1,1],i="valid",s,o){return Va(()=>{if(null==s&&(s="channelsLast"),Fg(s),4!==t.rank&&5!==t.rank)throw new ng("conv3dWithBias expects input to be of rank 4 or 5, but received "+`${t.rank}.`);if(4!==e.rank&&5!==e.rank)throw new ng("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+`${t.rank}.`);let l=qy(t,s);if("causal"===i)throw new rg("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return l=yu(l,e,r,"same"===i?"same":"valid","NDHWC",o),null!=n&&(l=hm(l,n)),"channelsFirst"===s&&(l=Ms(l,[0,4,1,2,3])),l})}(t,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(e=this.activation.apply(e))}return e})}computeOutputShape(t){t=Wm(t);const e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2);for(let i=0;i<n.length;++i){const t=Uy(n[i],this.kernelSize[i],this.padding,this.strides[i],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[i]);e.push(t)}let r=[t[0]];return"channelsLast"===this.dataFormat?(r=r.concat(e)).push(this.filters):(r.push(this.filters),r=r.concat(e)),r}getConfig(){const t={filters:this.filters,kernelInitializer:Am(this.kernelInitializer),kernelRegularizer:Ay(this.kernelRegularizer),kernelConstraint:zg(this.kernelConstraint)},e=super.getConfig();return Object.assign(t,e),t}static verifyArgs(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new ng("Convolution layer expected config.filters to be a 'number' > 0 "+`but got ${JSON.stringify(t.filters)}`)}}class Zy extends Xy{constructor(t){super(2,t),Zy.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&!vg(t.kernelSize,"number",1,2))throw new ng("Conv2D expects config.kernelSize to be number or number[] with "+`length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}Zy.className="Conv2D",d.registerClass(Zy);class Qy extends Xy{constructor(t){super(3,t),Qy.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&(!Array.isArray(t.kernelSize)||1!==t.kernelSize.length&&3!==t.kernelSize.length))throw new ng("Conv3D expects config.kernelSize to be number or"+` [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}Qy.className="Conv3D",d.registerClass(Qy);class Jy extends Zy{constructor(t){if(super(t),this.inputSpec=[new Ym({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new ng("Conv2DTranspose currently supports only padding modes 'same' "+`and 'valid', but received padding mode ${this.padding}`)}build(t){if(4!==(t=Wm(t)).length)throw new ng("Input should have rank 4; Received input shape: "+JSON.stringify(t));const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new ng("The channel dimension of the inputs should be defined. Found `None`.");const n=t[e],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Ym({ndim:4,axes:{[e]:n}})],this.built=!0}call(t,e){return Va(()=>{let e=Vm(t);if(4!==e.shape.length)throw new ng("Conv2DTranspose.call() expects input tensor to be rank-4, but "+`received a tensor of rank-${e.shape.length}`);const n=e.shape;let r,i;"channelsFirst"===this.dataFormat?(r=2,i=3):(r=1,i=2);const s=n[i],o=this.kernelSize[1],l=this.strides[1],a=[n[0],Hy(n[r],this.strides[0],this.kernelSize[0],this.padding),Hy(s,l,o,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(e=Ms(e,[0,2,3,1]));let u=bu(e,this.kernel.read(),a,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(u=Ms(u,[0,3,1,2])),null!=this.bias&&(u=hm(u,this.bias.read(),this.dataFormat)),null!=this.activation&&(u=this.activation.apply(u)),u})}computeOutputShape(t){const e=(t=Wm(t)).slice();let n,r,i;"channelsFirst"===this.dataFormat?(n=1,r=2,i=3):(n=3,r=1,i=2);const s=this.kernelSize[0],o=this.kernelSize[1],l=this.strides[0],a=this.strides[1];return e[n]=this.filters,e[r]=Hy(e[r],l,s,this.padding),e[i]=Hy(e[i],a,o,this.padding),e}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}Jy.className="Conv2DTranspose",d.registerClass(Jy);class tv extends Xy{constructor(t,e){if(super(t,e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==e.filters)throw new ng("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=e.kernelInitializer||null!=e.kernelRegularizer||null!=e.kernelConstraint)throw new ng("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=e.padding&&"same"!==e.padding&&"valid"!==e.padding)throw new ng(`SeparableConv${this.rank}D supports only padding modes: `+`'same' and 'valid', but received ${JSON.stringify(e.padding)}`);this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Nm(e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Ry(e.depthwiseRegularizer),this.depthwiseConstraint=Ig(e.depthwiseConstraint),this.pointwiseInitializer=Nm(e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Ry(e.pointwiseRegularizer),this.pointwiseConstraint=Ig(e.pointwiseConstraint)}build(t){if((t=Wm(t)).length<this.rank+2)throw new ng(`Inputs to SeparableConv${this.rank}D should have rank `+`${this.rank+2}, but received input shape: `+`${JSON.stringify(t)}`);const e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e]||t[e]<0)throw new ng("The channel dimension of the inputs should be defined, "+`but found ${JSON.stringify(t[e])}`);const n=t[e],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let s=0;s<this.rank;++s)i.push(1);i.push(n*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.inputSpec=[new Ym({ndim:this.rank+2,axes:{[e]:n}})],this.built=!0}call(t,e){return Va(()=>{let e;if(t=Vm(t),1===this.rank)throw new rg("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(t=Ms(t,[0,2,3,1])),e=ic(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(e=hm(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),"channelsFirst"===this.dataFormat&&(e=Ms(e,[0,3,1,2])),e})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=Am(this.depthwiseInitializer),t.pointwiseInitializer=Am(this.pointwiseInitializer),t.depthwiseRegularizer=Ay(this.depthwiseRegularizer),t.pointwiseRegularizer=Ay(this.pointwiseRegularizer),t.depthwiseConstraint=zg(this.depthwiseConstraint),t.pointwiseConstraint=zg(this.pointwiseConstraint),t}}tv.className="SeparableConv";class ev extends tv{constructor(t){super(2,t)}}ev.className="SeparableConv2D",d.registerClass(ev);class nv extends Xy{constructor(t){super(1,t),nv.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if("number"!=typeof t.kernelSize&&!vg(t.kernelSize,"number",1,1))throw new ng("Conv1D expects config.kernelSize to be number or number[] with "+`length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}nv.className="Conv1D",d.registerClass(nv);class rv extends tb{constructor(t){super(t),this.cropping="number"==typeof t.cropping?[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:t.cropping,this.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,e){return Va(()=>{if(t=Vm(t),"channelsLast"===this.dataFormat){const e=nm(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return nm(e,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const e=nm(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return nm(e,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}rv.className="Cropping2D",d.registerClass(rv);class iv extends tb{constructor(t){super(t),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==t.size?this.DEFAULT_SIZE:t.size,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat}computeOutputShape(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],null==t[2]?null:this.size[0]*t[2],null==t[3]?null:this.size[1]*t[3]]:[t[0],null==t[1]?null:this.size[0]*t[1],null==t[2]?null:this.size[1]*t[2],t[3]]}call(t,e){return Va(()=>{let e=Vm(t);const n=e.shape;if("channelsFirst"===this.dataFormat){const t=(e=Ms(e,[0,2,3,1])).resizeNearestNeighbor([this.size[0]*n[2],this.size[1]*n[3]]);return Ms(t,[0,3,1,2])}return e.resizeNearestNeighbor([this.size[0]*n[1],this.size[1]*n[2]])})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}iv.className="UpSampling2D",d.registerClass(iv);class sv extends Yy{constructor(t){super(2,t),this.depthwiseKernel=null,this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=Nm(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ig(t.depthwiseConstraint),this.depthwiseRegularizer=Ry(t.depthwiseRegularizer)}build(t){if((t=Wm(t)).length<4)throw new ng("Inputs to DepthwiseConv2D should have rank 4. "+`Received input shape: ${JSON.stringify(t)}.`);const e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new ng("The channel dimension of the inputs to DepthwiseConv2D should "+`be defined, but is not (${t[e]}).`);const n=t[e];this.depthwiseKernel=this.addWeight("depthwise_kernel",[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier],null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.bias=this.useBias?this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return Va(()=>{let e=function(t,e,n=[1,1],r="valid",i,s){return Va(()=>{null==i&&(i="channelsLast"),Fg(i);let s=Gy(t,i);if(4!==t.rank)throw new ng("Input for depthwiseConv2d is required to be 4-D, but is instead "+`${t.rank}-D`);if(4!==e.rank)throw new ng("depthwiseKernel is required to be 4-D, but is instead "+`${e.rank}-D`);return s=wu(s,e,n,"same"===r?"same":"valid","NHWC",null),"channelsFirst"===i&&(s=Ms(s,[0,3,1,2])),s})}(t=Vm(t),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat);return this.useBias&&(e=hm(e,this.bias.read(),this.dataFormat)),null!=this.activation&&(e=this.activation.apply(e)),e})}computeOutputShape(t){t=Wm(t);const e="channelsFirst"===this.dataFormat?t[3]:t[2],n="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=Uy("channelsFirst"===this.dataFormat?t[2]:t[1],this.kernelSize[0],this.padding,this.strides[0]),i=Uy(e,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],n,r,i]:[t[0],r,i,n]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=Am(this.depthwiseInitializer),t.depthwiseRegularizer=Ay(this.depthwiseRegularizer),t.depthwiseConstraint=zg(this.depthwiseRegularizer),t}}sv.className="DepthwiseConv2D",d.registerClass(sv);class ov extends tb{constructor(t){super(t),this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(null==this.noiseShape)return this.noiseShape;const e=t.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t);if(0<this.rate&&this.rate<1){const t=null!=e.training&&e.training,r=this.getNoiseShape(n);return pm(()=>dm(n,this.rate,r,this.seed),()=>n,t)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},e=super.getConfig();return Object.assign(t,e),t}dispose(){return super.dispose()}}ov.className="Dropout",d.registerClass(ov);class lv extends ov{constructor(t){super(t),this.inputSpec=[{ndim:3}]}getNoiseShape(t){const e=t.shape;return[e[0],1,e[2]]}}lv.className="SpatialDropout1D",d.registerClass(lv);class av extends tb{constructor(t){if(super(t),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=[e,t.inputDim]}this.units=t.units,_g(this.units,"units"),this.activation=Py(t.activation),null!=t.useBias&&(this.useBias=t.useBias),this.kernelInitializer=Nm(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Nm(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ig(t.kernelConstraint),this.biasConstraint=Ig(t.biasConstraint),this.kernelRegularizer=Ry(t.kernelRegularizer),this.biasRegularizer=Ry(t.biasRegularizer),this.activityRegularizer=Ry(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){const e=(t=Wm(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:e}}],this.built=!0}computeOutputShape(t){const e=(t=Wm(t)).slice();return e[e.length-1]=this.units,e}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t),r=wg(this.activation.getClassName());let i;return null!=r?i=lm(n,this.kernel.read(),r,this.bias?this.bias.read():null):(i=lm(n,this.kernel.read()),null!=this.bias&&(i=hm(i,this.bias.read())),null!=this.activation&&(i=this.activation.apply(i))),i})}getConfig(){const t={units:this.units,activation:Ty(this.activation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:Ay(this.kernelRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),biasConstraint:zg(this.biasConstraint)},e=super.getConfig();return Object.assign(t,e),t}}av.className="Dense",d.registerClass(av);class uv extends tb{constructor(t){super(t=t||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Wm(t);for(const e of t.slice(1))if(null==e)throw new ng('The shape of the input to "Flatten" is not fully defined '+`(got ${t.slice(1)}). Make sure to pass a complete `+'"input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],qg(t,1)]}call(t,e){return Va(()=>{this.invokeCallHook(t,e);let n=Vm(t);if("channelsFirst"===this.dataFormat&&n.rank>1){const t=[0];for(let e=2;e<n.rank;++e)t.push(e);t.push(1),n=n.transpose(t)}return function(t){if(t.rank<=1)throw new ng(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],qg(t.shape,1)];return t.reshape(e)}(n)})}getConfig(){const t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);const e=super.getConfig();return Object.assign(t,e),t}}uv.className="Flatten",d.registerClass(uv);class cv extends tb{constructor(t){super(t),this.supportsMasking=!0,this.activation=Py(t.activation)}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t);return this.activation.apply(n)})}getConfig(){const t={activation:Ty(this.activation)},e=super.getConfig();return Object.assign(t,e),t}}cv.className="Activation",d.registerClass(cv);class hv extends tb{constructor(t){super(t),this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,e){return Va(()=>(function(t,e){return Va(()=>{if(2!==t.shape.length)throw new ng("repeat() expects a rank-2 tensor, but received a "+`rank-${t.shape.length} tensor.`);return sm(Jg(t,1),[1,e,1])})})(t=Vm(t),this.n))}getConfig(){const t={n:this.n},e=super.getConfig();return Object.assign(t,e),t}}hv.className="RepeatVector",d.registerClass(hv);class dv extends tb{constructor(t){super(t),this.targetShape=t.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(t){return t<0||null==t}fixUnknownDimension(t,e){const n="Total size of new array must be unchanged.",r=e.slice();let i=1,s=null;for(let l=0;l<r.length;++l){const t=r[l];if(this.isUnknown(t)){if(null!==s)throw new ng("Can only specifiy one unknown dimension.");s=l}else i*=t}const o=qg(t);if(null!==s){if(0===i||o%i!=0)throw new ng(n);r[s]=o/i}else if(o!==i)throw new ng(n);return r}computeOutputShape(t){let e=!1;for(let n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return n.reshape(i)})}getConfig(){const t={targetShape:this.targetShape},e=super.getConfig();return Object.assign(t,e),t}}dv.className="Reshape",d.registerClass(dv);class pv extends tb{constructor(t){if(super(t),null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+`${t.dims} instead.`);const e=Zg(1,t.dims.length+1);if(!r.arraysEqual(t.dims.slice().sort(),e))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Ym({ndim:this.dims.length+1})]}computeOutputShape(t){const e=(t=Wm(t)).slice();return this.dims.forEach((n,r)=>{e[r+1]=t[n]}),e}call(t,e){return Ms(Vm(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},e=super.getConfig();return Object.assign(t,e),t}}pv.className="Permute",d.registerClass(pv);class fv extends tb{constructor(t){super(null==t?{}:t),this.supportsMasking=!0,this.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={maskValue:this.maskValue};return Object.assign(e,t),e}computeMask(t,e){const n=Vm(t);return ci(Lu(n,this.maskValue),-1)}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t),r=ci(Lu(n,this.maskValue),-1,!0);return n.mul(r.asType(n.dtype))})}}fv.className="Masking",d.registerClass(fv);class gv extends tb{constructor(t){if(super(t),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){let e=null;null!=t.batchSize&&(e=t.batchSize),this.batchInputShape=null==t.inputLength?[e,null]:[e].concat(ug(t.inputLength))}this.inputDim=t.inputDim,_g(this.inputDim,"inputDim"),this.outputDim=t.outputDim,_g(this.outputDim,"outputDim"),this.embeddingsInitializer=Nm(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Ry(t.embeddingsRegularizer),this.activityRegularizer=Ry(t.activityRegularizer),this.embeddingsConstraint=Ig(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,e){return Va(()=>this.maskZero?(t=Vm(t),Lu(t,Dr(t))):null)}computeOutputShape(t){if(t=Wm(t),null==this.inputLength)return[...t,this.outputDim];const e=ug(this.inputLength);if(e.length!==t.length-1)throw new ng(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${t}`);{let n=0;for(let r=0;r<e.length;++r){const i=e[r],s=t[r+1];if(null!=i&&null!=s&&i!==s)throw new ng(`"inputLength" is ${this.inputLength}, but received `+`input shape has shape ${t}`);null==i&&(e[n]=s),n++}}return[t[0],...e,this.outputDim]}call(t,e){return Va(()=>{this.invokeCallHook(t,e);let n=Vm(t);return"int32"!==n.dtype&&(n=Qg(n,"int32")),am(this.embeddings.read(),n.as1D()).reshape(Wm(this.computeOutputShape(n.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Am(this.embeddingsInitializer),embeddingsRegularizer:Ay(this.embeddingsRegularizer),activityRegularizer:Ay(this.activityRegularizer),embeddingsConstraint:zg(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},e=super.getConfig();return Object.assign(t,e),t}}gv.className="Embedding",d.registerClass(gv);class mv extends tb{constructor(t){super(t||{}),this.supportsMasking=!0}mergeFunction(t){throw new rg}computeElementwiseOpOutputShape(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;const n=t.slice(0,t.length-e.length);for(let r=0;r<e.length;++r){const i=t[t.length-e.length+r],s=e[r];if(null==i||null==s||i<0||s<0)n.push(null);else if(1===i)n.push(s);else if(1===s)n.push(i);else{if(i!==s)throw new ng("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Wm(t)]),(t=t).length<2)throw new ng("A merge layer should be called on an Array of at least 2 inputs."+` Got ${t.length} input(s).`);let e=[];for(const i of t)null!=i&&null!==i[0]&&e.push(i[0]);if((e=mg(e)).length>1)throw new ng("Can not merge tensors with different batch sizes. "+`Got tensors with shapes: ${JSON.stringify(t)}.`);let n=null==t[0]?null:t[0].slice(1);for(let i=1;i<t.length;++i){const e=null==t[i]?null:t[i].slice(1);n=this.computeElementwiseOpOutputShape(n,e)}const r=t.map(t=>t.length);this.reshapeRequired=-1!==t.indexOf(null)||1!==mg(r).length}call(t,e){return Va(()=>{if(t=t,this.reshapeRequired){const e=[],n=t.map(t=>t.rank);if(-1===n.indexOf(null)){const r=Xg(n);for(let n of t){const t=n.rank;for(let e=0;e<r-t;++e)n=Jg(n,1);e.push(n)}return this.mergeFunction(e)}{let n=!1;for(const s of t){const t=s.rank;if(null==t){const t=s.shape,r=t[0],i=t.slice(1).concat([r]);let o=s.reshape([r].concat(qg(t.slice(1))));o=(o=Ms(o,[1,0])).reshape(i),e.push(o),n=!0}else if(t>1){const r=Zg(1,t).concat([0]);e.push(Ms(s,r)),n=!0}else e.push(s)}let r=this.mergeFunction(e);const i=r.rank;if(n)if(null==i){const t=r.shape,e=t[t.length-1],n=[e].concat(t.slice(0,t.length-1));r=Ms(r.reshape([-1,e]),[1,0]).reshape(n)}else if(i>1){const t=[i-1].concat(Zg(0,i-1));r=Ms(r,t)}return r}}return this.mergeFunction(t)})}computeOutputShape(t){let e;e=null==(t=t)[0]?null:t[0].slice(1);for(let r=1;r<t.length;++r){const n=null==t[r]?null:t[r].slice(1);e=this.computeElementwiseOpOutputShape(e,n)}let n=[];for(const r of t)null!=r&&null!==r[0]&&n.push(r[0]);return 1===(n=mg(n)).length?n.concat(e):[null].concat(e)}computeMask(t,e){return Va(()=>{if(null==e)return null;if(!Array.isArray(e))throw new ng("`mask` should be an Array");if(!Array.isArray(t))throw new ng("`inputs` should be an Array");if(e.length!==t.length)throw new ng("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths "+`(${t.length} vs ${e.length})`);if(e.every(t=>null==t))return null;let n=(e=e.map(t=>null==t?t:$r(t,0)))[0];for(let t=1;t<e.length-1;++t)n=co(n,e[t]);return n})}}class bv extends mv{constructor(t){super(t)}mergeFunction(t){return Va(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=dr(e,t[n]);return e})}}bv.className="Add",d.registerClass(bv);class yv extends mv{constructor(t){super(t)}mergeFunction(t){return Va(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=Gr(e,t[n]);return e})}}yv.className="Multiply",d.registerClass(yv);class vv extends mv{constructor(t){super(t)}mergeFunction(t){return Va(()=>{let e=t[0].clone();for(let n=1;n<t.length;++n)e=dr(e,t[n]);return Gr(1/t.length,e)})}}vv.className="Average",d.registerClass(vv);class _v extends mv{constructor(t){super(t)}mergeFunction(t){return Va(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=zu(e,t[n]);return e})}}_v.className="Maximum",d.registerClass(_v);class wv extends mv{constructor(t){super(t)}mergeFunction(t){return Va(()=>{let e=t[0];for(let n=1;n<t.length;++n)e=Ru(e,t[n]);return e})}}wv.className="Minimum",d.registerClass(wv);class xv extends mv{constructor(t){super(t),this.DEFAULT_AXIS=-1,null==t&&(t={}),this.axis=null==t.axis?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new ng("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let e=!0;for(const r of t)if(null!=r){e=!1;break}if(e)return;const n=[];for(let i=0;i<t.length;++i){const e=t[i].slice();e.splice(this.axis,1);let s=!1;for(const t of n)if(r.arraysEqual(t,e)){s=!0;break}s||n.push(e)}if(n.length>1)throw new ng("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Va(()=>rm(t,this.axis))}computeOutputShape(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new ng("A `Concatenate` layer should be called on a list of inputs.");const e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(const i of e.slice(1)){if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n}computeMask(t,e){if(null==e)return null;if(!Array.isArray(e))throw new ng("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new ng("`inputs` should be an array for Concatenate");if(e.length!==t.length)throw new ng(`Mismatch in the length of mask (${e.length}) `+`and the legnth of inputs (${t.length})`);return Va(()=>{let n=!0;if(e.forEach(t=>{null==t||(n=!1)}),n)return null;const r=[];for(let s=0;s<t.length;++s)r.push(null==e[s]?Mr(t[s]).asType("bool"):e[s].rank<t[s].rank?$r(e[s],-1):e[s]);const i=Ar(r,this.axis);return ui(i,-1,!1)})}getConfig(){const t={axis:this.axis},e=super.getConfig();return Object.assign(t,e),t}}function Cv(t,e){for(;t<0;)t+=e;return t}xv.className="Concatenate",d.registerClass(xv);class Sv extends mv{constructor(t){super(t),this.axes=t.axes,this.normalize=null!=t.normalize&&t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){r.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0],n=t[1];if(e.length>3||n.length>3)throw new rg("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(e,n);if(e[i[0]]!==n[i[1]])throw new ng("Dimension incompatibility: "+`${e[i[0]]} !== ${n[i[1]]}`)}mergeFunction(t){if(2!==t.length)throw new ng("A `Dot` layer must be called on exactly 2 inputs, "+`but received ${t.length} input(s).`);let e,n=t[0],i=t[1];return e=Array.isArray(this.axes)?this.axes.map((e,n)=>Cv(e,t[n].shape.length)):[Cv(this.axes,n.shape.length),Cv(this.axes,i.shape.length)],this.normalize&&(n=gb(n,e[0]),i=gb(i,e[1])),function(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new rg("batchDot is not implemented for tensors of 4D or higher rank yet");if(r.assert(t.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, "+`but got ${t.shape.length}`),r.assert(t.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, "+`but got ${e.shape.length}`),"number"==typeof n&&(n=[n,n]),"complex64"===t.dtype||"complex64"===e.dtype)throw new rg("batchDot is not implemented for complex64-type Tensors yet.");const i=t.shape.length,s=e.shape.length;null==n&&(n=[i-1,s-2]);const o=n;return Va(()=>{let n,r;if(i>s){n=i-s;const t=[];for(let e=0;e<n;++e)t.push(1);e=e.reshape(e.shape.concat(t))}else if(s>i){n=s-i;const e=[];for(let t=0;t<n;++t)e.push(1);t=t.reshape(t.shape.concat(e))}else n=0;if(r=2===t.shape.length&&2===e.shape.length?o[0]===o[1]?t.mul(e).sum(o[0]):t.transpose([1,0]).mul(e).sum(o[1]):t.matMul(e,o[0]!==t.shape.length-1,o[1]===e.shape.length-1),n>0){let t;const e=[];for(let r=t=i>s?i+s-3:i-1;r<t+n;++r)e.push(r);r=r.squeeze(e)}return 1===r.shape.length&&(r=r.expandDims(1)),r})}(n,i,e)}interpretAxes(t,e){return Array.isArray(this.axes)?this.axes:[Cv(this.axes,t.length),Cv(this.axes,e.length)]}computeOutputShape(t){r.assert(Array.isArray(t)&&2===t.length&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const e=t[0].slice(),n=t[1].slice();if(e.length>3||n.length>3)throw new rg("Dot layer does not support tensors of 4D or higher rank yet.");const i=this.interpretAxes(e,n);e.splice(i[0],1),n.splice(i[1],1),n.splice(0,1);const s=e.concat(n);return 1===s.length&&s.push(1),s}computeMask(t,e){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},e=super.getConfig();return Object.assign(t,e),t}}Sv.className="Dot",d.registerClass(Sv);class Ov extends tb{constructor(t){super(t),this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={stddev:this.stddev};return Object.assign(e,t),e}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t);return pm(()=>om(n.shape,0,this.stddev).add(n),()=>n,e.training||!1)})}}Ov.className="GaussianNoise",d.registerClass(Ov);class kv extends tb{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Va(()=>{this.invokeCallHook(t,e);const n=Vm(t);return this.rate>0&&this.rate<1?pm(()=>{const t=Math.sqrt(this.rate/(1-this.rate));return n.mul(om(n.shape,1,t))},()=>n,e.training||!1):n})}}kv.className="GaussianDropout",d.registerClass(kv);class Ev extends tb{constructor(t){super(t),this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||Vm(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),e={rate:this.rate};return Object.assign(e,t),e}call(t,e){return Va(()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(t);return pm(()=>{const e=Vm(t),r=-1.7580993408473766;let i=Ys(tc(n),this.rate);i=Qg(i,"float32");const s=((1-this.rate)*(1+this.rate*r**2))**-.5,o=-s*r*this.rate;return e.mul(i).add(i.add(-1).mul(r)).mul(s).add(o)},()=>Vm(t),e.training||!1)}return t})}}function Tv(t,e,n,r,i,s=.001){let o;if(2===t.rank)o=lu(t,e,n,r,i,s);else if(3===t.rank)o=au(t,e,n,r,i,s);else{if(4!==t.rank)throw new rg(`batchNormalization is not implemented for array of rank ${t.rank} `+"yet");o=uu(t,e,n,r,i,s)}return o}Ev.className="AlphaDropout",d.registerClass(Ev);class zv extends tb{constructor(t){null==t&&(t={}),super(t),this.supportsMasking=!0,this.axis=null==t.axis?-1:t.axis,this.momentum=null==t.momentum?.99:t.momentum,this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=Nm(t.betaInitializer||"zeros"),this.gammaInitializer=Nm(t.gammaInitializer||"ones"),this.movingMeanInitializer=Nm(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Nm(t.movingVarianceInitializer||"ones"),this.betaConstraint=Ig(t.betaConstraint),this.gammaConstraint=Ig(t.gammaConstraint),this.betaRegularizer=Ry(t.betaRegularizer),this.gammaRegularizer=Ry(t.gammaRegularizer)}build(t){t=Wm(t);const e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new ng(`Axis ${e} of input tensor should have a defined dimension but `+"the layer received an input with shape "+`${JSON.stringify(t)}.`);this.inputSpec=[new Ym({ndim:t.length,axes:{[e]:n}})];const r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,e){return Va(()=>{const n=null!=e.training&&e.training,i=Vm(t),s=i.shape,o=s.length,l=Zg(0,o),a=this.axis>=0?this.axis:this.axis+o;l.splice(a,1);const u=sg(1,o);u[a]=s[a];const c=l.slice();c.sort();const h=!r.arraysEqual(c,Zg(0,o).slice(0,o-1));if(!n)return(()=>{if(h){const t=this.movingMean.read().reshape(u),e=this.movingVariance.read().reshape(u),n=this.center?this.beta.read().reshape(u):null,r=this.scale?this.gamma.read().reshape(u):null;return Tv(i,t,e,n,r,this.epsilon)}return Tv(i,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[d,p,f]=function(t,e,n,i,s=.001){return r.arraysEqual(i.slice().sort(),Zg(0,t.rank-1))?function(t,e,n,r,i=.001){return Va(()=>{const s=mi(t,r),o=s.mean,l=s.variance;return[Tv(t,o,l,n,e,i),o,l]})}(t,e,n,i,s):function(t,e,n,r,i=.001){return Va(()=>{const s=mi(t,r),o=s.mean,l=s.variance,a=[];for(const e of Zg(0,t.rank))-1!==r.indexOf(e)?a.push(1):a.push(t.shape[e]);const u=o.reshape(a),c=l.reshape(a),h=null==e?null:e.reshape(a),d=null==n?null:n.reshape(a);return[Tv(t,u,c,d,h,i),o,l]})}(t,e,n,i,s)}(i,this.gamma.read(),this.beta.read(),l,this.epsilon),g=(t,e,n)=>{Va(()=>{const r=1-n,i=t.read(),s=i.sub(e).mul(r);t.write(i.sub(s))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,f,this.momentum)})(),d})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Am(this.betaInitializer),gammaInitializer:Am(this.gammaInitializer),movingMeanInitializer:Am(this.movingMeanInitializer),movingVarianceInitializer:Am(this.movingVarianceInitializer),betaRegularizer:Ay(this.betaRegularizer),gammaRegularizer:Ay(this.gammaRegularizer),betaConstraint:zg(this.betaConstraint),gammaConstraint:zg(this.gammaConstraint)},e=super.getConfig();return Object.assign(t,e),t}}zv.className="BatchNormalization",d.registerClass(zv);class Pv extends tb{constructor(t){if(null==t&&(t={}),super(t),this.axis=null==t.axis?-1:t.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, "+`but received ${JSON.stringify(this.axis)}`);for(const t of this.axis)if(!Number.isInteger(t))throw new Error("Expected axis to be an array of integers, "+`but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==t.epsilon?.001:t.epsilon,this.center=null==t.center||t.center,this.scale=null==t.scale||t.scale,this.betaInitializer=Nm(t.betaInitializer||"zeros"),this.gammaInitializer=Nm(t.gammaInitializer||"ones"),this.betaRegularizer=Ry(t.betaRegularizer),this.gammaRegularizer=Ry(t.gammaRegularizer),this.supportsMasking=!0}build(t){const e=(t=Wm(t)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=e);for(const r of this.axis)if(r<0||r>=e)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==mg(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map(e=>t[e]);this.gamma=this.scale?this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):null,this.beta=this.center?this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):null,this.built=!0}call(t,e){const n=Vm(t),r=n.shape,i=r.length;return Va(()=>{let{mean:t,variance:e}=mi(n,this.axis,!0);const s=sg(1,i);for(const n of this.axis)s[n]=r[n];const o=t=>null!=t&&t.shape.length!==i&&this.axis!==[i-1]?t.reshape(s):t;let l=o(this.gamma.read()),a=o(this.beta.read());const u=[],c=[];for(let n=0;n<i;++n)-1!==this.axis.indexOf(n)?(u.push(r[n]),c.push(1)):(u.push(1),c.push(r[n]));return t=t.tile(u),e=e.tile(u),l=l.tile(c),a=a.tile(c),Tv(n,t,e,a,l,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Am(this.betaInitializer),gammaInitializer:Am(this.gammaInitializer),betaRegularizer:Ay(this.betaRegularizer),gammaRegularizer:Ay(this.gammaRegularizer)},e=super.getConfig();return Object.assign(t,e),t}}Pv.className="LayerNormalization",d.registerClass(Pv);class Iv extends tb{constructor(t){if(null==t&&(t={}),super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new ng("ZeroPadding2D expects padding to be a length-2 array, but "+`received a length-${t.padding.length} array.`);let e,n;if("number"==typeof t.padding[0])e=[t.padding[0],t.padding[0]],n=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new ng("ZeroPadding2D expects height padding to be a length-2 array, "+`but received a length-${t.padding[0].length} array.`);if(e=t.padding[0],2!==t.padding[1].length)throw new ng("ZeroPadding2D expects width padding to be a length-2 array, "+`but received a length-${t.padding[1].length} array.`);n=t.padding[1]}this.padding=[e,n]}this.inputSpec=[new Ym({ndim:4})]}computeOutputShape(t){let e,n;return t=Wm(t),"channelsFirst"===this.dataFormat?[t[0],t[1],e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null]:[t[0],e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,t[3]]}call(t,e){return Va(()=>(function(t,e,n){return Va(()=>{if(4!==t.rank)throw new ng("temporalPadding expects input tensor to be 4-D, but received a "+`${t.rank}-D tensor.`);if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new ng("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new ng(`Unknown data format: ${n}. `+"Supported data formats are 'channelsLast' and 'channelsFirst.");let r;return Io(t,r="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]])})})(Vm(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}function Mv(t,e,n,r,i,s){return Va(()=>{let o;Fg(i),Lg(s),$g(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==s&&(s="max"),t=Gy(t,i);const l="same"===r?"same":"valid";return o="max"===s?Du(t,e,n,l):ru(t,e,n,l),"channelsFirst"===i&&(o=Ms(o,[0,3,1,2])),o})}function Dv(t,e,n,r,i,s){return Va(()=>{let o;Fg(i),Lg(s),$g(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==s&&(s="max"),t=qy(t,i);const l="same"===r?"same":"valid";return o="max"===s?Au(t,e,n,l):iu(t,e,n,l),"channelsFirst"===i&&(o=Ms(o,[0,4,1,2,3])),o})}Iv.className="ZeroPadding2D",d.registerClass(Iv);class Av extends tb{constructor(t){if(null==t.poolSize&&(t.poolSize=2),super(t),"number"==typeof t.poolSize)this.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new ng("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(t.poolSize)}`);this.poolSize=t.poolSize}if(_g(this.poolSize,"poolSize"),null==t.strides)this.strides=this.poolSize;else if("number"==typeof t.strides)this.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new ng("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+`${JSON.stringify(t.strides)}`);this.strides=t.strides}_g(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,$g(this.padding),this.inputSpec=[new Ym({ndim:3})]}computeOutputShape(t){const e=Uy((t=Wm(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]}call(t,e){return Va(()=>{this.invokeCallHook(t,e),t=Jg(Vm(t),2);const n=this.poolingFunction(Vm(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return jr(n,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(t,e),t}}class Nv extends Av{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return Fg(i),$g(r),Mv(t,e,n,r,i,"max")}}Nv.className="MaxPooling1D",d.registerClass(Nv);class Rv extends Av{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return Fg(i),$g(r),Mv(t,e,n,r,i,"avg")}}Rv.className="AveragePooling1D",d.registerClass(Rv);class Fv extends tb{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new ng("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+`${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];_g(this.poolSize,"poolSize"),_g(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Fg(this.dataFormat),$g(this.padding),this.inputSpec=[new Ym({ndim:4})]}computeOutputShape(t){t=Wm(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Uy(e,this.poolSize[0],this.padding,this.strides[0]),n=Uy(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]}call(t,e){return Va(()=>(this.invokeCallHook(t,e),this.poolingFunction(Vm(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class $v extends Fv{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return Fg(i),$g(r),Mv(t,e,n,r,i,"max")}}$v.className="MaxPooling2D",d.registerClass($v);class Lv extends Fv{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return Fg(i),$g(r),Mv(t,e,n,r,i,"avg")}}Lv.className="AveragePooling2D",d.registerClass(Lv);class jv extends tb{constructor(t){if(null==t.poolSize&&(t.poolSize=[2,2,2]),super(t),this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new ng("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+`${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];_g(this.poolSize,"poolSize"),_g(this.strides,"strides"),this.padding=null==t.padding?"valid":t.padding,this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Fg(this.dataFormat),$g(this.padding),this.inputSpec=[new Ym({ndim:5})]}computeOutputShape(t){t=Wm(t);let e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[4]:t[3];return e=Uy(e,this.poolSize[0],this.padding,this.strides[0]),n=Uy(n,this.poolSize[1],this.padding,this.strides[1]),r=Uy(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n,r]:[t[0],e,n,r,t[4]]}call(t,e){return Va(()=>(this.invokeCallHook(t,e),this.poolingFunction(Vm(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class Bv extends jv{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return Fg(i),$g(r),Dv(t,e,n,r,i,"max")}}Bv.className="MaxPooling3D",d.registerClass(Bv);class Vv extends jv{constructor(t){super(t)}poolingFunction(t,e,n,r,i){return Fg(i),$g(r),Dv(t,e,n,r,i,"avg")}}Vv.className="AveragePooling3D",d.registerClass(Vv);class Wv extends tb{constructor(t){super(t),this.inputSpec=[new Ym({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,e){throw new rg}}class Uv extends Wv{constructor(t){super(t||{})}call(t,e){return Va(()=>{const e=Vm(t);return fi(e,1)})}}Uv.className="GlobalAveragePooling1D",d.registerClass(Uv);class Hv extends Wv{constructor(t){super(t||{})}call(t,e){return Va(()=>{const e=Vm(t);return Mu(e,1)})}}Hv.className="GlobalMaxPooling1D",d.registerClass(Hv);class Gv extends tb{constructor(t){super(t),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Fg(this.dataFormat),this.inputSpec=[new Ym({ndim:4})]}computeOutputShape(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]}call(t,e){throw new rg}getConfig(){const t={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(t,e),t}}class qv extends Gv{call(t,e){return Va(()=>{const e=Vm(t);return fi(e,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}qv.className="GlobalAveragePooling2D",d.registerClass(qv);class Kv extends Gv{call(t,e){return Va(()=>{const e=Vm(t);return Mu(e,"channelsLast"===this.dataFormat?[1,2]:[2,3])})}}function Yv(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new ng("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=i(e),constants:n=i(n)}}function Xv(t,e,n,r=!1,i,s,o=!1,l=!1){return Va(()=>{const a=e.shape.length;if(a<3)throw new ng(`Input should be at least 3D, but is ${a}D.`);const u=[1,0].concat(Zg(2,a));if(e=Ms(e,u),null!=s)throw new rg("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=i.asType("bool").asType("float32")).rank===a-1&&(i=$r(i,-1)),i=Ms(i,u)),r&&(e=bc(e,0),null!=i&&(i=bc(i,0)));const c=[];let h,d=n;const p=e.shape[0],f=Vr(e);let g,m;null!=i&&(g=Vr(i));for(let e=0;e<p;++e){const n=f[e],r=Va(()=>t(n,d));if(null==i)h=r[0],d=r[1];else{const t=Va(()=>{const t=g[e],n=Mr(t).sub(t);return{output:r[0].mul(t).add(d[0].mul(n)),newStates:d.map((e,i)=>r[1][i].mul(t).add(e.mul(n)))}});h=t.output,d=t.newStates}l&&c.push(h)}return l&&(m=Br(c,1)),[h,m,d]})}Kv.className="GlobalMaxPooling2D",d.registerClass(Kv);class Zv extends tb{constructor(t){let e;if(super(t),null==t.cell)throw new ng("cell property is missing for the constructor of RNN.");if(null==(e=Array.isArray(t.cell)?new s_({cells:t.cell}):t.cell).stateSize)throw new ng("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=e,this.returnSequences=null!=t.returnSequences&&t.returnSequences,this.returnState=null!=t.returnState&&t.returnState,this.goBackwards=null!=t.goBackwards&&t.goBackwards,this._stateful=null!=t.stateful&&t.stateful,this.unroll=null!=t.unroll&&t.unroll,this.supportsMasking=!0,this.inputSpec=[new Ym({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){return null==this.states_?Zg(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(t=>null):this.states_}setStates(t){this.states_=t}computeOutputShape(t){jm(t)&&(t=t[0]),t=t;let e=this.cell.stateSize;Array.isArray(e)||(e=[e]);const n=e[0];let r;if(r=this.returnSequences?[t[0],t[1],n]:[t[0],n],this.returnState){const n=[];for(const r of e)n.push([t[0],r]);return[r].concat(n)}return r}computeMask(t,e){return Va(()=>{Array.isArray(e)&&(e=e[0]);const t=this.returnSequences?e:null;if(this.returnState){const e=this.states.map(t=>null);return[t].concat(e)}return t})}get states(){if(null==this.states_){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,e=[];for(let n=0;n<t;++n)e.push(null);return e}return this.states_}set states(t){this.states_=t}build(t){if(null!=this.numConstants)throw new rg("Constants support is not implemented in RNN yet.");jm(t)&&(t=t[0]),t=t,this.inputSpec[0]=new Ym({shape:[this.stateful?t[0]:null,null,t[t.length-1]]});const e=[t[0]].concat(t.slice(2));let n;if(this.cell.build(e),n=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.arraysEqual(this.stateSpec.map(t=>t.shape[t.shape.length-1]),n))throw new ng("An initialState was passed that is not compatible with "+`cell.stateSize. Received stateSpec=${this.stateSpec}; `+`However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=n.map(t=>new Ym({shape:[null,t]}));this.stateful&&this.resetStates()}resetStates(t,e=!1){Va(()=>{if(!this.stateful)throw new tg("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new ng("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)this.states_=Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>zr([n,t])):[zr([n,this.cell.stateSize])];else if(null==t)Wa(this.states_),null!=this.keptStates&&(Wa(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(t=>zr([n,t])):this.states_[0]=zr([n,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new ng(`Layer ${this.name} expects ${this.states_.length} state(s), `+`but it received ${t.length} state value(s). Input `+`received: ${t}`);!0===e?this.keptStates.push(this.states_.slice()):Wa(this.states_);for(let e=0;e<this.states_.length;++e){const i=t[e],s=Array.isArray(this.cell.stateSize)?this.cell.stateSize[e]:this.cell.stateSize,o=[n,s];if(!r.arraysEqual(i.shape,o))throw new ng(`State ${e} is incompatible with layer ${this.name}: `+`expected shape=${o}, received shape=${i.shape}`);this.states_[e]=i}}this.states_=this.states_.map(t=>Ua(t.clone()))})}apply(t,e){let n=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const i=Yv(t,n,r,this.numConstants);t=i.inputs,r=i.constants;let s=[],o=[];if(null!=(n=i.initialState)){e.initialState=n,s=s.concat(n),this.stateSpec=[];for(const t of n)this.stateSpec.push(new Ym({shape:t.shape}));o=o.concat(this.stateSpec)}if(null!=r&&(e.constants=r,s=s.concat(r),this.numConstants=r.length),s[0]instanceof Xm){const n=[t].concat(s),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const l=super.apply(n,e);return this.inputSpec=i,l}return super.apply(t,e)}call(t,e){return Va(()=>{const n=null==e?null:e.mask,r=null==e?null:e.training;let i=null==e?null:e.initialState;t=Vm(t),null==i&&(i=this.stateful?this.states_:this.getInitialState(t));const s=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==s)throw new ng(`RNN Layer has ${s} state(s) but was passed `+`${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const o={training:r},l=Xv((t,e)=>{const n=this.cell.call([t].concat(e),o);return[n[0],n.slice(1)]},t,i,this.goBackwards,n,null,this.unroll,this.returnSequences),a=l[0],u=l[1],c=l[2];this.stateful&&this.resetStates(c,r);const h=this.returnSequences?u:a;return this.returnState?[h].concat(c):h})}getInitialState(t){return Va(()=>{let e=zr(t.shape);return e=Jg(e=bi(e,[1,2])),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(t=>t>1?sm(e,[1,t]):e):this.cell.stateSize>1?[sm(e,[1,this.cell.stateSize])]:[e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const e=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:e};const n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,e,n={}){const r=fb(e.cell,n);return new t(Object.assign(e,{cell:r}))}}Zv.className="RNN",d.registerClass(Zv);class Qv extends tb{}class Jv extends Qv{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,_g(this.units,"units"),this.activation=Py(null==t.activation?this.DEFAULT_ACTIVATION:t.activation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=Nm(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Nm(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Nm(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ry(t.kernelRegularizer),this.recurrentRegularizer=Ry(t.recurrentRegularizer),this.biasRegularizer=Ry(t.biasRegularizer),this.kernelConstraint=Ig(t.kernelConstraint),this.recurrentConstraint=Ig(t.recurrentConstraint),this.biasConstraint=Ig(t.biasConstraint),this.dropout=Yg([1,Xg([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=Yg([1,Xg([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Wm(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return Va(()=>{if(2!==(t=t).length)throw new ng(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let n=t[1];t=t[0];const r=null!=e.training&&e.training;let i;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=o_(()=>Mr(t),this.dropout,r)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=o_(()=>Mr(n),this.recurrentDropout,r));const s=this.dropoutMask,o=this.recurrentDropoutMask;i=lm(null!=s?Gr(t,s):t,this.kernel.read()),null!=this.bias&&(i=hm(i,this.bias.read())),null!=o&&(n=Gr(n,o));let l=dr(i,lm(n,this.recurrentKernel.read()));return null!=this.activation&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t={units:this.units,activation:Ty(this.activation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:Ay(this.kernelRegularizer),recurrentRegularizer:Ay(this.recurrentRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),recurrentConstraint:zg(this.recurrentConstraint),biasConstraint:zg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},e=super.getConfig();return Object.assign(t,e),t}}Jv.className="SimpleRNNCell",d.registerClass(Jv);class t_ extends Zv{constructor(t){t.cell=new Jv(t),super(t)}call(t,e){return Va(()=>(null!=this.cell.dropoutMask&&(Wa(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Wa(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}get units(){return this.cell.units}get activation(){return this.cell.activation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}getConfig(){const t={units:this.units,activation:Ty(this.activation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:Ay(this.kernelRegularizer),recurrentRegularizer:Ay(this.recurrentRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),recurrentConstraint:zg(this.recurrentConstraint),biasConstraint:zg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},e=super.getConfig();return delete e.cell,Object.assign(t,e),t}static fromConfig(t,e){return new t(e)}}t_.className="SimpleRNN",d.registerClass(t_);class e_ extends Qv{constructor(t){if(super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new ng("GRUCell does not support reset_after parameter set to true.");this.units=t.units,_g(this.units,"units"),this.activation=Py(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Py(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=Nm(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Nm(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Nm(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Ry(t.kernelRegularizer),this.recurrentRegularizer=Ry(t.recurrentRegularizer),this.biasRegularizer=Ry(t.biasRegularizer),this.kernelConstraint=Ig(t.kernelConstraint),this.recurrentConstraint=Ig(t.recurrentConstraint),this.biasConstraint=Ig(t.biasConstraint),this.dropout=Yg([1,Xg([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=Yg([1,Xg([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Wm(t),this.kernel=this.addWeight("kernel",[t[t.length-1],3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.bias=this.useBias?this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):null,this.built=!0}call(t,e){return Va(()=>{if(2!==(t=t).length)throw new ng("GRUCell expects 2 input Tensors (inputs, h, c), got "+`${t.length}.`);const n=null!=e.training&&e.training;let r=t[1];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=o_(()=>Mr(t),this.dropout,n,3)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=o_(()=>Mr(r),this.recurrentDropout,n,3));const i=this.recurrentDropoutMask;let s,o,l;0<this.dropout&&this.dropout<1&&(t=Gr(t,this.dropoutMask[0]));let a=lm(t,this.kernel.read());this.useBias&&(a=hm(a,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Gr(r,i[0]));const u=this.recurrentKernel.read(),[c,h]=xs(u,[2*this.units,this.units],u.rank-1),d=lm(r,c),[p,f,g]=xs(a,3,a.rank-1),[m,b]=xs(d,2,d.rank-1);s=this.recurrentActivation.apply(dr(p,m)),o=this.recurrentActivation.apply(dr(f,b));const y=lm(Gr(o,r),h);l=this.activation.apply(dr(g,y));const v=dr(Gr(s,r),Gr(dr(1,$i(s)),l));return[v,v]})}getConfig(){const t={units:this.units,activation:Ty(this.activation),recurrentActivation:Ty(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:Ay(this.kernelRegularizer),recurrentRegularizer:Ay(this.recurrentRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),recurrentConstraint:zg(this.recurrentConstraint),biasConstraint:zg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1},e=super.getConfig();return Object.assign(t,e),t}}e_.className="GRUCell",d.registerClass(e_);class n_ extends Zv{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new e_(t),super(t)}call(t,e){return Va(()=>(null!=this.cell.dropoutMask&&(Wa(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Wa(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}get units(){return this.cell.units}get activation(){return this.cell.activation}get recurrentActivation(){return this.cell.recurrentActivation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}get implementation(){return this.cell.implementation}getConfig(){const t={units:this.units,activation:Ty(this.activation),recurrentActivation:Ty(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),kernelRegularizer:Ay(this.kernelRegularizer),recurrentRegularizer:Ay(this.recurrentRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),recurrentConstraint:zg(this.recurrentConstraint),biasConstraint:zg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1},e=super.getConfig();return delete e.cell,Object.assign(t,e),t}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}n_.className="GRU",d.registerClass(n_);class r_ extends Qv{constructor(t){super(t),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,_g(this.units,"units"),this.activation=Py(void 0===t.activation?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=Py(void 0===t.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=null==t.useBias||t.useBias,this.kernelInitializer=Nm(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Nm(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Nm(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=Ry(t.kernelRegularizer),this.recurrentRegularizer=Ry(t.recurrentRegularizer),this.biasRegularizer=Ry(t.biasRegularizer),this.kernelConstraint=Ig(t.kernelConstraint),this.recurrentConstraint=Ig(t.recurrentConstraint),this.biasConstraint=Ig(t.biasConstraint),this.dropout=Yg([1,Xg([0,null==t.dropout?0:t.dropout])]),this.recurrentDropout=Yg([1,Xg([0,null==t.recurrentDropout?0:t.recurrentDropout])]),this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var e;let n;if(t=Wm(t),this.kernel=this.addWeight("kernel",[t[t.length-1],4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const t=this.biasInitializer,r=this.units;n=new((e=class extends mm{apply(e,n){const i=t.apply([r]),s=(new ym).apply([r]),o=t.apply([2*r]);return im(im(i,s),o)}}).className="CustomInit",e)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,e){return Va(()=>{const n=null!=e.training&&e.training;if(3!==(t=t).length)throw new ng("LSTMCell expects 3 input Tensors (inputs, h, c), got "+`${t.length}.`);let r=t[1];const i=t[2];t=t[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=o_(()=>Mr(t),this.dropout,n,4)),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=o_(()=>Mr(r),this.recurrentDropout,n,4));const s=this.recurrentDropoutMask;let o,l,a,u;0<this.dropout&&this.dropout<1&&(t=Gr(t,this.dropoutMask[0]));let c=lm(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=Gr(r,s[0])),c=dr(c,lm(r,this.recurrentKernel.read())),this.useBias&&(c=hm(c,this.bias.read()));const[h,d,p,f]=xs(c,4,c.rank-1);o=this.recurrentActivation.apply(h),l=this.recurrentActivation.apply(d),a=dr(Gr(l,i),Gr(o,this.activation.apply(p))),u=this.recurrentActivation.apply(f);const g=Gr(u,this.activation.apply(a));return[g,g,a]})}getConfig(){const t={units:this.units,activation:Ty(this.activation),recurrentActivation:Ty(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ay(this.kernelRegularizer),recurrentRegularizer:Ay(this.recurrentRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),recurrentConstraint:zg(this.recurrentConstraint),biasConstraint:zg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},e=super.getConfig();return Object.assign(t,e),t}}r_.className="LSTMCell",d.registerClass(r_);class i_ extends Zv{constructor(t){0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new r_(t),super(t)}call(t,e){return Va(()=>(null!=this.cell.dropoutMask&&(Wa(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Wa(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),super.call(t,{mask:null==e?null:e.mask,training:null==e?null:e.training,initialState:null==e?null:e.initialState})))}get units(){return this.cell.units}get activation(){return this.cell.activation}get recurrentActivation(){return this.cell.recurrentActivation}get useBias(){return this.cell.useBias}get kernelInitializer(){return this.cell.kernelInitializer}get recurrentInitializer(){return this.cell.recurrentInitializer}get biasInitializer(){return this.cell.biasInitializer}get unitForgetBias(){return this.cell.unitForgetBias}get kernelRegularizer(){return this.cell.kernelRegularizer}get recurrentRegularizer(){return this.cell.recurrentRegularizer}get biasRegularizer(){return this.cell.biasRegularizer}get kernelConstraint(){return this.cell.kernelConstraint}get recurrentConstraint(){return this.cell.recurrentConstraint}get biasConstraint(){return this.cell.biasConstraint}get dropout(){return this.cell.dropout}get recurrentDropout(){return this.cell.recurrentDropout}get implementation(){return this.cell.implementation}getConfig(){const t={units:this.units,activation:Ty(this.activation),recurrentActivation:Ty(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Am(this.kernelInitializer),recurrentInitializer:Am(this.recurrentInitializer),biasInitializer:Am(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Ay(this.kernelRegularizer),recurrentRegularizer:Ay(this.recurrentRegularizer),biasRegularizer:Ay(this.biasRegularizer),activityRegularizer:Ay(this.activityRegularizer),kernelConstraint:zg(this.kernelConstraint),recurrentConstraint:zg(this.recurrentConstraint),biasConstraint:zg(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},e=super.getConfig();return delete e.cell,Object.assign(t,e),t}static fromConfig(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)}}i_.className="LSTM",d.registerClass(i_);class s_ extends Qv{constructor(t){super(t),this.cells=t.cells}get stateSize(){const t=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?t.push(...e.stateSize):t.push(e.stateSize);return t}call(t,e){return Va(()=>{let n=(t=t).slice(1);const r=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?r.push(n.splice(0,t.stateSize.length)):r.push(n.splice(0,1));r.reverse();const i=[];let s;for(let o=0;o<this.cells.length;++o){const l=this.cells[o];n=r[o],s=0===o?[t[0]].concat(n):[s[0]].concat(n),s=l.call(s,e),i.push(s.slice(1))}n=[];for(const t of i.slice().reverse())n.push(...t);return[s[0]].concat(n)})}build(t){let e;jm(t)&&(t=t[0]),t=t,this.cells.forEach((n,r)=>{Vg(`RNNCell_${r}`,()=>{n.build(t),e=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,t=[t[0],e]})}),this.built=!0}getConfig(){const t=[];for(const r of this.cells)t.push({className:r.getClassName(),config:r.getConfig()});const e={cells:t},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(t,e,n={}){const r=[];for(const i of e.cells)r.push(fb(i,n));return new t({cells:r})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const e of this.cells)t.push(...e.nonTrainableWeights);if(!this.trainable){const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e.concat(t)}return t}getWeights(){const t=[];for(const e of this.cells)t.push(...e.weights);return qm(t)}setWeights(t){const e=[];for(const n of this.cells){const r=t.splice(n.weights.length);for(let t=0;t<n.weights.length;++t)e.push([n.weights[t],r[t]])}Km(e)}}function o_(t,e,n=null,r=1){function i(){return dm(t(),e)}if(r>1){const e=[];for(let s=0;s<r;s++)e.push(pm(i,t,n));return e.map(t=>Ua(t.clone()))}return Ua(pm(i,t,n).clone())}s_.className="StackedRNNCells",d.registerClass(s_);class l_ extends tb{constructor(t){super(t),this.layer=t.layer}build(t){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(t){null!=this.layer&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(t,e),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,e,n={}){const r=fb(e.layer,n);delete e.layer;const i={layer:r};return Object.assign(i,e),new t(i)}}class a_ extends l_{constructor(t){super(t),this.supportsMasking=!0}build(t){if((t=Wm(t)).length<3)throw new ng("TimeDistributed layer expects an input shape >= 3D, but received "+`input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const e=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(e),this.layer.built=!0),super.build(t)}computeOutputShape(t){const e=[(t=Wm(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e);return[n[0],t[1]].concat(n.slice(1))}call(t,e){return Va(()=>Xv((t,n)=>[Vm(this.layer.call(t,e)),[]],t=Vm(t),[],!1,null,null,!1,!0)[1])}}a_.className="TimeDistributed",d.registerClass(a_);const u_="concat";class c_ extends l_{constructor(t){super(t);const e=t.layer.getConfig(),n={};n.className=t.layer.getClassName(),n.config=e,this.forwardLayer=fb(n),e.goBackwards=!0!==e.goBackwards;const r={};if(r.className=t.layer.getClassName(),r.config=e,this.backwardLayer=fb(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===t.mergeMode?u_:t.mergeMode,yg(Ng,"BidirectionalMergeMode",this.mergeMode),t.weights)throw new rg("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const e=Math.floor(t.length/2);this.forwardLayer.setWeights(t.slice(0,e)),this.backwardLayer.setWeights(t.slice(e))}computeOutputShape(t){let e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):ag(n)}apply(t,e){let n=null==e?null:e.initialState,r=null==e?null:e.constants;null==e&&(e={});const i=Yv(t,n,r,this.numConstants);if(t=i.inputs,n=i.initialState,r=i.constants,Array.isArray(t)&&(n=t.slice(1),t=t[0]),(null==n||0===n.length)&&null==r)return super.apply(t,e);const s=[],o=[];if(null!=n){const t=n.length;if(t%2>0)throw new ng("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");e.initialState=n,s.push(...n);const r=n.map(t=>new Ym({shape:t.shape}));this.forwardLayer.stateSpec=r.slice(0,t/2),this.backwardLayer.stateSpec=r.slice(t/2),o.push(...r)}if(null!=r)throw new rg("Support for constants in Bidirectional layers is not implemented yet.");const l=s[0]instanceof Xm;for(const a of s)if(a instanceof Xm!==l)throw new ng("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const n=[t].concat(s),r=this.inputSpec.concat(o),i=this.inputSpec;this.inputSpec=r;const l=super.apply(n,e);return this.inputSpec=i,l}return super.apply(t,e)}call(t,e){return Va(()=>{const n=e.initialState;let r,i,s,o;if(null==n)r=this.forwardLayer.call(t,e),i=this.backwardLayer.call(t,e);else{const s=n.slice(0,n.length/2),o=n.slice(n.length/2);r=this.forwardLayer.call(t,Object.assign(e,{initialState:s})),i=this.backwardLayer.call(t,Object.assign(e,{initialState:o}))}return this.returnState&&(Array.isArray(r)&&(s=r.slice(1).concat(i.slice(1))),r=r[0],i=i[0]),this.returnSequences&&(i=bc(i,1)),"concat"===this.mergeMode?o=rm([r,i]):"sum"===this.mergeMode?o=dr(r,i):"ave"===this.mergeMode?o=Gr(.5,dr(r,i)):"mul"===this.mergeMode?o=Gr(r,i):null==this.mergeMode&&(o=[r,i]),this.returnState?null==this.mergeMode?o.concat(s):[o].concat(s):o})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Vg(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Vg(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,e){let n;if(Array.isArray(e)&&(e=e[0]),n=this.returnSequences?null==this.mergeMode?[e,e]:e:null==this.mergeMode?[null,null]:null,this.returnState){const t=this.forwardLayer.states.map(t=>null);return Array.isArray(n)?n.concat(t).concat(t):[n].concat(t).concat(t)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},e=super.getConfig();return Object.assign(t,e),t}static fromConfig(t,e){const n=fb(e.layer);if(delete e.layer,null!=e.numConstants)throw new rg("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const r=e;return r.layer=n,new t(r)}}function h_(t){return null===t?null:d_(t[0])?{value:null,recurse:!0}:{value:t,recurse:!1}}function d_(t){return null!=t&&!ArrayBuffer.isView(t)&&(Array.isArray(t)||"object"==typeof t&&!(t instanceof ye))}function p_(t){return t instanceof ye?{value:t.clone(),recurse:!1}:d_(t)?{value:null,recurse:!0}:{value:t,recurse:!1}}c_.className="Bidirectional",d.registerClass(c_);class f_{constructor(t){if(this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}wrap(t){for(;t<0;)t+=this.doubledCapacity;return t%this.doubledCapacity}get(t){if(t<0)throw new RangeError("Can't get item at a negative index.");return this.data[t%this.capacity]}set(t,e){if(t<0)throw new RangeError("Can't set item at a negative index.");this.data[t%this.capacity]=e}length(){let t=this.end-this.begin;return t<0&&(t=this.doubledCapacity+t),t}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,t),this.end=this.wrap(this.end+1)}pushAll(t){for(const e of t)this.push(e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const t=this.get(this.end);return this.set(this.end,void 0),t}unshift(t){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,t)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),t}shuffleExcise(t){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.wrap(this.begin+t),n=this.get(e);return this.set(e,this.pop()),n}}class g_ extends f_{constructor(){super(g_.INITIAL_CAPACITY)}isFull(){return!1}push(t){super.isFull()&&this.expand(),super.push(t)}unshift(t){super.isFull()&&this.expand(),super.unshift(t)}expand(){const t=2*this.capacity,e=new Array(t),n=this.length();for(let r=0;r<n;r++)e[r]=this.get(this.wrap(this.begin+r));this.data=e,this.capacity=t,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}g_.INITIAL_CAPACITY=32;class m_{async toArray(){const t=[];let e=await this.next();for(;!e.done;)t.push(e.value),e=await this.next();return t}async toArrayForTest(){const t=this.prefetch(100),e=[];let n=await t.next();for(;!n.done;)e.push(n.value),n=await t.next();return e}async resolveFully(){let t=await this.next();for(;!t.done;)t=await this.next()}async resolveWhile(t){let e=await this.next(),n=t(e.value);for(;!e.done&&n;)n=t((e=await this.next()).value)}handleErrors(t){return new O_(this,t)}filter(t){return new C_(this,t)}map(t){return new S_(this,t)}mapAsync(t){return new k_(this,t)}serialMapAsync(t){return new k_(this,t).serial()}flatmap(t){return new T_(this,t)}async forEachAsync(t){return this.map(t).resolveFully()}async serialForEach(t){return this.serialMapAsync(t).resolveWhile(t=>!0===t)}rowMajorBatch(t,e=!0){return new x_(this,t,e)}columnMajorBatch(t,e=!0,n=h_){return this.rowMajorBatch(t,e).map(t=>(function(e,n=h_){return function t(e,n,r=new Set){const i=e[0];if(r.has(i))throw new Error("Circular references are not supported.");const s=n(e);if(s.recurse&&null!==s.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(s.recurse){if(d_(i)){const s=Array.isArray(i)?[]:{};r.add(i);for(const o in i){const i=t(e.map(t=>t[o]),n,r);s[o]=i}return r.delete(i),s}throw new Error(`Can't recurse into non-iterable type: ${i}`)}return s.value}(t,n)})(0,n))}concatenate(t,e){return new z_(new b_([this,t]),e)}take(t){return t<0||null==t?this:new w_(this,t)}skip(t){return t<0||null==t?this:new __(this,t)}prefetch(t){return new I_(this,t)}shuffle(t,e){return new M_(this,t,e)}serial(){return new v_(this)}}class b_ extends m_{constructor(t){super(),this.items=t,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const t=this.items[this.trav];return this.trav++,{value:(e=t,function t(e,n,r=new Map,i=new Set){if(null==e)return null;if(i.has(e))throw new Error("Circular references are not supported.");if(r.has(e))return r.get(e);const s=n(e);if(s.recurse&&null!==s.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(s.recurse){if(d_(e)){const s=Array.isArray(e)?[]:{};i.add(e);for(const o in e){const l=t(e[o],n,r,i);s[o]=l}return i.delete(e),s}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return r.set(e,s.value),s.value}(e,p_)),done:!1};var e}}class y_ extends m_{constructor(t){super(),this.nextFn=t}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(t){throw t.message=`Error thrown while iterating through a dataset: ${t.message}`,t}}}class v_ extends m_{constructor(t){super(),this.upstream=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class __ extends m_{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const t=await this.upstream.next();if(t.done)return t;Wa(t.value)}return this.upstream.next()}}class w_ extends m_{constructor(t,e){super(),this.upstream=t,this.maxCount=e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class x_ extends m_{constructor(t,e,n=!0){super(),this.upstream=t,this.batchSize=e,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const t=[];for(;t.length<this.batchSize;){const e=await this.upstream.next();if(e.done)return this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0};t.push(e.value)}return{value:t,done:!1}}}class C_ extends m_{constructor(t,e){super(),this.upstream=t,this.predicate=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const t=await this.upstream.next();if(t.done||this.predicate(t.value))return t;Wa(t.value)}}}class S_ extends m_{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Map`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i.getTensorsInContainer(t.value),n=this.transform(t.value),r=i.getTensorsInContainer(n);for(const s of e)i.isTensorInList(s,r)||s.dispose();return{value:n,done:!1}}}class O_ extends m_{constructor(t,e){super(),this.upstream=t,this.handler=e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(t){if(!this.handler(t))return{value:null,done:!0}}}}class k_ extends m_{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const t=await this.upstream.next();if(t.done)return{value:null,done:!0};const e=i.getTensorsInContainer(t.value),n=await this.transform(t.value),r=i.getTensorsInContainer(n);for(const s of e)i.isTensorInList(s,r)||s.dispose();return{value:n,done:!1}}}class E_ extends m_{constructor(){super(),this.outputQueue=new g_,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!(await this.pump()))return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class T_ extends E_{constructor(t,e){super(),this.upstream=t,this.transform=e}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const t=await this.upstream.next();if(t.done)return!1;const e=i.getTensorsInContainer(t.value),n=this.transform(t.value),r=i.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(const s of e)i.isTensorInList(s,r)||s.dispose();return!0}}class z_ extends m_{constructor(t,e){super(),this.baseErrorHandler=e,this.lastRead=null,this.iterator=null,this.moreIterators=t}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(t){if(await t,null==this.iterator){const t=await this.moreIterators.next();if(t.done)return{value:null,done:!0};this.iterator=t.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const e=await this.iterator.next();return e.done?(this.iterator=null,this.readFromChain(t)):e}}var P_;!function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"}(P_||(P_={}));class I_ extends m_{constructor(t,e){super(),this.upstream=t,this.bufferSize=e,this.buffer=new f_(e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const t=this.upstream.next();this.buffer.push(t)}}next(){return this.refill(),this.buffer.shift()}}class M_ extends I_{constructor(t,e,n){super(t,e),this.upstream=t,this.windowSize=e,this.upstreamExhausted=!1,this.random=Ku.alea(n||r.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(t){return Math.floor(this.random()*t)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const t=this.chooseIndex(),e=await this.buffer.shuffleExcise(t);if(!e.done)return this.refill(),e;this.upstreamExhausted=!0}return{value:null,done:!0}}}class D_{constructor(){this.size=null}batch(t,e=!0){const n=this;let i;return r.assert(t>0,()=>`batchSize needs to be positive, but it is\n      ${t}`),A_(async()=>(await n.iterator()).columnMajorBatch(t,e,N_),i=this.size===1/0||null==this.size?this.size:e?Math.ceil(this.size/t):Math.floor(this.size/t))}concatenate(t){const e=this;let n;return A_(async()=>(await e.iterator()).concatenate(await t.iterator()),n=this.size===1/0||t.size===1/0?1/0:null!=this.size&&null!=t.size?this.size+t.size:null)}filter(t){const e=this;let n;return A_(async()=>(await e.iterator()).filter(e=>Va(()=>t(e))),n=this.size===1/0?1/0:null)}async forEachAsync(t){return(await this.iterator()).forEachAsync(t)}map(t){const e=this;return A_(async()=>(await e.iterator()).map(e=>Va(()=>t(e))),this.size)}mapAsync(t){const e=this;return A_(async()=>(await e.iterator()).mapAsync(t),this.size)}prefetch(t){if(null==t)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const e=this;return A_(async()=>(await e.iterator()).prefetch(t),this.size)}repeat(t){const e=this;let n;return A_(async()=>(function(t,e){return new z_(t,void 0)})(function(t){return new y_(async()=>({value:await e.iterator(),done:!1}))}().take(t)),n=null!=this.size&&t>0?this.size*t:0===t?0:null!=this.size&&(void 0===t||t<0)?1/0:null)}skip(t){const e=this;let n;return A_(async()=>(await e.iterator()).skip(t),n=null!=this.size&&t>=0&&this.size>=t?this.size-t:null!=this.size&&(this.size<t||void 0===t||t<0)?0:null)}shuffle(t,e,n=!0){if(null==t||t<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting "+`bufferSize to the dataset size (${this.size} elements)`);const i=this,s=Ku.alea(e||r.now().toString());return A_(async()=>{let e=s.int32();return n&&(e+=s.int32()),(await i.iterator()).shuffle(t,e.toString())},this.size)}take(t){const e=this;let n;return A_(async()=>(await e.iterator()).take(t),n=null!=this.size&&this.size>t?t:null!=this.size&&this.size<=t?this.size:null)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function A_(t,e=null){return new class extends D_{constructor(){super(...arguments),this.size=e}async iterator(){return t()}}}function N_(t){return null===t?null:null==(e=t[0])||null===(n=e)||"object"!=typeof n&&"function"!=typeof n||Array.isArray(e)||"object"==typeof e&&e instanceof ye||r.isTypedArray(e)?{value:function(t){if(0===t.length)throw new Error("Can't make a batch of zero elements.");return t[0]instanceof ye?Br(t):yr(t)}(t),recurse:!1}:{value:null,recurse:!0};var e,n}function R_(t,e,n,i){const s=r.getTypedArrayFromDType(i,r.sizeFromShape(n));for(let r=0;r<s.length;++r){const n=r*e;let i=t[n];for(let r=0;r<e;++r){const e=t[n+r];e>i&&(i=e)}s[r]=i}return s}function F_(t,e,n,i,s){const o=e.length,l=r.sizeFromShape(e),a=r.computeStrides(e),u=r.computeStrides(s),c=r.getTypedArrayFromDType(n,r.sizeFromShape(s));for(let h=0;h<l;++h){const e=r.indexToLoc(h,o,a),n=new Array(e.length);for(let t=0;t<n.length;t++)n[t]=e[i[t]];c[r.locToIndex(n,o,u)]=t[h]}return c}function $_(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>{null!=t&&r.assert("complex64"!==t.dtype,()=>`${e} does not support complex64 tensors in the CPU backend.`)})}function L_(t,e,n,r,i,s){const o=i.strideHeight,l=i.strideWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,h=i.effectiveFilterWidth,d=i.padInfo.top,p=i.padInfo.left,f="max"===s?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Nr(i.outShape,n),m=g.values,b=i.outShape[1]*i.outShape[2]*i.outShape[3],y=i.outShape[2]*i.outShape[3],v=i.outShape[3];for(let _=0;_<i.batchSize;++_){const e=_*b,n=_*r[0];for(let g=0;g<i.inChannels;++g)for(let b=0;b<i.outHeight;++b){const _=b*o-d,w=Math.max(0,_),x=Math.min(i.inHeight,c+_),C=e+b*y;for(let e=0;e<i.outWidth;++e){const o=e*l-p,c=Math.max(0,o),d=Math.min(i.inWidth,h+o);let b=f,y=0,_=0;for(let e=w;e<x;e+=a){const i=n+e*r[1];for(let e=c;e<d;e+=u){const n=t[i+e*r[2]+g];"max"===s&&n>b?b=n:"avg"===s&&(y+=n,_++)}if(isNaN(b))break}m[C+e*v+g]="avg"===s?y/_:b}}}return g}function j_(t,e,n,r,i=!1,s=!1){const o=Nr(r.outShape,"int32"),l=r.strideHeight,a=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,g=Nr(e,n,t);for(let m=0;m<r.batchSize;++m)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.outHeight;++e){const n=e*l-p;let b=n;for(;b<0;)b+=u;const y=Math.min(r.inHeight,h+n);for(let l=0;l<r.outWidth;++l){const h=l*a-f;let p=h;for(;p<0;)p+=c;const v=Math.min(r.inWidth,d+h);let _=Number.NEGATIVE_INFINITY,w=-1;for(let e=b;e<y;e+=u){const o=e-n;for(let n=p;n<v;n+=c){const l=n-h,a=g.get(m,e,n,t);a>_&&(_=a,w=i?s?((m*r.inHeight+e)*r.inWidth+n)*r.inChannels+t:(e*r.inWidth+n)*r.inChannels+t:o*d+l)}}o.set(w,m,e,l,t)}}return o}D_.MAX_BUFFER_SIZE=1e4,Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");const B_=C.nonMaxSuppressionV3,V_=C.split,W_=C.tile,U_=C.topkImpl,H_=C.whereImpl;function G_(t,e,n,r){if("linear"===n)return t.linear(e);if("relu"===n)return t.relu(e);if("elu"===n)return t.elu(e);if("relu6"===n)return t.relu6(e);if("prelu"===n)return t.prelu(e,r);throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}class q_ extends Pd{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new zd(this,La())}write(t,e,n){this.firstUse&&(this.firstUse=!1,Z().get("IS_NODE")&&x.warn("\n============================\nHi there \u{1f44b}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const r={};return this.data.set(r,{values:t,dtype:n}),r}move(t,e,n,r){this.data.set(t,{values:e,dtype:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:e,complexTensors:n}=this.data.get(t);if("complex64"===e){const t=this.readSync(n.real.dataId),e=this.readSync(n.imag.dataId);return x.mergeRealAndImagArrays(t,e)}return this.data.get(t).values}bufferSync(t){const e=this.readSync(t.dataId);let n=e;if("string"===t.dtype)try{n=e.map(t=>r.decodeString(t))}catch(i){throw new Error("Failed to decode encoded string bytes into utf-8")}return Nr(t.shape,t.dtype,n)}makeOutput(t,e,n){const r=this.write(t,e,n);return La().makeTensorFromDataId(r,e,n,this)}disposeData(t){if(this.data.has(t)){const{complexTensors:e}=this.data.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}}async time(t){const e=r.now();return t(),{kernelMs:r.now()-e}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}complex(t,e){const n=this.makeOutput(null,t.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:La().keep(t.clone()),imag:La().keep(e.clone())},n}real(t){return this.data.get(t.dataId).complexTensors.real.clone()}imag(t){return this.data.get(t.dataId).complexTensors.imag.clone()}slice(t,e,n){if($_(t,"slice"),o.isSliceContinous(t.shape,e,n)){const i=o.computeFlatOffset(e,t.strides),s=r.sizeFromShape(n);return yr(this.readSync(t.dataId).subarray(i,i+s),n,t.dtype)}const i=Nr(n,t.dtype),s=this.bufferSync(t);for(let r=0;r<i.size;++r){const t=i.indexToLoc(r).map((t,n)=>t+e[n]);i.values[r]=s.get(...t)}return i.toTensor()}stridedSlice(t,e,n,r){$_(t,"stridedSlice");const i=o.computeOutShape(e,n,r);if(i.some(t=>0===t))return yr([],i);const s=Nr(i,t.dtype),l=this.bufferSync(t);for(let o=0;o<s.size;o++){const t=s.indexToLoc(o),n=new Array(t.length);for(let i=0;i<n.length;i++)n[i]=t[i]*r[i]+e[i];s.set(l.get(...n),...t)}return s.toTensor()}diag(t){const e=this.readSync(t.dataId),n=Nr([t.size,t.size],t.dtype),r=n.values;for(let i=0;i<e.length;i++)r[i*t.size+i]=e[i];return n.toTensor()}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let a=0;a<t.rank;a++)a!==e&&(r[i++]=t.shape[a]);const s=new Array(t.rank).fill(0),o=t.shape.slice();o[e]=1;const l=new Array(n);for(let a=0;a<l.length;a++)s[e]=a,l[a]=this.slice(t,s,o).reshape(r);return l}reverse(t,e){$_(t,"reverse");const n=Nr(t.shape,t.dtype),r=this.bufferSync(t);for(let i=0;i<n.size;i++){const s=n.indexToLoc(i),o=s.slice();e.forEach(e=>o[e]=t.shape[e]-1-o[e]),n.set(r.get(...o),...s)}return n.toTensor()}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>br(t)),r=t.map(t=>mr(t));return gr(this.concat(n,e),this.concat(r,e))}const n=t.map(t=>{const n=r.sizeFromShape(t.shape.slice(e));return t.as2D(-1,n)}),i=x.computeOutShape(n.map(t=>t.shape),1),s=Nr(i,t[0].dtype).values;if(1===n[0].shape[0]){let t=0;n.forEach(e=>{s.set(this.readSync(e.dataId),t),t+=e.size})}else{let t=0;n.forEach(e=>{const n=this.readSync(e.dataId);let r=0;for(let o=0;o<e.shape[0];++o){const l=o*i[1]+t;for(let t=0;t<e.shape[1];++t)s[l+t]=n[r++]}t+=e.shape[1]})}const o=x.computeOutShape(t.map(t=>t.shape),e);return yr(s,o,t[0].dtype)}neg(t){return $_(t,"neg"),this.multiply(_r(-1),t)}add(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t+n,imag:e+r})):this.broadcastedBinaryOp(t,e,ke(t.dtype,e.dtype),(t,e)=>t+e)}addN(t){$_(t,"addN");const e=t.map(t=>this.readSync(t.dataId)),n=Nr(t[0].shape,t[0].dtype),r=n.values;for(let i=0;i<t.length;i++){const t=e[i];for(let e=0;e<r.length;e++)r[e]+=t[e]}return n.toTensor()}softmax(t,e){const n=r.parseAxisParam([e],t.shape),i=Mu(t,n),s=x.expandShapeToKeepDim(i.shape,n),o=this.subtract(t,i.reshape(s)),l=this.exp(o),a=this.sum(l,n).reshape(s);return Hr(l,a)}subtract(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t-n,imag:e-r})):this.broadcastedBinaryOp(t,e,ke(t.dtype,e.dtype),(t,e)=>t-e)}pow(t,e){return $_([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.pow(t,e))}batchMatMul(t,e,n,r){$_([t,e],"matMul");const i=n?t.shape[1]:t.shape[2],s=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],l=t.shape[0],a=this.readSync(t.dataId),u=this.readSync(e.dataId),[c,h,d]=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],[p,f,g]=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],m=s*o,b=Nr([l,s,o],t.dtype),y=b.values,v=this.blockSize;for(let _=0;_<l;_++)for(let t=0;t<s;t+=v)for(let e=0;e<o;e+=v)for(let n=0;n<i;n+=v){const r=Math.min(t+v,s),l=Math.min(e+v,o),b=Math.min(n+v,i);for(let i=t;i<r;i++)for(let t=e;t<l;t++){let e=0;for(let r=n;r<b;r++)e+=a[_*c+i*h+r*d]*u[r*p+t*f+_*g];y[_*m+(i*o+t)]+=e}}return b.toTensor()}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:s,preluActivationWeights:o}){let l=this.batchMatMul(t,e,n,r);return i&&(l=this.add(l,i)),s&&(l=G_(this,l,s,o)),l}multiply(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),(t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})):this.broadcastedBinaryOp(t,e,ke(t.dtype,e.dtype),(t,e)=>t*e)}floorDiv(t,e){return $_([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",(t,e)=>Math.floor(t/e))}sum(t,e){$_(t,"sum"),x.assertAxesAreInnerMostDims("sum",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=zr(n,ke(t.dtype,"int32")),o=r.sizeFromShape(i),l=this.readSync(s.dataId),a=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*o;let e=0;for(let n=0;n<o;++n)e+=a[t+n];l[r]=e}return s}prod(t,e){$_(t,"sum");const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=zr(n,ke(t.dtype,"int32")),o=r.sizeFromShape(i),l=this.readSync(s.dataId),a=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*o;let e=1;for(let n=0;n<o;++n)e*=a[t+n];l[r]=e}return s}unsortedSegmentSum(t,e,n){$_(t,"unsortedSegmentSum");const r=[],i=t.rank-e.rank;for(let s=0;s<i;++s)e=e.expandDims(s+1);for(let s=0;s<n;++s){const n=_r(s,"int32"),i=ku(n,e).asType("float32").mul(t).sum(0);r.push(i)}return Br(r)}argMin(t,e){$_(t,"argMin");const n=[e];x.assertAxesAreInnerMostDims("argMin",n,t.rank);const[i,s]=x.computeOutAndReduceShapes(t.shape,n),o=zr(i,"int32"),l=r.sizeFromShape(s),a=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*l;let e=u[t],n=0;for(let r=0;r<l;++r){const i=u[t+r];i<e&&(e=i,n=r)}a[r]=n}return o}argMax(t,e){$_(t,"argMax");const n=[e];x.assertAxesAreInnerMostDims("argMax",n,t.rank);const[i,s]=x.computeOutAndReduceShapes(t.shape,n),o=zr(i,"int32"),l=r.sizeFromShape(s),a=this.readSync(o.dataId),u=this.readSync(t.dataId);for(let r=0;r<a.length;++r){const t=r*l;let e=u[t],n=0;for(let r=0;r<l;++r){const i=u[t+r];i>e&&(e=i,n=r)}a[r]=n}return o}cumsum(t,e,n,r){if($_(t,"cumsum"),e!==t.rank-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${t.rank-1} `+`but got axis=${e}`);const i=ke(t.dtype,"int32"),s=zr(t.shape,i),o=this.readSync(s.dataId),l=this.readSync(t.dataId),a=t.shape[t.rank-1],u=r?(t,e)=>t+a-e-1:(t,e)=>t+e;for(let c=0;c<l.length;c+=a)for(let t=0;t<a;t++){const e=u(c,t);if(0===t)o[e]=n?0:l[e];else{const r=u(c,t-1);o[e]=n?l[r]+o[r]:l[e]+o[r]}}return s}equal(t,e){return $_([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t===e?1:0)}notEqual(t,e){return $_([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t!==e?1:0)}less(t,e){return $_([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<e?1:0)}lessEqual(t,e){return $_([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t<=e?1:0)}greater(t,e){return $_([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>e?1:0)}greaterEqual(t,e){return $_([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t>=e?1:0)}logicalNot(t){$_(t,"logicalNot");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n[r]=e[r]?0:1;return this.makeOutput(n,t.shape,"bool")}logicalAnd(t,e){return $_([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t&&e)}logicalOr(t,e){return $_([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",(t,e)=>t||e)}select(t,e,n){$_([t,e,n],"select");const i=this.readSync(t.dataId),s=this.readSync(e.dataId),o=this.readSync(n.dataId),l=zr(e.shape,ke(e.dtype,n.dtype)),a=this.readSync(l.dataId);let u=0;const c=0===t.rank||t.rank>1||1===e.rank?1:r.sizeFromShape(e.shape.slice(1));for(let r=0;r<i.length;r++)for(let t=0;t<c;t++)a[u++]=1===i[r]?s[r]:o[r];return l}where(t){$_([t],"where");const e=this.readSync(t.dataId);return H_(t.shape,e)}topk(t,e,n){$_(t,"topk");const r=this.readSync(t.dataId);return U_(r,t.shape,t.dtype,e,n)}min(t,e){$_(t,"min"),x.assertAxesAreInnerMostDims("min",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=zr(n,t.dtype),o=r.sizeFromShape(i),l=this.readSync(s.dataId),a=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*o;let e=a[t];for(let n=0;n<o;++n){const r=a[t+n];r<e&&(e=r)}l[r]=e}return s}minimum(t,e){return $_([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.min(t,e))}mod(t,e){return $_([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})}maximum(t,e){return $_([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.max(t,e))}all(t,e){$_(t,"all"),x.assertAxesAreInnerMostDims("all",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=zr(n,t.dtype),o=r.sizeFromShape(i),l=this.readSync(s.dataId),a=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*o;let e=a[t];for(let n=0;n<o;++n){const r=a[t+n];e=e&&r}l[r]=e}return s}any(t,e){$_(t,"any"),x.assertAxesAreInnerMostDims("any",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=zr(n,t.dtype),o=r.sizeFromShape(i),l=this.readSync(s.dataId),a=this.readSync(t.dataId);for(let r=0;r<l.length;++r){const t=r*o;let e=a[t];for(let n=0;n<o;++n){const r=a[t+n];e=e||r}l[r]=e}return s}squaredDifference(t,e){return $_([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>{const n=t-e;return n*n})}ceil(t){$_(t,"ceil");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return this.makeOutput(n,t.shape,"float32")}floor(t){$_(t,"floor");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return this.makeOutput(n,t.shape,"float32")}sign(t){$_(t,"x");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=e[r]<0?-1:e[r]>0?1:0;return this.makeOutput(n,t.shape,"float32")}isNaN(t){$_(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Number.isNaN(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}isInf(t){$_(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Math.abs(e[r])===1/0&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}isFinite(t){$_(t,"x");const e=this.readSync(t.dataId),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)Number.isFinite(e[r])&&(n[r]=1);return this.makeOutput(n,t.shape,"bool")}round(t){$_(t,"round");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r){const t=Math.floor(e[r]);n[r]=e[r]-t<.5?Math.floor(e[r]):e[r]-t>.5?Math.ceil(e[r]):t%2==0?t:t+1}return this.makeOutput(n,t.shape,"float32")}exp(t){$_(t,"exp");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return this.makeOutput(n,t.shape,"float32")}expm1(t){$_(t,"expm1");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return this.makeOutput(n,t.shape,"float32")}log(t){$_(t,"log");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.log(e[r]);return this.makeOutput(n,t.shape,"float32")}log1p(t){$_(t,"log1p");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.log1p(e[r]);return this.makeOutput(n,t.shape,"float32")}sqrt(t){$_(t,"sqrt");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")}rsqrt(t){$_(t,"rsqrt");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=1/Math.sqrt(e[r]);return this.makeOutput(n,t.shape,"float32")}reciprocal(t){$_(t,"reciprocal");const e=this.readSync(t.dataId),n=new Float32Array(e.length);for(let r=0;r<e.length;++r)n[r]=1/e[r];return this.makeOutput(n,t.shape,"float32")}linear(t){return t}relu(t){$_(t,"relu");const e=zr(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e}relu6(t){$_(t,"relu");const e=zr(t.shape,t.dtype),n=this.readSync(e.dataId),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return e}prelu(t,e){return $_([t,e],"prelu"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>t<0?e*t:t)}elu(t){$_(t,"elu");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r){const t=n[r];e[r]=t>=0?t:Math.exp(t)-1}return this.makeOutput(e,t.shape,"float32")}eluDer(t,e){$_([t,e],"eluDer");const n=new Float32Array(e.size),r=this.readSync(e.dataId),i=this.readSync(t.dataId);for(let s=0;s<r.length;++s){const t=r[s];n[s]=t>=1?i[s]:i[s]*(t+1)}return this.makeOutput(n,e.shape,"float32")}selu(t){$_(t,"selu");const e=x.SELU_SCALEALPHA,n=x.SELU_SCALE,r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let s=0;s<i.length;++s){const t=i[s];r[s]=t>=0?n*t:e*(Math.exp(t)-1)}return this.makeOutput(r,t.shape,"float32")}clip(t,e,n){$_(t,"clip");const r=new Float32Array(t.size),i=this.readSync(t.dataId);for(let s=0;s<i.length;++s){const t=i[s];r[s]=t>n?n:t<e?e:t}return this.makeOutput(r,t.shape,"float32")}abs(t){const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return this.makeOutput(e,t.shape,"float32")}complexAbs(t){const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<t.size;++r)e[r]=Math.hypot(n[2*r],n[2*r+1]);return this.makeOutput(e,t.shape,"float32")}int(t){$_(t,"int");const e=new Int32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=n[r];return this.makeOutput(e,t.shape,"int32")}sigmoid(t){$_(t,"sigmoid");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(e,t.shape,"float32")}softplus(t){$_(t,"softplus");const e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i){const t=r[i]>-e,s=r[i]<e,o=Math.exp(r[i]);let l;l=s?o:t?r[i]:Math.log(1+o),n[i]=l}return this.makeOutput(n,t.shape,"float32")}sin(t){$_(t,"sin");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return this.makeOutput(e,t.shape,"float32")}cos(t){$_(t,"cos");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return this.makeOutput(e,t.shape,"float32")}tan(t){$_(t,"tan");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return this.makeOutput(e,t.shape,"float32")}asin(t){$_(t,"asin");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return this.makeOutput(e,t.shape,"float32")}acos(t){$_(t,"acos");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return this.makeOutput(e,t.shape,"float32")}atan(t){$_(t,"atan");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return this.makeOutput(e,t.shape,"float32")}atan2(t,e){return $_([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,(t,e)=>Math.atan2(t,e))}sinh(t){$_(t,"sinh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return this.makeOutput(e,t.shape,"float32")}cosh(t){$_(t,"cosh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return this.makeOutput(e,t.shape,"float32")}tanh(t){$_(t,"tanh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let i=0;i<n.length;++i)e[i]=r.tanh(n[i]);return this.makeOutput(e,t.shape,"float32")}asinh(t){$_(t,"asinh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return this.makeOutput(e,t.shape,"float32")}acosh(t){$_(t,"acosh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return this.makeOutput(e,t.shape,"float32")}atanh(t){$_(t,"atanh");const e=new Float32Array(t.size),n=this.readSync(t.dataId);for(let r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return this.makeOutput(e,t.shape,"float32")}erf(t){$_(t,"erf");const e=new Float32Array(t.size),n=this.readSync(t.dataId),r=x.ERF_P,i=x.ERF_A1,s=x.ERF_A2,o=x.ERF_A3,l=x.ERF_A4,a=x.ERF_A5;for(let u=0;u<n.length;++u){const t=Math.sign(n[u]),c=Math.abs(n[u]),h=1/(1+r*c);e[u]=t*(1-((((a*h+l)*h+o)*h+s)*h+i)*h*Math.exp(-c*c))}return this.makeOutput(e,t.shape,"float32")}step(t,e=0){$_(t,"step");const n=new Float32Array(t.size),r=this.readSync(t.dataId);for(let i=0;i<r.length;++i){const t=r[i];n[i]=isNaN(t)?NaN:t>0?1:e}return this.makeOutput(n,t.shape,"float32")}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){let o=this.conv2d(t,e,n);return r&&(o=this.add(o,r)),i&&(o=G_(this,o,i,s)),o}conv2d(t,e,n){$_([t,e],"conv2d");const r=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,o=n.dilationWidth,l=n.padInfo.left,a=n.padInfo.top,u="channelsLast"===n.dataFormat,c=Nr(n.outShape,t.dtype),h=t.strides[0],d=u?t.strides[1]:t.strides[2],p=u?t.strides[2]:1,f=u?1:t.strides[1],g=c.strides[0],m=u?c.strides[1]:c.strides[2],b=u?c.strides[2]:1,y=u?1:c.strides[1],v=this.readSync(t.dataId),_=this.readSync(e.dataId),w=c.values;for(let x=0;x<n.batchSize;++x){const t=x*h,u=x*g;for(let c=0;c<n.outHeight;++c){const h=u+c*m,g=c*n.strideHeight-a;for(let a=0;a<r;a++){const r=g+a*s;if(r<0||r>=n.inHeight)continue;const u=a*e.strides[0],c=t+r*d;for(let t=0;t<n.outWidth;++t){const r=h+t*b,s=t*n.strideWidth-l;for(let t=0;t<i;t++){const i=s+t*o;if(i<0||i>=n.inWidth)continue;const l=c+i*p;let a=u+t*e.strides[1];for(let t=0;t<n.inChannels;++t){const e=v[l+t*f];for(let t=0;t<n.outChannels;++t)w[r+t*y]+=e*_[a+t];a+=n.outChannels}}}}}}return c.toTensor()}conv3d(t,e,n){const r=n.filterDepth,i=n.filterHeight,s=n.filterWidth,o=n.dilationDepth,l=n.dilationHeight,a=n.dilationWidth,u=n.padInfo.front,c=n.padInfo.left,h=n.padInfo.top,d=Nr(n.outShape,t.dtype),p=this.readSync(t.dataId),f=this.readSync(e.dataId),g=d.values;for(let m=0;m<n.batchSize;++m){const b=m*t.strides[0],y=m*d.strides[0];for(let m=0;m<n.outDepth;++m){const v=y+m*d.strides[1],_=m*n.strideDepth-u;for(let u=0;u<r;u++){const r=_+u*o;if(r<0||r>=n.inDepth)continue;const m=u*e.strides[0],y=b+r*t.strides[1];for(let o=0;o<n.outHeight;++o){const r=v+o*d.strides[2],u=o*n.strideHeight-h;for(let o=0;o<i;o++){const i=u+o*l;if(i<0||i>=n.inHeight)continue;const h=m+o*e.strides[1],d=y+i*t.strides[2];for(let t=0;t<n.outWidth;++t){const i=r+t*n.outChannels,o=t*n.strideWidth-c;for(let t=0;t<s;t++){const r=o+t*a;if(r<0||r>=n.inWidth)continue;const s=d+r*n.inChannels;let l=h+t*e.strides[2];for(let t=0;t<n.inChannels;++t){const e=p[s+t];for(let t=0;t<n.outChannels;++t)g[i+t]+=e*f[l+t];l+=n.outChannels}}}}}}}}return d.toTensor()}conv2dDerInput(t,e,n){$_([t,e],"conv2dDerInput");const r=Nr(n.inShape,"float32"),i=r.values,s=this.readSync(t.dataId),o=this.readSync(e.dataId),[l,a,u]=e.strides,{batchSize:c,filterHeight:h,filterWidth:d,inChannels:p,inHeight:f,inWidth:g,outChannels:m,outHeight:b,outWidth:y,strideHeight:v,strideWidth:_,dataFormat:w}=n,x=h-1-n.padInfo.top,C=d-1-n.padInfo.left,S="channelsLast"===w,O=r.strides[0],k=S?r.strides[1]:r.strides[2],E=S?r.strides[2]:1,T=S?1:r.strides[1],z=t.strides[0],P=S?t.strides[1]:t.strides[2],I=S?t.strides[2]:1,M=S?1:t.strides[1];for(let D=0;D<c;++D)for(let t=0;t<p;++t)for(let e=0;e<f;++e){const n=e-x,r=Math.max(0,Math.ceil(n/v)),c=Math.min(b,(h+n)/v);for(let p=0;p<g;++p){const f=p-C,g=Math.max(0,Math.ceil(f/_)),b=Math.min(y,(d+f)/_);let w=0;for(let e=r;e<c;++e){const r=e*v-n;for(let n=g;n<b;++n){const i=z*D+P*e+I*n,c=l*(h-1-r)+a*(d-1-(n*_-f))+u*t;for(let t=0;t<m;++t)w+=s[i+M*t]*o[c+t]}}i[O*D+k*e+E*p+T*t]=w}}return r.toTensor()}conv3dDerInput(t,e,n){const r=Nr(n.inShape,"float32"),i=r.values,[s,o,l,a]=r.strides,u=this.readSync(t.dataId),[c,h,d,p]=t.strides,f=this.readSync(e.dataId),[g,m,b,y]=e.strides,{batchSize:v,filterDepth:_,filterHeight:w,filterWidth:x,inChannels:C,inDepth:S,inHeight:O,inWidth:k,outChannels:E,outDepth:T,outHeight:z,outWidth:P,strideDepth:I,strideHeight:M,strideWidth:D}=n,A=_-1-n.padInfo.front,N=w-1-n.padInfo.top,R=x-1-n.padInfo.left;for(let F=0;F<v;++F)for(let t=0;t<C;++t)for(let e=0;e<S;++e){const n=e-A,r=Math.max(0,Math.ceil(n/I)),v=Math.min(T,(_+n)/I);for(let C=0;C<O;++C){const S=C-N,O=Math.max(0,Math.ceil(S/M)),T=Math.min(z,(w+S)/M);for(let z=0;z<k;++z){const k=z-R,A=Math.max(0,Math.ceil(k/D)),N=Math.min(P,(x+k)/D);let $=0;for(let e=r;e<v;++e){const r=e*I-n;for(let n=O;n<T;++n){const i=n*M-S;for(let s=A;s<N;++s){const o=c*F+h*e+d*n+p*s,l=g*(_-1-r)+m*(w-1-i)+b*(x-1-(s*D-k))+y*t;for(let t=0;t<E;++t)$+=u[o+t]*f[l+t]}}}i[s*F+o*e+l*C+a*z+t]=$}}}return r.toTensor()}conv2dDerFilter(t,e,n){$_([t,e],"conv2dDerFilter");const r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,l="channelsLast"===n.dataFormat,a=Nr(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,h=this.bufferSync(t),d=this.bufferSync(e);for(let p=0;p<s;++p){const t=Math.max(0,Math.ceil((c-p)/r)),e=Math.min(n.outHeight,(n.inHeight+c-p)/r);for(let s=0;s<o;++s){const o=Math.max(0,Math.ceil((u-s)/i)),f=Math.min(n.outWidth,(n.inWidth+u-s)/i);for(let g=0;g<n.inChannels;++g)for(let m=0;m<n.outChannels;++m){let b=0;for(let a=0;a<n.batchSize;++a)for(let n=t;n<e;++n){const t=p+n*r-c;for(let e=o;e<f;++e){const r=s+e*i-u;b+=l?h.get(a,t,r,g)*d.get(a,n,e,m):h.get(a,g,t,r)*d.get(a,m,n,e)}}a.set(b,p,s,g,m)}}}return a.toTensor()}conv3dDerFilter(t,e,n){const r=n.strideDepth,i=n.strideHeight,s=n.strideWidth,o=n.filterDepth,l=n.filterHeight,a=n.filterWidth,u=Nr(n.filterShape,"float32"),c=u.values,[h,d,p,f]=u.strides,g=this.readSync(e.dataId),[m,b,y,v]=e.strides,_=this.readSync(t.dataId),[w,x,C,S]=t.strides,O=n.padInfo.front,k=n.padInfo.left,E=n.padInfo.top;for(let T=0;T<o;++T){const t=Math.max(0,Math.ceil((O-T)/r)),e=Math.min(n.outDepth,(n.inDepth+O-T)/r),o=T*h;for(let u=0;u<l;++u){const l=Math.max(0,Math.ceil((E-u)/i)),h=Math.min(n.outHeight,(n.inHeight+E-u)/i),z=u*d+o;for(let o=0;o<a;++o){const a=Math.max(0,Math.ceil((k-o)/s)),d=Math.min(n.outWidth,(n.inWidth+k-o)/s),P=o*p+z;for(let p=0;p<n.inChannels;++p){const z=p*f+P;for(let f=0;f<n.outChannels;++f){let P=0;for(let c=0;c<n.batchSize;++c){const n=c*w,z=c*m;for(let c=t;c<e;++c){const t=(T+c*r-O)*x+n,e=c*b+z;for(let n=l;n<h;++n){const r=(u+n*i-E)*C+t,l=n*y+e;for(let t=a;t<d;++t)P+=_[(o+t*s-k)*S+r+p]*g[t*v+l+f]}}}c[z+f]=P}}}}}return u.toTensor()}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){let o=this.depthwiseConv2D(t,e,n);return r&&(o=this.add(o,r)),i&&(o=G_(this,o,i,s)),o}depthwiseConv2D(t,e,n){$_([t,e],"depthwiseConv2D");const r=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,o=n.dilationWidth,l=n.padInfo.left,a=n.padInfo.top,u=n.outChannels/n.inChannels,c=Nr(n.outShape,t.dtype),h=this.readSync(t.dataId),d=this.readSync(e.dataId),p=c.values;for(let f=0;f<n.batchSize;++f){const g=f*t.strides[0],m=f*c.strides[0];for(let f=0;f<n.outHeight;++f){const b=m+f*c.strides[1],y=f*n.strideHeight-l;for(let l=0;l<r;++l){const r=y+l*s;if(r<0||r>=n.inHeight)continue;const f=l*e.strides[0],m=g+r*t.strides[1];for(let t=0;t<n.outWidth;++t){const r=b+t*c.strides[2],s=t*n.strideWidth-a;for(let t=0;t<i;++t){const i=s+t*o;if(i<0||i>=n.inWidth)continue;const l=m+i*n.inChannels;let a=r,c=f+t*e.strides[1];for(let t=0;t<n.inChannels;++t){const e=h[l+t];for(let t=0;t<u;++t)p[a+t]+=e*d[c+t];a+=u,c+=u}}}}}}return c.toTensor()}depthwiseConv2DDerInput(t,e,n){$_([t,e],"depthwiseConv2DDerInput");const r=Nr(n.inShape,"float32"),i=r.values,[s,o,l]=r.strides,a=this.readSync(t.dataId),[u,c,h]=t.strides,d=this.readSync(e.dataId),[p,f,g]=e.strides,{batchSize:m,filterHeight:b,filterWidth:y,inChannels:v,inHeight:_,inWidth:w,outChannels:x,outHeight:C,outWidth:S,strideHeight:O,strideWidth:k}=n,E=b-1-n.padInfo.top,T=y-1-n.padInfo.left,z=x/v;for(let P=0;P<m;++P)for(let t=0;t<v;++t)for(let e=0;e<_;++e){const n=e-E,r=Math.max(0,Math.ceil(n/O)),m=Math.min(C,(b+n)/O);for(let v=0;v<w;++v){const _=v-T,w=Math.max(0,Math.ceil(_/k)),x=Math.min(S,(y+_)/k);let C=0;for(let e=r;e<m;++e){const r=e*O-n;for(let n=w;n<x;++n){const i=u*P+c*e+h*n,s=p*(b-1-r)+f*(y-1-(n*k-_))+g*t;for(let e=0;e<z;++e)C+=a[i+(t*z+e)]*d[s+e]}}i[s*P+o*e+l*v+t]=C}}return r.toTensor()}depthwiseConv2DDerFilter(t,e,n){$_([t,e],"depthwiseConv2DDerFilter");const r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,l=Nr(n.filterShape,"float32"),a=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,h=this.bufferSync(t),d=this.bufferSync(e);for(let p=0;p<s;++p){const t=Math.max(0,Math.ceil((u-p)/r)),e=Math.min(n.outHeight,(n.inHeight+u-p)/r);for(let s=0;s<o;++s){const o=Math.max(0,Math.ceil((a-s)/i)),f=Math.min(n.outWidth,(n.inWidth+a-s)/i);for(let g=0;g<n.outChannels;++g){const m=Math.trunc(g/c),b=g%c;let y=0;for(let l=0;l<n.batchSize;++l)for(let n=t;n<e;++n){const t=p+n*r-u;for(let e=o;e<f;++e)y+=h.get(l,t,s+e*i-a,m)*d.get(l,n,e,g)}l.set(y,p,s,m,b)}}}return l.toTensor()}tile(t,e){return $_(t,"tile"),W_(this.bufferSync(t),e)}pad(t,e,n){$_(t,"pad");const r=e.map((e,n)=>e[0]+t.shape[n]+e[1]),i=e.map(t=>t[0]),s=this.bufferSync(t),o=Nr(r,t.dtype);0!==n&&o.values.fill(n);for(let l=0;l<t.size;l++){const t=s.indexToLoc(l),e=t.map((t,e)=>t+i[e]);o.set(s.get(...t),...e)}return o.toTensor()}gather(t,e,n){$_([t,e],"gather");const r=t.shape.slice(),i=this.readSync(e.dataId);r[n]=i.length;const s=Nr(r,t.dtype),o=this.bufferSync(t);for(let l=0;l<s.size;++l){const t=s.indexToLoc(l),e=t.slice();e[n]=i[t[n]];const r=o.locToIndex(e);s.values[l]=o.values[r]}return s.toTensor()}batchToSpaceND(t,e,n){$_([t],"batchToSpaceND");const r=e.reduce((t,e)=>t*e),i=x.getReshaped(t.shape,e,r),s=x.getPermuted(i.length,e.length),o=x.getReshapedPermuted(t.shape,e,r),l=x.getSliceBeginCoords(n,e.length),a=x.getSliceSize(o,n,e.length);return Ms(t.reshape(i),s).reshape(o).slice(l,a)}spaceToBatchND(t,e,n){$_([t],"spaceToBatchND");const r=e.reduce((t,e)=>t*e),i=[[0,0]];i.push(...n);for(let u=1+e.length;u<t.shape.length;++u)i.push([0,0]);const s=t.pad(i),o=x.getReshaped(s.shape,e,r,!1),l=x.getPermuted(o.length,e.length,!1),a=x.getReshapedPermuted(s.shape,e,r,!1);return Ms(s.reshape(o),l).reshape(a)}maxPool(t,e){return $_(t,"maxPool"),L_(this.readSync(t.dataId),0,t.dtype,t.strides,e,"max").toTensor()}maxPoolBackprop(t,e,n,r){$_([e,n],"maxPoolBackprop");const i=this.readSync(e.dataId),s=Nr(r.outShape,e.dtype,j_(i,e.shape,e.dtype,r).values),o=r.strideHeight,l=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,h=r.effectiveFilterWidth,d=h-1-r.padInfo.left,p=c-1-r.padInfo.top,f=Nr(e.shape,"float32"),g=this.bufferSync(t);for(let m=0;m<r.batchSize;++m)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inHeight;++e)for(let n=0;n<r.inWidth;++n){const i=e-p,b=n-d;let y=0;for(let e=0;e<c;e+=a){const n=(i+e)/o;if(!(n<0||n>=r.outHeight||Math.floor(n)!==n))for(let i=0;i<h;i+=u){const o=(b+i)/l;if(o<0||o>=r.outWidth||Math.floor(o)!==o)continue;const a=c*h-1-s.get(m,n,o,t)===e*h+i?1:0;0!==a&&(y+=g.get(m,n,o,t)*a)}}f.set(y,m,e,n,t)}return f.toTensor()}avgPoolBackprop(t,e,n){$_([t,e],"avgPoolBackprop");const r=n.strideHeight,i=n.strideWidth,s=n.filterHeight,o=n.filterWidth,l=n.dilationHeight,a=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=c-1-n.padInfo.left,d=u-1-n.padInfo.top,p=Nr(e.shape,"float32"),f=1/(s*o),g=this.bufferSync(t);for(let m=0;m<n.batchSize;++m)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inHeight;++e)for(let s=0;s<n.inWidth;++s){const o=e-d,b=s-h;let y=0;for(let e=0;e<u;e+=l){const s=(o+e)/r;if(!(s<0||s>=n.outHeight||Math.floor(s)!==s))for(let e=0;e<c;e+=a){const r=(b+e)/i;r<0||r>=n.outWidth||Math.floor(r)!==r||(y+=g.get(m,s,r,t))}}p.set(y*f,m,e,s,t)}return p.toTensor()}pool3d(t,e,n){$_(t,"pool3d");const r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left,g="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(t.dataId),b=Nr(e.outShape,t.dtype),y=b.values,v=e.outShape[1]*e.outShape[2]*e.outShape[3]*e.outShape[4],_=e.outShape[2]*e.outShape[3]*e.outShape[4],w=e.outShape[3]*e.outShape[4],x=e.outShape[4];for(let C=0;C<e.batchSize;++C){const b=C*v,S=C*t.strides[0];for(let v=0;v<e.inChannels;++v)for(let C=0;C<e.outDepth;++C){const O=C*r-d;let k=O;for(;k<0;)k+=o;const E=Math.min(e.inDepth,u+O),T=b+C*_;for(let r=0;r<e.outHeight;++r){const u=r*i-p;let d=u;for(;d<0;)d+=l;const b=Math.min(e.inHeight,c+u),_=T+r*w;for(let r=0;r<e.outWidth;++r){const i=r*s-f;let u=i;for(;u<0;)u+=a;const c=Math.min(e.inWidth,h+i),p=_+r*x;let w=g,C=0,O=0;for(let e=k;e<E;e+=o){const r=S+e*t.strides[1];for(let e=d;e<b;e+=l){const i=r+e*t.strides[2];for(let e=u;e<c;e+=a){const r=m[i+e*t.strides[3]+v];if("max"===n&&r>w?w=r:"avg"===n&&(C+=r,O++),isNaN(w))break}if(isNaN(w))break}if(isNaN(w))break}y[p+v]="avg"===n?C/O:w}}}}return b.toTensor()}avgPool3d(t,e){return $_(t,"avgPool3d"),this.pool3d(t,e,"avg").toFloat()}avgPool3dBackprop(t,e,n){$_([t,e],"avgPool3dBackprop");const r=n.strideDepth,i=n.strideHeight,s=n.strideWidth,o=n.filterDepth,l=n.filterHeight,a=n.filterWidth,u=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,f=n.effectiveFilterWidth,g=d-1-n.padInfo.front,m=f-1-n.padInfo.left,b=p-1-n.padInfo.top,y=Nr(e.shape,"float32"),v=1/(o*l*a),_=this.bufferSync(t);for(let w=0;w<n.batchSize;++w)for(let t=0;t<n.inChannels;++t)for(let e=0;e<n.inDepth;++e)for(let o=0;o<n.inHeight;++o)for(let l=0;l<n.inWidth;++l){const a=e-g,x=o-b,C=l-m;let S=0;for(let e=0;e<d;e+=u){const o=(a+e)/r;if(!(o<0||o>=n.outDepth||Math.floor(o)!==o))for(let e=0;e<p;e+=c){const r=(x+e)/i;if(!(r<0||r>=n.outHeight||Math.floor(r)!==r))for(let e=0;e<f;e+=h){const i=(C+e)/s;i<0||i>=n.outWidth||Math.floor(i)!==i||(S+=_.get(w,o,r,i,t))}}}y.set(S*v,w,e,o,l,t)}return y.toTensor()}maxPool3d(t,e){return $_(t,"maxPool3d"),this.pool3d(t,e,"max").toFloat()}maxPool3dPositions(t,e){const n=Nr(e.outShape,"int32"),r=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,h=e.effectiveFilterWidth,d=e.padInfo.front,p=e.padInfo.top,f=e.padInfo.left,g=this.bufferSync(t);for(let m=0;m<e.batchSize;++m)for(let t=0;t<e.inChannels;++t)for(let b=0;b<e.outDepth;++b){const y=b*r-d;let v=y;for(;v<0;)v+=o;const _=Math.min(e.inDepth,u+y);for(let r=0;r<e.outHeight;++r){const u=r*i-p;let d=u;for(;d<0;)d+=l;const w=Math.min(e.inHeight,c+u);for(let i=0;i<e.outWidth;++i){const p=i*s-f;let x=p;for(;x<0;)x+=a;const C=Math.min(e.inWidth,h+p);let S=Number.NEGATIVE_INFINITY,O=-1;for(let e=v;e<_;e+=o){const n=e-y;for(let r=d;r<w;r+=l){const i=r-u;for(let s=x;s<C;s+=a){const o=s-p,l=g.get(m,e,r,s,t);l>=S&&(S=l,O=n*c*h+i*c+o)}}}n.set(O,m,b,r,i,t)}}}return n.toTensor()}maxPool3dBackprop(t,e,n,r){$_([e,n],"maxPool3dBackprop");const i=this.maxPool3dPositions(e,r),s=r.strideDepth,o=r.strideHeight,l=r.strideWidth,a=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=h-1-r.padInfo.front,g=p-1-r.padInfo.left,m=d-1-r.padInfo.top,b=Nr(e.shape,"float32"),y=this.bufferSync(i),v=this.bufferSync(t);for(let _=0;_<r.batchSize;++_)for(let t=0;t<r.inChannels;++t)for(let e=0;e<r.inDepth;++e)for(let n=0;n<r.inHeight;++n)for(let i=0;i<r.inWidth;++i){const w=e-f,x=n-m,C=i-g;let S=0;for(let e=0;e<h;e+=a){const n=(w+e)/s;if(!(n<0||n>=r.outDepth||Math.floor(n)!==n))for(let i=0;i<d;i+=u){const s=(x+i)/o;if(!(s<0||s>=r.outHeight||Math.floor(s)!==s))for(let o=0;o<p;o+=c){const a=(C+o)/l;if(a<0||a>=r.outWidth||Math.floor(a)!==a)continue;const u=h*d*p-1-y.get(_,n,s,a,t)===e*d*p+i*p+o?1:0;0!==u&&(S+=v.get(_,n,s,a,t)*u)}}}b.set(S,_,e,n,i,t)}return b.toTensor()}cast(t,e){return x.castTensor(t,e,this)}reshape(t,e){return x.reshapeTensor(t,e)}avgPool(t,e){return $_(t,"avgPool"),$_(t,"maxPool"),L_(this.readSync(t.dataId),0,t.dtype,t.strides,e,"avg").toTensor().toFloat()}resizeBilinear(t,e,n,i){$_(t,"resizeBilinear");const[s,o,l,a]=t.shape,u=this.readSync(t.dataId),c=new Float32Array(r.sizeFromShape([s,e,n,a])),h=[i&&e>1?o-1:o,i&&n>1?l-1:l],d=[i&&e>1?e-1:e,i&&n>1?n-1:n];let p=0;const f=h[0]/d[0],g=h[1]/d[1];for(let r=0;r<s;r++)for(let i=0;i<e;i++){const e=f*i,s=Math.floor(e),h=e-s,d=Math.min(o-1,Math.ceil(e)),m=r*t.strides[0]+s*t.strides[1],b=r*t.strides[0]+d*t.strides[1];for(let r=0;r<n;r++){const e=g*r,n=Math.floor(e),i=e-n,s=Math.min(l-1,Math.ceil(e)),o=m+n*t.strides[2],d=b+n*t.strides[2],f=m+s*t.strides[2],y=b+s*t.strides[2];for(let t=0;t<a;t++){const e=u[o+t],n=u[d+t],r=e+(u[f+t]-e)*i;c[p++]=r+(n+(u[y+t]-n)*i-r)*h}}}return yr(c,[s,e,n,a])}resizeBilinearBackprop(t,e,n){$_([t,e],"resizeBilinearBackprop");const[r,i,s,o]=e.shape,[,l,a]=t.shape,u=new Float32Array(r*i*s*o),c=[n&&l>1?i-1:i,n&&a>1?s-1:s],h=[n&&l>1?l-1:l,n&&a>1?a-1:a],d=c[0]/h[0],p=c[1]/h[1],f=this.readSync(t.dataId);let g=0;for(let m=0;m<r;m++){const t=m*e.strides[0];for(let n=0;n<l;n++){const r=n*d,l=Math.floor(r),c=Math.min(Math.ceil(r),i-1),h=t+l*e.strides[1],m=t+c*e.strides[1],b=r-l,y=1-b;for(let t=0;t<a;t++){const n=t*p,r=Math.floor(n),i=Math.min(Math.ceil(n),s-1),l=n-r,a=1-l,c=h+r*e.strides[2],d=h+i*e.strides[2],v=m+r*e.strides[2],_=m+i*e.strides[2],w=y*a,x=y*l,C=b*a,S=b*l;for(let t=0;t<o;t++){const e=f[g++];u[c+t]+=e*w,u[d+t]+=e*x,u[v+t]+=e*C,u[_+t]+=e*S}}}}return Sr(u,[r,s,i,o],e.dtype)}resizeNearestNeighbor(t,e,n,r){$_(t,"resizeNearestNeighbor");const[i,s,o,l]=t.shape,a=this.readSync(t.dataId),u=new Float32Array(i*e*n*l),c=[r&&e>1?s-1:s,r&&n>1?o-1:o],h=[r&&e>1?e-1:e,r&&n>1?n-1:n],d=c[0]/h[0],p=c[1]/h[1];let f=0;for(let g=0;g<i;g++){const i=g*t.strides[0];for(let c=0;c<e;c++){const e=d*c,h=i+Math.min(s-1,r?Math.round(e):Math.floor(e))*t.strides[1];for(let i=0;i<n;i++){const e=p*i,n=h+Math.min(o-1,r?Math.round(e):Math.floor(e))*t.strides[2];for(let t=0;t<l;t++)u[f++]=a[n+t]}}}return yr(u,[i,e,n,l],t.dtype)}resizeNearestNeighborBackprop(t,e,n){$_([t,e],"resizeNearestNeighborBackprop");const[r,i,s,o]=e.shape,[,l,a]=t.shape,u=new Float32Array(r*i*s*o),c=this.readSync(t.dataId),h=[n&&l>1?i-1:i,n&&a>1?s-1:s],d=[n&&l>1?l-1:l,n&&a>1?a-1:a],p=h[0]/d[0],f=h[1]/d[1],g=1/p,m=1/f,b=2*Math.ceil(g)+2,y=2*Math.ceil(m)+2;for(let v=0;v<r;v++){const r=v*e.strides[0];for(let h=0;h<i;h++){const d=r+h*e.strides[1],v=Math.floor(h*g),_=Math.floor(v-b/2);for(let g=0;g<s;g++){const v=d+g*e.strides[2],w=Math.floor(g*m),x=Math.floor(w-y/2);for(let e=0;e<o;e++){let o=0;for(let u=0;u<b;u++){const d=u+_;if(d<0||d>=l)continue;const m=r+d*t.strides[1],b=d*p;if(h===Math.min(i-1,n?Math.round(b):Math.floor(b)))for(let r=0;r<y;r++){const i=r+x;if(i<0||i>=a)continue;const l=m+i*t.strides[2],u=i*f;g===Math.min(s-1,n?Math.round(u):Math.floor(u))&&(o+=c[l+e])}}u[v+e]=o}}}}return Sr(u,e.shape,e.dtype)}batchNorm(t,e,n,r,i,s){$_([t,e,n,i,r],"batchNorm");const o=this.readSync(t.dataId),l=this.readSync(e.dataId),a=this.readSync(n.dataId),u=i?this.readSync(i.dataId):new Float32Array([1]),c=r?this.readSync(r.dataId):new Float32Array([0]),h=new Float32Array(o.length),d=c.length,p=u.length,f=a.length,g=l.length;let m=0,b=0,y=0,v=0;for(let _=0;_<o.length;++_)h[_]=c[m++]+(o[_]-l[b++])*u[y++]/Math.sqrt(a[v++]+s),m>=d&&(m=0),b>=g&&(b=0),y>=p&&(y=0),v>=f&&(v=0);return Sr(h,t.shape)}localResponseNormalization4D(t,e,n,r,i){$_(t,"localResponseNormalization4D");const s=t.shape[3],o=s-1,l=this.readSync(t.dataId),a=t.size,u=new Float32Array(a);function c(t){const n=t%s;let r=t-n+Math.max(0,n-e);const i=t-n+Math.min(n+e,o);let a=0;for(;r<=i;r++){const t=l[r];a+=t*t}return a}for(let h=0;h<a;h++){const t=c(h),e=l[h]*Math.pow(n+r*t,-i);u[h]=e}return Sr(u,t.shape)}LRNGrad(t,e,n,r,i,s,o){$_(t,"LRNGrad");const l=t.shape[3],a=this.readSync(t.dataId),u=this.readSync(e.dataId),c=this.readSync(n.dataId),h=new Float32Array(t.size),d=t.size;for(let p=0;p<d;p++){const t=p%l,e=p-t+Math.max(0,t-r),n=p-t+Math.min(l,t+r+1);let d=0;for(let r=e;r<n;r++)d+=Math.pow(u[r],2);d=s*d+i;for(let r=e;r<n;r++){let t=-2*s*o*u[r]*c[p]/d;p===r&&(t+=Math.pow(d,-o)),h[r]+=t*=a[p]}}return Sr(h,t.shape)}multinomial(t,e,n,r){$_(t,"multinomial");const i=e?t:Fc(t),s=i.shape[0],o=i.shape[1],l=zr([s,n],"int32"),a=this.readSync(l.dataId),u=this.readSync(i.dataId);for(let c=0;c<s;++c){const t=c*o,e=new Float32Array(o-1);e[0]=u[t];for(let n=1;n<e.length;++n)e[n]=e[n-1]+u[t+n];const i=Ku.alea(r.toString()),s=c*n;for(let r=0;r<n;++r){const t=i();a[s+r]=e.length;for(let n=0;n<e.length;n++)if(t<e[n]){a[s+r]=n;break}}}return l}oneHot(t,e,n,r){$_(t,"oneHot");const i=new Float32Array(t.size*e);i.fill(r);const s=this.readSync(t.dataId);for(let o=0;o<t.size;++o)s[o]>=0&&s[o]<e&&(i[o*e+s[o]]=n);return xr(i,[t.size,e],"int32")}nonMaxSuppression(t,e,n,r,i){$_(t,"nonMaxSuppression");const s=this.readSync(t.dataId),o=this.readSync(e.dataId);return B_(s,o,n,r,i)}fft(t){return this.fftBatch(t,!1)}ifft(t){return this.fftBatch(t,!0)}fftBatch(t,e){const n=t.shape[0],r=t.shape[1],i=Nr(t.shape,"float32"),s=Nr(t.shape,"float32"),o=br(t).as2D(n,r),l=mr(t).as2D(n,r);for(let a=0;a<n;a++){const t=o.slice([a,0],[1,r]),n=l.slice([a,0],[1,r]),u=gr(t,n),c=this.readSync(this.fftImpl(u,e).dataId);for(let e=0;e<r;e++){const t=x.getComplexWithIndex(c,e);i.values[a*r+e]=t.real,s.values[a*r+e]=t.imag}}return gr(i.toTensor(),s.toTensor()).as2D(n,r)}fftImpl(t,e){const n=t.as1D(),r=n.size;if(this.isExponentOf2(r)){let i=this.fftRadix2(n,r,e).as2D(t.shape[0],t.shape[1]);return e&&(i=gr(br(i).div(_r(r)),mr(i).div(_r(r)))),i}{const n=this.readSync(t.dataId),i=this.fourierTransformByMatmul(n,r,e),s=x.splitRealAndImagArrays(i);return gr(s.real,s.imag).as2D(t.shape[0],t.shape[1])}}isExponentOf2(t){return 0==(t&t-1)}fftRadix2(t,e,n){if(1===e)return t;const r=this.readSync(t.dataId),i=e/2,s=x.complexWithEvenIndex(r);let o=gr(s.real,s.imag).as1D();const l=x.complexWithOddIndex(r);let a=gr(l.real,l.imag).as1D();o=this.fftRadix2(o,i,n),a=this.fftRadix2(a,i,n);const u=x.exponents(e,n),c=gr(u.real,u.imag).mul(a),h=o.add(c),d=o.sub(c),p=br(h).concat(br(d)),f=mr(h).concat(mr(d));return gr(p,f).as1D()}fourierTransformByMatmul(t,e,n){const r=new Float32Array(2*e);for(let i=0;i<e;i++){let s=0,o=0;for(let r=0;r<e;r++){const l=x.exponent(i*r,e,n),a=x.getComplexWithIndex(t,r);s+=a.real*l.real-a.imag*l.imag,o+=a.real*l.imag+a.imag*l.real}n&&(s/=e,o/=e),x.assignToTypedArray(r,s,o,i)}return r}depthToSpace(t,e,n){r.assert("NHWC"===n,()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${n}`),r.assert(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`);const i=t.shape[0],s=t.shape[1],o=t.shape[2],l=t.shape[3],a=s*e,u=o*e,c=l/(e*e),h=this.readSync(t.dataId),d=new Float32Array(i*a*u*c);let p=0;for(let r=0;r<i;++r)for(let t=0;t<a;++t){const n=Math.floor(t/e),i=t%e;for(let t=0;t<u;++t){const a=Math.floor(t/e),u=(i*e+t%e)*c;for(let t=0;t<c;++t)d[p++]=h[t+u+l*(a+o*(n+s*r))]}}return Sr(d,[i,a,u,c])}broadcastedBinaryOp(t,e,n,r){const i=x.assertAndGetBroadcastShape(t.shape,e.shape),s=Nr(i,n),o=this.readSync(t.dataId),l=this.readSync(e.dataId),a=x.getBroadcastDims(t.shape,i),u=x.getBroadcastDims(e.shape,i),c=s.values;if(a.length+u.length===0)for(let h=0;h<c.length;++h)c[h]=r(o[h%o.length],l[h%l.length]);else{const n=this.bufferSync(t),i=this.bufferSync(e);for(let h=0;h<c.length;++h){const d=s.indexToLoc(h),p=d.slice(-t.rank);a.forEach(t=>p[t]=0);const f=n.locToIndex(p),g=d.slice(-e.rank);u.forEach(t=>g[t]=0);const m=i.locToIndex(g);c[h]=r(o[f],l[m])}}return s.toTensor()}broadcastedBinaryComplexOp(t,e,n){const r=x.assertAndGetBroadcastShape(t.shape,e.shape),i=Nr(r,"float32"),s=Nr(r,"float32"),o=this.readSync(t.dataId),l=this.readSync(e.dataId),a=x.getBroadcastDims(t.shape,r),u=x.getBroadcastDims(e.shape,r),c=i.values,h=s.values;if(a.length+u.length===0)for(let d=0;d<c.length;d++){const t=d%o.length,e=d%l.length,r=n(o[2*t],o[2*t+1],l[2*e],l[2*e+1]);c[d]=r.real,h[d]=r.imag}else{const r=this.bufferSync(this.data.get(t.dataId).complexTensors.real),s=this.bufferSync(this.data.get(e.dataId).complexTensors.real);for(let d=0;d<c.length;d++){const p=i.indexToLoc(d),f=p.slice(-t.rank);a.forEach(t=>f[t]=0);const g=r.locToIndex(f),m=p.slice(-e.rank);u.forEach(t=>m[t]=0);const b=s.locToIndex(m),y=n(o[2*g],o[2*g+1],l[2*b],l[2*b+1]);c[d]=y.real,h[d]=y.imag}}return this.complex(i.toTensor(),s.toTensor())}split(t,e,n){return V_(t,e,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}cropAndResize(t,e,n,r,i,s){const[o,l,a,u]=t.shape,c=e.shape[0],[h,d]=r,p=Nr([c,h,d,u],"float32"),f=this.readSync(e.dataId),g=this.readSync(n.dataId),m=this.readSync(t.dataId),b=t.strides,y=p.strides;for(let v=0;v<c;v++){const t=4*v,e=f[t],n=f[t+1],r=f[t+2],c=f[t+3],_=g[v];if(_>=o)continue;const w=h>1?(r-e)*(l-1)/(h-1):0,x=d>1?(c-n)*(a-1)/(d-1):0;for(let o=0;o<h;o++){const t=h>1?e*(l-1)+o*w:.5*(e+r)*(l-1);if(t<0||t>l-1)for(let e=0;e<d;e++)for(let t=0;t<u;t++)p.values[t+e*y[2]+o*y[1]+v*y[0]]=s;else if("bilinear"===i){const e=Math.floor(t),r=Math.ceil(t),i=t-e;for(let t=0;t<d;t++){const l=d>1?n*(a-1)+t*x:.5*(n+c)*(a-1);if(l<0||l>a-1){for(let e=0;e<u;e++)p.values[e+t*y[2]+o*y[1]+v*y[0]]=s;continue}const h=Math.floor(l),f=Math.ceil(l),g=l-h;for(let n=0;n<u;n++){let s=n+h*b[2]+e*b[1]+_*b[0];const l=m[s],a=m[s=n+f*b[2]+e*b[1]+_*b[0]],u=m[s=n+h*b[2]+r*b[1]+_*b[0]],c=m[s=n+f*b[2]+r*b[1]+_*b[0]],d=l+(a-l)*g;p.values[s=n+t*y[2]+o*y[1]+v*y[0]]=d+(u+(c-u)*g-d)*i}}}else for(let e=0;e<d;++e){const r=d>1?n*(a-1)+e*x:.5*(n+c)*(a-1);if(r<0||r>a-1){for(let t=0;t<u;t++)p.values[t+e*y[2]+o*y[1]+v*y[0]]=s;continue}const i=Math.round(r),l=Math.round(t);for(let t=0;t<u;t++)p.values[t+e*y[2]+o*y[1]+v*y[0]]=m[t+i*b[2]+l*b[1]+_*b[0]]}}}return p.toTensor()}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:s,sliceSize:o,strides:l,outputSize:a}=x.calculateShapes(e,t,n);return this.scatter(t,e,n,a,o,s,i,l,r,!1)}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,s,o,l]=x.prepareAndValidate(t,e);if(0===s)return yr([],i,t.dtype);const a=new fe([s,o],t.dtype),u=this.readSync(e.dataId),c=this.readSync(t.dataId);for(let h=0;h<s;h++){const e=[];let n=0;for(let t=0;t<r;t++){const i=u[h*r+t];n+=i*l[t],e.push(i)}if(n<0||n>=t.size/o)throw new Error(`Invalid indices: ${e} does not index into ${t.shape}`);for(let t=0;t<o;t++)a.values[h*o+t]=c[n*o+t]}return a.toTensor().reshape(i)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:s,strides:o,outputSize:l}=x.calculateShapes(e,t,n),a=_r(0);return this.scatter(t,e,n,l,s,i,r,o,a,!0)}fill(t,e,n){n=n||r.inferDtype(e);const i=r.getArrayFromDType(n,r.sizeFromShape(t));return i.fill(e),La().makeTensor(i,t,n,this)}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)}zerosLike(t){const e=r.getArrayFromDType(t.dtype,r.sizeFromShape(t.shape));return this.makeOutput(e,t.shape,t.dtype)}linspace(t,e,n){return x.linspaceImpl(t,e,n)}scatter(t,e,n,r,i,s,o,l,a,u){const c=[r/i,i],h=this.readSync(t.dataId),d=this.readSync(e.dataId);if(0===r)return yr([],n,e.dtype);const p=new fe(c,e.dtype);p.values.fill(this.readSync(a.dataId)[0]);for(let f=0;f<s;f++){const t=[];let s=0;for(let e=0;e<o;e++){const n=h[f*o+e];t.push(n),s+=n*l[e]}if(s<0||s>=r/i)throw new Error(`Invalid indices: ${t} does not index into ${n}`);for(let n=0;n<i;n++)u?p.values[s*i+n]+=d[f*i+n]:p.values[s*i+n]=0===e.rank?d[0]:d[f*i+n]}return p.toTensor().reshape(n)}}function K_(t,e){return{kernelName:t,backendName:"cpu",kernelFunc:({inputs:n,backend:r})=>{const{a:i,b:s}=n,o=r;$_([i,s],t);const l=o.data.get(i.dataId).values,a=o.data.get(s.dataId).values,[u,c]=e(i.shape,s.shape,l,a,i.dtype);return{dataId:o.write(u,c,i.dtype),shape:c,dtype:i.dtype}}}}function Y_(t){return(e,n,i,s,o)=>{const l=x.assertAndGetBroadcastShape(e,n),a=l.length,u=r.computeStrides(l),c=r.sizeFromShape(l),h=r.getTypedArrayFromDType(o,c),d=e.length,p=n.length,f=r.computeStrides(e),g=r.computeStrides(n),m=x.getBroadcastDims(e,l),b=x.getBroadcastDims(n,l);if(m.length+b.length===0)for(let r=0;r<h.length;++r)h[r]=t(i[r%i.length],s[r%s.length]);else for(let y=0;y<h.length;++y){const e=r.indexToLoc(y,a,u),n=e.slice(-d);m.forEach(t=>n[t]=0);const o=r.locToIndex(n,d,f),l=e.slice(-p);b.forEach(t=>l[t]=0);const c=r.locToIndex(l,p,g);h[y]=t(i[o],s[c])}return[h,l]}}const X_=Y_((t,e)=>t/e),Z_=K_(un,X_),Q_={kernelName:On,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{reductionIndices:s}=e,o=n;let l=i.shape;const a=l.length;let u=r.parseAxisParam(s,l);const c=x.getAxesPermutation(u,a);let h=o.data.get(i.dataId).values;if(null!=c){const t=new Array(a);for(let e=0;e<t.length;e++)t[e]=l[c[e]];h=F_(h,l,i.dtype,c,t),u=x.getInnerMostAxes(u.length,a),l=t}$_(i,"max"),x.assertAxesAreInnerMostDims("max",u,a);const[d,p]=x.computeOutAndReduceShapes(l,u),f=R_(h,r.sizeFromShape(p),d,i.dtype);return{dataId:o.write(f,d,i.dtype),shape:d,dtype:i.dtype}}},J_={kernelName:In,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{filterSize:s,strides:o,pad:l,includeBatchInIndex:a}=e,u=n;$_(i,"MaxPoolWithArgmax");const c=u.data.get(i.dataId).values,h=x.computePool2DInfo(i.shape,s,o,[1,1],l),[d,p]=function(t,e,n,i,s){const o=L_(t,0,n,r.computeStrides(e),s,"max"),l=j_(t,e,n,s,!0,i);return[o.values,l.values]}(c,i.shape,i.dtype,a,h),f=u.write(d,h.outShape,i.dtype),g=u.write(p,h.outShape,i.dtype);return[{dataId:f,shape:h.outShape,dtype:i.dtype},{dataId:g,shape:h.outShape,dtype:"int32"}]}},tw=C.nonMaxSuppressionV5,ew={kernelName:Fn,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:a}=n,u=e;$_(r,"NonMaxSuppressionWithScore");const c=u.data.get(r.dataId).values,h=u.data.get(i.dataId).values,d=s,p=o,f=l,g=a,{selectedIndices:m,selectedScores:b}=tw(c,h,d,p,f,g);return[m,b]}},nw={kernelName:Zn,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;$_(n,"square");const i=r.data.get(n.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){const t=i[o];s[o]=t*t}return{dataId:r.write(s,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},rw=Y_((t,e)=>{const n=t-e;return n*n}),iw=[ew,nw,K_(Xn,rw),Z_,{kernelName:tr,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,s=n;$_(r,"transpose");const o=new Array(r.shape.length);for(let a=0;a<o.length;a++)o[a]=r.shape[i[a]];const l=F_(s.data.get(r.dataId).values,r.shape,r.dtype,i,o);return{dataId:s.write(l,o,r.dtype),shape:o,dtype:r.dtype}}},J_,Q_];for(const Ak of iw)lt(Ak);Qa("cpu",()=>new q_,1);const sw={},ow={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function lw(t){t in sw||(sw[t]=function(t){if(1!==t&&2!==t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const e=function(t){if("undefined"!=typeof OffscreenCanvas&&2===t)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(t);return e.addEventListener("webglcontextlost",e=>{e.preventDefault(),delete sw[t]},!1),1===t?e.getContext("webgl",ow)||e.getContext("experimental-webgl",ow):e.getContext("webgl2",ow)}(t));const e=sw[t];return e.isContextLost()?(delete sw[t],lw(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),sw[t])}var aw,uw,cw;function hw(t,e){return[e,t]}function dw(t){const e=r.sizeFromShape(t),n=Math.ceil(e/4);return r.sizeToSquarishShape(n)}function pw(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function fw(t,e){const n=t;let r,i,s,o,l,a,u,c,h,d;return 2===Z().getNumber("WEBGL_VERSION")?(r=n.R32F,i=n.R16F,s=n.RGBA16F,o=n.RGBA32F,l=n.RED,u=4,c=1,h=n.HALF_FLOAT,d=n.FLOAT):(r=t.RGBA,i=t.RGBA,s=t.RGBA,o=n.RGBA,l=t.RGBA,u=4,c=4,h=null!=e?e.HALF_FLOAT_OES:null,d=t.FLOAT),{internalFormatFloat:r,internalFormatHalfFloat:i,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:o,textureFormatFloat:l,downloadTextureFormat:a=t.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function gw(t,e,n){const r=n();return e&&function(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+function(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}(t,e))}(t),r}!function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"}(aw||(aw={})),function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"}(uw||(uw={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(cw||(cw={}));const mw=5.96e-8,bw=65504;function yw(t){return!!(Z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===t||mw<Math.abs(t)&&Math.abs(t)<bw)}function vw(t,e,n){return kw(t,e,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}const _w=/ERROR: [0-9]+:([0-9]+):/g;function ww(t,e,n){if(gw(t,e,()=>t.validateProgram(n)),!1===t.getProgramParameter(n,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function xw(t,e,n,r,i,s,o,l){const a=t.getAttribLocation(n,r);return-1!==a&&(gw(t,e,()=>t.bindBuffer(t.ARRAY_BUFFER,i)),gw(t,e,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,o,l)),gw(t,e,()=>t.enableVertexAttribArray(a)),!0)}function Cw(t,e,n,r){gw(t,e,()=>t.bindFramebuffer(t.FRAMEBUFFER,r)),gw(t,e,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function Sw(t,e,n){gw(t,e,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),gw(t,e,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Ow(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}(t,e))}function kw(t,e,n,r){const i=gw(t,e,()=>n());if(null==i)throw new Error(r);return i}function Ew(t,e=2){return r.sizeFromShape(t.slice(0,t.length-e))}function Tw(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function zw(t){let e=[1,1,1];return 0===t.length||1===t.length&&1===t[0]||(e=[Ew(t),...Tw(t)]),e}function Pw(t){return t%2==0}function Iw(t,e){if(t=t.slice(-2),e=e.slice(-2),r.arraysEqual(t,e))return!0;if(!t.length||!e.length)return!0;if(0===t[0]||0===t[1]||0===e[0]||0===e[1])return!0;if(t.length!==e.length){const n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r)return!0;if(Pw(n)&&Pw(r)&&(1===t[0]||1===e[0]))return!0}return t[1]===e[1]&&Pw(t[0])&&Pw(e[0])}let Mw,Dw;function Aw(t,e){return null!=t.getExtension(e)}function Nw(t){try{if(null!=lw(t))return!0}catch(e){return!1}return!1}function Rw(t){const e=fw(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}const Fw=Z();Fw.registerFlag("HAS_WEBGL",()=>Fw.getNumber("WEBGL_VERSION")>0),Fw.registerFlag("WEBGL_VERSION",()=>Nw(2)?2:Nw(1)?1:0),Fw.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===Fw.get("WEBGL_VERSION")),Fw.registerFlag("WEBGL_CPU_FORWARD",()=>!0),Fw.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),Fw.registerFlag("WEBGL_PACK",()=>Fw.getBool("HAS_WEBGL")),Fw.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_PACK_CLIP",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1),Fw.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_PACK_REDUCE",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_LAZILY_UNPACK",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_CONV_IM2COL",()=>Fw.getBool("WEBGL_PACK")),Fw.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>(function(t){if(null==Mw){const e=lw(t);Mw=e.getParameter(e.MAX_TEXTURE_SIZE)}return Mw})(Fw.getNumber("WEBGL_VERSION"))),Fw.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>(function(t){if(null==Dw){const e=lw(t);Dw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Dw)})(Fw.getNumber("WEBGL_VERSION"))),Fw.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Fw.getNumber("WEBGL_VERSION");return 0===t?0:function(t){if(0===t)return 0;const e=lw(t);return Aw(e,"EXT_disjoint_timer_query_webgl2")&&2===t?2:Aw(e,"EXT_disjoint_timer_query")?1:0}(t)}),Fw.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Fw.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!s.isMobile()),Fw.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>(function(t){if(0===t)return!1;const e=lw(t);if(1===t){if(!Aw(e,"OES_texture_float"))return!1}else if(!Aw(e,"EXT_color_buffer_float"))return!1;return Rw(e)})(Fw.getNumber("WEBGL_VERSION"))),Fw.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!Fw.getBool("WEBGL_FORCE_F16_TEXTURES")&&Fw.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),Fw.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>(function(t){if(0===t)return!1;const e=lw(t);if(1!==t){if(Aw(e,"EXT_color_buffer_float"))return Rw(e);const t="EXT_color_buffer_half_float";if(Aw(e,t)){const n=e.getExtension(t);return function(t,e){const n=fw(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(i),s}(e,n)}return!1}return!!Aw(e,"OES_texture_float")&&!!Aw(e,"WEBGL_color_buffer_float")&&Rw(e)})(Fw.getNumber("WEBGL_VERSION"))),Fw.registerFlag("WEBGL_FENCE_API_ENABLED",()=>(function(t){return 2===t&&null!=lw(t).fenceSync})(Fw.getNumber("WEBGL_VERSION"))),Fw.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Fw.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);class $w{constructor(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const n=[];this.variableNames.forEach(t=>{n.push(`float v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}class Lw{constructor(t,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=e.map((t,e)=>`T${e}`);const n=[];this.variableNames.forEach(t=>{n.push(`vec4 v${t} = get${t}AtOutCoords();`)});const r=this.variableNames.map(t=>`v${t}`).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}class jw{constructor(t,e,n){this.variableNames=["A"];const r=t.windowSize,i=t.batchSize,s=Math.ceil(t.inSize/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));"};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${"max"===e?">":"<"} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}function Bw(t,e){return["x","y","z","w","u","v"].slice(0,e).map(e=>`${t}.${e}`)}function Vw(t,e){return 1===e?[t]:Bw(t,e)}function Ww(){let t,e,n,r,i,s,o,l,a,u;return 2===Z().getNumber("WEBGL_VERSION")?(t="#version 300 es",e="in",n="out",r="in",i="texture",s="outputColor",o="out vec4 outputColor;",l="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",a="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",s="gl_FragColor",o="",l="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",a="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:s,defineOutput:o,defineSpecialNaN:l,defineSpecialInf:a,defineRound:u}}function Uw(t,e,n="index"){const i=r.computeStrides(e);return i.map((e,r)=>`${`int ${t[r]} = ${n} / ${e}`}; ${r===i.length-1?`int ${t[r+1]} = ${n} - ${t[r]} * ${e}`:`index -= ${t[r]} * ${e}`};`).join("")}function Hw(t){const e=r.computeStrides(t).map(t=>t.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;\n  }\n`}const Gw="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:qw}=x;const Kw="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Yw="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Xw="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Zw="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Qw(t){return`offset${t}`}function Jw(t){const e=t.name,n=r.sizeFromShape(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${e}[i];\n      }\n    }\n  `}function tx(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function ex(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function nx(t,e){return e.map(e=>t[e]).join(", ")}class rx{constructor(t,e,n,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,r.assert(t.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);const s=Math.ceil(t[t.length-1]/e);this.outputShape=t.slice(0,-1),s>1&&this.outputShape.push(s),i||this.variableNames.push("bestIndicesA");const o=this.outputShape,l=o.length,a=tx(l),u=Vw("coords",l);let c,h;if(1===s){const t=tx(h=l+1);c=`\n        ${t} sourceLocR = ${t}(${u.join()}, 0);\n        ++${u[l-1]};\n        ${t} sourceLocG = ${t}(${u.join()}, 0);\n        ++${u[l-2]};\n        ${t} sourceLocA = ${t}(${u.join()}, 0);\n        --${u[l-1]};\n        ${t} sourceLocB = ${t}(${u.join()}, 0);\n        --${u[l-2]};`}else h=l,c=`\n        ${a} sourceLocR = coords;\n        ++${u[l-1]};\n        ${a} sourceLocG = coords;\n        ++${u[l-2]};\n        ${a} sourceLocA = coords;\n        --${u[l-1]};\n        ${a} sourceLocB = coords;\n        --${u[l-2]};`;const d=["x","y","z","w","u","v"].slice(0,h),p="."+d[h-1],f=d.map(t=>"int "+t),g=Vw("sourceLocR",h-1).concat("inIdx.r"),m=Vw("sourceLocG",h-1).concat("inIdx.g"),b=Vw("sourceLocB",h-1).concat("inIdx.b"),y=Vw("sourceLocA",h-1).concat("inIdx.a"),v="max"===n?"greaterThan":"lessThan",_=i?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${b.join()}),\n                             getBestIndicesAChannel(${y.join()})));`,w=`vec4(\n            getAChannel(${g.join()}),\n            hasNextCol ? getAChannel(${m.join()}) : 0.,\n            hasNextRow ? getAChannel(${b.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${y.join()}) : 0.)`,x=i?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${x}\n      void main() {\n        ${a} coords = getOutputCoords();\n        bool hasNextCol = ${u[l-1]} < ${o[l-1]-1};\n        bool hasNextRow = ${u[l-2]} < ${o[l-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},\n          sourceLocB${p}, sourceLocA${p}) * ${e};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${e}; i++) {\n          inIdx = srcIdx;\n          ${_}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${v}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}class ix{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n      const float avgMultiplier = float(${1/(t.filterHeight*t.filterWidth)});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e};\n            wR += ${t.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n};\n            wC+= ${t.dilationWidth}) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class sx{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n      const float avgMultiplier = float(${1/(t.filterDepth*t.filterHeight*t.filterWidth)});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${e};\n            wD += ${t.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${t.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${t.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${t.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class ox{constructor(t,e,n,r,i,s){this.outputShape=[],this.variableNames=["x","mean","variance"],x.assertAndGetBroadcastShape(t,e),x.assertAndGetBroadcastShape(t,n);let o="0.0";null!=r&&(x.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="1.0";null!=i&&(x.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${o};\n        float scale = ${l};\n        float inv = scale * inversesqrt(variance + float(${s}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class lx{constructor(t,e,n,r,i,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],x.assertAndGetBroadcastShape(t,e),x.assertAndGetBroadcastShape(t,n);let o="vec4(0.0)";null!=r&&(x.assertAndGetBroadcastShape(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");let l="vec4(1.0)";null!=i&&(x.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`\n      void main() {\n        vec4 offset = ${o};\n        vec4 scale = ${l};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${s}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const ax={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class ux{constructor(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=x.assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${t}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const cx="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",hx="return a + b;",dx="return a - b;",px="return a * b;",fx="\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",gx="\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",mx="return float(a == b);",bx="return float(a != b);",yx="return float(a < b);",vx="return float(a <= b);",_x="return float(a > b);",wx="return float(a >= b);",xx="return float(a >= 1.0 && b >= 1.0);",Cx="return float(a >= 1.0 || b >= 1.0);",Sx=cx+"\n  return max(a, b);\n",Ox=cx+"\n  return min(a, b);\n",kx="if (b == 0.0) return NAN;\n  return mod(a, b);",Ex=cx+"\n  return atan(a, b);\n",Tx="return (b >= 1.0) ? a : a * (b + 1.0);",zx="return (a < 0.) ? b * a : a;";class Px{constructor(t,e,n){this.variableNames=["A","B"],this.outputShape=x.assertAndGetBroadcastShape(e,n),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${t}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}const Ix="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",Mx="\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",Dx="\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+Ix+"\n  return result;\n",Ax="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",Nx="\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",Rx="\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Ix+"\n  return result;\n",Fx="\n  return vec4(equal(a, b));\n",$x="\n  return vec4(notEqual(a, b));\n",Lx="\n  return vec4(lessThan(a, b));\n",jx="\n  return vec4(lessThanEqual(a, b));\n",Bx="\n  return vec4(greaterThan(a, b));\n",Vx="\n  return vec4(greaterThanEqual(a, b));\n",Wx="\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",Ux="\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",Hx="\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Ix+"\n  return result;\n",Gx="\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+Ix+"\n  return result;\n",qx="\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+Ix+"\n  return result;\n";class Kx{constructor(t,e,n,i=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=x.assertAndGetBroadcastShape(e,n);const s=this.outputShape.length;let o="";if(i)if(0===s||1===r.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${tx(s)} coords = getOutputCoords();\n        `,1===s)o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const t=Vw("coords",s);o+=`\n            bool nextRowOutOfBounds =\n              (${t[s-2]} + 1) >= ${this.outputShape[s-2]};\n            bool nextColOutOfBounds =\n              (${t[s-1]} + 1) >= ${this.outputShape[s-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${t}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}class Yx{constructor(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}class Xx{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}getCustomSetupFunc(t,e){return(n,r)=>{null==this.minLoc&&(this.minLoc=n.getUniformLocationNoThrow(r,"minVal"),this.maxLoc=n.getUniformLocationNoThrow(r,"maxVal")),n.gl.uniform1f(this.minLoc,t),n.gl.uniform1f(this.maxLoc,e)}}}class Zx{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}class Qx{constructor(t){this.outputShape=[],this.outputShape=x.computeOutShape(t,1),this.variableNames=t.map((t,e)=>`T${e}`);const e=new Array(t.length-1);e[0]=t[0][1];for(let r=1;r<e.length;r++)e[r]=e[r-1]+t[r][1];const n=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let r=1;r<e.length;r++)n.push(`else if (yC < ${e[r]}) `+`setOutput(getT${r}(yR, yC-${e[r-1]}));`);n.push(`else setOutput(getT${e.length}(yR, yC-${e[e.length-1]}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class Jx{constructor(t,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=x.computeOutShape(t,e);const n=this.outputShape,r=n.length,i=tx(r),s=Vw("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map((t,e)=>`T${e}`);const l=new Array(t.length-1);l[0]=t[0][e];for(let p=1;p<l.length;p++)l[p]=l[p-1]+t[p][e];const a=o[e],u=o.slice(-2),c=o.join();let h=`if (${a} < ${l[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let p=1;p<l.length;p++){const t=l[p-1];h+=`\n        if (${a} < ${l[p]}  && ${a} >= ${l[p-1]}) {\n          return getChannel(\n            getT${p}(${tC(o,a,t)}),\n            vec2(${tC(u,a,t)}));\n        }`}const d=l[l.length-1];h+=`\n        return getChannel(\n          getT${l.length}(${tC(o,a,d)}),\n          vec2(${tC(u,a,d)}));`,this.userCode=`\n      float getValue(${o.map(t=>"int "+t)}) {\n        ${h}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${s}), 0., 0., 0.);\n\n        ${s[r-1]} = ${s[r-1]} + 1;\n        if (${s[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${s});\n        }\n\n        ${s[r-2]} = ${s[r-2]} + 1;\n        if (${s[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${s});\n        }\n\n        ${s[r-1]} = ${s[r-1]} - 1;\n        if (${s[r-2]} < ${n[r-2]} &&\n            ${s[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${s});\n        }\n        setOutput(result);\n      }\n    `}}function tC(t,e,n){const r=t.indexOf(e);return t.map((t,e)=>e===r?`${t} - ${n}`:t).join()}class eC{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              if (${"channelsLast"===t.dataFormat}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class nC{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r="channelsLast"===t.dataFormat;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${r?3:1}];\n\n        ivec2 dyCorner = ivec2(coords[${r?1:2}], coords[${r?2:3}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n\n              if (${r}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class rC{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yF = 0; yF < ${t.outDepth}; yF++) {\n            int xF = wF + yF * ${t.strideDepth} - ${t.padInfo.front};\n\n            if (xF < 0 || xF >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${t.outHeight}; yR++) {\n              int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${t.outWidth}; yC++) {\n                int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class iC{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterDepth,n=t.filterHeight,r=t.filterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${e}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${t.strideDepth}.0;\n\n          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${e} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class sC{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${t.outChannels/t.inChannels} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${t.batchSize}; b++) {\n          for (int yR = 0; yR < ${t.outHeight}; yR++) {\n            int xR = wR + yR * ${t.strideHeight} - ${t.padInfo.top};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${t.outWidth}; yC++) {\n              int xC = wC + yC * ${t.strideWidth} - ${t.padInfo.left};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class oC{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const e=t.filterHeight,n=t.filterWidth,r=t.outChannels/t.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${e}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${e} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${r}; dm++) {\n              int d2 = d1 * ${r} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class lC{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,s=t.padInfo.left,o=t.strideHeight,l=t.strideWidth,a=t.dilationHeight,u=t.dilationWidth,c=t.filterHeight,h=t.filterWidth,d=4*Math.floor(t.inChannels/4),p=t.inChannels%4,f="channelsLast"===t.dataFormat,g=f?1:2,m=f?2:3,b=f?3:1;let y="",v="";n&&(y=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,v="result = activation(result);");const _=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${i}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${m}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${c}; wR++) {\n          int xR = xRCorner + wR * ${a};\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${h}; wC++) {\n            int xC = xCCorner + wC * ${u};\n\n            if (xC < 0 || xC >= ${t.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${d}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${f}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===p}) {\n\n              if (${f}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${d}) *\n                    getW(wR, wC, ${d}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${d}, xR, xC) *\n                    getW(wR, wC, ${d}, d2);\n              }\n\n            } else if (${2===p}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2)\n              );\n\n              if (${f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===p}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${d}, d2),\n                getW(wR, wC, ${d} + 1, d2),\n                getW(wR, wC, ${d} + 2, d2)\n              );\n\n              if (${f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${d}),\n                  getX(batch, xR, xC, ${d} + 1),\n                  getX(batch, xR, xC, ${d} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${d}, xR, xC),\n                  getX(batch, ${d} + 1, xR, xC),\n                  getX(batch, ${d} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${_}\n        ${v}\n        setOutput(result);\n      }\n    `}}class aC{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,s=t.strideHeight,o=t.strideWidth,l=t.dilationDepth,a=t.dilationHeight,u=t.dilationWidth,c=t.filterDepth,h=t.filterHeight,d=t.filterWidth,p=4*Math.floor(t.inChannels/4),f=t.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${s}, ${o});\n      const ivec3 pads = ivec3(${e}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${l};\n\n          if (xF < 0 || xF >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h}; wR++) {\n            int xR = xRCorner + wR * ${a};\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${p}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${p}) *\n                  getW(wF, wR, wC, ${p}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${p}),\n                  getX(batch, xF, xR, xC, ${p} + 1),\n                  getX(batch, xF, xR, xC, ${p} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${p}, d2),\n                  getW(wF, wR, wC, ${p} + 1, d2),\n                  getW(wF, wR, wC, ${p} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class uC{constructor(t,e=!1,n=null,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.inHeight,s=t.inWidth,o=t.padInfo.top,l=t.padInfo.left,a=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,h=t.dilationWidth,d=t.filterHeight,p=t.filterWidth,f=t.outChannels/t.inChannels;let g="",m="";n&&(g=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,m="result = activation(result);");const b=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${g}\n\n      const ivec2 strides = ivec2(${a}, ${u});\n      const ivec2 pads = ivec2(${o}, ${l});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${f};\n        int q = d2 - d1 * ${f};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${d}; wR++) {\n          int xR = xRCorner + wR * ${c};\n\n          if (xR < 0 || xR >= ${i}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${p}; wC++) {\n            int xC = xCCorner + wC * ${h};\n\n            if (xC < 0 || xC >= ${s}) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${b}\n        ${m}\n        setOutput(result);\n      }\n    `}}class cC{constructor(t,e=!1,n=null,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.outShape;const s=t.inHeight,o=t.inWidth,l=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,h=t.dilationHeight,d=t.dilationWidth,p=t.filterHeight,f=t.filterWidth,g=f;let m="int xR; int xC; int xCOffset;";for(let r=0;r<p;r++)for(let t=0;t<f;t++)m+=`\n          vec4 xTexelR${r}C${2*t} = vec4(0.);\n          vec4 wR${r}C${t} = vec4(0.);\n          vec4 xR${r}C${t} = vec4(0.);`;for(let _=0;_<p;_++)for(let t=0;t<g;t++){const e=2*t;if(m+=`\n          xR = xRCorner + ${_*h};\n          xC = xCCorner + ${e*d};\n        `,1===c){if(e<f&&(m+=a%2==1?`\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${_}C${e} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    xTexelR${_}C${e}.zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR${_}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < ${s} && xCOffset >= 0 && xCOffset < ${o}) {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= ${o}) {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR${_}C${e} = vec4(previous.zw, xTexelR${_}C${e}.xy);\n                } else {\n                  xR${_}C${e} = vec4(0, 0, xTexelR${_}C${e}.xy);\n                }\n              `:`\n                if(xR >= 0 && xR < ${s} && xC >= 0 && xC < ${o}) {\n                  xTexelR${_}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${_}C${e} = vec4(0.);\n                }\n\n                xR${_}C${e} = xTexelR${_}C${e};\n              `,e+1<f)){const t=a%2==0?r.nearestLargerEven(d):d;d%2==0&&a%2==1||d%2!=0&&a%2!=1?(m+=`\n                  xCOffset = xC + ${a%2} + ${t};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${_}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n                `,d>1&&(m+=`\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < ${s} &&\n                      xCOffset >= 0 && xCOffset < ${o}) {\n                      xTexelR${_}C${e} = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR${_}C${e} = vec4(0.);\n                    }\n                  `),m+=`\n                  xR${_}C${e+1} = vec4(\n                    xTexelR${_}C${e}.zw, xTexelR${_}C${e+2}.xy);\n                `):m+=`\n                  xCOffset = xC + ${t};\n\n                  if(xR >= 0 && xR < ${s} &&\n                    xCOffset >= 0 && xCOffset < ${o}) {\n                    xTexelR${_}C${e+2} = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR${_}C${e+1} = xTexelR${_}C${e+2};\n                `}}else e<f&&(m+=`\n              if(xR >= 0 && xR < ${s}) {\n            `,a%2==1?(m+=`\n                xCOffset = xC + 1 - ${c};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${_}C${e} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${_}C${e} = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < ${o}) {\n                  xTexelR${_}C${e+2} = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR${_}C${e+2} = vec4(0.);\n                }\n\n                xR${_}C${e} = vec4(\n                  xTexelR${_}C${e}.zw, xTexelR${_}C${e+2}.zw);\n              `,e+1<f&&(m+=`\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + ${c};\n                  if(xCOffset >= 0 && xCOffset < ${o}) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR${_}C${e+1} = vec4(xTexelR${_}C${e+2}.xy, final.xy);\n                `)):(m+=`\n                if(xC >= 0 && xC < ${o}) {\n                  xTexelR${_}C${e} = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR${_}C${e} = vec4(0.);\n                }\n\n                xCOffset = xC + ${c};\n                if(xCOffset >= 0 && xCOffset < ${o}) {\n                  xTexelR${_}C${e+2} = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR${_}C${e+2} = vec4(0.);\n                }\n\n                xR${_}C${e} = vec4(\n                  xTexelR${_}C${e}.xy, xTexelR${_}C${e+2}.xy);\n              `,e+1<f&&(m+=`\n                  xR${_}C${e+1} = vec4(\n                    xTexelR${_}C${e}.zw, xTexelR${_}C${e+2}.zw);\n                `)),m+="}");e<f&&(m+=`\n            vec4 wTexelR${_}C${e} = getW(${_}, ${e}, d1, q);\n            wR${_}C${e} = vec4(wTexelR${_}C${e}.xz, wTexelR${_}C${e}.xz);\n          `,e+1<f&&(m+=`\n              vec4 wTexelR${_}C${e+1} = getW(${_}, ${e+1}, d1, q);\n              wR${_}C${e+1} =\n                vec4(wTexelR${_}C${e+1}.xz, wTexelR${_}C${e+1}.xz);`))}for(let r=0;r<p;r++)for(let t=0;t<f;t++)m+=`dotProd += xR${r}C${t} * wR${r}C${t};`;let b="",y="";n&&(b=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,y="result = activation(result);");const v=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${u}, ${c});\n      const ivec2 pads = ivec2(${l}, ${a});\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        ${m}\n\n        vec4 result = dotProd;\n        ${v}\n        ${y}\n        setOutput(result);\n      }\n    `}}class hC{constructor(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[s,o,l,a]=t,[u]=e,[c,h]=n;this.outputShape=[u,c,h,a];const d="bilinear"===r?1:0,[p,f]=[`${o-1}.0`,`${l-1}.0`],[g,m,b]=c>1?[`${(o-1)/(c-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[y,v,_]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${g});\n      const float width_ratio = float(${y});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${s}) {\n          return;\n        }\n\n        float height_scale = ${m};\n        float width_scale = ${v};\n\n        float in_y = ${b};\n        if( in_y < 0.0 || in_y > ${p} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${_};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}class dC{constructor(t,e,n){this.variableNames=["x"],this.outputShape=t;const r=t.length,i=t[t.length-1],s=n?"<":">";this.userCode=`\n      int getIndex(int i) {\n        ${n?`return ${i} -i - 1;`:"return i;"}\n      }\n\n      void main() {\n        ${tx(r)} coords = getOutputCoords();\n        int end = ${pC(r,"coords")};\n        float val = 0.0;\n        for (int i = ${i} - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx ${s} end) {\n            continue;\n          }\n          if (idx == end && ${e}) {\n            continue;\n          }\n          ${pC(r,"coords")} = idx;\n          val += getX(${function(t,e){if(1===t)return"coords";if(2===t)return"coords.x, coords.y";if(3===t)return"coords.x, coords.y, coords.z";if(4===t)return"coords.x, coords.y, coords.z, coords.w";throw Error(`Cumulative sum for rank ${t} is not yet supported`)}(r)});\n        }\n        setOutput(val);\n      }\n    `}}function pC(t,e){if(1===t)return`${e}`;if(2===t)return`${e}.y`;if(3===t)return`${e}.z`;if(4===t)return`${e}.w`;throw Error(`Cumulative sum for rank ${t} is not yet supported`)}class fC{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=aw.DENSE;const e=dw(t),n=Ww();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${Uw(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${n.output} = result;\n      }\n    `}}class gC{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=aw.DENSE;const e=dw(t),n=Ww();this.outputShape=t,this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${Uw(["r","c","d"],t)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2(${e[0]}, ${e[1]}));\n        int index = 4 * (resTexRC.x * ${e[1]} + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${n.output} = result;\n      }\n    `}}class mC{constructor(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${e};\n      int offset_h = imod(h, ${e});\n      int in_w = w / ${e};\n      int offset_w = imod(w, ${e});\n      int offset_d = (offset_h * ${e} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}class bC{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}class yC{constructor(t){this.variableNames=["A"],this.outTexUsage=uw.DOWNLOAD;const e=Ww();this.outputShape=t,this.userCode=`\n      ${Gw}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${e.output} = encode_float(x);\n      }\n    `}}class vC{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=uw.DOWNLOAD;const e=Ww();this.outputShape=t,this.userCode=`\n      ${Gw}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${e.output} = encode_float(x);\n      }\n    `}}class _C{constructor(t,e,n=!1){this.variableNames=["A"];const r=Ww(),[i,s]=e;this.outputShape=t;let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`\n      ${Hw(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / ${s};\n        int c = imod(flatIndex, ${s});\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);\n        vec4 values = ${r.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${r.output} = vec4(${o}, 0., 0., 0.);\n      }\n    `}}class wC{constructor(t,e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const r=Ww(),[i,s]=e;this.outputShape=t;let o="",l="result";n&&(l="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let e=0;e<=1;e++){const n=2*a+e;o+=`\n          localCoords = coords;\n          if(localCoords[2] + ${e} < ${t[2]}) {\n            localCoords[2] += ${e};\n            if(localCoords[1] + ${a} < ${t[1]}) {\n              localCoords[1] += ${a};\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / ${s};\n              c = imod(flatIndex, ${s});\n              uv = (vec2(c, r) + halfCR) / vec2(${s}.0, ${i}.0);\n              values = ${r.texture2D}(A, uv);\n\n              if(offset == 0) {\n                result[${n}] = values[0];\n              } else if(offset == 1) {\n                result[${n}] = values[1];\n              } else if(offset == 2) {\n                result[${n}] = values[2];\n              } else {\n                result[${n}] = values[3];\n              }\n            }\n          }\n        `}this.userCode=`\n      ${Hw(t)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        ${o}\n\n        ${r.output} = ${l};\n      }\n    `}}const xC={REAL:"return real * expR - imag * expI;",IMAG:"return real * expI + imag * expR;"};class CC{constructor(t,e,n){this.variableNames=["real","imag"];const r=e[1];this.outputShape=e;const i=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`;this.userCode=`\n      const float exponentMultiplier = ${i};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${t}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${n?`${r}.0`:"1.0"};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}class SC{constructor(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}getCustomSetupFunc(t){return(e,n)=>{null==this.valueLoc&&(this.valueLoc=e.getUniformLocationNoThrow(n,"value")),e.gl.uniform1f(this.valueLoc,t)}}}class OC{constructor(t,e,n){this.variableNames=["A","indices"];const r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;const i=tx(this.rank),s=function(t,e){const n=t.length;if(n>4)throw Error(`Gather for rank ${n} is not yet supported`);if(1===n)return"int(getIndices(resRC))";const r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let s=0;s<t.length;s++)i.push(s===e?`int(getIndices(${r[s]}))`:`${r[s]}`);return i.join()}(t,n);this.userCode=`\n      void main() {\n        ${i} resRC = getOutputCoords();\n        setOutput(getA(${s}));\n      }\n    `}}class kC{constructor(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;const r=tx(e.length),i=tx(n.length);this.userCode=`\n        ${r} strides = ${r}(${this.strides});\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${this.sliceDim>1?"strides[j]":"strides"};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}function EC(t,e,n,r,i,s,o){!function(t,e){const n=Z().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0)throw new Error("Requested texture size "+`[${t}x${e}]`+" is invalid.");if(t>n||e>n)throw new Error("Requested texture size "+`[${t}x${e}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}(n,r);const l=function(t,e){return kw(t,e,()=>t.createTexture(),"Unable to create WebGLTexture.")}(t,e),a=t.TEXTURE_2D;return gw(t,e,()=>t.bindTexture(a,l)),gw(t,e,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),gw(t,e,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),gw(t,e,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),gw(t,e,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),gw(t,e,()=>t.texImage2D(a,0,i,n,r,0,s,o,null)),gw(t,e,()=>t.bindTexture(t.TEXTURE_2D,null)),l}class TC{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const e=Z().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(t,n){sw[e]=n}(0,t)):this.gl=lw(e);let n="WEBGL_color_buffer_float";if(1===Z().getNumber("WEBGL_VERSION")){const t="OES_texture_half_float";if(this.textureFloatExtension=vw(this.gl,this.debug,"OES_texture_float"),Aw(this.gl,t))this.textureHalfFloatExtension=vw(this.gl,this.debug,t);else if(Z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Aw(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=vw(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Z().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(Aw(this.gl,n="EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Aw(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=function(t,e){return function(t,e,n){const r=kw(t,e,()=>t.createBuffer(),"Unable to create WebGLBuffer");return gw(t,e,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),gw(t,e,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),r}(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}(this.gl,this.debug),this.indexBuffer=function(t,e){return function(t,e,n){const r=kw(t,e,()=>t.createBuffer(),"Unable to create WebGLBuffer");return gw(t,e,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)),gw(t,e,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),r}(t,e,new Uint16Array([0,1,2,2,1,3]))}(this.gl,this.debug),this.framebuffer=function(t,e){return kw(t,e,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}(this.gl,this.debug),this.textureConfig=fw(this.gl,this.textureHalfFloatExtension)}get debug(){return Z().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;gw(t,this.debug,()=>t.finish()),gw(t,this.debug,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),gw(t,this.debug,()=>t.deleteFramebuffer(this.framebuffer)),gw(t,this.debug,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),gw(t,this.debug,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),gw(t,this.debug,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r,i){const[s,o]=hw(n,r);return EC(t,e,s,o,i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}(this.gl,this.debug,t,e,this.textureConfig)}createFloat16MatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r,i){const[s,o]=hw(n,r);return EC(t,e,s,o,i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}(this.gl,this.debug,t,e,this.textureConfig)}createUnsignedBytesMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r,i){const[s,o]=hw(n,r);return EC(t,e,s,o,t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}(this.gl,this.debug,t,e)}uploadPixelDataToTexture(t,e){this.throwIfDisposed(),function(t,e,n,r){gw(t,e,()=>t.bindTexture(t.TEXTURE_2D,n)),r.data instanceof Uint8Array?gw(t,e,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)):gw(t,e,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),gw(t,e,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,this.debug,t,e)}uploadDenseMatrixToTexture(t,e,n,r){this.throwIfDisposed(),function(t,e,n,r,i,s,o){let l,a,u;gw(t,e,()=>t.bindTexture(t.TEXTURE_2D,n)),s instanceof Uint8Array?(l=new Uint8Array(r*i*4),a=t.UNSIGNED_BYTE,u=t.RGBA):(l=new Float32Array(r*i*4),a=t.FLOAT,u=o.internalFormatPackedFloat),l.set(s),gw(t,e,()=>t.texImage2D(t.TEXTURE_2D,0,u,r,i,0,t.RGBA,a,l)),gw(t,e,()=>t.bindTexture(t.TEXTURE_2D,null))}(this.gl,this.debug,t,e,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r,i){const[s,o]=pw(n,r);return EC(t,e,s,o,i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}(this.gl,this.debug,t,e,this.textureConfig)}createPackedMatrixTexture(t,e){return this.throwIfDisposed(),function(t,e,n,r,i){const[s,o]=pw(n,r);return EC(t,e,s,o,i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}(this.gl,this.debug,t,e,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(Sw(this.gl,this.debug,this.framebuffer),this.outputTexture=null),gw(this.gl,this.debug,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,e,n){return this.downloadMatrixDriver(t,()=>(function(t,e,n,r,i){const[s,o]=hw(n,r),l=new Uint8Array(n*r*4);return gw(t,e,()=>t.readPixels(0,0,s,o,i.downloadTextureFormat,t.UNSIGNED_BYTE,l)),new Float32Array(l.buffer)})(this.gl,this.debug,e,n,this.textureConfig))}downloadPackedMatrixFromBuffer(t,e,n,r,i,s){return function(t,e,n,r,i,s,o,l){const a=t,u=new Float32Array(function(t,e){const[n,r]=pw(t,e);return n*r*4}(s,o));return a.bindBuffer(a.PIXEL_PACK_BUFFER,e),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,u),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),u}(this.gl,t,0,0,0,i,s)}downloadFloat32MatrixFromBuffer(t,e){return function(t,e,n){const r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}(this.gl,t,e)}createBufferFromTexture(t,e,n){this.bindTextureToFrameBuffer(t);const r=function(t,e,n,r,i){const s=t.createBuffer();gw(t,e,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const o=16*n*r;return gw(t,e,()=>t.bufferData(t.PIXEL_PACK_BUFFER,o,t.STREAM_READ)),gw(t,e,()=>t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)),gw(t,e,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}(this.gl,this.debug,e,n);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e,n;if(Z().getBool("WEBGL_FENCE_API_ENABLED")){const r=t,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=()=>{const t=r.clientWaitSync(i,0,0);return t===r.ALREADY_SIGNALED||t===r.CONDITION_SATISFIED},e=i}else Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(e,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:e,isFencePassed:n}}downloadMatrixFromPackedTexture(t,e,n){return this.downloadMatrixDriver(t,()=>(function(t,e,n,r){const i=new Float32Array(n*r*4);return gw(t,e,()=>t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)),i})(this.gl,this.debug,e,n))}createProgram(t){this.throwIfDisposed();const e=this.gl,n=function(t,e,n){const i=kw(t,e,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(gw(t,e,()=>t.shaderSource(i,n)),gw(t,e,()=>t.compileShader(i)),!1===t.getShaderParameter(i,t.COMPILE_STATUS))throw function(t,e){const n=_w.exec(e);if(null==n)return console.log(`Couldn't parse line number in error: ${e}`),void console.log(t);const i=+n[1],s=t.split("\n"),o=s.length.toString().length+2,l=s.map((t,e)=>r.rightPad((e+1).toString(),o)+t);let a=0;for(let r=0;r<l.length;r++)a=Math.max(l[r].length,a);const u=l.slice(0,i-1),c=l.slice(i-1,i),h=l.slice(i);console.log(u.join("\n")),console.log(e.split("\n")[0]),console.log(`%c ${r.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(h.join("\n"))}(n,t.getShaderInfoLog(i)),new Error("Failed to compile fragment shader.");return i}(e,this.debug,t),i=function(t,e){const n=Ww();return function(t,e,n){const r=kw(t,e,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(gw(t,e,()=>t.shaderSource(r,n)),gw(t,e,()=>t.compileShader(r)),!1===t.getShaderParameter(r,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}(t,e,`${n.version}\n    precision highp float;\n    ${n.attribute} vec3 clipSpacePos;\n    ${n.attribute} vec2 uv;\n    ${n.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}(e,this.debug),s=function(t,e){return kw(t,e,()=>t.createProgram(),"Unable to create WebGLProgram.")}(e,this.debug);return gw(e,this.debug,()=>e.attachShader(s,i)),gw(e,this.debug,()=>e.attachShader(s,n)),function(t,e,n){if(gw(t,e,()=>t.linkProgram(n)),!1===t.getProgramParameter(n,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}(e,this.debug,s),this.debug&&ww(e,this.debug,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=function(t,e,n,r){return gw(t,e,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),xw(t,e,n,"clipSpacePos",r,3,20,0)&&xw(t,e,n,"uv",r,2,20,12)}(e,this.debug,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&gw(this.gl,this.debug,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,null!=this.program&&this.debug&&ww(this.gl,this.debug,this.program),gw(this.gl,this.debug,()=>this.gl.useProgram(t))}getUniformLocation(t,e,n=!0){return this.throwIfDisposed(),n?function(t,e,n,r){return kw(t,e,()=>t.getUniformLocation(n,r),'uniform "'+r+'" not present in program.')}(this.gl,this.debug,t,e):function(t,e,n){return t.getUniformLocation(e,n)}(this.gl,t,e)}getAttributeLocation(t,e){return this.throwIfDisposed(),gw(this.gl,this.debug,()=>this.gl.getAttribLocation(t,e))}getUniformLocationNoThrow(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)}setInputMatrixTexture(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),function(t,e,n,r,i,s){gw(t,e,()=>(function(t,e,n,r){(function(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)})(t,r),gw(t,e,()=>t.activeTexture(t.TEXTURE0+r)),gw(t,e,()=>t.bindTexture(t.TEXTURE_2D,n))})(t,e,r,s)),gw(t,e,()=>t.uniform1i(i,s))}(this.gl,this.debug,0,t,e,n)}setOutputMatrixTexture(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)}setOutputPackedMatrixTexture(t,e,n){this.throwIfDisposed();const[r,i]=pw(e,n);this.setOutputMatrixTextureDriver(t,r,i)}setOutputMatrixWriteRegion(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)}setOutputPackedMatrixWriteRegion(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&ww(this.gl,this.debug,this.program),Ow(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),gw(t,this.debug,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),gw(this.gl,this.debug,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=vw(this.gl,this.debug,2===Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}const t=this.getQueryTimerExtensionWebGL1(),e=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,e),e}endQuery(){if(2===Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const t=this.gl,e=this.getQueryTimerExtensionWebGL2();return void t.endQuery(e.TIME_ELAPSED_EXT)}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await r.repeatedTry(()=>this.disposed||this.isQueryAvailable(t,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,e){if(0===e)return null;if(2===e){const e=this.gl;return e.getQueryParameter(t,e.QUERY_RESULT)/1e6}{const e=this.getQueryTimerExtensionWebGL1();return e.getQueryObjectEXT(t,e.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,e){if(0===e)return!0;if(2===e){const e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{const e=this.getQueryTimerExtensionWebGL1(),n=e.getQueryObjectEXT(t,e.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(e.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(t){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})}pollItems(){const t=function(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}(this.itemsToPoll.map(t=>t.isDoneFn));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||r.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),Cw(this.gl,this.debug,t,this.framebuffer),this.debug&&Ow(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(Cw(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Ow(this.gl)):Sw(this.gl,this.debug,this.framebuffer)}downloadMatrixDriver(t,e){this.bindTextureToFrameBuffer(t);const n=e();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(t,e,n){this.throwIfDisposed();const r=this.gl;Cw(r,this.debug,t,this.framebuffer),this.debug&&Ow(r),this.outputTexture=t,gw(r,this.debug,()=>r.viewport(0,0,e,n)),gw(r,this.debug,()=>r.scissor(0,0,e,n))}setOutputMatrixWriteRegionDriver(t,e,n,r){this.throwIfDisposed(),gw(this.gl,this.debug,()=>this.gl.scissor(t,e,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}function zC(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but `+`was executed with ${e.length} inputs`);t.forEach((t,n)=>{const i=t.logicalShape,s=e[n],o=s.shape;if(!r.arraysEqual(i,o))throw Error("Binary was compiled with different shapes than "+`the current args. Shapes ${i} and ${o} must match`);if(t.isUniform&&s.isUniform)return;const l=t.texShape,a=s.isUniform?null:s.texData.texShape;if(!r.arraysEqual(l,a))throw Error("Binary was compiled with different texture shapes than the"+` current args. Shape ${l} and ${a} must match`)})}class PC{constructor(t,e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;const{filterWidth:r,inChannels:i,strideWidth:s,strideHeight:o,padInfo:l,outWidth:a,dilationWidth:u,dilationHeight:c,dataFormat:h}=n,{left:d,top:p}=l,f=i*r,g=Ww(),m="channelsLast"===h,b=m?0:1,y=m?1:2;let v="";for(let _=0;_<=1;_++)for(let n=0;n<=1;n++)v+=`\n          blockIndex = rc.y + ${n};\n          pos = rc.x + ${_};\n\n          if(blockIndex < ${t[1]} && pos < ${t[0]}) {\n            offsetY = int(blockIndex / (${a})) * ${o} - ${p};\n            d0 = offsetY + ${c} * (pos / ${f});\n\n            if(d0 < ${e[b]} && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), ${a}.) * ${s}. - ${d}.);\n              d1 = offsetX + ${u} * (int(mod(float(pos), ${f}.) / ${i}.));\n\n              if(d1 < ${e[y]} && d1 >= 0) {\n\n                ch = int(mod(float(pos), ${i}.));\n\n                if (${m}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*_+n}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*_+n}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${v}\n\n        ${g.output} = result;\n      }\n    `}}class IC{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];const s=e,o=t[3]-1;let l;this.outputShape=t;const a=`float(${n}) + float(${r}) * sum`;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${s}; j <= ${s}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${o}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${l=.5===i?`inversesqrt(${a})`:1===i?`1.0/(${a})`:`exp(log(${a}) * float(-${i}));`};\n        setOutput(val);\n      }\n    `}}class MC{constructor(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${e})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${e} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}class DC{constructor(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const s=e,o=t[3]-1;let l;this.outputShape=t;const a=`float(${n}) + float(${r}) * sum`;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${s};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${s}; j <= ${s}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${o}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${l=.5===i?`inversesqrt(${a})`:1===i?`1.0/(${a})`:`exp(log(${a}) * float(-${i}));`};\n        setOutput(result);\n      }\n    `}}class AC{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.effectiveFilterHeight,n=t.effectiveFilterWidth;this.userCode=`\n      const ivec2 pads = ivec2(${e-1-t.padInfo.top}, ${n-1-t.padInfo.left});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${e};\n          wR += ${t.dilationHeight}) {\n          float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${e*n-1} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${n} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class NC{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const e=t.effectiveFilterDepth,n=t.effectiveFilterHeight,r=t.effectiveFilterWidth;this.userCode=`\n      const ivec3 pads = ivec3(${e-1-t.padInfo.front}, ${n-1-t.padInfo.top}, ${r-1-t.padInfo.left});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${e};\n           wD += ${t.dilationDepth}) {\n          float dyD = float(dyDCorner + wD) / ${t.strideDepth}.0;\n\n          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${n};\n              wR += ${t.dilationHeight}) {\n            float dyR = float(dyRCorner + wR) / ${t.strideHeight}.0;\n\n            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${r};\n                wC += ${t.dilationWidth}) {\n              float dyC = float(dyCCorner + wC) / ${t.strideWidth}.0;\n\n              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${e*n*r-1} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${n} * ${r} +\n                  wR * ${r} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class RC{constructor(t,e,n=!1,r=!1,i=!1,s=null,o=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;const l=Math.ceil((n?t[1]:t[2])/2),a=n?"i * 2, rc.y":"rc.y, i * 2",u=r?"rc.z, i * 2":"i * 2, rc.z",c=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let d="",p="";s&&(d=o?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,p="result = activation(result);");const f=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`\n      ${d}\n\n      const float sharedDimension = ${l}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${l}; i++) {\n          vec4 a = getMatrixA(rc.x, ${a});\n          vec4 b = getMatrixB(rc.x, ${u});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${c[0]} * ${h[0]});\n          result += (${c[1]} * ${h[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${f}\n\n        ${p}\n\n        setOutput(result);\n      }\n    `}}class FC{constructor(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${e-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${e-1}));\n      }\n    `}getCustomSetupFunc(t){return(e,n)=>{null==this.seedLoc&&(this.seedLoc=e.getUniformLocation(n,"seed")),e.gl.uniform1f(this.seedLoc,t)}}}class $C{constructor(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}class LC{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t;const e=t.length;if(0===e)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const n=Vw("rc",e),r=tx(e),i=function(t,e,n){if(1===t)return`rc > ${e[0]}`;let r="";for(let i=t-2;i<t;i++)r+=`${n[i]} >= ${e[i]}`,i<t-1&&(r+="||");return r}(e,t,n),s=function(t,e,r,i){if(1===t)return"";const s=n.slice(-2);return`\n    int r = ${s[0]};\n    int c = ${s[1]};\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= ${e};\n    bool rEdge = rp1 >= ${r};\n  `}(e,t[t.length-1],t[t.length-2]),o=function(t,e){const r=t.length,i=function(t,e){const n=[];for(let r=0;r<=1;r++)for(let i=0;i<=1;i++){let s=`${0===r?"r":"rp1"}, ${0===i?"c":"cp1"}`;for(let n=2;n<t;n++)s=`${e[e.length-1-n]},`+s;n.push(s)}return n}(r,n);return 1===r?`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`:`getA(${i[0]}),\n          cEdge ? 0. : getA(${i[1]}),\n          rEdge ? 0. : getA(${i[2]}),\n          rEdge || cEdge ? 0. : getA(${i[3]})`}(t);this.userCode=`\n        void main() {\n          ${r} rc = getOutputCoords();\n\n          if(${i}) {\n            setOutput(vec4(0));\n          } else {\n            ${s}\n\n            setOutput(vec4(${o}));\n          }\n        }\n      `}}}class jC{constructor(t,e,n){this.variableNames=["x"],this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=tx(r),s=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${s});\n      ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float(${n}));\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${l}));\n        }\n      }\n    `:`\n        int start = ${s};\n        int end = ${o};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float(${n}));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class BC{constructor(t,e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((e,n)=>e[0]+t[n]+e[1]);const r=t.length,i=tx(r),s=e.map(t=>t[0]).join(","),o=e.map((e,n)=>e[0]+t[n]).join(","),l=Vw("rc",r),a=Vw("source",r),u=`${l[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${a.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${l[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${l[r-2]} += 1;\n       if(${l[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${l[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let f=0,g=1===r?2:4;f<g;f++)p+=`\n        ${h[f]}\n        if (${d}) {\n          result[${f}] = float(${n});\n        } else {\n          ${i} source = rc - start;\n          result[${f}] = getChannel(getX(${a.join()}), ${c});\n        }\n      `;this.userCode=`\n      const ${i} start = ${i}(${s});\n      const ${i} end = ${i}(${o});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${p+=1===r?"} ":"}}"}\n        setOutput(result);\n      }\n    `}}class VC{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const s=t.filterWidth,o=t.strideHeight,l=t.strideWidth,a=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterHeight,h=t.effectiveFilterWidth,d=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const f="avg"===e;let g="0.0";if(f||(g="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec2 strides = ivec2(${o}, ${l});\n        const ivec2 pads = ivec2(${d}, ${p});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${a}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${h};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${t.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`:`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`:`wR * ${h} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let m=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(m="avgValue / count");const b=4*Math.floor(s/4),y=s%4,v=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${o}, ${l});\n      const ivec2 pads = ivec2(${d}, ${p});\n      const float initializationValue = ${g};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${g});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${a}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${t.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${v}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${v}\n          } else if (${2===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${v}\n          } else if (${3===y}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${v}\n          }\n        }\n        setOutput(${m});\n      }\n    `}}class WC{constructor(t,e,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");const s=t.filterWidth,o=t.strideDepth,l=t.strideHeight,a=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,h=t.dilationWidth,d=t.effectiveFilterDepth,p=t.effectiveFilterHeight,f=t.effectiveFilterWidth,g=t.padInfo.front,m=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const y="avg"===e;let v="0.0";if(y||(v="-1.0 / 1e-20"),n)return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${o}, ${l}, ${a});\n        const ivec3 pads = ivec3(${g}, ${m}, ${b});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${t.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${p};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${t.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${h}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${t.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `);let _=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(_="avgValue / count");const w=4*Math.floor(s/4),x=s%4,C=`\n      if (${y}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${o}, ${l}, ${a});\n      const ivec3 pads = ivec3(${g}, ${m}, ${b});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${t.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${t.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${t.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${h};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${h}, ch)\n              );\n\n              ${C}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${2===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${3===x}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${h}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${h}, ch),\n                initializationValue\n              );\n\n              ${C}\n            }\n          }\n          setOutput(${_});\n        }\n      }\n    `}}class UC{constructor(t,e){this.variableNames=["x"];const n=t.windowSize,r=t.batchSize,i=t.inSize,s=Math.ceil(i/n);this.outputShape=[r,s];let o="0.0",l="";"prod"===e?o="1.0":"min"===e?(o="1.0 / 1e-20",l="min"):"max"===e&&(o="-1.0 / 1e-20",l="max");let a=`${e}(${e}(${e}(`+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?a="sumValue":"prod"===e?a="prodValue":"all"===e?a="allValue":"any"===e&&(a="anyValue");const u=4*Math.floor(n/4),c=n%4;let h=`\n      if (${"sum"===e}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===e}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${l}(values, minMaxValue);\n      }\n    `,d="vec4";"all"===e?(o="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===e&&(o="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${o};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${p}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${o});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${h}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${h}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${h}\n        }\n        setOutput(${a});\n      }\n    `}}class HC{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;let n="";for(let i=0;i<4;i++){let t="thisRC = rc;";i%2==1&&(t+="thisRC.z += 1;"),i>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${i>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${i}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${i>0?"}":""}\n      `}var r;this.userCode=`\n      ${r=e,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${Uw(["r","c","d"],r)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${Hw(t)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${t[1]};\n        int cols = ${t[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class GC{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,s,o]=t.shape,l=[n&&s>1?r-1:r,n&&o>1?i-1:i],a=[n&&s>1?s-1:s,n&&o>1?o-1:o],u=l[0]/a[0],c=l[1]/a[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}class qC{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,s,o,l]=t;this.outputShape=[i,e,n,l];const a=[r&&e>1?s-1:s,r&&n>1?o-1:o],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${a[0]/u[0]},\n          ${a[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class KC{constructor(t,e,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,s,o,l]=t;this.outputShape=[i,e,n,l];const a=[r&&e>1?s-1:s,r&&n>1?o-1:o],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${a[0]/u[0]},\n          ${a[1]/u[1]},\n          ${a[1]/u[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${o}.0,\n                                     ${o}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}class YC{constructor(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;const[,r,i]=e.shape,[,s,o]=t.shape,l=[n&&s>1?r-1:r,n&&o>1?i-1:i],a=[n&&s>1?s-1:s,n&&o>1?o-1:o],u=l[0]/a[0],c=l[1]/a[1],h=1/u,d=1/c,p=2*Math.ceil(h)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${h});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${p});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${s}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${o}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${l[0]}) *\n                (float(dyR) / float(${a[0]}));\n\n            float sourceFracCol =\n                float(${l[1]}) *\n                  (float(dyC) / float(${a[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}class XC{constructor(t,e,n,r){this.variableNames=["A"],this.outputShape=[];const[i,s,o,l]=t;this.outputShape=[i,e,n,l];const a=[r&&e>1?s-1:s,r&&n>1?o-1:o],u=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${a[0]/u[0]},\n          ${a[1]/u[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${o}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${r?"0.5":"0.0"})));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class ZC{constructor(t,e){this.variableNames=["x"];const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=t,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${t[0]} - coord - 1));\n        }\n      `);const r=t.map((n,r)=>(n=>-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),i=tx(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}class QC{constructor(t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=t.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=t;const r=Vw("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,s=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,o=tx(n);function l(n){const r=t.map((r,i)=>(function(n,r){return-1!==e.indexOf(n)&&1!==t[n]?`${t[n]} - ${r[n]} - 1`:`${r[n]}`})(i,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${t[0]} - rc - 1),\n            ${t[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),\n                ${t[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${o} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(t){return l(t)}(r.slice())};\n          if(${i}){\n            result.g = ${function(t){return t[n-1]="("+t[n-1]+" + 1)",l(t)}(r.slice())};\n          }\n          if(${s}) {\n            result.b = ${function(t){return t[n-2]="("+t[n-2]+" + 1)",l(t)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(t){return t[n-1]="("+t[n-1]+" + 1)",t[n-2]="("+t[n-2]+" + 1)",l(t)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}class JC{constructor(t,e,n,r,i,s,o=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;const l=tx(i.length),a=tx(s.length);let u="";1===n?u="i":2===n&&(u="i, j");let c="";1===r?c="i":2===r&&(c="i, coords[1]"),this.userCode=`\n        ${l} strides = ${l}(${i});\n\n        void main() {\n          ${a} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${t}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${e}; j++) {\n              int index = round(${`getIndices(${u})`});\n              flattenedIndex += index * ${e>1?"strides[j]":"strides"};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${`getUpdates(${c})`};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}class tS{constructor(t,e){this.variableNames=["x","segmentIds"];const n=t.windowSize,r=t.batchSize,i=t.inSize,s=t.numSegments,o=s*Math.ceil(i/n);this.outputShape=[r,o];const l=4*Math.floor(n/4),a=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${h}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${s})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${s})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${l}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${l};\n        if (${1===a}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===a}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===a}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}class eS{constructor(t,e,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],o=[];for(let r=0;r<e.length;r++)o.push(`${n[r]}`),r<t&&s.push(`${n[r]}`);r=s.join(),i=o.join()}const s=tx(n);this.userCode=`\n      void main() {\n        ${s} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}class nS{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const e=tx(this.rank),n=`uniform int start[${this.rank}];`,r=function(t){if(1===t)return"sourceLoc";if(t<=6)return rS.slice(0,t).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}(this.rank);let i;i=`\n        ${e} sourceLoc;\n        ${e} coords = getOutputCoords();\n        ${t.map((t,e)=>`sourceLoc.${rS[e]} = start[${e}] + coords.${rS[e]};`).join("\n")}\n      `,this.userCode=`\n      ${n}\n      void main() {\n        ${i}\n        setOutput(getSource(${r}));\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}const rS=["x","y","z","w","u","v"];class iS{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;const e=tx(this.rank),n=Vw("coords",this.rank),r=Vw("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${i})`,o=`\n      result.x = ${s};\n      if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${s};\n        --${r[this.rank-1]};\n      }\n    `,l=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${t[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${s};\n        if (++${n[this.rank-1]} < ${t[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${s};\n        }\n      }\n    `,a=this.rank<=4?`sourceLoc = coords +\n            ${e}(${t.map((t,e)=>`start[${e}]`).join()});`:t.map((t,e)=>`${r[e]} = ${n[e]} + start[${e}];`).join("\n");this.userCode=`\n      uniform int start[${this.rank}];\n      void main() {\n        ${e} coords = getOutputCoords();\n        ${e} sourceLoc;\n        ${a}\n        vec4 result = vec4(0.);\n        ${o}\n        ${l}\n        setOutput(result);\n      }\n    `}getCustomSetupFunc(t){if(t.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the `+`length of start (${t.length})`);return(e,n)=>{null==this.startLoc&&(this.startLoc=e.getUniformLocationNoThrow(n,"start"),null==this.startLoc)||e.gl.uniform1iv(this.startLoc,t)}}}class sS{constructor(t,e,n){this.variableNames=["x"],this.outputShape=n;const r=n.length,i=tx(n.length),s=tx(n.length);let o="";if(1===r)o="coords * strides + begin";else{let t=0;o=n.map((e,r)=>(t++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${t-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${t});\n      ${i} strides = ${i}(${e});\n\n      void main() {\n        ${s} coords = getOutputCoords();\n        setOutput(getX(${o}));\n      }\n    `}}class oS{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,e,n){const r=lS(e,n),i=aS(t,r,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();const t=this.freeTextures[i].shift();return this.usedTextures[i].push(t),t}let s;return this.numUsedTextures++,this.log(),r===cw.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===cw.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):r===cw.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===cw.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===cw.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(s),s}releaseTexture(t,e,n,r){if(null==this.freeTextures)return;const i=aS(e,lS(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;const s=this.usedTextures[i],o=s.indexOf(t);if(o<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(o,1),this.log()}log(){this.logEnabled&&console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${this.numFreeTextures+this.numUsedTextures})`)}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const t in this.freeTextures)this.freeTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});for(const t in this.usedTextures)this.usedTextures[t].forEach(t=>{this.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}}}function lS(t,e){if(t===uw.UPLOAD)return cw.PACKED_2X2_FLOAT32;if(t===uw.RENDER||null==t)return function(t){return Z().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?cw.PACKED_2X2_FLOAT32:cw.UNPACKED_FLOAT32:t?cw.PACKED_2X2_FLOAT16:cw.UNPACKED_FLOAT16}(e);if(t===uw.DOWNLOAD||t===uw.PIXELS)return cw.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function aS(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}class uS{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let s=0;s<n.length;s++)n[s]=t[s]*e[s];this.outputShape=n,this.rank=n.length;const r=tx(this.rank),i=function(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(1===e)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let i=0;i<t.length;i++)r.push(`imod(${n[i]}, ${t[i]})`);return r.join()}(t);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}class cS{constructor(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode=`\n      float unaryOperation(float x) {\n        ${e}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const hS="if (isnan(x)) return x;",dS="return x;",pS="return abs(x);",fS=hS+"\n  return (x < 0.0) ? 0.0 : x;\n",gS=hS+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",mS="return (x >= 0.0) ? x : (exp(x) - 1.0);",bS=`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${x.SELU_SCALEALPHA};\n  float scale = ${x.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`,yS="return -x;",vS="return ceil(x);",_S="return floor(x);",wS="\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n",xS="return float(isnan(x));",CS="return float(isinf(x));",SS="return float(!isnan(x) && !isinf(x));",OS="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",kS="return exp(x);",ES="return exp(x) - 1.0;",TS="if (x < 0.0) return NAN;\n  return log(x);",zS="return log(1.0 + x);",PS="return sqrt(x);",IS="return inversesqrt(x);",MS="return 1.0 / (1.0 + exp(-1.0 * x));",DS="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",AS=hS+"\n  return sin(x);\n",NS=hS+"\n  return cos(x);\n",RS="return tan(x);",FS=hS+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",$S=hS+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",LS=hS+"\n  return atan(x);\n",jS="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",BS="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",VS="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",WS=hS+"return log(x + sqrt(x * x + 1.0));",US=hS+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",HS=hS+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",GS=`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${x.ERF_P};\n  float a1 = ${x.ERF_A1};\n  float a2 = ${x.ERF_A2};\n  float a3 = ${x.ERF_A3};\n  float a4 = ${x.ERF_A4};\n  float a5 = ${x.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`,qS="return 1.0 / x;",KS="return float(!(x >= 1.0));",YS="return float(int(x));",XS="return x;",ZS="return x;",QS="\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",JS="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",tO="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",eO="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n";class nO{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${e}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class rO{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t;const e=t.length,n=Vw("rc",e),r=tx(e),i=function(t,e){if(1===t)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(e,n),s=n.slice(-2),o=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${o}));\n      }\n    `}}const{segment_util:iO}=x,sO=C.split,oO=C.tile,lO=C.topkImpl,aO=C.whereImpl,uO=1e-7,cO=1e-4,hO={};function dO(t,e=!1){if("linear"===t)return e?ZS:dS;if("relu"===t)return e?JS:fS;if("elu"===t)return e?eO:mS;if("relu6"===t)return e?tO:gS;if("prelu"===t)return e?Ax:zx;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}const pO=128,fO=600,gO=1e3;class mO extends Pd{constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Z().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){const t=lw(Z().getNumber("WEBGL_VERSION"));this.binaryCache=(e=Z().getNumber("WEBGL_VERSION"))in hO?hO[e]:(hO[e]={},hO[e]),this.gpgpu=new TC(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=t,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=t.gl.canvas;var e;this.textureManager=new oS(this.gpgpu),this.numMBBeforeWarning=null==Z().global.screen?1024:Z().global.screen.height*Z().global.screen.width*window.devicePixelRatio*fO/1024/1024,this.texData=new zd(this,La())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(t,e,n){if(Z().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===n&&null!=t)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const r={};return this.texData.set(r,{shape:e,dtype:n,values:t,usage:uw.UPLOAD}),r}move(t,e,n,r){if(Z().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:n,dtype:r,values:e,usage:uw.UPLOAD})}readSync(t){const e=this.texData.get(t),{values:n,dtype:i,complexTensors:s,slice:o,shape:l,isPacked:a}=e;if(null!=o){let e;e=a?new nO(l,XS):new cS(l,XS);const n=this.runWebGLProgram(e,[{dataId:t,shape:l,dtype:i}],i),r=this.readSync(n.dataId);return this.disposeData(n.dataId),r}if(null!=n)return this.convertAndCacheOnCPU(t);if("string"===i)return n;const u=null!=this.activeTimers;let c,h;if(u&&(c=r.now()),"complex64"===i){const t=s.real.dataSync(),e=s.imag.dataSync();h=x.mergeRealAndImagArrays(t,e)}else h=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=r.now()-c),this.convertAndCacheOnCPU(t,h)}async read(t){if(this.pendingRead.has(t)){const e=this.pendingRead.get(t);return new Promise(t=>e.push(t))}const e=this.texData.get(t),{values:n,shape:i,slice:s,dtype:o,complexTensors:l,isPacked:a}=e;if(null!=s){let e;e=a?new nO(i,XS):new cS(i,XS);const n=this.runWebGLProgram(e,[{dataId:t,shape:i,dtype:o}],o),r=this.read(n.dataId);return this.disposeData(n.dataId),r}if(null!=n)return this.convertAndCacheOnCPU(t);if(!Z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Z().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u,c,h=null;if("complex64"!==o&&Z().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(t);const e=this.texData.get(u.dataId);h=this.gpgpu.createBufferFromTexture(e.texture,...dw(i))}if(this.pendingRead.set(t,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const t=await Promise.all([l.real.data(),l.imag.data()]);c=x.mergeRealAndImagArrays(t[0],t[1])}else if(null==h)c=this.getValuesFromTexture(t);else{const t=r.sizeFromShape(i);c=this.gpgpu.downloadFloat32MatrixFromBuffer(h,t)}null!=u&&this.disposeData(u.dataId);const d=this.convertAndCacheOnCPU(t,c),p=this.pendingRead.get(t);return this.pendingRead.delete(t),p.forEach(t=>t(d)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),d}checkNumericalProblems(t){if(null!=t)for(let e=0;e<t.length;e++){const n=t[e];if(!yw(n)){if(Z().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your `+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(t){const{shape:e,dtype:n,isPacked:i}=this.texData.get(t),s=r.sizeFromShape(e);if(Z().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(t),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture,...dw(e)).subarray(0,s);return this.disposeData(n.dataId),i}const o=Z().getBool("WEBGL_PACK")&&!0===i,l=o?zw(e):e,a=o?new vC(l):new yC(l),u=this.runWebGLProgram(a,[{shape:l,dtype:n,dataId:t}],"float32"),c=this.texData.get(u.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]).subarray(0,s);return this.disposeData(u.dataId),h}async time(t){const e=this.activeTimers,n=[];let i=!1;null==this.programTimersStack?(this.programTimersStack=n,i=!0):this.activeTimers.push(n),this.activeTimers=n,t();const s=r.flatten(this.activeTimers.map(t=>t.query)).filter(t=>null!=t),o=r.flatten(this.activeTimers.map(t=>t.name)).filter(t=>null!=t);this.activeTimers=e,i&&(this.programTimersStack=null);const l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const t=await Promise.all(s);l.kernelMs=r.sum(t),l.getExtraProfileInfo=()=>t.map((t,e)=>({name:o[e],ms:t})).map(t=>`${t.name}: ${t.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}}startTimer(){return Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:r.now(),endMs:null}}endTimer(t){return Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=r.now(),t)}async getQueryTime(t){return Z().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.waitForQueryAndGetTime(t):t.endMs-t.startMs}disposeData(t){if(this.pendingDisposal.has(t))return;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(!this.texData.has(t))return;this.releaseGPUData(t);const{complexTensors:e}=this.texData.get(t);null!=e&&(e.real.dispose(),e.imag.dispose()),this.texData.delete(t)}releaseGPUData(t){const{texture:e,dtype:n,texShape:r,usage:i,isPacked:s,slice:o}=this.texData.get(t),l=o&&o.origDataId||t,a=this.dataRefCount.get(l);a>1?this.dataRefCount.set(l,a-1):(this.dataRefCount.delete(l),null!=e&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(e,r,i,s)));const u=this.texData.get(t);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture}getDataInfo(t){return this.texData.get(t)}getCPUBackend(){return Z().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=La().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(t,e=pO){return null!=this.getCPUBackend()&&t.every(t=>null==this.texData.get(t.dataId).texture&&r.sizeFromShape(t.shape)<e)}getGPGPUContext(){return this.gpgpu}complex(t,e){const n=this.makeOutput(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:La().keep(t.clone()),imag:La().keep(e.clone())},n}real(t){return this.texData.get(t.dataId).complexTensors.real.clone()}imag(t){return this.texData.get(t.dataId).complexTensors.imag.clone()}slice(t,e,n){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,e,n);if(0===r.sizeFromShape(n))return yr([],n,t.dtype);const{isPacked:i}=this.texData.get(t.dataId),s=o.isSliceContinous(t.shape,e,n);if(i||!s){const r=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new iS(n):new nS(n),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,i)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,e,n)}shallowSlice(t,e,n){const r=this.texData.get(t.dataId),i=this.makeOutput(n,t.dtype),s=this.texData.get(i.dataId);Object.assign(s,r),s.shape=n,s.dtype=t.dtype;let l=o.computeFlatOffset(e,t.strides);r.slice&&(l+=r.slice.flatOffset),s.slice={flatOffset:l,origDataId:r.slice&&r.slice.origDataId||t.dataId};const a=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,a+1),i}stridedSlice(t,e,n,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,e,n,r);const i=o.computeOutShape(e,n,r);if(i.some(t=>0===t))return yr([],i);const s=new sS(e,r,i);return this.compileAndRun(s,[t])}reverse(t,e){const n=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new QC(t.shape,e):new ZC(t.shape,e);return this.compileAndRun(n,[t])}concat(t,e){if("complex64"===t[0].dtype){const n=t.map(t=>br(t)),r=t.map(t=>mr(t));return gr(this.concat(n,e),this.concat(r,e))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,e);if(1===t.length)return t[0];if(t.length>Z().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const n=Math.floor(t.length/2),r=this.concat(t.slice(0,n),e),i=this.concat(t.slice(n),e);return this.concat([r,i],e)}if(Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){const n=new Jx(t.map(t=>t.shape),e);return this.compileAndRun(n,t)}const n=x.computeOutShape(t.map(t=>t.shape),e),i=t.map(t=>t.as2D(-1,r.sizeFromShape(t.shape.slice(e)))),s=new Qx(i.map(t=>t.shape));return this.compileAndRun(s,i).reshape(n)}neg(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,yS,t.dtype);const e=new cS(t.shape,yS);return this.compileAndRun(e,[t])}batchMatMul(t,e,n,r){const i=n?t.shape[2]:t.shape[1],s=r?e.shape[1]:e.shape[2],o=n?t.shape[1]:t.shape[2],[l,,]=t.shape;if((1===i||1===s)&&o>gO){n&&(t=Ms(t,[0,2,1])),r&&(e=Ms(e,[0,2,1]));const i=1===s?t:t.as3D(l,o,1),a=1===s?2:1,u=1===s?e.as3D(l,1,o):e;return this.multiply(i,u).sum(a,!0)}const a=ke(t.dtype,e.dtype),u=new RC(t.shape,[l,i,s],n,r);return this.compileAndRun(u,[t,e],a)}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:i,activation:s,preluActivationWeights:o}){const l=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2],[u,,]=t.shape,c=ke(t.dtype,e.dtype),h=null!=i,d=null!=o,p=s?dO(s,!0):null,f=new RC(t.shape,[u,l,a],n,r,h,p,d),g=[t,e];return i&&g.push(i),o&&g.push(o),this.compileAndRun(f,g,c)}multiply(t,e){if("complex64"===t.dtype){const n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new ux(ax.REAL,t.shape,e.shape),s=new ux(ax.IMAG,t.shape,e.shape),o=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag),this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)],l=this.compileAndRun(i,o),a=this.compileAndRun(s,o),u=this.complex(l,a);return l.dispose(),a.dispose(),u}if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.multiply(t,e);if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,px,t.dtype);const n=new Px(px,t.shape,e.shape);return this.compileAndRun(n,[t,e],t.dtype)}batchNorm(t,e,n,r,i,s){const o=[t,e,n];let l=null;null!=r&&(l=r.shape,o.push(r));let a=null;if(null!=i&&(a=i.shape,o.push(i)),Z().getBool("WEBGL_PACK_NORMALIZATION")){const r=new lx(t.shape,e.shape,n.shape,l,a,s);return this.compileAndRun(r,o)}const u=new ox(t.shape,e.shape,n.shape,l,a,s);return this.compileAndRun(u,o)}localResponseNormalization4D(t,e,n,r,i){const s=Z().getBool("WEBGL_PACK_NORMALIZATION")?new DC(t.shape,e,n,r,i):new IC(t.shape,e,n,r,i);return this.compileAndRun(s,[t])}LRNGrad(t,e,n,r,i,s,o){const l=new MC(e.shape,r,i,s,o);return this.compileAndRun(l,[e,n,t])}tile(t,e){if("string"===t.dtype){const n=this.readSync(t.dataId).map(t=>r.decodeString(t)),i=Nr(t.shape,t.dtype,n);return oO(i,e)}const n=new uS(t.shape,e);return this.compileAndRun(n,[t])}pad(t,e,n){const r=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new BC(t.shape,e,n):new jC(t.shape,e,n);return this.compileAndRun(r,[t])}gather(t,e,n){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.gather(t,e,n);const r=new OC(t.shape,e.size,n);return this.compileAndRun(r,[t,e])}batchToSpaceND(t,e,n){r.assert(t.rank<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const i=e.reduce((t,e)=>t*e),s=x.getReshaped(t.shape,e,i),o=x.getPermuted(s.length,e.length),l=x.getReshapedPermuted(t.shape,e,i),a=x.getSliceBeginCoords(n,e.length),u=x.getSliceSize(l,n,e.length);return Ms(t.reshape(s),o).reshape(l).slice(a,u)}spaceToBatchND(t,e,n){r.assert(t.rank<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const i=e.reduce((t,e)=>t*e),s=[[0,0]];s.push(...n);for(let r=1+e.length;r<t.shape.length;++r)s.push([0,0]);const o=t.pad(s),l=x.getReshaped(o.shape,e,i,!1),a=x.getPermuted(l.length,e.length,!1),u=x.getReshapedPermuted(o.shape,e,i,!1);return Ms(o.reshape(l),a).reshape(u)}reduce(t,e,n){const r=t.shape[0],i=t.shape[1],s=x.computeOptimalWindowSize(i),o=new UC({windowSize:s,inSize:i,batchSize:r},e),l=this.compileAndRun(o,[t],n);return 1===l.shape[1]?l:this.reduce(l,e,n)}argReduce(t,e,n=null){let r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);const s=x.computeOptimalWindowSize(i),o=new jw({windowSize:s,inSize:i,batchSize:r},e,null==n),l=[t];null!=n&&l.push(n);const a=this.compileAndRun(o,l,"int32");return 1===a.shape[1]?a:this.argReduce(t,e,a)}argReducePacked(t,e,n=null){const r=null!=n?n.shape:t.shape,i=x.computeOptimalWindowSize(r[r.length-1]),s=new rx(r,i,e,null==n),o=this.compileAndRun(s,null==n?[t]:[t,n],"int32");return o.rank===t.rank?this.argReducePacked(t,e,o):o}sum(t,e){x.assertAxesAreInnerMostDims("sum",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s),l=Ee(t.dtype);return this.reduce(o,"sum",l).reshape(n)}prod(t,e){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,e);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s),l=Ee(t.dtype);return this.reduce(o,"prod",l).reshape(n)}unsortedSegmentSum(t,e,n){let i=0;const s=x.getAxesPermutation([i],t.rank);let o=t;null!=s&&(o=Ms(t,s),i=x.getInnerMostAxes(1,t.rank)[0]);const l=iO.computeOutShape(o.shape,i,n),a=r.sizeFromShape([o.shape[i]]),u=o.as2D(-1,a),c=Ee(t.dtype);let h=this.segOpCompute(u,"unsortedSegmentSum",e,c,n).reshape(l);return null!=s&&(h=Ms(h,x.getUndoAxesPermutation(s))),h}segOpCompute(t,e,n,r,i){const s=t.shape[0],o=t.shape[1],l=iO.segOpComputeOptimalWindowSize(o,i),a=new tS({windowSize:l,inSize:o,batchSize:s,numSegments:i},e),u=this.compileAndRun(a,[t,n],r);return u.shape[1]===i?u:(n=Ir(0,i).tile([o/l]),this.segOpCompute(u,e,n,r,i))}argMinMaxReduce(t,e,n){const i=[e];if(x.assertAxesAreInnerMostDims("arg"+n.charAt(0).toUpperCase()+n.slice(1),i,t.rank),!Z().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){const[e,s]=x.computeOutAndReduceShapes(t.shape,i),o=r.sizeFromShape(s),l=t.as2D(-1,o);return this.argReduce(l,n).reshape(e)}return this.argReducePacked(t,n)}argMin(t,e){return this.argMinMaxReduce(t,e,"min")}argMax(t,e){return this.argMinMaxReduce(t,e,"max")}cumsum(t,e,n,r){if(e!==t.rank-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${t.rank-1} `+`but got axis=${e}`);const i=new dC(t.shape,n,r);return this.compileAndRun(i,[t])}equal(t,e){if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Fx,"bool");const n=new Px(mx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}notEqual(t,e){if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,$x,"bool");const n=new Px(bx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}less(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.less(t,e);if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Lx,"bool");const n=new Px(yx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}lessEqual(t,e){if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,jx,"bool");const n=new Px(vx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greater(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.greater(t,e);if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Bx,"bool");const n=new Px(_x,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}greaterEqual(t,e){if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Vx,"bool");const n=new Px(wx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalNot(t){const e=new cS(t.shape,KS);return this.compileAndRun(e,[t])}logicalAnd(t,e){if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Wx,"bool");const n=new Px(xx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}logicalOr(t,e){if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Ux,"bool");const n=new Px(Cx,t.shape,e.shape);return this.compileAndRun(n,[t,e],"bool")}select(t,e,n){const r=new eS(t.rank,e.shape,e.rank);return this.compileAndRun(r,[t,e,n],ke(e.dtype,n.dtype))}where(t){x.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const e=t.dataSync();return aO(t.shape,e)}topk(t,e,n){const r=t.dataSync();return lO(r,t.shape,t.dtype,e,n)}min(t,e){x.assertAxesAreInnerMostDims("min",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s);return this.reduce(o,"min",o.dtype).reshape(n)}minimum(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.minimum(t,e);const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(Gx,t.shape,e.shape):new Px(Ox,t.shape,e.shape);return this.compileAndRun(n,[t,e])}mod(t,e){const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(qx,t.shape,e.shape):new Px(kx,t.shape,e.shape);return this.compileAndRun(n,[t,e])}maximum(t,e){if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.maximum(t,e);const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(Hx,t.shape,e.shape):new Px(Sx,t.shape,e.shape);return this.compileAndRun(n,[t,e])}all(t,e){x.assertAxesAreInnerMostDims("all",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s);return this.reduce(o,"all",o.dtype).reshape(n)}any(t,e){x.assertAxesAreInnerMostDims("any",e,t.rank);const[n,i]=x.computeOutAndReduceShapes(t.shape,e),s=r.sizeFromShape(i),o=t.as2D(-1,s);return this.reduce(o,"any",o.dtype).reshape(n)}floorDiv(t,e){const n=fx;if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,Mx,"int32");const r=new Px(n,t.shape,e.shape);return this.compileAndRun(r,[t,e],"int32")}add(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,hx);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.add(t,e);const n=ke(t.dtype,e.dtype);if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,hx,n);const r=new Px(hx,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}packedUnaryOp(t,e,n){const r=new nO(t.shape,e);return this.compileAndRun(r,[t],n)}packedBinaryOp(t,e,n,r,i=!1){const s=new Kx(n,t.shape,e.shape,i);return this.compileAndRun(s,[t,e],r)}complexSeparableBinaryOp(t,e,n){const r=this.texData.get(t.dataId),i=this.texData.get(e.dataId),[s,o]=[[r.complexTensors.real,i.complexTensors.real],[r.complexTensors.imag,i.complexTensors.imag]].map(r=>{const[i,s]=r,o=this.makeComplexComponentTensorInfo(t,i),l=this.makeComplexComponentTensorInfo(e,s),a=new Px(n,t.shape,e.shape);return this.compileAndRun(a,[o,l],ke(i.dtype,s.dtype))}),l=this.complex(s,o);return s.dispose(),o.dispose(),l}makeComplexComponentTensorInfo(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}addN(t){if(1===t.length)return t[0];if(t.length>Z().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const e=Math.floor(t.length/2),n=this.addN(t.slice(0,e)),r=this.addN(t.slice(e));return this.addN([n,r])}const e=t.map(t=>t.dtype).reduce((t,e)=>ke(t,e)),n=t.map(t=>t.shape),r=Z().getBool("WEBGL_PACK")?new Lw(t[0].shape,n):new $w(t[0].shape,n);return this.compileAndRun(r,t,e)}subtract(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,dx);if(this.shouldExecuteOnCPU([t,e]))return this.cpuBackend.subtract(t,e);const n=ke(t.dtype,e.dtype);if(Z().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,e,dx,t.dtype);const r=new Px(dx,t.shape,e.shape);return this.compileAndRun(r,[t,e],n)}pow(t,e){const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(Dx,t.shape,e.shape):new Px(gx,t.shape,e.shape),r=ke(t.dtype,e.dtype);return this.compileAndRun(n,[t,e],r)}ceil(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,vS,t.dtype);const e=new cS(t.shape,vS);return this.compileAndRun(e,[t])}floor(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,_S,t.dtype);const e=new cS(t.shape,_S);return this.compileAndRun(e,[t])}sign(t){const e=new cS(t.shape,wS);return this.compileAndRun(e,[t])}isNaN(t){const e=new cS(t.shape,xS);return this.compileAndRun(e,[t],"bool")}isInf(t){const e=new cS(t.shape,CS);return this.compileAndRun(e,[t],"bool")}isFinite(t){const e=new cS(t.shape,SS);return this.compileAndRun(e,[t],"bool")}round(t){const e=new cS(t.shape,OS);return this.compileAndRun(e,[t])}exp(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,kS,t.dtype);const e=new cS(t.shape,kS);return this.compileAndRun(e,[t])}expm1(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,ES,t.dtype);const e=new cS(t.shape,ES);return this.compileAndRun(e,[t])}softmax(t,e){const n=r.parseAxisParam([e],t.shape),i=Mu(t,n),s=x.expandShapeToKeepDim(i.shape,n),o=this.subtract(t,i.reshape(s)),l=this.exp(o),a=this.sum(l,n).reshape(s);return Hr(l,a)}log(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,QS,t.dtype);const e=new cS(t.shape,TS);return this.compileAndRun(e,[t])}log1p(t){const e=new cS(t.shape,zS);return this.compileAndRun(e,[t])}sqrt(t){const e=new cS(t.shape,PS);return this.compileAndRun(e,[t])}rsqrt(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);const e=new cS(t.shape,IS);return this.compileAndRun(e,[t])}reciprocal(t){const e=new cS(t.shape,qS);return this.compileAndRun(e,[t])}relu(t){let e;return e=Z().getBool("WEBGL_PACK")?new nO(t.shape,JS):new cS(t.shape,fS),this.compileAndRun(e,[t])}relu6(t){let e;return e=Z().getBool("WEBGL_PACK")?new nO(t.shape,tO):new cS(t.shape,gS),this.compileAndRun(e,[t])}prelu(t,e){const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(Ax,t.shape,e.shape):new Px(zx,t.shape,e.shape);return this.compileAndRun(n,[t,e])}elu(t){if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,eO,t.dtype);const e=new cS(t.shape,mS);return this.compileAndRun(e,[t])}eluDer(t,e){const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(Nx,t.shape,e.shape):new Px(Tx,t.shape,e.shape);return this.compileAndRun(n,[t,e])}selu(t){const e=new cS(t.shape,bS);return this.compileAndRun(e,[t])}int(t){const e=new cS(t.shape,YS);return this.compileAndRun(e,[t],"int32")}clip(t,e,n){let r;const i=(r=Z().getBool("WEBGL_PACK_CLIP")?new Xx(t.shape):new Yx(t.shape)).getCustomSetupFunc(e,n);return this.compileAndRun(r,[t],null,i)}abs(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(Z().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,pS,t.dtype);const e=new cS(t.shape,pS);return this.compileAndRun(e,[t])}complexAbs(t){const e=this.texData.get(t.dataId),n=new Zx(t.shape),r=[this.makeComplexComponentTensorInfo(t,e.complexTensors.real),this.makeComplexComponentTensorInfo(t,e.complexTensors.imag)];return this.compileAndRun(n,r)}sigmoid(t){const e=new cS(t.shape,MS);return this.compileAndRun(e,[t])}softplus(t){const e=new cS(t.shape,DS);return this.compileAndRun(e,[t])}sin(t){const e=new cS(t.shape,AS);return this.compileAndRun(e,[t])}cos(t){const e=new cS(t.shape,NS);return this.compileAndRun(e,[t])}tan(t){const e=new cS(t.shape,RS);return this.compileAndRun(e,[t])}asin(t){const e=new cS(t.shape,FS);return this.compileAndRun(e,[t])}acos(t){const e=new cS(t.shape,$S);return this.compileAndRun(e,[t])}atan(t){const e=new cS(t.shape,LS);return this.compileAndRun(e,[t])}atan2(t,e){const n=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx(Rx,t.shape,e.shape):new Px(Ex,t.shape,e.shape);return this.compileAndRun(n,[t,e])}sinh(t){const e=new cS(t.shape,jS);return this.compileAndRun(e,[t])}cosh(t){const e=new cS(t.shape,BS);return this.compileAndRun(e,[t])}tanh(t){const e=new cS(t.shape,VS);return this.compileAndRun(e,[t])}asinh(t){const e=new cS(t.shape,WS);return this.compileAndRun(e,[t])}acosh(t){const e=new cS(t.shape,US);return this.compileAndRun(e,[t])}atanh(t){const e=new cS(t.shape,HS);return this.compileAndRun(e,[t])}erf(t){const e=new cS(t.shape,GS);return this.compileAndRun(e,[t])}step(t,e){const n=new cS(t.shape,function(t=0){return hS+`\n    return x > 0.0 ? 1.0 : float(${t});\n  `}(e));return this.compileAndRun(n,[t])}conv2dByMatMul(t,e,n,i,s,o){const l=t.shape,a=this.texData.get(t.dataId),u="channelsLast"===n.dataFormat,c=l[2]%2!=0&&!!a.isPacked;if((1==l[0]*l[1]*l[2]||1===n.outChannels)&&n.inChannels>gO||!Z().getBool("WEBGL_LAZILY_UNPACK")||!Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!c){const r=this.reshape(t,[1,u?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],n.inChannels]),a=this.reshape(e,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:r,b:a,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o}),n.outShape)}const h={dataId:t.dataId,shape:[1,u?l[0]*l[1]*(l[2]+1):l[0]*l[2]*(l[3]+1),n.inChannels],dtype:t.dtype},d=a.shape;a.shape=a.shape.slice(),a.shape[a.shape.length-2]++,r.assert(Iw(a.shape,h.shape),()=>`packed reshape ${a.shape} to ${h.shape} isn't free`);const p=this.reshape(e,[1,n.inChannels,n.outChannels]),f=this.fusedBatchMatMul({a:h,b:p,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o}),g=this.texData.get(f.dataId);return r.assert(g.isPacked,()=>"batchMatMul result is expected to be packed"),a.shape=d,g.shape=n.outShape,La().makeTensorFromDataId(f.dataId,n.outShape,f.dtype)}conv2dWithIm2Row(t,e,n,r,i,s){const{filterWidth:o,filterHeight:l,inChannels:a,outWidth:u,outHeight:c,dataFormat:h}=n,d="channelsLast"===h,p=o*l*a,f=c*u,g=[p,f],m=t.squeeze([0]),b=e.reshape([1,p,-1]),y=new PC(g,m.shape,n),v=this.compileAndRun(y,[m]).reshape([1,g[0],g[1]]),_=null!=r,w=null!=s,x=i?dO(i,!0):null,C=new RC(v.shape,[1,f,n.outChannels],!0,!1,_,x,w),S=[v,b];return r&&S.push(r),w&&S.push(s),this.compileAndRun(C,S).reshape(d?[1,c,u,n.outChannels]:[1,n.outChannels,c,u])}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n,r,i,s);if(Z().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n,r,i,s);const o=null!=r,l=null!=s,a=i?dO(i,!1):null,u=new lC(n,o,a,l),c=[t,e];return r&&c.push(r),s&&c.push(s),this.compileAndRun(u,c)}conv2d(t,e,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(t,e,n);if(Z().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,e,n);const r=new lC(n);return this.compileAndRun(r,[t,e])}conv2dDerInput(t,e,n){const r=new nC(n);return this.compileAndRun(r,[t,e])}conv2dDerFilter(t,e,n){const r=new eC(n);return this.compileAndRun(r,[t,e])}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:i,preluActivationWeights:s}){const o=Z().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1,l=i?dO(i,o):null,a=[t,e],u=null!=r,c=null!=s;let h;return u&&a.push(r),c&&a.push(s),o?(h=new cC(n,u,l,c),this.compileAndRun(h,a)):(h=new uC(n,u,l,c),this.compileAndRun(h,a))}depthwiseConv2D(t,e,n){let r;return Z().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new cC(n),this.compileAndRun(r,[t,e])):(r=new uC(n),this.compileAndRun(r,[t,e]))}depthwiseConv2DDerInput(t,e,n){const r=new oC(n);return this.compileAndRun(r,[t,e])}depthwiseConv2DDerFilter(t,e,n){const r=new sC(n);return this.compileAndRun(r,[t,e])}conv3d(t,e,n){const r=new aC(n);return this.compileAndRun(r,[t,e])}conv3dDerInput(t,e,n){const r=new iC(n);return this.compileAndRun(r,[t,e])}conv3dDerFilter(t,e,n){const r=new rC(n);return this.compileAndRun(r,[t,e])}maxPool(t,e){const n=new VC(e,"max",!1);return this.compileAndRun(n,[t])}avgPool(t,e){const n=new VC(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}maxPoolBackprop(t,e,n,r){const i=new VC(r,"max",!0),s=this.compileAndRun(i,[e]),o=new AC(r),l=this.compileAndRun(o,[t,s],e.dtype);return s.dispose(),l}avgPoolBackprop(t,e,n){const r=new ix(n);return this.compileAndRun(r,[t],e.dtype)}cast(t,e){return x.castTensor(t,e,this)}unstack(t,e){const n=t.shape[e],r=new Array(t.rank-1);let i=0;for(let a=0;a<t.rank;a++)a!==e&&(r[i++]=t.shape[a]);const s=new Array(t.rank).fill(0),o=t.shape.slice();o[e]=1;const l=new Array(n);for(let a=0;a<l.length;a++)s[e]=a,l[a]=this.slice(t,s,o).reshape(r);return l}avgPool3d(t,e){const n=new WC(e,"avg",!1);return this.compileAndRun(n,[t],"float32")}avgPool3dBackprop(t,e,n){const r=new sx(n);return this.compileAndRun(r,[t],e.dtype)}maxPool3d(t,e){const n=new WC(e,"max",!1);return this.compileAndRun(n,[t],"float32")}maxPool3dBackprop(t,e,n,r){const i=new WC(r,"max",!0),s=this.compileAndRun(i,[e]),o=new NC(r),l=this.compileAndRun(o,[t,s],e.dtype);return s.dispose(),l}reshape(t,e){const n=this.texData.get(t.dataId);if(n.isPacked&&!Iw(t.shape,e)&&(null===n.texture||!Iw(n.shape,e))){const n=this.packedReshape(t,e);return La().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}return x.reshapeTensor(t,e)}resizeBilinear(t,e,n,r){const i=Z().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new KC(t.shape,e,n,r):new qC(t.shape,e,n,r);return this.compileAndRun(i,[t],"float32")}resizeBilinearBackprop(t,e,n){const r=new GC(t,e,n);return this.compileAndRun(r,[t])}resizeNearestNeighbor(t,e,n,r){const i=new XC(t.shape,e,n,r);return this.compileAndRun(i,[t])}resizeNearestNeighborBackprop(t,e,n){const r=new YC(t,e,n);return this.compileAndRun(r,[t])}multinomial(t,e,n,r){const i=e?t:Fc(t),s=new FC(i.shape[0],i.shape[1],n),o=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],"int32",o)}oneHot(t,e,n,r){const i=new $C(t.size,e,n,r);return this.compileAndRun(i,[t])}diag(t){const e=new bC(t.size);return this.compileAndRun(e,[t])}cropAndResize(t,e,n,r,i,s){const o=new hC(t.shape,e.shape,r,i,s);return this.compileAndRun(o,[t,e,n],"float32")}depthToSpace(t,e,n){r.assert(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`);const i=t.shape[0],s=("NHWC"===n?t.shape[1]:t.shape[2])*e,o=("NHWC"===n?t.shape[2]:t.shape[3])*e,l=("NHWC"===n?t.shape[3]:t.shape[1])/(e*e),a=new mC("NHWC"===n?[i,s,o,l]:[i,l,s,o],e,n);return this.compileAndRun(a,[t])}split(t,e,n){return sO(t,e,n)}scatterND(t,e,n){const{sliceRank:r,numUpdates:i,sliceSize:s,strides:o,outputSize:l}=x.calculateShapes(e,t,n),a=[l/s,s],u=t.reshape([i,r]),c=e.reshape([i,s]);if(0===l)return x.reshapeTensor(yr([]),n);const h=_r(0),d=new JC(i,r,u.rank,c.rank,o,a);return this.compileAndRun(d,[c,u,h]).reshape(n)}sparseToDense(t,e,n,r){const{sliceRank:i,numUpdates:s,strides:o,outputSize:l}=x.calculateShapes(e,t,n),a=new JC(s,i,t.rank,e.rank,o,[l,1],!1);return this.compileAndRun(a,[e,t,r]).reshape(n)}fft(t){return this.fftImpl(t,!1)}ifft(t){return this.fftImpl(t,!0)}fftImpl(t,e){const n=this.texData.get(t.dataId),r=new CC(xC.REAL,t.shape,e),i=new CC(xC.IMAG,t.shape,e),s=[this.makeComplexComponentTensorInfo(t,n.complexTensors.real),this.makeComplexComponentTensorInfo(t,n.complexTensors.imag)],o=this.compileAndRun(r,s),l=this.compileAndRun(i,s),a=this.complex(o,l).as2D(t.shape[0],t.shape[1]);return o.dispose(),l.dispose(),a}gatherND(t,e){const n=e.shape,r=n[n.length-1],[i,s,o,l]=x.prepareAndValidate(t,e),a=e.reshape([s,r]),u=t.reshape([t.size/o,o]),c=new kC(r,l,[s,o]);return this.compileAndRun(c,[u,a]).reshape(i)}fill(t,e,n){if("string"===(n=n||r.inferDtype(e))){const i=r.getArrayFromDType(n,r.sizeFromShape(t));return i.fill(e),La().makeTensor(i,t,n,this)}{const r=new SC(t,e),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[],n,i)}}onesLike(t){if("string"===t.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)}zerosLike(t){return this.fill(t.shape,"string"===t.dtype?"":0,t.dtype)}linspace(t,e,n){return x.linspaceImpl(t,e,n)}makeTensorInfo(t,e){const n=this.write(null,t,e);return this.texData.get(n).usage=null,{dataId:n,shape:t,dtype:e}}makeOutput(t,e){const{dataId:n}=this.makeTensorInfo(t,e);return La().makeTensorFromDataId(n,t,e,this)}unpackTensor(t){const e=new rO(t.shape);return this.runWebGLProgram(e,[t],t.dtype)}packTensor(t){const e=new LC(t.shape);return this.runWebGLProgram(e,[t],t.dtype,null,!0)}packedReshape(t,e){const n=[Ew(t.shape),...Tw(t.shape)],r={dtype:t.dtype,shape:n,dataId:t.dataId},i=[Ew(e),...Tw(e)],s=new HC(i,n),o=this.runWebGLProgram(s,[r],t.dtype,null,!0);return{dataId:o.dataId,shape:e,dtype:o.dtype}}decode(t){const e=this.texData.get(t),{isPacked:n,shape:r,dtype:i}=e,s=zw(r);let o;return o=n?new gC(s):new fC(s),{dtype:i,shape:r,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:t}],i,null,!0).dataId}}runWebGLProgram(t,e,n,i,s=!1){const o=this.makeTensorInfo(t.outputShape,n),l=this.texData.get(o.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===aw.DENSE){const e=dw(t.outputShape);l.texShape=e.map(t=>2*t)}if(null!=t.outTexUsage&&(l.usage=t.outTexUsage),0===r.sizeFromShape(o.shape))return l.values=r.getTypedArrayFromDType(o.dtype,0),o;const a=[],u=e.map(e=>{if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(e.dataId);if(null==n.texture){if(!t.packedInputs&&r.sizeFromShape(e.shape)<=Z().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:e.shape,texData:null,isUniform:!0,uniformValues:n.values};t.packedInputs&&(n.isPacked=!0,n.shape=e.shape)}else if(!!n.isPacked!=!!t.packedInputs)e=n.isPacked?this.unpackTensor(e):this.packTensor(e),a.push(e),n=this.texData.get(e.dataId);else if(n.isPacked&&!Iw(n.shape,e.shape)){const t=e,r=e.shape;e.shape=n.shape,e=this.packedReshape(e,r),a.push(e),n=this.texData.get(e.dataId),t.shape=r}return this.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1}});this.uploadToGPU(o.dataId);const c={shape:o.shape,texData:l,isUniform:!1},h=function(t,e,n){let r="";return u.concat(c).forEach(t=>{r+=`${t.shape}_${t.isUniform?"uniform":t.texData.texShape}_${null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0}`}),t.constructor.name+"_"+r+"_"+t.userCode}(t),d=this.getAndSaveBinary(h,()=>(function(t,e,n,i){const s=e.userCode,o=u.map((t,n)=>{const r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.isPacked,flatOffset:null};return null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0&&(r.flatOffset=t.texData.slice.flatOffset),{name:e.variableNames[n],shapeInfo:r}}),l=o.map(t=>t.shapeInfo),a={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},c=function(t,e,n,i){const s=[];t.forEach(t=>{const e=r.sizeFromShape(t.shapeInfo.logicalShape);t.shapeInfo.isUniform?s.push(`uniform float ${t.name}${e>1?`[${e}]`:""};`):(s.push(`uniform sampler2D ${t.name};`),s.push(`uniform int offset${t.name};`))});const o=s.join("\n"),l=t.map(t=>(function(t,e,n=!1){let i="";return i+=n?function t(e){switch(e.shapeInfo.logicalShape.length){case 0:return function(t){const n=e.name;return`\n    vec4 ${"get"+n.charAt(0).toUpperCase()+n.slice(1)}() {\n      return ${Ww().texture2D}(${n}, halfCR);\n    }\n  `}();case 1:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],s=Ww();return`\n    vec4 ${n}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${i[0]}, ${i[1]}, index);\n      return ${s.texture2D}(${e}, uv);\n    }\n  `}(e);case 2:return function(t){const e=t.shapeInfo.logicalShape,n=t.name,i="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,o=s[0],l=s[1],a=Ww();if(null!=s&&r.arraysEqual(e,s))return`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${o}.0);\n\n        return ${a.texture2D}(${n}, uv);\n      }\n    `;const u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${Math.ceil(e[1]/2)}, ${u[0]}, ${u[1]}, row, col);\n      return ${a.texture2D}(${n}, uv);\n    }\n  `}(e);case 3:return function(e){const n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=e.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];if(1===n[0]){const r=[1,2],s=ex(e,n.slice(1)),o=["b","row","col"];return`\n        ${t(s)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${nx(o,r)});\n        }\n      `}const l=o[0],a=o[1],u=Math.ceil(n[2]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${a}, ${u*Math.ceil(n[1]/2)}, ${u}, b, row, col);\n      return ${Ww().texture2D}(${r}, uv);\n    }\n  `}(e);default:return function(t){const e=t.shapeInfo.logicalShape,n=e.length,r=t.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),s=t.shapeInfo.texShape,o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=o[0],a=o[1],u=Math.ceil(e[n-1]/2);let c=u*Math.ceil(e[n-2]/2),h="int b, int row, int col",d=`b * ${c} + (row / 2) * ${u} + (col / 2)`;for(let p=2;p<n-1;p++)h=`int b${p}, `+h,d=`b${p} * ${c*=e[n-p-1]} + `+d;return`\n    vec4 ${i}(${h}) {\n      int index = ${d};\n      int texR = index / ${a};\n      int texC = index - texR * ${a};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}, ${l});\n      return ${Ww().texture2D}(${r}, uv);\n    }\n  `}(e)}}(t):function t(e){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${n}() {return ${e};}`;const[r,i]=t.shapeInfo.texShape;if(1===r&&1===i)return`\n      float ${n}() {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const[s,o]=t.shapeInfo.texShape;return`\n    float ${n}() {\n      vec2 uv = uvFromFlat(${s}, ${o}, ${Qw(e)});\n      return sampleTexture(${e}, uv);\n    }\n  `}(e);case 1:return function(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`\n      float ${n}(int index) {\n        ${Jw(t)}\n      }\n    `;const r=t.shapeInfo.texShape,i=r[0],s=r[1];if(1===s&&1===i)return`\n      float ${n}(int index) {\n        return sampleTexture(${e}, halfCR);\n      }\n    `;const o=Qw(e);return 1===s?`\n      float ${n}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${o}) + 0.5) / ${i}.0);\n        return sampleTexture(${e}, uv);\n      }\n    `:1===i?`\n      float ${n}(int index) {\n        vec2 uv = vec2((float(index + ${o}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${e}, uv);\n      }\n    `:`\n    float ${n}(int index) {\n      vec2 uv = uvFromFlat(${i}, ${s}, index + ${o});\n      return sampleTexture(${e}, uv);\n    }\n  `}(e);case 2:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=e.shapeInfo.texShape;if(null!=o&&r.arraysEqual(n,o))return`\n    float ${s}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${o[0]}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `;const{newShape:l,keptDims:a}=r.squeezeShape(n);if(l.length<n.length){const n=ex(e,l),r=["row","col"];return`\n      ${t(n)}\n      float ${s}(int row, int col) {\n        return ${s}(${nx(r,a)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${Jw(e)}\n      }\n    `;const u=o[0],c=o[1],h=Qw(i);return 1===c?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:1===u?`\n    float ${s}(int row, int col) {\n      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n  float ${s}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${h};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${i}, uv);\n  }\n`}(e);case 3:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n[1]*n[2],l=n[2],{newShape:a,keptDims:u}=r.squeezeShape(n);if(a.length<n.length){const n=ex(e,a),r=["row","col","depth"];return`\n        ${t(n)}\n        float ${s}(int row, int col, int depth) {\n          return ${s}(${nx(r,u)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${l}, 1)));\n        ${Jw(e)}\n      }\n    `;const c=e.shapeInfo.texShape,h=c[0],d=c[1],p=e.shapeInfo.flatOffset;return d===o&&null==p?`\n        float ${s}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${l}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${h}.0);\n          return sampleTexture(${i}, uv);\n        }\n      `:d===l&&null==p?`\n    float ${s}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${h}.0);\n      return sampleTexture(${i}, uv);\n    }\n  `:`\n      float ${s}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${l} + depth + ${Qw(i)};\n        vec2 uv = uvFromFlat(${h}, ${d}, index);\n        return sampleTexture(${i}, uv);\n      }\n  `}(e);case 4:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n[3],l=n[2]*o,a=n[1]*l,{newShape:u,keptDims:c}=r.squeezeShape(n);if(u.length<n.length){const n=ex(e,u),r=["row","col","depth","depth2"];return`\n      ${t(n)}\n      float ${s}(int row, int col, int depth, int depth2) {\n        return ${s}(${nx(r,c)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${a}, ${l}, ${o}, 1)));\n        ${Jw(e)}\n      }\n    `;const h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],f=d[1];return f===a&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${l}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${p}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:f===o&&null==h?`\n      float ${s}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${p}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${a} + col * ${l} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${p}, ${f}, index + ${Qw(i)});\n      return sampleTexture(${i}, uv);\n    }\n  `}(e);case 5:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),o=n[4],l=n[3]*o,a=n[2]*l,u=n[1]*a,{newShape:c,keptDims:h}=r.squeezeShape(n);if(c.length<n.length){const n=ex(e,c),r=["row","col","depth","depth2","depth3"];return`\n      ${t(n)}\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        return ${s}(${nx(r,h)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${u}, ${a}, ${l}, ${o})) +\n          depth3;\n        ${Jw(e)}\n      }\n    `;const d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],g=p[1];return g===u&&null==d?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${l}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${g}.0, ${f}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:g===o&&null==d?`\n      float ${s}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]},\n               ${n[2]*n[3]}, ${n[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${g}.0, ${f}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${u} + col * ${a} + depth * ${l} +\n          depth2 * ${o} + depth3 + ${Qw(i)};\n      vec2 uv = uvFromFlat(${f}, ${g}, index);\n      return sampleTexture(${i}, uv);\n    }\n  `}(e);case 6:return function(e){const n=e.shapeInfo.logicalShape,i=e.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),{newShape:o,keptDims:l}=r.squeezeShape(n);if(o.length<n.length){const n=ex(e,o),r=["row","col","depth","depth2","depth3","depth4"];return`\n      ${t(n)}\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${s}(${nx(r,l)});\n      }\n    `}const a=n[5],u=n[4]*a,c=n[3]*u,h=n[2]*c,d=n[1]*h;if(e.shapeInfo.isUniform)return`\n      float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${d}, ${h}, ${c}, ${u})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${Jw(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,g=f[0],m=f[1];return m===d&&null==p?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${h}, ${c}, ${u}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${m}.0, ${g}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:m===a&&null==p?`\n      float ${s}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${n[1]*n[2]*n[3]*n[4]},\n               ${n[2]*n[3]*n[4]},\n               ${n[3]*n[4]},\n               ${n[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${m}.0, ${g}.0);\n        return sampleTexture(${i}, uv);\n      }\n    `:`\n    float ${s}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${d} + col * ${h} + depth * ${c} +\n          depth2 * ${u} + depth3 * ${a} + depth4 + ${Qw(i)};\n      vec2 uv = uvFromFlat(${g}, ${m}, index);\n      return sampleTexture(${i}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling`+" is not yet supported")}}(t),t.shapeInfo.logicalShape.length<=e.logicalShape.length&&(i+=n?function(t,e){const n=t.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length,a=qw(t.shapeInfo.logicalShape,e.logicalShape),u=tx(l),c=l-o;let h;const d=["x","y","z","w","u","v"];h=0===o?"":l<2&&a.length>=1?"coords = 0;":a.map(t=>`coords.${d[t+c]} = 0;`).join("\n");let p="";p=l<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>`coords.${d[e+c]}`).join(", ");let f="return outputValue;";const g=1===r.sizeFromShape(t.shapeInfo.logicalShape),m=1===r.sizeFromShape(e.logicalShape);if(1!==o||g||m){if(g&&!m)f=1===l?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(a.length){const t=o-2,e=o-1;a.indexOf(t)>-1&&a.indexOf(e)>-1?f="return vec4(outputValue.x);":a.indexOf(t)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(e)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${s}() {\n      ${u} coords = getOutputCoords();\n      ${h}\n      vec4 outputValue = get${i}(${p});\n      ${f}\n    }\n  `}(t,e):function(t,e){const n=t.name,i=n.charAt(0).toUpperCase()+n.slice(1),s="get"+i+"AtOutCoords",o=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&o===l&&null==t.shapeInfo.flatOffset&&r.arraysEqual(t.shapeInfo.texShape,e.texShape))return`\n      float ${s}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const a=tx(l),u=qw(t.shapeInfo.logicalShape,e.logicalShape),c=l-o;let h;const d=["x","y","z","w","u","v"];let p="";return`\n    float ${s}() {\n      ${a} coords = getOutputCoords();\n      ${h=0===o?"":l<2&&u.length>=1?"coords = 0;":u.map(t=>`coords.${d[t+c]} = 0;`).join("\n")}\n      return get${i}(${p=l<2&&o>0?"coords":t.shapeInfo.logicalShape.map((t,e)=>`coords.${d[e+c]}`).join(", ")});\n    }\n  `}(t,e)),i})(t,e,i)).join("\n"),a=e.texShape,u=Ww(),c=function(t){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${t.texture2D}(textureSampler, uv).r;\n    }\n  `}(u);let h,d,p=function(t){return`${t.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${t.varyingFs} vec2 resultUV;\n    ${t.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${t.defineSpecialNaN}\n    ${t.defineSpecialInf}\n    ${t.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${Kw}\n    ${Yw}\n    ${Xw}\n  `}(u);return e.isPacked?(h=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return 1===n[0]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${n[1]}.0);\n      }\n    `:1===n[1]?`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${n[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      return 2 * (resTexRC.x * ${n[1]} + resTexRC.y);\n    }\n  `}(0,e);case 2:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(r.arraysEqual(t,e))return`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));\n      }\n    `;const i=Math.ceil(t[1]/2);return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(t,e);case 3:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[2]/2),i=r*Math.ceil(t[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(t,e);default:return function(t,e){const n=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],r=Math.ceil(t[t.length-1]/2),i=r*Math.ceil(t[t.length-2]/2);let s=i,o="",l="b, r, c";for(let a=2;a<t.length-1;a++)o=`\n      int b${a} = index / ${s*=t[t.length-a-1]};\n      index -= b${a} * ${s};\n    `+o,l=`b${a}, `+l;return`\n    ivec${t.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${o}\n\n      int b = index / ${i};\n      index -= b * ${i};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${t.length}(${l});\n    }\n  `}(t,e)}}(e.logicalShape,a),d=function(t){return`\n    void setOutput(vec4 val) {\n      ${t.output} = val;\n    }\n  `}(u)):(h=function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return 1===e[0]?`\n      int getOutputCoords() {\n        return int(resultUV.x * ${e[1]}.0);\n      }\n    `:1===e[1]?`\n      int getOutputCoords() {\n        return int(resultUV.y * ${e[0]}.0);\n      }\n    `:`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${e[0]}, ${e[1]}));\n      return resTexRC.x * ${e[1]} + resTexRC.y;\n    }\n  `;case 2:return r.arraysEqual(n=t,i=e)?`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));\n      }\n    `:1===n[1]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${i[0]}, ${i[1]}));\n        int index = resTexRC.x * ${i[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===n[0]?`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${i[0]}, ${i[1]}));\n        int index = resTexRC.x * ${i[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${i[0]}, ${i[1]}));\n      int index = resTexRC.x * ${i[1]} + resTexRC.y;\n      int r = index / ${n[1]};\n      int c = index - r * ${n[1]};\n      return ivec2(r, c);\n    }\n  `;case 3:return function(e,n){const r=Uw(["r","c","d"],t);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(0,e);case 4:return function(e,n){const r=Uw(["r","c","d","d2"],t);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(0,e);case 5:return function(e,n){const r=Uw(["r","c","d","d2","d3"],t);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},\n                             ${n[1]}));\n\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(0,e);case 6:return function(e,n){const r=Uw(["r","c","d","d2","d3","d4"],t);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${n[0]}, ${n[1]}));\n      int index = resTexRC.x * ${n[1]} + resTexRC.y;\n\n      ${r}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(0,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}var n,i}(e.logicalShape,a),d=function(t){return`\n    void setOutput(float val) {\n      ${t.output} = vec4(val, 0, 0, 0);\n    }\n  `}(u)),i&&(p+=Zw),[p,c,d,o,h,l,n].join("\n")}(o,a,s,e.packedInputs),h=t.createProgram(c);let d=null;const p=t.getUniformLocation(h,"NAN",!1);1===Z().getNumber("WEBGL_VERSION")&&(d=t.getUniformLocation(h,"INFINITY",!1));const f={};for(let r=0;r<e.variableNames.length;r++){const n=e.variableNames[r],i=!1;f[n]=t.getUniformLocation(h,n,i),f[`offset${n}`]=t.getUniformLocation(h,`offset${n}`,i)}return{program:e,source:c,webGLProgram:h,uniformLocations:f,inShapeInfos:l,outShapeInfo:a,infLoc:d,nanLoc:p}})(this.gpgpu,t,0,c)),p=null!=this.activeTimers;let f;if(p&&(f=this.startTimer()),function(t,e,n,i,s){zC(e.inShapeInfos,n),zC([e.outShapeInfo],[i]);const o=i.texData.texture,l=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(o,l[0],l[1]):t.setOutputMatrixTexture(o,l[0],l[1]),t.setProgram(e.webGLProgram),1===Z().getNumber("WEBGL_VERSION")&&null!==e.infLoc&&t.gl.uniform1f(e.infLoc,1/0),null!==e.nanLoc&&t.gl.uniform1f(e.nanLoc,NaN),n.forEach((n,i)=>{const s=e.program.variableNames[i],o=e.uniformLocations[s],l=e.uniformLocations[`offset${s}`];if(null!=o)if(n.isUniform)if(r.sizeFromShape(n.shape)<2)t.gl.uniform1f(o,n.uniformValues[0]);else{let e=n.uniformValues;e instanceof Float32Array||(e=new Float32Array(e)),t.gl.uniform1fv(o,e)}else null!=n.texData.slice&&null!=l&&t.gl.uniform1i(l,n.texData.slice.flatOffset),t.setInputMatrixTexture(n.texData.texture,o,i)}),null!=s&&s(t,e.webGLProgram),t.executeProgram()}(this.gpgpu,d,u,c,i),a.forEach(t=>this.disposeData(t.dataId)),p&&(f=this.endTimer(f),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(f)})),!Z().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&!1===s){const t=this.unpackTensor(o);return this.disposeData(o.dataId),t}return o}compileAndRun(t,e,n,r,i=!1){const s=this.runWebGLProgram(t,e,n=n||e[0].dtype,r,i);return La().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}getAndSaveBinary(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Z().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(t=>{this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram),delete this.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Va(()=>{if(!Z().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Z().getBool("DEBUG");Z().set("DEBUG",!1);const e=this.abs(_r(1e-8)).dataSync()[0];if(Z().set("DEBUG",t),e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?uO:cO}uploadToGPU(t){const e=this.texData.get(t),{shape:n,dtype:i,values:s,texture:o,usage:l,isPacked:a}=e;if(null!=o)return;const u=null!=this.activeTimers;let c;u&&(c=r.now());let h=e.texShape;if(null==h&&(h=function(t,e=!1){let n=Z().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(n*=2,1===(t=t.map((e,n)=>n>=t.length-2?r.nearestLargerEven(t[n]):t[n])).length&&(t=[2,t[0]])),2!==t.length){const e=r.squeezeShape(t);t=e.newShape}let i=r.sizeFromShape(t);if(t.length<=1&&i<=n)return[1,i];if(2===t.length&&t[0]<=n&&t[1]<=n)return t;if(3===t.length&&t[0]*t[1]<=n&&t[2]<=n)return[t[0]*t[1],t[2]];if(3===t.length&&t[0]<=n&&t[1]*t[2]<=n)return[t[0],t[1]*t[2]];if(4===t.length&&t[0]*t[1]*t[2]<=n&&t[3]<=n)return[t[0]*t[1]*t[2],t[3]];if(4===t.length&&t[0]<=n&&t[1]*t[2]*t[3]<=n)return[t[0],t[1]*t[2]*t[3]];if(e){const e=Ew(t);let n=2,s=2;return t.length&&([n,s]=Tw(t)),r.sizeToSquarishShape(i=e*(n/2)*(s/2)).map(t=>2*t)}return r.sizeToSquarishShape(i)}(n,a),e.texShape=h),null!=s){const t=zw(n);let o,l=h[1],d=h[0];const p=s instanceof Uint8Array;a?([l,d]=pw(h[0],h[1]),o=new wC(t,[d,l],p)):o=new _C(t,[d,l],p);const f=this.makeTensorInfo([d,l],i);this.texData.get(f.dataId).usage=p?uw.PIXELS:uw.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),l,d,s);const g=this.runWebGLProgram(o,[f],i,null,!0),m=this.texData.get(g.dataId);e.texture=m.texture,e.texShape=m.texShape,e.isPacked=m.isPacked,e.usage=m.usage,this.disposeData(f.dataId),this.texData.delete(g.dataId),e.values=null,u&&(this.uploadWaitMs+=r.now()-c)}else{const t=this.acquireTexture(h,l,i,a);e.texture=t}}convertAndCacheOnCPU(t,e){const n=this.texData.get(t),{dtype:r}=n;return this.releaseGPUData(t),null!=e&&(n.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){const n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length);for(let e=0;e<n.length;++e)n[e]=Math.round(t[e]);return n}throw new Error(`Unknown dtype ${e}`)}(e,r)),n.values}acquireTexture(t,e,n,r){if(this.numBytesInGPU+=this.computeBytes(t,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const t=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${t} MB, `+"most likely due to a memory leak")}return this.textureManager.acquireTexture(t,e,r)}computeBytes(t,e){return t[0]*t[1]*r.bytesPerElement(e)}}const bO={kernelName:un,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{a:n,b:r}=t;return function(t,e,n){let r=new Px("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",t.shape,e.shape);return Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&(r=new Kx("\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",t.shape,e.shape,!0)),n.runWebGLProgram(r,[t,e],"float32")}(n,r,e)}};class yO{constructor(t){this.variableNames=["A"];const e=Ww(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${e.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class vO{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const e=Ww(),[n,r]=t;this.outputShape=t,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${e.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${e.output} = result;\n      }\n    `}}const _O={kernelName:er,backendName:"webgl",kernelFunc:function(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:i}=e;const{numChannels:s}=r,o="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,l="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,[a,u]=o?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,a],h=[u,a,s];(l||o)&&(null==wO&&(wO=document.createElement("canvas").getContext("2d")),wO.canvas.width=a,wO.canvas.height=u,wO.drawImage(i,0,0,a,u),i=wO.canvas);const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=uw.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);const p=Z().getBool("WEBGL_PACK")?new vO(h):new yO(h),f=n.runWebGLProgram(p,[d],"int32");return n.disposeData(d.dataId),f}};let wO;const{maxImpl:xO,transposeImpl:CO}=B;function SO(t,e,n){const r=n.texData.get(t.dataId);return!r.isPacked||Iw(t.shape,e)||null!==r.texture&&Iw(r.shape,e)?{dataId:t.dataId,shape:e,dtype:t.dtype}:function(t,e,n){const r=[Ew(t.shape),...Tw(t.shape)],i={dtype:t.dtype,shape:r,dataId:t.dataId},s=[Ew(e),...Tw(e)],o=new HC(s,r),l=n.runWebGLProgram(o,[i],t.dtype,null,!0);return{dataId:l.dataId,shape:e,dtype:l.dtype}}(t,e,n)}class OO{constructor(t,e){this.variableNames=["A"];const n=new Array(t.length);for(let s=0;s<n.length;s++)n[s]=t[e[s]];this.outputShape=n,this.rank=n.length;const r=tx(this.rank),i=function(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}class kO{constructor(t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(t.length);for(let u=0;u<n.length;u++)n[u]=t[e[u]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const r=tx(this.rank),i=Bw("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=i[u];const o=`vec2(${s.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${n[this.rank-1]}`,a=`getChannel(getA(${s.join()}), ${o})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${a};\n      if(${l}) {\n        result[1] = ${a};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${a};\n        if(${l}) {\n          result[3] = ${a};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function EO(t,e,n){const r=Z().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kO(t.shape,e):new OO(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}const TO={kernelName:Rn,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{x.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=n,a=e,u=a.readSync(r.dataId),c=a.readSync(i.dataId);return C.nonMaxSuppressionV3(u,c,s,o,l)}},zO=C.nonMaxSuppressionV5,PO=[{kernelName:On,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{reductionIndices:s}=e,o=n,l=i.shape.length;let a=r.parseAxisParam(s,i.shape);const u=x.getAxesPermutation(a,l),c=null!=u,h=o.shouldExecuteOnCPU([i]);let d=i;if(c){if(h){const t=o.texData.get(d.dataId).values,e=new Array(l);for(let r=0;r<e.length;r++)e[r]=i.shape[u[r]];const n=CO(t,i.shape,i.dtype,u,e);d=o.makeTensorInfo(e,i.dtype),o.texData.get(d.dataId).values=n}else d=EO(i,u,o);a=x.getInnerMostAxes(a.length,l)}x.assertAxesAreInnerMostDims("max",a,l);const[p,f]=x.computeOutAndReduceShapes(d.shape,a);let g;if(h){const t=o.texData.get(d.dataId),e=xO(t.values,r.sizeFromShape(f),p,i.dtype);g=o.makeTensorInfo(p,i.dtype),o.texData.get(g.dataId).values=e}else g=function(t,e,n,i){const s=r.sizeFromShape(e),o=SO(t,[r.sizeFromShape(t.shape)/s,s],i),l=function t(e,n,r,i){const[s,o]=e.shape,l=x.computeOptimalWindowSize(o),a=new UC({windowSize:l,inSize:o,batchSize:s},r),u=i.runWebGLProgram(a,[e],n);return 1===u.shape[1]?u:t(u,n,r,i)}(o,t.dtype,"max",i);return o.dataId!==t.dataId&&i.disposeData(o.dataId),SO(l,n,i)}(d,f,p,o);return c&&o.disposeData(d.dataId),g}},_O,bO,TO,{kernelName:Fn,backendName:"webgl",kernelFunc:({inputs:t,backend:e,attrs:n})=>{x.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{boxes:r,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:a}=n,u=e,c=u.readSync(r.dataId),h=u.readSync(i.dataId),d=s,p=o,f=l,g=a,{selectedIndices:m,selectedScores:b}=zO(c,h,d,p,f,g);return[m,b]}},{kernelName:Zn,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e,i=new cS(n.shape,"return x * x;");return r.runWebGLProgram(i,[n],n.dtype)}},{kernelName:Xn,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{a:n,b:r}=t,i=e,s=Z().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Kx("return (a - b) * (a - b);",n.shape,r.shape):new Px("return (a - b) * (a - b);",n.shape,r.shape);return i.compileAndRun(s,[n,r])}},{kernelName:tr,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{perm:i}=e,s=n,o=new Array(r.shape.length);for(let a=0;a<o.length;a++)o[a]=r.shape[i[a]];let l;if(s.shouldExecuteOnCPU([r])){const t=s.texData.get(r.dataId),e=CO(t.values,r.shape,r.dtype,i,o);l=s.makeTensorInfo(o,r.dtype),s.texData.get(l.dataId).values=e}else l=EO(r,i,s);return l}},{kernelName:In,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:i}=t,{filterSize:s,strides:o,pad:l,includeBatchInIndex:a}=e,u=n;r.assert(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);const c=[1,1];r.assert(x.eitherStridesOrDilationsAreOne(o,c),()=>"Error in maxPool: Either strides or dilations must be 1. "+`Got strides ${o} and dilations '${c}'`);const h=x.computePool2DInfo(i.shape,s,o,c,l),[d,p]=function(t,e,n,r){let i=new VC(n,"max",!1);const s=r.runWebGLProgram(i,[t],"float32");return i=new VC(n,"max",!0,!0,e),[s,r.runWebGLProgram(i,[t],"float32")]}(i,a,h,u);return[d,p]}}];for(const Ak of PO)lt(Ak);s.isBrowser()&&Qa("webgl",()=>new mO,2);const IO="aqua",MO=2,DO="tryResNetButton",AO="[New] Try ResNet50",NO="width:100%;text-decoration:underline;",RO="background:#e61d5f;";function FO({y:t,x:e}){return[t,e]}function $O(t,e,n,r,i){t.beginPath(),t.arc(n,e,r,0,2*Math.PI),t.fillStyle=i,t.fill()}n.d(e,"a",function(){return tk});var LO,jO=-1,BO=4/3,VO=3,WO=4,UO=600,HO=500,GO=2,qO=.5,KO=16,YO=500,XO=1,ZO=32,QO=250,JO={algorithm:"multi-pose",input:{architecture:"MobileNetV1",outputStride:KO,inputResolution:YO,multiplier:qO,quantBytes:GO},singlePoseDetection:{minPoseConfidence:.1,minPartConfidence:.5},multiPoseDetection:{maxPoseDetections:5,minPoseConfidence:.15,minPartConfidence:.1,nmsRadius:30},output:{showVideo:!0,showSkeleton:!0,showPoints:!0,showBoundingBox:!1},net:null};class tk{constructor(t,e,n,r,i,s){this.route=t,this.store$=e,this.songServe=n,this.batchActionServe=r,this.messageServe=i,this.memberServe=s,this.description={short:"",long:""},this.controlDesc={isExpand:!1,label:"\u5c55\u5f00",iconCls:"down"},this.currentIndex=-1,this.destroy$=new H.a,this.route.data.pipe(Object(W.map)(t=>t.sheetInfo)).subscribe(t=>{this.sheetInfo=t,t.description&&this.changeDesc(t.description),this.listenCurrent()})}ngOnInit(){}listenCurrent(){this.store$.pipe(Object(U.z)(G.f),Object(U.z)(G.c),Object(W.takeUntil)(this.destroy$)).subscribe(t=>{this.currentSong=t,this.currentIndex=t?Object(q.a)(this.sheetInfo.tracks,t):-1})}changeDesc(t){this.description=t.length<99?{short:this.replaceBr("<b>\u4ecb\u7ecd\uff1a</b>"+t),long:""}:{short:this.replaceBr("<b>\u4ecb\u7ecd\uff1a</b>"+t.slice(0,99))+"...",long:this.replaceBr("<b>\u4ecb\u7ecd\uff1a</b>"+t)}}replaceBr(t){return t.replace(/\n/g,"<br />")}toggleDesc(){this.controlDesc.isExpand=!this.controlDesc.isExpand,this.controlDesc.isExpand?(this.controlDesc.label="\u6536\u8d77",this.controlDesc.iconCls="up"):(this.controlDesc.label="\u5c55\u5f00",this.controlDesc.iconCls="down")}onAddSong(t,e=!1){this.currentSong&&this.currentSong.id===t.id||this.songServe.getSongList(t).subscribe(t=>{t.length?this.batchActionServe.insertSong(t[0],e):this.alertMessage("warning","\u65e0url!")})}onAddSongs(t,e=!1){this.songServe.getSongList(t).subscribe(t=>{t.length&&(e?this.batchActionServe.selectPlayList({list:t,index:0}):this.batchActionServe.insertSongs(t))})}onLikeSheet(t){this.memberServe.likeSheet(t).subscribe(()=>{this.alertMessage("success","\u6536\u85cf\u6210\u529f")},t=>{this.alertMessage("error",t.msg||"\u6536\u85cf\u5931\u8d25")})}onLiveShow(t){!function(){Ck("fullpage",rk);for(var t=0;t<WO;t++)Tk(t);Ck("killButton",vk),Ck("muteButton",_k),Ck("textentryBox",ik),Ck("textentryField",sk),Ck("textEntryButton",wk),kk(!0),window.onresize=xk,xk(),easyrtc.setRoomOccupantListener(zk),easyrtc.easyApp("easyrtc.multiparty","box0",["box1","box2","box3"],Pk,function(t,e){console.log(e)}),easyrtc.setPeerListener(Mk),easyrtc.setDisconnectListener(function(){easyrtc.showError("LOST-CONNECTION","Lost connection to signaling server")}),ek(document.getElementById("box0"),document.getElementById("canvas0")),easyrtc.setOnCall(function(t,e){console.log("getConnection count="+easyrtc.getConnectionCount()),console.log("slot="+e),mk[e+1]=!0,0==jO&&(Ok(),document.getElementById("textEntryButton").style.display="block"),e+1==1&&(ek(document.getElementById(nk(e+1)),document.getElementById("canvas"+(e+1))),xk())}),easyrtc.setOnHangup(function(t,e){mk[e+1]=!1,jO>0&&e+1==jO&&Ok(),setTimeout(function(){document.getElementById(nk(e+1)).style.visibility="hidden",0==easyrtc.getConnectionCount()&&(Ek(0),document.getElementById("textEntryButton").style.display="none",document.getElementById("textentryBox").style.display="none"),xk()},20)})}()}onLikeSong(t){this.batchActionServe.likeSong(t)}shareResource(t,e="song"){let n="";n="playlist"===e?this.makeTxt("\u6b4c\u5355",t.name,t.creator.nickname):this.makeTxt("\u6b4c\u66f2",t.name,t.ar),this.store$.dispatch(Object(K.d)({info:{id:t.id.toString(),type:e,txt:n}}))}makeTxt(t,e,n){let r="";return`${t}: ${e} -- ${r=Array.isArray(n)?n.map(t=>t.name).join("/"):n}`}alertMessage(t,e){this.messageServe.create(t,e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}function ek(t,e){return V.__awaiter(this,void 0,void 0,function*(){const n=yield function(t){return void 0===t&&(t=Bf),Jp(this,void 0,void 0,function(){return tf(this,function(e){return"ResNet50"===(t=function(t){if(null==(t=t||Bf).architecture&&(t.architecture="MobileNetV1"),Vf.indexOf(t.architecture)<0)throw new Error("Invalid architecture "+t.architecture+". Should be one of "+Vf);if(null==t.inputResolution&&(t.inputResolution=257),Af(t.inputResolution),null==t.outputStride&&(t.outputStride=16),Wf[t.architecture].indexOf(t.outputStride)<0)throw new Error("Invalid outputStride "+t.outputStride+". Should be one of "+Wf[t.architecture]+" for architecutre "+t.architecture+".");if(null==t.multiplier&&(t.multiplier=1),Uf[t.architecture].indexOf(t.multiplier)<0)throw new Error("Invalid multiplier "+t.multiplier+". Should be one of "+Uf[t.architecture]+" for architecutre "+t.architecture+".");if(null==t.quantBytes&&(t.quantBytes=4),Hf.indexOf(t.quantBytes)<0)throw new Error("Invalid quantBytes "+t.quantBytes+". Should be one of "+Hf+" for architecutre "+t.architecture+".");return t}(t)).architecture?[2,Xf(t)]:"MobileNetV1"===t.architecture?[2,Yf(t)]:[2,null]})})}({architecture:"MobileNetV1",outputStride:KO,inputResolution:YO,multiplier:qO,quantBytes:GO});let r;try{r=yield function(t){return V.__awaiter(this,void 0,void 0,function*(){const e=yield function(t){return V.__awaiter(this,void 0,void 0,function*(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const e=t;return e.width=UO,e.height=HO,/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent),e.srcObject=t.srcObject,new Promise(t=>{e.onloadedmetadata=()=>{t(e)}})})}(t);return e.play(),e})}(t)}catch(i){throw console.log("this browser does not support video capture,or this device does not have a camera"),i}(function(t,e){JO.net=e,t.length>0&&(JO.camera=t[0].deviceId);const n=new Zf.gui.GUI({width:0});let r=null;JO[DO]=function(){r.setValue("ResNet50")},n.add(JO,DO).name(AO),function(t,e,n=""){for(var r=document.getElementsByClassName("property-name"),i=0;i<r.length;i++)(r[i].textContent||r[i].innerText)==t&&(r[i].parentNode.parentNode.style=e,""!==n&&(r[i].style=n))}(AO,RO,NO);const i=n.add(JO,"algorithm",["single-pose","multi-pose"]);let s=n.addFolder("Input");r=s.add(JO.input,"architecture",["MobileNetV1","ResNet50"]),JO.architecture=JO.input.architecture;let o=null;function l(t,e){o&&o.remove(),JO.inputResolution=t,JO.input.inputResolution=t,(o=s.add(JO.input,"inputResolution",e)).onChange(function(t){JO.changeToInputResolution=t})}let a=null;function u(t,e){a&&a.remove(),JO.outputStride=t,JO.input.outputStride=t,(a=s.add(JO.input,"outputStride",e)).onChange(function(t){JO.changeToOutputStride=t})}let c=null;function h(t,e){c&&c.remove(),JO.multiplier=t,JO.input.multiplier=t,(c=s.add(JO.input,"multiplier",e)).onChange(function(t){JO.changeToMultiplier=t})}let d=null;function p(){var t,e;"MobileNetV1"===JO.input.architecture?(l(YO,[200,250,300,350,400,450,500,550,600,650,700,750,800]),u(KO,[8,16]),h(qO,[.5,.75,1])):(l(QO,[200,250,300,350,400,450,500,550,600,650,700,750,800]),u(ZO,[32,16]),h(XO,[1])),t=GO,e=[1,2,4],d&&d.remove(),JO.quantBytes=+t,JO.input.quantBytes=+t,(d=s.add(JO.input,"quantBytes",e)).onChange(function(t){JO.changeToQuantBytes=+t})}p(),s.open();let f=n.addFolder("Single Pose Detection");f.add(JO.singlePoseDetection,"minPoseConfidence",0,1),f.add(JO.singlePoseDetection,"minPartConfidence",0,1);let g=n.addFolder("Multi Pose Detection");g.add(JO.multiPoseDetection,"maxPoseDetections").min(1).max(20).step(1),g.add(JO.multiPoseDetection,"minPoseConfidence",0,1),g.add(JO.multiPoseDetection,"minPartConfidence",0,1),g.add(JO.multiPoseDetection,"nmsRadius").min(0).max(40),g.open();let m=n.addFolder("Output");m.add(JO.output,"showVideo"),m.add(JO.output,"showSkeleton"),m.add(JO.output,"showPoints"),m.add(JO.output,"showBoundingBox"),m.open(),r.onChange(function(t){p(),JO.changeToArchitecture=t}),i.onChange(function(t){switch(JO.algorithm){case"single-pose":g.close(),f.open();break;case"multi-pose":f.close(),g.open()}})})([],n),function(t,e,n){const r=n,i=r.getContext("2d");r.width=UO,r.height=HO,function e(n){return V.__awaiter(this,void 0,void 0,function*(){let n=[];const r=yield JO.net.estimatePoses(t,{flipHorizontal:!0,decodingMethod:"single-person"});n=n.concat(r),i.clearRect(0,0,600,500),i.save(),i.scale(-1,1),i.translate(-600,0),i.drawImage(t,0,0,UO,HO),i.restore(),n.forEach(({score:t,keypoints:e})=>{t>=.15&&(function(t,e,n,r=1){for(let i=0;i<t.length;i++){const e=t[i];if(e.score<.5)continue;const{y:s,x:o}=e.position;$O(n,s*r,o*r,3,IO)}}(e,0,i),function(t,e,n,r=1){var i;(i=t,.5,cf.reduce(function(t,e){var n=e[0],r=e[1];return function(t,e,n){return t<.5||e<.5}(i[n].score,i[r].score)?t:(t.push([i[n],i[r]]),t)},[])).forEach(t=>{!function([t,e],[n,r],i,s,o){o.beginPath(),o.moveTo(e*s,t*s),o.lineTo(r*s,n*s),o.lineWidth=MO,o.strokeStyle=i,o.stroke()}(FO(t[0].position),FO(t[1].position),IO,r,n)})}(e,0,i))}),requestAnimationFrame(e)})}()}(r,0,e)})}function nk(t){return"box"+t}function rk(t,e){return{left:0,top:0,width:t,height:e}}function ik(t,e){return{left:t/4,top:e/4,width:t/2,height:e/4}}function sk(t,e){return{width:t-40}}jO=-1,BO=4/3,WO=1+(VO=3),easyrtc.dontAddCloseButtons();var ok=20;function lk(t,e){var n,r;return t<e*BO?r=(n=t-20)/BO:n=(r=e-20)*BO,{left:(t-n)/2,top:(e-r)/2,width:n,height:r}}function ak(t,e,n,r,i,s){var o,l,a;r<i*BO?l=(o=r*t)/s:o=(l=i*t)*s,a=e<0?r-o:0;var u=0;return u=n<0?i-l:0,{left:a+=Math.floor(e*r),top:u+=Math.floor(n*i),width:o,height:l}}function uk(t,e,n,r,i){return ak(t,e,n,r,i,BO)}function ck(t,e,n,r,i,s,o){return ak(t,e,n,r,i,s/o)}var hk=1,dk=1;function pk(t,e){return"p"==LO?{left:(t-hk)/2,top:(e-2*dk)/3*2+dk,width:hk,height:dk}:{left:(t-2*hk)/3*2+hk,top:(e-dk)/2,width:hk,height:dk}}function fk(t,e){return"p"==LO?{left:(t-hk)/2,top:(e-3*dk)/4*2+dk,width:hk,height:dk}:{left:(t-2*hk)/3*2+hk,top:(e-2*dk)/3,width:hk,height:dk}}function gk(t,e){return"p"==LO?{left:(t-hk)/2,top:(e-3*dk)/4*3+2*dk,width:hk,height:dk}:{left:(t-2*hk)/3*1.5+hk/2,top:(e-2*dk)/3*2+dk,width:hk,height:dk}}var mk=[!0,!1,!1,!1],bk=0,yk=[function(t,e){if(jO>0)return uk(.2,.01,.01,t,e);switch(function(t,e){var n,r;function i(t,e){return(t-ok*(e+1))/e}switch((LO=t/BO<e?"p":"l")+(bk+1)){case"p1":case"l1":n=i(t,1),r=i(e,1);break;case"l2":n=i(t,2),r=i(e,1);break;case"p2":n=i(t,1),r=i(e,2);break;case"p4":case"l4":case"l3":n=i(t,2),r=i(e,2);break;case"p3":n=i(t,1),r=i(e,3)}hk=Math.min(n,r*BO),dk=Math.min(r,n/BO)}(t,e),bk){case 0:return lk(t,e);case 1:return function(t,e){return"p"==LO?{left:(t-hk)/2,top:(e-2*dk)/3,width:hk,height:dk}:{left:(t-2*hk)/3,top:(e-dk)/2,width:hk,height:dk}}(t,e);case 2:return function(t,e){return"p"==LO?{left:(t-hk)/2,top:(e-3*dk)/4,width:hk,height:dk}:{left:(t-2*hk)/3,top:(e-2*dk)/3,width:hk,height:dk}}(t,e);case 3:return function(t,e){return{left:(t-2*hk)/3,top:(e-2*dk)/3,width:hk,height:dk}}(t,e)}},function(t,e){if(jO>=0||!mk[1])return uk(.2,.01,-.01,t,e);switch(bk){case 1:return pk(t,e);case 2:return fk(t,e);case 3:return function(t,e){return{left:(t-2*hk)/3*2+hk,top:(e-2*dk)/3,width:hk,height:dk}}(t,e)}},function(t,e){if(jO>=0||!mk[2])return uk(.2,-.01,.01,t,e);switch(bk){case 1:return pk(t,e);case 2:return mk[1]?gk(t,e):fk(t,e);case 3:return function(t,e){return{left:(t-2*hk)/3,top:(e-2*dk)/3*2+dk,width:hk,height:dk}}(t,e)}},function(t,e){if(jO>=0||!mk[3])return uk(.2,-.01,-.01,t,e);switch(bk){case 1:return pk(t,e);case 2:return gk(t,e);case 3:return function(t,e){return{left:(t-2*hk)/3*2+hk,top:(e-2*dk)/3*2+dk,width:hk,height:dk}}(t,e)}}];function vk(t,e){return t<e?ck(.1,-.51,-.01,t,e,128,128):ck(.1,-.01,-.51,t,e,128,128)}function _k(t,e){return t<e?ck(.1,-.51,.01,t,e,32,32):ck(.1,.01,-.51,t,e,32,32)}function wk(t,e){return t<e?ck(.1,.51,.01,t,e,32,32):ck(.1,.01,.51,t,e,32,32)}function xk(){var t=document.getElementById("fullpage");t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",bk=easyrtc.getConnectionCount(),function t(e,n,r){var i=e.reshapeMe(n,r);void 0!==i.left&&(e.style.left=Math.round(i.left)+"px"),void 0!==i.top&&(e.style.top=Math.round(i.top)+"px"),void 0!==i.width&&(e.style.width=Math.round(i.width)+"px"),void 0!==i.height&&(e.style.height=Math.round(i.height)+"px");for(var s=e.childNodes.length,o=0;o<s;o++){var l=e.childNodes[o];l.reshapeMe&&t(l,i.width,i.height)}}(t,window.innerWidth,window.innerHeight)}function Ck(t,e){var n=document.getElementById(t);n||alert("Attempt to apply to reshapeFn to non-existent element "+t),e||alert("Attempt to apply misnamed reshapeFn to element "+t),n.reshapeMe=e}function Sk(){if(jO>=0){var t=nk(jO);document.getElementById(t).style.zIndex="2",Ck(t,yk[jO]),document.getElementById("muteButton").style.display="none",document.getElementById("killButton").style.display="none",jO=-1}}function Ok(){Sk(),jO=-1,kk(!1),xk()}function kk(t){var e=document.getElementById("muteButton");if(jO>0){e.style.display="block";var n=document.getElementById(nk(jO)),r=!!n.muted;t&&(n.muted=r=!r),e.src=r?"images/button_unmute.png":"images/button_mute.png"}else e.style.display="none"}function Ek(t){var e=jO;if(jO>=0&&Sk(),e!=t){var n=nk(t);jO=t,Ck(n,lk),document.getElementById(n).style.zIndex="1",t>0&&(document.getElementById("muteButton").style.display="block",kk(!1),document.getElementById("killButton").style.display="block")}kk(!1),xk()}function Tk(t){var e=nk(t);Ck(e,yk[t]),document.getElementById(e).onclick=function(){Ek(t)}}function zk(t,e){console.log("onLiveShow roomName "+t),easyrtc.setRoomOccupantListener(null);var n=[],r=0;for(var i in e)n.push(i);n.length>0&&function t(e){easyrtc.call(n[e],function(){++r<VO&&e>0&&t(e-1)},function(n,i){easyrtc.showError(n,i),r<VO&&e>0&&t(e-1)},function(t,e){t?console.log("call accepted by "+easyrtc.idToName(e)):console.log("call rejected"+easyrtc.idToName(e))},["forwardedStream"])}(n.length-1)}function Pk(){Ek(0)}function Ik(t,e,n){var r=document.getElementById("fullpage"),i=parseInt(r.offsetWidth),s=parseInt(r.offsetHeight),o=.2*t+.8*i/2,l=.2*e+.8*s/2,a=document.createElement("img");a.src="images/cloud.png",a.style.width="1px",a.style.height="1px",a.style.left=t+"px",a.style.top=e+"px",r.appendChild(a),a.onload=function(){var u;function c(){u&&(r.removeChild(u),r.removeChild(a))}a.style.left=t+"px",a.style.top=e+"px",a.style.width="4px",a.style.height="4px",a.style.opacity=.7,a.style.zIndex=5,a.className="transit boxCommon",setTimeout(function(){a.style.left=o-i/4+"px",a.style.top=l-s/4+"px",a.style.width=i/2+"px",a.style.height=s/2+"px"},10),setTimeout(function(){(u=document.createElement("div")).className="boxCommon",u.style.left=Math.floor(o-i/8)+"px",u.style.top=Math.floor(l)+"px",u.style.fontSize="36pt",u.style.width=.4*i+"px",u.style.height=.4*s+"px",u.style.zIndex=6,u.appendChild(document.createTextNode(n)),r.appendChild(u),u.onclick=c,a.onclick=c},1e3),setTimeout(function(){a.style.left=t+"px",a.style.top=e+"px",a.style.width="4px",a.style.height="4px",r.removeChild(u)},9e3),setTimeout(function(){r.removeChild(a)},1e4)}}function Mk(t,e,n){for(var r=0;r<VO;r++)if(easyrtc.getIthCaller(r)==t){var i=document.getElementById(nk(r+1));Ik(parseInt(i.offsetLeft)+parseInt(i.offsetWidth)/2,parseInt(i.offsetTop)+parseInt(i.offsetHeight)/2,n)}}},RGEn:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(t){this.cdr=t}ngOnInit(){}}},RJeW:function(t,e,n){var r=n("iWRJ"),i=n("tMf1");t.exports=function(t){var e=r(t),n=new Date(0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),i(n)}},ROAe:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("8Y7J"),i=n("XPT/");class s{constructor(){this.recordType=i.b.weekData,this.listenSongs=0,this.currentIndex=-1,this.onChangeType=new r.m,this.onAddSong=new r.m,this.onLikeSong=new r.m,this.onShareSong=new r.m}ngOnInit(){}}},RVNi:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o});var r=n("mrSG"),i=n("5VGP");let s=(()=>{class t{constructor(){this.nzShowInfo=!0,this.nzWidth=132,this.nzType="line",this.nzStrokeLinecap="round",this.statusColorMap={normal:"#108ee9",exception:"#ff5500",success:"#87d068"},this.cachedStatus="normal",this.inferredStatus="normal",this.inferredStrokeWidth=8}get formatter(){return this.nzFormat||(t=>`${t}%`)}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||this.inferredStrokeWidth}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnInit(){this.updatePathStyles(),this.updateIcon()}ngOnChanges(t){const{nzGapPosition:e,nzStrokeLinecap:n,nzGapDegree:r,nzType:s,nzSize:o,nzStatus:l,nzPercent:a,nzSuccessPercent:u}=t;(e||n||r||s||a)&&this.updatePathStyles(),o&&"small"===this.nzSize&&(this.inferredStrokeWidth=6),l&&(this.cachedStatus=this.nzStatus||this.cachedStatus,this.updateIcon()),(a||u)&&(parseInt(this.nzPercent.toString(),10)>=100?(Object(i.T)(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus,this.updateIcon()),s&&("line"!==this.nzType&&(this.inferredStrokeWidth=6),"dashboard"===this.nzType&&(this.inferredGapPosition="bottom",this.inferredGapDegree=75),"circle"===this.nzType&&(this.inferredGapDegree=0))}updatePathStyles(){const t=50-this.strokeWidth/2;let e=0,n=-t,r=0,i=-2*t;switch(this.nzGapPosition||this.inferredGapPosition){case"left":e=-t,n=0,r=2*t,i=0;break;case"right":e=t,n=0,r=-2*t,i=0;break;case"bottom":n=t,i=2*t}this.pathString=`M 50,50 m ${e},${n}\n     a ${t},${t} 0 1 1 ${r},${-i}\n     a ${t},${t} 0 1 1 ${-r},${i}`;const s=2*Math.PI*t,o=this.nzGapDegree||this.inferredGapDegree;this.trailPathStyle={strokeDasharray:`${s-o}px ${s}px`,strokeDashoffset:`-${o/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.strokePathStyle={stroke:this.nzStrokeColor||null,strokeDasharray:`${this.nzPercent/100*(s-o)}px ${s}px`,strokeDashoffset:`-${o/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s"}}updateIcon(){const t="success"===this.status?"check":"exception"===this.status?"close":"";this.icon=t?t+("circle"===this.nzType||"dashboard"===this.nzType?"-o":"-circle-fill"):""}}return Object(r.__decorate)([Object(i.h)(),Object(r.__metadata)("design:type",Number)],t.prototype,"nzSuccessPercent",void 0),Object(r.__decorate)([Object(i.h)(),Object(r.__metadata)("design:type",Number)],t.prototype,"nzPercent",void 0),Object(r.__decorate)([Object(i.h)(),Object(r.__metadata)("design:type",Number)],t.prototype,"nzStrokeWidth",void 0),Object(r.__decorate)([Object(i.h)(),Object(r.__metadata)("design:type",Number)],t.prototype,"nzGapDegree",void 0),t})();class o{}},Rgb0:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return h}),n.d(e,"e",function(){return a});var r=n("8Y7J"),i=n("2Vo4"),s=(n("SVse"),n("cPJV"),n("gfz1"),n("yNUO"),{today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u786e\u5b9a",timeSelect:"\u9009\u62e9\u65f6\u95f4",dateSelect:"\u9009\u62e9\u65e5\u671f",weekSelect:"\u9009\u62e9\u5468",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u4e2a\u6708 (\u7ffb\u9875\u4e0a\u952e)",nextMonth:"\u4e0b\u4e2a\u6708 (\u7ffb\u9875\u4e0b\u952e)",monthSelect:"\u9009\u62e9\u6708\u4efd",yearSelect:"\u9009\u62e9\u5e74\u4efd",decadeSelect:"\u9009\u62e9\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u65f6mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u952e\u52a0\u5de6\u65b9\u5411\u952e)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u952e\u52a0\u53f3\u65b9\u5411\u952e)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7eaa",nextCentury:"\u4e0b\u4e00\u4e16\u7eaa"});const o={placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4"},l={lang:Object.assign({placeholder:"\u8bf7\u9009\u62e9\u65e5\u671f",rangePlaceholder:["\u5f00\u59cb\u65e5\u671f","\u7ed3\u675f\u65e5\u671f"]},s),timePickerLocale:Object.assign({},o)};l.lang.ok="\u786e \u5b9a";var a={locale:"zh-cn",Pagination:{items_per_page:"\u6761/\u9875",jump_to:"\u8df3\u81f3",jump_to_confirm:"\u786e\u5b9a",page:"\u9875",prev_page:"\u4e0a\u4e00\u9875",next_page:"\u4e0b\u4e00\u9875",prev_5:"\u5411\u524d 5 \u9875",next_5:"\u5411\u540e 5 \u9875",prev_3:"\u5411\u524d 3 \u9875",next_3:"\u5411\u540e 3 \u9875"},DatePicker:l,TimePicker:o,Calendar:s,global:{placeholder:"\u8bf7\u9009\u62e9"},Table:{filterTitle:"\u7b5b\u9009",filterConfirm:"\u786e\u5b9a",filterReset:"\u91cd\u7f6e",selectAll:"\u5168\u9009\u5f53\u9875",selectInvert:"\u53cd\u9009\u5f53\u9875",sortTitle:"\u6392\u5e8f"},Modal:{okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",justOkText:"\u77e5\u9053\u4e86"},Popconfirm:{cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a"},Transfer:{searchPlaceholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9",itemUnit:"\u9879",itemsUnit:"\u9879"},Upload:{uploading:"\u6587\u4ef6\u4e0a\u4f20\u4e2d",removeFile:"\u5220\u9664\u6587\u4ef6",uploadError:"\u4e0a\u4f20\u9519\u8bef",previewFile:"\u9884\u89c8\u6587\u4ef6"},Empty:{description:"\u6682\u65e0\u6570\u636e"},Icon:{icon:"\u56fe\u6807"},Text:{edit:"\u7f16\u8f91",copy:"\u590d\u5236",copied:"\u590d\u5236\u6210\u529f",expand:"\u5c55\u5f00"},PageHeader:{back:"\u8fd4\u56de"}};const u=new r.p("nz-i18n"),c=new r.p("nz-date-locale");let h=(()=>{class t{constructor(t,e){this._change=new i.a(this._locale),this.setLocale(t||a),this.setDateLocale(e||null)}get localeChange(){return this._change.asObservable()}translate(t,e){let n=this._getObjectPath(this._locale,t);return"string"==typeof n?(e&&Object.keys(e).forEach(t=>n=n.replace(new RegExp(`%${t}%`,"g"),e[t])),n):t}setLocale(t){this._locale&&this._locale.locale===t.locale||(this._locale=t,this._change.next(t))}getLocale(){return this._locale}getLocaleId(){return this._locale?this._locale.locale:""}setDateLocale(t){this.dateLocale=t}getDateLocale(){return this.dateLocale}getLocaleData(t,e){return(t?this._getObjectPath(this._locale,t):this._locale)||e}_getObjectPath(t,e){let n=t;const r=e.split("."),i=r.length;let s=0;for(;n&&s<i;)n=n[r[s++]];return s===i?n:null}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(u,8),Object(r.Ub)(c,8))},token:t,providedIn:"root"}),t})();class d{constructor(t){this._locale=t}transform(t,e){return this._locale.translate(t,e)}}class p{}Object.assign({placeholder:"\u8acb\u9078\u64c7\u65e5\u671f",rangePlaceholder:["\u958b\u59cb\u65e5\u671f","\u7d50\u675f\u65e5\u671f"]},{today:"\u4eca\u5929",now:"\u6b64\u523b",backToToday:"\u8fd4\u56de\u4eca\u5929",ok:"\u78ba\u5b9a",timeSelect:"\u9078\u64c7\u6642\u9593",dateSelect:"\u9078\u64c7\u65e5\u671f",clear:"\u6e05\u9664",month:"\u6708",year:"\u5e74",previousMonth:"\u4e0a\u500b\u6708 (\u7ffb\u9801\u4e0a\u9375)",nextMonth:"\u4e0b\u500b\u6708 (\u7ffb\u9801\u4e0b\u9375)",monthSelect:"\u9078\u64c7\u6708\u4efd",yearSelect:"\u9078\u64c7\u5e74\u4efd",decadeSelect:"\u9078\u64c7\u5e74\u4ee3",yearFormat:"YYYY\u5e74",dayFormat:"D\u65e5",dateFormat:"YYYY\u5e74M\u6708D\u65e5",dateTimeFormat:"YYYY\u5e74M\u6708D\u65e5 HH\u6642mm\u5206ss\u79d2",previousYear:"\u4e0a\u4e00\u5e74 (Control\u9375\u52a0\u5de6\u65b9\u5411\u9375)",nextYear:"\u4e0b\u4e00\u5e74 (Control\u9375\u52a0\u53f3\u65b9\u5411\u9375)",previousDecade:"\u4e0a\u4e00\u5e74\u4ee3",nextDecade:"\u4e0b\u4e00\u5e74\u4ee3",previousCentury:"\u4e0a\u4e00\u4e16\u7d00",nextCentury:"\u4e0b\u4e00\u4e16\u7d00"}).ok="\u78ba \u5b9a"},RmLz:function(t,e,n){"use strict";var r=n("zzsZ"),i=n("yFcd"),s=n("aJGj"),o=n("IKMM"),l=n("nzqU");e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];l.isScheduler(n)?t.pop():n=null;var a=t.length;return o.concat(1!==a||n?a>0?r.fromArray(t,n):s.empty(n):i.scalar(t[0]),e)}}},SBNi:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o});var r=n("mrSG"),i=n("5VGP");let s=(()=>{class t{constructor(t,e){this.elementRef=t,this.nzUpdateHostClassService=e,this.nzType="horizontal",this.nzOrientation="center",this.nzDashed=!1}setClass(){this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{"ant-divider":!0,[`ant-divider-${this.nzType}`]:!0,[`ant-divider-with-text-${this.nzOrientation}`]:this.nzText,"ant-divider-dashed":this.nzDashed})}ngOnChanges(){this.setClass()}ngOnInit(){this.setClass()}}return Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDashed",void 0),t})();class o{}},SDxy:function(t,e,n){"use strict";var r=n("8Y7J");class i{transform(t){return t>1e4?Math.floor(t/1e4)+"\u4e07":t}}var s=n("U77E");n("KcsS"),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l});var o=r.rb({encapsulation:0,styles:[[".cover[_ngcontent-%COMP%]{position:relative;display:block;height:140px}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.cover[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;background-color:#000;color:#fff;opacity:.8;display:flex;justify-content:space-between;align-items:center;padding:3px 8px}.cover[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .num[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:8px;vertical-align:text-bottom}.cover[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:inline-block;width:14px;height:11px;background:url(iconall.de77152ca400e40498b5.png) no-repeat;cursor:pointer;overflow:hidden}.cover[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .icon.erji[_ngcontent-%COMP%]{background-position:0 -24px}.cover[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .icon.play[_ngcontent-%COMP%]{width:16px;height:17px;background-position:0 0}.cover[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   .icon.play[_ngcontent-%COMP%]:hover{background-position:0 -60px}.dec[_ngcontent-%COMP%]{display:block;margin-top:8px;cursor:pointer}"]],data:{}});function l(t){return r.Pb(2,[r.Hb(0,i,[]),(t()(),r.tb(1,0,null,null,12,null,null,null,null,null,null,null)),(t()(),r.tb(2,0,null,null,9,"a",[["class","cover"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"img",[["appImgDefault",""]],[[8,"src",4],[8,"alt",0]],[[null,"mousedown"]],function(t,e,n){var i=!0;return"mousedown"===e&&(i=!1!==r.Fb(t,4).onmousedown(n)&&i),i},null,null)),r.sb(4,16384,null,0,s.a,[],null,null),(t()(),r.tb(5,0,null,null,6,"div",[["class","bottom"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,4,"div",[["class","num"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,0,"i",[["class","icon erji"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),r.Nb(9,null,["",""])),r.Jb(10,1),(t()(),r.tb(11,0,null,null,0,"i",[["class","icon play"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.playSheet(n,i.sheet.id)&&r),r},null,null)),(t()(),r.tb(12,0,null,null,1,"span",[["class","dec"]],null,null,null,null,null)),(t()(),r.Nb(13,null,["",""]))],null,function(t,e){var n=e.component;t(e,3,0,n.coverImg,n.sheet.name);var i=r.Ob(e,9,0,t(e,10,0,r.Fb(e,0),n.sheet.playCount));t(e,9,0,i),t(e,13,0,n.sheet.name)})}},SHEi:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return a});var r=n("mrSG"),i=n("8Y7J"),s=n("5VGP"),o=n("W4B1");n("/uUt");let l=(()=>{class t extends o.a{constructor(t,e){super(t,e),this.noAnimation=e,this._prefix="ant-popover-placement",this._trigger="click",this._hasBackdrop=!0,this.nzOkType="primary",this.nzCondition=!1,this.nzOnCancel=new i.m,this.nzOnConfirm=new i.m}show(){this.nzCondition?this.onConfirm():this.nzVisible=!0}onCancel(){this.nzOnCancel.emit(),this.nzVisible=!1}onConfirm(){this.nzOnConfirm.emit(),this.nzVisible=!1}}return Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzCondition",void 0),t})();class a{}},SKYL:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 6===r(t).getDay()}},SN7N:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("5VGP"),n("mrSG"),n("XNiG"),n("xgIS"),n("jtHE"),n("1G5W"),n("pLZG");class r{}},SVse:function(t,e,n){"use strict";n.d(e,"I",function(){return W}),n.d(e,"C",function(){return G}),n.d(e,"y",function(){return I}),n.d(e,"m",function(){return H}),n.d(e,"n",function(){return U}),n.d(e,"t",function(){return m}),n.d(e,"z",function(){return _}),n.d(e,"J",function(){return q}),n.d(e,"c",function(){return wt}),n.d(e,"j",function(){return Z}),n.d(e,"k",function(){return J}),n.d(e,"l",function(){return et}),n.d(e,"o",function(){return ht}),n.d(e,"p",function(){return st}),n.d(e,"q",function(){return ot}),n.d(e,"r",function(){return lt}),n.d(e,"s",function(){return dt}),n.d(e,"d",function(){return xt}),n.d(e,"b",function(){return yt}),n.d(e,"e",function(){return vt}),n.d(e,"w",function(){return _t}),n.d(e,"H",function(){return Ct}),n.d(e,"A",function(){return Ot}),n.d(e,"B",function(){return kt}),n.d(e,"x",function(){return Et}),n.d(e,"E",function(){return Y}),n.d(e,"D",function(){return K}),n.d(e,"G",function(){return ut}),n.d(e,"F",function(){return at}),n.d(e,"v",function(){return i}),n.d(e,"g",function(){return s}),n.d(e,"i",function(){return o}),n.d(e,"a",function(){return l}),n.d(e,"f",function(){return c}),n.d(e,"u",function(){return h}),n.d(e,"h",function(){return a});var r=n("8Y7J");class i{}const s=new r.p("Location Initialized");class o{}const l=new r.p("appBaseHref");class a{constructor(t,e){this._subject=new r.m,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=a.stripTrailingSlash(u(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+a.normalizeQueryParams(e))}normalize(t){return a.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,u(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+a.normalizeQueryParams(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+a.normalizeQueryParams(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}static normalizeQueryParams(t){return t&&"?"!==t[0]?"?"+t:t}static joinWithSlash(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}static stripTrailingSlash(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}}function u(t){return t.replace(/\/index.html$/,"")}class c extends o{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=a.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+a.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+a.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class h extends o{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return a.joinWithSlash(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+a.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+a.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+a.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const d=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),p=function(){var t={Format:0,Standalone:1};return t[t.Format]="Format",t[t.Standalone]="Standalone",t}(),f=function(){var t={Narrow:0,Abbreviated:1,Wide:2,Short:3};return t[t.Narrow]="Narrow",t[t.Abbreviated]="Abbreviated",t[t.Wide]="Wide",t[t.Short]="Short",t}(),g=function(){var t={Short:0,Medium:1,Long:2,Full:3};return t[t.Short]="Short",t[t.Medium]="Medium",t[t.Long]="Long",t[t.Full]="Full",t}(),m=function(){var t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return t[t.Decimal]="Decimal",t[t.Group]="Group",t[t.List]="List",t[t.PercentSign]="PercentSign",t[t.PlusSign]="PlusSign",t[t.MinusSign]="MinusSign",t[t.Exponential]="Exponential",t[t.SuperscriptingExponent]="SuperscriptingExponent",t[t.PerMille]="PerMille",t[t.Infinity]="Infinity",t[t.NaN]="NaN",t[t.TimeSeparator]="TimeSeparator",t[t.CurrencyDecimal]="CurrencyDecimal",t[t.CurrencyGroup]="CurrencyGroup",t}();function b(t,e){return C(Object(r.ub)(t)[r.eb.DateFormat],e)}function y(t,e){return C(Object(r.ub)(t)[r.eb.TimeFormat],e)}function v(t,e){return C(Object(r.ub)(t)[r.eb.DateTimeFormat],e)}function _(t,e){const n=Object(r.ub)(t),i=n[r.eb.NumberSymbols][e];if(void 0===i){if(e===m.CurrencyDecimal)return n[r.eb.NumberSymbols][m.Decimal];if(e===m.CurrencyGroup)return n[r.eb.NumberSymbols][m.Group]}return i}const w=r.vb;function x(t){if(!t[r.eb.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.eb.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function C(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function S(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const O=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,k={},E=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,T=function(){var t={Short:0,ShortGMT:1,Long:2,Extended:3};return t[t.Short]="Short",t[t.ShortGMT]="ShortGMT",t[t.Long]="Long",t[t.Extended]="Extended",t}(),z=function(){var t={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return t[t.FullYear]="FullYear",t[t.Month]="Month",t[t.Date]="Date",t[t.Hours]="Hours",t[t.Minutes]="Minutes",t[t.Seconds]="Seconds",t[t.FractionalSeconds]="FractionalSeconds",t[t.Day]="Day",t}(),P=function(){var t={DayPeriods:0,Days:1,Months:2,Eras:3};return t[t.DayPeriods]="DayPeriods",t[t.Days]="Days",t[t.Months]="Months",t[t.Eras]="Eras",t}();function I(t,e,n,i){let s=function(t){if(V(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(O))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,l=Number(t[5]||0)-r,a=Number(t[6]||0),u=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,l,a,u),e}(n)}const e=new Date(t);if(!V(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Object(r.ub)(t)[r.eb.LocaleId]}(e);if(k[i]=k[i]||{},k[i][n])return k[i][n];let s="";switch(n){case"shortDate":s=b(e,g.Short);break;case"mediumDate":s=b(e,g.Medium);break;case"longDate":s=b(e,g.Long);break;case"fullDate":s=b(e,g.Full);break;case"shortTime":s=y(e,g.Short);break;case"mediumTime":s=y(e,g.Medium);break;case"longTime":s=y(e,g.Long);break;case"fullTime":s=y(e,g.Full);break;case"short":const r=t(e,"shortTime"),i=t(e,"shortDate");s=M(v(e,g.Short),[r,i]);break;case"medium":const o=t(e,"mediumTime"),l=t(e,"mediumDate");s=M(v(e,g.Medium),[o,l]);break;case"long":const a=t(e,"longTime"),u=t(e,"longDate");s=M(v(e,g.Long),[a,u]);break;case"full":const c=t(e,"fullTime"),h=t(e,"fullDate");s=M(v(e,g.Full),[c,h])}return s&&(k[i][n]=s),s}(n,e)||e;let o,l=[];for(;e;){if(!(o=E.exec(e))){l.push(e);break}{const t=(l=l.concat(o.slice(1))).pop();if(!t)break;e=t}}let a=s.getTimezoneOffset();i&&(a=B(i,a),s=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(B(e,r)-r))}(s,i));let u="";return l.forEach(t=>{const e=function(t){if(j[t])return j[t];let e;switch(t){case"G":case"GG":case"GGG":e=N(P.Eras,f.Abbreviated);break;case"GGGG":e=N(P.Eras,f.Wide);break;case"GGGGG":e=N(P.Eras,f.Narrow);break;case"y":e=A(z.FullYear,1,0,!1,!0);break;case"yy":e=A(z.FullYear,2,0,!0,!0);break;case"yyy":e=A(z.FullYear,3,0,!1,!0);break;case"yyyy":e=A(z.FullYear,4,0,!1,!0);break;case"M":case"L":e=A(z.Month,1,1);break;case"MM":case"LL":e=A(z.Month,2,1);break;case"MMM":e=N(P.Months,f.Abbreviated);break;case"MMMM":e=N(P.Months,f.Wide);break;case"MMMMM":e=N(P.Months,f.Narrow);break;case"LLL":e=N(P.Months,f.Abbreviated,p.Standalone);break;case"LLLL":e=N(P.Months,f.Wide,p.Standalone);break;case"LLLLL":e=N(P.Months,f.Narrow,p.Standalone);break;case"w":e=L(1);break;case"ww":e=L(2);break;case"W":e=L(1,!0);break;case"d":e=A(z.Date,1);break;case"dd":e=A(z.Date,2);break;case"E":case"EE":case"EEE":e=N(P.Days,f.Abbreviated);break;case"EEEE":e=N(P.Days,f.Wide);break;case"EEEEE":e=N(P.Days,f.Narrow);break;case"EEEEEE":e=N(P.Days,f.Short);break;case"a":case"aa":case"aaa":e=N(P.DayPeriods,f.Abbreviated);break;case"aaaa":e=N(P.DayPeriods,f.Wide);break;case"aaaaa":e=N(P.DayPeriods,f.Narrow);break;case"b":case"bb":case"bbb":e=N(P.DayPeriods,f.Abbreviated,p.Standalone,!0);break;case"bbbb":e=N(P.DayPeriods,f.Wide,p.Standalone,!0);break;case"bbbbb":e=N(P.DayPeriods,f.Narrow,p.Standalone,!0);break;case"B":case"BB":case"BBB":e=N(P.DayPeriods,f.Abbreviated,p.Format,!0);break;case"BBBB":e=N(P.DayPeriods,f.Wide,p.Format,!0);break;case"BBBBB":e=N(P.DayPeriods,f.Narrow,p.Format,!0);break;case"h":e=A(z.Hours,1,-12);break;case"hh":e=A(z.Hours,2,-12);break;case"H":e=A(z.Hours,1);break;case"HH":e=A(z.Hours,2);break;case"m":e=A(z.Minutes,1);break;case"mm":e=A(z.Minutes,2);break;case"s":e=A(z.Seconds,1);break;case"ss":e=A(z.Seconds,2);break;case"S":e=A(z.FractionalSeconds,1);break;case"SS":e=A(z.FractionalSeconds,2);break;case"SSS":e=A(z.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=R(T.Short);break;case"ZZZZZ":e=R(T.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=R(T.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=R(T.Long);break;default:return null}return j[t]=e,e}(t);u+=e?e(s,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function M(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function D(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.substr(o.length-e)),s+o}function A(t,e,n=0,r=!1,i=!1){return function(s,o){let l=function(t,e){switch(t){case z.FullYear:return e.getFullYear();case z.Month:return e.getMonth();case z.Date:return e.getDate();case z.Hours:return e.getHours();case z.Minutes:return e.getMinutes();case z.Seconds:return e.getSeconds();case z.FractionalSeconds:return e.getMilliseconds();case z.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||l>-n)&&(l+=n),t===z.Hours)0===l&&-12===n&&(l=12);else if(t===z.FractionalSeconds)return a=e,D(l,3).substr(0,a);var a;const u=_(o,m.MinusSign);return D(l,e,u,r,i)}}function N(t,e,n=p.Format,i=!1){return function(s,o){return function(t,e,n,i,s,o){switch(n){case P.Months:return function(t,e,n){const i=Object(r.ub)(t),s=C([i[r.eb.MonthsFormat],i[r.eb.MonthsStandalone]],e);return C(s,n)}(e,s,i)[t.getMonth()];case P.Days:return function(t,e,n){const i=Object(r.ub)(t),s=C([i[r.eb.DaysFormat],i[r.eb.DaysStandalone]],e);return C(s,n)}(e,s,i)[t.getDay()];case P.DayPeriods:const l=t.getHours(),a=t.getMinutes();if(o){const t=function(t){const e=Object(r.ub)(t);return x(e),(e[r.eb.ExtraData][2]||[]).map(t=>"string"==typeof t?S(t):[S(t[0]),S(t[1])])}(e),n=function(t,e,n){const i=Object(r.ub)(t);x(i);const s=C([i[r.eb.ExtraData][0],i[r.eb.ExtraData][1]],e)||[];return C(s,n)||[]}(e,s,i);let o;if(t.forEach((t,e)=>{if(Array.isArray(t)){const{hours:r,minutes:i}=t[0],{hours:s,minutes:u}=t[1];l>=r&&a>=i&&(l<s||l===s&&a<u)&&(o=n[e])}else{const{hours:r,minutes:i}=t;r===l&&i===a&&(o=n[e])}}),o)return o}return function(t,e,n){const i=Object(r.ub)(t),s=C([i[r.eb.DayPeriodsFormat],i[r.eb.DayPeriodsStandalone]],e);return C(s,n)}(e,s,i)[l<12?0:1];case P.Eras:return function(t,e){return C(Object(r.ub)(t)[r.eb.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(s,o,t,e,n,i)}}function R(t){return function(e,n,r){const i=-1*r,s=_(n,m.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case T.Short:return(i>=0?"+":"")+D(o,2,s)+D(Math.abs(i%60),2,s);case T.ShortGMT:return"GMT"+(i>=0?"+":"")+D(o,1,s);case T.Long:return"GMT"+(i>=0?"+":"")+D(o,2,s)+":"+D(Math.abs(i%60),2,s);case T.Extended:return 0===r?"Z":(i>=0?"+":"")+D(o,2,s)+":"+D(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const F=0,$=4;function L(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=function(t){const e=new Date(t,F,1).getDay();return new Date(t,0,1+(e<=$?$:$+7)-e)}(n.getFullYear()),e=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+($-s.getDay()))).getTime()-t.getTime();i=1+Math.round(e/6048e5)}var s;return D(i,t,_(r,m.MinusSign))}}const j={};function B(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function V(t){return t instanceof Date&&!isNaN(t.valueOf())}const W=new r.p("UseV4Plurals");class U{}class H extends U{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):w(e||this.locale)(t)){case d.Zero:return"zero";case d.One:return"one";case d.Two:return"two";case d.Few:return"few";case d.Many:return"many";default:return"other"}}}function G(t,e,n){"string"!=typeof e&&(n=e,e=t[r.eb.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),r.db[e]=t,n&&(r.db[e][r.eb.ExtraData]=n)}function q(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class K{}class Y{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}getValue(){return null}setClass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.yb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.Mb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}let X=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})();class Z extends X{constructor(t){super(t)}set klass(t){this._delegate.setClass(t)}set ngClass(t){this._delegate.setNgClass(t)}ngDoCheck(){this._delegate.applyChanges()}}class Q{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class J{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.X)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. `+"See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Q(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new tt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new tt(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class tt{constructor(t,e){this.record=t,this.view=e}}class et{constructor(t,e){this._viewContainer=t,this._context=new nt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class nt{constructor(){this.$implicit=null,this.ngIf=null}}function rt(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.Mb)(e)}'.`)}class it{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}class st{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}class ot{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new it(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}class lt{constructor(t,e,n){n._addDefault(new it(t,e))}}class at{}class ut{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n}getValue(){return null}setNgStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}applyChanges(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}let ct=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})();class ht extends ct{constructor(t){super(t)}set ngStyle(t){this._delegate.setNgStyle(t)}ngDoCheck(){this._delegate.applyChanges()}}class dt{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){this._shouldRecreateView(t)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(t){const e=t.ngTemplateOutletContext;return!!t.ngTemplateOutlet||e&&this._hasContextShapeChanged(e)}_hasContextShapeChanged(t){const e=Object.keys(t.previousValue||{}),n=Object.keys(t.currentValue||{});if(e.length===n.length){for(let t of n)if(-1===e.indexOf(t))return!0;return!1}return!0}_updateExistingContext(t){for(let e of Object.keys(t))this._viewRef.context[e]=this.ngTemplateOutletContext[e]}}function pt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.Mb)(t)}'`)}class ft{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class gt{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const mt=new gt,bt=new ft;class yt{constructor(t){this._ref=t,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):Object(r.Bb)(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.R.wrap(this._latestValue)):(t&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(t){if(Object(r.Ab)(t))return mt;if(Object(r.zb)(t))return bt;throw pt(yt,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}class vt{constructor(t){this.locale=t}transform(t,e="mediumDate",n,r){if(null==t||""===t||t!=t)return null;try{return I(t,e,r||this.locale,n)}catch(i){throw pt(vt,i.message)}}}class _t{transform(t,e,n){if(null==t)return t;if(!this.supports(t))throw pt(_t,t);return t.slice(e,n)}supports(t){return"string"==typeof t||Array.isArray(t)}}class wt{}const xt=new r.p("DocumentToken"),Ct="browser",St="server";function Ot(t){return t===Ct}function kt(t){return t===St}let Et=(()=>{class t{}return t.ngInjectableDef=Object(r.Tb)({token:t,providedIn:"root",factory:()=>new Tt(Object(r.Ub)(xt),window,Object(r.Ub)(r.l))}),t})();class Tt{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const n=this.document.querySelector(`#${t}`);if(n)return void this.scrollToElement(n);const r=this.document.querySelector(`[name='${t}']`);if(r)return void this.scrollToElement(r)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n("HDdC"),i=n("ngJS"),s=n("a7t3"),o=n("pLzU"),l=n("CRDf"),a=n("I55L"),u=n("c2HN"),c=n("XoHu"),h=n("Lhse"),d=n("kJWO");const p=t=>{if(t instanceof r.a)return e=>t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e);if(t&&"function"==typeof t[d.a])return Object(l.a)(t);if(Object(a.a)(t))return Object(i.a)(t);if(Object(u.a)(t))return Object(s.a)(t);if(t&&"function"==typeof t[h.a])return Object(o.a)(t);{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}}},SiFy:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("cp0P"),i=n("yrbL");class s{constructor(t,e){this.memberServe=t,this.router=e}resolve(t){const e=t.paramMap.get("id");if(e)return Object(r.a)([this.memberServe.getUserDetail(e),this.memberServe.getUserRecord(e)]).pipe(Object(i.first)());this.router.navigate(["/home"])}}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},"Sq/J":function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r=n("8Y7J"),i=n("FPpa"),s=(n("QfCi"),n("SVse")),o=n("QQfA"),l=n("IP0z"),a=(n("zMNK"),n("/HVE"),n("hOhj"),n("5VGP")),u=(n("W4B1"),n("omvX")),c=r.rb({encapsulation:2,styles:["\n      .ant-popover {\n        position: relative;\n      }\n    "],data:{animation:[{type:7,name:"zoomBigMotion",definitions:[{type:1,expr:"void => active",animation:[{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"0.2s cubic-bezier(0.08, 0.82, 0.17, 1)"}],options:null},{type:1,expr:"active => void",animation:[{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},timings:"0.2s cubic-bezier(0.78, 0.14, 0.15, 0.86)"}],options:null}],options:{}}]}});function h(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-popover-title"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,h)),r.sb(2,540672,null,0,a.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzTitle)},null)}function p(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzContent)})}function f(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,14,"div",[["class","ant-popover"]],[[24,"@zoomBigMotion",0],[24,"@.disabled",0]],[[null,"@zoomBigMotion.done"]],function(t,e,n){var r=!0;return"@zoomBigMotion.done"===e&&(r=!1!==t.component._afterVisibilityAnimation(n)&&r),r},null,null)),r.Kb(512,null,s.D,s.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,s.j,[s.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Kb(512,null,s.F,s.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,s.o,[s.F],{ngStyle:[0,"ngStyle"]},null),r.sb(5,4734976,null,0,a.q,[r.k,r.D,[2,u.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(6,0,null,null,8,"div",[["class","ant-popover-content"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,0,"div",[["class","ant-popover-arrow"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,6,"div",[["class","ant-popover-inner"],["role","tooltip"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,5,"div",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,d)),r.sb(11,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(12,0,null,null,2,"div",[["class","ant-popover-inner-content"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,p)),r.sb(14,540672,null,0,a.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-popover",n._classMap),t(e,4,0,n.nzOverlayStyle),t(e,5,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,11,0,n.nzTitle),t(e,14,0,n.nzContent)},function(t,e){t(e,0,0,"active",r.Fb(e,5).nzNoAnimation)})}function g(t){return r.Pb(2,[r.Lb(671088640,1,{overlay:0}),r.Eb(null,0),(t()(),r.ib(16777216,null,null,3,function(t,e,n){var r=!0,i=t.component;return"backdropClick"===e&&(r=!1!==i.hide()&&r),"detach"===e&&(r=!1!==i.hide()&&r),"positionChange"===e&&(r=!1!==i.onPositionChange(n)&&r),r},f)),r.sb(3,671744,[[1,4],["overlay",4]],0,o.a,[o.d,r.L,r.P,o.l,[2,l.b]],{origin:[0,"origin"],positions:[1,"positions"],open:[2,"open"],hasBackdrop:[3,"hasBackdrop"]},{backdropClick:"backdropClick",positionChange:"positionChange",detach:"detach"}),r.Hb(131072,s.b,[r.h]),r.sb(5,16384,null,0,a.l,[o.a],null,null)],function(t,e){var n=e.component;t(e,3,0,n.overlayOrigin,n._positions,r.Ob(e,3,2,r.Fb(e,4).transform(n.visible$)),n._hasBackdrop)},null)}function m(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"nz-popover",[],null,null,null,g,c)),r.sb(1,573440,null,2,i.a,[r.h,[2,a.q]],null,null),r.Lb(335544320,1,{nzTitle:0}),r.Lb(335544320,2,{nzContent:0})],null,null)}var b=r.pb("nz-popover",i.a,m,{nzTitle:"nzTitle",nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzMouseEnterDelay:"nzMouseEnterDelay",nzMouseLeaveDelay:"nzMouseLeaveDelay",nzVisible:"nzVisible",nzTrigger:"nzTrigger",nzPlacement:"nzPlacement",nzContent:"nzContent"},{nzVisibleChange:"nzVisibleChange"},["*"])},SqDy:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.count=function(t){return function(e){return e.lift(new s(t,e))}};var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.source))},t}(),o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return r(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(i.Subscriber)},SrrE:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n("6B6o"),n("WnZk");const r={title:"\u6b4c\u66f2\u8be6\u60c5"};class i{}},Sxl1:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.expand=function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new o(t,e,n))}};var o=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=o;var l=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s.project=n,s.concurrent=r,s.scheduler=i,s.index=0,s.active=0,s.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(s.buffer=[]),s}return r(e,t),e.dispatch=function(t){t.subscriber.subscribeToProjection(t.result,t.value,t.index)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){n.next(t);try{var i=(0,this.project)(t,r);this.scheduler?this.destination.add(this.scheduler.schedule(e.dispatch,0,{subscriber:this,result:i,value:t,index:r})):this.subscribeToProjection(i,t,r)}catch(s){n.error(s)}}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.destination.add(s.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(i.OuterSubscriber);e.ExpandSubscriber=l},"T/FJ":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.every=function(t,e){return function(n){return n.lift(new s(t,e,n))}};var s=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg,this.source))},t}(),o=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s.predicate=n,s.thisArg=r,s.source=i,s.index=0,s.thisArg=r||s,s}return r(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},T2d4:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){if(!(e instanceof Array))throw new TypeError(toString.call(e)+" is not an instance of Array");var n,i,s=r(t).getTime();return e.forEach(function(t){var e=r(t),o=Math.abs(s-e.getTime());(void 0===n||o<i)&&(n=e,i=o)}),n}},TAn0:function(t,e,n){"use strict";var r=n("6aLS"),i=n("yoF8");e.switchAll=function(){return r.switchMap(i.identity)}},Tkif:function(t,e,n){"use strict";var r=n("YK4L");function i(t,e,n){return 0===n?[e]:(t.push(e),t)}e.toArray=function(){return r.reduce(i,[])}},U2p0:function(t,e,n){var r=n("mrSG").__extends,i=n("1pIY"),s=n("R7wr"),o=n("FWf1"),l=n("xKqS");e.delay=function(t,e){void 0===e&&(e=i.async);var n=s.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new a(n,e))}};var a=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.delay,this.scheduler))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return r(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var s=Math.max(0,n[0].time-r.now());this.schedule(t,s)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new c(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(l.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(l.Notification.createComplete()),this.unsubscribe()},e}(o.Subscriber),c=function(){return function(t,e){this.time=t,this.notification=e}}()},U77E:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{constructor(){}onmousedown(t){t.preventDefault()}}},UGPC:function(t,e,n){var r=n("mrSG").__extends;e.AsapScheduler=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(n("NTcF").AsyncScheduler)},UNqx:function(t,e,n){var r=n("mrSG").__extends,i=n("cSoz"),s=n("Y4kR"),o=n("Vi6O"),l=n("q3Kh"),a=n("gTqA");e.mergeMap=function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return a.from(e(t,r)).pipe(l.map(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new u(e,r))})};var u=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.concurrent))},t}();e.MergeMapOperator=u;var c=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new o.InnerSubscriber(this,void 0,void 0);this.destination.add(r),i.subscribeToResult(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=c},UO0F:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"b",function(){return a}),n.d(e,"e",function(){return u});var r=n("8Y7J"),i=(n("kS4m"),n("SVse"),n("s7LF"),n("5GAg"),r.rb({encapsulation:2,styles:[],data:{}}));function s(t){return r.Pb(2,[r.Lb(671088640,1,{inputElement:0}),(t()(),r.tb(1,0,null,null,2,"span",[["class","ant-radio-button"]],[[2,"ant-radio-button-checked",null],[2,"ant-radio-button-disabled",null]],null,null,null,null)),(t()(),r.tb(2,0,[[1,0],["inputElement",1]],null,0,"input",[["class","ant-radio-button-input"],["type","radio"]],[[8,"disabled",0],[8,"checked",0],[1,"name",0]],null,null,null,null)),(t()(),r.tb(3,0,null,null,0,"span",[["class","ant-radio-button-inner"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,1,"span",[],null,null,null,null,null)),r.Eb(null,0)],null,function(t,e){var n=e.component;t(e,1,0,n.checked,n.nzDisabled),t(e,2,0,n.nzDisabled,n.checked,n.name)})}var o=r.rb({encapsulation:2,styles:[],data:{}});function l(t){return r.Pb(2,[r.Eb(null,0)],null,null)}var a=r.rb({encapsulation:2,styles:[],data:{}});function u(t){return r.Pb(2,[r.Lb(671088640,1,{inputElement:0}),(t()(),r.tb(1,0,null,null,2,"span",[["class","ant-radio"]],[[2,"ant-radio-checked",null],[2,"ant-radio-disabled",null]],null,null,null,null)),(t()(),r.tb(2,0,[[1,0],["inputElement",1]],null,0,"input",[["class","ant-radio-input"],["type","radio"]],[[8,"disabled",0],[8,"checked",0],[1,"name",0]],null,null,null,null)),(t()(),r.tb(3,0,null,null,0,"span",[["class","ant-radio-inner"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,1,"span",[],null,null,null,null,null)),r.Eb(null,0)],null,function(t,e){var n=e.component;t(e,1,0,n.checked,n.nzDisabled),t(e,2,0,n.nzDisabled,n.checked,n.name)})}},UpIE:function(t,e,n){var r=n("y5a+");t.exports=function(t){return r(t,{weekStartsOn:1})}},"Us+F":function(t,e,n){var r=n("LZbM"),i=n("6DAA");t.exports={distanceInWords:r(),format:i()}},VBar:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getFullYear(),i=e.getMonth(),s=new Date(0);return s.setFullYear(n,i+1,0),s.setHours(0,0,0,0),s.getDate()}},VFZO:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.dematerialize=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(i.Subscriber)},VGX7:function(t,e){t.exports=function(t){var e=new Date(t.getTime()),n=e.getTimezoneOffset();return e.setSeconds(0,0),6e4*n+e.getTime()%6e4}},VKeD:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}e.getSymbolIterator=r,e.iterator=r(),e.$$iterator=e.iterator},VLYi:function(t,e,n){"use strict";var r=n("rxKr");e.findIndex=function(t,e){return function(n){return n.lift(new r.FindValueOperator(t,n,!0,e))}}},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("z+Ro"),s=n("bHdf"),o=n("yCtX");function l(...t){let e=Number.POSITIVE_INFINITY,n=null,l=t[t.length-1];return Object(i.a)(l)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof l&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(s.a)(e)(Object(o.a)(t,n))}},VbP7:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("5VGP"),n("XNiG"),n("quSY"),n("1G5W"),n("nYR2"),n("mrSG");class r{}},Vf9T:function(t,e,n){var r=n("mrSG").__extends,i=n("1pIY"),s=n("R7wr"),o=n("Y4kR"),l=n("cSoz");e.timeoutWith=function(t,e,n){return void 0===n&&(n=i.async),function(r){var i=s.isDate(t),o=i?+t-n.now():Math.abs(t);return r.lift(new a(o,i,e,n))}};var a=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),u=function(t){function e(e,n,r,i,s){var o=t.call(this,e)||this;return o.absoluteTimeout=n,o.waitFor=r,o.withObservable=i,o.scheduler=s,o.action=null,o.scheduleTimeout(),o}return r(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(l.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(o.OuterSubscriber)},Vi6O:function(t,e,n){var r=n("mrSG").__extends;e.InnerSubscriber=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n("FWf1").Subscriber)},W4B1:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return u});var r=n("8Y7J"),i=n("2Vo4"),s=n("quSY"),o=n("5VGP"),l=n("/uUt");class a{constructor(t,e){this.cdr=t,this.noAnimation=e,this._hasBackdrop=!1,this._prefix="ant-tooltip-placement",this._positions=[...o.f],this._classMap={},this._placement="top",this._trigger="hover",this.visibleSource=new i.a(!1),this.visible$=this.visibleSource.asObservable(),this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzMouseEnterDelay=.15,this.nzMouseLeaveDelay=.1,this.nzVisibleChange=new r.m}set nzVisible(t){const e=Object(o.mb)(t);this.visibleSource.value!==e&&(this.visibleSource.next(e),this.nzVisibleChange.emit(e))}get nzVisible(){return this.visibleSource.value}set nzTrigger(t){this._trigger=t,this._hasBackdrop="click"===this._trigger}get nzTrigger(){return this._trigger}set nzPlacement(t){t!==this._placement&&(this._placement=t,this._positions=[o.B[this.nzPlacement],...this._positions])}get nzPlacement(){return this._placement}ngOnChanges(){Promise.resolve().then(()=>{this.updatePosition()})}updatePosition(){this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}onPositionChange(t){this._placement=Object(o.N)(t),this.setClassMap(),this.cdr.detectChanges()}show(){this.isContentEmpty()||(this.nzVisible=!0)}hide(){this.nzVisible=!1}_afterVisibilityAnimation(t){"false"!==t.toState||this.nzVisible||this.nzVisibleChange.emit(!1),"true"===t.toState&&this.nzVisible&&this.nzVisibleChange.emit(!0)}setClassMap(){this._classMap={[this.nzOverlayClassName]:!0,[`${this._prefix}-${this._placement}`]:!0}}setOverlayOrigin(t){this.overlayOrigin=t}isContentEmpty(){return!(this.nzTitle instanceof r.L||""!==this.nzTitle&&Object(o.T)(this.nzTitle))}}class u{constructor(t,e,n,i,o,l){this.elementRef=t,this.hostView=e,this.resolver=n,this.renderer=i,this.tooltip=o,this.noAnimation=l,this.isTooltipOpen=!1,this.isDynamicTooltip=!1,this.factory=this.resolver.resolveComponentFactory(a),this.needProxyProperties=["nzTitle","nzContent","nzOverlayClassName","nzOverlayStyle","nzMouseEnterDelay","nzMouseLeaveDelay","nzVisible","nzTrigger","nzPlacement"],this.subs_=new s.a,this.listeners=[],this.nzVisibleChange=new r.m}set setTitle(t){this.nzTitle=t}ngOnChanges(t){this.updateProxies(t)}ngOnInit(){if(!this.tooltip){const t=this.hostView.createComponent(this.factory);this.tooltip=t.instance,this.tooltip.noAnimation=this.noAnimation,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),t.location.nativeElement),this.isDynamicTooltip=!0,this.needProxyProperties.forEach(t=>this.updateCompValue(t,this[t]));const e=this.tooltip.nzVisibleChange.pipe(Object(l.a)()).subscribe(t=>{this.visible=t,this.nzVisibleChange.emit(t)});this.subs_.add(e)}this.tooltip.setOverlayOrigin(this)}ngAfterViewInit(){if("hover"===this.tooltip.nzTrigger){let t;const e=this.renderer.listen(this.elementRef.nativeElement,"mouseenter",()=>this.delayEnterLeave(!0,!0,this.tooltip.nzMouseEnterDelay));this.listeners.push(e);const n=this.renderer.listen(this.elementRef.nativeElement,"mouseleave",()=>{if(this.delayEnterLeave(!0,!1,this.tooltip.nzMouseLeaveDelay),this.tooltip.overlay.overlayRef&&!t){const e=this.renderer.listen(t=this.tooltip.overlay.overlayRef.overlayElement,"mouseenter",()=>this.delayEnterLeave(!1,!0));this.listeners.push(e);const n=this.renderer.listen(t,"mouseleave",()=>this.delayEnterLeave(!1,!1));this.listeners.push(n)}});this.listeners.push(n)}else if("focus"===this.tooltip.nzTrigger){const t=this.renderer.listen(this.elementRef.nativeElement,"focus",()=>this.show());this.listeners.push(t);const e=this.renderer.listen(this.elementRef.nativeElement,"blur",()=>this.hide());this.listeners.push(e)}else if("click"===this.tooltip.nzTrigger){const t=this.renderer.listen(this.elementRef.nativeElement,"click",t=>{t.preventDefault(),this.show()});this.listeners.push(t)}}ngOnDestroy(){this.subs_.unsubscribe(),this.listeners.forEach(t=>{t()})}updateCompValue(t,e){this.isDynamicTooltip&&Object(o.T)(e)&&(this.tooltip[t]=e,this.tooltip.setClassMap(),Promise.resolve().then(()=>{this.tooltip.updatePosition()}))}show(){this.tooltip.show(),this.isTooltipOpen=!0}hide(){this.tooltip.hide(),this.isTooltipOpen=!1}delayEnterLeave(t,e,n=-1){this.delayTimer?(clearTimeout(this.delayTimer),this.delayTimer=null):n>0?this.delayTimer=setTimeout(()=>{this.delayTimer=null,e?this.show():this.hide()},1e3*n):e&&t?this.show():this.hide()}updateProxies(t){this.tooltip&&(Object.keys(t).forEach(e=>{const n=t[e];n&&this.updateCompValue(e,n.currentValue)}),t.setTitle&&(this.nzTitle=t.setTitle.currentValue,this.updateCompValue("nzTitle",t.setTitle.currentValue)),this.tooltip.cdr.markForCheck())}}class c{}},W96K:function(t,e,n){"use strict";var r=n("pWCv"),i=n("0z0v");function s(){return new i.EmptyError}e.throwIfEmpty=function(t){return void 0===t&&(t=s),r.tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})}},WA8B:function(t,e,n){var r=n("yNUO"),i=n("pLeS"),s=n("1CCG");t.exports=function(t){var e=r(t);return s(e,i(e))+1}},WDqD:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("IKal");e.skipLast=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(0===this._skipCount?new i.Subscriber(t):new l(t,this._skipCount))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return r(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,s=i[r];i[r]=t,this.destination.next(s)}},e}(i.Subscriber)},WHuz:function(t,e,n){"use strict";var r=n("+Zhm");e.shareReplay=function(t,e,n){var i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,s=i.bufferSize,o=void 0===s?Number.POSITIVE_INFINITY:s,l=i.windowTime,a=void 0===l?Number.POSITIVE_INFINITY:l,u=i.refCount,c=i.scheduler,h=0,d=!1,p=!1;return function(t){h++,e&&!d||(d=!1,e=new r.ReplaySubject(o,a,c),n=t.subscribe({next:function(t){e.next(t)},error:function(t){d=!0,e.error(t)},complete:function(){p=!0,e.complete()}}));var i=e.subscribe(this);this.add(function(){h--,i.unsubscribe(),n&&!p&&u&&0===h&&(n.unsubscribe(),n=void 0,e=void 0)})}}())}}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("EY2u"),i=n("LRne"),s=n("z6cu");let o=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(s.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},WPSl:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("5VGP"),n("mrSG");class r{}},Wjgk:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 4===r(t).getDay()}},WmBB:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}},WmCX:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("yrbL"),i=n("DQLy"),s=n("hLrw"),o=n("calH"),l=n("XNiG"),a=n("kujU");class u{constructor(t,e,n,i,s,o){this.route=t,this.store$=e,this.songServe=n,this.batchActionServe=i,this.nzMessageServe=s,this.memberServe=o,this.currentIndex=-1,this.hasLiked=!1,this.destroy$=new l.a,this.route.data.pipe(Object(r.map)(t=>t.singerDetail)).subscribe(([t,e])=>{this.singerDetail=t,this.simiSingers=e,this.listenCurrent()})}ngOnInit(){}listenCurrent(){this.store$.pipe(Object(i.z)(s.f),Object(i.z)(s.c),Object(r.takeUntil)(this.destroy$)).subscribe(t=>{this.currentSong=t,this.currentIndex=t?Object(o.a)(this.singerDetail.hotSongs,t):-1})}onAddSongs(t,e=!1){this.songServe.getSongList(t).subscribe(t=>{t.length&&(e?this.batchActionServe.selectPlayList({list:t,index:0}):this.batchActionServe.insertSongs(t))})}onAddSong(t,e=!1){this.currentSong&&this.currentSong.id===t.id||this.songServe.getSongList(t).subscribe(t=>{t.length?this.batchActionServe.insertSong(t[0],e):this.nzMessageServe.create("warning","\u65e0url!")})}onLikeSinger(t){let e={type:1,msg:"\u6536\u85cf"};this.hasLiked&&(e={type:2,msg:"\u53d6\u6d88\u6536\u85cf"}),this.memberServe.likeSinger(t,e.type).subscribe(()=>{this.hasLiked=!this.hasLiked,this.nzMessageServe.create("success",e.msg+"\u6210\u529f")},t=>{this.nzMessageServe.create("error",t.msg||e.msg+"\u5931\u8d25")})}onLikeSongs(t){const e=t.map(t=>t.id).join(",");this.onLikeSong(e)}onLikeSong(t){this.batchActionServe.likeSong(t)}onShareSong(t,e="song"){const n=this.makeTxt("\u6b4c\u66f2",t.name,t.ar);this.store$.dispatch(Object(a.d)({info:{id:t.id.toString(),type:e,txt:n}}))}makeTxt(t,e,n){return`${t}: ${e} -- ${n.map(t=>t.name).join("/")}`}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}},WnZk:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n("XOhD");var r=n("cp0P"),i=n("yrbL");class s{constructor(t){this.songServe=t}resolve(t){const e=t.paramMap.get("id");return Object(r.a)([this.songServe.getSongDetail(e),this.songServe.getLyric(Number(e))]).pipe(Object(i.first)())}}},Wxhx:function(t,e,n){"use strict";var r=n("ds6q"),i=n("7K7o");e.publish=function(t){return t?i.multicast(function(){return new r.Subject},t):i.multicast(new r.Subject)}},X7Z7:function(t,e,n){"use strict";var r=n("IKal"),i=n("4ik+"),s=n("W96K"),o=n("1Z+e"),l=n("Dxa7");e.elementAt=function(t,e){if(t<0)throw new r.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(a){return a.pipe(i.filter(function(e,n){return n===t}),l.take(1),n?o.defaultIfEmpty(e):s.throwIfEmpty(function(){return new r.ArgumentOutOfRangeError}))}}},XBfi:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SDxy"),s=n("KcsS"),o=n("UO0F"),l=n("kS4m"),a=n("s7LF"),u=n("5GAg"),c=n("SVse"),h=n("ZTLX"),d=n("vZsH"),p=n("Rgb0"),f=n("7kRp"),g=n("iInd"),m=n("mKz/"),b=n("ssPz");n.d(e,"a",function(){return x});var y=r.rb({encapsulation:0,styles:[[".sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]{padding:40px}.sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:2px solid #c10d0c;padding-bottom:10px}.sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;color:#000}.sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:30px 0}.sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .sheet-item[_ngcontent-%COMP%]{width:140px;height:204px;margin-right:49.4px}.sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .sheet-item[_ngcontent-%COMP%]:nth-of-type(5n){margin-right:0}.sheet[_ngcontent-%COMP%]   .list-r[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-single-sheet",[["class","sheet-item"]],null,[[null,"onPlay"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"onPlay"===e&&(r=!1!==i.onPlaySheet(n)&&r),"click"===e&&(r=!1!==i.toInfo(t.context.$implicit.id)&&r),r},i.b,i.a)),r.sb(1,114688,null,0,s.a,[],{sheet:[0,"sheet"]},{onPlay:"onPlay"})],function(t,e){t(e,1,0,e.context.$implicit)},null)}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,27,"div",[["class","sheet wrap feature-wrap"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,26,"div",[["class","list-r"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,20,"div",[["class","top"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,2,"div",[["class","cat"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(5,null,["",""])),(t()(),r.tb(6,0,null,null,16,"nz-radio-group",[["nzButtonStyle","solid"]],[[2,"ant-radio-group-large",null],[2,"ant-radio-group-small",null],[2,"ant-radio-group-solid",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,e,n){var r=!0,i=t.component;return"ngModelChange"===e&&(r=!1!==(i.orderValue=n)&&r),"ngModelChange"===e&&(r=!1!==i.onOrderChange(n)&&r),r},o.f,o.c)),r.sb(7,1753088,null,1,l.c,[r.h,r.D,r.k],{nzButtonStyle:[0,"nzButtonStyle"]},null),r.Lb(603979776,1,{radios:1}),r.Kb(1024,null,a.l,function(t){return[t]},[l.c]),r.sb(10,671744,null,0,a.p,[[8,null],[8,null],[8,null],[6,a.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,a.m,null,[a.p]),r.sb(12,16384,null,0,a.n,[[4,a.m]],null,null),(t()(),r.tb(13,0,null,0,4,"label",[["nz-radio-button",""],["nzValue","hot"]],[[2,"ant-radio-button-wrapper-checked",null],[2,"ant-radio-button-wrapper-disabled",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,15).onClick(n)&&i),i},o.d,o.a)),r.Kb(5120,null,a.l,function(t){return[t]},[l.b]),r.sb(15,4898816,null,0,l.a,[r.k,r.D,r.h,u.a],{nzValue:[0,"nzValue"]},null),r.Kb(2048,[[1,4]],l.b,null,[l.a]),(t()(),r.Nb(-1,0,["\u70ed\u95e8"])),(t()(),r.tb(18,0,null,0,4,"label",[["nz-radio-button",""],["nzValue","new"]],[[2,"ant-radio-button-wrapper-checked",null],[2,"ant-radio-button-wrapper-disabled",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,20).onClick(n)&&i),i},o.d,o.a)),r.Kb(5120,null,a.l,function(t){return[t]},[l.b]),r.sb(20,4898816,null,0,l.a,[r.k,r.D,r.h,u.a],{nzValue:[0,"nzValue"]},null),r.Kb(2048,[[1,4]],l.b,null,[l.a]),(t()(),r.Nb(-1,0,["\u6700\u65b0"])),(t()(),r.tb(23,0,null,null,2,"div",[["class","list"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(25,278528,null,0,c.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(26,0,null,null,1,"nz-pagination",[["class","pagination"]],null,[[null,"nzPageIndexChange"]],function(t,e,n){var r=!0;return"nzPageIndexChange"===e&&(r=!1!==t.component.onPageChange(n)&&r),r},h.b,h.a)),r.sb(27,770048,null,0,d.a,[p.d,r.h],{nzTotal:[0,"nzTotal"],nzPageIndex:[1,"nzPageIndex"],nzPageSize:[2,"nzPageSize"]},{nzPageIndexChange:"nzPageIndexChange"})],function(t,e){var n=e.component;t(e,7,0,"solid"),t(e,10,0,n.orderValue),t(e,15,0,"hot"),t(e,20,0,"new"),t(e,25,0,null==n.sheets?null:n.sheets.playlists),t(e,27,0,null==n.sheets?null:n.sheets.total,n.listParams.offset,n.listParams.limit)},function(t,e){t(e,5,0,e.component.listParams.cat),t(e,6,0,"large"===r.Fb(e,7).nzSize,"small"===r.Fb(e,7).nzSize,"solid"===r.Fb(e,7).nzButtonStyle,r.Fb(e,12).ngClassUntouched,r.Fb(e,12).ngClassTouched,r.Fb(e,12).ngClassPristine,r.Fb(e,12).ngClassDirty,r.Fb(e,12).ngClassValid,r.Fb(e,12).ngClassInvalid,r.Fb(e,12).ngClassPending),t(e,13,0,r.Fb(e,15).checked,r.Fb(e,15).nzDisabled),t(e,18,0,r.Fb(e,20).checked,r.Fb(e,20).nzDisabled)})}function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-sheet-list",[],null,null,null,_,y)),r.sb(1,114688,null,0,f.a,[g.a,g.n,m.a,b.a],null,null)],function(t,e){t(e,1,0)},null)}var x=r.pb("app-sheet-list",f.a,w,{},{},[])},XFzh:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l});var r=n("mrSG"),i=n("8Y7J"),s=n("5VGP");let o=(()=>{class t{constructor(t,e,n){this.renderer=t,this.elementRef=e,this.nzUpdateHostClassService=n,this.presetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzNoAnimation=!1,this.nzAfterClose=new i.m,this.nzOnClose=new i.m,this.nzCheckedChange=new i.m}isPresetColor(t){return!!t&&/^(pink|red|yellow|orange|cyan|green|blue|purple|geekblue|magenta|volcano|gold|lime)(-inverse)?$/.test(t)}updateClassMap(){this.presetColor=this.isPresetColor(this.nzColor),this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{"ant-tag":!0,"ant-tag-has-color":this.nzColor&&!this.presetColor,[`ant-tag-${this.nzColor}`]:this.presetColor,"ant-tag-checkable":"checkable"===this.nzMode,"ant-tag-checkable-checked":this.nzChecked})}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked),this.updateClassMap())}closeTag(t){this.nzOnClose.emit(t),t.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}afterAnimation(t){"void"===t.toState&&this.nzAfterClose.emit()}ngOnInit(){this.updateClassMap()}ngOnChanges(){this.updateClassMap()}}return Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzChecked",void 0),Object(r.__decorate)([Object(s.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzNoAnimation",void 0),t})();class l{}},XKtA:function(t,e,n){"use strict";var r=n("7K7o"),i=n("4mvG"),s=n("ds6q");function o(){return new s.Subject}e.share=function(){return function(t){return i.refCount()(r.multicast(o)(t))}}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("HDdC"),i=n("7o/Q"),s=n("quSY"),o=n("9ppp"),l=n("Ylt2"),a=n("2QA8");class u extends i.a{constructor(t){super(t),this.destination=t}}let c=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[a.a](){return new u(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.a;return this.hasError?(t.error(this.thrownError),s.a.EMPTY):this.isStopped?(t.complete(),s.a.EMPTY):(this.observers.push(t),new l.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends c{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.a.EMPTY}}},XOhD:function(t,e){},"XPT/":function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c});var r=n("IheW"),i=n("yrbL"),s=n("cr+I"),o=n.n(s),l=n("8Y7J"),a=n("334H"),u=function(t){return t[t.allData=0]="allData",t[t.weekData=1]="weekData",t}({});let c=(()=>{class t{constructor(t,e){this.http=t,this.uri=e}login(t){const e=new r.i({fromString:o.a.stringify(t)});return this.http.get(this.uri+"login/cellphone",{params:e}).pipe(Object(i.map)(t=>t))}getUserDetail(t){const e=new r.i({fromString:o.a.stringify({uid:t})});return this.http.get(this.uri+"user/detail",{params:e}).pipe(Object(i.map)(t=>t))}logout(){return this.http.get(this.uri+"logout").pipe(Object(i.map)(t=>t))}signin(){const t=new r.i({fromString:o.a.stringify({type:1})});return this.http.get(this.uri+"daily_signin",{params:t}).pipe(Object(i.map)(t=>t))}getUserRecord(t,e=u.weekData){const n=new r.i({fromString:o.a.stringify({uid:t,type:e})});return this.http.get(this.uri+"user/record",{params:n}).pipe(Object(i.map)(t=>t[u[e]]))}getUserSheets(t){const e=new r.i({fromString:o.a.stringify({uid:t})});return this.http.get(this.uri+"user/playlist",{params:e}).pipe(Object(i.map)(t=>{const e=t.playlist;return{self:e.filter(t=>!t.subscribed),subscribed:e.filter(t=>t.subscribed)}}))}likeSong({pid:t,tracks:e}){const n=new r.i({fromString:o.a.stringify({pid:t,tracks:e,op:"add"})});return this.http.get(this.uri+"playlist/tracks",{params:n}).pipe(Object(i.map)(t=>t.code))}likeSinger(t,e=1){const n=new r.i({fromString:o.a.stringify({id:t,t:e})});return this.http.get(this.uri+"artist/sub",{params:n}).pipe(Object(i.map)(t=>t.code))}createSheet(t){const e=new r.i({fromString:o.a.stringify({name:t})});return this.http.get(this.uri+"playlist/create",{params:e}).pipe(Object(i.map)(t=>t.id.toString()))}likeSheet(t,e=1){const n=new r.i({fromString:o.a.stringify({id:t,t:e})});return this.http.get(this.uri+"playlist/subscribe",{params:n}).pipe(Object(i.map)(t=>t.code))}shareResource({id:t,msg:e,type:n}){const s=new r.i({fromString:o.a.stringify({id:t,msg:e,type:n})});return this.http.get(this.uri+"share/resource",{params:s}).pipe(Object(i.map)(t=>t.code))}sendCode(t){const e=new r.i({fromString:o.a.stringify({phone:t})});return this.http.get(this.uri+"captcha/sent",{params:e}).pipe(Object(i.map)(t=>t.code))}checkCode(t,e){const n=new r.i({fromString:o.a.stringify({phone:t,captcha:e})});return this.http.get(this.uri+"captcha/verify",{params:n}).pipe(Object(i.map)(t=>t.code))}checkExist(t){const e=new r.i({fromString:o.a.stringify({phone:t})});return this.http.get(this.uri+"cellphone/existence/check",{params:e}).pipe(Object(i.map)(t=>t.exist))}}return t.ngInjectableDef=l.Tb({factory:function(){return new t(l.Ub(r.c),l.Ub(a.a))},token:t,providedIn:a.b}),t})()},XUOw:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t){const e=new r.a(e=>{e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},XZVX:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getHours()}},XdTn:function(t,e,n){var r=n("mrSG").__extends,i=n("iFGG");e.AsapAction=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=i.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(i.Immediate.clearImmediate(n),e.scheduled=void 0)},e}(n("2tF/").AsyncAction)},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},XoMe:function(t,e,n){"use strict";var r=n("0z0v"),i=n("4ik+"),s=n("Dxa7"),o=n("1Z+e"),l=n("W96K"),a=n("yoF8");e.first=function(t,e){var n=arguments.length>=2;return function(u){return u.pipe(t?i.filter(function(e,n){return t(e,n,u)}):a.identity,s.take(1),n?o.defaultIfEmpty(e):l.throwIfEmpty(function(){return new r.EmptyError}))}}},"Xwq/":function(t,e,n){"use strict";var r=n("FWf1"),i=n("p//D"),s=n("GiSu");e.toSubscriber=function(t,e,n){if(t){if(t instanceof r.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||n?new r.Subscriber(t,e,n):new r.Subscriber(s.empty)}},Y34a:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.pairwise=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return r(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(i.Subscriber)},Y4kR:function(t,e,n){var r=n("mrSG").__extends;e.OuterSubscriber=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(n("FWf1").Subscriber)},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},YK4L:function(t,e,n){"use strict";var r=n("vrE+"),i=n("76/Q"),s=n("1Z+e"),o=n("9AGB");e.reduce=function(t,e){return arguments.length>=2?function(n){return o.pipe(r.scan(t,e),i.takeLast(1),s.defaultIfEmpty(e))(n)}:function(e){return o.pipe(r.scan(function(e,n,r){return t(e,n,r+1)}),i.takeLast(1))(e)}}},YRt3:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("QQfA"),n("8Y7J"),n("5VGP"),n("mrSG"),n("XNiG"),n("1G5W");class r{}},YZbJ:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},YdS3:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("5VGP");class r{}},YlT8:function(t,e,n){var r=n("NmtT");t.exports=function(t,e){return r(Date.now(),t,e)}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},YuTi:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},Yzca:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("cp0P"),i=n("yrbL");class s{constructor(t,e){this.memberServe=t,this.router=e}resolve(t){const e=t.paramMap.get("id");if(e)return Object(r.a)([this.memberServe.getUserDetail(e),this.memberServe.getUserRecord(e),this.memberServe.getUserSheets(e)]).pipe(Object(i.first)());this.router.navigate(["/home"])}}},Yzd8:function(t,e,n){var r=n("yNUO");t.exports=function(t,e,n,i){var s=r(t).getTime(),o=r(e).getTime(),l=r(n).getTime(),a=r(i).getTime();if(s>o||l>a)throw new Error("The start of the range cannot be after the end of the range");return s<a&&l<o?Math.ceil(((a>o?o:a)-(l<s?s:l))/864e5):0}},Z303:function(t,e,n){"use strict";var r=n("1pIY"),i=n("vrE+"),s=n("b/k1"),o=n("q3Kh");e.timeInterval=function(t){return void 0===t&&(t=r.async),function(e){return s.defer(function(){return e.pipe(i.scan(function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}},{current:t.now(),value:void 0,last:void 0}),o.map(function(t){return new l(t.value,t.current-t.last)}))})}};var l=function(){return function(t,e){this.value=t,this.interval=e}}();e.TimeInterval=l},Z5tI:function(t,e,n){"use strict";var r=n("MkmW");e.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.hostReportError),e}}},ZFOp:function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},ZHwm:function(t,e,n){"use strict";var r=n("eYLY"),i=n("7K7o");e.publishLast=function(){return function(t){return i.multicast(new r.AsyncSubject)(t)}}},ZTLX:function(t,e,n){"use strict";var r=n("8Y7J"),i=(n("vZsH"),n("SVse")),s=n("s7LF"),o=n("QQfA"),l=n("IP0z"),a=(n("Rgb0"),n("/HVE")),u=(n("zMNK"),n("hOhj"),n("66zS")),c=n("5VGP"),h=n("mW00"),d=n("jTf7"),p=n("t4eL"),f=n("cUpR"),g=n("omvX"),m=n("5GAg"),b=r.rb({encapsulation:2,styles:[],data:{}});function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"li",[["class","ant-select-dropdown-menu-item ant-select-dropdown-menu-item-disabled"],["nz-select-unselectable",""]],[[1,"unselectable",0],[4,"user-select",null]],null,null,null,null)),r.sb(1,16384,null,0,d.k,[],null,null),(t()(),r.tb(2,16777216,null,null,1,"nz-embed-empty",[],null,null,null,p.b,p.a)),r.sb(3,770048,null,0,h.a,[h.d,f.b,r.P,r.h,r.q],{nzComponentName:[0,"nzComponentName"],specificContent:[1,"specificContent"]},null)],function(t,e){t(e,3,0,"select",e.component.nzNotFoundContent)},function(t,e){t(e,0,0,"unselectable","none")})}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"li",[["nz-option-li",""]],[[2,"ant-select-dropdown-menu-item-selected",null],[2,"ant-select-dropdown-menu-item-disabled",null],[2,"ant-select-dropdown-menu-item-active",null],[1,"unselectable",0],[4,"user-select",null]],[[null,"click"],[null,"mousedown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).clickOption()&&i),"mousedown"===e&&(i=!1!==n.preventDefault()&&i),i},$,A)),r.sb(1,245760,[[1,4]],0,d.f,[r.k,d.i,r.h,r.D],{nzOption:[0,"nzOption"],nzMenuItemSelectedIcon:[1,"nzMenuItemSelectedIcon"]},null)],function(t,e){var n=e.component;t(e,1,0,n.nzSelectService.addedTagOption,n.nzMenuItemSelectedIcon)},function(t,e){t(e,0,0,r.Fb(e,1).selected&&!r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).active&&!r.Fb(e,1).nzOption.nzDisabled,"unselectable","none")})}function _(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"li",[["nz-option-li",""]],[[2,"ant-select-dropdown-menu-item-selected",null],[2,"ant-select-dropdown-menu-item-disabled",null],[2,"ant-select-dropdown-menu-item-active",null],[1,"unselectable",0],[4,"user-select",null]],[[null,"click"],[null,"mousedown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).clickOption()&&i),"mousedown"===e&&(i=!1!==n.preventDefault()&&i),i},$,A)),r.sb(1,245760,[[1,4]],0,d.f,[r.k,d.i,r.h,r.D],{nzOption:[0,"nzOption"],nzMenuItemSelectedIcon:[1,"nzMenuItemSelectedIcon"]},null)],function(t,e){t(e,1,0,e.context.$implicit,e.component.nzMenuItemSelectedIcon)},function(t,e){t(e,0,0,r.Fb(e,1).selected&&!r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).active&&!r.Fb(e,1).nzOption.nzDisabled,"unselectable","none")})}function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.nzLabel)})}function x(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"li",[["nz-option-li",""]],[[2,"ant-select-dropdown-menu-item-selected",null],[2,"ant-select-dropdown-menu-item-disabled",null],[2,"ant-select-dropdown-menu-item-active",null],[1,"unselectable",0],[4,"user-select",null]],[[null,"click"],[null,"mousedown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).clickOption()&&i),"mousedown"===e&&(i=!1!==n.preventDefault()&&i),i},$,A)),r.sb(1,245760,[[1,4]],0,d.f,[r.k,d.i,r.h,r.D],{nzOption:[0,"nzOption"],nzMenuItemSelectedIcon:[1,"nzMenuItemSelectedIcon"]},null)],function(t,e){t(e,1,0,e.context.$implicit,e.component.nzMenuItemSelectedIcon)},function(t,e){t(e,0,0,r.Fb(e,1).selected&&!r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).active&&!r.Fb(e,1).nzOption.nzDisabled,"unselectable","none")})}function C(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,"li",[["class","ant-select-dropdown-menu-item-group"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,2,"div",[["class","ant-select-dropdown-menu-item-group-title"]],[[1,"title",0]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,w)),r.sb(3,540672,null,0,c.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.tb(4,0,null,null,3,"ul",[["class","ant-select-dropdown-menu-item-group-list"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,x)),r.sb(6,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),r.Jb(7,4)],function(t,e){var n=e.component;t(e,3,0,e.context.$implicit.nzLabel);var i=r.Ob(e,6,0,t(e,7,0,r.Fb(e.parent,0),e.context.$implicit.listOfNzOptionComponent,n.nzSelectService.searchValue,n.nzSelectService.filterOption,n.nzSelectService.serverSearch));t(e,6,0,i,n.trackValue)},function(t,e){t(e,1,0,e.context.$implicit.isLabelString?e.context.$implicit.nzLabel:"")})}function S(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"li",[["nz-option-li",""]],[[2,"ant-select-dropdown-menu-item-selected",null],[2,"ant-select-dropdown-menu-item-disabled",null],[2,"ant-select-dropdown-menu-item-active",null],[1,"unselectable",0],[4,"user-select",null]],[[null,"click"],[null,"mousedown"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,1).clickOption()&&i),"mousedown"===e&&(i=!1!==n.preventDefault()&&i),i},$,A)),r.sb(1,245760,[[1,4]],0,d.f,[r.k,d.i,r.h,r.D],{nzOption:[0,"nzOption"],nzMenuItemSelectedIcon:[1,"nzMenuItemSelectedIcon"]},null)],function(t,e){t(e,1,0,e.context.$implicit,e.component.nzMenuItemSelectedIcon)},function(t,e){t(e,0,0,r.Fb(e,1).selected&&!r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).nzOption.nzDisabled,r.Fb(e,1).active&&!r.Fb(e,1).nzOption.nzDisabled,"unselectable","none")})}function O(t){return r.Pb(2,[r.Hb(0,d.b,[]),r.Hb(0,d.a,[]),r.Lb(671088640,1,{listOfNzOptionLiComponent:1}),r.Lb(402653184,2,{dropdownUl:0}),(t()(),r.tb(4,0,[[2,0],["dropdownUl",1]],null,13,"ul",[["class","ant-select-dropdown-menu ant-select-dropdown-menu-root ant-select-dropdown-menu-vertical"],["role","menu"],["tabindex","0"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(6,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(8,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,2,null,_)),r.sb(10,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),r.Jb(11,4),(t()(),r.ib(16777216,null,null,2,null,C)),r.sb(13,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),r.Jb(14,4),(t()(),r.ib(16777216,null,null,2,null,S)),r.sb(16,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),r.Jb(17,4)],function(t,e){var n=e.component;t(e,6,0,n.nzSelectService.isShowNotFound),t(e,8,0,n.nzSelectService.addedTagOption);var i=r.Ob(e,10,0,t(e,11,0,r.Fb(e,0),n.nzSelectService.listOfNzOptionComponent,n.nzSelectService.searchValue,n.nzSelectService.filterOption,n.nzSelectService.serverSearch));t(e,10,0,i,n.trackValue);var s=r.Ob(e,13,0,t(e,14,0,r.Fb(e,1),n.nzSelectService.listOfNzOptionGroupComponent,n.nzSelectService.searchValue,n.nzSelectService.filterOption,n.nzSelectService.serverSearch));t(e,13,0,s,n.trackLabel);var o=r.Ob(e,16,0,t(e,17,0,r.Fb(e,0),n.nzSelectService.listOfTagOption,n.nzSelectService.searchValue,n.nzSelectService.filterOption,n.nzSelectService.serverSearch));t(e,16,0,o,n.trackValue)},null)}var k=r.rb({encapsulation:2,styles:[],data:{}});function E(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function T(t){return r.Pb(2,[r.Lb(671088640,1,{template:0}),(t()(),r.ib(0,[[1,2]],null,0,null,E))],null,null)}var z=r.rb({encapsulation:2,styles:["\n      .ant-select-dropdown {\n        top: 100%;\n        left: 0;\n        position: relative;\n        width: 100%;\n        margin-top: 4px;\n        margin-bottom: 4px;\n      }\n    "],data:{animation:[{type:7,name:"slideMotion",definitions:[{type:0,name:"bottom",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"},offset:null},options:void 0},{type:0,name:"top",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 100%"},offset:null},options:void 0},{type:1,expr:"void => bottom",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"bottom => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null},{type:1,expr:"void => top",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"top => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null}],options:{}}]}});function P(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function I(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,9,"div",[["class","ant-select-dropdown"]],[[2,"ant-select-dropdown--single",null],[2,"ant-select-dropdown--multiple",null],[2,"ant-select-dropdown-placement-bottomLeft",null],[2,"ant-select-dropdown-placement-topLeft",null],[24,"@slideMotion",0],[24,"@.disabled",0]],null,null,null,null)),r.Kb(512,null,i.F,i.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,i.o,[i.F],{ngStyle:[0,"ngStyle"]},null),r.sb(3,16384,null,0,c.k,[r.k,r.D],{nzClassListAdd:[0,"nzClassListAdd"]},null),r.Gb(4,1),r.sb(5,4734976,null,0,c.q,[r.k,r.D,[2,g.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(6,0,null,null,1,"div",[["nz-option-container",""],["style","overflow: auto;transform: translateZ(0px);"]],null,[[null,"keydown"],[null,"nzScrollToBottom"]],function(t,e,n){var r=!0,i=t.component;return"keydown"===e&&(r=!1!==i.onKeyDown(n)&&r),"nzScrollToBottom"===e&&(r=!1!==i.nzScrollToBottom.emit()&&r),r},O,b)),r.sb(7,245760,null,0,d.d,[d.i,r.h,r.y],{nzNotFoundContent:[0,"nzNotFoundContent"],nzMenuItemSelectedIcon:[1,"nzMenuItemSelectedIcon"]},{nzScrollToBottom:"nzScrollToBottom"}),(t()(),r.ib(16777216,null,null,1,null,P)),r.sb(9,540672,null,0,i.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzDropdownStyle);var r=t(e,4,0,n.nzDropdownClassName);t(e,3,0,r),t(e,5,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,7,0,n.nzNotFoundContent,n.nzMenuItemSelectedIcon),t(e,9,0,n.nzDropdownRender)},function(t,e){var n=e.component;t(e,0,0,n.nzSelectService.isSingleMode,n.nzSelectService.isMultipleOrTags,"bottom"===n.dropDownPosition,"top"===n.dropDownPosition,n.dropDownPosition,r.Fb(e,5).nzNoAnimation)})}function M(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function D(t){return r.Pb(2,[r.Lb(671088640,1,{cdkOverlayOrigin:0}),r.Lb(671088640,2,{cdkConnectedOverlay:0}),r.Lb(402653184,3,{nzSelectTopControlComponent:0}),(t()(),r.tb(3,0,null,null,3,"div",[["cdkOverlayOrigin",""],["class","ant-select-selection"],["nz-select-top-control",""],["tabindex","0"]],[[2,"ant-select-selection--single",null],[2,"ant-select-selection--multiple",null],[24,"@.disabled",0]],[[null,"keydown"]],function(t,e,n){var r=!0;return"keydown"===e&&(r=!1!==t.component.onKeyDown(n)&&r),r},ut,L)),r.sb(4,16384,[[1,4]],0,o.b,[r.k],null,null),r.sb(5,4734976,null,0,c.q,[r.k,r.D,[2,g.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),r.sb(6,245760,[[3,4]],0,d.j,[r.D,d.i,r.h,[2,c.q]],{nzShowSearch:[0,"nzShowSearch"],nzPlaceHolder:[1,"nzPlaceHolder"],nzOpen:[2,"nzOpen"],nzMaxTagCount:[3,"nzMaxTagCount"],nzAllowClear:[4,"nzAllowClear"],nzShowArrow:[5,"nzShowArrow"],nzLoading:[6,"nzLoading"],nzCustomTemplate:[7,"nzCustomTemplate"],nzSuffixIcon:[8,"nzSuffixIcon"],nzClearIcon:[9,"nzClearIcon"],nzRemoveIcon:[10,"nzRemoveIcon"],nzMaxTagPlaceholder:[11,"nzMaxTagPlaceholder"],nzTokenSeparators:[12,"nzTokenSeparators"]},null),(t()(),r.ib(16777216,null,null,2,function(t,e,n){var r=!0,i=t.component;return"backdropClick"===e&&(r=!1!==i.closeDropDown()&&r),"detach"===e&&(r=!1!==i.closeDropDown()&&r),"positionChange"===e&&(r=!1!==i.onPositionChange(n)&&r),r},I)),r.sb(8,671744,[[2,4]],0,o.a,[o.d,r.L,r.P,o.l,[2,l.b]],{origin:[0,"origin"],width:[1,"width"],minWidth:[2,"minWidth"],open:[3,"open"],hasBackdrop:[4,"hasBackdrop"]},{backdropClick:"backdropClick",positionChange:"positionChange",detach:"detach"}),r.sb(9,16384,null,0,c.l,[o.a],null,null),(t()(),r.ib(0,null,null,0,null,M))],function(t,e){var n=e.component;t(e,5,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,6,1,[n.nzShowSearch,n.nzPlaceHolder,n.open,n.nzMaxTagCount,n.nzAllowClear,n.nzShowArrow,n.nzLoading,n.nzCustomTemplate,n.nzSuffixIcon,n.nzClearIcon,n.nzRemoveIcon,n.nzMaxTagPlaceholder,n.nzTokenSeparators]),t(e,8,0,n.cdkOverlayOrigin,n.nzDropdownMatchSelectWidth?n.triggerWidth:null,n.nzDropdownMatchSelectWidth?null:n.triggerWidth,n.open,!0)},function(t,e){var n=e.component;t(e,3,0,n.nzSelectService.isSingleMode,n.nzSelectService.isMultipleOrTags,r.Fb(e,5).nzNoAnimation)})}var A=r.rb({encapsulation:2,styles:[],data:{}});function N(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,[" ","\n"]))],null,function(t,e){t(e,1,0,e.component.nzOption.nzLabel)})}function R(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-select-selected-icon"],["nz-icon",""],["nzType","check"]],null,null,null,null,null)),r.sb(1,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"check")},null)}function F(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,R)),r.sb(2,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,!n.nzMenuItemSelectedIcon,n.nzMenuItemSelectedIcon)},null)}function $(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,N)),r.sb(1,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(16777216,null,null,1,null,F)),r.sb(3,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,!n.nzOption.nzCustomContent,n.nzOption.template),t(e,3,0,n.nzSelectService.isMultipleOrTags)},null)}var L=r.rb({encapsulation:2,styles:[],data:{animation:[{type:7,name:"zoomMotion",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0,transform:"scale(0.2)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"0.2s cubic-bezier(0.08, 0.82, 0.17, 1)"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,transform:"scale(0.2)"},offset:null},timings:"0.2s cubic-bezier(0.78, 0.14, 0.15, 0.86)"}],options:null}],options:{}}]}});function j(t){return r.Pb(0,[(t()(),r.tb(0,0,[[1,0],["inputElement",1]],null,5,"input",[["autocomplete","something-new"],["class","ant-select-search__field"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"compositionstart"],[null,"compositionend"],[null,"input"],[null,"ngModelChange"],[null,"blur"]],function(t,e,n){var i=!0,s=t.component;return"input"===e&&(i=!1!==r.Fb(t,1)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,1).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,1)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,1)._compositionEnd(n.target.value)&&i),"compositionstart"===e&&(i=0!=(s.isComposing=!0)&&i),"compositionend"===e&&(i=0!=(s.isComposing=!1)&&i),"input"===e&&(i=!1!==s.updateWidth()&&i),"ngModelChange"===e&&(i=!1!==s.setInputValue(n)&&i),i},null,null)),r.sb(1,16384,null,0,s.d,[r.D,r.k,[2,s.a]],null,null),r.Kb(1024,null,s.l,function(t){return[t]},[s.d]),r.sb(3,671744,null,0,s.p,[[8,null],[8,null],[8,null],[6,s.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,s.m,null,[s.p]),r.sb(5,16384,null,0,s.n,[[4,s.m]],null,null)],function(t,e){var n=e.component;t(e,3,0,n.nzSelectService.disabled,n.inputValue)},function(t,e){t(e,0,0,r.Fb(e,5).ngClassUntouched,r.Fb(e,5).ngClassTouched,r.Fb(e,5).ngClassPristine,r.Fb(e,5).ngClassDirty,r.Fb(e,5).ngClassValid,r.Fb(e,5).ngClassInvalid,r.Fb(e,5).ngClassPending)})}function B(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-select-selection__placeholder"],["nz-select-unselectable",""]],[[4,"display",null],[1,"unselectable",0],[4,"user-select",null]],null,null,null,null)),r.sb(1,16384,null,0,d.k,[],null,null),(t()(),r.Nb(2,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,n.placeHolderDisplay,"unselectable","none"),t(e,2,0,n.nzPlaceHolder)})}function V(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(2,null,["",""]))],null,function(t,e){var n=e.component;t(e,2,0,null==n.nzSelectService.listOfCachedSelectedOption[0]?null:n.nzSelectService.listOfCachedSelectedOption[0].nzLabel)})}function W(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"div",[["class","ant-select-selection-selected-value"]],[[1,"title",0]],null,null,null,null)),r.Kb(512,null,i.F,i.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,i.o,[i.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.ib(16777216,null,null,2,null,V)),r.sb(4,540672,null,0,c.u,[r.P,r.L],{nzStringTemplateOutletContext:[0,"nzStringTemplateOutletContext"],nzStringTemplateOutlet:[1,"nzStringTemplateOutlet"]},null),r.Ib(5,{$implicit:0})],function(t,e){var n=e.component;t(e,2,0,n.selectedValueStyle);var r=t(e,5,0,n.nzSelectService.listOfCachedSelectedOption[0]);t(e,4,0,r,n.nzCustomTemplate)},function(t,e){var n=e.component;t(e,0,0,null==n.nzSelectService.listOfCachedSelectedOption[0]?null:n.nzSelectService.listOfCachedSelectedOption[0].nzLabel)})}function U(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function H(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"div",[["class","ant-select-search ant-select-search--inline"]],[[4,"display",null]],null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"div",[["class","ant-select-search__field__wrap"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,U)),r.sb(3,540672,null,0,i.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.tb(4,0,null,null,1,"span",[["class","ant-select-search__field__mirror"]],null,null,null,null,null)),(t()(),r.Nb(5,null,["","\xa0"]))],function(t,e){t(e,3,0,r.Fb(e.parent.parent,1))},function(t,e){var n=e.component;t(e,0,0,n.nzOpen?"block":"none"),t(e,5,0,n.inputValue)})}function G(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,W)),r.sb(2,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,H)),r.sb(4,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,n.nzSelectService.listOfCachedSelectedOption.length&&n.nzSelectService.listOfSelectedValue.length),t(e,4,0,n.nzShowSearch)},null)}function q(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"div",[["class","ant-select-selection__choice__content"]],null,null,null,null,null)),(t()(),r.Nb(2,null,["",""]))],null,function(t,e){t(e,2,0,e.parent.context.$implicit.nzLabel)})}function K(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-select-remove-icon"],["nz-icon",""],["nzType","close"]],null,null,null,null,null)),r.sb(1,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"close")},null)}function Y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"span",[["class","ant-select-selection__choice__remove"]],null,[[null,"mousedown"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==n.preventDefault()&&r),"click"===e&&(r=!1!==i.removeSelectedValue(t.parent.context.$implicit,n)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,1,null,K)),r.sb(2,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null)],function(t,e){var n=e.component;t(e,2,0,!n.nzRemoveIcon,n.nzRemoveIcon)},null)}function X(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,6,"li",[["class","ant-select-selection__choice"]],[[24,"@zoomMotion",0],[1,"title",0],[2,"ant-select-selection__choice__disabled",null],[24,"@.disabled",0]],null,null,null,null)),r.sb(2,4734976,null,0,c.q,[r.k,r.D,[2,g.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.ib(16777216,null,null,2,null,q)),r.sb(4,540672,null,0,c.u,[r.P,r.L],{nzStringTemplateOutletContext:[0,"nzStringTemplateOutletContext"],nzStringTemplateOutlet:[1,"nzStringTemplateOutlet"]},null),r.Ib(5,{$implicit:0}),(t()(),r.ib(16777216,null,null,1,null,Y)),r.sb(7,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation);var r=t(e,5,0,n.nzSelectService.listOfCachedSelectedOption[e.context.index]);t(e,4,0,r,n.nzCustomTemplate),t(e,7,0,!e.context.$implicit.nzDisabled)},function(t,e){t(e,1,0,void 0,e.context.$implicit.nzLabel,e.context.$implicit.nzDisabled,r.Fb(e,2).nzNoAnimation)})}function Z(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Q(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,3,null,Z)),r.sb(2,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Hb(0,i.w,[]),r.Ib(4,{$implicit:0}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,i=t(e,4,0,r.Ob(e,2,0,r.Fb(e,3).transform(n.nzSelectService.listOfSelectedValue,n.nzMaxTagCount)));t(e,2,0,i,n.nzMaxTagPlaceholder)},null)}function J(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,[" + "," ... "]))],null,function(t,e){var n=e.component;t(e,1,0,n.nzSelectService.listOfCachedSelectedOption.length-n.nzMaxTagCount)})}function tt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"li",[["class","ant-select-selection__choice"]],[[24,"@zoomMotion",0],[24,"@.disabled",0]],null,null,null,null)),r.sb(1,4734976,null,0,c.q,[r.k,r.D,[2,g.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(2,0,null,null,4,"div",[["class","ant-select-selection__choice__content"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Q)),r.sb(4,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,J)),r.sb(6,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,4,0,n.nzMaxTagPlaceholder),t(e,6,0,!n.nzMaxTagPlaceholder)},function(t,e){t(e,0,0,void 0,r.Fb(e,1).nzNoAnimation)})}function et(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function nt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,8,"ul",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,X)),r.sb(2,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),r.Hb(0,i.w,[]),(t()(),r.ib(16777216,null,null,1,null,tt)),r.sb(5,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(6,0,null,null,2,"li",[["class","ant-select-search ant-select-search--inline"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,et)),r.sb(8,540672,null,0,i.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,r.Ob(e,2,0,r.Fb(e,3).transform(n.nzSelectService.listOfCachedSelectedOption,0,n.nzMaxTagCount)),n.trackValue),t(e,5,0,n.nzSelectService.listOfCachedSelectedOption.length>n.nzMaxTagCount),t(e,8,0,r.Fb(e.parent,1))},null)}function rt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-select-close-icon"],["nz-icon",""],["nzTheme","fill"],["nzType","close-circle"]],null,null,null,null,null)),r.sb(1,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null)],function(t,e){t(e,1,0,"close-circle","fill")},null)}function it(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"span",[["class","ant-select-selection__clear"],["nz-select-unselectable",""]],[[1,"unselectable",0],[4,"user-select",null]],[[null,"mousedown"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==n.preventDefault()&&r),"click"===e&&(r=!1!==i.onClearSelection(n)&&r),r},null,null)),r.sb(1,16384,null,0,d.k,[],null,null),(t()(),r.ib(16777216,null,null,1,null,rt)),r.sb(3,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null)],function(t,e){var n=e.component;t(e,3,0,!n.nzClearIcon,n.nzClearIcon)},function(t,e){t(e,0,0,"unselectable","none")})}function st(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","loading"]],null,null,null,null,null)),r.sb(1,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"loading")},null)}function ot(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["class","ant-select-arrow-icon"],["nz-icon",""],["nzType","down"]],null,null,null,null,null)),r.sb(1,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"down")},null)}function lt(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,ot)),r.sb(1,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,!n.nzSuffixIcon,n.nzSuffixIcon)},null)}function at(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"span",[["class","ant-select-arrow"],["nz-select-unselectable",""]],[[1,"unselectable",0],[4,"user-select",null]],null,null,null,null)),r.sb(1,16384,null,0,d.k,[],null,null),(t()(),r.ib(16777216,null,null,1,null,st)),r.sb(3,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["defaultArrow",2]],null,0,null,lt))],function(t,e){t(e,3,0,e.component.nzLoading,r.Fb(e,4))},function(t,e){t(e,0,0,"unselectable","none")})}function ut(t){return r.Pb(2,[r.Lb(671088640,1,{inputElement:0}),(t()(),r.ib(0,[["inputTemplate",2]],null,0,null,j)),(t()(),r.tb(2,0,null,null,6,"div",[["class","ant-select-selection__rendered"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,B)),r.sb(4,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,G)),r.sb(6,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,nt)),r.sb(8,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,it)),r.sb(10,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,at)),r.sb(12,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,4,0,n.nzPlaceHolder),t(e,6,0,n.nzSelectService.isSingleMode),t(e,8,0,n.nzSelectService.isMultipleOrTags),t(e,10,0,n.nzAllowClear&&n.nzSelectService.listOfSelectedValue.length),t(e,12,0,n.nzShowArrow)},null)}n.d(e,"a",function(){return ct}),n.d(e,"b",function(){return Rt});var ct=r.rb({encapsulation:2,styles:[],data:{}});function ht(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"a",[["class","ant-pagination-item-link"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["nz-icon",""],["nzType","left"]],null,null,null,null,null)),r.sb(2,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,2,0,"left")},null)}function dt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"a",[["class","ant-pagination-item-link"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["nz-icon",""],["nzType","right"]],null,null,null,null,null)),r.sb(2,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,2,0,"right")},null)}function pt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"a",[],null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.page)})}function ft(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,ht)),r.sb(1,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,dt)),r.sb(3,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,pt)),r.sb(5,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,"pre"===e.context.$implicit),t(e,3,0,"next"===e.context.$implicit),t(e,5,0,"page"==e.context.$implicit)},null)}function gt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function mt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function bt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,13,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,3,"li",[["class","ant-pagination-prev"]],[[1,"title",0],[2,"ant-pagination-disabled",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpDiff(-1)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,gt)),r.sb(3,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(4,{$implicit:0}),(t()(),r.tb(5,0,null,null,4,"li",[["class","ant-pagination-simple-pager"]],[[1,"title",0]],null,null,null,null)),(t()(),r.tb(6,0,[["simplePagerInput",1]],null,0,"input",[["size","3"]],[[8,"disabled",0],[8,"value",0]],[[null,"keydown.enter"]],function(t,e,n){var i=!0;return"keydown.enter"===e&&(i=!1!==t.component.handleKeyDown(n,r.Fb(t,6),!1)&&i),i},null,null)),(t()(),r.tb(7,0,null,null,1,"span",[["class","ant-pagination-slash"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\uff0f"])),(t()(),r.Nb(9,null,[" "," "])),(t()(),r.tb(10,0,null,null,3,"li",[["class","ant-pagination-next"]],[[1,"title",0],[2,"ant-pagination-disabled",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpDiff(1)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,mt)),r.sb(12,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(13,{$implicit:0})],function(t,e){var n=e.component,r=t(e,4,0,"pre");t(e,3,0,r,n.nzItemRender);var i=t(e,13,0,"next");t(e,12,0,i,n.nzItemRender)},function(t,e){var n=e.component;t(e,1,0,n.locale.prev_page,n.isFirstIndex),t(e,5,0,n.nzPageIndex+"/"+n.lastIndex),t(e,6,0,n.nzDisabled,n.nzPageIndex),t(e,9,0,n.lastIndex),t(e,10,0,n.locale.next_page,n.isLastIndex)})}function yt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function vt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"li",[["class","ant-pagination-total-text"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,yt)),r.sb(2,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(3,{$implicit:0,range:1})],function(t,e){var n=e.component,r=t(e,3,0,n.nzTotal,n.ranges);t(e,2,0,r,n.nzShowTotal)},null)}function _t(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function wt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function xt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"li",[["class","ant-pagination-jump-prev"]],[[1,"title",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpDiff(-5)&&r),r},null,null)),(t()(),r.tb(1,0,null,null,5,"a",[["class","ant-pagination-item-link"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,4,"div",[["class","ant-pagination-item-container"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"i",[["class","ant-pagination-item-link-icon"],["nz-icon",""],["nzType","double-left"]],null,null,null,null,null)),r.sb(4,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null),(t()(),r.tb(5,0,null,null,1,"span",[["class","ant-pagination-item-ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u2022\u2022\u2022"]))],function(t,e){t(e,4,0,"double-left")},function(t,e){t(e,0,0,e.component.locale.prev_5)})}function Ct(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function St(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"li",[["class","ant-pagination-item"]],[[1,"title",0],[2,"ant-pagination-item-active",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpPage(t.context.$implicit)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,Ct)),r.sb(2,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(3,{$implicit:0,page:1})],function(t,e){var n=e.component,r=t(e,3,0,"page",e.context.$implicit);t(e,2,0,r,n.nzItemRender)},function(t,e){t(e,0,0,e.context.$implicit,e.component.nzPageIndex===e.context.$implicit)})}function Ot(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"li",[["class","ant-pagination-jump-next ant-pagination-item-link-icon"]],[[1,"title",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpDiff(5)&&r),r},null,null)),(t()(),r.tb(1,0,null,null,5,"a",[["class","ant-pagination-item-link"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,4,"div",[["class","ant-pagination-item-container"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"i",[["class","ant-pagination-item-link-icon"],["nz-icon",""],["nzType","double-right"]],null,null,null,null,null)),r.sb(4,2834432,null,0,u.a,[u.c,r.k,r.D,a.a],{nzType:[0,"nzType"]},null),(t()(),r.tb(5,0,null,null,1,"span",[["class","ant-pagination-item-ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u2022\u2022\u2022"]))],function(t,e){t(e,4,0,"double-right")},function(t,e){t(e,0,0,e.component.locale.next_5)})}function kt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Et(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"li",[["class","ant-pagination-item"]],[[1,"title",0],[2,"ant-pagination-item-active",null]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.jumpPage(i.lastIndex)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,kt)),r.sb(2,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(3,{$implicit:0,page:1})],function(t,e){var n=e.component,r=t(e,3,0,"page",n.lastIndex);t(e,2,0,r,n.nzItemRender)},function(t,e){var n=e.component;t(e,0,0,n.lastIndex,n.isLastIndex)})}function Tt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function zt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-option",[],null,null,null,T,k)),r.sb(1,573440,[[2,4]],0,d.c,[],{nzLabel:[0,"nzLabel"],nzValue:[1,"nzValue"]},null)],function(t,e){t(e,1,0,e.context.$implicit+e.component.locale.items_per_page,e.context.$implicit)},null)}function Pt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-option",[],null,null,null,T,k)),r.sb(1,573440,[[2,4]],0,d.c,[],{nzLabel:[0,"nzLabel"],nzValue:[1,"nzValue"]},null)],function(t,e){var n=e.component;t(e,1,0,n.nzPageSize+n.locale.items_per_page,n.nzPageSize)},null)}function It(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,12,"nz-select",[["class","ant-pagination-options-size-changer"]],[[2,"ant-select-lg",null],[2,"ant-select-sm",null],[2,"ant-select-enabled",null],[2,"ant-select-no-arrow",null],[2,"ant-select-disabled",null],[2,"ant-select-allow-clear",null],[2,"ant-select-open",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,2).toggleDropDown()&&i),"ngModelChange"===e&&(i=!1!==s.onPageSizeChange(n)&&i),i},D,z)),r.Kb(512,null,d.i,d.i,[]),r.sb(2,5488640,null,2,d.g,[r.D,d.i,r.h,m.a,a.a,r.k,[8,null]],{nzSize:[0,"nzSize"],nzDisabled:[1,"nzDisabled"]},null),r.Lb(603979776,2,{listOfNzOptionComponent:1}),r.Lb(603979776,3,{listOfNzOptionGroupComponent:1}),r.Kb(1024,null,s.l,function(t){return[t]},[d.g]),r.sb(6,671744,null,0,s.p,[[8,null],[8,null],[8,null],[6,s.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,s.m,null,[s.p]),r.sb(8,16384,null,0,s.n,[[4,s.m]],null,null),(t()(),r.ib(16777216,null,0,1,null,zt)),r.sb(10,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.ib(16777216,null,0,1,null,Pt)),r.sb(12,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzSize,n.nzDisabled),t(e,6,0,n.nzPageSize),t(e,10,0,n.nzPageSizeOptions),t(e,12,0,n.showAddOption)},function(t,e){t(e,0,1,["large"===r.Fb(e,2).nzSize,"small"===r.Fb(e,2).nzSize,!r.Fb(e,2).nzDisabled,!r.Fb(e,2).nzShowArrow,r.Fb(e,2).nzDisabled,r.Fb(e,2).nzAllowClear,r.Fb(e,2).open,r.Fb(e,8).ngClassUntouched,r.Fb(e,8).ngClassTouched,r.Fb(e,8).ngClassPristine,r.Fb(e,8).ngClassDirty,r.Fb(e,8).ngClassValid,r.Fb(e,8).ngClassInvalid,r.Fb(e,8).ngClassPending])})}function Mt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"div",[["class","ant-pagination-options-quick-jumper"]],null,null,null,null,null)),(t()(),r.Nb(1,null,[" "," "])),(t()(),r.tb(2,0,[["quickJumperInput",1]],null,0,"input",[],[[8,"disabled",0]],[[null,"keydown.enter"]],function(t,e,n){var i=!0;return"keydown.enter"===e&&(i=!1!==t.component.handleKeyDown(n,r.Fb(t,2),!0)&&i),i},null,null)),(t()(),r.Nb(3,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,1,0,n.locale.jump_to),t(e,2,0,n.nzDisabled),t(e,3,0,n.locale.page)})}function Dt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","ant-pagination-options"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,It)),r.sb(2,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Mt)),r.sb(4,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzShowSizeChanger),t(e,4,0,n.nzShowQuickJumper)},null)}function At(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,vt)),r.sb(1,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(2,0,null,null,3,"li",[["class","ant-pagination-prev"]],[[1,"title",0],[2,"ant-pagination-disabled",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpDiff(-1)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,_t)),r.sb(4,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(5,{$implicit:0}),(t()(),r.tb(6,0,null,null,3,"li",[["class","ant-pagination-item"]],[[1,"title",0],[2,"ant-pagination-item-active",null]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.jumpPage(i.firstIndex)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,wt)),r.sb(8,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(9,{$implicit:0,page:1}),(t()(),r.ib(16777216,null,null,1,null,xt)),r.sb(11,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,St)),r.sb(13,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.ib(16777216,null,null,1,null,Ot)),r.sb(15,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Et)),r.sb(17,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(18,0,null,null,3,"li",[["class","ant-pagination-next"]],[[8,"title",0],[2,"ant-pagination-disabled",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.jumpDiff(1)&&r),r},null,null)),(t()(),r.ib(16777216,null,null,2,null,Tt)),r.sb(20,540672,null,0,i.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(21,{$implicit:0}),(t()(),r.ib(16777216,null,null,1,null,Dt)),r.sb(23,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,n.nzShowTotal);var r=t(e,5,0,"pre");t(e,4,0,r,n.nzItemRender);var i=t(e,9,0,"page",n.firstIndex);t(e,8,0,i,n.nzItemRender),t(e,11,0,n.lastIndex>9&&n.nzPageIndex-3>n.firstIndex),t(e,13,0,n.pages),t(e,15,0,n.lastIndex>9&&n.nzPageIndex+3<n.lastIndex),t(e,17,0,n.lastIndex>0&&n.lastIndex!==n.firstIndex);var s=t(e,21,0,"next");t(e,20,0,s,n.nzItemRender),t(e,23,0,n.nzShowQuickJumper||n.nzShowSizeChanger)},function(t,e){var n=e.component;t(e,2,0,n.locale.prev_page,n.isFirstIndex),t(e,6,0,n.firstIndex,n.isFirstIndex),t(e,18,0,n.locale.next_page,n.isLastIndex)})}function Nt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,3,"ul",[["class","ant-pagination"]],[[2,"ant-table-pagination",null],[2,"ant-pagination-simple",null],[2,"ant-pagination-disabled",null],[2,"mini",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,bt)),r.sb(3,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["normalTemplate",2]],null,0,null,At))],function(t,e){t(e,3,0,e.component.nzSimple,r.Fb(e,4))},function(t,e){var n=e.component;t(e,1,0,n.nzInTable,n.nzSimple,n.nzDisabled,"small"===n.nzSize&&!n.nzSimple)})}function Rt(t){return r.Pb(2,[r.Lb(402653184,1,{nzItemRender:0}),(t()(),r.ib(0,[[1,2],["renderItemTemplate",2]],null,0,null,ft)),(t()(),r.ib(16777216,null,null,1,null,Nt)),r.sb(3,16384,null,0,i.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,n.nzHideOnSinglePage&&n.nzTotal>n.nzPageSize||n.nzTotal&&!n.nzHideOnSinglePage)},null)}},ZTPi:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("aJGj");e.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?s.empty():e.lift(new o(t<0?-1:t-1,e))}};var o=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.count,this.source))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(i.Subscriber)},ZUHj:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("51Dv"),i=n("SeVD");function s(t,e,n,s,o=new r.a(t,n,s)){if(!o.closed)return Object(i.a)(e)(o)}},ZXDK:function(t,e,n){var r=n("54Wo");t.exports=function(t,e){var n=r(t,e)/6e4;return n>0?Math.floor(n):Math.ceil(n)}},Zipn:function(t,e,n){var r=n("+6+2");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},ZmXw:function(t,e,n){var r=n("yNUO"),i=n("VBar");t.exports=function(t,e){var n=r(t),s=Number(e),o=n.getMonth()+s,l=new Date(0);l.setFullYear(n.getFullYear(),o,1),l.setHours(0,0,0,0);var a=i(l);return n.setMonth(o,Math.min(a,n.getDate())),n}},Zss7:function(t,e,n){var r;!function(i){var s=/^\s+/,o=/\s+$/,l=0,a=i.round,u=i.min,c=i.max,h=i.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var n=function(t){var e,n,r={r:0,g:0,b:0},l=1,a=null,h=null,d=null,p=!1,f=!1;return"string"==typeof t&&(t=function(t){t=t.replace(s,"").replace(o,"").toLowerCase();var e,n=!1;if(P[t])t=P[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=W.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=W.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=W.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=W.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=W.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=W.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=W.hex8.exec(t))?{r:N(e[1]),g:N(e[2]),b:N(e[3]),a:L(e[4]),format:n?"name":"hex8"}:(e=W.hex6.exec(t))?{r:N(e[1]),g:N(e[2]),b:N(e[3]),format:n?"name":"hex"}:(e=W.hex4.exec(t))?{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),a:L(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=W.hex3.exec(t))&&{r:N(e[1]+""+e[1]),g:N(e[2]+""+e[2]),b:N(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(U(t.r)&&U(t.g)&&U(t.b)?(e=t.g,n=t.b,r={r:255*D(t.r,255),g:255*D(e,255),b:255*D(n,255)},p=!0,f="%"===String(t.r).substr(-1)?"prgb":"rgb"):U(t.h)&&U(t.s)&&U(t.v)?(a=F(t.s),h=F(t.v),r=function(t,e,n){t=6*D(t,360),e=D(e,100),n=D(n,100);var r=i.floor(t),s=t-r,o=n*(1-e),l=n*(1-s*e),a=n*(1-(1-s)*e),u=r%6;return{r:255*[n,l,o,o,a,n][u],g:255*[a,n,n,l,o,o][u],b:255*[o,o,a,n,n,l][u]}}(t.h,a,h),p=!0,f="hsv"):U(t.h)&&U(t.s)&&U(t.l)&&(a=F(t.s),d=F(t.l),r=function(t,e,n){var r,i,s;function o(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=D(t,360),e=D(e,100),n=D(n,100),0===e)r=i=s=n;else{var l=n<.5?n*(1+e):n+e-n*e,a=2*n-l;r=o(a,l,t+1/3),i=o(a,l,t),s=o(a,l,t-1/3)}return{r:255*r,g:255*i,b:255*s}}(t.h,a,d),p=!0,f="hsl"),t.hasOwnProperty("a")&&(l=t.a)),l=M(l),{ok:p,format:t.format||f,r:u(255,c(r.r,0)),g:u(255,c(r.g,0)),b:u(255,c(r.b,0)),a:l}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=a(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=n.ok,this._tc_id=l++}function p(t,e,n){t=D(t,255),e=D(e,255),n=D(n,255);var r,i,s=c(t,e,n),o=u(t,e,n),l=(s+o)/2;if(s==o)r=i=0;else{var a=s-o;switch(i=l>.5?a/(2-s-o):a/(s+o),s){case t:r=(e-n)/a+(e<n?6:0);break;case e:r=(n-t)/a+2;break;case n:r=(t-e)/a+4}r/=6}return{h:r,s:i,l}}function f(t,e,n){t=D(t,255),e=D(e,255),n=D(n,255);var r,i,s=c(t,e,n),o=u(t,e,n),l=s,a=s-o;if(i=0===s?0:a/s,s==o)r=0;else{switch(s){case t:r=(e-n)/a+(e<n?6:0);break;case e:r=(n-t)/a+2;break;case n:r=(t-e)/a+4}r/=6}return{h:r,s:i,v:l}}function g(t,e,n,r){var i=[R(a(t).toString(16)),R(a(e).toString(16)),R(a(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function m(t,e,n,r){return[R($(r)),R(a(t).toString(16)),R(a(e).toString(16)),R(a(n).toString(16))].join("")}function b(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s-=e/100,n.s=A(n.s),d(n)}function y(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.s+=e/100,n.s=A(n.s),d(n)}function v(t){return d(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l+=e/100,n.l=A(n.l),d(n)}function w(t,e){e=0===e?0:e||10;var n=d(t).toRgb();return n.r=c(0,u(255,n.r-a(-e/100*255))),n.g=c(0,u(255,n.g-a(-e/100*255))),n.b=c(0,u(255,n.b-a(-e/100*255))),d(n)}function x(t,e){e=0===e?0:e||10;var n=d(t).toHsl();return n.l-=e/100,n.l=A(n.l),d(n)}function C(t,e){var n=d(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,d(n)}function S(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function O(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+120)%360,s:e.s,l:e.l}),d({h:(n+240)%360,s:e.s,l:e.l})]}function k(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+90)%360,s:e.s,l:e.l}),d({h:(n+180)%360,s:e.s,l:e.l}),d({h:(n+270)%360,s:e.s,l:e.l})]}function E(t){var e=d(t).toHsl(),n=e.h;return[d(t),d({h:(n+72)%360,s:e.s,l:e.l}),d({h:(n+216)%360,s:e.s,l:e.l})]}function T(t,e,n){e=e||6,n=n||30;var r=d(t).toHsl(),i=360/n,s=[d(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(d(r));return s}function z(t,e){e=e||6;for(var n=d(t).toHsv(),r=n.h,i=n.s,s=n.v,o=[],l=1/e;e--;)o.push(d({h:r,s:i,v:s})),s=(s+l)%1;return o}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return e=r.g/255,n=r.b/255,.2126*((t=r.r/255)<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=M(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=f(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),r=a(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=p(this._r,this._g,this._b),e=a(360*t.h),n=a(100*t.s),r=a(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var s=[R(a(t).toString(16)),R(a(e).toString(16)),R(a(n).toString(16)),R($(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*D(this._r,255))+"%",g:a(100*D(this._g,255))+"%",b:a(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*D(this._r,255))+"%, "+a(100*D(this._g,255))+"%, "+a(100*D(this._b,255))+"%)":"rgba("+a(100*D(this._r,255))+"%, "+a(100*D(this._g,255))+"%, "+a(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+m(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=d(t);n="#"+m(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1;return e||!(this._a<1&&this._a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(b,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(O,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},d.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:F(t[r]));t=n}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:h(),g:h(),b:h()})},d.mix=function(t,e,n){n=0===n?0:n||50;var r=d(t).toRgb(),i=d(e).toRgb(),s=n/100;return d({r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a})},d.readability=function(t,e){var n=d(t),r=d(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(t,e,n){var r,i,s,o,l,a=d.readability(t,e);switch(i=!1,(s=n,"AA"!==(o=((s=s||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==o&&(o="AA"),"small"!==(l=(s.size||"small").toLowerCase())&&"large"!==l&&(l="small"),r={level:o,size:l}).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},d.mostReadable=function(t,e,n){var r,i,s,o,l=null,a=0;i=(n=n||{}).includeFallbackColors,s=n.level,o=n.size;for(var u=0;u<e.length;u++)(r=d.readability(t,e[u]))>a&&(a=r,l=d(e[u]));return d.isReadable(t,l,{level:s,size:o})||!i?l:(n.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],n))};var P=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=d.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(P);function M(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function D(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=u(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function A(t){return u(1,c(0,t))}function N(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function F(t){return t<=1&&(t=100*t+"%"),t}function $(t){return i.round(255*parseFloat(t)).toString(16)}function L(t){return N(t)/255}var j,B,V,W=(B="[\\s|\\(]+("+(j="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",V="[\\s|\\(]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")[,|\\s]+("+j+")\\s*\\)?",{CSS_UNIT:new RegExp(j),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+V),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(t){return!!W.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(r=(function(){return d}).call(e,n,e,t))||(t.exports=r)}(Math)},"a4+5":function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()<i.getTime()}},a6us:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new s(t,e))}};var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.count,this.source))},t}(),o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return t.prototype.error.call(this,e);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(i.Subscriber)},a7Bn:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.skip=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.total))},t}(),o=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return r(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(i.Subscriber)},a7t3:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("NJ4a");const i=t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,r.a),e)},aBn6:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},aFrj:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},aJGj:function(t,e,n){"use strict";var r=n("Q1FS");function i(t){return new r.Observable(function(e){return t.schedule(function(){return e.complete()})})}e.EMPTY=new r.Observable(function(t){return t.complete()}),e.empty=function(t){return t?i(t):e.EMPTY},e.emptyScheduled=i},aOuE:function(t,e,n){"use strict";var r=n("YK4L");e.max=function(t){return r.reduce("function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e})}},aTp7:function(t,e){t.exports=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date(0);return i.setFullYear(e,n,r-1),i.setHours(0,0,0,0),i}},anqq:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});class r{constructor(t,e,n,r,i){this.elementRef=t,this.cd=e,this.updateHostClassService=n,this.renderer=r,this.platform=i,this.nzShape="circle",this.nzSize="default",this.oldAPIIcon=!0,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.el=this.elementRef.nativeElement,this.prefixCls="ant-avatar",this.sizeMap={large:"lg",small:"sm"}}setClass(){return this.updateHostClassService.updateHostClass(this.el,{[this.prefixCls]:!0,[`${this.prefixCls}-${this.sizeMap[this.nzSize]}`]:this.sizeMap[this.nzSize],[`${this.prefixCls}-${this.nzShape}`]:this.nzShape,[`${this.prefixCls}-icon`]:this.nzIcon,[`${this.prefixCls}-image`]:this.hasSrc}),this.cd.detectChanges(),this}imgError(){this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.setClass().notifyCalc(),this.setSizeStyle()}ngOnChanges(t){t.hasOwnProperty("nzIcon")&&t.nzIcon.currentValue&&(this.oldAPIIcon=t.nzIcon.currentValue.indexOf("anticon")>-1),this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setClass().notifyCalc(),this.setSizeStyle()}calcStringSize(){if(!this.hasText)return;const t=this.textEl.nativeElement.offsetWidth,e=this.el.getBoundingClientRect().width;this.textStyles={transform:`scale(${e-8<t?(e-8)/t:1}) translateX(-50%)`},"number"==typeof this.nzSize&&Object.assign(this.textStyles,{lineHeight:`${this.nzSize}px`}),this.cd.detectChanges()}notifyCalc(){return this.platform.isBrowser&&setTimeout(()=>{this.calcStringSize()}),this}setSizeStyle(){const t="string"==typeof this.nzSize?this.nzSize:`${this.nzSize}px`;this.renderer.setStyle(this.el,"width",t),this.renderer.setStyle(this.el,"height",t),this.renderer.setStyle(this.el,"line-height",t),this.hasIcon&&this.renderer.setStyle(this.el,"font-size",`calc(${t} / 2)`)}}class i{}},"b/k1":function(t,e,n){"use strict";var r=n("Q1FS"),i=n("gTqA"),s=n("aJGj");e.defer=function(t){return new r.Observable(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?i.from(n):s.empty()).subscribe(e)})}},b056:function(t,e){t.exports=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date(0);return i.setFullYear(e,n,r+1),i.setHours(23,59,59,999),i}},b8ws:function(t,e,n){var r=n("yNUO"),i=n("Kpyc"),s=n("DT56");t.exports=function(t,e){var n=r(t),o=r(e),l=s(n,o),a=Math.abs(i(n,o));return n.setFullYear(n.getFullYear()-l*a),l*(a-(s(n,o)===-l))}},bAjd:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("RGEn");n.d(e,"a",function(){return a});var s=r.rb({encapsulation:0,styles:[["html[_ngcontent-%COMP%]{font-size:10px}body[_ngcontent-%COMP%]{font-size:1.4rem;font-family:Arial,Helvetica,sans-serif;margin:1rem;background-color:#ddd}footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%]{display:block;color:#fff;font-size:1.4rem;padding:2rem;background-color:#000}h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;margin:0}h2[_ngcontent-%COMP%]{color:#000;font-size:2rem;margin-top:0}div.wrapper-app[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{max-width:80rem;margin:0 auto}div.wrapper-app[_ngcontent-%COMP%]{border:.1rem solid #000;background-color:#fff}div.wrapper-content[_ngcontent-%COMP%]{min-height:40rem;overflow:visible;padding:2rem}div.connect-caller-buttons[_ngcontent-%COMP%]{margin-bottom:1rem}div.connect-caller-buttons[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], div.connect-caller-buttons[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{display:inline-block}div.video-frames[_ngcontent-%COMP%]{text-align:center}div.video-caller[_ngcontent-%COMP%], div.video-self[_ngcontent-%COMP%]{width:32rem;height:24rem;display:inline-block;overflow:hidden;border:.1rem solid #000;background-color:#ddd;margin:0 1.4rem}div.video-caller[_ngcontent-%COMP%]{position:relative}video[_ngcontent-%COMP%]{width:32rem;height:24rem;-o-object-fit:cover;object-fit:cover}"]],data:{}});function o(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,27,"html",[],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"head",[],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"title",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["Multiparty Chatroom"])),(t()(),r.tb(4,0,null,null,0,"meta",[["content","text/html; charset=utf-8"],["http-equiv","Content-Type"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,0,"meta",[["content","width=device-width, minimum-scale=1, maximum-scale=1"],["name","viewport"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,21,"body",[],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,1,"button",[["onclick","appInit()"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["test"])),(t()(),r.tb(9,0,null,null,18,"div",[["class","boxCommon"],["id","fullpage"]],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon easyrtcMirror"],["id","box0"],["muted","muted"],["playsinline","playsinline"],["volume","0"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon"],["id","box1"],["playsinline","playsinline"],["style","visibility:hidden"]],null,null,null,null,null)),(t()(),r.tb(12,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon"],["id","box2"],["playsinline","playsinline"],["style","visibility:hidden"]],null,null,null,null,null)),(t()(),r.tb(13,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon"],["id","box3"],["playsinline","playsinline"],["style","visibility:hidden"]],null,null,null,null,null)),(t()(),r.tb(14,0,null,null,0,"canvas",[["id","canvas0"]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,0,"canvas",[["id","canvas1"]],null,null,null,null,null)),(t()(),r.tb(16,0,null,null,0,"canvas",[["id","canvas2"]],null,null,null,null,null)),(t()(),r.tb(17,0,null,null,0,"canvas",[["id","canvas3"]],null,null,null,null,null)),(t()(),r.tb(18,0,null,null,6,"div",[["id","textentryBox"],["onsubmit","sendText()"],["style","display:none"]],null,null,null,null,null)),(t()(),r.tb(19,0,null,null,0,"input",[["class","transit boxcommon"],["id","textentryField"],["type","text"]],null,null,null,null,null)),(t()(),r.tb(20,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.tb(21,0,null,null,1,"button",[["id","textentrySubmit"],["onclick","sendText()"],["style","float:right;margin-right:1em"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["Send"])),(t()(),r.tb(23,0,null,null,1,"button",[["id","textentryCancel"],["onclick","cancelText()"],["style","float:left;margin-left:1em"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["Cancel"])),(t()(),r.tb(25,0,null,null,0,"img",[["alt","close button"],["class","transit boxCommon"],["id","killButton"],["onclick","killActiveBox()"],["src","https://p2.music.126.net/wrhvYn7qGztoXFTKrT8SHA==/109951165114585025.jpg"],["style","display:none;z-index:3"]],null,null,null,null,null)),(t()(),r.tb(26,0,null,null,0,"img",[["alt","mute button"],["class","transit boxCommon"],["id","muteButton"],["onclick","muteActiveBox()"],["src","https://p2.music.126.net/wrhvYn7qGztoXFTKrT8SHA==/109951165114585025.jpg"],["style","display:none;z-index:3"]],null,null,null,null,null)),(t()(),r.tb(27,0,null,null,0,"img",[["alt","text button"],["class","transit boxCommon"],["id","textEntryButton"],["onclick","showTextEntry()"],["src","https://p2.music.126.net/wrhvYn7qGztoXFTKrT8SHA==/109951165114585025.jpg"],["style","z-index:3;display:none"]],null,null,null,null,null))],null,null)}function l(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-myrtc",[],null,null,null,o,s)),r.sb(1,114688,null,0,i.a,[r.h],null,null)],function(t,e){t(e,1,0)},null)}var a=r.pb("app-myrtc",i.a,l,{},{},[])},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("5+tZ"),i=n("SpAZ");function s(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},bOdf:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5+tZ");function i(t,e){return Object(r.a)(t,e,1)}},bSa5:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.mapTo=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.value))},t}(),o=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return r(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(i.Subscriber)},bwD0:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setHours(i),n}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},c37Y:function(t,e,n){t.exports=n("3lBY"),t.exports.color=n("mFHc")},c4Wt:function(t,e,n){"use strict";var r=n("QtHX");e.concatAll=function(){return r.mergeAll(1)}},cHgL:function(t,e,n){"use strict";var r=n("6eB1");e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.merge.apply(void 0,[e].concat(t)))}}},cPJV:function(t,e,n){var r=n("WA8B"),i=n("gfz1"),s=n("iWRJ"),o=n("yNUO"),l=n("fupu"),a=n("Us+F"),u={M:function(t){return t.getMonth()+1},MM:function(t){return h(t.getMonth()+1,2)},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},D:function(t){return t.getDate()},DD:function(t){return h(t.getDate(),2)},DDD:function(t){return r(t)},DDDD:function(t){return h(r(t),3)},d:function(t){return t.getDay()},E:function(t){return t.getDay()||7},W:function(t){return i(t)},WW:function(t){return h(i(t),2)},YY:function(t){return h(t.getFullYear(),4).substr(2)},YYYY:function(t){return h(t.getFullYear(),4)},GG:function(t){return String(s(t)).substr(2)},GGGG:function(t){return s(t)},H:function(t){return t.getHours()},HH:function(t){return h(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(t){return h(u.h(t),2)},m:function(t){return t.getMinutes()},mm:function(t){return h(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return h(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return h(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return h(t.getMilliseconds(),3)},Z:function(t){return c(t.getTimezoneOffset(),":")},ZZ:function(t){return c(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function c(t,e){e=e||"";var n=t>0?"-":"+",r=Math.abs(t),i=r%60;return n+h(Math.floor(r/60),2)+e+h(i,2)}function h(t,e){for(var n=Math.abs(t).toString();n.length<e;)n="0"+n;return n}t.exports=function(t,e,n){var r=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",i=(n||{}).locale,s=a.format.formatters,c=a.format.formattingTokensRegExp;i&&i.format&&i.format.formatters&&(s=i.format.formatters,i.format.formattingTokensRegExp&&(c=i.format.formattingTokensRegExp));var h=o(t);return l(h)?function(t,e,n){var r,i,s=t.match(n),o=s.length;for(r=0;r<o;r++)s[r]=e[s[r]]||u[s[r]]||((i=s[r]).match(/\[[\s\S]/)?i.replace(/^\[|]$/g,""):i.replace(/\\/g,""));return function(t){for(var e="",n=0;n<o;n++)s[n]instanceof Function?e+=s[n](t,u):e+=s[n];return e}}(r,s,c)(h):"Invalid Date"}},cSoz:function(t,e,n){"use strict";var r=n("Vi6O"),i=n("6qA3");e.subscribeToResult=function(t,e,n,s,o){if(void 0===o&&(o=new r.InnerSubscriber(t,n,s)),!o.closed)return i.subscribeTo(e)(o)}},cUpR:function(t,e,n){"use strict";n.d(e,"q",function(){return xt}),n.d(e,"r",function(){return k}),n.d(e,"a",function(){return Ct}),n.d(e,"i",function(){return wt}),n.d(e,"h",function(){return Ot}),n.d(e,"c",function(){return E}),n.d(e,"d",function(){return T}),n.d(e,"e",function(){return st}),n.d(e,"f",function(){return ot}),n.d(e,"g",function(){return lt}),n.d(e,"b",function(){return dt}),n.d(e,"s",function(){return o}),n.d(e,"k",function(){return $}),n.d(e,"j",function(){return rt}),n.d(e,"n",function(){return at}),n.d(e,"o",function(){return ht}),n.d(e,"m",function(){return I}),n.d(e,"p",function(){return P}),n.d(e,"l",function(){return pt});var r=n("SVse"),i=n("8Y7J");let s=null;function o(){return s}class l{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}class a extends l{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const e=this.createElement("div",document);if(null!=this.getStyle(e,"animationName"))this._animationPrefix="";else{const t=["Webkit","Moz","O","ms"];for(let n=0;n<t.length;n++)if(null!=this.getStyle(e,t[n]+"AnimationName")){this._animationPrefix="-"+t[n].toLowerCase()+"-";break}}const n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(n).forEach(t=>{null!=this.getStyle(e,t)&&(this._transitionEnd=n[t])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}const u={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},c=3,h={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},p=(()=>{if(i.wb.Node)return i.wb.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class f extends a{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new f,s||(s=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return u}contains(t,e){return p.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===c&&d.hasOwnProperty(e)&&(e=d[e]))}return h[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=m||(m=document.querySelector("base"))?m.getAttribute("href"):null;return null==e?null:(n=e,g||(g=document.createElement("a")),g.setAttribute("href",n),"/"===g.pathname.charAt(0)?g.pathname:"/"+g.pathname);var n}resetBaseElement(){m=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return Object(r.J)(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let g,m=null;function b(){return!!window.history.pushState}const y=new i.p("TRANSITION_ID"),v=[{provide:i.d,useFactory:function(t,e,n){return()=>{n.get(i.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[y,r.d,i.q],multi:!0}];class _{static init(){Object(i.Z)(new _)}addToWindow(t){i.wb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.wb.getAllAngularTestabilities=()=>t.getAllTestabilities(),i.wb.getAllAngularRootElements=()=>t.getAllRootElements(),i.wb.frameworkStabilizers||(i.wb.frameworkStabilizers=[]),i.wb.frameworkStabilizers.push(t=>{const e=i.wb.getAllAngularTestabilities();let n=e.length,r=!1;const s=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(s)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,o().getHost(e),!0):this.findTestabilityInTree(t,o().parentElement(e),!0):null}}function w(t,e){"undefined"!=typeof COMPILED&&COMPILED||((i.wb.ng=i.wb.ng||{})[t]=e)}const x=(()=>({ApplicationRef:i.g,NgZone:i.y}))(),C="probe",S="coreTokens";function O(t){return Object(i.V)(t)}function k(t){return w(C,O),w(S,Object.assign({},x,(t||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>O}const E=new i.p("EventManagerPlugins");class T{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}class z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}class P{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class I extends P{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}const M={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},D=/%COMP%/g,A="_nghost-%COMP%",N="_ngcontent-%COMP%";function R(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?R(t,i,n):(i=i.replace(D,t),n.push(i))}return n}function F(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class ${constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new L(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case i.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new V(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case i.Q.Native:case i.Q.ShadowDom:return new W(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=R(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class L{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(M[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=M[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=M[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&i.F.DashCase?t.style.setProperty(e,n,r&i.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&i.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){B(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return B(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,F(n)):this.eventManager.addEventListener(t,e,F(n))}}const j=(()=>"@".charCodeAt(0))();function B(t,e){if(t.charCodeAt(0)===j)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class V extends L{constructor(t,e,n,r){super(t),this.component=n;const i=R(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr=N.replace(D,r+"-"+n.id),this.hostAttr=A.replace(D,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class W extends L{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===i.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const s=R(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const t=document.createElement("style");t.textContent=s[i],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const U=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),H=U("addEventListener"),G=U("removeEventListener"),q={},K="FALSE",Y="ANGULAR",X="addEventListener",Z="removeEventListener",Q="__zone_symbol__propagationStopped",J="__zone_symbol__stopImmediatePropagation",tt=(()=>{const t="undefined"!=typeof Zone&&Zone[U("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),et=function(t){return!!tt&&tt.hasOwnProperty(t)},nt=function(t){const e=q[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[Q];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};class rt extends z{constructor(t,e,n){super(t),this.ngZone=e,n&&Object(r.B)(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype[J])return;const t=Event.prototype[J]=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Q]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let r=n;if(!t[H]||i.y.isInAngularZone()&&!et(e))t[X](e,r,!1);else{let n=q[e];n||(n=q[e]=U(Y+e+K));let i=t[n];const s=i&&i.length>0;i||(i=t[n]=[]);const o=et(e)?Zone.root:Zone.current;if(0===i.length)i.push({zone:o,handler:r});else{let t=!1;for(let e=0;e<i.length;e++)if(i[e].handler===r){t=!0;break}t||i.push({zone:o,handler:r})}s||t[H](e,nt,!1)}return()=>this.removeEventListener(t,e,r)}removeEventListener(t,e,n){let r=t[G];if(!r)return t[Z].apply(t,[e,n,!1]);let i=q[e],s=i&&t[i];if(!s)return t[Z].apply(t,[e,n,!1]);let o=!1;for(let l=0;l<s.length;l++)if(s[l].handler===n){o=!0,s.splice(l,1);break}o?0===s.length&&r.apply(t,[e,nt,!1]):t[Z].apply(t,[e,n,!1])}}const it={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},st=new i.p("HammerGestureConfig"),ot=new i.p("HammerLoader");class lt{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class at extends z{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!it.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not `+"loaded and no custom loader has been specified."),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom `+"Hammer.JS loader failed."),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),s=function(t){r.runGuarded(function(){n(t)})};return i.on(e,s),()=>{i.off(e,s),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const ut=["alt","control","meta","shift"],ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class ht extends z{constructor(t){super(t)}supports(t){return null!=ht.parseEventName(t)}addEventListener(t,e,n){const r=ht.parseEventName(e),i=ht.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(t,r.domEventName,i))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const r=ht._normalizeKey(e.pop());let i="";if(ut.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i+=t+".")}),i+=r,0!=e.length||0===r.length)return null;const s={};return s.domEventName=n,s.fullKey=i,s}static getEventFullKey(t){let e="",n=o().getEventKey(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ut.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n}static eventCallback(t,e,n){return r=>{ht.getEventFullKey(r)===t&&n.runGuarded(()=>e(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}class dt{}class pt extends dt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case i.H.NONE:return e;case i.H.HTML:return e instanceof gt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(i.fb)(this._doc,String(e)));case i.H.STYLE:return e instanceof mt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(i.gb)(e));case i.H.SCRIPT:if(e instanceof bt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case i.H.URL:return e instanceof vt||e instanceof yt?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(i.hb)(String(e)));case i.H.RESOURCE_URL:if(e instanceof vt)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof ft)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} `+"(see http://g.co/ng/security#xss)")}bypassSecurityTrustHtml(t){return new gt(t)}bypassSecurityTrustStyle(t){return new mt(t)}bypassSecurityTrustScript(t){return new bt(t)}bypassSecurityTrustUrl(t){return new yt(t)}bypassSecurityTrustResourceUrl(t){return new vt(t)}}class ft{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}class gt extends ft{getTypeName(){return"HTML"}}class mt extends ft{getTypeName(){return"Style"}}class bt extends ft{getTypeName(){return"Script"}}class yt extends ft{getTypeName(){return"URL"}}class vt extends ft{getTypeName(){return"ResourceURL"}}const _t=[{provide:i.A,useValue:r.H},{provide:i.B,useValue:function(){f.makeCurrent(),_.init()},multi:!0},{provide:r.v,useClass:class extends r.v{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){b()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){b()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[r.d]},{provide:r.d,useFactory:function(){return document},deps:[]}],wt=Object(i.S)(i.Y,"browser",_t);function xt(){return new i.l}class Ct{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:Ct,providers:[{provide:i.c,useValue:t.appId},{provide:y,useExisting:i.c},v]}}}function St(){return new Ot(Object(i.Ub)(r.d))}let Ot=(()=>{class t{constructor(t){this._doc=t}getTitle(){return o().getTitle(this._doc)}setTitle(t){o().setTitle(this._doc,t)}}return t.ngInjectableDef=Object(i.Tb)({factory:St,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window},calH:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return o});var r=n("LQIB");function i(t,e){return-1!==t.indexOf(e)}function s(t){const e=t.slice();for(let n=0;n<e.length;n++){const t=Object(r.b)([0,n]);[e[n],e[t]]=[e[t],e[n]]}return e}function o(t,e){return t.findIndex(t=>t.id===e.id)}},ce6n:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("5VGP"),n("mrSG"),n("XNiG"),n("VRyK"),n("JX91"),n("1G5W"),n("eIep"),n("3UWI"),n("nYR2");class r{}},cmCt:function(t,e,n){var r=n("mrSG").__extends,i=n("cSoz"),s=n("Y4kR"),o=n("Vi6O");e.mergeScan=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new l(t,e,n))}};var l=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=l;var a=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s.accumulator=n,s.acc=r,s.concurrent=i,s.hasValue=!1,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return r(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=this.destination,r=void 0;try{r=(0,this.accumulator)(this.acc,t,e)}catch(i){return n.error(i)}this.active++,this._innerSub(r,t,e)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){var r=new o.InnerSubscriber(this,void 0,void 0);this.destination.add(r),i.subscribeToResult(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){var s=this.destination;this.acc=e,this.hasValue=!0,s.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.destination.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(s.OuterSubscriber);e.MergeScanSubscriber=a},cnJE:function(t,e,n){var r=n("mrSG").__extends,i=n("zB/H"),s=n("Y4kR"),o=n("cSoz");e.bufferWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.closingSelector))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return r(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t,e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe()),this.buffer&&this.destination.next(this.buffer),this.buffer=[];try{t=(0,this.closingSelector)()}catch(n){return this.error(n)}e=new i.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(o.subscribeToResult(this,t)),this.subscribing=!1},e}(s.OuterSubscriber)},cp0P:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("HDdC"),i=n("DH7j"),s=n("EY2u"),o=n("ZUHj"),l=n("l7GE"),a=n("lJxs");function u(...t){let e;return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),0===t.length?s.a:e?u(t).pipe(Object(a.a)(t=>e(...t))):new r.a(e=>new c(e,t))}class c extends l.a{constructor(t,e){super(t),this.sources=e,this.completed=0,this.haveValues=0;const n=e.length;this.values=new Array(n);for(let r=0;r<n;r++){const t=e[r],n=Object(o.a)(this,t,null,r);n&&this.add(n)}}notifyNext(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)}notifyComplete(t){const{destination:e,haveValues:n,values:r}=this,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()}}},"cr+I":function(t,e,n){"use strict";var r=n("ZFOp"),i=n("MgzW");function s(t,e){return e.encode?e.strict?r(t):encodeURIComponent(t):t}e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){var n=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return function(t,n,r){e=/(\[\])$/.exec(t),r[t=t.replace(/\[\]$/,"")]=e?void 0!==r[t]?[].concat(r[t],n):[n]:n};default:return function(t,e,n){n[t]=void 0!==n[t]?[].concat(n[t],e):e}}}(e=i({arrayFormat:"none"},e)),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),s=e.length>0?e.join("="):void 0;s=void 0===s?null:decodeURIComponent(s),n(decodeURIComponent(i),s,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return t[e]=Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort(function(t,e){return Number(t)-Number(e)}).map(function(t){return e[t]}):e}(n):n,t},Object.create(null))):r},e.stringify=function(t,e){var n=function(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[s(e,t),"[",r,"]"].join(""):[s(e,t),"[",s(r,t),"]=",s(n,t)].join("")};case"bracket":return function(e,n){return null===n?s(e,t):[s(e,t),"[]=",s(n,t)].join("")};default:return function(e,n){return null===n?s(e,t):[s(e,t),"=",s(n,t)].join("")}}}(e=i({encode:!0,strict:!0,arrayFormat:"none"},e));return t?Object.keys(t).sort().map(function(r){var i=t[r];if(void 0===i)return"";if(null===i)return s(r,e);if(Array.isArray(i)){var o=[];return i.slice().forEach(function(t){void 0!==t&&o.push(n(r,t,o.length))}),o.join("&")}return s(r,e)+"="+s(i,e)}).filter(function(t){return t.length>0}).join("&"):""}},crfB:function(t,e,n){var r=n("7B8A");t.exports=function(t,e){var n=Number(e);return r(t,6e4*n)}},czgO:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getMonth()}},d0bx:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n("Zss7")),s=2,o=16,l=5,a=5,u=15,c=5,h=4;function d(t,e,n){var r;return(r=Math.round(t.h)>=60&&Math.round(t.h)<=240?n?Math.round(t.h)-s*e:Math.round(t.h)+s*e:n?Math.round(t.h)+s*e:Math.round(t.h)-s*e)<0?r+=360:r>=360&&(r-=360),r}function p(t,e,n){return 0===t.h&&0===t.s?t.s:((r=n?Math.round(100*t.s)-o*e:e===h?Math.round(100*t.s)+o:Math.round(100*t.s)+l*e)>100&&(r=100),n&&e===c&&r>10&&(r=10),r<6&&(r=6),r);var r}function f(t,e,n){return n?Math.round(100*t.v)+a*e:Math.round(100*t.v)-u*e}e.default=function(t){for(var e=[],n=i.default(t),r=c;r>0;r-=1){var s=n.toHsv(),o=i.default({h:d(s,r,!0),s:p(s,r,!0),v:f(s,r,!0)}).toHexString();e.push(o)}for(e.push(n.toHexString()),r=1;r<=h;r+=1)s=n.toHsv(),o=i.default({h:d(s,r),s:p(s,r),v:f(s,r)}).toHexString(),e.push(o);return e}},d1Tk:function(t,e,n){"use strict";var r=n("AmbE");e.zipAll=function(t){return function(e){return e.lift(new r.ZipOperator(t))}}},d5e7:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("iInd"),s=n("SVse"),o=n("haRT"),l=n("v67d"),a=n("5VGP"),u=n("jvIg"),c=n("SBNi"),h=r.rb({encapsulation:2,styles:[],data:{}});function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzText)})}function p(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"span",[["class","ant-divider-inner-text"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,d)),r.sb(2,540672,null,0,a.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzText)},null)}function f(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,p)),r.sb(1,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,1,0,e.component.nzText)},null)}var g=n("Rgb0"),m=n("/HVE");n("ROAe"),n.d(e,"a",function(){return b}),n.d(e,"b",function(){return _});var b=r.rb({encapsulation:0,styles:[[".u-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{float:left}.u-title[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{float:left;margin:9px 0 0 20px}.u-title[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{float:right;margin-top:12px}.u-title[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.u-title[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%], .u-title[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#000}"]],data:{}});function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,2).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(2,671744,null,0,i.p,[i.n,i.a,s.i],{routerLink:[0,"routerLink"]},null),r.Gb(3,2),(t()(),r.Nb(4,null,["",""])),(t()(),r.tb(5,0,null,null,1,"em",[],[[8,"hidden",0]],null,null,null,null)),(t()(),r.Nb(-1,null,["/"]))],function(t,e){var n=t(e,3,0,"/singer",e.context.$implicit.id);t(e,2,0,n)},function(t,e){t(e,1,0,r.Fb(e,2).target,r.Fb(e,2).href),t(e,4,0,e.context.$implicit.name),t(e,5,0,e.context.last)})}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,33,"tr",[],[[2,"ant-table-row",null]],null,null,null,null)),r.sb(1,16384,null,0,o.g,[r.k,r.D,[2,o.a]],null,null),(t()(),r.tb(2,0,null,null,5,"td",[["class","first-col"]],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.f,l.b)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(4,573440,null,0,o.d,[r.k,a.y],null,null),(t()(),r.tb(5,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(6,null,["",""])),(t()(),r.tb(7,0,null,0,0,"i",[["class","ico play-song"],["title","\u64ad\u653e"]],[[2,"current",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSong.emit([t.context.$implicit.song,!0])&&r),r},null,null)),(t()(),r.tb(8,0,null,null,6,"td",[["class","song-name"]],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.f,l.b)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(10,573440,null,0,o.d,[r.k,a.y],null,null),(t()(),r.tb(11,0,null,0,3,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,12).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(12,671744,null,0,i.p,[i.n,i.a,s.i],{routerLink:[0,"routerLink"]},null),r.Gb(13,2),(t()(),r.Nb(14,null,["",""])),(t()(),r.tb(15,0,null,null,9,"td",[["class","time-col"]],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.f,l.b)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(17,573440,null,0,o.d,[r.k,a.y],null,null),(t()(),r.tb(18,0,null,0,2,"span",[],null,null,null,null,null)),(t()(),r.Nb(19,null,["",""])),r.Jb(20,1),(t()(),r.tb(21,0,null,0,3,"p",[["class","icons"]],null,null,null,null,null)),(t()(),r.tb(22,0,null,null,0,"i",[["class","ico add"],["title","\u6dfb\u52a0"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onAddSong.emit([t.context.$implicit.song,!1])&&r),r},null,null)),(t()(),r.tb(23,0,null,null,0,"i",[["class","ico like"],["title","\u6536\u85cf"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLikeSong.emit(t.context.$implicit.song.id)&&r),r},null,null)),(t()(),r.tb(24,0,null,null,0,"i",[["class","ico share"],["title","\u5206\u4eab"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onShareSong.emit(t.context.$implicit.song)&&r),r},null,null)),(t()(),r.tb(25,0,null,null,4,"td",[],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.f,l.b)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(27,573440,null,0,o.d,[r.k,a.y],null,null),(t()(),r.ib(16777216,null,0,1,null,y)),r.sb(29,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(30,0,null,null,3,"td",[],[[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.f,l.b)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(32,573440,null,0,o.d,[r.k,a.y],null,null),(t()(),r.Nb(33,0,["",""]))],function(t,e){var n=t(e,13,0,"/songInfo",e.context.$implicit.id);t(e,12,0,n),t(e,29,0,e.context.$implicit.song.ar)},function(t,e){var n=e.component;t(e,0,0,r.Fb(e,1).nzTableComponent),t(e,2,0,r.Fb(e,4).nzLeft,r.Fb(e,4).nzRight,r.Fb(e,4).nzAlign),t(e,6,0,e.context.index+1),t(e,7,0,n.currentIndex===e.context.index),t(e,8,0,r.Fb(e,10).nzLeft,r.Fb(e,10).nzRight,r.Fb(e,10).nzAlign),t(e,11,0,r.Fb(e,12).target,r.Fb(e,12).href),t(e,14,0,e.context.$implicit.song.name),t(e,15,0,r.Fb(e,17).nzLeft,r.Fb(e,17).nzRight,r.Fb(e,17).nzAlign);var i=r.Ob(e,19,0,t(e,20,0,r.Fb(e.parent,0),e.context.$implicit.song.dt/1e3));t(e,19,0,i),t(e,25,0,r.Fb(e,27).nzLeft,r.Fb(e,27).nzRight,r.Fb(e,27).nzAlign),t(e,30,0,r.Fb(e,32).nzLeft,r.Fb(e,32).nzRight,r.Fb(e,32).nzAlign),t(e,33,0,e.context.$implicit.playCount)})}function _(t){return r.Pb(2,[r.Hb(0,u.a,[]),(t()(),r.tb(1,0,null,null,41,"div",[["class","wy-sec"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,13,"div",[["class","u-title wy-sec-wrap clearfix"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,2,"h3",[["class","wy-sec-tit"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,1,"span",[["class","f-ff2"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u542c\u6b4c\u6392\u884c"])),(t()(),r.tb(6,0,null,null,1,"span",[["class","sub s-fc3"]],null,null,null,null,null)),(t()(),r.Nb(7,null,[" \u7d2f\u8ba1\u542c\u6b4c","\u9996 "])),(t()(),r.tb(8,0,null,null,7,"div",[["class","more tab-type"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,1,"span",[],[[2,"active",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeType.emit(1)&&r),r},null,null)),(t()(),r.Nb(-1,null,["\u6700\u8fd1\u4e00\u5468"])),(t()(),r.tb(11,0,null,null,2,"nz-divider",[["nzType","vertical"]],null,null,null,f,h)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(13,638976,null,0,c.a,[r.k,a.y],{nzType:[0,"nzType"]},null),(t()(),r.tb(14,0,null,null,1,"span",[],[[2,"active",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeType.emit(0)&&r),r},null,null)),(t()(),r.Nb(-1,null,["\u6240\u6709\u65f6\u95f4"])),(t()(),r.tb(16,0,null,null,26,"nz-table",[["class","wy-table"],["nzBordered",""],["nzNoResult","\u6682\u65e0\u97f3\u4e50\uff01"]],[[2,"ant-table-empty",null]],null,null,l.e,l.a)),r.sb(17,6012928,[["basicTable",4]],2,o.a,[r.D,r.y,r.h,g.d,m.a,r.k],{nzNoResult:[0,"nzNoResult"],nzData:[1,"nzData"],nzFrontPagination:[2,"nzFrontPagination"],nzBordered:[3,"nzBordered"]},null),r.Lb(603979776,1,{listOfNzThComponent:1}),r.Lb(603979776,2,{nzVirtualScrollDirective:0}),(t()(),r.tb(20,0,null,0,18,"thead",[],null,null,null,l.h,l.d)),r.sb(21,5423104,null,1,o.f,[[2,o.a],r.k,r.D],null,null),r.Lb(603979776,3,{listOfNzThComponent:1}),(t()(),r.tb(23,0,null,0,15,"tr",[],[[2,"ant-table-row",null]],null,null,null,null)),r.sb(24,16384,null,0,o.g,[r.k,r.D,[2,o.a]],null,null),(t()(),r.tb(25,0,null,null,1,"th",[["nzWidth","80px"]],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.g,l.c)),r.sb(26,770048,[[3,4],[1,4]],0,o.e,[r.h,g.d],{nzWidth:[0,"nzWidth"]},null),(t()(),r.tb(27,0,null,null,2,"th",[],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.g,l.c)),r.sb(28,770048,[[3,4],[1,4]],0,o.e,[r.h,g.d],null,null),(t()(),r.Nb(-1,0,["\u6807\u9898"])),(t()(),r.tb(30,0,null,null,2,"th",[["nzWidth","120px"]],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.g,l.c)),r.sb(31,770048,[[3,4],[1,4]],0,o.e,[r.h,g.d],{nzWidth:[0,"nzWidth"]},null),(t()(),r.Nb(-1,0,["\u65f6\u957f"])),(t()(),r.tb(33,0,null,null,2,"th",[["nzWidth","80px"]],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.g,l.c)),r.sb(34,770048,[[3,4],[1,4]],0,o.e,[r.h,g.d],{nzWidth:[0,"nzWidth"]},null),(t()(),r.Nb(-1,0,["\u6b4c\u624b"])),(t()(),r.tb(36,0,null,null,2,"th",[],[[2,"ant-table-column-has-actions",null],[2,"ant-table-column-has-filters",null],[2,"ant-table-column-has-sorters",null],[2,"ant-table-selection-column-custom",null],[2,"ant-table-selection-column",null],[2,"ant-table-expand-icon-th",null],[2,"ant-table-th-left-sticky",null],[2,"ant-table-th-right-sticky",null],[2,"ant-table-column-sort",null],[4,"left",null],[4,"right",null],[4,"text-align",null]],null,null,l.g,l.c)),r.sb(37,770048,[[3,4],[1,4]],0,o.e,[r.h,g.d],null,null),(t()(),r.Nb(-1,0,["\u64ad\u653e\u6b21\u6570"])),(t()(),r.tb(39,0,null,0,3,"tbody",[],[[2,"ant-table-tbody",null]],null,null,null,null)),r.sb(40,16384,null,0,o.c,[[2,o.a]],null,null),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(42,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,13,0,"vertical"),t(e,17,0,"\u6682\u65e0\u97f3\u4e50\uff01",n.records,!1,""),t(e,26,0,"80px"),t(e,28,0),t(e,31,0,"120px"),t(e,34,0,"80px"),t(e,37,0),t(e,42,0,r.Fb(e,17).data)},function(t,e){var n=e.component;t(e,7,0,n.listenSongs),t(e,9,0,1===n.recordType),t(e,14,0,0===n.recordType),t(e,16,0,0===r.Fb(e,17).data.length),t(e,23,0,r.Fb(e,24).nzTableComponent),t(e,25,1,[r.Fb(e,26).nzShowFilter||r.Fb(e,26).nzShowSort||r.Fb(e,26).nzCustomFilter,r.Fb(e,26).nzShowFilter||r.Fb(e,26).nzCustomFilter,r.Fb(e,26).nzShowSort,r.Fb(e,26).nzShowRowSelection,r.Fb(e,26).nzShowCheckbox,r.Fb(e,26).nzExpand,r.Fb(e,26).nzLeft,r.Fb(e,26).nzRight,"descend"===r.Fb(e,26).nzSort||"ascend"===r.Fb(e,26).nzSort,r.Fb(e,26).nzLeft,r.Fb(e,26).nzRight,r.Fb(e,26).nzAlign]),t(e,27,1,[r.Fb(e,28).nzShowFilter||r.Fb(e,28).nzShowSort||r.Fb(e,28).nzCustomFilter,r.Fb(e,28).nzShowFilter||r.Fb(e,28).nzCustomFilter,r.Fb(e,28).nzShowSort,r.Fb(e,28).nzShowRowSelection,r.Fb(e,28).nzShowCheckbox,r.Fb(e,28).nzExpand,r.Fb(e,28).nzLeft,r.Fb(e,28).nzRight,"descend"===r.Fb(e,28).nzSort||"ascend"===r.Fb(e,28).nzSort,r.Fb(e,28).nzLeft,r.Fb(e,28).nzRight,r.Fb(e,28).nzAlign]),t(e,30,1,[r.Fb(e,31).nzShowFilter||r.Fb(e,31).nzShowSort||r.Fb(e,31).nzCustomFilter,r.Fb(e,31).nzShowFilter||r.Fb(e,31).nzCustomFilter,r.Fb(e,31).nzShowSort,r.Fb(e,31).nzShowRowSelection,r.Fb(e,31).nzShowCheckbox,r.Fb(e,31).nzExpand,r.Fb(e,31).nzLeft,r.Fb(e,31).nzRight,"descend"===r.Fb(e,31).nzSort||"ascend"===r.Fb(e,31).nzSort,r.Fb(e,31).nzLeft,r.Fb(e,31).nzRight,r.Fb(e,31).nzAlign]),t(e,33,1,[r.Fb(e,34).nzShowFilter||r.Fb(e,34).nzShowSort||r.Fb(e,34).nzCustomFilter,r.Fb(e,34).nzShowFilter||r.Fb(e,34).nzCustomFilter,r.Fb(e,34).nzShowSort,r.Fb(e,34).nzShowRowSelection,r.Fb(e,34).nzShowCheckbox,r.Fb(e,34).nzExpand,r.Fb(e,34).nzLeft,r.Fb(e,34).nzRight,"descend"===r.Fb(e,34).nzSort||"ascend"===r.Fb(e,34).nzSort,r.Fb(e,34).nzLeft,r.Fb(e,34).nzRight,r.Fb(e,34).nzAlign]),t(e,36,1,[r.Fb(e,37).nzShowFilter||r.Fb(e,37).nzShowSort||r.Fb(e,37).nzCustomFilter,r.Fb(e,37).nzShowFilter||r.Fb(e,37).nzCustomFilter,r.Fb(e,37).nzShowSort,r.Fb(e,37).nzShowRowSelection,r.Fb(e,37).nzShowCheckbox,r.Fb(e,37).nzExpand,r.Fb(e,37).nzLeft,r.Fb(e,37).nzRight,"descend"===r.Fb(e,37).nzSort||"ascend"===r.Fb(e,37).nzSort,r.Fb(e,37).nzLeft,r.Fb(e,37).nzRight,r.Fb(e,37).nzAlign]),t(e,39,0,r.Fb(e,40).nzTableComponent)})}},dEPG:function(t,e,n){var r=n("l0SJ");t.exports=function(){return r(new Date)}},dJQg:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=e&&Number(e.weekStartsOn)||0,i=r(t),s=i.getDay(),o=6+(s<n?-7:0)-(s-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}},dMDw:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("1pIY");e.debounceTime=function(t,e){return void 0===e&&(e=s.async),function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.dueTime,this.scheduler))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(a,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(i.Subscriber);function a(t){t.debouncedNext()}},dgaN:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 2===r(t).getDay()}},ds6q:function(t,e,n){var r=n("mrSG").__extends,i=n("Q1FS"),s=n("FWf1"),o=n("zB/H"),l=n("Mxlh"),a=n("FiyT"),u=n("p//D"),c=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r(e,t),e}(s.Subscriber);e.SubjectSubscriber=c;var h=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r(e,t),e.prototype[u.rxSubscriber]=function(){return new c(this)},e.prototype.lift=function(t){var e=new d(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new l.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new l.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new l.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new l.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new l.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.isStopped?(t.complete(),o.Subscription.EMPTY):(this.observers.push(t),new a.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new d(t,e)},e}(i.Observable);e.Subject=h;var d=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):o.Subscription.EMPTY},e}(h);e.AnonymousSubject=d},dvZr:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"j",function(){return i}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return o}),n.d(e,"i",function(){return l}),n.d(e,"f",function(){return a}),n.d(e,"k",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"c",function(){return h}),n.d(e,"m",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"a",function(){return f}),n.d(e,"l",function(){return g}),n.d(e,"n",function(){return m});const r=8,i=9,s=13,o=27,l=32,a=37,u=38,c=39,h=40,d=48,p=57,f=65,g=90;function m(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}},e15G:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("5VGP");class i{static forRoot(){return Object(r.rb)("'forRoot' is not recommended if you are using Angular 6.0.0+. This API is going to be removed in 9.0.0."),{ngModule:i}}}},e2pG:function(t,e,n){"use strict";var r=n("Q1FS"),i=n("zB/H"),s=n("VKeD"),o=n("poJ0");e.fromIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.Observable(e?function(n){var r,o=new i.Subscription;return o.add(function(){r&&"function"==typeof r.return&&r.return()}),o.add(e.schedule(function(){r=t[s.iterator](),o.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(s){return void n.error(s)}e?n.complete():(n.next(t),this.schedule())}}))})),o}:o.subscribeToIterable(t))}},eBR6:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n("6+H1"),i=n("DQLy"),s=function(t){return t[t.Add=0]="Add",t[t.Play=1]="Play",t[t.Delete=2]="Delete",t[t.Clear=3]="Clear",t[t.Other=4]="Other",t}({});const o={playing:!1,songList:[],playList:[],playMode:{type:"loop",label:"\u5faa\u73af"},currentIndex:-1,currentAction:s.Other},l=Object(i.u)(o,Object(i.x)(r.e,(t,{playing:e})=>Object.assign({},t,{playing:e})),Object(i.x)(r.c,(t,{playList:e})=>Object.assign({},t,{playList:e})),Object(i.x)(r.f,(t,{songList:e})=>Object.assign({},t,{songList:e})),Object(i.x)(r.d,(t,{playMode:e})=>Object.assign({},t,{playMode:e})),Object(i.x)(r.b,(t,{currentIndex:e})=>Object.assign({},t,{currentIndex:e})),Object(i.x)(r.a,(t,{currentAction:e})=>Object.assign({},t,{currentAction:e})));function a(t,e){return l(t,e)}},eCGT:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("dvZr"),n("8Y7J"),n("5VGP");class r{}},eIep:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("l7GE"),i=n("51Dv"),s=n("ZUHj"),o=n("lJxs"),l=n("Cfvw");function a(t,e){return"function"==typeof e?n=>n.pipe(a((n,r)=>Object(l.a)(t(n,r)).pipe(Object(o.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new u(t))}class u{constructor(t){this.project=t}call(t,e){return e.subscribe(new c(t,this.project))}}class c extends r.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const o=new i.a(this,void 0,void 0);this.destination.add(o),this.innerSubscription=Object(s.a)(this,t,e,n,o)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}},eJ3O:function(t,e,n){"use strict";var r=n("Q1FS"),i=n("1pIY"),s=n("p0+S"),o=n("nzqU");function l(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}e.timer=function(t,e,n){void 0===t&&(t=0);var a=-1;return s.isNumeric(e)?a=Number(e)<1?1:Number(e):o.isScheduler(e)&&(n=e),o.isScheduler(n)||(n=i.async),new r.Observable(function(e){var r=s.isNumeric(t)?t:+t-n.now();return n.schedule(l,r,{index:0,period:a,subscriber:e})})}},eNwd:function(t,e,n){"use strict";var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}var s=n("IjjT");class o extends s.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}n.d(e,"a",function(){return l});const l=new o(i)},eThW:function(t,e,n){"use strict";var r=n("AmbE");e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.zip.apply(void 0,[e].concat(t)))}}},eYLY:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("zB/H");e.AsyncSubject=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),s.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),s.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.Subject)},eeun:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.exhaust=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return r(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(i.OuterSubscriber)},eipH:function(t,e,n){"use strict";var r=n("Q1FS"),i=n("zB/H"),s=n("zfKp"),o=n("ozli");e.fromObservable=function(t,e){return new r.Observable(e?function(n){var r=new i.Subscription;return r.add(e.schedule(function(){var i=t[s.observable]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}:o.subscribeToObservable(t))}},eoPS:function(t,e,n){var r=n("iUbB");t.exports=function(t,e){var n=Number(e);return r(t,7*n)}},f6gv:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.skipWhile=function(t){return function(e){return e.lift(new s(t))}};var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate))},t}(),o=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return r(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}},e}(i.Subscriber)},f9gI:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){if(!(e instanceof Array))throw new TypeError(toString.call(e)+" is not an instance of Array");var n,i,s=r(t).getTime();return e.forEach(function(t,e){var o=r(t),l=Math.abs(s-o.getTime());(void 0===n||l<i)&&(n=e,i=l)}),n}},fDlF:function(t,e,n){"use strict";n.d(e,"a",function(){return S}),n.d(e,"c",function(){return Ot}),n.d(e,"g",function(){return kt}),n.d(e,"e",function(){return C}),n.d(e,"b",function(){return le}),n.d(e,"d",function(){return ze}),n.d(e,"f",function(){return Ie}),n.d(e,"h",function(){return Me});var r=n("GS7A");function i(){return"undefined"!=typeof process}function s(t){switch(t.length){case 0:return new r.d;case 1:return t[0];default:return new r.k(t)}}function o(t,e,n,i,s={},o={}){const l=[],a=[];let u=-1,c=null;if(i.forEach(t=>{const n=t.offset,i=n==u,h=i&&c||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,l),a){case r.l:a=s[n];break;case r.a:a=o[n];break;default:a=e.normalizeStyleValue(n,i,a,l)}h[i]=a}),i||a.push(h),c=h,u=n}),l.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${l.join(t)}`)}return a}function l(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&a(n,"start",t)));break;case"done":t.onDone(()=>r(n&&a(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&a(n,"destroy",t)))}}function a(t,e,n){const r=n.totalTime,i=u(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function u(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function c(t,e,n){let r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):(r=t[e])||(r=t[e]=n),r}function h(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let d=(t,e)=>!1,p=(t,e)=>!1,f=(t,e,n)=>[];const g=i();(g||"undefined"!=typeof Element)&&(d=(t,e)=>t.contains(e),p=(()=>{if(g||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):p}})(),f=(t,e,n)=>{let r=[];if(n)r.push(...t.querySelectorAll(e));else{const n=t.querySelector(e);n&&r.push(n)}return r});let m=null,b=!1;function y(t){m||(m=("undefined"!=typeof document?document.body:null)||{},b=!!m.style&&"WebkitAppearance"in m.style);let e=!0;return m.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in m.style)&&b&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in m.style),e}const v=p,_=d,w=f;function x(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}class C{validateStyleProperty(t){return y(t)}matchesElement(t,e){return v(t,e)}containsElement(t,e){return _(t,e)}query(t,e,n){return w(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,s,o=[],l){return new r.d(n,i)}}let S=(()=>{class t{}return t.NOOP=new C,t})();const O=1e3,k="{{",E="ng-enter",T="ng-leave",z="ng-trigger",P=".ng-trigger",I="ng-animating",M=".ng-animating";function D(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:A(parseFloat(e[1]),e[2])}function A(t,e){switch(e){case"s":return t*O;default:return t}}function N(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=A(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=A(parseFloat(o),n[4]));const l=n[5];l&&(s=l)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function R(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function F(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else R(t,n);return n}function $(t,e,n){return n?e+":"+n+";":""}function L(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=$(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=$(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function j(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=K(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),i()&&L(t))}function B(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=K(e);t.style[n]=""}),i()&&L(t))}function V(t){return Array.isArray(t)?1==t.length?t[0]:Object(r.f)(t):t}const W=new RegExp(`${k}\\s*(.+?)\\s*}}`,"g");function U(t){let e=[];if("string"==typeof t){const n=t.toString();let r;for(;r=W.exec(n);)e.push(r[1]);W.lastIndex=0}return e}function H(t,e,n){const r=t.toString(),i=r.replace(W,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function G(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const q=/-+([a-z0-9])/g;function K(t){return t.replace(q,(...t)=>t[1].toUpperCase())}function Y(t,e){return 0===t||0===e}function X(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=Q(t,e)})}}return e}function Z(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Q(t,e){return window.getComputedStyle(t)[e]}const J="*";function tt(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>(function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(rt(i,o)),"<"!=s[0]||i==J&&o==J||e.push(rt(o,i))})(t,n,e)):n.push(t),n}const et=new Set(["true","1"]),nt=new Set(["false","0"]);function rt(t,e){const n=et.has(t)||nt.has(t),r=et.has(e)||nt.has(e);return(i,s)=>{let o=t==J||t==i,l=e==J||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?et.has(t):nt.has(t)),!l&&r&&"boolean"==typeof s&&(l=s?et.has(e):nt.has(e)),o&&l}}const it=":self",st=new RegExp(`s*${it}s*,?`,"g");function ot(t,e,n){return new at(t).build(e,n)}const lt="";class at{constructor(t){this._driver=t}build(t,e){const n=new ut(e);return this._resetContextStyleTimingState(n),Z(this,V(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector=lt,t.collectedStyles={},t.collectedStyles[lt]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(ct(t)){const e=t;Object.keys(e).forEach(t=>{U(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=G(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Z(this,V(t.animation),e);return{type:1,matchers:tt(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ht(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Z(this,t,e)),options:ht(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=Z(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:ht(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return dt(N(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=dt(0,0,"");return t.dynamic=!0,t.strValue=r,t}return dt((n=n||N(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let s=t.styles?t.styles:Object(r.h)({});if(5==s.type)i=this.visitKeyframes(s,e);else{let s=t.styles,o=!1;if(!s){o=!0;const t={};n.easing&&(t.easing=n.easing),s=Object(r.h)(t)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(s,e);l.isEmptyStep=o,i=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==r.a?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,s=null;return n.forEach(t=>{if(ct(t)){const e=t,n=e.easing;if(n&&(s=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf(k)>=0){i=!0;break}}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let l=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),l=!1),i=o.startTime),l&&(s[n]={startTime:i,endTime:r}),e.options&&function(r,i,s){const o=e.options.params||{},l=U(t[n]);l.length&&l.forEach(t=>{o.hasOwnProperty(t)||s.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(0,0,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,l=0;const a=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let a=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(ct(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(ct(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=a&&(r++,u=n.offset=a),o=o||u<0||u>1,s=s||u<l,l=u,i.push(u),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;r>0&&r<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=e.currentTime,p=e.currentAnimateTimings,f=p.duration;return a.forEach((t,r)=>{const s=c>0?r==h?1:c*r:i[r],o=s*f;e.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Z(this,V(t.animation),e),options:ht(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ht(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ht(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>t==it);return e&&(t=t.replace(st,"")),[t=t.replace(/@\*/g,P).replace(/@\w+/g,t=>P+"-"+t.substr(1)).replace(/:animating/g,M),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,c(e.collectedStyles,e.currentQuerySelector,{});const o=Z(this,V(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:ht(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:N(t.timings,e.errors,!0);return{type:12,animation:Z(this,V(t.animation),e),timings:n,options:null}}}class ut{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ct(t){return!Array.isArray(t)&&"object"==typeof t}function ht(t){var e;return t?(t=R(t)).params&&(t.params=(e=t.params)?R(e):null):t={},t}function dt(t,e,n){return{duration:t,delay:e,easing:n}}function pt(t,e,n,r,i,s,o=null,l=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:l}}class ft{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const gt=1,mt=new RegExp(":enter","g"),bt=new RegExp(":leave","g");function yt(t,e,n,r,i,s={},o={},l,a,u=[]){return(new vt).buildKeyframes(t,e,n,r,i,s,o,l,a,u)}class vt{buildKeyframes(t,e,n,r,i,s,o,l,a,u=[]){a=a||new ft;const c=new wt(t,e,a,r,i,u,[]);c.options=l,c.currentTimeline.setStyles([s],null,c.errors,l),Z(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,l)}return h.length?h.map(t=>t.buildKeyframes()):[pt(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?D(n.duration):null,s=null!=n.delay?D(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),Z(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&((r=e.createSubContext(i)).transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=_t);const t=D(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Z(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?D(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),Z(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return N(e.params?H(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?D(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=_t);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let l=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(l=o.currentTimeline),Z(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let l=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":l=o-l;break;case"full":l=n.currentStaggerTime}const a=e.currentTimeline;l&&a.delayNextStep(l);const u=a.currentTime;Z(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const _t={};class wt{constructor(t,e,n,r,i,s,o,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_t,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new xt(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=D(n.duration)),null!=n.delay&&(r.delay=D(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=H(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new wt(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=_t,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Ct(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(mt,"."+this._enterClassName)).replace(bt,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class xt{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new xt(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=gt,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||r.a,this._currentKeyframe[t]=r.a}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const s=i&&i.params||{},o=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e)).forEach(t=>{n[t]=r.a}):F(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(o).forEach(t=>{const e=H(o[t],s,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:r.a),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((s,o)=>{const l=F(s,!0);Object.keys(l).forEach(n=>{const i=l[n];i==r.l?t.add(n):i==r.a&&e.add(n)}),n||(l.offset=o/this.duration),i.push(l)});const s=t.size?G(t.values()):[],o=e.size?G(e.values()):[];if(n){const t=i[0],e=R(t);t.offset=0,e.offset=1,i=[t,e]}return pt(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Ct extends xt{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.element=e,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,l=F(t[0],!1);l.offset=0,i.push(l);const a=F(t[0],!1);a.offset=St(o),i.push(a);const u=t.length-1;for(let r=1;r<=u;r++){let o=F(t[r],!1);o.offset=St((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return pt(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function St(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Ot{}class kt extends Ot{normalizePropertyName(t,e){return K(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(Et[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const Et=(()=>(function(t){const e={};return t.forEach(t=>e[t]=!0),e})("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Tt(t,e,n,r,i,s,o,l,a,u,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:l,queriedElements:a,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const zt={};class Pt{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,l,a,u){const h=[],d=this.ast.options&&this.ast.options.params||zt,p=this.buildStyles(n,o&&o.params||zt,h),f=l&&l.params||zt,g=this.buildStyles(r,f,h),m=new Set,b=new Map,y=new Map,v="void"===r,_={params:Object.assign({},d,f)},w=u?[]:yt(t,e,this.ast.animation,i,s,p,g,_,a,h);let x=0;if(w.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),h.length)return Tt(e,this._triggerName,n,r,v,p,g,[],[],b,y,x,h);w.forEach(t=>{const n=t.element,r=c(b,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=c(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&m.add(n)});const C=G(m.values());return Tt(e,this._triggerName,n,r,v,p,g,w,C,b,y,x)}}class It{constructor(t,e){this.styles=t,this.defaultParams=e}buildStyles(t,e){const n={},r=R(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=H(s,r,e)),n[t]=s})}}),n}}class Mt{constructor(t,e){this.name=t,this.ast=e,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new It(t.style,t.options&&t.options.params||{})}),Dt(this.states,"true","1"),Dt(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Pt(t,e,this.states))}),this.fallbackTransition=new Pt(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Dt(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const At=new ft;class Nt{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=ot(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=o(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],o=this._animations[t];let l;const a=new Map;if(o?(l=yt(this._driver,e,o,E,T,{},{},n,At,i)).forEach(t=>{const e=c(a,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)}):(i.push("The requested animation doesn't exist or has already been destroyed"),l=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);a.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,r.a)})});const u=s(l.map(t=>{const e=a.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=u,u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=u(e,"","","");return l(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Rt="ng-animate-queued",Ft=".ng-animate-queued",$t="ng-animate-disabled",Lt=".ng-animate-disabled",jt="ng-star-inserted",Bt=".ng-star-inserted",Vt=[],Wt={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ut={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ht="__ng_removed";class Gt{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){const e=R(t);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const qt="void",Kt=new Gt(qt);class Yt{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,re(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=c(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const l=c(this._engine.statesByElement,t,{});return l.hasOwnProperty(e)||(re(t,z),re(t,z+"-"+e),l[e]=Kt),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete l[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Zt(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(re(t,z),re(t,z+"-"+e),this._engine.statesByElement.set(t,o={}));let l=o[e];const a=new Gt(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&a.absorbOptions(l.options),o[e]=a,l||(l=Kt),a.value!==qt&&l.value===a.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(l.params,a.params)){const e=[],n=i.matchStyles(l.value,l.params,e),r=i.matchStyles(a.value,a.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{B(t,n),j(t,r)})}return}const u=c(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let h=i.matchTransition(l.value,a.value,t,a.params),d=!1;if(!h){if(!r)return;h=i.fallbackTransition,d=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:l,toState:a,player:s,isFallbackTransition:d}),d||(re(t,Rt),s.onStart(()=>{ie(t,Rt)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),u.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e,n=!1){this._engine.driver.query(t,P,!0).forEach(t=>{if(t[Ht])return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)})}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const o=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,qt,r);n&&o.push(n)}}),o.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&s(o).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t);if(e){const n=new Set;e.forEach(e=>{const r=e.name;if(n.has(r))return;n.add(r);const i=this._triggers[r].fallbackTransition,s=this._engine.statesByElement.get(t)[r]||Kt,o=new Gt(qt),l=new Zt(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:i,fromState:s,toState:o,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}this.prepareLeaveAnimationListeners(t),r?n.markElementAsRemoved(this.id,t,!1,e):(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}insertNode(t,e){re(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=u(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,l(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),!!this._queue.find(e=>e.element===t)||e}}class Xt{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Yt(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(Qt(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Qt(e))return;const i=e[Ht];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),re(t,$t)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ie(t,$t))}removeNode(t,e,n,r){if(Qt(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e[Ht]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return Qt(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,P,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,M,!0)).forEach(t=>this.finishActiveQueriedAnimationOnElement(t))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return s(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ht];if(e&&e.setForRemoval){if(t[Ht]=Wt,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Lt)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Lt,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)re(this.collectedEnterElements[n],jt);if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?s(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new ft,i=[],o=new Map,l=[],a=new Map,u=new Map,h=new Map,d=new Set;this.disabledNodes.forEach(t=>{d.add(t);const e=this.driver.query(t,Ft,!0);for(let n=0;n<e.length;n++)d.add(e[n])});const p=this.bodyNode,f=Array.from(this.statesByElement.keys()),g=ee(f,this.collectedEnterElements),m=new Map;let b=0;g.forEach((t,e)=>{const n=E+b++;m.set(e,n),t.forEach(t=>re(t,n))});const y=[],v=new Set,_=new Set;for(let r=0;r<this.collectedLeaveElements.length;r++){const t=this.collectedLeaveElements[r],e=t[Ht];e&&e.setForRemoval&&(y.push(t),v.add(t),e.hasAnimation?this.driver.query(t,Bt,!0).forEach(t=>v.add(t)):_.add(t))}const w=new Map,x=ee(f,Array.from(v));x.forEach((t,e)=>{const n=T+b++;w.set(e,n),t.forEach(t=>re(t,n))}),t.push(()=>{g.forEach((t,e)=>{const n=m.get(e);t.forEach(t=>ie(t,n))}),x.forEach((t,e)=>{const n=w.get(e);t.forEach(t=>ie(t,n))}),y.forEach(t=>{this.processLeaveNode(t)})});const C=[],S=[];for(let r=this._namespaceList.length-1;r>=0;r--)this._namespaceList[r].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(C.push(e),this.collectedEnterElements.length){const t=r[Ht];if(t&&t.setForMove)return void e.destroy()}const s=!p||!this.driver.containsElement(p,r),o=w.get(r),d=m.get(r),f=this._buildInstruction(t,n,d,o,s);if(!f.errors||!f.errors.length)return s?(e.onStart(()=>B(r,f.fromStyles)),e.onDestroy(()=>j(r,f.toStyles)),void i.push(e)):t.isFallbackTransition?(e.onStart(()=>B(r,f.fromStyles)),e.onDestroy(()=>j(r,f.toStyles)),void i.push(e)):(f.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,f.timelines),l.push({instruction:f,player:e,element:r}),f.queriedElements.forEach(t=>c(a,t,[]).push(e)),f.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=u.get(e);t||u.set(e,t=new Set),n.forEach(e=>t.add(e))}}),void f.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=h.get(e);r||h.set(e,r=new Set),n.forEach(t=>r.add(t))}));S.push(f)});if(S.length){const t=[];S.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),C.forEach(t=>t.destroy()),this.reportError(t)}const O=new Map,k=new Map;l.forEach(t=>{const e=t.element;n.has(e)&&(k.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,O))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{c(O,e,[]).push(t),t.destroy()})});const z=y.filter(t=>oe(t,u,h)),P=new Map;te(P,this.driver,_,h,r.a).forEach(t=>{oe(t,u,h)&&z.push(t)});const I=new Map;g.forEach((t,e)=>{te(I,this.driver,new Set(t),u,r.l)}),z.forEach(t=>{const e=P.get(t),n=I.get(t);P.set(t,Object.assign({},e,n))});const D=[],A=[],N={};l.forEach(t=>{const{element:e,player:r,instruction:l}=t;if(n.has(e)){if(d.has(e))return r.onDestroy(()=>j(e,l.toStyles)),r.disabled=!0,r.overrideTotalTime(l.totalTime),void i.push(r);let t=N;if(k.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=k.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>k.set(e,t))}const n=this._buildAnimation(r.namespaceId,l,O,o,I,P);if(r.setRealPlayer(n),t===N)D.push(r);else{const e=this.playersByElement.get(t);e&&e.length&&(r.parentPlayer=s(e)),i.push(r)}}else B(e,l.fromStyles),r.onDestroy(()=>j(e,l.toStyles)),A.push(r),d.has(e)&&i.push(r)}),A.forEach(t=>{const e=o.get(t.element);if(e&&e.length){const n=s(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let r=0;r<y.length;r++){const t=y[r],e=t[Ht];if(ie(t,T),e&&e.hasAnimation)continue;let n=[];if(a.size){let e=a.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,M,!0);for(let t=0;t<r.length;t++){let e=a.get(r[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?se(this,t,i):this.processLeaveNode(t)}return y.length=0,D.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),D}elementContainsData(t,e){let n=!1;const r=e[Ht];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==qt;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,l=t!==r,a=c(n,t,[]);this._getPreviousPlayers(t,l,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),a.push(t)})}B(r,e.fromStyles)}_buildAnimation(t,e,n,i,l,a){const u=e.triggerName,h=e.element,d=[],p=new Set,f=new Set,g=e.timelines.map(e=>{const s=e.element;p.add(s);const c=s[Ht];if(c&&c.removedBeforeQueried)return new r.d(e.duration,e.delay);const g=s!==h,m=function(t){const e=[];return function t(e,n){for(let i=0;i<e.length;i++){const s=e[i];s instanceof r.k?t(s.players,n):n.push(s)}}((n.get(s)||Vt).map(t=>t.getRealPlayer()),e),e}().filter(t=>!!t.element&&t.element===s),b=l.get(s),y=a.get(s),v=o(0,this._normalizer,0,e.keyframes,b,y),_=this._buildPlayer(e,v,m);if(e.subTimeline&&i&&f.add(s),g){const e=new Zt(t,u,s);e.setRealPlayer(_),d.push(e)}return _});d.forEach(t=>{c(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>(function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e)){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e]){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r})(this.playersByQueriedElement,t.element,t))}),p.forEach(t=>re(t,I));const m=s(g);return m.onDestroy(()=>{p.forEach(t=>ie(t,I)),j(h,e.toStyles)}),f.forEach(t=>{c(i,t,[]).push(m)}),m}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new r.d(t.duration,t.delay)}}class Zt{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new r.d,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>l(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){c(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Qt(t){return t&&1===t.nodeType}function Jt(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function te(t,e,n,r,i){const s=[];n.forEach(t=>s.push(Jt(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r[Ht]=Ut,o.push(r))}),t.set(r,s)});let l=0;return n.forEach(t=>Jt(t,s[l++])),o}function ee(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;return e.forEach(t=>{const e=function t(e){if(!e)return 1;let s=i.get(e);if(s)return s;const o=e.parentNode;return s=n.has(o)?o:r.has(o)?1:t(o),i.set(e,s),s}(t);1!==e&&n.get(e).push(t)}),n}const ne="$$classes";function re(t,e){if(t.classList)t.classList.add(e);else{let n=t[ne];n||(n=t[ne]={}),n[e]=!0}}function ie(t,e){if(t.classList)t.classList.remove(e);else{let n=t[ne];n&&delete n[e]}}function se(t,e,n){s(n).onDone(()=>t.processLeaveNode(e))}function oe(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class le{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Xt(t,e,n),this._timelineEngine=new Nt(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=ot(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e){return new Mt(t,e)}(r,e),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=h(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=h(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function ae(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=ce(e[0]),e.length>1&&(r=ce(e[e.length-1]))):e&&(n=ce(e)),n||r?new ue(t,n,r):null}let ue=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let i=t.initialStylesByElement.get(e);i||t.initialStylesByElement.set(e,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&j(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(j(this._element,this._initialStyles),this._endStyles&&(j(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(B(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(B(this._element,this._endStyles),this._endStyles=null),j(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function ce(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];he(i)&&((e=e||{})[i]=t[i])}return e}function he(t){return"display"===t||"position"===t}const de=3,pe="animation",fe="animationend",ge=1e3;class me{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=xe(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),we(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),_e(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){be(this._element,this._name,"paused")}resume(){be(this._element,this._name,"running")}setPosition(t){const e=ye(this._element,this._name);this._position=t*this._duration,we(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(de))*ge;t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),_e(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=xe(t,"").split(","),r=ve(n,e);r>=0&&(n.splice(r,1),we(t,"",n.join(",")))}(this._element,this._name))}}function be(t,e,n){we(t,"PlayState",n,ye(t,e))}function ye(t,e){const n=xe(t,"");return n.indexOf(",")>0?ve(n.split(","),e):ve([n],e)}function ve(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function _e(t,e,n){n?t.removeEventListener(fe,e):t.addEventListener(fe,e)}function we(t,e,n,r){const i=pe+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function xe(t,e){return t.style[pe+e]}const Ce="forwards",Se="linear";class Oe{constructor(t,e,n,r,i,s,o,l){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||Se,this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new me(this.element,this.animationName,this._duration,this._delay,this.easing,Ce,()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Q(this.element,n))})}this.currentSnapshot=t}}class ke extends r.d{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=x(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}const Ee="gen_css_kf_",Te=" ";class ze{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(t){return y(t)}matchesElement(t,e){return v(t,e)}containsElement(t,e){return _(t,e)}query(t,e,n){return w(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>x(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=Te;const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=Te,Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.innerHTML=r,s}animate(t,e,n,r,i,s=[],o){o&&this._notifyFaultyScrubber();const l=s.filter(t=>t instanceof Oe),a={};Y(n,r)&&l.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>a[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=X(t,e,a));if(0==n)return new ke(t,u);const c=`${Ee}${this._count++}`,h=this.buildKeyframeElement(t,c,e);document.querySelector("head").appendChild(h);const d=ae(t,e),p=new Oe(t,e,c,n,r,i,u,d);return p.onDestroy(()=>(function(t){h.parentNode.removeChild(h)})()),p}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class Pe{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Q(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Ie{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(De().toString()),this._cssKeyframesDriver=new ze}validateStyleProperty(t){return y(t)}matchesElement(t,e){return v(t,e)}containsElement(t,e){return _(t,e)}query(t,e,n){return w(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const l={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(l.easing=i);const a={},u=s.filter(t=>t instanceof Pe);Y(n,r)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>a[t]=e[t])});const c=ae(t,e=X(t,e=e.map(t=>F(t,!1)),a));return new Pe(t,e,l,c)}}function Me(){return"function"==typeof De()}function De(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}},fMhY:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.isEmpty=function(){return function(t){return t.lift(new s)}};var s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new o(t))},t}(),o=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(i.Subscriber)},"fb/r":function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return a});var r=n("mrSG"),i=n("2Vo4"),s=n("Kj3r"),o=n("5VGP");let l=(()=>{class t{constructor(t){this.cdr=t,this.nzSize="default",this.nzDelay=0,this.nzSimple=!1,this.nzSpinning=!0,this.loading=!0,this.spinning$=new i.a(this.nzSpinning),this.loading$=this.spinning$.pipe(Object(s.a)(this.nzDelay))}subscribeLoading(){this.unsubscribeLoading(),this.loading_=this.loading$.subscribe(t=>{this.loading=t,this.cdr.markForCheck()})}unsubscribeLoading(){this.loading_&&(this.loading_.unsubscribe(),this.loading_=null)}ngOnInit(){this.subscribeLoading()}ngOnChanges(t){t.nzSpinning&&(t.nzSpinning.isFirstChange()&&(this.loading=this.nzSpinning),this.spinning$.next(this.nzSpinning)),t.nzDelay&&(this.loading$=this.spinning$.pipe(Object(s.a)(this.nzDelay)),this.subscribeLoading())}ngOnDestroy(){this.unsubscribeLoading()}}return Object(r.__decorate)([Object(o.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDelay",void 0),Object(r.__decorate)([Object(o.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSimple",void 0),Object(r.__decorate)([Object(o.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSpinning",void 0),t})();class a{}},ffpz:function(t,e,n){"use strict";e.Scheduler=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}()},fnxQ:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.sequenceEqual=function(t,e){return function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.compareTo=t,this.comparator=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.compareTo,this.comparator))},t}();e.SequenceEqualOperator=s;var o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparator=r,i._a=[],i._b=[],i._oneComplete=!1,i.destination.add(n.subscribe(new l(e,i))),i}return r(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var r=t.shift(),i=e.shift(),s=!1;try{s=n?n(r,i):r===i}catch(o){this.destination.error(o)}s||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e}(i.Subscriber);e.SequenceEqualSubscriber=o;var l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return r(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(i.Subscriber)},fupu:function(t,e,n){var r=n("pzWd");t.exports=function(t){if(r(t))return!isNaN(t);throw new TypeError(toString.call(t)+" is not an instance of Date")}},fwnu:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("dvZr"),n("8Y7J"),n("VRyK"),n("LRne"),n("vkgz"),n("pLZG"),n("5VGP");class r{}},"g/AU":function(t,e,n){var r=n("rxuJ");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("2fFW"),i=n("NJ4a");const s={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},gTqA:function(t,e,n){"use strict";var r=n("Q1FS"),i=n("90cg"),s=n("yRPT"),o=n("HZF8"),l=n("0alx"),a=n("zzsZ"),u=n("m12A"),c=n("e2pG"),h=n("eipH"),d=n("6qA3");e.from=function(t,e){if(!e)return t instanceof r.Observable?t:new r.Observable(d.subscribeTo(t));if(null!=t){if(o.isInteropObservable(t))return h.fromObservable(t,e);if(i.isPromise(t))return u.fromPromise(t,e);if(s.isArrayLike(t))return a.fromArray(t,e);if(l.isIterable(t)||"string"==typeof t)return c.fromIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},gUhM:function(t,e){t.exports=function(){var t=new Date,e=t.getFullYear(),n=t.getMonth(),r=t.getDate(),i=new Date(0);return i.setFullYear(e,n,r+1),i.setHours(0,0,0,0),i}},gaRz:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("dvZr"),n("IheW"),n("8Y7J"),n("LRne"),n("HDdC"),n("quSY"),n("eIep"),n("pLZG"),n("5VGP"),n("mrSG");class r{}},gcVP:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("XFzh"),s=n("SVse"),o=(n("s7LF"),n("/HVE")),l=n("66zS"),a=n("5VGP"),u=r.rb({encapsulation:2,styles:[],data:{animation:[{type:7,name:"fadeMotion",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"0.2s"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"0.2s"}],options:null}],options:{}}]}});function c(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["nzType","close"],["tabindex","-1"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.closeTag(n)&&r),r},null,null)),r.sb(1,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,"close")},null)}function h(t){return r.Pb(2,[r.Eb(null,0),(t()(),r.ib(16777216,null,null,1,null,c)),r.sb(2,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,"closeable"===e.component.nzMode)},null)}var d=n("Irb3"),p=n("GaVp"),f=n("POq0"),g=n("omvX"),m=n("RDh8"),b=n("iInd"),y=n("DQLy"),v=n("1w6q"),_=n("ssPz"),w=n("JXeA"),x=n("XPT/");n.d(e,"a",function(){return T});var C=r.rb({encapsulation:0,styles:[[".sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]{padding:47px 30px 40px 39px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{float:left;position:relative;display:inline;width:200px;height:200px;margin-right:-220px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;width:208px;height:208px;top:-4px;left:-4px;overflow:hidden;background:url(coverall.6cb90dbc94e586bfc5a5.png) 0 -1285px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]{float:right;width:100%}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]{margin-left:230px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]{position:relative;margin:0 0 12px;line-height:24px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .f-pr[_ngcontent-%COMP%]{position:relative;zoom:1;float:left;display:inline-block;width:54px;height:24px;background:url(icon.29cd8439e24c97d0d553.png) 0 -243px no-repeat;cursor:pointer;overflow:hidden}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]{margin-left:64px;position:relative}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]   .f-ff2[_ngcontent-%COMP%]{line-height:24px;font-size:20px;font-weight:400}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{margin:0 0 20px;line-height:35px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .face[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left;width:35px;height:35px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{float:left;margin-left:10px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .s-fc7[_ngcontent-%COMP%]{color:#1890ff}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-left:15px;color:#989898}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{margin-bottom:25px;margin-right:-10px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:10px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{margin:25px 0 5px;line-height:22px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]   .tag-wrap[_ngcontent-%COMP%]{float:left;margin-left:15px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .intr[_ngcontent-%COMP%]{margin-top:10px;line-height:18px;color:#666}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .intr.f-hide[_ngcontent-%COMP%]{display:none}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]{text-align:right}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .m-info[_ngcontent-%COMP%]   .cnt[_ngcontent-%COMP%]   .cntc[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1890ff;cursor:pointer}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .u-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{float:left}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .u-title[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{float:left;margin:9px 0 0 20px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .u-title[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{float:right;margin-top:5px}.sheet-info[_ngcontent-%COMP%]   .g-wrap6[_ngcontent-%COMP%]   .u-title[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#c10d0c}html[_ngcontent-%COMP%]{font-size:10px}body[_ngcontent-%COMP%]{font-size:1.4rem;font-family:Arial,Helvetica,sans-serif;margin:1rem;background-color:#ddd}footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%]{display:block;color:#fff;font-size:1.4rem;padding:2rem;background-color:#000}h1[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem;margin:0}h2[_ngcontent-%COMP%]{color:#000;font-size:2rem;margin-top:0}div.wrapper-app[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{max-width:80rem;margin:0 auto}div.wrapper-app[_ngcontent-%COMP%]{border:.1rem solid #000;background-color:#fff}div.wrapper-content[_ngcontent-%COMP%]{min-height:40rem;overflow:visible;padding:2rem}div.connect-caller-buttons[_ngcontent-%COMP%]{margin-bottom:1rem}div.connect-caller-buttons[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], div.connect-caller-buttons[_ngcontent-%COMP%] > h3[_ngcontent-%COMP%]{display:inline-block}div.video-frames[_ngcontent-%COMP%]{text-align:center}div.video-caller[_ngcontent-%COMP%], div.video-self[_ngcontent-%COMP%]{width:32rem;height:24rem;display:inline-block;overflow:hidden;border:.1rem solid #000;background-color:#ddd;margin:0 1.4rem}div.video-caller[_ngcontent-%COMP%]{position:relative}video[_ngcontent-%COMP%]{width:32rem;height:24rem;-o-object-fit:cover;object-fit:cover}"]],data:{}});function S(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"nz-tag",[],[[40,"@fadeMotion",0],[4,"background-color",null]],[["component","@fadeMotion.done"],[null,"click"]],function(t,e,n){var i=!0;return"component:@fadeMotion.done"===e&&(i=!1!==r.Fb(t,2).afterAnimation(n)&&i),"click"===e&&(i=!1!==r.Fb(t,2).updateCheckedStatus()&&i),i},h,u)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(2,638976,null,0,i.a,[r.D,r.k,a.y],null,null),(t()(),r.Nb(3,0,["",""]))],function(t,e){t(e,2,0)},function(t,e){t(e,0,0,void 0,r.Fb(e,2).presetColor?null:r.Fb(e,2).nzColor),t(e,3,0,e.context.$implicit)})}function O(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","expand"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleDesc()&&r),r},null,null)),(t()(),r.tb(1,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(2,null,["",""])),(t()(),r.tb(3,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"]],null,null,null,null,null)),r.sb(4,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null)],function(t,e){t(e,4,0,e.component.controlDesc.iconCls,"outline")},function(t,e){t(e,2,0,e.component.controlDesc.label)})}function k(t){return r.Pb(0,[r.Hb(0,s.e,[r.t]),(t()(),r.tb(1,0,null,null,0,"link",[["href","/assets/css/demo_room.css"],["rel","stylesheet"],["type","text/css"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,89,"div",[["class","sheet-info wrap feature-wrap"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,88,"div",[["class","g-wrap6"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,68,"div",[["class","m-info clearfix"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,2,"div",[["class","cover"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(7,0,null,null,0,"div",[["class","mask"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,64,"div",[["class","cnt"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,63,"div",[["class","cntc"]],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,4,"div",[["class","hd clearfix"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,0,"i",[["class","f-pr"]],null,null,null,null,null)),(t()(),r.tb(12,0,null,null,2,"div",[["class","tit"]],null,null,null,null,null)),(t()(),r.tb(13,0,null,null,1,"h2",[["class","f-ff2 f-brk"]],null,null,null,null,null)),(t()(),r.Nb(14,null,["",""])),(t()(),r.tb(15,0,null,null,8,"div",[["class","user f-cb"]],null,null,null,null,null)),(t()(),r.tb(16,0,null,null,1,"a",[["class","face"]],[[8,"hidden",0],[8,"href",4]],null,null,null,null)),(t()(),r.tb(17,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(18,0,null,null,2,"span",[["class","name"]],null,null,null,null,null)),(t()(),r.tb(19,0,null,null,1,"a",[["class","s-fc7"]],[[8,"href",4]],null,null,null,null)),(t()(),r.Nb(20,null,["",""])),(t()(),r.tb(21,0,null,null,2,"span",[["class","time s-fc4"]],null,null,null,null,null)),(t()(),r.Nb(22,null,[""," \u521b\u5efa"])),r.Jb(23,2),(t()(),r.tb(24,0,null,null,36,"div",[["class","btns"]],null,null,null,null,null)),(t()(),r.tb(25,0,null,null,14,"nz-button-group",[["class","btn"]],null,null,null,d.d,d.b)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(27,114688,null,0,p.b,[a.y,r.k],null,null),(t()(),r.tb(28,0,null,0,6,"button",[["class","play"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onAddSongs(i.sheetInfo.tracks,!0)&&r),r},d.c,d.a)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(30,1818624,null,1,p.a,[r.k,r.h,r.D,f.b,a.y,r.y,[2,a.i],[2,g.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,1,{listOfIconElement:1}),(t()(),r.tb(32,0,[[1,0]],0,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","play-circle"]],null,null,null,null,null)),r.sb(33,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,0,["\u64ad\u653e "])),(t()(),r.tb(35,0,null,0,4,"button",[["class","add"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onAddSongs(i.sheetInfo.tracks)&&r),r},d.c,d.a)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(37,1818624,null,1,p.a,[r.k,r.h,r.D,f.b,a.y,r.y,[2,a.i],[2,g.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,2,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["+"])),(t()(),r.tb(40,0,null,null,6,"button",[["class","btn like"],["nz-button",""]],[[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onLikeSheet(i.sheetInfo.id.toString())&&r),r},d.c,d.a)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(42,1818624,null,1,p.a,[r.k,r.h,r.D,f.b,a.y,r.y,[2,a.i],[2,g.a]],null,null),r.Lb(603979776,3,{listOfIconElement:1}),(t()(),r.tb(44,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6536\u85cf"])),(t()(),r.Nb(46,0,["(",") "])),(t()(),r.tb(47,0,null,null,6,"button",[["class","btn share"],["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.shareResource(i.sheetInfo,"playlist")&&r),r},d.c,d.a)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(49,1818624,null,1,p.a,[r.k,r.h,r.D,f.b,a.y,r.y,[2,a.i],[2,g.a]],null,null),r.Lb(603979776,4,{listOfIconElement:1}),(t()(),r.tb(51,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u5206\u4eab"])),(t()(),r.Nb(53,0,["(",") "])),(t()(),r.tb(54,0,null,null,6,"button",[["class","play"],["nz-button",""],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onLiveShow(i.sheetInfo.userId)&&r),r},d.c,d.a)),r.Kb(512,null,a.y,a.y,[r.E]),r.sb(56,1818624,null,1,p.a,[r.k,r.h,r.D,f.b,a.y,r.y,[2,a.i],[2,g.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,5,{listOfIconElement:1}),(t()(),r.tb(58,0,[[5,0]],0,1,"i",[["nz-icon",""],["nzTheme","outline"]],null,null,null,null,null)),r.sb(59,2834432,null,0,l.a,[l.c,r.k,r.D,o.a],{nzTheme:[0,"nzTheme"]},null),(t()(),r.Nb(-1,0,["join "])),(t()(),r.tb(61,0,null,null,5,"div",[["class","tags clearfix"]],null,null,null,null,null)),(t()(),r.tb(62,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6807\u7b7e"])),(t()(),r.tb(64,0,null,null,2,"div",[["class","tag-wrap"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,S)),r.sb(66,278528,null,0,s.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(67,0,null,null,1,"div",[["class","intr f-brk"]],[[2,"f-hide",null]],null,null,null,null)),(t()(),r.tb(68,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),r.tb(69,0,null,null,1,"div",[["class","intr f-brk"]],[[2,"f-hide",null]],null,null,null,null)),(t()(),r.tb(70,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,O)),r.sb(72,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(73,0,null,null,18,"div",[["id","fullpage"]],null,null,null,null,null)),(t()(),r.tb(74,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon easyrtcMirror"],["id","box0"],["muted","muted"],["playsinline","playsinline"],["style","visibility:hidden"],["volume","0"]],null,null,null,null,null)),(t()(),r.tb(75,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon"],["id","box1"],["playsinline","playsinline"],["style","visibility:hidden"]],null,null,null,null,null)),(t()(),r.tb(76,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon"],["id","box2"],["playsinline","playsinline"],["style","visibility:hidden"]],null,null,null,null,null)),(t()(),r.tb(77,0,null,null,0,"video",[["autoplay","autoplay"],["class","transit boxCommon thumbCommon"],["id","box3"],["playsinline","playsinline"],["style","visibility:hidden"]],null,null,null,null,null)),(t()(),r.tb(78,0,null,null,0,"canvas",[["id","canvas0"]],null,null,null,null,null)),(t()(),r.tb(79,0,null,null,0,"canvas",[["id","canvas1"]],null,null,null,null,null)),(t()(),r.tb(80,0,null,null,0,"canvas",[["id","canvas2"]],null,null,null,null,null)),(t()(),r.tb(81,0,null,null,0,"canvas",[["id","canvas3"]],null,null,null,null,null)),(t()(),r.tb(82,0,null,null,6,"div",[["id","textentryBox"],["onsubmit","sendText()"],["style","display:none"]],null,null,null,null,null)),(t()(),r.tb(83,0,null,null,0,"input",[["class","transit boxcommon"],["id","textentryField"],["type","text"]],null,null,null,null,null)),(t()(),r.tb(84,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.tb(85,0,null,null,1,"button",[["id","textentrySubmit"],["onclick","sendText()"],["style","float:right;margin-right:1em"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["Send"])),(t()(),r.tb(87,0,null,null,1,"button",[["id","textentryCancel"],["onclick","cancelText()"],["style","float:left;margin-left:1em"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["Cancel"])),(t()(),r.tb(89,0,null,null,0,"img",[["alt","close button"],["class","transit boxCommon"],["id","killButton"],["onclick","killActiveBox()"],["src","/assets/images/button_close.png"],["style","display:none;z-index:3"]],null,null,null,null,null)),(t()(),r.tb(90,0,null,null,0,"img",[["alt","mute button"],["class","transit boxCommon"],["id","muteButton"],["onclick","muteActiveBox()"],["src","/assets/images/button_mute.png"],["style","display:none;z-index:3"]],null,null,null,null,null)),(t()(),r.tb(91,0,null,null,0,"img",[["alt","text button"],["class","transit boxCommon"],["id","textEntryButton"],["onclick","showTextEntry()"],["src","/assets/images/textEntry.png"],["style","z-index:3;display:none"]],null,null,null,null,null))],function(t,e){var n=e.component;t(e,27,0),t(e,30,0,"primary"),t(e,33,0,"play-circle","outline"),t(e,37,0,"primary"),t(e,42,0),t(e,49,0),t(e,56,0,"primary"),t(e,59,0,"outline"),t(e,66,0,n.sheetInfo.tags),t(e,72,0,n.description.long)},function(t,e){var n=e.component;t(e,6,0,n.sheetInfo.coverImgUrl,n.sheetInfo.name),t(e,14,0,n.sheetInfo.name),t(e,16,0,!n.sheetInfo.creator,"//music.163.com/artist?id="+n.sheetInfo.userId),t(e,17,0,null==n.sheetInfo.creator?null:n.sheetInfo.creator.avatarUrl,null==n.sheetInfo.creator?null:n.sheetInfo.creator.nickname),t(e,19,0,"//music.163.com/artist?id="+n.sheetInfo.userId),t(e,20,0,null==n.sheetInfo.creator?null:n.sheetInfo.creator.nickname);var i=r.Ob(e,22,0,t(e,23,0,r.Fb(e,0),n.sheetInfo.createTime,"yyyy-MM-dd"));t(e,22,0,i),t(e,28,0,r.Fb(e,30).nzWave),t(e,35,0,r.Fb(e,37).nzWave),t(e,40,0,n.sheetInfo.subscribed,r.Fb(e,42).nzWave),t(e,46,0,n.sheetInfo.subscribedCount),t(e,47,0,r.Fb(e,49).nzWave),t(e,53,0,n.sheetInfo.shareCount),t(e,54,0,r.Fb(e,56).nzWave),t(e,67,0,n.controlDesc.isExpand),t(e,68,0,n.description.short),t(e,69,0,!n.controlDesc.isExpand),t(e,70,0,n.description.long)})}function E(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-sheet-info",[],null,null,null,k,C)),r.sb(1,245760,null,0,m.a,[b.a,y.m,v.a,_.a,w.g,x.a],null,null)],function(t,e){t(e,1,0)},null)}var T=r.pb("app-sheet-info",m.a,E,{},{},[])},gcYM:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("D0XW");n("l7GE"),n("ZUHj");const s={leading:!0,trailing:!1};function o(t,e=i.a,n=s){return r=>r.lift(new l(t,e,n.leading,n.trailing))}n.d(e,"a",function(){return o});class l{constructor(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}call(t,e){return e.subscribe(new a(t,this.duration,this.scheduler,this.leading,this.trailing))}}class a extends r.a{constructor(t,e,n,r,i){super(t),this.duration=e,this.scheduler=n,this.leading=r,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(u,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function u(t){const{subscriber:e}=t;e.clearThrottle()}},gfz1:function(t,e,n){var r=n("yNUO"),i=n("tMf1"),s=n("RJeW");t.exports=function(t){var e=r(t),n=i(e).getTime()-s(e).getTime();return Math.round(n/6048e5)+1}},gtzP:function(t,e,n){var r=n("tMf1");t.exports=function(t,e){var n=r(t),i=r(e),s=n.getTime()-6e4*n.getTimezoneOffset(),o=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((s-o)/6048e5)}},gwEV:function(t,e,n){var r=n("F809");t.exports=function(t,e){var n=r(t,e)/3;return n>0?Math.floor(n):Math.ceil(n)}},gzDA:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("cSoz");e.sample=function(t){return function(e){return e.lift(new o(t))}};var o=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new l(t),r=e.subscribe(n);return r.add(s.subscribeToResult(n,this.notifier)),r},t}(),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return r(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(i.OuterSubscriber)},hLnY:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t).getDay();return 0===e&&(e=7),e}},hLrw:function(t,e,n){"use strict";n.d(e,"f",function(){return s}),n.d(e,"d",function(){return o}),n.d(e,"g",function(){return l}),n.d(e,"e",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return h});var r=n("DQLy");const i=t=>t,s=Object(r.t)("player"),o=(Object(r.w)(i,t=>t.playing),Object(r.w)(i,t=>t.playList)),l=Object(r.w)(i,t=>t.songList),a=Object(r.w)(i,t=>t.playMode),u=Object(r.w)(i,t=>t.currentIndex),c=Object(r.w)(i,t=>t.currentAction),h=Object(r.w)(i,({playList:t,currentIndex:e})=>t[e])},hOhj:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("KCVW"),s=n("XNiG"),o=n("LRne"),l=n("HDdC"),a=n("xgIS"),u=n("eNwd");let c=1;const h={},d={setImmediate(t){const e=c++;return h[e]=t,Promise.resolve().then(()=>(function(t){const e=h[t];e&&e()})(e)),e},clearImmediate(t){delete h[t]}};var p=n("3N8a");class f extends p.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=d.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(d.clearImmediate(e),t.scheduled=void 0)}}var g=n("IjjT");class m extends g.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const b=new m(f);var y=n("VRyK"),v=n("/uUt"),_=n("3UWI"),w=n("pLZG"),x=n("1G5W"),C=n("JX91"),S=n("7o/Q");class O{call(t,e){return e.subscribe(new k(t))}}class k extends S.a{constructor(t){super(t),this.hasPrev=!1}_next(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t}}var E=n("eIep"),T=n("jtHE"),z=n("/HVE");class P{}class I extends P{constructor(t){super(),this._data=t}connect(){return this._data instanceof l.a?this._data:Object(o.a)(this._data)}disconnect(){}}n.d(e,"k",function(){return A}),n.d(e,"a",function(){return N}),n.d(e,"f",function(){return F}),n.d(e,"b",function(){return $}),n.d(e,"g",function(){return W}),n.d(e,"e",function(){return U}),n.d(e,"j",function(){return G}),n.d(e,"h",function(){return q}),n.d(e,"c",function(){return V}),n.d(e,"i",function(){return M}),n.d(e,"d",function(){return j});const M=new r.p("VIRTUAL_SCROLL_STRATEGY");class D{constructor(t,e,n){this._scrolledIndexChange=new s.a,this.scrolledIndexChange=this._scrolledIndexChange.pipe(Object(v.a)()),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,n){if(n<e)throw Error("CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx");this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.measureScrollOffset(),e=t/this._itemSize,n=this._viewport.getRenderedRange(),r={start:n.start,end:n.end},i=this._viewport.getViewportSize(),s=this._viewport.getDataLength(),o=t-r.start*this._itemSize;if(o<this._minBufferPx&&0!=r.start){const t=Math.ceil((this._maxBufferPx-o)/this._itemSize);r.start=Math.max(0,r.start-t),r.end=Math.min(s,Math.ceil(e+(i+this._minBufferPx)/this._itemSize))}else{const n=r.end*this._itemSize-(t+i);if(n<this._minBufferPx&&r.end!=s){const t=Math.ceil((this._maxBufferPx-n)/this._itemSize);t>0&&(r.end=Math.min(s,r.end+t),r.start=Math.max(0,Math.floor(e-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(r),this._viewport.setRenderedContentOffset(this._itemSize*r.start),this._scrolledIndexChange.next(Math.floor(e))}}function A(t){return t._scrollStrategy}class N{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new D(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=Object(i.f)(t)}get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=Object(i.f)(t)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=Object(i.f)(t)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}const R=20;let F=(()=>{class t{constructor(t,e){this._ngZone=t,this._platform=e,this._scrolled=new s.a,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=R){return this._platform.isBrowser?new l.a(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Object(_.a)(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Object(o.a)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(Object(w.a)(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_scrollableContainsElement(t,e){let n=e.nativeElement,r=t.getElementRef().nativeElement;do{if(n==r)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Object(a.a)(window.document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(r.y),Object(r.Ub)(z.a))},token:t,providedIn:"root"}),t})();class ${constructor(t,e,n,r){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=r,this._destroyed=new s.a,this._elementScrolled=new l.a(t=>this.ngZone.runOutsideAngular(()=>Object(a.a)(this.elementRef.nativeElement,"scroll").pipe(Object(x.a)(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;t.left=null==t.left?n?t.end:t.start:t.left,t.right=null==t.right?n?t.start:t.end:t.right,null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&Object(z.d)()!=z.c.NORMAL?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),Object(z.d)()==z.c.INVERTED?t.left=t.right:Object(z.d)()==z.c.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;Object(z.f)()?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e=this.elementRef.nativeElement;if("top"==t)return e.scrollTop;if("bottom"==t)return e.scrollHeight-e.clientHeight-e.scrollTop;const n=this.dir&&"rtl"==this.dir.value;return"start"==t?t=n?"right":"left":"end"==t&&(t=n?"left":"right"),n&&Object(z.d)()==z.c.INVERTED?"left"==t?e.scrollWidth-e.clientWidth-e.scrollLeft:e.scrollLeft:n&&Object(z.d)()==z.c.NEGATED?"left"==t?e.scrollLeft+e.scrollWidth-e.clientWidth:-e.scrollLeft:"left"==t?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft}}const L="undefined"!=typeof requestAnimationFrame?u.a:b;class j extends ${constructor(t,e,n,r,i,o){if(super(t,o,n,i),this.elementRef=t,this._changeDetectorRef=e,this._scrollStrategy=r,this._detachedSubject=new s.a,this._renderedRangeSubject=new s.a,this._orientation="vertical",this.scrolledIndexChange=new l.a(t=>this._scrollStrategy.scrolledIndexChange.subscribe(e=>Promise.resolve().then(()=>this.ngZone.run(()=>t.next(e))))),this.renderedRangeStream=this._renderedRangeSubject.asObservable(),this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],!r)throw Error('Error: cdk-virtual-scroll-viewport requires the "itemSize" property to be set.')}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(Object(C.a)(null),Object(_.a)(0,L)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),super.ngOnDestroy()}attach(t){if(this._forOf)throw Error("CdkVirtualScrollViewport is already attached.");this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(Object(x.a)(this._detachedSubject)).subscribe(t=>{const e=t.length;e!==this._dataLength&&(this._dataLength=e,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){var e,n;((e=this._renderedRange).start!=(n=t).start||e.end!=n.end)&&(this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,e="to-start"){const n="horizontal"==this.orientation,r=n?"X":"Y";let i=`translate${r}(${Number((n&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===e&&(i+=` translate${r}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=i&&(this._renderedContentTransform=i,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,e="auto"){const n={behavior:e};"horizontal"===this.orientation?n.start=t:n.top=t,this.scrollTo(n)}scrollToIndex(t,e="auto"){this._scrollStrategy.scrollToIndex(t,e)}measureScrollOffset(t){return super.measureScrollOffset(t||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const t=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?t.clientWidth:t.clientHeight}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this.ngZone.run(()=>this._changeDetectorRef.markForCheck()),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform;const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const e of t)e()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}function B(t,e){if(!e.getBoundingClientRect)return 0;const n=e.getBoundingClientRect();return"horizontal"==t?n.width:n.height}class V{constructor(t,e,n,r,i){this._viewContainerRef=t,this._template=e,this._differs=n,this._viewport=r,this.viewChange=new s.a,this._dataSourceChanges=new s.a,this.cdkVirtualForTemplateCacheSize=20,this.dataStream=this._dataSourceChanges.pipe(Object(C.a)(null),t=>t.lift(new O),Object(E.a)(([t,e])=>this._changeDataSource(t,e)),function(t,e,n){let r;return r={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,l=!1,a=!1;return function(u){o++,i&&!l||(l=!1,i=new T.a(t,e,r),s=u.subscribe({next(t){i.next(t)},error(t){l=!0,i.error(t)},complete(){a=!0,i.complete()}}));const c=i.subscribe(this);this.add(()=>{o--,c.unsubscribe(),s&&!a&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}()),this._differ=null,this._templateCache=[],this._needsUpdate=!1,this._destroyed=new s.a,this.dataStream.subscribe(t=>{this._data=t,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(Object(x.a)(this._destroyed)).subscribe(t=>{this._renderedRange=t,i.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t;const e=function(t){return t&&"function"==typeof t.connect}(t)?t:new I(t instanceof l.a?t:Array.prototype.slice.call(t||[]));this._dataSourceChanges.next(e)}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(e,n)=>t(e+(this._renderedRange?this._renderedRange.start:0),n):void 0}set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}measureRangeSize(t,e){if(t.start>=t.end)return 0;if(t.start<this._renderedRange.start||t.end>this._renderedRange.end)throw Error("Error: attempted to measure an item that isn't rendered.");const n=t.start-this._renderedRange.start;let r=0,i=t.end-t.start;for(;i--;){const t=this._viewContainerRef.get(i+n);let s=t?t.rootNodes.length:0;for(;s--;)r+=B(e,t.rootNodes[s])}return r}ngDoCheck(){if(this._differ&&this._needsUpdate){const t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete();for(let t of this._templateCache)t.destroy()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create(this.cdkVirtualForTrackBy)),this._needsUpdate=!0)}_changeDataSource(t,e){return t&&t.disconnect(this),this._needsUpdate=!0,e?e.connect(this):Object(o.a)()}_updateContext(){const t=this._data.length;let e=this._viewContainerRef.length;for(;e--;){let n=this._viewContainerRef.get(e);n.context.index=this._renderedRange.start+e,n.context.count=t,this._updateComputedContextProperties(n.context),n.detectChanges()}}_applyChanges(t){t.forEachOperation((t,e,n)=>{if(null==t.previousIndex)this._insertViewForNewItem(n).context.$implicit=t.item;else if(null==n)this._cacheView(this._detachView(e));else{const r=this._viewContainerRef.get(e);this._viewContainerRef.move(r,n),r.context.$implicit=t.item}}),t.forEachIdentityChange(t=>{this._viewContainerRef.get(t.currentIndex).context.$implicit=t.item});const e=this._data.length;let n=this._viewContainerRef.length;for(;n--;){const t=this._viewContainerRef.get(n);t.context.index=this._renderedRange.start+n,t.context.count=e,this._updateComputedContextProperties(t.context)}}_cacheView(t){if(this._templateCache.length<this.cdkVirtualForTemplateCacheSize)this._templateCache.push(t);else{const e=this._viewContainerRef.indexOf(t);-1===e?t.destroy():this._viewContainerRef.remove(e)}}_insertViewForNewItem(t){return this._insertViewFromCache(t)||this._createEmbeddedViewAt(t)}_updateComputedContextProperties(t){t.first=0===t.index,t.last=t.index===t.count-1,t.even=t.index%2==0,t.odd=!t.even}_createEmbeddedViewAt(t){return this._viewContainerRef.createEmbeddedView(this._template,{$implicit:null,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},t)}_insertViewFromCache(t){const e=this._templateCache.pop();return e&&this._viewContainerRef.insert(e,t),e||null}_detachView(t){return this._viewContainerRef.detach(t)}}class W{}class U{}const H=20;let G=(()=>{class t{constructor(t,e){this._platform=t,e.runOutsideAngular(()=>{this._change=t.isBrowser?Object(y.a)(Object(a.a)(window,"resize"),Object(a.a)(window,"orientationchange")):Object(o.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=document.documentElement,e=t.getBoundingClientRect();return{top:-e.top||document.body.scrollTop||window.scrollY||t.scrollTop||0,left:-e.left||document.body.scrollLeft||window.scrollX||t.scrollLeft||0}}change(t=H){return t>0?this._change.pipe(Object(_.a)(t)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return t.ngInjectableDef=Object(r.Tb)({factory:function(){return new t(Object(r.Ub)(z.a),Object(r.Ub)(r.y))},token:t,providedIn:"root"}),t})();const q={provide:G,deps:[[new r.z,new r.I,G],z.a,r.y],useFactory:function(t,e,n){return t||new G(e,n)}}},haRT:function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"b",function(){return _}),n.d(e,"c",function(){return m}),n.d(e,"d",function(){return b}),n.d(e,"e",function(){return f}),n.d(e,"f",function(){return y}),n.d(e,"g",function(){return v});var r=n("mrSG"),i=n("8Y7J"),s=n("XNiG"),o=n("VRyK"),l=n("xgIS"),a=n("EY2u"),u=n("1G5W"),c=n("JX91"),h=n("5+tZ"),d=n("eIep"),p=n("5VGP");let f=(()=>{class t{constructor(t,e){this.cdr=t,this.i18n=e,this.hasFilterValue=!1,this.filterVisible=!1,this.multipleFilterList=[],this.singleFilterList=[],this.locale={},this.nzWidthChange$=new s.a,this.destroy$=new s.a,this.hasDefaultFilter=!1,this.nzSelections=[],this.nzChecked=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzFilterMultiple=!0,this.nzSort=null,this.nzFilters=[],this.nzExpand=!1,this.nzShowCheckbox=!1,this.nzCustomFilter=!1,this.nzShowSort=!1,this.nzShowFilter=!1,this.nzShowRowSelection=!1,this.nzCheckedChange=new i.m,this.nzSortChange=new i.m,this.nzSortChangeWithKey=new i.m,this.nzFilterChange=new i.m}updateSortValue(){this.nzShowSort&&this.setSortValue("ascend"===this.nzSort?"descend":"descend"===this.nzSort?null:"ascend")}setSortValue(t){this.nzSort=t,this.nzSortChangeWithKey.emit({key:this.nzSortKey,value:this.nzSort}),this.nzSortChange.emit(this.nzSort)}get filterList(){return this.multipleFilterList.filter(t=>t.checked).map(t=>t.value)}get filterValue(){const t=this.singleFilterList.find(t=>t.checked);return t?t.value:null}updateFilterStatus(){this.hasFilterValue=this.nzFilterMultiple?this.filterList.length>0:Object(p.T)(this.filterValue)}search(){this.updateFilterStatus(),this.nzFilterChange.emit(this.nzFilterMultiple?this.filterList:this.filterValue)}reset(){this.initMultipleFilterList(!0),this.initSingleFilterList(!0),this.hasFilterValue=!1}checkMultiple(t){t.checked=!t.checked}checkSingle(t){this.singleFilterList.forEach(e=>e.checked=e===t)}hideDropDown(){this.nzDropdownMenuComponent.setVisibleStateWhen(!1),this.filterVisible=!1}dropDownVisibleChange(t){this.filterVisible=t,t||this.search()}initMultipleFilterList(t){this.multipleFilterList=this.nzFilters.map(e=>{const n=!t&&!!e.byDefault;return n&&(this.hasDefaultFilter=!0),{text:e.text,value:e.value,checked:n}}),this.checkDefaultFilters()}initSingleFilterList(t){this.singleFilterList=this.nzFilters.map(e=>{const n=!t&&!!e.byDefault;return n&&(this.hasDefaultFilter=!0),{text:e.text,value:e.value,checked:n}}),this.checkDefaultFilters()}checkDefaultFilters(){this.nzFilters&&0!==this.nzFilters.length&&this.hasDefaultFilter&&this.updateFilterStatus()}marForCheck(){this.cdr.markForCheck()}ngOnInit(){this.i18n.localeChange.pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Table"),this.cdr.markForCheck()})}ngOnChanges(t){t.nzFilters&&(this.initMultipleFilterList(),this.initSingleFilterList(),this.updateFilterStatus()),t.nzWidth&&this.nzWidthChange$.next(this.nzWidth)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzExpand",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowCheckbox",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzCustomFilter",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowSort",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowFilter",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowRowSelection",void 0),t})(),g=(()=>{class t{constructor(t,e,n,r,o,l){this.renderer=t,this.ngZone=e,this.cdr=n,this.i18n=r,this.platform=o,this.data=[],this.locale={},this.lastScrollLeft=0,this.headerBottomStyle={},this.destroy$=new s.a,this.nzSize="default",this.nzPageSizeOptions=[10,20,30,40,50],this.nzVirtualScroll=!1,this.nzVirtualItemSize=0,this.nzVirtualMaxBufferPx=200,this.nzVirtualMinBufferPx=100,this.nzLoadingDelay=0,this.nzTotal=0,this.nzWidthConfig=[],this.nzPageIndex=1,this.nzPageSize=10,this.nzData=[],this.nzPaginationPosition="bottom",this.nzScroll={x:null,y:null},this.nzFrontPagination=!0,this.nzTemplateMode=!1,this.nzBordered=!1,this.nzShowPagination=!0,this.nzLoading=!1,this.nzShowSizeChanger=!1,this.nzHideOnSinglePage=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzPageSizeChange=new i.m,this.nzPageIndexChange=new i.m,this.nzCurrentPageDataChange=new i.m,t.addClass(l.nativeElement,"ant-table-wrapper")}get tableBodyNativeElement(){return this.tableBodyElement&&this.tableBodyElement.nativeElement}get tableHeaderNativeElement(){return this.tableHeaderElement&&this.tableHeaderElement.nativeElement}get cdkVirtualScrollNativeElement(){return this.cdkVirtualScrollElement&&this.cdkVirtualScrollElement.nativeElement}get mixTableBodyNativeElement(){return this.tableBodyNativeElement||this.cdkVirtualScrollNativeElement}emitPageSizeOrIndex(t,e){this.nzPageSize===t&&this.nzPageIndex===e||(this.nzPageSize!==t&&(this.nzPageSize=t,this.nzPageSizeChange.emit(this.nzPageSize)),this.nzPageIndex!==e&&(this.nzPageIndex=e,this.nzPageIndexChange.emit(this.nzPageIndex)),this.updateFrontPaginationDataIfNeeded(this.nzPageSize!==t))}syncScrollTable(t){if(t.currentTarget===t.target){const e=t.target;e.scrollLeft!==this.lastScrollLeft&&this.nzScroll&&this.nzScroll.x&&(e===this.mixTableBodyNativeElement&&this.tableHeaderNativeElement?this.tableHeaderNativeElement.scrollLeft=e.scrollLeft:e===this.tableHeaderNativeElement&&this.mixTableBodyNativeElement&&(this.mixTableBodyNativeElement.scrollLeft=e.scrollLeft),this.setScrollPositionClassName()),this.lastScrollLeft=e.scrollLeft}}setScrollPositionClassName(){this.mixTableBodyNativeElement&&this.nzScroll&&this.nzScroll.x&&(this.mixTableBodyNativeElement.scrollWidth===this.mixTableBodyNativeElement.clientWidth&&0!==this.mixTableBodyNativeElement.scrollWidth?this.setScrollName():this.setScrollName(0===this.mixTableBodyNativeElement.scrollLeft?"left":this.mixTableBodyNativeElement.scrollWidth===this.mixTableBodyNativeElement.scrollLeft+this.mixTableBodyNativeElement.clientWidth?"right":"middle"))}setScrollName(t){const e="ant-table-scroll-position";["left","right","middle"].forEach(t=>{this.renderer.removeClass(this.tableMainElement.nativeElement,`${e}-${t}`)}),t&&this.renderer.addClass(this.tableMainElement.nativeElement,`${e}-${t}`)}fitScrollBar(){if(this.nzScroll.y){const t=Object(p.Z)("vertical"),e=Object(p.Z)("horizontal","ant-table");e>0&&(this.headerBottomStyle={marginBottom:`-${e}px`,paddingBottom:"0px",overflowX:"scroll",overflowY:`${0===t?"hidden":"scroll"}`},this.cdr.markForCheck())}}updateFrontPaginationDataIfNeeded(t=!1){let e=this.nzData||[];if(this.nzFrontPagination){if(this.nzTotal=e.length,t){const t=Math.ceil(e.length/this.nzPageSize)||1,n=this.nzPageIndex>t?t:this.nzPageIndex;n!==this.nzPageIndex&&(this.nzPageIndex=n,Promise.resolve().then(()=>this.nzPageIndexChange.emit(n)))}e=e.slice((this.nzPageIndex-1)*this.nzPageSize,this.nzPageIndex*this.nzPageSize)}this.data=[...e],this.nzCurrentPageDataChange.next(this.data)}ngOnInit(){this.i18n.localeChange.pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Table"),this.cdr.markForCheck()})}ngOnChanges(t){t.nzScroll&&(this.nzScroll=t.nzScroll.currentValue?t.nzScroll.currentValue:{x:null,y:null},this.fitScrollBar(),this.setScrollPositionClassName()),(t.nzPageIndex||t.nzPageSize||t.nzFrontPagination||t.nzData)&&this.updateFrontPaginationDataIfNeeded(!(!t.nzPageSize&&!t.nzData))}ngAfterViewInit(){this.platform.isBrowser&&(setTimeout(()=>this.setScrollPositionClassName()),this.ngZone.runOutsideAngular(()=>{Object(o.a)(this.tableHeaderNativeElement?Object(l.a)(this.tableHeaderNativeElement,"scroll"):a.a,this.mixTableBodyNativeElement?Object(l.a)(this.mixTableBodyNativeElement,"scroll"):a.a).pipe(Object(u.a)(this.destroy$)).subscribe(t=>{this.syncScrollTable(t)}),Object(l.a)(window,"resize").pipe(Object(c.a)(!0),Object(u.a)(this.destroy$)).subscribe(()=>{this.fitScrollBar(),this.setScrollPositionClassName()})}))}ngAfterContentInit(){this.listOfNzThComponent.changes.pipe(Object(c.a)(!0),Object(h.a)(()=>Object(o.a)(this.listOfNzThComponent.changes,...this.listOfNzThComponent.map(t=>t.nzWidthChange$))),Object(u.a)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzVirtualScroll",void 0),Object(r.__decorate)([Object(p.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzVirtualItemSize",void 0),Object(r.__decorate)([Object(p.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzVirtualMaxBufferPx",void 0),Object(r.__decorate)([Object(p.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzVirtualMinBufferPx",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzFrontPagination",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzTemplateMode",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzBordered",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowPagination",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzLoading",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowSizeChanger",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzHideOnSinglePage",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowQuickJumper",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSimple",void 0),t})();class m{constructor(t){this.nzTableComponent=t}}let b=(()=>{class t{constructor(t,e){this.elementRef=t,this.nzUpdateHostClassService=e,this.nzChecked=!1,this.nzDisabled=!1,this.nzIndeterminate=!1,this.nzExpand=!1,this.nzShowExpand=!1,this.nzShowCheckbox=!1,this.nzCheckedChange=new i.m,this.nzExpandChange=new i.m}expandChange(t){t.stopPropagation(),this.nzExpand=!this.nzExpand,this.nzExpandChange.emit(this.nzExpand)}setClassMap(){this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{"ant-table-row-expand-icon-cell":this.nzShowExpand&&!Object(p.T)(this.nzIndentSize),"ant-table-selection-column":this.nzShowCheckbox,"ant-table-td-left-sticky":Object(p.T)(this.nzLeft),"ant-table-td-right-sticky":Object(p.T)(this.nzRight)})}ngOnChanges(t){(t.nzIndentSize||t.nzShowExpand||t.nzShowCheckbox||t.nzRight||t.nzLeft)&&this.setClassMap()}}return Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzExpand",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowExpand",void 0),Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowCheckbox",void 0),t})(),y=(()=>{class t{constructor(t,e,n){this.nzTableComponent=t,this.elementRef=e,this.renderer=n,this.destroy$=new s.a,this.nzSingleSort=!1,this.nzSortChange=new i.m,this.nzTableComponent&&(this.nzTableComponent.nzTheadComponent=this)}ngAfterContentInit(){this.listOfNzThComponent.changes.pipe(Object(c.a)(!0),Object(d.a)(()=>Object(o.a)(...this.listOfNzThComponent.map(t=>t.nzSortChangeWithKey))),Object(u.a)(this.destroy$)).subscribe(t=>{this.nzSortChange.emit(t),this.nzSingleSort&&this.listOfNzThComponent.forEach(e=>{e.nzSort=e.nzSortKey===t.key?e.nzSort:null,e.marForCheck()})})}ngAfterViewInit(){this.nzTableComponent&&this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(r.__decorate)([Object(p.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSingleSort",void 0),t})();class v{constructor(t,e,n){this.elementRef=t,this.renderer=e,this.nzTableComponent=n}set nzExpand(t){Object(p.mb)(t)?(this.renderer.removeStyle(this.elementRef.nativeElement,"display"),this.renderer.addClass(this.elementRef.nativeElement,"ant-table-expanded-row")):(this.renderer.setStyle(this.elementRef.nativeElement,"display","none"),this.renderer.removeClass(this.elementRef.nativeElement,"ant-table-expanded-row"))}}class _{}},hh1I:function(t,e,n){var r=n("iWRJ"),i=n("tMf1");t.exports=function(t){var e=r(t),n=new Date(0);n.setFullYear(e+1,0,4),n.setHours(0,0,0,0);var s=i(n);return s.setMilliseconds(s.getMilliseconds()-1),s}},"i5+F":function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,s=e.i;return e.w=r=r+1640531527|0,n=i[s+34&127],t=i[s=s+1&127],n^=n<<13,t^=t<<17,n=i[s]=(n^=n>>>15)^(t^=t>>>12),e.i=s,n+(r^r>>>16)|0},function(t,e){var n,r,i,s,o,l=[],a=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,a=Math.max(a,e.length)),i=0,s=-32;s<a;++s)e&&(r^=e.charCodeAt((s+32)%e.length)),0===s&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,s>=0&&(i=0==(n=l[127&s]^=r+(o=o+1640531527|0))?i+1:0);for(i>=128&&(l[127&(e&&e.length||0)]=-1),i=127,s=512;s>0;--s)r=l[i+34&127],n=l[i=i+1&127],r^=r<<13,n^=n<<17,l[i]=(r^=r>>>15)^(n^=n>>>12);t.w=o,t.X=l,t.i=i}(e,t)}function l(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new o(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&l(r,n),i.state=function(){return l(n,{})}),i}i&&i.exports?i.exports=a:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return a}).call(e,n,e,i))||(i.exports=r):this.xor4096=a}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},i6Cy:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.bufferCount=function(t,e){return void 0===e&&(e=null),function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?l:o}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),o=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return r(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(i.Subscriber),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return r(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,r=this.buffers,i=this.count;this.count++,i%n==0&&r.push([]);for(var s=r.length;s--;){var o=r[s];o.push(t),o.length===e&&(r.splice(s,1),this.destination.next(o))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var r=e.shift();r.length>0&&n.next(r)}t.prototype._complete.call(this)},e}(i.Subscriber)},iC8E:function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return g}),n.d(e,"c",function(){return f});var r=n("mrSG"),i=n("dvZr"),s=n("8Y7J"),o=n("QQfA"),l=n("zMNK"),a=n("XNiG"),u=n("5VGP"),c=n("1G5W");class h{}const d=300;let p=(()=>{class t extends h{constructor(t,e,n,r,i,o,l,u){super(),this.document=t,this.renderer=e,this.overlay=n,this.injector=r,this.changeDetectorRef=i,this.focusTrapFactory=o,this.viewContainerRef=l,this.overlayKeyboardDispatcher=u,this.nzClosable=!0,this.nzMaskClosable=!0,this.nzMask=!0,this.nzNoAnimation=!1,this.nzPlacement="right",this.nzMaskStyle={},this.nzBodyStyle={},this.nzWidth=256,this.nzHeight=256,this.nzZIndex=1e3,this.nzOffsetX=0,this.nzOffsetY=0,this.nzOnViewInit=new s.m,this.nzOnClose=new s.m,this.destroy$=new a.a,this.isOpen=!1,this.templateContext={$implicit:void 0,drawerRef:this},this.nzAfterOpen=new a.a,this.nzAfterClose=new a.a}set nzVisible(t){this.isOpen=t}get nzVisible(){return this.isOpen}get offsetTransform(){if(!this.isOpen||this.nzOffsetX+this.nzOffsetY===0)return null;switch(this.nzPlacement){case"left":return`translateX(${this.nzOffsetX}px)`;case"right":return`translateX(-${this.nzOffsetX}px)`;case"top":return`translateY(${this.nzOffsetY}px)`;case"bottom":return`translateY(-${this.nzOffsetY}px)`}}get transform(){if(this.isOpen)return null;switch(this.nzPlacement){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)"}}get width(){return this.isLeftOrRight?Object(u.nb)(this.nzWidth):null}get height(){return this.isLeftOrRight?null:Object(u.nb)(this.nzHeight)}get isLeftOrRight(){return"left"===this.nzPlacement||"right"===this.nzPlacement}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}isTemplateRef(t){return t instanceof s.L}ngOnInit(){this.attachOverlay(),this.updateOverlayStyle(),this.updateBodyOverflow(),this.templateContext={$implicit:this.nzContentParams,drawerRef:this},this.changeDetectorRef.detectChanges()}ngAfterViewInit(){this.attachBodyContent(),setTimeout(()=>{this.nzOnViewInit.emit()})}ngOnChanges(t){t.hasOwnProperty("nzVisible")&&(t.nzVisible.currentValue?this.open():this.close())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.disposeOverlay()}getAnimationDuration(){return this.nzNoAnimation?0:d}close(t){this.isOpen=!1,this.updateOverlayStyle(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.updateBodyOverflow(),this.restoreFocus(),this.nzAfterClose.next(t),this.nzAfterClose.complete()},this.getAnimationDuration())}open(){this.isOpen=!0,this.overlayKeyboardDispatcher.add(this.overlayRef),this.updateOverlayStyle(),this.updateBodyOverflow(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.nzAfterOpen.next()},this.getAnimationDuration())}closeClick(){this.nzOnClose.emit()}maskClick(){this.nzMaskClosable&&this.nzMask&&this.nzOnClose.emit()}attachBodyContent(){if(this.bodyPortalOutlet.dispose(),this.nzContent instanceof s.N){const t=new l.d(this.injector,new WeakMap([[h,this]])),e=new l.b(this.nzContent,null,t),n=this.bodyPortalOutlet.attachComponentPortal(e);Object.assign(n.instance,this.nzContentParams),n.changeDetectorRef.detectChanges()}}attachOverlay(){this.overlayRef||(this.portal=new l.f(this.drawerTemplate,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayRef.keydownEvents().pipe(Object(c.a)(this.destroy$)).subscribe(t=>{t.keyCode===i.e&&this.isOpen&&this.nzOnClose.emit()}))}disposeOverlay(){this.overlayRef&&this.overlayRef.dispose(),this.overlayRef=null}getOverlayConfig(){return new o.e({positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block()})}updateOverlayStyle(){this.overlayRef&&this.overlayRef.overlayElement&&this.renderer.setStyle(this.overlayRef.overlayElement,"pointer-events",this.isOpen?"auto":"none")}updateBodyOverflow(){this.overlayRef&&(this.isOpen?this.overlayRef.getConfig().scrollStrategy.enable():this.overlayRef.getConfig().scrollStrategy.disable())}savePreviouslyFocusedElement(){this.document&&!this.previouslyFocusedElement&&(this.previouslyFocusedElement=this.document.activeElement,this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.blur&&this.previouslyFocusedElement.blur())}trapFocus(){!this.focusTrap&&this.overlayRef&&this.overlayRef.overlayElement&&(this.focusTrap=this.focusTrapFactory.create(this.overlayRef.overlayElement),this.focusTrap.focusInitialElement())}restoreFocus(){this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}}return Object(r.__decorate)([Object(u.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzClosable",void 0),Object(r.__decorate)([Object(u.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzMaskClosable",void 0),Object(r.__decorate)([Object(u.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzMask",void 0),Object(r.__decorate)([Object(u.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzNoAnimation",void 0),t})();class f{}class g{}},iFGG:function(t,e,n){"use strict";var r=1,i={};e.Immediate={setImmediate:function(t){var e=r++;return i[e]=t,Promise.resolve().then(function(){return function(t){var e=i[t];e&&e()}(e)}),e},clearImmediate:function(t){delete i[t]}}},iInd:function(t,e,n){"use strict";var r=n("SVse"),i=n("8Y7J"),s=n("LRne"),o=n("Cfvw"),l=n("2Vo4"),a=n("HDdC");function u(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}u.prototype=Object.create(Error.prototype);const c=u;var h=n("itXk"),d=n("NXyV"),p=n("XNiG"),f=n("EY2u"),g=n("lJxs"),m=n("0EUg"),b=n("pLZG"),y=n("7o/Q"),v=n("4I5i");function _(t){return function(e){return 0===t?Object(f.b)():e.lift(new w(t))}}class w{constructor(t){if(this.total=t,this.total<0)throw new v.a}call(t,e){return e.subscribe(new x(t,this.total))}}class x extends y.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var C=n("vkgz");const S=(t=function(){return new c})=>Object(C.a)({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw t()}});function O(t=null){return e=>e.lift(new k(t))}class k{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new E(t,this.defaultValue))}}class E extends y.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var T=n("SpAZ");function z(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(b.a)((e,n)=>t(e,n,r)):T.a,_(1),n?O(e):S(()=>new c))}var P=n("JIr8"),I=n("IzEk");function M(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Object(b.a)((e,n)=>t(e,n,r)):T.a,Object(I.a)(1),n?O(e):S(()=>new c))}var D=n("5+tZ");class A{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new N(t,this.predicate,this.thisArg,this.source))}}class N extends y.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}var R=n("eIep"),F=n("JX91"),$=n("Kqap"),L=n("bOdf"),j=n("mCNh"),B=n("nYR2"),V=n("bHdf"),W=n("cUpR");n.d(e,"F",function(){return lt}),n.d(e,"v",function(){return Sn}),n.d(e,"C",function(){return An}),n.d(e,"x",function(){return Tn}),n.d(e,"D",function(){return Nn}),n.d(e,"E",function(){return Rn}),n.d(e,"z",function(){return Pn}),n.d(e,"y",function(){return zn}),n.d(e,"B",function(){return Dn}),n.d(e,"w",function(){return kn}),n.d(e,"A",function(){return Mn}),n.d(e,"G",function(){return xn}),n.d(e,"o",function(){return hn}),n.d(e,"p",function(){return dn}),n.d(e,"r",function(){return mn}),n.d(e,"d",function(){return G}),n.d(e,"e",function(){return H}),n.d(e,"m",function(){return tn}),n.d(e,"n",function(){return cn}),n.d(e,"l",function(){return nn}),n.d(e,"j",function(){return Cn}),n.d(e,"k",function(){return Fn}),n.d(e,"q",function(){return En}),n.d(e,"b",function(){return gn}),n.d(e,"f",function(){return _n}),n.d(e,"h",function(){return vn}),n.d(e,"i",function(){return yn}),n.d(e,"s",function(){return wn}),n.d(e,"a",function(){return Qt}),n.d(e,"g",function(){return at}),n.d(e,"t",function(){return sn}),n.d(e,"c",function(){return It}),n.d(e,"u",function(){return Pt});class U{constructor(t,e){this.id=t,this.url=e}}class H extends U{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class G extends U{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class q extends U{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class K extends U{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Y extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z extends U{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J extends U{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class et{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class nt{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class rt{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class it{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class st{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ot{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lt{}const at="primary";class ut{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ct(t){return new ut(t)}const ht="ngNavigationCancelingError";function dt(t){const e=Error("NavigationCancelingError: "+t);return e[ht]=!0,e}function pt(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class ft{constructor(t,e){this.routes=t,this.module=e}}function gt(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];mt(r,bt(e,r))}}function mt(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==at)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&gt(t.children,e)}function bt(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function yt(t){const e=t.children&&t.children.map(yt),n=e?Object.assign({},t,{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==at&&(n.component=lt),n}function vt(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(t[i=n[s]]!==e[i])return!1;return!0}function _t(t){return Array.prototype.concat.apply([],t)}function wt(t){return t.length>0?t[t.length-1]:null}function xt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ct(t){return Object(i.zb)(t)?t:Object(i.Ab)(t)?Object(o.a)(Promise.resolve(t)):Object(s.a)(t)}function St(t,e,n){return n?function(t,e){return vt(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Tt(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>e[n]===t[n])}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length){return!!Tt(n.segments.slice(0,i.length),i)&&!r.hasChildren()}if(n.segments.length===i.length){if(!Tt(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!Tt(n.segments,t)&&!!n.children[at]&&e(n.children[at],r,s)}}(e,n,n.segments)}(t.root,e.root)}class Ot{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ct(this.queryParams)),this._queryParamMap}toString(){return Mt.serialize(this)}}class kt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,xt(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dt(this)}}class Et{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ct(this.parameters)),this._parameterMap}toString(){return Lt(this)}}function Tt(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function zt(t,e){let n=[];return xt(t.children,(t,r)=>{r===at&&(n=n.concat(e(t,r)))}),xt(t.children,(t,r)=>{r!==at&&(n=n.concat(e(t,r)))}),n}class Pt{}class It{parse(t){const e=new Ut(t);return new Ot(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Dt(e);if(n){const n=e.children[at]?t(e.children[at],!1):"",r=[];return xt(e.children,(e,n)=>{n!==at&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=zt(e,(n,r)=>r===at?[t(e.children[at],!1)]:[`${r}:${t(n,!1)}`]);return`${Dt(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Nt(e)}=${Nt(t)}`).join("&"):`${Nt(e)}=${Nt(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Mt=new It;function Dt(t){return t.segments.map(t=>Lt(t)).join("/")}function At(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nt(t){return At(t).replace(/%3B/gi,";")}function Rt(t){return At(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ft(t){return decodeURIComponent(t)}function $t(t){return Ft(t.replace(/\+/g,"%20"))}function Lt(t){return`${Rt(t.path)}${function(t){return Object.keys(t).map(e=>`;${Rt(e)}=${Rt(t[e])}`).join("")}(t.parameters)}`}const jt=/^[^\/()?;=#]+/;function Bt(t){const e=t.match(jt);return e?e[0]:""}const Vt=/^[^=?&#]+/,Wt=/^[^?&#]+/;class Ut{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[at]=new kt(t,e)),n}parseSegment(){const t=Bt(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Et(Ft(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Bt(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Bt(this.remaining);t&&this.capture(n=t)}t[Ft(e)]=Ft(n)}parseQueryParam(t){const e=function(t){const e=t.match(Vt);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Wt);return e?e[0]:""}(this.remaining);t&&this.capture(n=t)}const r=$t(e),i=$t(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(t[r]=e=[e]),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Bt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=at);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s[at]:new kt([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ht{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gt(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Gt(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=qt(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return qt(t,this._root).map(t=>t.value)}}function Gt(t,e){if(t===e.value)return e;for(const n of e.children){const e=Gt(t,n);if(e)return e}return null}function qt(t,e){if(t===e.value)return[e];for(const n of e.children){const r=qt(t,n);if(r.length)return r.unshift(e),r}return[]}class Kt{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Yt(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Xt extends Ht{constructor(t,e){super(t),this.snapshot=e,ne(this,t)}toString(){return this.snapshot.toString()}}function Zt(t,e){const n=function(t,e){const n=new te([],{},{},"",{},at,e,null,t.root,-1,{});return new ee("",new Kt(n,[]))}(t,e),r=new l.a([new Et("",{})]),i=new l.a({}),s=new l.a({}),o=new l.a({}),a=new l.a(""),u=new Qt(r,i,o,a,s,at,e,n.root);return u.snapshot=n.root,new Xt(new Kt(u,[]),n)}class Qt{constructor(t,e,n,r,i,s,o,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(g.a)(t=>ct(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(g.a)(t=>ct(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Jt(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign({},t.params,e.params),data:Object.assign({},t.data,e.data),resolve:Object.assign({},t.resolve,e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class te{constructor(t,e,n,r,i,s,o,l,a,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=l,this._urlSegment=a,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ct(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ct(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ee extends Ht{constructor(t,e){super(e),this.url=t,ne(this,e)}toString(){return re(this._root)}}function ne(t,e){e.value._routerState=t,e.children.forEach(e=>ne(t,e))}function re(t){const e=t.children.length>0?` { ${t.children.map(re).join(", ")} } `:"";return`${t.value}${e}`}function ie(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,vt(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),vt(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!vt(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),vt(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function se(t,e){var n,r;return vt(t.params,e.params)&&Tt(n=t.url,r=e.url)&&n.every((t,e)=>vt(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||se(t.parent,e.parent))}function oe(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function le(t,e,n,r,i){let s={};return r&&xt(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ot(n.root===t?e:function t(e,n,r){const i={};return xt(e.children,(e,s)=>{i[s]=e===n?r:t(e,n,r)}),new kt(e.segments,i)}(n.root,t,e),s,i)}class ae{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&oe(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==wt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ue{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ce(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets[at]:`${t}`}function he(t,e,n){if(t||(t=new kt([],{})),0===t.segments.length&&t.hasChildren())return de(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=ce(n[r]),l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===o)break;if(o&&l&&"object"==typeof l&&void 0===l.outlets){if(!me(o,l,e))return s;r+=2}else{if(!me(o,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new kt(t.segments.slice(0,r.pathIndex),{});return e.children[at]=new kt(t.segments.slice(r.pathIndex),t.children),de(e,0,i)}return r.match&&0===i.length?new kt(t.segments,{}):r.match&&!t.hasChildren()?pe(t,e,n):r.match?de(t,0,i):pe(t,e,n)}function de(t,e,n){if(0===n.length)return new kt(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{[at]:t}:void 0===t[0].outlets?{[at]:t}:t[0].outlets}(n),i={};return xt(r,(n,r)=>{null!==n&&(i[r]=he(t.children[r],e,n))}),xt(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new kt(t.segments,i)}}function pe(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=fe(n[i].outlets);return new kt(r,t)}if(0===i&&oe(n[0])){r.push(new Et(t.segments[e].path,n[0])),i++;continue}const s=ce(n[i]),o=i<n.length-1?n[i+1]:null;s&&o&&oe(o)?(r.push(new Et(s,ge(o))),i+=2):(r.push(new Et(s,{})),i++)}return new kt(r,{})}function fe(t){const e={};return xt(t,(t,n)=>{null!==t&&(e[n]=pe(new kt([],{}),0,t))}),e}function ge(t){const e={};return xt(t,(t,n)=>e[n]=`${t}`),e}function me(t,e,n){return t==n.path&&vt(e,n.parameters)}const be=(t,e,n)=>Object(g.a)(r=>(new ye(e,r.targetRouterState,r.currentRouterState,n).activate(t),r));class ye{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ie(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Yt(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),xt(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Yt(t),i=t.value.component?n.children:e;xt(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Yt(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new st(t.value.snapshot))}),t.children.length&&this.forwardEvent(new rt(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(ie(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ve(t.route)}else{const n=function(t){for(let e=r.snapshot.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ve(t){ie(t.value),t.children.forEach(ve)}function _e(t){return"function"==typeof t}function we(t){return t instanceof Ot}class xe{constructor(t){this.segmentGroup=t||null}}class Ce{constructor(t){this.urlTree=t}}function Se(t){return new a.a(e=>e.error(new xe(t)))}function Oe(t){return new a.a(e=>e.error(new Ce(t)))}function ke(t){return new a.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ee{constructor(t,e,n,r,s){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(i.w)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,at).pipe(Object(g.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Object(P.a)(t=>{if(t instanceof Ce)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof xe)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,at).pipe(Object(g.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Object(P.a)(t=>{if(t instanceof xe)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new kt([],{[at]:t}):t;return new Ot(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(g.a)(t=>new kt([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(s.a)({});const n=[],r=[],i={};return xt(t,(t,s)=>{const o=e(s,t).pipe(Object(g.a)(t=>i[s]=t));s===at?n.push(o):r.push(o)}),s.a.apply(null,n.concat(r)).pipe(Object(m.a)(),z(),Object(g.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(s.a)(...n).pipe(Object(g.a)(l=>this.expandSegmentAgainstRoute(t,e,n,l,r,i,o).pipe(Object(P.a)(t=>{if(t instanceof xe)return Object(s.a)(null);throw t}))),Object(m.a)(),M(t=>!!t),Object(P.a)((t,n)=>{if(t instanceof c||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(s.a)(new kt([],{}));throw new xe(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return Ie(r)!==s?Se(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):Se(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Oe(i):this.lineralizeSegments(n,i).pipe(Object(D.a)(n=>{const i=new kt(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:l,lastChild:a,positionalParamSegments:u}=Te(e,r,i);if(!o)return Se(e);const c=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?Oe(c):this.lineralizeSegments(r,c).pipe(Object(D.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(a)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(g.a)(t=>(n._loadedConfig=t,new kt(r,{})))):Object(s.a)(new kt(r,{}));const{matched:i,consumedSegments:o,lastChild:l}=Te(e,n,r);if(!i)return Se(e);const a=r.slice(l);return this.getChildConfig(t,n,r).pipe(Object(D.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:l}=function(t,e,n,r){return n.length>0&&function(t,e,n){return r.some(n=>Pe(t,e,n)&&Ie(n)!==at)}(t,n)?{segmentGroup:ze(new kt(e,function(t,e){const n={};n[at]=e;for(const r of t)""===r.path&&Ie(r)!==at&&(n[Ie(r)]=new kt([],{}));return n}(r,new kt(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return r.some(n=>Pe(t,e,n))}(t,n)?{segmentGroup:ze(new kt(t.segments,function(t,e,n,r){const i={};for(const s of n)Pe(t,e,s)&&!r[Ie(s)]&&(i[Ie(s)]=new kt([],{}));return Object.assign({},r,i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===l.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(g.a)(t=>new kt(o,t))):0===r.length&&0===l.length?Object(s.a)(new kt(o,{})):this.expandSegment(n,i,r,l,at,!0).pipe(Object(g.a)(t=>new kt(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(s.a)(new ft(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(s.a)(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(o.a)(r).pipe(Object(g.a)(r=>{const i=t.get(r);let s;if(function(t){return t&&_e(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!_e(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return Ct(s)})).pipe(Object(m.a)(),(i=t=>!0===t,t=>t.lift(new A(i,void 0,t)))):Object(s.a)(!0);var i}(t.injector,e,n).pipe(Object(D.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(g.a)(t=>(e._loadedConfig=t,t))):function(t){return new a.a(e=>e.error(dt(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(s.a)(new ft([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(s.a)(n);if(r.numberOfChildren>1||!r.children[at])return ke(t.redirectTo);r=r.children[at]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ot(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return xt(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return xt(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new kt(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Te(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||pt)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function ze(t){if(1===t.numberOfChildren&&t.children[at]){const e=t.children[at];return new kt(t.segments.concat(e.segments),e.children)}return t}function Pe(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Ie(t){return t.outlet||at}class Me{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class De{constructor(t,e){this.component=t,this.route=e}}function Ae(t,e,n){const r=t._root;return function t(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=Yt(n);return e.children.forEach(e=>{!function(e,n,r,i,s={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,l=n?n.value:null,a=r?r.getContext(e.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Tt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Tt(t.url,e.url)||!vt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!se(t,e)||!vt(t.queryParams,e.queryParams);case"paramsChange":default:return!se(t,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);u?s.canActivateChecks.push(new Me(i)):(o.data=l.data,o._resolvedData=l._resolvedData),t(e,n,o.component?a?a.children:null:r,i,s),u&&s.canDeactivateChecks.push(new De(a&&a.outlet&&a.outlet.component||null,l))}else l&&Re(n,a,s),s.canActivateChecks.push(new Me(i)),t(e,null,o.component?a?a.children:null:r,i,s)}(e,o[e.value.outlet],r,i.concat([e.value]),s),delete o[e.value.outlet]}),xt(o,(t,e)=>Re(t,r.getContext(e),s)),s}(r,e?e._root:null,n,[r.value])}function Ne(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Re(t,e,n){const r=Yt(t),i=t.value;xt(r,(t,r)=>{Re(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new De(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Fe=Symbol("INITIAL_VALUE");function $e(){return Object(R.a)(t=>Object(h.a)(...t.map(t=>t.pipe(Object(I.a)(1),Object(F.a)(Fe)))).pipe(Object($.a)((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Fe)return t;if(r===Fe&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||we(r))return r}return t},t)},Fe),Object(b.a)(t=>t!==Fe),Object(g.a)(t=>we(t)?t:!0===t),Object(I.a)(1)))}function Le(t,e){return null!==t&&e&&e(new it(t)),Object(s.a)(!0)}function je(t,e){return null!==t&&e&&e(new nt(t)),Object(s.a)(!0)}function Be(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(s.a)(!0);const i=r.map(r=>Object(d.a)(()=>{const i=Ne(r,e,n);let s;if(function(t){return t&&_e(t.canActivate)}(i))s=Ct(i.canActivate(e,t));else{if(!_e(i))throw new Error("Invalid CanActivate guard");s=Ct(i(e,t))}return s.pipe(M())}));return Object(s.a)(i).pipe($e())}function Ve(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>(function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null})(t)).filter(t=>null!==t).map(e=>Object(d.a)(()=>{const i=e.guards.map(i=>{const s=Ne(i,e.node,n);let o;if(function(t){return t&&_e(t.canActivateChild)}(s))o=Ct(s.canActivateChild(r,t));else{if(!_e(s))throw new Error("Invalid CanActivateChild guard");o=Ct(s(r,t))}return o.pipe(M())});return Object(s.a)(i).pipe($e())}));return Object(s.a)(i).pipe($e())}class We{}class Ue{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){try{const e=qe(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,at),r=new te([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},at,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Kt(r,n),o=new ee(this.url,i);return this.inheritParamsAndData(o._root),Object(s.a)(o)}catch(t){return new a.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Jt(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=zt(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};n.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(),n.sort((t,e)=>t.value.outlet===at?-1:e.value.outlet===at?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const s of t)try{return this.processSegmentAgainstRoute(s,e,n,r)}catch(i){if(!(i instanceof We))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new We}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new We;if((t.outlet||at)!==r)throw new We;let i,s=[],o=[];if("**"===t.path){const s=n.length>0?wt(n).parameters:{};i=new te(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xe(t),r,t.component,t,He(e),Ge(e)+n.length,Ze(t))}else{const l=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new We;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||pt)(n,t,e);if(!r)throw new We;const i={};xt(r.posParams,(t,e)=>{i[e]=t.path});const s=r.consumed.length>0?Object.assign({},i,r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:s}}(e,t,n);s=l.consumedSegments,o=n.slice(l.lastChild),i=new te(s,l.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xe(t),r,t.component,t,He(e),Ge(e)+s.length,Ze(t))}const l=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:a,slicedSegments:u}=qe(e,s,o,l,this.relativeLinkResolution);if(0===u.length&&a.hasChildren()){const t=this.processChildren(l,a);return[new Kt(i,t)]}if(0===l.length&&0===u.length)return[new Kt(i,[])];const c=this.processSegment(l,a,u,at);return[new Kt(i,c)]}}function He(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ge(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function qe(t,e,n,r,i){if(n.length>0&&function(t,e,n){return r.some(n=>Ke(t,e,n)&&Ye(n)!==at)}(t,n)){const i=new kt(e,function(t,e,n,r){const i={};i[at]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Ye(s)!==at){const n=new kt([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Ye(s)]=n}return i}(t,e,r,new kt(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return r.some(n=>Ke(t,e,n))}(t,n)){const s=new kt(t.segments,function(t,e,n,r,i,s){const o={};for(const l of r)if(Ke(t,n,l)&&!i[Ye(l)]){const n=new kt([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Ye(l)]=n}return Object.assign({},i,o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new kt(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Ke(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Ye(t){return t.outlet||at}function Xe(t){return t.data||{}}function Ze(t){return t.resolve||{}}function Qe(t,e,n,r){const i=Ne(t,e,r);return Ct(i.resolve?i.resolve(e,n):i(e,n))}function Je(t){return function(e){return e.pipe(Object(R.a)(e=>{const n=t(e);return n?Object(o.a)(n).pipe(Object(g.a)(()=>e)):Object(o.a)([e])}))}}class tn{}class en{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const nn=new i.p("ROUTES");class rn{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(g.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new ft(_t(r.injector.get(nn)).map(yt),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(o.a)(this.loader.load(t)):Ct(t()).pipe(Object(D.a)(t=>t instanceof i.u?Object(s.a)(t):Object(o.a)(this.compiler.compileModuleAsync(t))))}}class sn{}class on{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function ln(t){throw t}function an(t,e,n){return e.parse("/")}function un(t,e){return Object(s.a)(null)}class cn{constructor(t,e,n,r,s,o,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new p.a,this.errorHandler=ln,this.malformedUriErrorHandler=an,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:un,afterPreactivation:un},this.urlHandlingStrategy=new on,this.routeReuseStrategy=new en,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=s.get(i.w),this.console=s.get(i.cb);const c=s.get(i.y);this.isNgZoneEnabled=c instanceof i.y,this.resetConfig(u),this.currentUrlTree=new Ot(new kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rn(o,a,t=>this.triggerEvent(new tt(t)),t=>this.triggerEvent(new et(t))),this.routerState=Zt(this.currentUrlTree,this.rootComponentType),this.transitions=new l.a({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Object(b.a)(t=>0!==t.id),Object(g.a)(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Object(R.a)(t=>{let n=!1,r=!1;return Object(s.a)(t).pipe(Object(C.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),Object(R.a)(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(s.a)(t).pipe(Object(R.a)(t=>{const n=this.transitions.getValue();return e.next(new H(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?f.a:[t]}),Object(R.a)(t=>Promise.resolve(t)),function(t,e,n,r){return function(i){return i.pipe(Object(R.a)(i=>(function(t,e,n,r,s){return new Ee(t,e,n,i.extractedUrl,s).apply()})(t,e,n,0,r).pipe(Object(g.a)(t=>Object.assign({},i,{urlAfterRedirects:t})))))}}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Object(C.a)(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(s){return s.pipe(Object(D.a)(s=>(function(t,e,n,r,i="emptyOnly",s="legacy"){return new Ue(t,e,n,r,i,s).recognize()})(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(Object(g.a)(t=>Object.assign({},s,{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(C.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(C.a)(t=>{const n=new Y(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:l}=t,a=new H(n,this.serializeUrl(r),i,o);e.next(a);const u=Zt(r,this.rootComponentType).snapshot;return Object(s.a)(Object.assign({},t,{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign({},l,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),f.a}),Je(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Object(C.a)(t=>{const e=new X(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(g.a)(t=>Object.assign({},t,{guards:Ae(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(D.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:a}}=n;return 0===a.length&&0===l.length?Object(s.a)(Object.assign({},n,{guardsResult:!0})):function(t,e,n,r){return Object(o.a)(t).pipe(Object(D.a)(t=>(function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(s.a)(!0);const l=o.map(s=>{const o=Ne(s,e,i);let l;if(function(t){return t&&_e(t.canDeactivate)}(o))l=Ct(o.canDeactivate(t,e,n,r));else{if(!_e(o))throw new Error("Invalid CanDeactivate guard");l=Ct(o(t,e,n,r))}return l.pipe(M())});return Object(s.a)(l).pipe($e())})(t.component,t.route,n,e,r)),M(t=>!0!==t,!0))}(a,r,i,t).pipe(Object(D.a)(n=>n&&function(t){return"boolean"==typeof n}()?function(t,e,n,r){return Object(o.a)(e).pipe(Object(L.a)(e=>Object(o.a)([je(e.route.parent,r),Le(e.route,r),Ve(t,e.path,n),Be(t,e.route,n)]).pipe(Object(m.a)(),M(t=>!0!==t,!0))),M(t=>!0!==t,!0))}(r,l,t,e):Object(s.a)(n)),Object(g.a)(t=>Object.assign({},n,{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(C.a)(t=>{if(we(t.guardsResult)){const e=dt(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(C.a)(t=>{const e=new Z(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Object(b.a)(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new q(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Je(t=>{if(t.guards.canActivateChecks.length)return Object(s.a)(t).pipe(Object(C.a)(t=>{const e=new Q(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),function(t,e){return function(n){return n.pipe(Object(D.a)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;return i.length?Object(o.a)(i).pipe(Object(L.a)(n=>(function(t,e,n,i){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(s.a)({});if(1===i.length){const s=i[0];return Qe(t[s],e,n,r).pipe(Object(g.a)(t=>({[s]:t})))}const l={};return Object(o.a)(i).pipe(Object(D.a)(i=>Qe(t[i],e,n,r).pipe(Object(g.a)(t=>(l[i]=t,t))))).pipe(z(),Object(g.a)(()=>l))}(t._resolve,t,r,i).pipe(Object(g.a)(e=>(t._resolvedData=e,t.data=Object.assign({},t.data,Jt(t,n).resolve),null)))})(n.route,0,t,e)),function(t,e){return arguments.length>=2?function(n){return Object(j.a)(Object($.a)(t,e),_(1),O(e))(n)}:function(e){return Object(j.a)(Object($.a)((e,n,r)=>t(e,n,r+1)),_(1))(e)}}((t,e)=>t),Object(g.a)(t=>n)):Object(s.a)(n)}))}}(this.paramsInheritanceStrategy,this.ngModule.injector),Object(C.a)(t=>{const e=new J(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Je(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),Object(g.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const s=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new Kt(i,s)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Qt(new l.a((i=n.value).url),new l.a(i.params),new l.a(i.queryParams),new l.a(i.fragment),new l.a(i.data),i.outlet,i.component,i),s=n.children.map(n=>t(e,n));return new Kt(r,s)}}var i}(t,e._root,n?n._root:void 0);return new Xt(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:e})}),Object(C.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),be(this.rootContexts,this.routeReuseStrategy,t=>this.triggerEvent(t)),Object(C.a)({next(){n=!0},complete(){n=!0}}),Object(B.a)(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new q(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Object(P.a)(n=>{if(r=!0,function(t){return n&&n[ht]}()){const r=we(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new q(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),t.resolve(!1),r&&this.navigateByUrl(n.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new K(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(i){t.reject(i)}}return f.a}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){gt(t),this.config=t.map(yt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:s,preserveQueryParams:o,queryParamsHandling:l,preserveFragment:a}=e;Object(i.X)()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:s;let h=null;if(l)switch(l){case"merge":h=Object.assign({},this.currentUrlTree.queryParams,r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=o?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return le(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ae(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return xt(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new ae(n,e,r)}(n);if(s.toRoot())return le(e.root,new kt([],{}),e,r,i);const o=function(t,n,r){if(t.isAbsolute)return new ue(e.root,!0,0);if(-1===r.snapshot._lastPathIndex)return new ue(r.snapshot._urlSegment,!0,0);const i=oe(t.commands[0])?0:1;return function(e,n,s){let o=r.snapshot._urlSegment,l=r.snapshot._lastPathIndex+i,a=t.numberOfDoubleDots;for(;a>l;){if(a-=l,!(o=o.parent))throw new Error("Invalid number of '../'");l=o.segments.length}return new ue(o,!1,l-a)}()}(s,0,t),l=o.processChildren?de(o.segmentGroup,o.index,s.commands):he(o.segmentGroup,o.index,s.commands);return le(o.segmentGroup,l,e,r,i)}(u,this.currentUrlTree,t,h,c)}navigateByUrl(t,e={skipLocationChange:!1}){Object(i.X)()&&this.isNgZoneEnabled&&!i.y.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=we(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(we(t))return St(this.currentUrlTree,t,e);const n=this.parseUrl(t);return St(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new G(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r){const i=this.getTransition();if(i&&"imperative"!==e&&"imperative"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"hashchange"==e&&"popstate"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(i&&"popstate"==e&&"hashchange"===i.source&&i.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s=null,o=null;const l=new Promise((t,e)=>{s=t,o=e}),a=++this.navigationId;return this.setTransition({id:a,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:o,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign({},r,{navigationId:n})):this.location.go(i,"",Object.assign({},r,{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}class hn{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.X)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=t}onClick(){const t={skipLocationChange:pn(this.skipLocationChange),replaceUrl:pn(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:pn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:pn(this.preserveFragment)})}}class dn{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof G&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){Object(i.X)()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:pn(this.skipLocationChange),replaceUrl:pn(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:pn(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:pn(this.preserveFragment)})}}function pn(t){return""===t||!!t}class fn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new gn,this.attachRef=null}}class gn{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new fn,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class mn{constructor(t,e,n,r,s){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.m,this.deactivateEvents=new i.m,this.name=r||at,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new bn(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class bn{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Qt?this.route:t===gn?this.childContexts:this.parent.get(t,e)}}class yn{}class vn{preload(t,e){return e().pipe(Object(P.a)(()=>Object(s.a)(null)))}}class _n{preload(t,e){return Object(s.a)(null)}}class wn{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new rn(e,n,e=>t.triggerEvent(new tt(e)),e=>t.triggerEvent(new et(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Object(b.a)(t=>t instanceof G),Object(L.a)(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(i.w);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(o.a)(n).pipe(Object(V.a)(),Object(g.a)(t=>void 0))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(D.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}class xn{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof H?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof G&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ot&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new ot(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const Cn=new i.p("ROUTER_CONFIGURATION"),Sn=new i.p("ROUTER_FORROOT_GUARD"),On=[r.h,{provide:Pt,useClass:It},{provide:cn,useFactory:Mn,deps:[i.g,Pt,gn,r.h,i.q,i.v,i.i,nn,Cn,[sn,new i.z],[tn,new i.z]]},gn,{provide:Qt,useFactory:Dn,deps:[cn]},{provide:i.v,useClass:i.J},wn,_n,vn,{provide:Cn,useValue:{enableTracing:!1}}];function kn(){return new i.x("Router",cn)}class En{constructor(t,e){}static forRoot(t,e){return{ngModule:En,providers:[On,In(t),{provide:Sn,useFactory:Pn,deps:[[cn,new i.z,new i.I]]},{provide:Cn,useValue:e||{}},{provide:r.i,useFactory:zn,deps:[r.v,[new i.o(r.a),new i.z],Cn]},{provide:xn,useFactory:Tn,deps:[cn,r.x,Cn]},{provide:yn,useExisting:e&&e.preloadingStrategy?e.preloadingStrategy:_n},{provide:i.x,multi:!0,useFactory:kn},[An,{provide:i.d,multi:!0,useFactory:Nn,deps:[An]},{provide:Fn,useFactory:Rn,deps:[An]},{provide:i.b,multi:!0,useExisting:Fn}]]}}static forChild(t){return{ngModule:En,providers:[In(t)]}}}function Tn(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new xn(t,e,n)}function zn(t,e,n={}){return n.useHash?new r.f(t,e):new r.u(t,e)}function Pn(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function In(t){return[{provide:i.a,multi:!0,useValue:t},{provide:nn,multi:!0,useValue:t}]}function Mn(t,e,n,r,i,s,o,l,a={},u,c){const h=new cn(null,e,n,r,i,s,o,_t(l));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),a.errorHandler&&(h.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(h.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=Object(W.s)();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(h.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(h.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(h.relativeLinkResolution=a.relativeLinkResolution),h}function Dn(t){return t.routerState.root}class An{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new p.a}appInitializer(){return this.injector.get(r.g,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(cn),r=this.injector.get(Cn);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(s.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Cn),n=this.injector.get(wn),r=this.injector.get(xn),s=this.injector.get(cn),o=this.injector.get(i.g);t===o.components[0]&&(this.isLegacyEnabled(e)?s.initialNavigation():this.isLegacyDisabled(e)&&s.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}function Nn(t){return t.appInitializer.bind(t)}function Rn(t){return t.bootstrapListener.bind(t)}const Fn=new i.p("Router Initializer")},iQJf:function(t,e,n){var r=n("/LN1");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},iUbB:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setDate(n.getDate()+i),n}},iWRJ:function(t,e,n){var r=n("yNUO"),i=n("tMf1");t.exports=function(t){var e=r(t),n=e.getFullYear(),s=new Date(0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);var o=i(s),l=new Date(0);l.setFullYear(n,0,4),l.setHours(0,0,0,0);var a=i(l);return e.getTime()>=o.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}},itXk:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("z+Ro"),i=n("DH7j"),s=n("l7GE"),o=n("ZUHj"),l=n("yCtX");const a={};function u(...t){let e=null,n=null;return Object(r.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0]),Object(l.a)(t,n).lift(new c(e))}class c{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new h(t,this.resultSelector))}}class h extends s.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(a),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(o.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const s=this.values,o=this.toRespond?s[n]===a?--this.toRespond:this.toRespond:0;s[n]=e,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},iu1C:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setMinutes(i),n}},jFrH:function(t,e,n){"use strict";var r=n("YK4L");e.min=function(t){return r.reduce("function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e})}},jIFe:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getMilliseconds()}},jTf7:function(t,e,n){"use strict";n.d(e,"a",function(){return k}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return C}),n.d(e,"d",function(){return P}),n.d(e,"e",function(){return S}),n.d(e,"f",function(){return z}),n.d(e,"g",function(){return M}),n.d(e,"h",function(){return A}),n.d(e,"i",function(){return T}),n.d(e,"j",function(){return I}),n.d(e,"k",function(){return D});var r=n("8Y7J"),i=n("mrSG"),s=n("5VGP"),o=n("XNiG"),l=n("2Vo4"),a=n("jtHE"),u=n("itXk"),c=n("VRyK"),h=n("xgIS"),d=n("EY2u"),p=n("/uUt"),f=n("lJxs"),g=n("pLZG"),m=n("zP0r"),b=n("w1tV"),y=n("vkgz"),v=n("1G5W"),_=n("JX91"),w=n("5+tZ"),x=n("dvZr");let C=(()=>{class t{constructor(){this.changes=new o.a,this.nzDisabled=!1,this.nzCustomContent=!1}ngOnChanges(){this.changes.next()}}return Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzCustomContent",void 0),t})();class S{constructor(){this.isLabelString=!1}set nzLabel(t){this.label=t,this.isLabelString=!(this.nzLabel instanceof r.L)}get nzLabel(){return this.label}}class O{transform(t,e,n,r){return r||!e?t:t.filter(t=>n(e,t))}}class k{transform(t,e,n,r){return r||!e?t:t.filter(t=>t.listOfNzOptionComponent.some(t=>n(e,t)))}}function E(t,e){return!(!e||!e.nzLabel)&&e.nzLabel.toLowerCase().indexOf(t.toLowerCase())>-1}class T{constructor(){this.autoClearSearchValue=!0,this.serverSearch=!1,this.filterOption=E,this.mode="default",this.maxMultipleCount=1/0,this.disabled=!1,this.compareWith=(t,e)=>t===e,this.listOfSelectedValueWithEmit$=new l.a({value:[],emit:!1}),this.mapOfTemplateOption$=new l.a({listOfNzOptionComponent:[],listOfNzOptionGroupComponent:[]}),this.searchValueRaw$=new l.a(""),this.listOfFilteredOption=[],this.openRaw$=new o.a,this.checkRaw$=new o.a,this.open=!1,this.clearInput$=new o.a,this.searchValue="",this.isShowNotFound=!1,this.open$=this.openRaw$.pipe(Object(p.a)()),this.activatedOption$=new a.a(1),this.listOfSelectedValue$=this.listOfSelectedValueWithEmit$.pipe(Object(f.a)(t=>t.value)),this.modelChange$=this.listOfSelectedValueWithEmit$.pipe(Object(g.a)(t=>t.emit),Object(f.a)(t=>{const e=t.value;let n=null;return this.isSingleMode?e.length&&(n=e[0]):n=e,n})),this.searchValue$=this.searchValueRaw$.pipe(Object(p.a)(),Object(m.a)(1),Object(b.a)(),Object(y.a)(t=>{this.searchValue=t,t&&this.updateActivatedOption(this.listOfFilteredOption[0]),this.updateListOfFilteredOption()})),this.listOfSelectedValue=[],this.listOfTemplateOption=[],this.listOfTagOption=[],this.listOfTagAndTemplateOption=[],this.listOfNzOptionComponent=[],this.listOfNzOptionGroupComponent=[],this.listOfCachedSelectedOption=[],this.valueOrOption$=Object(u.a)([this.listOfSelectedValue$,this.mapOfTemplateOption$]).pipe(Object(y.a)(t=>{this.listOfSelectedValue=t[0],this.listOfNzOptionComponent=t[1].listOfNzOptionComponent,this.listOfNzOptionGroupComponent=t[1].listOfNzOptionGroupComponent,this.listOfTemplateOption=this.listOfNzOptionComponent.concat(this.listOfNzOptionGroupComponent.reduce((t,e)=>[...t,...e.listOfNzOptionComponent.toArray()],[])),this.updateListOfTagOption(),this.updateListOfFilteredOption(),this.resetActivatedOptionIfNeeded(),this.updateListOfCachedOption()}),Object(b.a)()),this.check$=Object(c.a)(this.checkRaw$,this.valueOrOption$,this.searchValue$,this.activatedOption$,this.open$,this.modelChange$).pipe(Object(b.a)())}clickOption(t){if(!t.nzDisabled){this.updateActivatedOption(t);let e=[...this.listOfSelectedValue];if(this.isMultipleOrTags){const n=e.find(e=>this.compareWith(e,t.nzValue));Object(s.T)(n)?(e.splice(e.indexOf(n),1),this.updateListOfSelectedValue(e,!0)):e.length<this.maxMultipleCount&&(e.push(t.nzValue),this.updateListOfSelectedValue(e,!0))}else this.compareWith(e[0],t.nzValue)||this.updateListOfSelectedValue(e=[t.nzValue],!0);this.isSingleMode?this.setOpenState(!1):this.autoClearSearchValue&&this.clearInput()}}updateListOfCachedOption(){if(this.isSingleMode){const t=this.listOfTemplateOption.find(t=>this.compareWith(t.nzValue,this.listOfSelectedValue[0]));Object(s.R)(t)||(this.listOfCachedSelectedOption=[t])}else{const t=[];this.listOfSelectedValue.forEach(e=>{const n=[...this.listOfTagAndTemplateOption,...this.listOfCachedSelectedOption].find(t=>this.compareWith(t.nzValue,e));n&&t.push(n)}),this.listOfCachedSelectedOption=t}}updateListOfTagOption(){if(this.isTagsMode){const t=this.listOfSelectedValue.filter(t=>!this.listOfTemplateOption.find(e=>this.compareWith(e.nzValue,t)));this.listOfTagOption=t.map(t=>{const e=this.listOfCachedSelectedOption.find(e=>this.compareWith(e.nzValue,t));if(e)return e;{const e=new C;return e.nzValue=t,e.nzLabel=t,e}}),this.listOfTagAndTemplateOption=[...this.listOfTemplateOption.concat(this.listOfTagOption)]}else this.listOfTagAndTemplateOption=[...this.listOfTemplateOption]}updateAddTagOption(){const t=this.listOfTagAndTemplateOption.find(t=>t.nzLabel===this.searchValue);if(this.isTagsMode&&this.searchValue&&!t){const t=new C;t.nzValue=this.searchValue,t.nzLabel=this.searchValue,this.addedTagOption=t,this.updateActivatedOption(t)}else this.addedTagOption=null}updateListOfFilteredOption(){this.updateAddTagOption();const t=(new O).transform(this.listOfTagAndTemplateOption,this.searchValue,this.filterOption,this.serverSearch);this.listOfFilteredOption=this.addedTagOption?[this.addedTagOption,...t]:[...t],this.isShowNotFound=!this.isTagsMode&&!this.listOfFilteredOption.length}clearInput(){this.clearInput$.next()}updateListOfSelectedValue(t,e){this.listOfSelectedValueWithEmit$.next({value:t,emit:e})}updateActivatedOption(t){this.activatedOption$.next(t),this.activatedOption=t}tokenSeparate(t,e){if(t&&t.length&&e.length&&this.isMultipleOrTags&&this.includesSeparators(t,e)){const n=this.splitBySeparators(t,e);this.updateSelectedValueByLabelList(n),this.clearInput()}}includesSeparators(t,e){for(let n=0;n<e.length;++n)if(t.lastIndexOf(e[n])>0)return!0;return!1}splitBySeparators(t,e){const n=new RegExp(`[${e.join()}]`),r=t.split(n).filter(t=>t);return Array.from(new Set(r))}resetActivatedOptionIfNeeded(){this.activatedOption&&this.listOfFilteredOption.find(t=>this.compareWith(t.nzValue,this.activatedOption.nzValue))&&this.listOfSelectedValue.find(t=>this.compareWith(t,this.activatedOption.nzValue))||(()=>{const t=this.listOfFilteredOption.find(t=>this.compareWith(t.nzValue,this.listOfSelectedValue[0]));this.updateActivatedOption(t||null)})()}updateTemplateOption(t,e){this.mapOfTemplateOption$.next({listOfNzOptionComponent:t,listOfNzOptionGroupComponent:e})}updateSearchValue(t){this.searchValueRaw$.next(t)}updateSelectedValueByLabelList(t){const e=[...this.listOfSelectedValue],n=this.listOfTagAndTemplateOption.filter(e=>-1!==t.indexOf(e.nzLabel)).map(t=>t.nzValue).filter(t=>!Object(s.T)(this.listOfSelectedValue.find(e=>this.compareWith(e,t))));if(this.isMultipleMode)this.updateListOfSelectedValue([...e,...n],!0);else{const r=t.filter(t=>-1===this.listOfTagAndTemplateOption.map(t=>t.nzLabel).indexOf(t));this.updateListOfSelectedValue([...e,...n,...r],!0)}}onKeyDown(t){if(this.disabled)return;const e=t.keyCode,n=t.target,r=this.listOfFilteredOption.filter(t=>!t.nzDisabled),i=r.findIndex(t=>t===this.activatedOption);switch(e){case x.k:t.preventDefault(),this.updateActivatedOption(r[i>0?i-1:r.length-1]);break;case x.c:t.preventDefault(),this.updateActivatedOption(r[i<r.length-1?i+1:0]),this.disabled||this.open||this.setOpenState(!0);break;case x.d:t.preventDefault(),this.open?this.activatedOption&&!this.activatedOption.nzDisabled&&this.clickOption(this.activatedOption):this.setOpenState(!0);break;case x.b:this.isMultipleOrTags&&!n.value&&this.listOfCachedSelectedOption.length&&(t.preventDefault(),this.removeValueFormSelected(this.listOfCachedSelectedOption[this.listOfCachedSelectedOption.length-1]));break;case x.i:this.disabled||this.open||(this.setOpenState(!0),t.preventDefault());break;case x.j:this.setOpenState(!1)}}removeValueFormSelected(t){if(this.disabled||t.nzDisabled)return;const e=this.listOfSelectedValue.filter(e=>!this.compareWith(e,t.nzValue));this.updateListOfSelectedValue(e,!0),this.clearInput()}setOpenState(t){this.openRaw$.next(t),this.open=t}check(){this.checkRaw$.next()}get isSingleMode(){return"default"===this.mode}get isTagsMode(){return"tags"===this.mode}get isMultipleMode(){return"multiple"===this.mode}get isMultipleOrTags(){return"tags"===this.mode||"multiple"===this.mode}}class z{constructor(t,e,n,r){this.elementRef=t,this.nzSelectService=e,this.cdr=n,this.el=this.elementRef.nativeElement,this.selected=!1,this.active=!1,this.destroy$=new o.a,r.addClass(t.nativeElement,"ant-select-dropdown-menu-item")}clickOption(){this.nzSelectService.clickOption(this.nzOption)}ngOnInit(){this.nzSelectService.listOfSelectedValue$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.selected=Object(s.T)(t.find(t=>this.nzSelectService.compareWith(t,this.nzOption.nzValue))),this.cdr.markForCheck()}),this.nzSelectService.activatedOption$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.active=!!t&&this.nzSelectService.compareWith(t.nzValue,this.nzOption.nzValue),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}class P{constructor(t,e,n){this.nzSelectService=t,this.cdr=e,this.ngZone=n,this.destroy$=new o.a,this.lastScrollTop=0,this.nzScrollToBottom=new r.m}scrollIntoViewIfNeeded(t){setTimeout(()=>{if(this.listOfNzOptionLiComponent&&this.listOfNzOptionLiComponent.length&&t){const e=this.listOfNzOptionLiComponent.find(e=>this.nzSelectService.compareWith(e.nzOption.nzValue,t.nzValue));e&&e.el&&e.el.scrollIntoViewIfNeeded&&e.el.scrollIntoViewIfNeeded(!1)}})}trackLabel(t,e){return e.nzLabel}trackValue(t,e){return e.nzValue}ngOnInit(){this.nzSelectService.activatedOption$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.scrollIntoViewIfNeeded(t)}),this.nzSelectService.check$.pipe(Object(v.a)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()}),this.ngZone.runOutsideAngular(()=>{const t=this.dropdownUl.nativeElement;Object(h.a)(t,"scroll").pipe(Object(v.a)(this.destroy$)).subscribe(e=>{e.preventDefault(),e.stopPropagation(),t&&t.scrollTop>this.lastScrollTop&&t.scrollHeight<t.clientHeight+t.scrollTop+10&&(this.lastScrollTop=t.scrollTop,this.ngZone.run(()=>{this.nzScrollToBottom.emit()}))})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}class I{constructor(t,e,n,r){this.renderer=t,this.nzSelectService=e,this.cdr=n,this.noAnimation=r,this.isComposing=!1,this.destroy$=new o.a,this.nzShowSearch=!1,this.nzOpen=!1,this.nzAllowClear=!1,this.nzShowArrow=!0,this.nzLoading=!1,this.nzTokenSeparators=[]}onClearSelection(t){t.stopPropagation(),this.nzSelectService.updateListOfSelectedValue([],!0)}setInputValue(t){this.inputElement&&!t&&(this.inputElement.nativeElement.value=t),this.inputValue=t,this.updateWidth(),this.nzSelectService.updateSearchValue(t),this.nzSelectService.tokenSeparate(this.inputValue,this.nzTokenSeparators)}get placeHolderDisplay(){return this.inputValue||this.isComposing||this.nzSelectService.listOfSelectedValue.length?"none":"block"}get selectedValueStyle(){let t=!1,e=1;return this.nzShowSearch&&this.nzOpen?(t=!(this.inputValue||this.isComposing))&&(e=.4):t=!0,{display:t?"block":"none",opacity:`${e}`}}trackValue(t,e){return e.nzValue}updateWidth(){this.nzSelectService.isMultipleOrTags&&this.inputElement&&(this.inputValue||this.isComposing?this.renderer.setStyle(this.inputElement.nativeElement,"width",`${this.inputElement.nativeElement.scrollWidth}px`):this.renderer.removeStyle(this.inputElement.nativeElement,"width"))}removeSelectedValue(t,e){this.nzSelectService.removeValueFormSelected(t),e.stopPropagation()}ngOnInit(){this.nzSelectService.open$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.inputElement&&t&&setTimeout(()=>this.inputElement.nativeElement.focus())}),this.nzSelectService.clearInput$.pipe(Object(v.a)(this.destroy$)).subscribe(()=>{this.setInputValue("")}),this.nzSelectService.check$.pipe(Object(v.a)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}let M=(()=>{class t{constructor(t,e,n,i,s,l,a){this.renderer=t,this.nzSelectService=e,this.cdr=n,this.focusMonitor=i,this.platform=s,this.noAnimation=a,this.open=!1,this.onChange=()=>null,this.onTouched=()=>null,this.dropDownPosition="bottom",this._disabled=!1,this._autoFocus=!1,this.isInit=!1,this.destroy$=new o.a,this.nzOnSearch=new r.m,this.nzScrollToBottom=new r.m,this.nzOpenChange=new r.m,this.nzBlur=new r.m,this.nzFocus=new r.m,this.nzSize="default",this.nzDropdownMatchSelectWidth=!0,this.nzAllowClear=!1,this.nzShowSearch=!1,this.nzLoading=!1,this.nzShowArrow=!0,this.nzTokenSeparators=[],t.addClass(l.nativeElement,"ant-select")}set nzAutoClearSearchValue(t){this.nzSelectService.autoClearSearchValue=Object(s.mb)(t)}set nzMaxMultipleCount(t){this.nzSelectService.maxMultipleCount=t}set nzServerSearch(t){this.nzSelectService.serverSearch=Object(s.mb)(t)}set nzMode(t){this.nzSelectService.mode=t,this.nzSelectService.check()}set nzFilterOption(t){this.nzSelectService.filterOption=t}set compareWith(t){this.nzSelectService.compareWith=t}set nzAutoFocus(t){this._autoFocus=Object(s.mb)(t),this.updateAutoFocus()}get nzAutoFocus(){return this._autoFocus}set nzOpen(t){this.open=t,this.nzSelectService.setOpenState(t)}set nzDisabled(t){this._disabled=Object(s.mb)(t),this.nzSelectService.disabled=this._disabled,this.nzSelectService.check(),this.nzDisabled&&this.isInit&&this.closeDropDown()}get nzDisabled(){return this._disabled}updateAutoFocus(){this.nzSelectTopControlComponent.inputElement&&(this.nzAutoFocus?this.renderer.setAttribute(this.nzSelectTopControlComponent.inputElement.nativeElement,"autofocus","autofocus"):this.renderer.removeAttribute(this.nzSelectTopControlComponent.inputElement.nativeElement,"autofocus"))}focus(){this.nzSelectTopControlComponent.inputElement&&(this.focusMonitor.focusVia(this.nzSelectTopControlComponent.inputElement,"keyboard"),this.nzFocus.emit())}blur(){this.nzSelectTopControlComponent.inputElement&&(this.nzSelectTopControlComponent.inputElement.nativeElement.blur(),this.nzBlur.emit())}onKeyDown(t){this.nzSelectService.onKeyDown(t)}toggleDropDown(){this.nzDisabled||this.nzSelectService.setOpenState(!this.open)}closeDropDown(){this.nzSelectService.setOpenState(!1)}onPositionChange(t){this.dropDownPosition=t.connectionPair.originY}updateCdkConnectedOverlayStatus(){this.platform.isBrowser&&(this.triggerWidth=this.cdkOverlayOrigin.elementRef.nativeElement.getBoundingClientRect().width)}updateCdkConnectedOverlayPositions(){setTimeout(()=>{this.cdkConnectedOverlay&&this.cdkConnectedOverlay.overlayRef&&this.cdkConnectedOverlay.overlayRef.updatePosition()})}writeValue(t){this.value=t;let e=[];Object(s.T)(t)&&(e=Array.isArray(t)?t:[t]),this.nzSelectService.updateListOfSelectedValue(e,!1),this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.nzDisabled=t,this.cdr.markForCheck()}ngOnInit(){this.nzSelectService.searchValue$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.nzOnSearch.emit(t),this.updateCdkConnectedOverlayPositions()}),this.nzSelectService.modelChange$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.value!==t&&(this.value=t,this.onChange(this.value),this.updateCdkConnectedOverlayPositions())}),this.nzSelectService.open$.pipe(Object(v.a)(this.destroy$)).subscribe(t=>{this.open!==t&&this.nzOpenChange.emit(t),t?(this.focus(),this.updateCdkConnectedOverlayStatus()):(this.blur(),this.onTouched()),this.open=t,this.nzSelectService.clearInput()}),this.nzSelectService.check$.pipe(Object(v.a)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngAfterViewInit(){this.updateCdkConnectedOverlayStatus(),this.isInit=!0}ngAfterContentInit(){this.listOfNzOptionGroupComponent.changes.pipe(Object(_.a)(!0),Object(w.a)(()=>Object(c.a)(this.listOfNzOptionGroupComponent.changes,this.listOfNzOptionComponent.changes,...this.listOfNzOptionComponent.map(t=>t.changes),...this.listOfNzOptionGroupComponent.map(t=>t.listOfNzOptionComponent?t.listOfNzOptionComponent.changes:d.a)).pipe(Object(_.a)(!0)))).subscribe(()=>{this.nzSelectService.updateTemplateOption(this.listOfNzOptionComponent.toArray(),this.listOfNzOptionGroupComponent.toArray())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzAllowClear",void 0),Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzShowSearch",void 0),Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzLoading",void 0),t})();class D{}class A{}},jtHE:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n("XNiG"),i=n("qgXg"),s=n("quSY"),o=n("pxpQ"),l=n("9ppp"),a=n("Ylt2");class u extends r.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new c(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let u;if(this.closed)throw new l.a;if(this.isStopped||this.hasError?u=s.a.EMPTY:(this.observers.push(t),u=new a.a(this,t)),r&&t.add(t=new o.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),u}_getNow(){return(this.scheduler||i.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class c{constructor(t,e){this.time=t,this.value=e}}},jvIg:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{transform(t){if(t){const e=0|t;return`${e/60|0}:${(e%60).toString().padStart(2,"0")}`}return"00:00"}}},jz81:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SDxy"),s=n("KcsS"),o=n("iInd"),l=n("d5e7"),a=n("ROAe"),u=n("SVse"),c=n("C6bk"),h=n("mKz/"),d=n("ssPz"),p=n("XPT/"),f=n("1w6q"),g=n("JXeA"),m=n("DQLy");n.d(e,"a",function(){return x});var b=r.rb({encapsulation:0,styles:[[".user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]{padding:40px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]{margin-bottom:40px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-pr[_ngcontent-%COMP%]{float:left;width:188px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-pr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:3px;background:#fff;border:1px solid #d5d5d5}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]{float:right;width:670px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding-bottom:12px;margin-bottom:10px;border-bottom:1px solid #d3d3d3}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .tit[_ngcontent-%COMP%]{display:block;float:left;margin-top:3px;font-size:22px;line-height:30px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]{float:left;margin:8px 0 0 10px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]   .u-icn2[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;vertical-align:middle;background:url(icon2.ba32baac609d90c1c671.png) 0 9999px no-repeat}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]   .u-lv[_ngcontent-%COMP%]{height:17px;padding-left:25px;line-height:18px;color:#999;font-weight:700;font-style:italic;background-position:-130px -64px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .lv[_ngcontent-%COMP%]   .u-lv[_ngcontent-%COMP%]   .lvright[_ngcontent-%COMP%]{float:right;width:8px;height:17px;background-position:-192px -64px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .icn-gender[_ngcontent-%COMP%]{float:left;margin:9px 0 0 8px;display:inline-block;width:20px;height:20px;background:url(icon.29cd8439e24c97d0d553.png) -41px -57px no-repeat;cursor:pointer;overflow:hidden}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]{margin-bottom:20px;color:#666}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;height:40px;padding:0 18px;border-right:1px solid #e4e4e4}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li.fst[_ngcontent-%COMP%]{padding-left:0}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li.lst[_ngcontent-%COMP%]{padding-right:0;border-right:none}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;max-width:40px;font-size:20px;font-weight:400}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .dny[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:2px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .m-proifo[_ngcontent-%COMP%]   .f-r[_ngcontent-%COMP%]   .inf[_ngcontent-%COMP%]{margin-bottom:5px;line-height:21px;color:#989898}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .look-more[_ngcontent-%COMP%]{display:block;margin-top:10px;text-align:right}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .sheets[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]{margin-top:15px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .sheets[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .sheet-item[_ngcontent-%COMP%]{float:left;width:140px;height:204px;margin-right:49.5px}.user-center[_ngcontent-%COMP%]   .page-wrap[_ngcontent-%COMP%]   .sheets[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .sheet-item[_ngcontent-%COMP%]:nth-of-type(5n){margin-right:0}"]],data:{}});function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"app-single-sheet",[["class","sheet-item"]],null,[[null,"onPlay"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,2).onClick()&&i),"onPlay"===e&&(i=!1!==s.onPlaySheet(n)&&i),i},i.b,i.a)),r.sb(1,114688,null,0,s.a,[],{sheet:[0,"sheet"]},{onPlay:"onPlay"}),r.sb(2,16384,null,0,o.o,[o.n,o.a,[8,null],r.D,r.k],{routerLink:[0,"routerLink"]},null),r.Gb(3,2)],function(t,e){t(e,1,0,e.context.$implicit);var n=t(e,3,0,"/sheetInfo",e.context.$implicit.id);t(e,2,0,n)},null)}function v(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"app-single-sheet",[["class","sheet-item"]],null,[[null,"onPlay"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,2).onClick()&&i),"onPlay"===e&&(i=!1!==s.onPlaySheet(n)&&i),i},i.b,i.a)),r.sb(1,114688,null,0,s.a,[],{sheet:[0,"sheet"]},{onPlay:"onPlay"}),r.sb(2,16384,null,0,o.o,[o.n,o.a,[8,null],r.D,r.k],{routerLink:[0,"routerLink"]},null),r.Gb(3,2)],function(t,e){t(e,1,0,e.context.$implicit);var n=t(e,3,0,"/sheetInfo",e.context.$implicit.id);t(e,2,0,n)},null)}function _(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,58,"div",[["class","user-center wrap feature-wrap"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,57,"div",[["class","page-wrap"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,30,"div",[["class","m-proifo clearfix"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"div",[["class","f-pr"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(t()(),r.tb(5,0,null,null,27,"div",[["class","f-r"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,8,"div",[["class","name"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,7,"h2",[["class","clearfix"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,1,"span",[["class","tit ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(9,null,["",""])),(t()(),r.tb(10,0,null,null,3,"p",[["class","lv"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,2,"span",[["class","u-lv u-icn2"]],null,null,null,null,null)),(t()(),r.Nb(12,null,[" ",""])),(t()(),r.tb(13,0,null,null,0,"i",[["class","lvright u-icn2"]],null,null,null,null,null)),(t()(),r.tb(14,0,null,null,0,"div",[["class","icn-gender"]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,15,"ul",[["class","dny clearfix"]],null,null,null,null,null)),(t()(),r.tb(16,0,null,null,4,"li",[["class","fst"]],null,null,null,null,null)),(t()(),r.tb(17,0,null,null,1,"strong",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(18,null,["",""])),(t()(),r.tb(19,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u52a8\u6001"])),(t()(),r.tb(21,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),r.tb(22,0,null,null,1,"strong",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(23,null,["",""])),(t()(),r.tb(24,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u5173\u6ce8"])),(t()(),r.tb(26,0,null,null,4,"li",[["class","lst"]],null,null,null,null,null)),(t()(),r.tb(27,0,null,null,1,"strong",[["class","ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(28,null,["",""])),(t()(),r.tb(29,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u7c89\u4e1d"])),(t()(),r.tb(31,0,null,null,1,"div",[["class","inf f-brk"]],null,null,null,null,null)),(t()(),r.Nb(32,null,["",""])),(t()(),r.tb(33,0,null,null,1,"app-records",[],null,[[null,"onChangeType"],[null,"onAddSong"],[null,"onLikeSong"],[null,"onShareSong"]],function(t,e,n){var r=!0,i=t.component;return"onChangeType"===e&&(r=!1!==i.onChangeType(n)&&r),"onAddSong"===e&&(r=!1!==i.onAddSong(n)&&r),"onLikeSong"===e&&(r=!1!==i.onLikeSong(n)&&r),"onShareSong"===e&&(r=!1!==i.onShareSong(n)&&r),r},l.b,l.a)),r.sb(34,114688,null,0,a.a,[],{records:[0,"records"],recordType:[1,"recordType"],listenSongs:[2,"listenSongs"],currentIndex:[3,"currentIndex"]},{onChangeType:"onChangeType",onAddSong:"onAddSong",onLikeSong:"onLikeSong",onShareSong:"onShareSong"}),(t()(),r.tb(35,0,null,null,3,"a",[["class","look-more"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,36).onClick(n.button,n.ctrlKey,n.metaKey,n.shiftKey)&&i),i},null,null)),r.sb(36,671744,null,0,o.p,[o.n,o.a,u.i],{routerLink:[0,"routerLink"]},null),r.Gb(37,2),(t()(),r.Nb(-1,null,["\u67e5\u770b\u66f4\u591a>"])),(t()(),r.tb(39,0,null,null,9,"div",[["class","wy-sec sheets"]],null,null,null,null,null)),(t()(),r.tb(40,0,null,null,5,"div",[["class","u-title wy-sec-wrap clearfix"]],null,null,null,null,null)),(t()(),r.tb(41,0,null,null,4,"h3",[["class","wy-sec-tit"]],null,null,null,null,null)),(t()(),r.tb(42,0,null,null,1,"span",[["class","f-ff2"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6211\u521b\u5efa\u7684\u6b4c\u5355"])),(t()(),r.tb(44,0,null,null,1,"span",[["class","sub s-fc3"]],null,null,null,null,null)),(t()(),r.Nb(45,null,["",""])),(t()(),r.tb(46,0,null,null,2,"div",[["class","sheet-list clearfix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(48,278528,null,0,u.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(49,0,null,null,9,"div",[["class","wy-sec sheets"]],null,null,null,null,null)),(t()(),r.tb(50,0,null,null,5,"div",[["class","u-title wy-sec-wrap clearfix"]],null,null,null,null,null)),(t()(),r.tb(51,0,null,null,4,"h3",[["class","wy-sec-tit"]],null,null,null,null,null)),(t()(),r.tb(52,0,null,null,1,"span",[["class","f-ff2"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6211\u6536\u85cf\u7684\u6b4c\u5355"])),(t()(),r.tb(54,0,null,null,1,"span",[["class","sub s-fc3"]],null,null,null,null,null)),(t()(),r.Nb(55,null,["",""])),(t()(),r.tb(56,0,null,null,2,"div",[["class","sheet-list clearfix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,v)),r.sb(58,278528,null,0,u.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,34,0,n.records,n.recordType,n.user.listenSongs,n.currentIndex);var r=t(e,37,0,"/records",n.user.profile.userId);t(e,36,0,r),t(e,48,0,n.userSheet.self),t(e,58,0,n.userSheet.subscribed)},function(t,e){var n=e.component;t(e,4,0,n.user.profile.avatarUrl,n.user.profile.nickname),t(e,9,0,n.user.profile.nickname),t(e,12,0,n.user.level),t(e,18,0,n.user.profile.eventCount),t(e,23,0,n.user.profile.follows),t(e,28,0,n.user.profile.followeds),t(e,32,0,n.user.profile.signature),t(e,35,0,r.Fb(e,36).target,r.Fb(e,36).href),t(e,45,0,n.userSheet.self.length),t(e,55,0,n.userSheet.subscribed.length)})}function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-center",[],null,null,null,_,b)),r.sb(1,245760,null,0,c.a,[o.a,h.a,d.a,p.a,f.a,d.a,g.g,m.m,r.h],null,null)],function(t,e){t(e,1,0)},null)}var x=r.pb("app-center",c.a,w,{},{},[])},kC7l:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getTime()}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},kOWh:function(t,e){var n=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];t.exports=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);var i=n.concat(e).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")}},kRN8:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setSeconds(i),n}},kS4m:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return d});var r=n("mrSG"),i=n("XNiG"),s=n("VRyK"),o=n("5VGP"),l=n("JX91"),a=n("1G5W");let u=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.renderer=e,this.cdr=n,this.focusMonitor=r,this.select$=new i.a,this.touched$=new i.a,this.checked=!1,this.isNgModel=!1,this.onChange=()=>null,this.onTouched=()=>null,this.nzDisabled=!1,this.nzAutoFocus=!1,this.renderer.addClass(t.nativeElement,"ant-radio-wrapper")}updateAutoFocus(){this.inputElement&&(this.nzAutoFocus?this.renderer.setAttribute(this.inputElement.nativeElement,"autofocus","autofocus"):this.renderer.removeAttribute(this.inputElement.nativeElement,"autofocus"))}onClick(t){t.stopPropagation(),t.preventDefault(),this.nzDisabled||this.checked||(this.select$.next(this),this.isNgModel&&(this.checked=!0,this.onChange(!0)))}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}markForCheck(){this.cdr.markForCheck()}setDisabledState(t){this.nzDisabled=t,this.cdr.markForCheck()}writeValue(t){this.checked=t,this.cdr.markForCheck()}registerOnChange(t){this.isNgModel=!0,this.onChange=t}registerOnTouched(t){this.onTouched=t}ngAfterViewInit(){this.focusMonitor.monitor(this.elementRef,!0).subscribe(t=>{t||(Promise.resolve().then(()=>this.onTouched()),this.touched$.next())}),this.updateAutoFocus()}ngOnChanges(t){t.nzAutoFocus&&this.updateAutoFocus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef)}}return Object(r.__decorate)([Object(o.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(r.__decorate)([Object(o.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzAutoFocus",void 0),t})();class c extends u{constructor(t,e,n,r){super(t,e,n,r),e.removeClass(t.nativeElement,"ant-radio-wrapper"),e.addClass(t.nativeElement,"ant-radio-button-wrapper")}}let h=(()=>{class t{constructor(t,e,n){this.cdr=t,this.destroy$=new i.a,this.onChange=()=>null,this.onTouched=()=>null,this.nzButtonStyle="outline",this.nzSize="default",e.addClass(n.nativeElement,"ant-radio-group")}updateChildrenStatus(){this.radios&&Promise.resolve().then(()=>{this.radios.forEach(t=>{t.checked=t.nzValue===this.value,Object(o.T)(this.nzDisabled)&&(t.nzDisabled=this.nzDisabled),this.nzName&&(t.name=this.nzName),t.markForCheck()})})}ngAfterContentInit(){this.radios.changes.pipe(Object(l.a)(null),Object(a.a)(this.destroy$)).subscribe(()=>{this.updateChildrenStatus(),this.selectSubscription&&this.selectSubscription.unsubscribe(),this.selectSubscription=Object(s.a)(...this.radios.map(t=>t.select$)).pipe(Object(a.a)(this.destroy$)).subscribe(t=>{this.value!==t.nzValue&&(this.value=t.nzValue,this.updateChildrenStatus(),this.onChange(this.value))}),this.touchedSubscription&&this.touchedSubscription.unsubscribe(),this.touchedSubscription=Object(s.a)(...this.radios.map(t=>t.touched$)).pipe(Object(a.a)(this.destroy$)).subscribe(()=>{Promise.resolve().then(()=>this.onTouched())})})}ngOnChanges(t){(t.nzDisabled||t.nzName)&&this.updateChildrenStatus()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}writeValue(t){this.value=t,this.updateChildrenStatus(),this.cdr.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.nzDisabled=t,this.cdr.markForCheck()}}return Object(r.__decorate)([Object(o.g)(),Object(r.__metadata)("design:type",Boolean)],t.prototype,"nzDisabled",void 0),t})();class d{}},kujU:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return o}),n.d(e,"a",function(){return l}),n.d(e,"d",function(){return a});var r=n("DQLy");const i=Object(r.s)("[member] Set modal visible",Object(r.y)()),s=Object(r.s)("[member] Set modal type",Object(r.y)()),o=Object(r.s)("[member] Set user id",Object(r.y)()),l=Object(r.s)("[member] Set like id",Object(r.y)()),a=Object(r.s)("[member] Set share info",Object(r.y)())},l0SJ:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setHours(23,59,59,999),e}},l5mm:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("D0XW"),s=n("Y7HM");function o(t=0,e=i.a){return(!Object(s.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=i.a),new r.a(n=>(n.add(e.schedule(l,t,{subscriber:n,counter:0,period:t})),n))}function l(t){const{subscriber:e,counter:n,period:r}=t;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}},"l6+5":function(t,e,n){var r=n("L/99");t.exports=function(t){return r(new Date,t)}},l7GE:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lAiz:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n("8Y7J"),n("5VGP"),n("mrSG"),n("XNiG"),n("1G5W");class r{}class i{}},lCuP:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return e.setDate(1),e.setHours(0,0,0,0),e}},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},lTB2:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setMonth(0),n.setDate(i),n}},lX9Q:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=Number(e);return n.setDate(i),n}},leoV:function(t,e,n){var r=n("yNUO");t.exports=function(){var t=Array.prototype.slice.call(arguments).map(function(t){return r(t)}),e=Math.max.apply(null,t);return new Date(e)}},lwZq:function(t,e,n){var r=n("yNUO"),i=n("RJeW"),s=n("1CCG");t.exports=function(t,e){var n=r(t),o=Number(e),l=s(n,i(n)),a=new Date(0);return a.setFullYear(o,0,4),a.setHours(0,0,0,0),(n=i(a)).setDate(n.getDate()+l),n}},"m0v+":function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},m12A:function(t,e,n){"use strict";var r=n("Q1FS"),i=n("zB/H"),s=n("Z5tI");e.fromPromise=function(t,e){return new r.Observable(e?function(n){var r=new i.Subscription;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}:s.subscribeToPromise(t))}},m7nI:function(t,e,n){var r=n("WmBB");t.exports=function(t){return r(new Date,t)}},mCNh:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return s});var r=n("KqfI");function i(...t){return s(t)}function s(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:r.a}},mFHc:function(t,e){var n,r,i,s,o=t.exports=o||{};o.color=o.color||{},o.utils=o.utils||{},o.utils.common=(n=Array.prototype.forEach,r=Array.prototype.slice,{BREAK:{},extend:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(n&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){for(var i=0,s=t.length;i<s;i++)if(i in t&&e.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(e.call(r,t[i],i)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}),o.color.toString=(i=o.utils.common,function(t){if(1==t.a||i.isUndefined(t.a)){for(var e=t.hex.toString(16);e.length<6;)e="0"+e;return"#"+e}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}),o.Color=o.color.Color=function(t,e,n,r){var i=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function s(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(l(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(l(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(a(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function l(t,n,i){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}return i.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(i.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),s(i.prototype,"r",2),s(i.prototype,"g",1),s(i.prototype,"b",0),o(i.prototype,"h"),o(i.prototype,"s"),o(i.prototype,"v"),Object.defineProperty(i.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(i.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),i}(o.color.interpret=function(t,e){var n,r,i=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(i,function(i){if(i.litmus(t))return e.each(i.conversions,function(i,s){if(n=i.read(t),!1===r&&!1!==n)return r=n,n.conversionName=s,n.conversion=i,e.BREAK}),e.BREAK}),r}}(o.color.toString,o.utils.common),o.color.math={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,i=t/60-Math.floor(t/60),s=n*(1-e),o=n*(1-i*e),l=n*(1-(1-i)*e),a=[[n,l,s],[o,n,s],[s,n,l],[s,o,n],[l,s,n],[n,s,o]][r];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(t,e,n){var r,i=Math.min(t,e,n),s=Math.max(t,e,n),o=s-i;return 0==s?{h:NaN,s:0,v:0}:(r=t==s?(e-n)/o:e==s?2+(n-t)/o:4+(t-e)/o,(r/=6)<0&&(r+=1),{h:360*r,s:o/s,v:s/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(s=8*e)|t&~(255<<s)}},o.color.toString,o.utils.common)},"mKz/":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("IheW"),i=n("yrbL"),s=n("cr+I"),o=n.n(s),l=n("8Y7J"),a=n("334H"),u=n("1w6q");let c=(()=>{class t{constructor(t,e,n){this.http=t,this.uri=e,this.songServe=n}getSheets(t){const e=new r.i({fromString:o.a.stringify(t)});return this.http.get(this.uri+"top/playlist",{params:e}).pipe(Object(i.map)(t=>t))}getSongSheetDetail(t){const e=(new r.i).set("id",t.toString());return this.http.get(this.uri+"playlist/detail",{params:e}).pipe(Object(i.map)(t=>t.playlist))}playSheet(t){return this.getSongSheetDetail(t).pipe(Object(i.pluck)("tracks"),Object(i.switchMap)(t=>this.songServe.getSongList(t)))}}return t.ngInjectableDef=l.Tb({factory:function(){return new t(l.Ub(r.c),l.Ub(a.a),l.Ub(u.a))},token:t,providedIn:a.b}),t})()},mW00:function(t,e,n){"use strict";n.d(e,"a",function(){return g}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return b}),n.d(e,"d",function(){return f});var r=n("zMNK"),i=n("8Y7J"),s=n("2Vo4"),o=n("quSY"),l=n("XNiG"),a=n("5VGP"),u=n("1G5W");const c=new i.p("nz-empty-content"),h=new i.p("nz-empty-component-name"),d="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTg0IiBoZWlnaHQ9IjE1MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI0IDMxLjY3KSI+PGVsbGlwc2UgZmlsbC1vcGFjaXR5PSIuOCIgZmlsbD0iI0Y1RjVGNyIgY3g9IjY3Ljc5NyIgY3k9IjEwNi44OSIgcng9IjY3Ljc5NyIgcnk9IjEyLjY2OCIvPjxwYXRoIGQ9Ik0xMjIuMDM0IDY5LjY3NEw5OC4xMDkgNDAuMjI5Yy0xLjE0OC0xLjM4Ni0yLjgyNi0yLjIyNS00LjU5My0yLjIyNWgtNTEuNDRjLTEuNzY2IDAtMy40NDQuODM5LTQuNTkyIDIuMjI1TDEzLjU2IDY5LjY3NHYxNS4zODNoMTA4LjQ3NVY2OS42NzR6IiBmaWxsPSIjQUVCOEMyIi8+PHBhdGggZD0iTTEwMS41MzcgODYuMjE0TDgwLjYzIDYxLjEwMmMtMS4wMDEtMS4yMDctMi41MDctMS44NjctNC4wNDgtMS44NjdIMzEuNzI0Yy0xLjU0IDAtMy4wNDcuNjYtNC4wNDggMS44NjdMNi43NjkgODYuMjE0djEzLjc5Mmg5NC43NjhWODYuMjE0eiIgZmlsbD0idXJsKCNsaW5lYXJHcmFkaWVudC0xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMuNTYpIi8+PHBhdGggZD0iTTMzLjgzIDBoNjcuOTMzYTQgNCAwIDAgMSA0IDR2OTMuMzQ0YTQgNCAwIDAgMS00IDRIMzMuODNhNCA0IDAgMCAxLTQtNFY0YTQgNCAwIDAgMSA0LTR6IiBmaWxsPSIjRjVGNUY3Ii8+PHBhdGggZD0iTTQyLjY3OCA5Ljk1M2g1MC4yMzdhMiAyIDAgMCAxIDIgMlYzNi45MWEyIDIgMCAwIDEtMiAySDQyLjY3OGEyIDIgMCAwIDEtMi0yVjExLjk1M2EyIDIgMCAwIDEgMi0yek00Mi45NCA0OS43NjdoNDkuNzEzYTIuMjYyIDIuMjYyIDAgMSAxIDAgNC41MjRINDIuOTRhMi4yNjIgMi4yNjIgMCAwIDEgMC00LjUyNHpNNDIuOTQgNjEuNTNoNDkuNzEzYTIuMjYyIDIuMjYyIDAgMSAxIDAgNC41MjVINDIuOTRhMi4yNjIgMi4yNjIgMCAwIDEgMC00LjUyNXpNMTIxLjgxMyAxMDUuMDMyYy0uNzc1IDMuMDcxLTMuNDk3IDUuMzYtNi43MzUgNS4zNkgyMC41MTVjLTMuMjM4IDAtNS45Ni0yLjI5LTYuNzM0LTUuMzZhNy4zMDkgNy4zMDkgMCAwIDEtLjIyMi0xLjc5VjY5LjY3NWgyNi4zMThjMi45MDcgMCA1LjI1IDIuNDQ4IDUuMjUgNS40MnYuMDRjMCAyLjk3MSAyLjM3IDUuMzcgNS4yNzcgNS4zN2gzNC43ODVjMi45MDcgMCA1LjI3Ny0yLjQyMSA1LjI3Ny01LjM5M1Y3NS4xYzAtMi45NzIgMi4zNDMtNS40MjYgNS4yNS01LjQyNmgyNi4zMTh2MzMuNTY5YzAgLjYxNy0uMDc3IDEuMjE2LS4yMjEgMS43ODl6IiBmaWxsPSIjRENFMEU2Ii8+PC9nPjxwYXRoIGQ9Ik0xNDkuMTIxIDMzLjI5MmwtNi44MyAyLjY1YTEgMSAwIDAgMS0xLjMxNy0xLjIzbDEuOTM3LTYuMjA3Yy0yLjU4OS0yLjk0NC00LjEwOS02LjUzNC00LjEwOS0xMC40MDhDMTM4LjgwMiA4LjEwMiAxNDguOTIgMCAxNjEuNDAyIDAgMTczLjg4MSAwIDE4NCA4LjEwMiAxODQgMTguMDk3YzAgOS45OTUtMTAuMTE4IDE4LjA5Ny0yMi41OTkgMTguMDk3LTQuNTI4IDAtOC43NDQtMS4wNjYtMTIuMjgtMi45MDJ6IiBmaWxsPSIjRENFMEU2Ii8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ5LjY1IDE1LjM4MykiIGZpbGw9IiNGRkYiPjxlbGxpcHNlIGN4PSIyMC42NTQiIGN5PSIzLjE2NyIgcng9IjIuODQ5IiByeT0iMi44MTUiLz48cGF0aCBkPSJNNS42OTggNS42M0gwTDIuODk4LjcwNHpNOS4yNTkuNzA0aDQuOTg1VjUuNjNIOS4yNTl6Ii8+PC9nPjwvZz48L3N2Zz4=",p="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNjRweCIgaGVpZ2h0PSI0MXB4IiB2aWV3Qm94PSIwIDAgNjQgNDEiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUyLjUgKDY3NDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NzIuMDAwMDAwLCAtMTMzNS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY0LjAwMDAwMCwgMTExNC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0MC4wMDAwMDAsIDc4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgICAgIDxnICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNjguMDAwMDAwLCAxNDQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxnID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxlbGxpcHNlICBmaWxsPSIjRjVGNUY1IiBjeD0iMzIiIGN5PSIzMyIgcng9IjMyIiByeT0iNyI+PC9lbGxpcHNlPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGcgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5LjAwMDAwMCwgMC4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHN0cm9rZT0iI0Q5RDlEOSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQ2LDEyLjc2MDU2MDQgTDM1Ljg1NDMwNDcsMS4yNTczOTYzMyBDMzUuMzY3NDQxNCwwLjQ3MzgyNjYwNSAzNC42NTU4Nzg5LDAgMzMuOTA2NzYxNywwIEwxMi4wOTMyMzgzLDAgQzExLjM0NDEyMTEsMCAxMC42MzI1NTg2LDAuNDczOTUwMjU1IDEwLjE0NTY5NTMsMS4yNTczOTYzMyBMMi42MTQ3OTcyN2UtMTIsMTIuNzYwNTYwNCBMMCwyMiBMNDYsMjIgTDQ2LDEyLjc2MDU2MDQgWiIgID48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTMyLjYxMzI4MTMsMTUuOTMxNSBDMzIuNjEzMjgxMywxNC4zMjU4NTExIDMzLjYwNjk1MzEsMTMuMDAwMjM0IDM0LjgzOTY5OTIsMTMgTDQ2LDEzIEw0NiwzMS4xMzcxMjc3IEM0NiwzMy4yNTg5NTc0IDQ0LjY3OTM4NjcsMzUgNDMuMDUwNDI5NywzNSBMMi45NDk1NzAzMSwzNSBDMS4zMjA1MjM0NCwzNSAwLDMzLjI1ODg0MDQgMCwzMS4xMzcxMjc3IEwwLDEzIEwxMS4xNjAzMDA4LDEzIEMxMi4zOTMwNDY5LDEzIDEzLjM4NjcxODgsMTQuMzIyODA4NSAxMy4zODY3MTg4LDE1LjkyODQ1NzQgTDEzLjM4NjcxODgsMTUuOTQ5NjM4MyBDMTMuMzg2NzE4OCwxNy41NTUyODcyIDE0LjM5MTcxMDksMTguODUxMTgwOSAxNS42MjQ0NTcsMTguODUxMTgwOSBMMzAuMzc1NTQzLDE4Ljg1MTE4MDkgQzMxLjYwODI4OTEsMTguODUxMTgwOSAzMi42MTMyODEzLDE3LjU0MzM1MTEgMzIuNjEzMjgxMywxNS45Mzc3MDIxIEwzMi42MTMyODEzLDE1LjkzMTUgWiIgIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+";let f=(()=>{class t{constructor(t){this.defaultEmptyContent=t,this.userDefaultContent$=new s.a(void 0),this.defaultEmptyContent&&this.userDefaultContent$.next(this.defaultEmptyContent)}setDefaultContent(t){if(!("string"==typeof t||null==t||t instanceof i.L||t instanceof i.N))throw new Error(`${a.C} 'useDefaultContent' expect 'string', 'templateRef' or 'component' but get ${t}.`);this.userDefaultContent$.next(t)}resetDefault(){this.userDefaultContent$.next(void 0)}}return t.ngInjectableDef=Object(i.Tb)({factory:function(){return new t(Object(i.Ub)(c,8))},token:t,providedIn:"root"}),t})();class g{constructor(t,e,n,r,i){this.emptyService=t,this.sanitizer=e,this.viewContainerRef=n,this.cdr=r,this.injector=i,this.contentType="string",this.defaultSvg=this.sanitizer.bypassSecurityTrustResourceUrl(p),this.size="",this.subs_=new o.a}ngOnChanges(t){t.nzComponentName&&(this.size=this.getEmptySize(t.nzComponentName.currentValue)),t.specificContent&&!t.specificContent.isFirstChange()&&(this.content=t.specificContent.currentValue,this.renderEmpty())}ngOnInit(){const t=this.emptyService.userDefaultContent$.subscribe(t=>{this.content=this.specificContent||t,this.renderEmpty()});this.subs_.add(t)}ngOnDestroy(){this.subs_.unsubscribe()}getEmptySize(t){switch(t){case"table":case"list":return"normal";case"select":case"tree-select":case"cascader":case"transfer":return"small";default:return""}}renderEmpty(){const t=this.content;if("string"==typeof t)this.contentType="string";else if(t instanceof i.L){const e={$implicit:this.nzComponentName};this.contentType="template",this.contentPortal=new r.f(t,this.viewContainerRef,e)}else if(t instanceof i.N){const e=new WeakMap([[h,this.nzComponentName]]),n=new r.d(this.injector,e);this.contentType="component",this.contentPortal=new r.b(t,this.viewContainerRef,n)}else this.contentType="string",this.contentPortal=void 0;this.cdr.markForCheck()}}class m{constructor(t,e,n){this.sanitizer=t,this.i18n=e,this.cdr=n,this.defaultSvg=this.sanitizer.bypassSecurityTrustResourceUrl(d),this.isContentString=!1,this.locale={},this.destroy$=new l.a}get shouldRenderContent(){const t=this.nzNotFoundContent;return!(!t&&"string"!=typeof t)}ngOnChanges(t){const{nzNotFoundContent:e}=t;e&&(this.isContentString="string"==typeof e.currentValue)}ngOnInit(){this.i18n.localeChange.pipe(Object(u.a)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Empty"),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}class b{}},mbIT:function(t,e,n){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},mlxB:function(t,e,n){"use strict";function r(t){return t instanceof Date&&!isNaN(+t)}n.d(e,"a",function(){return r})},mqoM:function(t,e,n){var r=n("Q5nM");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return s}),n.d(e,"__rest",function(){return o}),n.d(e,"__decorate",function(){return l}),n.d(e,"__param",function(){return a}),n.d(e,"__metadata",function(){return u}),n.d(e,"__awaiter",function(){return c}),n.d(e,"__generator",function(){return h}),n.d(e,"__exportStar",function(){return d}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return f}),n.d(e,"__spread",function(){return g}),n.d(e,"__spreadArrays",function(){return m}),n.d(e,"__await",function(){return b}),n.d(e,"__asyncGenerator",function(){return y}),n.d(e,"__asyncDelegator",function(){return v}),n.d(e,"__asyncValues",function(){return _}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return x}),n.d(e,"__importDefault",function(){return C});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function l(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function a(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(t){try{a(r.next(t))}catch(e){s(e)}}function l(t){try{a(r.throw(t))}catch(e){s(e)}}function a(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,l)}a((r=r.apply(t,e||[])).next())})}function h(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(l){s=[6,l],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function d(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(l){i={error:l}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var s=arguments[e],o=0,l=s.length;o<l;o++,i++)r[i]=s[o];return r}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){s.push([t,e,n,r])>1||l(t,e)})})}function l(t,e){try{(n=i[t](e)).value instanceof b?Promise.resolve(n.value.v).then(a,u):c(s[0][2],n)}catch(r){c(s[0][3],r)}var n}function a(t){l("next",t)}function u(t){l("throw",t)}function c(t,e){t(e),s.shift(),s.length&&l(s[0][0],s[0][1])}}function v(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}},mthE:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t).getDay();return 0===e||6===e}},n3uD:function(t,e,n){"use strict";var r=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},nHXS:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return f}),n.d(e,"f",function(){return p});var r=n("8Y7J"),i=n("mrSG"),s=n("XNiG"),o=n("1G5W"),l=n("nYR2"),a=n("5VGP");class u{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-content")}}class c{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-footer")}}class h{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-header")}}class d{constructor(t,e){this.elementRef=t,this.renderer=e,e.addClass(t.nativeElement,"ant-layout")}destroySider(){this.renderer.removeClass(this.elementRef.nativeElement,"ant-layout-has-sider")}initSider(){this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-has-sider")}}let p=(()=>{class t{constructor(t,e,n,i,o,l,a,u){this.nzLayoutComponent=t,this.mediaMatcher=e,this.ngZone=n,this.platform=i,this.cdr=o,this.nzDomEventService=l,this.below=!1,this.destroy$=new s.a,this.dimensionMap={xs:"480px",sm:"576px",md:"768px",lg:"992px",xl:"1200px",xxl:"1600px"},this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.nzCollapsedChange=new r.m,a.addClass(u.nativeElement,"ant-layout-sider")}get flexSetting(){return`0 0 ${this.widthSetting}`}get widthSetting(){return this.nzCollapsed?`${this.nzCollapsedWidth}px`:Object(a.nb)(this.nzWidth)}watchMatchMedia(){if(this.nzBreakpoint){const t=this.mediaMatcher.matchMedia(`(max-width: ${this.dimensionMap[this.nzBreakpoint]})`).matches;this.below=t,this.nzCollapsed=t,this.nzCollapsedChange.emit(t),this.ngZone.run(()=>{this.cdr.markForCheck()})}}toggleCollapse(){this.nzCollapsed=!this.nzCollapsed,this.nzCollapsedChange.emit(this.nzCollapsed)}get isZeroTrigger(){return this.nzCollapsible&&this.nzTrigger&&0===this.nzCollapsedWidth&&(this.nzBreakpoint&&this.below||!this.nzBreakpoint)}get isSiderTrigger(){return this.nzCollapsible&&this.nzTrigger&&0!==this.nzCollapsedWidth}ngOnInit(){this.nzLayoutComponent&&this.nzLayoutComponent.initSider()}ngAfterViewInit(){this.platform.isBrowser&&(Promise.resolve().then(()=>this.watchMatchMedia()),this.nzDomEventService.registerResizeListener().pipe(Object(o.a)(this.destroy$),Object(l.a)(()=>this.nzDomEventService.unregisterResizeListener())).subscribe(()=>this.watchMatchMedia()))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.nzLayoutComponent&&this.nzLayoutComponent.destroySider()}}return Object(i.__decorate)([Object(a.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzReverseArrow",void 0),Object(i.__decorate)([Object(a.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzCollapsible",void 0),Object(i.__decorate)([Object(a.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzCollapsed",void 0),t})();class f{}},nYR2:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("quSY");function s(t){return e=>e.lift(new o(t))}class o{constructor(t){this.callback=t}call(t,e){return e.subscribe(new l(t,this.callback))}}class l extends r.a{constructor(t,e){super(t),this.add(new i.a(e))}}},naeu:function(t,e,n){"use strict";var r=n("mbIT"),i=n("rhxD");e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&r.isArray(t[0])&&(t=t[0]),e.lift.call(i.race.apply(void 0,[e].concat(t)))}}},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},nr5L:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("yrbL"),i=n("8Y7J"),s=n("IheW"),o=n("334H");let l=(()=>{class t{constructor(t,e){this.http=t,this.uri=e}getBanners(){return this.http.get(this.uri+"banner").pipe(Object(r.map)(t=>t.banners))}getHotTags(){return this.http.get(this.uri+"playlist/hot").pipe(Object(r.map)(t=>t.tags.sort((t,e)=>t.position-e.position).slice(0,5)))}getPerosonalSheetList(){return this.http.get(this.uri+"personalized").pipe(Object(r.map)(t=>t.result.slice(0,16)))}}return t.ngInjectableDef=i.Tb({factory:function(){return new t(i.Ub(s.c),i.Ub(o.a))},token:t,providedIn:o.b}),t})()},nz4u:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("Y4kR"),o=n("cSoz");e.repeatWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier,e))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){var e;this.notifications=new i.Subject;try{e=(0,this.notifier)(this.notifications)}catch(n){return t.prototype.complete.call(this)}this.retries=e,this.retriesSubscription=o.subscribeToResult(this,e)},e}(s.OuterSubscriber)},nzqU:function(t,e,n){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},o4sL:function(t,e,n){"use strict";var r=n("C20g"),i=n("4ik+");e.partition=function(t,e){return function(n){return[i.filter(t,e)(n),i.filter(r.not(t,e))(n)]}}},oBm0:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("8Y7J"),n("5VGP");class r{}},omvX:function(t,e,n){"use strict";n.d(e,"f",function(){return b}),n.d(e,"g",function(){return y}),n.d(e,"e",function(){return m}),n.d(e,"b",function(){return _}),n.d(e,"a",function(){return v}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return g});var r=n("8Y7J"),i=(n("cUpR"),n("GS7A")),s=n("fDlF");class o extends i.b{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:r.Q.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Object(i.f)(t):t;return u(this._renderer,null,e,"register",[n]),new l(e,this._renderer)}}class l extends i.c{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new a(this._id,t,e||{},this._renderer)}}class a{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return u(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(t){this._command("setPosition",t)}getPosition(){return 0}}function u(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const c="@",h="@.disabled";class d{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new p("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;return this._currentId++,this.engine.register(i,t),e.data.animation.forEach(e=>this.engine.registerTrigger(r,i,t,e.name,e)),new f(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}class p{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,!0)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==c&&e==h?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class f extends p{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==c?"."==e.charAt(1)&&e==h?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==c){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=c&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}class g extends s.b{constructor(t,e,n){super(t.body,e,n)}}function m(){return Object(s.h)()?new s.f:new s.d}function b(){return new s.g}function y(t,e,n){return new d(t,e,n)}const v=new r.p("AnimationModuleType");class _{}},ozKM:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("8Y7J"),n("xgIS"),n("VRyK"),n("quSY"),n("pLZG"),n("vkgz"),n("wO+i"),n("lJxs"),n("/uUt"),n("1G5W"),n("5VGP");class r{}},ozli:function(t,e,n){"use strict";var r=n("zfKp");e.subscribeToObservable=function(t){return function(e){var n=t[r.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},"p+Sl":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("XNiG"),n("1G5W"),n("5VGP");class r{}},"p//D":function(t,e,n){"use strict";e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},"p0+S":function(t,e,n){"use strict";var r=n("mbIT");e.isNumeric=function(t){return!r.isArray(t)&&t-parseFloat(t)+1>=0}},pDEI:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()>i.getTime()}},pLZG:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.predicate,this.thisArg))}}class o extends r.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}},pLeS:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}},pLzU:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("Lhse");const i=t=>e=>{const n=t[r.a]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e}},pMnS:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("8Y7J"),i=n("iInd"),s=r.rb({encapsulation:2,styles:[],data:{}});function o(t){return r.Pb(0,[(t()(),r.tb(0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.sb(1,212992,null,0,i.r,[i.b,r.P,r.j,[8,null],r.h],null,null)],function(t,e){t(e,1,0)},null)}function l(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"ng-component",[],null,null,null,o,s)),r.sb(1,49152,null,0,i.F,[],null,null)],null,null)}var a=r.pb("ng-component",i.F,l,{},{},[])},pWCv:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("w5QO"),o=n("pshJ");e.tap=function(t,e,n){return function(r){return r.lift(new l(t,e,n))}};var l=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(t){function e(e,n,r,i){var l=t.call(this,e)||this;return l._tapNext=s.noop,l._tapError=s.noop,l._tapComplete=s.noop,l._tapError=r||s.noop,l._tapComplete=i||s.noop,o.isFunction(n)?(l._context=l,l._tapNext=n):n&&(l._context=n,l._tapNext=n.next||s.noop,l._tapError=n.error||s.noop,l._tapComplete=n.complete||s.noop),l}return r(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(i.Subscriber)},phDe:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("5VGP"),s=n("XNiG"),o=n("quSY"),l=n("VRyK"),a=n("xgIS"),u=n("EY2u"),c=n("itXk"),h=n("1G5W"),d=n("7o/Q");function p(t){return e=>e.lift(new f(t))}class f{constructor(t){this.value=t}call(t,e){return e.subscribe(new g(t,this.value))}}class g extends d.a{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}var m=n("vkgz"),b=n("pLZG"),y=n("lJxs"),v=n("Kj3r"),_=n("/uUt"),w=(n("IzEk"),n("mrSG")),x=n("dvZr"),C=n("QQfA"),S=n("zMNK");n.d(e,"a",function(){return A}),n.d(e,"b",function(){return D}),n.d(e,"c",function(){return I}),n.d(e,"d",function(){return z}),n.d(e,"e",function(){return N}),n.d(e,"f",function(){return k}),n.d(e,"g",function(){return T}),n.d(e,"h",function(){return M}),n.d(e,"i",function(){return O}),n.d(e,"j",function(){return E}),n.d(e,"k",function(){return P});class O extends i.p{constructor(){super(...arguments),this.isInDropDown=!0}}class k{constructor(t){this.cdr=t,this.open=!0,this.dropDownPosition="bottom",this.destroy$=new s.a}init(t,e,n,r){this.open=t,this.templateRef=e,this.control=r,n.pipe(Object(h.a)(this.destroy$)).subscribe(t=>{this.dropDownPosition="bottom"===t.connectionPair.overlayY?"top":"bottom",this.cdr.markForCheck()})}close(){this.open=!1,this.cdr.markForCheck()}afterAnimation(){this.open||this.control.dispose()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}function E(t){return t.get(O)}class T{constructor(t,e,n,r,i,o){this.cdr=t,this.elementRef=e,this.renderer=n,this.viewContainerRef=r,this.nzMenuDropdownService=i,this.noAnimation=o,this.open=!1,this.triggerWidth=0,this.dropDownPosition="bottom",this.visible$=new s.a,this.nzTrigger="hover",this.nzPlacement="bottomLeft",this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzTableFilter=!1}setVisibleStateWhen(t,e="all"){this.nzTrigger!==e&&"all"!==e||this.visible$.next(t)}setValue(t,e){this[t]=e,this.cdr.markForCheck()}ngAfterContentInit(){this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}}let z=(()=>{class t{constructor(t,e,n,u,c){this.elementRef=t,this.renderer=e,this.overlay=n,this.platform=u,this.viewContainerRef=c,this.overlayRef=null,this.destroy$=new s.a,this.triggerWidth=0,this.el=this.elementRef.nativeElement,this.dropdownOpen=!1,this.positions=[...i.c],this.positionSubscription=o.a.EMPTY,this.overlaySubscription=o.a.EMPTY,this.hover$=Object(l.a)(Object(a.a)(this.el,"mouseenter").pipe(p(!0)),Object(a.a)(this.el,"mouseleave").pipe(p(!1))),this.$click=Object(a.a)(this.el,"click").pipe(Object(m.a)(t=>t.stopPropagation()),p(!0)),this.nzTrigger="hover",this.nzBackdrop=!0,this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzTableFilter=!1,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzVisibleChange=new r.m,e.addClass(t.nativeElement,"ant-dropdown-trigger")}setDisabled(t){t?(this.renderer.setAttribute(this.el,"disabled",""),this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(this.nzVisible),this.updateOverlayByVisible())):this.renderer.removeAttribute(this.el,"disabled")}getOverlayConfig(){return new C.e({positionStrategy:this.overlay.position().flexibleConnectedTo(this.el).withLockedPosition(),minWidth:this.triggerWidth,hasBackdrop:"click"===this.nzTrigger,backdropClass:this.nzBackdrop?void 0:"nz-overlay-transparent-backdrop",scrollStrategy:this.overlay.scrollStrategies.reposition()})}createOverlay(){if(this.overlayRef){const t=this.overlayRef.getConfig();return this.updateOverlayConfig(t),this.overlayRef}{const t=this.getOverlayConfig();return this.overlayRef=this.overlay.create(t),this.subscribeOverlayEvent(this.overlayRef),this.subscribeToPositions(t.positionStrategy),this.overlayRef}}updateOverlayConfig(t){return t.minWidth=this.triggerWidth,t.hasBackdrop="click"===this.nzTrigger,t}dispose(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null,this.positionSubscription.unsubscribe(),this.overlaySubscription.unsubscribe())}subscribeToPositions(t){this.positionSubscription.unsubscribe(),this.positionSubscription=t.positionChanges.pipe(Object(h.a)(this.destroy$)).subscribe(t=>{this.nzDropdownMenu.setValue("dropDownPosition",t.connectionPair.originY)})}subscribeOverlayEvent(t){this.overlaySubscription.unsubscribe(),this.overlaySubscription=Object(l.a)(t.backdropClick(),t.detachments(),t.keydownEvents().pipe(Object(b.a)(t=>t.keyCode===x.e&&!Object(x.n)(t)))).pipe(Object(h.a)(this.destroy$)).subscribe(()=>{this.nzDropdownMenu.setVisibleStateWhen(!1)})}getPortal(){return this.portal&&this.portal.templateRef===this.nzDropdownMenu.templateRef||(this.portal=new S.f(this.nzDropdownMenu.templateRef,this.viewContainerRef)),this.portal}openMenu(){if(!this.dropdownOpen){const t=this.createOverlay(),e=t.getConfig();this.nzDropdownMenu.setValue("open",!0),this.setPosition(e.positionStrategy),t.attach(this.getPortal()),this.dropdownOpen=!0}}closeMenu(){this.overlayRef&&(this.overlayRef.detach(),this.dropdownOpen=!1,this.nzDropdownMenu.setValue("open",!1))}setPosition(t){this.positionStrategy=t,t.withPositions([...this.positions])}updatePositionStrategy(t){this.positionStrategy&&this.positionStrategy.withPositions(t)}setTriggerWidth(){this.platform.isBrowser&&(this.triggerWidth=(this.nzMatchWidthElement?this.nzMatchWidthElement.nativeElement:this.el).getBoundingClientRect().width)}initActionSubscribe(){const t="hover"===this.nzTrigger?this.hover$:this.$click,e=this.nzDropdownMenu.visible$,n=this.nzClickHide?this.nzDropdownMenu.nzMenuDropdownService.menuItemClick$.pipe(p(!1)):u.a,r=Object(l.a)(e,t,n),i=this.nzDropdownMenu.nzMenuDropdownService.menuOpen$;Object(c.a)([r,i]).pipe(Object(y.a)(([t,e])=>t||e),Object(v.a)(50),Object(_.a)(),Object(h.a)(this.destroy$)).subscribe(t=>{this.nzDisabled||this.nzVisible===t||(this.nzVisible=t,this.updateOverlayByVisible(),this.nzVisibleChange.emit(this.nzVisible),this.setTriggerWidth(),this.nzDropdownMenu.setValue("triggerWidth",this.triggerWidth))})}updateOverlayByVisible(){this.nzVisible?this.openMenu():this.closeMenu()}updateDisabledState(){this.setDisabled(this.nzDisabled)}regeneratePosition(t,e){return[i.B[t],...e]}ngAfterViewInit(){this.nzDropdownMenu&&(this.setTriggerWidth(),this.initActionSubscribe(),this.updateDisabledState())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dispose()}ngOnChanges(t){const{nzVisible:e,nzTrigger:n,nzPlacement:r,nzDisabled:i,nzOverlayClassName:s,nzOverlayStyle:o,nzTableFilter:l}=t;this.nzDropdownMenu&&(e&&(this.updateOverlayByVisible(),this.nzDropdownMenu.visible$.next(this.nzVisible)),n&&this.nzDropdownMenu.setValue("nzTrigger",this.nzTrigger),l&&this.nzDropdownMenu.setValue("nzTableFilter",this.nzTableFilter),s&&this.nzDropdownMenu.setValue("nzOverlayClassName",this.nzOverlayClassName),o&&this.nzDropdownMenu.setValue("nzOverlayStyle",this.nzOverlayStyle),r&&(this.nzDropdownMenu.setValue("nzPlacement",this.nzPlacement),this.nzDropdownMenu.setValue("dropDownPosition",-1!==this.nzDropdownMenu.nzPlacement.indexOf("top")?"top":"bottom"),this.positions=this.regeneratePosition(this.nzPlacement,this.positions),this.updatePositionStrategy(this.positions))),i&&this.updateDisabledState()}}return Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzBackdrop",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzClickHide",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzVisible",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzTableFilter",void 0),t})();function P(t){return t.get(O)}let I=(()=>{class t{constructor(t,e,n){this.cdr=t,this.nzMenuDropdownService=e,this.noAnimation=n,this.triggerWidth=0,this.dropDownPosition="bottom",this.positions=[...i.c],this.visible$=new s.a,this.destroy$=new s.a,this.nzTrigger="hover",this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzPlacement="bottomLeft",this.nzClickHide=!0,this.nzDisabled=!1,this.nzVisible=!1,this.nzTableFilter=!1,this.nzVisibleChange=new r.m,Object(i.rb)("'nz-dropdown' Component is going to be removed in 9.0.0. Please use 'nz-dropdown-menu' instead. Read https://ng.ant.design/components/dropdown/en")}setVisibleStateWhen(t,e="all"){this.nzTrigger!==e&&"all"!==e||this.visible$.next(t)}onPositionChange(t){this.dropDownPosition=t.connectionPair.originY,this.cdr.markForCheck()}startSubscribe(t){const e=this.nzClickHide?this.nzMenuDropdownService.menuItemClick$.pipe(p(!1)):u.a;Object(c.a)([Object(l.a)(t,e),this.nzMenuDropdownService.menuOpen$]).pipe(Object(y.a)(t=>t[0]||t[1]),Object(v.a)(50),Object(_.a)(),Object(h.a)(this.destroy$)).subscribe(t=>{this.nzDisabled||this.nzVisible===t||(this.nzVisible=t,this.nzVisibleChange.emit(this.nzVisible),this.triggerWidth=this.nzDropDownDirective.elementRef.nativeElement.getBoundingClientRect().width,this.cdr.markForCheck())})}updateDisabledState(){this.nzDropDownDirective&&this.nzDropDownDirective.setDisabled(this.nzDisabled)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterContentInit(){this.startSubscribe(Object(l.a)(this.visible$,"hover"===this.nzTrigger?this.nzDropDownDirective.hover$:this.nzDropDownDirective.$click)),this.updateDisabledState()}ngOnChanges(t){t.nzVisible&&this.visible$.next(this.nzVisible),t.nzDisabled&&this.updateDisabledState(),t.nzPlacement&&(this.dropDownPosition=-1!==this.nzPlacement.indexOf("top")?"top":"bottom",this.positions=[i.B[this.nzPlacement],...this.positions])}}return Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzClickHide",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzVisible",void 0),Object(w.__decorate)([Object(i.g)(),Object(w.__metadata)("design:type",Object)],t.prototype,"nzTableFilter",void 0),t})();class M{}class D extends I{constructor(t,e,n){super(t,e,n),this.noAnimation=n,this.nzSize="default",this.nzType="default",this.nzIcon="ellipsis",this.nzClick=new r.m,Object(i.rb)("'nz-dropdown-button' Component is going to be removed in 9.0.0. Please use 'nz-dropdown-menu' instead. Read https://ng.ant.design/components/dropdown/en")}ngAfterContentInit(){this.startSubscribe(this.visible$)}}class A{}class N{}},poJ0:function(t,e,n){"use strict";var r=n("VKeD");e.subscribeToIterable=function(t){return function(e){for(var n=t[r.iterator]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},pshJ:function(t,e,n){"use strict";e.isFunction=function(t){return"function"==typeof t}},px0D:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return l});var r=n("mrSG"),i=n("5VGP");n("XNiG"),n("1G5W"),n("nYR2");let s=(()=>{class t{constructor(t,e){this.nzSize="default",this.disabled=!1,t.addClass(e.nativeElement,"ant-input")}}return Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"disabled",void 0),t})(),o=(()=>{class t{constructor(){this._size="default",this.nzSearch=!1,this.nzCompact=!1}set nzSize(t){this._size=t,this.updateChildrenInputSize()}get nzSize(){return this._size}get isLarge(){return"large"===this.nzSize}get isSmall(){return"small"===this.nzSize}get isAffix(){return!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)}get isAddOn(){return!!(this.nzAddOnAfter||this.nzAddOnBefore||this.nzAddOnAfterIcon||this.nzAddOnBeforeIcon)}get isAffixWrapper(){return this.isAffix&&!this.isAddOn}get isGroup(){return!this.isAffix&&!this.isAddOn}get isLargeGroup(){return this.isGroup&&this.isLarge}get isLargeGroupWrapper(){return this.isAddOn&&this.isLarge}get isLargeAffix(){return this.isAffixWrapper&&this.isLarge}get isLargeSearch(){return this.nzSearch&&this.isLarge}get isSmallGroup(){return this.isGroup&&this.isSmall}get isSmallAffix(){return this.isAffixWrapper&&this.isSmall}get isSmallGroupWrapper(){return this.isAddOn&&this.isSmall}get isSmallSearch(){return this.nzSearch&&this.isSmall}updateChildrenInputSize(){this.listOfNzInputDirective&&this.listOfNzInputDirective.forEach(t=>t.nzSize=this.nzSize)}ngAfterContentInit(){this.updateChildrenInputSize()}}return Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSearch",void 0),Object(r.__decorate)([Object(i.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzCompact",void 0),t})();class l{}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("WMd4");function s(t,e=0){return function(n){return n.lift(new o(t,e))}}class o{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new a(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class a{constructor(t,e){this.notification=t,this.destination=e}}},pzWd:function(t,e){t.exports=function(t){return t instanceof Date}},q3Kh:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.project,this.thisArg))},t}();e.MapOperator=s;var o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(i.Subscriber)},q3SL:function(t,e,n){var r=n("mrSG").__extends,i=n("gTqA"),s=n("mbIT"),o=n("Y4kR"),l=n("Vi6O"),a=n("cSoz");e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&s.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new u(t))}},e.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n;return 1===t.length&&s.isArray(t[0])&&(t=t[0]),n=t.shift(),i.from(n,null).lift(new u(t))};var u=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextSources))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return r(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var e=new l.InnerSubscriber(this,void 0,void 0);this.destination.add(e),a.subscribeToResult(this,t,void 0,void 0,e)}else this.destination.complete()},e}(o.OuterSubscriber)},q9S1:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},qFJL:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 5===r(t).getDay()}},qTUo:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getTime()<(new Date).getTime()}},qU0y:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J");class r{}},qgXg:function(t,e,n){"use strict";var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var s=n("IjjT");class o extends s.a{}n.d(e,"a",function(){return l});const l=new o(i)},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),s=n("n6bG");function o(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}o.prototype=Object.create(Error.prototype);const l=o;n.d(e,"a",function(){return a});let a=(()=>{class t{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:o,_unsubscribe:a,_subscriptions:c}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let h=-1,d=o?o.length:0;for(;n;)n.remove(this),n=++h<d&&o[h]||null;if(Object(s.a)(a))try{a.call(this)}catch(p){e=!0,t=p instanceof l?u(p.errors):[p]}if(Object(r.a)(c))for(h=-1,d=c.length;++h<d;){const n=c[h];if(Object(i.a)(n))try{n.unsubscribe()}catch(p){e=!0,t=t||[],p instanceof l?t=t.concat(u(p.errors)):t.push(p)}}if(e)throw new l(t)}add(e){let n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;(n=new t)._subscriptions=[e]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){const t=this._subscriptions;t?t.push(n):this._subscriptions=[n]}return n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}},r19J:function(t,e,n){"use strict";n("QQfA"),n("8Y7J"),n("s7LF"),n("5VGP"),n("mrSG"),n("dvZr"),n("zMNK"),n("quSY"),n("NXyV"),n("VRyK"),n("xgIS"),n("IzEk"),n("eIep"),n("pLZG"),n("D0XW"),n("mlxB"),n("7o/Q"),n("WMd4"),n("lJxs"),n("l7GE"),n("ZUHj"),n.d(e,"a",function(){return r});class r{}},rEZo:function(t,e,n){"use strict";var r=n("IKMM");e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(r.concat.apply(void 0,[e].concat(t)))}}},rJp6:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("iInd"),n("XNiG"),n("pLZG"),n("1G5W"),n("JX91"),n("5VGP");class r{}},rLnn:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("SVse"),s=n("O4nG"),o=n("iInd");n.d(e,"a",function(){return p});var l=r.rb({encapsulation:0,styles:[[".search-panel[_ngcontent-%COMP%]{border:1px solid #bebebe;border-radius:4px;background:#fff;box-shadow:0 4px 7px #555;text-shadow:0 1px 0 rgba(255,255,255,.9)}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]{float:left;width:52px;margin-right:-100px;padding:9px 0 0 10px;line-height:19px;font-size:12px}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{margin:2px 4px 0 0;float:left;display:inline-block;width:14px;height:15px;background:url(icon.29cd8439e24c97d0d553.png) no-repeat;cursor:pointer;overflow:hidden}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .ico.ico-song[_ngcontent-%COMP%]{background-position:-35px -300px}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .ico.ico-singer[_ngcontent-%COMP%]{background-position:-50px -300px}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .ico.ico-sheet[_ngcontent-%COMP%]{background-position:-50px -320px}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:180px;margin-left:62px;margin-top:-1px;margin-bottom:0;padding:6px 0 5px;border-top:1px solid #e2e2e2;border-left:1px solid #e2e2e2}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 12px 5px 0;text-indent:12px;line-height:24px;color:#000;cursor:pointer}.search-panel[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e0e6e3}"]],data:{}});function a(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"li",[["class","ellipsis"]],[[8,"innerHTML",1]],[[null,"mousedown"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==t.component.toInfo(["/songInfo",t.context.$implicit.id])&&r),r},null,null))],null,function(t,e){t(e,0,0,e.context.$implicit.name)})}function u(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"li",[["class","ellipsis"]],[[8,"innerHTML",1]],[[null,"mousedown"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==t.component.toInfo(["/singer",t.context.$implicit.id])&&r),r},null,null))],null,function(t,e){t(e,0,0,e.context.$implicit.name)})}function c(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"li",[["class","ellipsis"]],[[8,"innerHTML",1]],[[null,"mousedown"]],function(t,e,n){var r=!0;return"mousedown"===e&&(r=!1!==t.component.toInfo(["/sheetInfo",t.context.$implicit.id])&&r),r},null,null))],null,function(t,e){t(e,0,0,e.context.$implicit.name)})}function h(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,25,"div",[["class","search-panel"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,24,"div",[["class","list-wrap"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,7,"div",[["class","list-item clearfix"]],[[8,"hidden",0]],null,null,null,null)),(t()(),r.tb(3,0,null,null,3,"div",[["class","hd"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"i",[["class","ico ico-song"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u5355\u66f2"])),(t()(),r.tb(7,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,a)),r.sb(9,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(10,0,null,null,7,"div",[["class","list-item clearfix"]],[[8,"hidden",0]],null,null,null,null)),(t()(),r.tb(11,0,null,null,3,"div",[["class","hd"]],null,null,null,null,null)),(t()(),r.tb(12,0,null,null,0,"i",[["class","ico ico-singer"]],null,null,null,null,null)),(t()(),r.tb(13,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6b4c\u624b"])),(t()(),r.tb(15,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,u)),r.sb(17,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(18,0,null,null,7,"div",[["class","list-item clearfix"]],[[8,"hidden",0]],null,null,null,null)),(t()(),r.tb(19,0,null,null,3,"div",[["class","hd"]],null,null,null,null,null)),(t()(),r.tb(20,0,null,null,0,"i",[["class","ico ico-sheet"]],null,null,null,null,null)),(t()(),r.tb(21,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6b4c\u5355"])),(t()(),r.tb(23,0,null,null,2,"ul",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,c)),r.sb(25,278528,null,0,i.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,9,0,null==n.searchResult?null:n.searchResult.songs),t(e,17,0,null==n.searchResult?null:n.searchResult.artists),t(e,25,0,null==n.searchResult?null:n.searchResult.playlists)},function(t,e){var n=e.component;t(e,2,0,!(null!=n.searchResult&&n.searchResult.songs)),t(e,10,0,!(null!=n.searchResult&&n.searchResult.artists)),t(e,18,0,!(null!=n.searchResult&&n.searchResult.playlists))})}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-wy-search-panel",[],null,null,null,h,l)),r.sb(1,114688,null,0,s.a,[o.n],null,null)],function(t,e){t(e,1,0)},null)}var p=r.pb("app-wy-search-panel",s.a,d,{},{},[])},rMQs:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t).getFullYear();return e%400==0||e%4==0&&e%100!=0}},rNzc:function(t,e,n){var r=n("mrSG").__extends,i=n("Y4kR"),s=n("Vi6O"),o=n("cSoz");e.catchError=function(t){return function(e){var n=new l(t),r=e.lift(n);return n.caught=r}};var l=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.selector,this.caught))},t}(),a=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return r(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(i){return void t.prototype.error.call(this,i)}this._unsubscribeAndRecycle();var r=new s.InnerSubscriber(this,void 0,void 0);this.add(r),o.subscribeToResult(this,n,void 0,void 0,r)}},e}(i.OuterSubscriber)},rZA3:function(t,e,n){(function(t){var r;!function(t,i,s){function o(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function l(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new o(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&l(r,n),i.state=function(){return l(n,{})}),i}i&&i.exports?i.exports=a:n("B9Yq")&&n("PDX0")?void 0===(r=(function(){return a}).call(e,n,e,i))||(i.exports=r):this.alea=a}(0,t,n("B9Yq"))}).call(this,n("YuTi")(t))},rhxD:function(t,e,n){var r=n("mrSG").__extends,i=n("mbIT"),s=n("zzsZ"),o=n("Y4kR"),l=n("cSoz");e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!i.isArray(t[0]))return t[0];t=t[0]}return s.fromArray(t,void 0).lift(new a)};var a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}();e.RaceOperator=a;var u=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return r(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=l.subscribeToResult(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==n){var o=this.subscriptions[s];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(e)},e}(o.OuterSubscriber);e.RaceSubscriber=u},rjGf:function(t,e,n){"use strict";n.d(e,"a",function(){return r});class r{}},rxKr:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.find=function(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new s(t,n,!1,e))}};var s=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=s;var o=function(t){function e(e,n,r,i,s){var o=t.call(this,e)||this;return o.predicate=n,o.source=r,o.yieldIndex=i,o.thisArg=s,o.index=0,o}return r(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,r=this.index++;try{e.call(n||this,t,r,this.source)&&this.notifyComplete(this.yieldIndex?r:t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(i.Subscriber);e.FindValueSubscriber=o},rxuJ:function(t,e,n){var r=n("7B8A");t.exports=function(t,e){var n=Number(e);return r(t,1e3*n)}},"s/X6":function(t,e,n){var r=n("yNUO"),i=n("+f+M"),s=n("DT56"),o=n("3zVU");t.exports=function(t,e){var n=r(t),l=r(e),a=s(n,l),u=Math.abs(i(n,l));return n=o(n,a*u),a*(u-(s(n,l)===-a))}},"s3+Z":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.takeWhile=function(t,e){return void 0===e&&(e=!1),function(n){return n.lift(new s(t,e))}};var s=function(){function t(t,e){this.predicate=t,this.inclusive=e}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.predicate,this.inclusive))},t}(),o=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return r(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())},e}(i.Subscriber)},s7LF:function(t,e,n){"use strict";n.d(e,"s",function(){return bt}),n.d(e,"v",function(){return ut}),n.d(e,"t",function(){return E}),n.d(e,"u",function(){return ct}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return p}),n.d(e,"l",function(){return a}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return h}),n.d(e,"m",function(){return g}),n.d(e,"n",function(){return b}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return at}),n.d(e,"g",function(){return ht}),n.d(e,"h",function(){return mt}),n.d(e,"j",function(){return dt}),n.d(e,"e",function(){return yt}),n.d(e,"f",function(){return Q}),n.d(e,"i",function(){return J}),n.d(e,"r",function(){return w}),n.d(e,"k",function(){return vt}),n.d(e,"q",function(){return _t});var r=n("8Y7J"),i=n("cUpR"),s=n("cp0P"),o=n("Cfvw"),l=n("lJxs");const a=new r.p("NgValueAccessor");class u{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}const c=new r.p("CompositionEventMode");class h{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(i.s)()?Object(i.s)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}class d{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class p extends d{get formDirective(){return null}get path(){return null}}function f(){throw new Error("unimplemented")}class g extends d{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return f()}get asyncValidator(){return f()}}class m{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class b extends m{constructor(t){super(t)}}class y extends m{constructor(t){super(t)}}function v(t){return null==t||0===t.length}const _=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;class w{static min(t){return e=>{if(v(e.value)||v(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(v(e.value)||v(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return v(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return v(t.value)?null:_.test(t.value)?null:{email:!0}}static minLength(t){return e=>{if(v(e.value))return null;const n=e.value?e.value.length:0;return n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}static maxLength(t){return e=>{const n=e.value?e.value.length:0;return n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}static pattern(t){if(!t)return w.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(v(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(x);return 0==e.length?null:function(t){return S(function(t,n){return e.map(e=>e(t))}(t))}}static composeAsync(t){if(!t)return null;const e=t.filter(x);return 0==e.length?null:function(t){const n=function(t,n){return e.map(e=>e(t))}(t).map(C);return Object(s.a)(n).pipe(Object(l.a)(S))}}}function x(t){return null!=t}function C(t){const e=Object(r.Ab)(t)?Object(o.a)(t):t;if(!Object(r.zb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function S(t){const e=t.reduce((t,e)=>null!=e?Object.assign({},t,e):t,{});return 0===Object.keys(e).length?null:e}function O(t){return t.validate?e=>t.validate(e):t}function k(t){return t.validate?e=>t.validate(e):t}class E{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}const T={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '};class z{static controlParentException(){throw new Error(`formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${T.formControlName}`)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${T.formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${T.ngModelGroup}`)}static missingFormException(){throw new Error(`formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ${T.formControlName}`)}static groupParentException(){throw new Error(`formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ${T.formGroupName}`)}static arrayParentException(){throw new Error(`formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        ${T.formArrayName}`)}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}function P(t,e){return[...e.path,t]}function I(t,e){t||N(e,"Cannot find control with"),e.valueAccessor||N(e,"No value accessor for form control with"),t.validator=w.compose([t.validator,e.validator]),t.asyncValidator=w.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&M(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&M(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function M(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function D(t,e){null==t&&N(e,"Cannot find control with"),t.validator=w.compose([t.validator,e.validator]),t.asyncValidator=w.composeAsync([t.asyncValidator,e.asyncValidator])}function A(t){return N(t,"There is no FormControl instance attached to form control element with")}function N(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function R(t){return null!=t?w.compose(t.map(O)):null}function F(t){return null!=t?w.composeAsync(t.map(k)):null}function $(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object(r.Bb)(e,n.currentValue)}const L=[u,class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.Bb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}},class{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=r.Bb}set compareWith(t){if("function"!=typeof t)throw new Error(`compareWith must be a function, but received ${JSON.stringify(t)}`);this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(e.hasOwnProperty("selectedOptions")){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}},class{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(g),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}];function j(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function B(t,e){if(!e)return null;Array.isArray(e)||N(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{e.constructor===h?n=e:function(t){return L.some(e=>t.constructor===e)}(e)?(r&&N(t,"More than one built-in value accessor matches form control with"),r=e):(i&&N(t,"More than one custom value accessor matches form control with"),i=e)}),i||r||n||(N(t,"No valid value accessor for form control with"),null)}function V(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function W(t,e,n,i){Object(r.X)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(z.ngModelWarning(t),e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}const U="VALID",H="INVALID",G="PENDING",q="DISABLED";function K(t){const e=X(t)?t.validators:t;return Array.isArray(e)?R(e):e||null}function Y(t,e){const n=X(e)?e.asyncValidators:t;return Array.isArray(n)?F(n):n||null}function X(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Z{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return this.status===U}get invalid(){return this.status===H}get pending(){return this.status==G}get disabled(){return this.status===q}get enabled(){return this.status!==q}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=K(t)}setAsyncValidators(t){this.asyncValidator=Y(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=G,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=q,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=U,this._forEachChild(e=>{e.enable(Object.assign({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==U&&this.status!==G||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?q:U}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=G;const e=C(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){return null==e?null:(e instanceof Array||(e=e.split(".")),e instanceof Array&&0===e.length?null:e.reduce((t,e)=>t instanceof J?t.controls.hasOwnProperty(e)?t.controls[e]:null:t instanceof tt&&t.at(e)||null,t))}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.m,this.statusChanges=new r.m}_calculateStatus(){return this._allControlsDisabled()?q:this.errors?H:this._anyControlsHaveStatus(G)?G:this._anyControlsHaveStatus(H)?H:U}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){X(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class Q extends Z{constructor(t=null,e,n){super(K(e),Y(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class J extends Z{constructor(t,e,n){super(K(e),Y(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Q?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){let e=!1;return this._forEachChild((n,r)=>{e=e||this.contains(r)&&t(n)}),e}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class tt extends Z{constructor(t,e,n){super(K(e),Y(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Q?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const et=(()=>Promise.resolve(null))();class nt extends p{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.m,this.form=new J({},R(t),F(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){et.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),I(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){et.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),V(this._directives,t)})}addFormGroup(t){et.then(()=>{const e=this._findContainer(t.path),n=new J({});D(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){et.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){et.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,j(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}class rt{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${T.formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      ${T.ngModelWithFormGroup}`)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${T.formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${T.ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${T.formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${T.ngModelGroup}`)}static ngFormWarning(){console.warn("\n    It looks like you're using 'ngForm'.\n\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\n    in Angular v9.\n\n    Use 'ng-form' instead.\n\n    Before:\n    <ngForm #myForm=\"ngForm\">\n\n    After:\n    <ng-form #myForm=\"ngForm\">\n    ")}}const it=new r.p("NgFormSelectorWarning");class st extends p{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return P(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return R(this._validators)}get asyncValidator(){return F(this._asyncValidators)}_checkParentType(){}}class ot extends st{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){this._parent instanceof ot||this._parent instanceof nt||rt.modelGroupParentException()}}const lt=(()=>Promise.resolve(null))();class at extends g{constructor(t,e,n,i){super(),this.control=new Q,this._registered=!1,this.update=new r.m,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=B(this,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?P(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return R(this._rawValidators)}get asyncValidator(){return F(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){I(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof ot)&&this._parent instanceof st?rt.formGroupNameException():this._parent instanceof ot||this._parent instanceof nt||rt.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||rt.missingNameException()}_updateValue(t){lt.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;lt.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}class ut{}const ct=new r.p("NgModelWithFormControlWarning");let ht=(()=>{class t extends g{constructor(t,e,n,i){super(),this._ngModelWarningConfig=i,this.update=new r.m,this._ngModelWarningSent=!1,this._rawValidators=t||[],this._rawAsyncValidators=e||[],this.valueAccessor=B(this,n)}set isDisabled(t){z.disabledAttrWarning()}ngOnChanges(e){this._isControlChanged(e)&&(I(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),$(e,this.viewModel)&&(W("formControl",t,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return R(this._rawValidators)}get asyncValidator(){return F(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}}return t._ngModelWarningSentOnce=!1,t})();class dt extends p{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.m}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return I(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){V(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);D(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);D(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,j(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>A(e)),e.valueAccessor.registerOnTouched(()=>A(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&I(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=R(this._validators);this.form.validator=w.compose([this.form.validator,t]);const e=F(this._asyncValidators);this.form.asyncValidator=w.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||z.missingFormException()}}class pt extends st{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){gt(this._parent)&&z.groupParentException()}}class ft extends p{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return P(this.name,this._parent)}get validator(){return R(this._validators)}get asyncValidator(){return F(this._asyncValidators)}_checkParentType(){gt(this._parent)&&z.arrayParentException()}}function gt(t){return!(t instanceof pt||t instanceof dt||t instanceof ft)}let mt=(()=>{class t extends g{constructor(t,e,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.m,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=B(this,i)}set isDisabled(t){z.disabledAttrWarning()}ngOnChanges(e){this._added||this._setUpControl(),$(e,this.viewModel)&&(W("formControlName",t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return P(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return R(this._rawValidators)}get asyncValidator(){return F(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof pt)&&this._parent instanceof st?z.ngModelGroupException():this._parent instanceof pt||this._parent instanceof dt||this._parent instanceof ft||z.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t._ngModelWarningSentOnce=!1,t})();class bt{}class yt{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,s=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,s=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new J(n,{asyncValidators:i,updateOn:s,validators:r})}control(t,e,n){return new Q(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new tt(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Q||t instanceof J||t instanceof tt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}class vt{static withConfig(t){return{ngModule:vt,providers:[{provide:it,useValue:t.warnOnDeprecatedNgFormSelector}]}}}class _t{static withConfig(t){return{ngModule:_t,providers:[{provide:ct,useValue:t.warnOnNgModelWithFormControl}]}}}},ssPz:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n("YZbJ"),i=n("DQLy"),s=n("eBR6"),o=n("6+H1"),l=n("calH"),a=n("DVTi"),u=n("kujU"),c=n("PqYM"),h=n("AWIJ"),d=n("hLrw"),p=n("8Y7J");let f=(()=>{class t{constructor(t){this.store$=t,this.store$.pipe(Object(i.z)(d.f)).subscribe(t=>this.playerState=t),this.store$.pipe(Object(i.z)(h.b)).subscribe(t=>this.memberState=t)}selectPlayList({list:t,index:e}){this.store$.dispatch(Object(o.f)({songList:t}));let n=e,r=t.slice();"random"===this.playerState.playMode.type&&(r=Object(l.c)(t||[]),n=Object(l.a)(r,t[n])),this.store$.dispatch(Object(o.c)({playList:r})),this.store$.dispatch(Object(o.b)({currentIndex:n})),this.store$.dispatch(Object(o.a)({currentAction:s.a.Play}))}insertSong(t,e){const n=this.playerState.songList.slice();let r=this.playerState.playList.slice(),i=this.playerState.currentIndex;const a=Object(l.a)(r,t);a>-1?e&&(i=a):(n.push(t),e&&(i=n.length-1),"random"===this.playerState.playMode.type?r=Object(l.c)(n):r.push(t),this.store$.dispatch(Object(o.f)({songList:n})),this.store$.dispatch(Object(o.c)({playList:r}))),i!==this.playerState.currentIndex?(this.store$.dispatch(Object(o.b)({currentIndex:i})),this.store$.dispatch(Object(o.a)({currentAction:s.a.Play}))):this.store$.dispatch(Object(o.a)({currentAction:s.a.Add}))}insertSongs(t){let e=this.playerState.songList.slice(),n=this.playerState.playList.slice();const r=t.filter(t=>-1===Object(l.a)(n,t));if(r.length){e=e.concat(r);let t=r.slice();"random"===this.playerState.playMode.type&&(t=Object(l.c)(e)),n=n.concat(t),this.store$.dispatch(Object(o.f)({songList:e})),this.store$.dispatch(Object(o.c)({playList:n}))}this.store$.dispatch(Object(o.a)({currentAction:s.a.Add}))}deleteSong(t){const e=this.playerState.songList.slice(),n=this.playerState.playList.slice();let r=this.playerState.currentIndex;const i=Object(l.a)(e,t);e.splice(i,1);const a=Object(l.a)(n,t);n.splice(a,1),(r>a||r===n.length)&&r--,this.store$.dispatch(Object(o.f)({songList:e})),this.store$.dispatch(Object(o.c)({playList:n})),this.store$.dispatch(Object(o.b)({currentIndex:r})),this.store$.dispatch(Object(o.a)({currentAction:s.a.Delete}))}clearSong(){this.store$.dispatch(Object(o.f)({songList:[]})),this.store$.dispatch(Object(o.c)({playList:[]})),this.store$.dispatch(Object(o.b)({currentIndex:-1})),this.store$.dispatch(Object(o.a)({currentAction:s.a.Clear}))}controlModal(t=!0,e){e&&this.store$.dispatch(Object(u.b)({modalType:e})),this.store$.dispatch(Object(u.c)({modalVisible:t})),t||Object(c.a)(500).subscribe(()=>this.store$.dispatch(Object(u.b)({modalType:a.a.Default})))}likeSong(t){this.store$.dispatch(Object(u.b)({modalType:a.a.Like})),this.store$.dispatch(Object(u.a)({id:t}))}}return t.ngInjectableDef=p.Tb({factory:function(){return new t(p.Ub(i.m))},token:t,providedIn:r.a}),t})()},sunR:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t),i=r(e);return 12*(n.getFullYear()-i.getFullYear())+(n.getMonth()-i.getMonth())}},t4eL:function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return v});var r=n("8Y7J"),i=n("mW00"),s=n("SVse"),o=n("zMNK"),l=n("5VGP"),a=n("Rgb0"),u=n("cUpR"),c=r.rb({encapsulation:2,styles:[],data:{}});function h(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-empty",[["class","ant-empty-normal ant-empty"]],null,null,null,O,_)),r.sb(1,770048,null,0,i.b,[u.b,a.d,r.h],{nzNotFoundImage:[0,"nzNotFoundImage"]},null)],function(t,e){t(e,1,0,e.component.defaultSvg)},null)}function d(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-empty",[["class","ant-empty-small ant-empty"]],null,null,null,O,_)),r.sb(1,770048,null,0,i.b,[u.b,a.d,r.h],{nzNotFoundImage:[0,"nzNotFoundImage"]},null)],function(t,e){t(e,1,0,e.component.defaultSvg)},null)}function p(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-empty",[["class","ant-empty"]],null,null,null,O,_)),r.sb(1,770048,null,0,i.b,[u.b,a.d,r.h],null,null)],function(t,e){t(e,1,0)},null)}function f(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,7,null,null,null,null,null,null,null)),r.sb(1,16384,null,0,s.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,h)),r.sb(3,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,d)),r.sb(5,278528,null,0,s.q,[r.P,r.L,s.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,p)),r.sb(7,16384,null,0,s.r,[r.P,r.L,s.p],null,null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.size),t(e,3,0,"normal"),t(e,5,0,"small")},null)}function g(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function m(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,g)),r.sb(1,212992,null,0,o.a,[r.j,r.P],{portal:[0,"portal"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.contentPortal)},null)}function b(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.component.content)})}function y(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,m)),r.sb(2,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,b)),r.sb(4,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,"string"!==n.contentType),t(e,4,0,"string"===n.contentType)},null)}function v(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,f)),r.sb(1,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,y)),r.sb(3,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,!n.content&&null!==n.specificContent),t(e,3,0,n.content)},null)}var _=r.rb({encapsulation:2,styles:["nz-empty { display: block; }"],data:{}});function w(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,1,0,n.nzNotFoundImage||n.defaultSvg,n.isContentString?n.nzNotFoundContent:"empty")})}function x(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,1,0,n.shouldRenderContent?n.nzNotFoundContent:n.locale.description)})}function C(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.component.nzNotFoundFooter)})}function S(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-empty-footer"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,C)),r.sb(2,540672,null,0,l.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzNotFoundFooter)},null)}function O(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-empty-image"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,w)),r.sb(2,540672,null,0,l.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.tb(3,0,null,null,2,"p",[["class","ant-empty-description"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,x)),r.sb(5,540672,null,0,l.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,S)),r.sb(7,16384,null,0,s.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzNotFoundImage),t(e,5,0,n.nzNotFoundContent),t(e,7,0,n.nzNotFoundFooter)},null)}},t4rR:function(t,e,n){var r=n("yNUO"),i=n("iUbB");t.exports=function(t,e,n){var s=n&&Number(n.weekStartsOn)||0,o=r(t),l=Number(e),a=o.getDay();return i(o,((l%7+7)%7<s?7:0)+l-a)}},tMf1:function(t,e,n){var r=n("x84W");t.exports=function(t){return r(t,{weekStartsOn:1})}},tS1D:function(t,e,n){"use strict";var r=n("D0XW");function i(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}i.prototype=Object.create(Error.prototype);const s=i;var o=n("mlxB"),l=n("l7GE"),a=n("ZUHj");class u{constructor(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}call(t,e){return e.subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class c extends l.a{constructor(t,e,n,r,i){super(t),this.absoluteTimeout=e,this.waitFor=n,this.withObservable=r,this.scheduler=i,this.action=null,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(Object(a.a)(t,e))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(c.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=null,this.scheduler=null,this.withObservable=null}}var h=n("z6cu");function d(t,e=r.a){return function(t,e,n=r.a){return r=>{let i=Object(o.a)(t),s=i?+t-n.now():Math.abs(t);return r.lift(new u(s,i,e,n))}}(t,Object(h.a)(new s),e)}n.d(e,"a",function(){return d})},tYkK:function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return a});var r=n("5VGP"),i=n("XNiG"),s=n("1G5W"),o=n("nYR2"),l=n("JX91");class a{constructor(t,e,n,r,s,o,l){this.elementRef=t,this.renderer=e,this.nzUpdateHostClassService=n,this.mediaMatcher=r,this.ngZone=s,this.platform=o,this.nzDomEventService=l,this.nzAlign="top",this.nzJustify="start",this.el=this.elementRef.nativeElement,this.prefixCls="ant-row",this.actualGutter$=new i.a,this.destroy$=new i.a}calculateGutter(){return"object"!=typeof this.nzGutter?this.nzGutter:this.breakPoint&&this.nzGutter[this.breakPoint]?this.nzGutter[this.breakPoint]:0}updateGutter(){const t=this.calculateGutter();this.actualGutter!==t&&(this.actualGutter=t,this.actualGutter$.next(this.actualGutter),this.renderer.setStyle(this.el,"margin-left",`-${this.actualGutter/2}px`),this.renderer.setStyle(this.el,"margin-right",`-${this.actualGutter/2}px`))}watchMedia(){Object.keys(r.db).map(t=>{const e=t;this.mediaMatcher.matchMedia(r.db[e]).matches&&(this.breakPoint=e)}),this.updateGutter()}setClassMap(){this.nzUpdateHostClassService.updateHostClass(this.el,{[`${this.prefixCls}`]:!this.nzType,[`${this.prefixCls}-${this.nzType}`]:this.nzType,[`${this.prefixCls}-${this.nzType}-${this.nzAlign}`]:this.nzType&&this.nzAlign,[`${this.prefixCls}-${this.nzType}-${this.nzJustify}`]:this.nzType&&this.nzJustify})}ngOnInit(){this.setClassMap(),this.watchMedia()}ngOnChanges(t){(t.nzType||t.nzAlign||t.nzJustify)&&this.setClassMap(),t.nzGutter&&this.updateGutter()}ngAfterViewInit(){this.platform.isBrowser&&this.nzDomEventService.registerResizeListener().pipe(Object(s.a)(this.destroy$),Object(o.a)(()=>this.nzDomEventService.unregisterResizeListener())).subscribe(()=>this.watchMedia())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}class u{constructor(t,e,n,r){this.nzUpdateHostClassService=t,this.elementRef=e,this.nzRowDirective=n,this.renderer=r,this.el=this.elementRef.nativeElement,this.prefixCls="ant-col",this.destroy$=new i.a}setClassMap(){const t=Object.assign({[`${this.prefixCls}-${this.nzSpan}`]:Object(r.T)(this.nzSpan),[`${this.prefixCls}-order-${this.nzOrder}`]:Object(r.T)(this.nzOrder),[`${this.prefixCls}-offset-${this.nzOffset}`]:Object(r.T)(this.nzOffset),[`${this.prefixCls}-pull-${this.nzPull}`]:Object(r.T)(this.nzPull),[`${this.prefixCls}-push-${this.nzPush}`]:Object(r.T)(this.nzPush)},this.generateClass());this.nzUpdateHostClassService.updateHostClass(this.el,t)}generateClass(){const t={};return["nzXs","nzSm","nzMd","nzLg","nzXl","nzXXl"].forEach(e=>{const n=e.replace("nz","").toLowerCase();if(Object(r.T)(this[e]))if("number"==typeof this[e]||"string"==typeof this[e])t[`${this.prefixCls}-${n}-${this[e]}`]=!0;else{const i=this[e];["span","pull","push","offset","order"].forEach(e=>{t[`${this.prefixCls}-${n}${"span"===e?"-":`-${e}-`}${i[e]}`]=i&&Object(r.T)(i[e])})}}),t}ngOnChanges(){this.setClassMap()}ngAfterViewInit(){this.nzRowDirective&&this.nzRowDirective.actualGutter$.pipe(Object(l.a)(this.nzRowDirective.actualGutter),Object(s.a)(this.destroy$)).subscribe(t=>{this.renderer.setStyle(this.el,"padding-left",`${t/2}px`),this.renderer.setStyle(this.el,"padding-right",`${t/2}px`)})}ngOnInit(){this.setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}class c{}},tboP:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n("7kRp");const r={title:"\u6b4c\u5355"};class i{}},"tg+8":function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getDate()}},u3z5:function(t,e,n){var r=n("yHON"),i=n("yNUO"),s=n("4Toj"),o=n("Us+F");t.exports=function(t,e,n){var l=n||{},a=r(t,e),u=l.locale,c=o.distanceInWords.localize;u&&u.distanceInWords&&u.distanceInWords.localize&&(c=u.distanceInWords.localize);var h,d,p,f={addSuffix:Boolean(l.addSuffix),comparison:a};a>0?(h=i(t),d=i(e)):(h=i(e),d=i(t));var g=Math[l.partialMethod?String(l.partialMethod):"floor"],m=s(d,h),b=d.getTimezoneOffset()-h.getTimezoneOffset(),y=g(m/60)-b;if("s"===(p=l.unit?String(l.unit):y<1?"s":y<60?"m":y<1440?"h":y<43200?"d":y<525600?"M":"Y"))return c("xSeconds",m,f);if("m"===p)return c("xMinutes",y,f);if("h"===p)return c("xHours",g(y/60),f);if("d"===p)return c("xDays",g(y/1440),f);if("M"===p)return c("xMonths",g(y/43200),f);if("Y"===p)return c("xYears",g(y/525600),f);throw new Error("Unknown unit: "+p)}},uHTM:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("IheW"),i=n("yrbL"),s=n("cr+I"),o=n.n(s),l=n("8Y7J"),a=n("334H");const u={offset:0,limit:9,cat:"5001"};let c=(()=>{class t{constructor(t,e){this.http=t,this.uri=e}getEnterSinger(t=u){const e=new r.i({fromString:o.a.stringify(t)});return this.http.get(this.uri+"artist/list",{params:e}).pipe(Object(i.map)(t=>t.artists))}getSingerDetail(t){const e=(new r.i).set("id",t);return this.http.get(this.uri+"artists",{params:e}).pipe(Object(i.map)(t=>t))}getSimiSinger(t){const e=(new r.i).set("id",t);return this.http.get(this.uri+"simi/artist",{params:e}).pipe(Object(i.map)(t=>t.artists))}}return t.ngInjectableDef=l.Tb({factory:function(){return new t(l.Ub(r.c),l.Ub(a.a))},token:t,providedIn:a.b}),t})()},uKeJ:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(0,0,0,0),e}},uPm0:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t);return Math.floor(e.getMonth()/3)+1}},uXFP:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("ds6q");e.windowCount=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new o(t,e))}};var o=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.windowSize,this.startWindowEvery))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new s.Subject],i.count=0,e.next(i.windows[0]),i}return r(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,l=0;l<o&&!this.closed;l++)i[l].next(t);var a=this.count-r+1;if(a>=0&&a%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var u=new s.Subject;i.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(i.Subscriber)},uttN:function(t,e,n){var r=n("7B8A");t.exports=function(t,e){var n=Number(e);return r(t,-n)}},v1Dh:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("mrSG"),n("8Y7J"),n("5VGP");class r{}},v67d:function(t,e,n){"use strict";var r=n("8Y7J"),i=n("haRT"),s=n("EdU/"),o=n("SVse"),l=n("s7LF"),a=(n("POq0"),n("QQfA")),u=n("IP0z"),c=n("/HVE"),h=n("5VGP"),d=n("66zS"),p=(n("GaVp"),n("zMNK"),n("hOhj")),f=n("/L1H"),g=n("kS4m"),m=n("CYS+"),b=n("phDe"),y=n("Rgb0"),v=n("mW00"),_=(n("jTf7"),n("vZsH")),w=n("fb/r"),x=r.rb({encapsulation:2,styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:0}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:0}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}"],data:{}});function C(t){return r.Pb(2,[r.Lb(402653184,1,{_contentWrapper:0}),(t()(),r.tb(1,0,[[1,0],["contentWrapper",1]],null,1,"div",[["class","cdk-virtual-scroll-content-wrapper"]],null,null,null,null,null)),r.Eb(null,0),(t()(),r.tb(3,0,null,null,0,"div",[["class","cdk-virtual-scroll-spacer"]],[[4,"width",null],[4,"height",null]],null,null,null,null))],null,function(t,e){var n=e.component;t(e,3,0,n._totalContentWidth,n._totalContentHeight)})}var S=n("t4eL"),O=n("cUpR"),k=n("ZTLX"),E=n("NVjP"),T=n("9iie"),z=n("5GAg"),P=n("iInd"),I=n("UO0F");n.d(e,"a",function(){return M}),n.d(e,"e",function(){return ft}),n.d(e,"b",function(){return gt}),n.d(e,"f",function(){return _t}),n.d(e,"c",function(){return wt}),n.d(e,"g",function(){return Nt}),n.d(e,"d",function(){return Rt}),n.d(e,"h",function(){return jt});var M=r.rb({encapsulation:2,styles:["\n      nz-table {\n        display: block;\n      }\n\n      cdk-virtual-scroll-viewport.ant-table-body {\n        overflow-y: scroll;\n      }\n    "],data:{}});function D(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"a",[["class","ant-pagination-item-link"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["nz-icon",""],["nzType","left"]],null,null,null,null,null)),r.sb(2,2834432,null,0,d.a,[d.c,r.k,r.D,c.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,2,0,"left")},null)}function A(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"a",[["class","ant-pagination-item-link"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["nz-icon",""],["nzType","right"]],null,null,null,null,null)),r.sb(2,2834432,null,0,d.a,[d.c,r.k,r.D,c.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,2,0,"right")},null)}function N(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"a",[],null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.page)})}function R(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,D)),r.sb(1,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,A)),r.sb(3,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,N)),r.sb(5,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,"pre"===e.context.$implicit),t(e,3,0,"next"===e.context.$implicit),t(e,5,0,"page"==e.context.$implicit)},null)}function F(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"col",[],[[4,"width",null],[4,"minWidth",null]],null,null,null,null))],null,function(t,e){t(e,0,0,e.context.$implicit,e.context.$implicit)})}function $(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"col",[],[[4,"width",null],[4,"minWidth",null]],null,null,null,null))],null,function(t,e){t(e,0,0,e.context.$implicit.nzWidth,e.context.$implicit.nzWidth)})}function L(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"colgroup",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,F)),r.sb(2,278528,null,0,o.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.ib(16777216,null,null,1,null,$)),r.sb(4,278528,null,0,o.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzWidthConfig),t(e,4,0,n.listOfNzThComponent)},null)}function j(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function B(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function V(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"thead",[["class","ant-table-thead"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,B)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,null==n.nzTheadComponent?null:n.nzTheadComponent.templateRef)},null)}function W(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,j)),r.sb(1,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,V)),r.sb(3,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,r.Fb(e.parent,7)),t(e,3,0,!n.nzScroll.y)},null)}function U(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function H(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function G(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"thead",[["class","ant-table-thead"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,H)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,null==n.nzTheadComponent?null:n.nzTheadComponent.templateRef)},null)}function q(t){return r.Pb(0,[(t()(),r.tb(0,0,[[1,0],["tableHeaderElement",1]],null,7,"div",[["class","ant-table-header"]],null,null,null,null,null)),r.Kb(512,null,o.F,o.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,o.o,[o.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.tb(3,0,null,null,4,"table",[],[[2,"ant-table-fixed",null],[4,"width",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,U)),r.sb(5,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,G)),r.sb(7,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.headerBottomStyle),t(e,5,0,r.Fb(e.parent.parent,7)),t(e,7,0,n.nzScroll.y)},function(t,e){var n=e.component;t(e,3,0,n.nzScroll.x,n.nzScroll.x)})}function K(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Y(t){return r.Pb(0,[(t()(),r.tb(0,0,[[2,0],["tableBodyElement",1]],null,5,"div",[["class","ant-table-body"]],[[4,"maxHeight",null],[4,"overflow-y",null],[4,"overflow-x",null]],null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"table",[],[[2,"ant-table-fixed",null],[4,"width",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,K)),r.sb(3,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.sb(4,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),r.Eb(null,0)],function(t,e){t(e,3,0,!e.component.nzVirtualScroll),t(e,4,0,r.Fb(e.parent.parent,8))},function(t,e){var n=e.component;t(e,0,0,n.nzScroll.y,n.nzScroll.y?"scroll":"",n.nzScroll.x?"auto":""),t(e,1,0,n.nzScroll.x,n.nzScroll.x)})}function X(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Z(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Q(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,Z)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(3,{$implicit:0,index:1}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,r=t(e,3,0,e.context.$implicit,e.context.index);t(e,2,0,r,null==n.nzVirtualScrollDirective?null:n.nzVirtualScrollDirective.templateRef)},null)}function J(t){return r.Pb(0,[(t()(),r.tb(0,0,[[4,0]],null,12,"cdk-virtual-scroll-viewport",[["class","ant-table-body cdk-virtual-scroll-viewport"]],[[8,"hidden",0],[4,"height",null],[2,"cdk-virtual-scroll-orientation-horizontal",null],[2,"cdk-virtual-scroll-orientation-vertical",null]],null,null,C,x)),r.Kb(6144,null,p.b,null,[p.d]),r.sb(2,540672,null,0,p.a,[],{itemSize:[0,"itemSize"],minBufferPx:[1,"minBufferPx"],maxBufferPx:[2,"maxBufferPx"]},null),r.Kb(1024,null,p.i,p.k,[p.a]),r.sb(4,245760,[[5,4]],0,p.d,[r.k,r.h,r.y,[2,p.i],[2,u.b],p.f],null,null),(t()(),r.tb(5,0,null,0,7,"table",[],[[2,"ant-table-fixed",null],[4,"width",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,X)),r.sb(7,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.sb(8,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.tb(9,0,null,null,3,"tbody",[],[[2,"ant-table-tbody",null]],null,null,null,null)),r.sb(10,16384,null,0,i.c,[[2,i.a]],null,null),(t()(),r.ib(16777216,null,null,1,null,Q)),r.sb(12,409600,null,0,p.c,[r.P,r.L,r.r,[1,p.d],r.y],{cdkVirtualForOf:[0,"cdkVirtualForOf"],cdkVirtualForTrackBy:[1,"cdkVirtualForTrackBy"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzVirtualItemSize,n.nzVirtualMinBufferPx,n.nzVirtualMaxBufferPx),t(e,4,0),t(e,7,0,n.nzVirtualScroll),t(e,8,0,r.Fb(e.parent.parent,8)),t(e,12,0,n.data,n.nzVirtualForTrackBy)},function(t,e){var n=e.component;t(e,0,0,!n.data.length,n.nzScroll.y,"horizontal"===r.Fb(e,4).orientation,"horizontal"!==r.Fb(e,4).orientation),t(e,5,0,n.nzScroll.x,n.nzScroll.x),t(e,9,0,r.Fb(e,10).nzTableComponent)})}function tt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-table-placeholder"]],null,null,null,null,null)),(t()(),r.tb(1,16777216,null,null,1,"nz-embed-empty",[],null,null,null,S.b,S.a)),r.sb(2,770048,null,0,v.a,[v.d,O.b,r.P,r.h,r.q],{nzComponentName:[0,"nzComponentName"],specificContent:[1,"specificContent"]},null)],function(t,e){t(e,2,0,"table",e.component.nzNoResult)},null)}function et(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzFooter)})}function nt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-table-footer"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,et)),r.sb(2,540672,null,0,h.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzFooter)},null)}function rt(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,q)),r.sb(1,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Y)),r.sb(3,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["scrollViewTpl",2]],null,0,null,J)),(t()(),r.ib(16777216,null,null,1,null,tt)),r.sb(6,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,nt)),r.sb(8,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,n.nzScroll.y),t(e,3,0,!n.nzVirtualScroll,r.Fb(e,4)),t(e,6,0,0===n.data.length&&!n.nzLoading&&!n.nzTemplateMode),t(e,8,0,n.nzFooter)},null)}function it(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-pagination",[],null,[[null,"nzPageSizeChange"],[null,"nzPageIndexChange"]],function(t,e,n){var r=!0,i=t.component;return"nzPageSizeChange"===e&&(r=!1!==i.emitPageSizeOrIndex(n,i.nzPageIndex)&&r),"nzPageIndexChange"===e&&(r=!1!==i.emitPageSizeOrIndex(i.nzPageSize,n)&&r),r},k.b,k.a)),r.sb(1,770048,null,0,_.a,[y.d,r.h],{nzShowTotal:[0,"nzShowTotal"],nzInTable:[1,"nzInTable"],nzSize:[2,"nzSize"],nzPageSizeOptions:[3,"nzPageSizeOptions"],nzItemRender:[4,"nzItemRender"],nzShowSizeChanger:[5,"nzShowSizeChanger"],nzHideOnSinglePage:[6,"nzHideOnSinglePage"],nzShowQuickJumper:[7,"nzShowQuickJumper"],nzSimple:[8,"nzSimple"],nzTotal:[9,"nzTotal"],nzPageIndex:[10,"nzPageIndex"],nzPageSize:[11,"nzPageSize"]},{nzPageSizeChange:"nzPageSizeChange",nzPageIndexChange:"nzPageIndexChange"})],function(t,e){var n=e.component;t(e,1,1,[n.nzShowTotal,!0,"default"===n.nzSize?"default":"small",n.nzPageSizeOptions,n.nzItemRender,n.nzShowSizeChanger,n.nzHideOnSinglePage,n.nzShowQuickJumper,n.nzSimple,n.nzTotal,n.nzPageIndex,n.nzPageSize])},null)}function st(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,it)),r.sb(1,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,n.nzShowPagination&&n.data.length)},null)}function ot(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function lt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ot)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent,10))},null)}function at(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function ut(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-table-title"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,at)),r.sb(2,540672,null,0,h.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzTitle)},null)}function ct(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function ht(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,2,"div",[["class","ant-table-scroll"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ct)),r.sb(3,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){t(e,3,0,r.Fb(e.parent,9))},null)}function dt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function pt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,dt)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent,10))},null)}function ft(t){return r.Pb(2,[r.Lb(671088640,1,{tableHeaderElement:0}),r.Lb(671088640,2,{tableBodyElement:0}),r.Lb(671088640,3,{tableMainElement:0}),r.Lb(671088640,4,{cdkVirtualScrollElement:0}),r.Lb(671088640,5,{cdkVirtualScrollViewport:0}),r.Lb(402653184,6,{nzItemRender:0}),(t()(),r.ib(0,[[6,2],["renderItemTemplate",2]],null,0,null,R)),(t()(),r.ib(0,[["colGroupTemplate",2]],null,0,null,L)),(t()(),r.ib(0,[["headerTemplate",2]],null,0,null,W)),(t()(),r.ib(0,[["tableInnerTemplate",2]],null,0,null,rt)),(t()(),r.ib(0,[["paginationTemplate",2]],null,0,null,st)),(t()(),r.tb(11,0,null,null,11,"nz-spin",[],[[2,"ant-spin-nested-loading",null]],null,null,E.b,E.a)),r.sb(12,770048,null,0,w.a,[r.h],{nzIndicator:[0,"nzIndicator"],nzDelay:[1,"nzDelay"],nzSpinning:[2,"nzSpinning"]},null),(t()(),r.ib(16777216,null,0,1,null,lt)),r.sb(14,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(15,0,[[3,0],["tableMainElement",1]],0,5,"div",[["class","ant-table"]],[[2,"ant-table-fixed-header",null],[2,"ant-table-bordered",null],[2,"ant-table-default",null],[2,"ant-table-middle",null],[2,"ant-table-small",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ut)),r.sb(17,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(18,0,null,null,2,"div",[["class","ant-table-content"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ht)),r.sb(20,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(16777216,null,0,1,null,pt)),r.sb(22,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,12,0,n.nzLoadingIndicator,n.nzLoadingDelay,n.nzLoading),t(e,14,0,"both"===n.nzPaginationPosition||"top"===n.nzPaginationPosition),t(e,17,0,n.nzTitle),t(e,20,0,n.nzScroll.x||n.nzScroll.y,r.Fb(e,9)),t(e,22,0,"both"===n.nzPaginationPosition||"bottom"===n.nzPaginationPosition)},function(t,e){var n=e.component;t(e,11,0,!r.Fb(e,12).nzSimple),t(e,15,0,n.nzScroll.x||n.nzScroll.y,n.nzBordered,"default"===n.nzSize,"middle"===n.nzSize,"small"===n.nzSize)})}var gt=r.rb({encapsulation:2,styles:[],data:{}});function mt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"span",[["class","ant-table-row-indent"]],[[4,"padding-left","px"]],null,null,null,null))],null,function(t,e){t(e,0,0,e.component.nzIndentSize)})}function bt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"label",[["nz-checkbox",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,1).hostClick(n)&&i),"ngModelChange"===e&&(i=!1!==(s.nzChecked=n)&&i),"ngModelChange"===e&&(i=!1!==s.nzCheckedChange.emit(n)&&i),i},T.b,T.a)),r.sb(1,4964352,null,0,m.a,[r.k,r.D,[2,m.d],r.h,z.a],{nzDisabled:[0,"nzDisabled"],nzIndeterminate:[1,"nzIndeterminate"]},null),r.Kb(1024,null,l.l,function(t){return[t]},[m.a]),r.sb(3,671744,null,0,l.p,[[8,null],[8,null],[8,null],[6,l.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,l.m,null,[l.p]),r.sb(5,16384,null,0,l.n,[[4,l.m]],null,null)],function(t,e){var n=e.component;t(e,1,0,n.nzDisabled,n.nzIndeterminate),t(e,3,0,n.nzChecked)},function(t,e){t(e,0,0,r.Fb(e,5).ngClassUntouched,r.Fb(e,5).ngClassTouched,r.Fb(e,5).ngClassPristine,r.Fb(e,5).ngClassDirty,r.Fb(e,5).ngClassValid,r.Fb(e,5).ngClassInvalid,r.Fb(e,5).ngClassPending)})}function yt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"span",[["class","ant-table-row-expand-icon ant-table-row-spaced"]],null,null,null,null,null))],null,null)}function vt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"span",[["class","ant-table-row-expand-icon"]],[[2,"ant-table-row-expanded",null],[2,"ant-table-row-collapsed",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.expandChange(n)&&r),r},null,null))],null,function(t,e){var n=e.component;t(e,0,0,n.nzExpand,!n.nzExpand)})}function _t(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,mt)),r.sb(1,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,bt)),r.sb(3,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,yt)),r.sb(5,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,vt)),r.sb(7,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.Eb(null,0)],function(t,e){var n=e.component;t(e,1,0,n.nzIndentSize>=0),t(e,3,0,n.nzShowCheckbox),t(e,5,0,!n.nzShowExpand&&n.nzIndentSize>=0),t(e,7,0,n.nzShowExpand)},null)}var wt=r.rb({encapsulation:2,styles:[],data:{}});function xt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"label",[["nz-checkbox",""]],[[2,"ant-table-selection-select-all-custom",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,1).hostClick(n)&&i),"ngModelChange"===e&&(i=!1!==(s.nzChecked=n)&&i),"ngModelChange"===e&&(i=!1!==s.nzCheckedChange.emit(n)&&i),i},T.b,T.a)),r.sb(1,4964352,null,0,m.a,[r.k,r.D,[2,m.d],r.h,z.a],{nzDisabled:[0,"nzDisabled"],nzIndeterminate:[1,"nzIndeterminate"]},null),r.Kb(1024,null,l.l,function(t){return[t]},[m.a]),r.sb(3,671744,null,0,l.p,[[8,null],[8,null],[8,null],[6,l.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,l.m,null,[l.p]),r.sb(5,16384,null,0,l.n,[[4,l.m]],null,null)],function(t,e){var n=e.component;t(e,1,0,n.nzDisabled,n.nzIndeterminate),t(e,3,0,n.nzChecked)},function(t,e){t(e,0,0,e.component.nzShowRowSelection,r.Fb(e,5).ngClassUntouched,r.Fb(e,5).ngClassTouched,r.Fb(e,5).ngClassPristine,r.Fb(e,5).ngClassDirty,r.Fb(e,5).ngClassValid,r.Fb(e,5).ngClassInvalid,r.Fb(e,5).ngClassPending)})}function Ct(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function St(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ct)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent,1))},null)}function Ot(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function kt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ot)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent.parent,1))},null)}function Et(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,2).clickMenuItem(n)&&i),"click"===e&&(i=!1!==t.context.$implicit.onSelect()&&i),i},null,null)),r.Kb(512,null,h.y,h.y,[r.E]),r.sb(2,1785856,[[2,4]],2,f.c,[h.y,h.p,[2,f.h],r.D,r.k,[2,P.o],[2,P.p],[2,P.n]],null,null),r.Lb(603979776,4,{listOfRouterLink:1}),r.Lb(603979776,5,{listOfRouterLinkWithHref:1}),(t()(),r.Nb(5,null,["",""]))],function(t,e){t(e,2,0)},function(t,e){t(e,5,0,e.context.$implicit.text)})}function Tt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,19,"div",[["class","ant-table-selection"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,kt)),r.sb(2,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(3,16777216,null,null,3,"div",[["class","ant-table-selection-down"],["nz-dropdown",""],["nzPlacement","bottomLeft"]],null,null,null,null,null)),r.sb(4,4866048,null,0,b.d,[r.k,r.D,a.d,c.a,r.P],{nzDropdownMenu:[0,"nzDropdownMenu"],nzPlacement:[1,"nzPlacement"]},null),(t()(),r.tb(5,0,null,null,1,"i",[["nz-icon",""],["nzType","down"]],null,null,null,null,null)),r.sb(6,2834432,null,0,d.a,[d.c,r.k,r.D,c.a],{nzType:[0,"nzType"]},null),(t()(),r.tb(7,16777216,null,null,12,"nz-dropdown-menu",[],null,null,null,s.d,s.c)),r.Kb(512,null,b.i,b.i,[]),r.sb(9,1097728,[[1,4],["selectionMenu",4]],0,b.g,[r.h,r.k,r.D,r.P,b.i,[8,null]],null,null),r.Kb(1024,null,h.o,b.j,[[4,r.q]]),(t()(),r.tb(11,0,null,0,8,"ul",[["class","ant-table-selection-menu"],["nz-menu",""]],null,null,null,null,null)),r.Kb(512,null,f.e,f.e,[]),r.Kb(1024,null,h.p,f.f,[[3,h.o],f.e]),r.Kb(512,null,h.y,h.y,[r.E]),r.sb(15,1785856,null,2,f.a,[r.k,h.p,h.y],null,null),r.Lb(603979776,2,{listOfNzMenuItemDirective:1}),r.Lb(603979776,3,{listOfNzSubMenuComponent:1}),(t()(),r.ib(16777216,null,null,1,null,Et)),r.sb(19,278528,null,0,o.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzShowCheckbox),t(e,4,0,r.Fb(e,9),"bottomLeft"),t(e,6,0,"down"),t(e,15,0),t(e,19,0,n.nzSelections)},null)}function zt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"div",[["class","ant-table-column-sorter"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"div",[["class","ant-table-column-sorter-inner ant-table-column-sorter-inner-full"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"i",[["class","ant-table-column-sorter-up"],["nz-icon",""],["nzType","caret-up"]],[[2,"on",null],[2,"off",null]],null,null,null,null)),r.sb(3,2834432,null,0,d.a,[d.c,r.k,r.D,c.a],{nzType:[0,"nzType"]},null),(t()(),r.tb(4,0,null,null,1,"i",[["class","ant-table-column-sorter-down"],["nz-icon",""],["nzType","caret-down"]],[[2,"on",null],[2,"off",null]],null,null,null,null)),r.sb(5,2834432,null,0,d.a,[d.c,r.k,r.D,c.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,3,0,"caret-up"),t(e,5,0,"caret-down")},function(t,e){var n=e.component;t(e,2,0,"ascend"==n.nzSort,"ascend"!=n.nzSort),t(e,4,0,"descend"==n.nzSort,"descend"!=n.nzSort)})}function Pt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,12,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,2).clickMenuItem(n)&&i),"click"===e&&(i=!1!==s.checkMultiple(t.context.$implicit)&&i),i},null,null)),r.Kb(512,null,h.y,h.y,[r.E]),r.sb(2,1785856,[[6,4]],2,f.c,[h.y,h.p,[2,f.h],r.D,r.k,[2,P.o],[2,P.p],[2,P.n]],null,null),r.Lb(603979776,8,{listOfRouterLink:1}),r.Lb(603979776,9,{listOfRouterLinkWithHref:1}),(t()(),r.tb(5,0,null,null,5,"label",[["nz-checkbox",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,6).hostClick(n)&&i),"ngModelChange"===e&&(i=!1!==s.checkMultiple(t.context.$implicit)&&i),i},T.b,T.a)),r.sb(6,4964352,null,0,m.a,[r.k,r.D,[2,m.d],r.h,z.a],null,null),r.Kb(1024,null,l.l,function(t){return[t]},[m.a]),r.sb(8,671744,null,0,l.p,[[8,null],[8,null],[8,null],[6,l.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,l.m,null,[l.p]),r.sb(10,16384,null,0,l.n,[[4,l.m]],null,null),(t()(),r.tb(11,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(12,null,["",""]))],function(t,e){t(e,2,0),t(e,6,0),t(e,8,0,e.context.$implicit.checked)},function(t,e){t(e,5,0,r.Fb(e,10).ngClassUntouched,r.Fb(e,10).ngClassTouched,r.Fb(e,10).ngClassPristine,r.Fb(e,10).ngClassDirty,r.Fb(e,10).ngClassValid,r.Fb(e,10).ngClassInvalid,r.Fb(e,10).ngClassPending),t(e,12,0,e.context.$implicit.text)})}function It(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Pt)),r.sb(2,278528,null,0,o.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,e.component.multipleFilterList)},null)}function Mt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,11,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,2).clickMenuItem(n)&&i),"click"===e&&(i=!1!==s.checkSingle(t.context.$implicit)&&i),i},null,null)),r.Kb(512,null,h.y,h.y,[r.E]),r.sb(2,1785856,[[6,4]],2,f.c,[h.y,h.p,[2,f.h],r.D,r.k,[2,P.o],[2,P.p],[2,P.n]],null,null),r.Lb(603979776,10,{listOfRouterLink:1}),r.Lb(603979776,11,{listOfRouterLinkWithHref:1}),(t()(),r.tb(5,0,null,null,6,"label",[["nz-radio",""]],[[2,"ant-radio-wrapper-checked",null],[2,"ant-radio-wrapper-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,6).onClick(n)&&i),"ngModelChange"===e&&(i=!1!==s.checkSingle(t.context.$implicit)&&i),i},I.e,I.b)),r.sb(6,4898816,null,0,g.b,[r.k,r.D,r.h,z.a],null,null),r.Kb(1024,null,l.l,function(t){return[t]},[g.b]),r.sb(8,671744,null,0,l.p,[[8,null],[8,null],[8,null],[6,l.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,l.m,null,[l.p]),r.sb(10,16384,null,0,l.n,[[4,l.m]],null,null),(t()(),r.Nb(11,0,["",""]))],function(t,e){t(e,2,0),t(e,8,0,e.context.$implicit.checked)},function(t,e){t(e,5,0,r.Fb(e,6).checked,r.Fb(e,6).nzDisabled,r.Fb(e,10).ngClassUntouched,r.Fb(e,10).ngClassTouched,r.Fb(e,10).ngClassPristine,r.Fb(e,10).ngClassDirty,r.Fb(e,10).ngClassValid,r.Fb(e,10).ngClassInvalid,r.Fb(e,10).ngClassPending),t(e,11,0,e.context.$implicit.text)})}function Dt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Mt)),r.sb(2,278528,null,0,o.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,e.component.singleFilterList)},null)}function At(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,25,null,null,null,null,null,null,null)),(t()(),r.tb(1,16777216,null,null,2,"i",[["nz-dropdown",""],["nz-icon",""],["nzTableFilter",""],["nzTheme","fill"],["nzTrigger","click"],["nzType","filter"]],[[2,"ant-table-filter-selected",null],[2,"ant-table-filter-open",null]],[[null,"nzVisibleChange"]],function(t,e,n){var r=!0;return"nzVisibleChange"===e&&(r=!1!==t.component.dropDownVisibleChange(n)&&r),r},null,null)),r.sb(2,4866048,null,0,b.d,[r.k,r.D,a.d,c.a,r.P],{nzDropdownMenu:[0,"nzDropdownMenu"],nzTrigger:[1,"nzTrigger"],nzClickHide:[2,"nzClickHide"],nzTableFilter:[3,"nzTableFilter"]},{nzVisibleChange:"nzVisibleChange"}),r.sb(3,2834432,null,0,d.a,[d.c,r.k,r.D,c.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.tb(4,16777216,null,null,21,"nz-dropdown-menu",[],null,null,null,s.d,s.c)),r.Kb(512,null,b.i,b.i,[]),r.sb(6,1097728,[[1,4],["filterMenu",4]],0,b.g,[r.h,r.k,r.D,r.P,b.i,[8,null]],null,null),r.Kb(1024,null,h.o,b.j,[[4,r.q]]),(t()(),r.tb(8,0,null,0,10,"ul",[["nz-menu",""]],null,null,null,null,null)),r.Kb(512,null,f.e,f.e,[]),r.Kb(1024,null,h.p,f.f,[[3,h.o],f.e]),r.Kb(512,null,h.y,h.y,[r.E]),r.sb(12,1785856,null,2,f.a,[r.k,h.p,h.y],null,null),r.Lb(603979776,6,{listOfNzMenuItemDirective:1}),r.Lb(603979776,7,{listOfNzSubMenuComponent:1}),(t()(),r.ib(16777216,null,null,1,null,It)),r.sb(16,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Dt)),r.sb(18,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(19,0,null,0,6,"div",[["class","ant-table-filter-dropdown-btns"]],null,null,null,null,null)),(t()(),r.tb(20,0,null,null,2,"a",[["class","ant-table-filter-dropdown-link confirm"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.hideDropDown()&&r),r},null,null)),(t()(),r.tb(21,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(22,null,["",""])),(t()(),r.tb(23,0,null,null,2,"a",[["class","ant-table-filter-dropdown-link clear"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(i.reset(),r=!1!==i.hideDropDown()&&r),r},null,null)),(t()(),r.tb(24,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(25,null,["",""])),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,r.Fb(e,6),"click",!1,""),t(e,3,0,"filter","fill"),t(e,12,0),t(e,16,0,n.nzFilterMultiple),t(e,18,0,!n.nzFilterMultiple)},function(t,e){var n=e.component;t(e,1,0,n.hasFilterValue,n.filterVisible),t(e,22,0,n.locale.filterConfirm),t(e,25,0,n.locale.filterReset)})}function Nt(t){return r.Pb(2,[r.Lb(671088640,1,{nzDropdownMenuComponent:0}),(t()(),r.ib(0,[["checkboxTemplate",2]],null,0,null,xt)),(t()(),r.tb(2,0,null,null,10,"span",[["class","ant-table-header-column"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,9,"div",[],[[2,"ant-table-column-sorters",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.updateSortValue()&&r),r},null,null)),(t()(),r.tb(4,0,null,null,5,"span",[["class","ant-table-column-title"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,St)),r.sb(6,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Tt)),r.sb(8,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.Eb(null,0),r.Eb(null,1),(t()(),r.ib(16777216,null,null,1,null,zt)),r.sb(12,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.Eb(null,2),(t()(),r.ib(16777216,null,null,1,null,At)),r.sb(15,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,6,0,n.nzShowCheckbox&&!n.nzShowRowSelection),t(e,8,0,n.nzShowRowSelection),t(e,12,0,n.nzShowSort),t(e,15,0,n.nzShowFilter)},function(t,e){t(e,3,0,e.component.nzShowSort)})}var Rt=r.rb({encapsulation:2,styles:[],data:{}});function Ft(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function $t(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Lt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,$t)),r.sb(2,540672,null,0,o.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent,1))},null)}function jt(t){return r.Pb(2,[r.Lb(402653184,1,{templateRef:0}),(t()(),r.ib(0,[[1,2],["contentTemplate",2]],null,0,null,Ft)),(t()(),r.ib(16777216,null,null,1,null,Lt)),r.sb(3,16384,null,0,o.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,3,0,!e.component.nzTableComponent)},null)}},vLqr:function(t,e,n){"use strict";var r=n("Q1FS");function i(t){t.subscriber.error(t.error)}e.throwError=function(t,e){return new r.Observable(e?function(n){return e.schedule(i,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}},vUl8:function(t,e,n){var r=n("mrSG").__extends,i=n("ds6q"),s=n("Y4kR"),o=n("cSoz");e.windowWhen=function(t){return function(e){return e.lift(new l(t))}};var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.closingSelector))},t}(),a=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,r=this.window=new i.Subject;this.destination.next(r);try{n=(0,this.closingSelector)()}catch(s){return this.destination.error(s),void this.window.error(s)}this.add(this.closingNotification=o.subscribeToResult(this,n))},e}(s.OuterSubscriber)},vZsH:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("8Y7J"),s=n("XNiG"),o=n("1G5W"),l=n("5VGP");let a=(()=>{class t{constructor(t,e){this.i18n=t,this.cdr=e,this.locale={},this.firstIndex=1,this.pages=[],this.$destroy=new s.a,this.nzPageSizeChange=new i.m,this.nzPageIndexChange=new i.m,this.nzInTable=!1,this.nzSize="default",this.nzPageSizeOptions=[10,20,30,40],this.nzDisabled=!1,this.nzShowSizeChanger=!1,this.nzHideOnSinglePage=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzTotal=0,this.nzPageIndex=1,this.nzPageSize=10}validatePageIndex(t){return t>this.lastIndex?this.lastIndex:t<this.firstIndex?this.firstIndex:t}updatePageIndexValue(t){this.nzPageIndex=t,this.nzPageIndexChange.emit(this.nzPageIndex),this.buildIndexes()}isPageIndexValid(t){return this.validatePageIndex(t)===t}jumpPage(t){if(t!==this.nzPageIndex&&!this.nzDisabled){const e=this.validatePageIndex(t);e!==this.nzPageIndex&&this.updatePageIndexValue(e)}}jumpDiff(t){this.jumpPage(this.nzPageIndex+t)}onPageSizeChange(t){this.nzPageSize=t,this.nzPageSizeChange.emit(t),this.buildIndexes(),this.nzPageIndex>this.lastIndex&&this.updatePageIndexValue(this.lastIndex)}handleKeyDown(t,e,n){const r=e,i=Object(l.ob)(r.value,this.nzPageIndex);Object(l.Q)(i)&&this.isPageIndexValid(i)&&i!==this.nzPageIndex&&this.updatePageIndexValue(i),r.value=n?"":`${this.nzPageIndex}`}buildIndexes(){const t=[];if(this.lastIndex<=9)for(let e=2;e<=this.lastIndex-1;e++)t.push(e);else{const e=+this.nzPageIndex;let n=Math.max(2,e-2),r=Math.min(e+2,this.lastIndex-1);e-1<=2&&(r=5),this.lastIndex-e<=2&&(n=this.lastIndex-4);for(let i=n;i<=r;i++)t.push(i)}this.pages=t,this.cdr.markForCheck()}get lastIndex(){return Math.ceil(this.nzTotal/this.nzPageSize)}get isLastIndex(){return this.nzPageIndex===this.lastIndex}get isFirstIndex(){return this.nzPageIndex===this.firstIndex}get ranges(){return[(this.nzPageIndex-1)*this.nzPageSize+1,Math.min(this.nzPageIndex*this.nzPageSize,this.nzTotal)]}get showAddOption(){return-1===this.nzPageSizeOptions.indexOf(this.nzPageSize)}ngOnInit(){this.i18n.localeChange.pipe(Object(o.a)(this.$destroy)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Pagination"),this.cdr.markForCheck()})}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete()}ngOnChanges(t){(t.nzTotal||t.nzPageSize||t.nzPageIndex)&&this.buildIndexes()}}return Object(r.__decorate)([Object(l.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzDisabled",void 0),Object(r.__decorate)([Object(l.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowSizeChanger",void 0),Object(r.__decorate)([Object(l.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzHideOnSinglePage",void 0),Object(r.__decorate)([Object(l.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzShowQuickJumper",void 0),Object(r.__decorate)([Object(l.g)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzSimple",void 0),Object(r.__decorate)([Object(l.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzTotal",void 0),Object(r.__decorate)([Object(l.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzPageIndex",void 0),Object(r.__decorate)([Object(l.h)(),Object(r.__metadata)("design:type",Object)],t.prototype,"nzPageSize",void 0),t})();class u{}},vaoY:function(t,e,n){var r=n("rZA3"),i=n("4e1p"),s=n("8PdF"),o=n("5WJM"),l=n("i5+F"),a=n("EZsK"),u=n("NQti");u.alea=r,u.xor128=i,u.xorwow=s,u.xorshift7=o,u.xor4096=l,u.tychei=a,t.exports=u},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("7o/Q"),i=n("KqfI"),s=n("n6bG");function o(t,e,n){return function(r){return r.lift(new l(t,e,n))}}class l{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))}}class a extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(s.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"vrE+":function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1");e.scan=function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(t,e,n))}};var s=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.accumulator,this.seed,this.hasSeed))},t}(),o=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s.accumulator=n,s._seed=r,s.hasSeed=i,s.index=0,s}return r(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(i.Subscriber)},w1o2:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("zB/H"),o=n("Q1FS"),l=n("ds6q");e.groupBy=function(t,e,n,r){return function(i){return i.lift(new a(t,e,n,r))}};var a=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),u=function(t){function e(e,n,r,i,s){var o=t.call(this,e)||this;return o.keySelector=n,o.elementSelector=r,o.durationSelector=i,o.subjectSelector=s,o.groups=null,o.attemptedToUnsubscribe=!1,o.count=0,o}return r(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(a){this.error(a)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new l.Subject,n.set(e,i);var s=new h(e,i,this);if(this.destination.next(s),this.durationSelector){var o=void 0;try{o=this.durationSelector(new h(e,i))}catch(a){return void this.error(a)}this.add(o.subscribe(new c(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(i.Subscriber),c=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return r(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(i.Subscriber),h=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return r(e,t),e.prototype._subscribe=function(t){var e=new s.Subscription,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new d(n)),e.add(r.subscribe(t)),e},e}(o.Observable);e.GroupedObservable=h;var d=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return r(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.Subscription)},w1tV:function(t,e,n){"use strict";var r=n("XNiG"),i=n("HDdC"),s=n("7o/Q"),o=n("quSY");function l(){return function(t){return t.lift(new a(t))}}class a{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new u(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class u extends s.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const c=class extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new o.a).add(this.source.subscribe(new d(this.getSubject(),this))),t.closed?(this._connection=null,t=o.a.EMPTY):this._connection=t),t}refCount(){return l()(this)}}.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};class d extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.a}function f(){return t=>l()(function(t,e){return function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,h);return r.source=e,r.subjectFactory=n,r}}(p)(t))}n.d(e,"a",function(){return f})},w5QO:function(t,e,n){"use strict";e.noop=function(){}},"wO+i":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("lJxs");function i(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>Object(r.a)(function(t,e){return n=>{let r=n;for(let i=0;i<e;i++){const e=r[t[i]];if(void 0===e)return;r=e}return r}}(t,e))(n)}},wQFA:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return g}),n.d(e,"c",function(){return c}),n.d(e,"d",function(){return m});var r=n("8Y7J"),i=n("mrSG"),s=n("dvZr"),o=n("XNiG"),l=n("5VGP"),a=n("1G5W"),u=n("nYR2");class c{constructor(t,e){this.elementRef=t,this.renderer=e,this.el=this.elementRef.nativeElement,this._active=!1,e.addClass(t.nativeElement,"slick-slide")}set isActive(t){this._active=t,this.isActive?this.renderer.addClass(this.el,"slick-active"):this.renderer.removeClass(this.el,"slick-active")}get isActive(){return this._active}}const h=new r.p("nz-carousel-custom-strategies");class d{constructor(t,e,n){this.cdr=e,this.renderer=n,this.carouselComponent=t}get maxIndex(){return this.length-1}get firstEl(){return this.contents[0].el}get lastEl(){return this.contents[this.maxIndex].el}withCarouselContents(t){const e=this.carouselComponent,n=e.el.getBoundingClientRect();this.slickListEl=e.slickListEl,this.slickTrackEl=e.slickTrackEl,this.unitWidth=n.width,this.unitHeight=n.height,this.contents=t?t.toArray():[],this.length=this.contents.length}dragging(t){}dispose(){}getFromToInBoundary(t,e){const n=this.maxIndex+1;return{from:(t+n)%n,to:(e+n)%n}}}class p extends d{withCarouselContents(t){super.withCarouselContents(t),this.contents&&(this.slickTrackEl.style.width=`${this.length*this.unitWidth}px`,this.contents.forEach((t,e)=>{this.renderer.setStyle(t.el,"opacity",this.carouselComponent.activeIndex===e?"1":"0"),this.renderer.setStyle(t.el,"position","relative"),this.renderer.setStyle(t.el,"width",`${this.unitWidth}px`),this.renderer.setStyle(t.el,"left",`${-this.unitWidth*e}px`),this.renderer.setStyle(t.el,"transition",["opacity 500ms ease 0s","visibility 500ms ease 0s"])}))}switch(t,e){const{to:n}=this.getFromToInBoundary(t,e),r=new o.a;return this.contents.forEach((t,e)=>{this.renderer.setStyle(t.el,"opacity",n===e?"1":"0")}),setTimeout(()=>{r.next(),r.complete()},this.carouselComponent.nzTransitionSpeed),r}dispose(){this.contents.forEach(t=>{this.renderer.setStyle(t.el,"transition",null)}),super.dispose()}}class f extends d{constructor(){super(...arguments),this.isDragging=!1,this.isTransitioning=!1}get vertical(){return this.carouselComponent.vertical}dispose(){super.dispose(),this.renderer.setStyle(this.slickTrackEl,"transform",null)}withCarouselContents(t){super.withCarouselContents(t);const e=this.carouselComponent.activeIndex;this.contents.length&&(this.renderer.setStyle(this.slickListEl,"height",`${this.unitHeight}px`),this.vertical?(this.renderer.setStyle(this.slickTrackEl,"width",`${this.unitWidth}px`),this.renderer.setStyle(this.slickTrackEl,"height",`${this.length*this.unitHeight}px`),this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(0, ${-e*this.unitHeight}px, 0)`)):(this.renderer.setStyle(this.slickTrackEl,"height",`${this.unitHeight}px`),this.renderer.setStyle(this.slickTrackEl,"width",`${this.length*this.unitWidth}px`),this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(${-e*this.unitWidth}px, 0, 0)`)),this.contents.forEach(t=>{this.renderer.setStyle(t.el,"position","relative"),this.renderer.setStyle(t.el,"width",`${this.unitWidth}px`),this.renderer.setStyle(t.el,"height",`${this.unitHeight}px`)}))}switch(t,e){const{to:n}=this.getFromToInBoundary(t,e),r=new o.a;return this.renderer.setStyle(this.slickTrackEl,"transition",`transform ${this.carouselComponent.nzTransitionSpeed}ms ease`),this.vertical?this.verticalTransform(t,e):this.horizontalTransform(t,e),this.isTransitioning=!0,this.isDragging=!1,setTimeout(()=>{this.renderer.setStyle(this.slickTrackEl,"transition",null),this.contents.forEach(t=>{this.renderer.setStyle(t.el,this.vertical?"top":"left",null)}),this.renderer.setStyle(this.slickTrackEl,"transform",this.vertical?`translate3d(0, ${-n*this.unitHeight}px, 0)`:`translate3d(${-n*this.unitWidth}px, 0, 0)`),this.isTransitioning=!1,r.next(),r.complete()},this.carouselComponent.nzTransitionSpeed),r.asObservable()}dragging(t){if(this.isTransitioning)return;const e=this.carouselComponent.activeIndex;this.carouselComponent.vertical?(!this.isDragging&&this.length>2&&(e===this.maxIndex?this.prepareVerticalContext(!0):0===e&&this.prepareVerticalContext(!1)),this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(0, ${-e*this.unitHeight+t.x}px, 0)`)):(!this.isDragging&&this.length>2&&(e===this.maxIndex?this.prepareHorizontalContext(!0):0===e&&this.prepareHorizontalContext(!1)),this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(${-e*this.unitWidth+t.x}px, 0, 0)`)),this.isDragging=!0}verticalTransform(t,e){const{from:n,to:r}=this.getFromToInBoundary(t,e);this.length>2&&e!==r?(this.prepareVerticalContext(r<n),this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(0, ${-e*this.unitHeight}px, 0)`)):this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(0, ${-r*this.unitHeight}px, 0`)}horizontalTransform(t,e){const{from:n,to:r}=this.getFromToInBoundary(t,e);this.length>2&&e!==r?(this.prepareHorizontalContext(r<n),this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(${-e*this.unitWidth}px, 0, 0)`)):this.renderer.setStyle(this.slickTrackEl,"transform",`translate3d(${-r*this.unitWidth}px, 0, 0`)}prepareVerticalContext(t){t?(this.renderer.setStyle(this.firstEl,"top",`${this.length*this.unitHeight}px`),this.renderer.setStyle(this.lastEl,"top",null)):(this.renderer.setStyle(this.firstEl,"top",null),this.renderer.setStyle(this.lastEl,"top",`${-this.unitHeight*this.length}px`))}prepareHorizontalContext(t){t?(this.renderer.setStyle(this.firstEl,"left",`${this.length*this.unitWidth}px`),this.renderer.setStyle(this.lastEl,"left",null)):(this.renderer.setStyle(this.firstEl,"left",null),this.renderer.setStyle(this.lastEl,"left",`${-this.unitWidth*this.length}px`))}}let g=(()=>{class t{constructor(t,e,n,i,s,a,u){this.renderer=e,this.cdr=n,this.platform=i,this.nzDomEventService=s,this.customStrategies=u,this.nzEffect="scrollx",this.nzEnableSwipe=!0,this.nzDots=!0,this.nzAutoPlay=!1,this.nzAutoPlaySpeed=3e3,this.nzTransitionSpeed=500,this._dotPosition="bottom",this.nzBeforeChange=new r.m,this.nzAfterChange=new r.m,this.activeIndex=0,this.vertical=!1,this.destroy$=new o.a,this.gestureRect=null,this.pointerDelta=null,this.pointerPosition=null,this.isTransiting=!1,this.isDragging=!1,this.pointerDown=t=>{if(!this.isDragging&&!this.isTransiting&&this.nzEnableSwipe){const e=Object(l.X)(t)?t.touches[0]||t.changedTouches[0]:t;this.isDragging=!0,this.clearScheduledTransition(),this.gestureRect=this.slickListEl.getBoundingClientRect(),this.pointerPosition={x:e.clientX,y:e.clientY},this.document.addEventListener("mousemove",this.pointerMove),this.document.addEventListener("touchmove",this.pointerMove),this.document.addEventListener("mouseup",this.pointerUp),this.document.addEventListener("touchend",this.pointerUp)}},this.pointerMove=t=>{if(this.isDragging){const e=Object(l.X)(t)?t.touches[0]||t.changedTouches[0]:t;this.pointerDelta={x:e.clientX-this.pointerPosition.x,y:e.clientY-this.pointerPosition.y},Math.abs(this.pointerDelta.x)>5&&this.strategy.dragging(this.pointerDelta)}},this.pointerUp=()=>{if(this.isDragging&&this.nzEnableSwipe){const t=this.pointerDelta?this.pointerDelta.x:0;Math.abs(t)>this.gestureRect.width/3?this.goTo(t>0?this.activeIndex-1:this.activeIndex+1):this.goTo(this.activeIndex),this.gestureRect=null,this.pointerDelta=null,this.isDragging=!1,this.dispose()}},this.document=a,this.renderer.addClass(t.nativeElement,"ant-carousel"),this.el=t.nativeElement}get nzVertical(){return this.vertical}set nzVertical(t){Object(l.rb)("'nzVertical' is deprecated and will be removed in 9.0.0. Please use 'nzDotPosition' instead."),this.vertical=t}set nzDotPosition(t){this._dotPosition=t,this.vertical="left"===t||"right"===t}get nzDotPosition(){return this._dotPosition}ngAfterContentInit(){this.markContentActive(0)}ngAfterViewInit(){this.platform.isBrowser&&(this.slickListEl=this.slickList.nativeElement,this.slickTrackEl=this.slickTrack.nativeElement,this.carouselContents.changes.pipe(Object(a.a)(this.destroy$)).subscribe(()=>{this.markContentActive(0),this.syncStrategy()}),this.nzDomEventService.registerResizeListener().pipe(Object(a.a)(this.destroy$),Object(u.a)(()=>this.nzDomEventService.unregisterResizeListener())).subscribe(()=>{this.syncStrategy()}),this.switchStrategy(),this.markContentActive(0),this.syncStrategy(),Promise.resolve().then(()=>{this.syncStrategy()}))}ngOnChanges(t){const{nzEffect:e,nzDotPosition:n}=t;e&&!e.isFirstChange()&&(this.switchStrategy(),this.markContentActive(0),this.syncStrategy()),n&&!n.isFirstChange()&&(this.switchStrategy(),this.markContentActive(0),this.syncStrategy()),this.nzAutoPlay&&this.nzAutoPlaySpeed?this.scheduleNextTransition():this.clearScheduledTransition()}ngOnDestroy(){this.clearScheduledTransition(),this.strategy&&this.strategy.dispose(),this.dispose(),this.destroy$.next(),this.destroy$.complete()}onKeyDown(t){t.keyCode===s.f?(t.preventDefault(),this.pre()):t.keyCode===s.h&&(this.next(),t.preventDefault())}next(){this.goTo(this.activeIndex+1)}pre(){this.goTo(this.activeIndex-1)}goTo(t){if(this.carouselContents&&this.carouselContents.length&&!this.isTransiting){const e=this.carouselContents.length,n=this.activeIndex,r=(t+e)%e;this.isTransiting=!0,this.nzBeforeChange.emit({from:n,to:r}),this.strategy.switch(this.activeIndex,t).subscribe(()=>{this.scheduleNextTransition(),this.nzAfterChange.emit(t),this.isTransiting=!1}),this.markContentActive(r),this.cdr.markForCheck()}}switchStrategy(){this.strategy&&this.strategy.dispose();const t=this.customStrategies?this.customStrategies.find(t=>t.name===this.nzEffect):null;this.strategy=t?new t.strategy(this,this.cdr,this.renderer):"scrollx"===this.nzEffect?new f(this,this.cdr,this.renderer):new p(this,this.cdr,this.renderer)}scheduleNextTransition(){this.clearScheduledTransition(),this.nzAutoPlay&&this.nzAutoPlaySpeed>0&&this.platform.isBrowser&&(this.transitionInProgress=setTimeout(()=>{this.goTo(this.activeIndex+1)},this.nzAutoPlaySpeed))}clearScheduledTransition(){this.transitionInProgress&&(clearTimeout(this.transitionInProgress),this.transitionInProgress=null)}markContentActive(t){this.activeIndex=t,this.carouselContents&&this.carouselContents.forEach((e,n)=>{e.isActive=t===n}),this.cdr.markForCheck()}syncStrategy(){this.strategy&&this.strategy.withCarouselContents(this.carouselContents)}dispose(){this.document.removeEventListener("mousemove",this.pointerMove),this.document.removeEventListener("touchmove",this.pointerMove),this.document.removeEventListener("touchend",this.pointerMove),this.document.removeEventListener("mouseup",this.pointerMove)}}return Object(i.__decorate)([Object(l.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzEnableSwipe",void 0),Object(i.__decorate)([Object(l.g)(),Object(i.__metadata)("design:type",Boolean)],t.prototype,"nzDots",void 0),Object(i.__decorate)([Object(l.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzAutoPlay",void 0),Object(i.__decorate)([Object(l.h)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzAutoPlaySpeed",void 0),Object(i.__decorate)([Object(l.h)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzTransitionSpeed",void 0),Object(i.__decorate)([Object(l.g)(),Object(i.__metadata)("design:type",Boolean),Object(i.__metadata)("design:paramtypes",[Boolean])],t.prototype,"nzVertical",null),t})();class m{}},"wf2+":function(t,e,n){"use strict";n.d(e,"a",function(){return p}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"f",function(){return g}),n.d(e,"g",function(){return v}),n.d(e,"h",function(){return m}),n.d(e,"i",function(){return b});var r=n("tYkK"),i=n("5VGP"),s=n("s7LF"),o=n("quSY"),l=n("XNiG"),a=n("JX91"),u=n("1G5W"),c=n("mrSG");class h{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-form-explain"),Object(i.rb)("'nz-form-explain' is going to be removed in 9.0.0. Use [nzSuccessTip] | [nzWarningTip] | [nzErrorTip] | [nzValidatingTip] in nz-form-control instead. Read https://ng.ant.design/components/form/en")}}let d=(()=>{class t extends r.c{constructor(t,e,n,r,i,s,o,l){super(t,e,n,r,i,s,o),this.cdr=l,this.nzFlex=!1,this.withHelpClass=!1,this.tipsMode=!1,e.addClass(t.nativeElement,"ant-form-item")}updateFlexStyle(){this.nzFlex?this.renderer.setStyle(this.elementRef.nativeElement,"display","flex"):this.renderer.removeStyle(this.elementRef.nativeElement,"display")}setWithHelpViaTips(t){this.tipsMode=!0,this.withHelpClass=t,this.cdr.markForCheck()}ngAfterContentInit(){this.tipsMode||this.listOfNzFormExplainComponent.changes.pipe(Object(a.a)(!0),Object(u.a)(this.destroy$)).subscribe(()=>{this.withHelpClass=this.listOfNzFormExplainComponent&&this.listOfNzFormExplainComponent.length>0,this.cdr.markForCheck()})}ngOnInit(){super.ngOnInit(),this.updateFlexStyle()}ngOnDestroy(){super.ngOnDestroy()}ngOnChanges(t){super.ngOnChanges(t),t.hasOwnProperty("nzFlex")&&this.updateFlexStyle()}}return Object(c.__decorate)([Object(i.g)(),Object(c.__metadata)("design:type",Boolean)],t.prototype,"nzFlex",void 0),t})();class p extends r.a{constructor(t,e,n,r,i,s){super(t,e,n||r,s),this.nzFormItemComponent=n,this.cdr=i,this._hasFeedback=!1,this.validateChanges=o.a.EMPTY,this.status=null,this.controlClassMap={},s.addClass(e.nativeElement,"ant-form-item-control-wrapper")}set nzHasFeedback(t){this._hasFeedback=Object(i.mb)(t),this.setControlClassMap()}get nzHasFeedback(){return this._hasFeedback}set nzValidateStatus(t){t instanceof s.f||t instanceof s.p?(this.validateControl=t,this.validateString=null,this.watchControl()):t instanceof s.h?(this.validateControl=t.control,this.validateString=null,this.watchControl()):(this.validateString=t,this.validateControl=null,this.setControlClassMap())}removeSubscribe(){this.validateChanges.unsubscribe()}watchControl(){this.removeSubscribe(),this.validateControl&&this.validateControl.statusChanges&&(this.validateChanges=this.validateControl.statusChanges.pipe(Object(a.a)(null)).subscribe(()=>{this.setControlClassMap(),this.cdr.markForCheck()}))}validateControlStatus(t){return!!this.validateControl&&(this.validateControl.dirty||this.validateControl.touched)&&this.validateControl.status===t}setControlClassMap(){"warning"===this.validateString?(this.status="warning",this.iconType="exclamation-circle-fill"):"validating"===this.validateString||"pending"===this.validateString||this.validateControlStatus("PENDING")?(this.status="validating",this.iconType="loading"):"error"===this.validateString||this.validateControlStatus("INVALID")?(this.status="error",this.iconType="close-circle-fill"):"success"===this.validateString||this.validateControlStatus("VALID")?(this.status="success",this.iconType="check-circle-fill"):(this.status=null,this.iconType=""),this.hasTips&&this.nzFormItemComponent.setWithHelpViaTips(this.showErrorTip),this.controlClassMap={"has-warning":"warning"===this.status,"is-validating":"validating"===this.status,"has-error":"error"===this.status,"has-success":"success"===this.status,"has-feedback":this.nzHasFeedback&&this.status}}get hasTips(){return!!(this.nzSuccessTip||this.nzWarningTip||this.nzErrorTip||this.nzValidatingTip)}get showSuccessTip(){return"success"===this.status&&!!this.nzSuccessTip}get showWarningTip(){return"warning"===this.status&&!!this.nzWarningTip}get showErrorTip(){return"error"===this.status&&!!this.nzErrorTip}get showValidatingTip(){return"validating"===this.status&&!!this.nzValidatingTip}get showInnerTip(){return this.showSuccessTip||this.showWarningTip||this.showErrorTip||this.showValidatingTip}ngOnInit(){super.ngOnInit(),this.setControlClassMap()}ngOnDestroy(){this.removeSubscribe(),super.ngOnDestroy()}ngAfterContentInit(){this.validateControl||this.validateString||(this.nzValidateStatus=this.defaultValidateControl instanceof s.g?this.defaultValidateControl.control:this.defaultValidateControl)}ngAfterViewInit(){super.ngAfterViewInit()}}class f{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-form-extra"),Object(i.rb)("'nz-form-extra' is going to be removed in 9.0.0. Use [nzExtra] in nz-form-control instead. Read https://ng.ant.design/components/form/en")}}let g=(()=>{class t extends r.a{constructor(t,e,n,r,i,s){super(t,e,n||r,i),this.cdr=s,this.nzRequired=!1,this.defaultNoColon=!1,this.noColon="default",i.addClass(e.nativeElement,"ant-form-item-label")}set nzNoColon(t){this.noColon=Object(i.mb)(t)}get nzNoColon(){return!!this.noColon}setDefaultNoColon(t){this.defaultNoColon=Object(i.mb)(t),this.cdr.markForCheck()}ngOnDestroy(){super.ngOnDestroy()}ngAfterViewInit(){super.ngAfterViewInit()}}return Object(c.__decorate)([Object(i.g)(),Object(c.__metadata)("design:type",Object)],t.prototype,"nzRequired",void 0),t})();class m{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-form-split")}}class b{constructor(t,e){this.elementRef=t,this.renderer=e,this.renderer.addClass(this.elementRef.nativeElement,"ant-form-text")}}let y=(()=>{class t{constructor(t,e,n){this.elementRef=t,this.renderer=e,this.nzUpdateHostClassService=n,this.nzLayout="horizontal",this.nzNoColon=!1,this.destroy$=new l.a,this.renderer.addClass(t.nativeElement,"ant-form")}setClassMap(){this.nzUpdateHostClassService.updateHostClass(this.elementRef.nativeElement,{[`ant-form-${this.nzLayout}`]:this.nzLayout})}updateItemsDefaultColon(){this.nzFormLabelComponent&&this.nzFormLabelComponent.forEach(t=>t.setDefaultNoColon(this.nzNoColon))}ngOnInit(){this.setClassMap()}ngOnChanges(t){this.setClassMap(),t.hasOwnProperty("nzNoColon")&&this.updateItemsDefaultColon()}ngAfterContentInit(){this.nzFormLabelComponent.changes.pipe(Object(a.a)(null),Object(u.a)(this.destroy$)).subscribe(()=>{this.updateItemsDefaultColon()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return Object(c.__decorate)([Object(i.g)(),Object(c.__metadata)("design:type",Boolean)],t.prototype,"nzNoColon",void 0),t})();class v{}},wgpc:function(t,e,n){var r=n("mrSG").__extends,i=n("FWf1"),s=n("xKqS");e.materialize=function(){return function(t){return t.lift(new o)}};var o=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){return t.call(this,e)||this}return r(e,t),e.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},e}(i.Subscriber)},wrXb:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getDay()}},x84W:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=e&&Number(e.weekStartsOn)||0,i=r(t),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}},xHZb:function(t,e,n){"use strict";var r=n("IEvo");e.queue=new(n("H2PQ").QueueScheduler)(r.QueueAction)},xKqS:function(t,e,n){"use strict";var r=n("aJGj"),i=n("I65S"),s=n("vLqr");e.NotificationKind=function(t){return t.NEXT="N",t.ERROR="E",t.COMPLETE="C",t}(e.NotificationKind||{}),e.Notification=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return i.of(this.value);case"E":return s.throwError(this.error);case"C":return r.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},xMJQ:function(t,e,n){var r=n("yNUO");t.exports=function(t,e,n){var i=r(t),s=void 0!==n?n:1,o=r(e).getTime();if(i.getTime()>o)throw new Error("The first date cannot be after the second date");var l=[],a=i;for(a.setHours(0,0,0,0);a.getTime()<=o;)l.push(r(a)),a.setDate(a.getDate()+s);return l}},xPkr:function(t,e,n){var r=n("CXhC");t.exports=function(t){var e=new Date;return e.setDate(e.getDate()-1),r(t).getTime()===r(e).getTime()}},xYlI:function(t,e,n){var r=n("yNUO");t.exports=function(t){return r(t).getMinutes()}},xgIS:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("DH7j"),s=n("n6bG"),o=n("lJxs");function l(t,e,n,a){return Object(s.a)(n)&&(a=n,n=void 0),a?l(t,e,n).pipe(Object(o.a)(t=>Object(i.a)(t)?a(...t):a(t))):new r.a(r=>{!function t(e,n,r,i,s){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,s),o=()=>t.removeEventListener(n,r,s)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),o=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),o=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let o=0,l=e.length;o<l;o++)t(e[o],n,r,i,s)}i.add(o)}(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}},xkaR:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("cp0P"),i=n("yrbL");class s{constructor(t){this.singerServe=t}resolve(t){const e=t.paramMap.get("id");return Object(r.a)([this.singerServe.getSingerDetail(e),this.singerServe.getSimiSinger(e)]).pipe(Object(i.first)())}}},xq5I:function(t,e,n){var r=n("IpkJ");t.exports=function(t,e){var n=r(t),i=r(e);return n.getTime()===i.getTime()}},"y5a+":function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=e&&Number(e.weekStartsOn)||0,i=r(t),s=i.getDay(),o=6+(s<n?-7:0)-(s-n);return i.setHours(0,0,0,0),i.setDate(i.getDate()+o),i}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY"),s=n("ngJS");function o(t,e){return new r.a(e?n=>{const r=new i.a;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Object(s.a)(t))}},yESu:function(t,e,n){"use strict";var r=n("mbIT"),i=n("FCKb"),s=n("gTqA");e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&r.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(s.from([e].concat(t)),new i.CombineLatestOperator(n))}}},yFcd:function(t,e,n){"use strict";var r=n("Q1FS");e.scalar=function(t){var e=new r.Observable(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},yHON:function(t,e,n){var r=n("yNUO");t.exports=function(t,e){var n=r(t).getTime(),i=r(e).getTime();return n>i?-1:n<i?1:0}},yNUO:function(t,e,n){var r=n("VGX7"),i=n("pzWd"),s=/[T ]/,o=/:/,l=/^(\d{2})$/,a=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],u=/^(\d{4})/,c=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],h=/^-(\d{2})$/,d=/^-?(\d{3})$/,p=/^-?(\d{2})-?(\d{2})$/,f=/^-?W(\d{2})$/,g=/^-?W(\d{2})-?(\d{1})$/,m=/^(\d{2}([.,]\d*)?)$/,b=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,v=/([Z+-].*)$/,_=/^(Z)$/,w=/^([+-])(\d{2})$/,x=/^([+-])(\d{2}):?(\d{2})$/;function C(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=7*e+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}t.exports=function(t,e){if(i(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var n=(e||{}).additionalDigits;n=null==n?2:Number(n);var S,O,k=function(e){var n,r={},i=t.split(s);if(o.test(i[0])?(r.date=null,n=i[0]):(r.date=i[0],n=i[1]),n){var l=v.exec(n);l?(r.time=n.replace(l[1],""),r.timezone=l[1]):r.time=n}return r}(),E=function(t,e){var n,r=a[e],i=c[e];if(n=u.exec(t)||i.exec(t)){var s=n[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(n=l.exec(t)||r.exec(t)){var o=n[1];return{year:100*parseInt(o,10),restDateString:t.slice(o.length)}}return{year:null}}(k.date,n),T=function(t,e){if(null===e)return null;var n,r,i;if(0===t.length)return(r=new Date(0)).setUTCFullYear(e),r;if(n=h.exec(t))return r=new Date(0),i=parseInt(n[1],10)-1,r.setUTCFullYear(e,i),r;if(n=d.exec(t)){r=new Date(0);var s=parseInt(n[1],10);return r.setUTCFullYear(e,0,s),r}if(n=p.exec(t)){r=new Date(0),i=parseInt(n[1],10)-1;var o=parseInt(n[2],10);return r.setUTCFullYear(e,i,o),r}return(n=f.exec(t))?C(e,parseInt(n[1],10)-1):(n=g.exec(t))?C(e,parseInt(n[1],10)-1,parseInt(n[2],10)-1):null}(E.restDateString,E.year);if(T){var z,P=T.getTime(),I=0;if(k.time&&(I=(O=m.exec(S=k.time))?parseFloat(O[1].replace(",","."))%24*36e5:(O=b.exec(S))?parseInt(O[1],10)%24*36e5+6e4*parseFloat(O[2].replace(",",".")):(O=y.exec(S))?parseInt(O[1],10)%24*36e5+6e4*parseInt(O[2],10)+1e3*parseFloat(O[3].replace(",",".")):null),k.timezone)z=6e4*function(t){var e,n;return(e=_.exec(t))?0:(e=w.exec(t))?(n=60*parseInt(e[2],10),"+"===e[1]?-n:n):(e=x.exec(t))?(n=60*parseInt(e[2],10)+parseInt(e[3],10),"+"===e[1]?-n:n):0}(k.timezone);else{var M=P+I,D=new Date(M);z=r(D);var A=new Date(M);A.setDate(D.getDate()+1);var N=r(A)-r(D);N>0&&(z+=N)}return new Date(P+I+z)}return new Date(t)}},yQYE:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r}),n("WmCX"),n("xkaR");const r={title:"\u6b4c\u624b\u8be6\u60c5"};class i{}},yRPT:function(t,e,n){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},yTpB:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("mrSG"),n("xgIS"),n("gcYM"),n("/uUt"),n("5VGP");class r{}},yYDL:function(t,e,n){var r=n("yNUO");t.exports=function(t){return 3===r(t).getDay()}},yoF8:function(t,e,n){"use strict";e.identity=function(t){return t}},yrbL:function(t,e,n){"use strict";e.audit=n("+vT+").audit,e.auditTime=n("0BvR").auditTime,e.buffer=n("HzbE").buffer,e.bufferCount=n("i6Cy").bufferCount,e.bufferTime=n("QUyD").bufferTime,e.bufferToggle=n("C82C").bufferToggle,e.bufferWhen=n("cnJE").bufferWhen,e.catchError=n("rNzc").catchError,e.combineAll=n("FYWq").combineAll,e.combineLatest=n("yESu").combineLatest,e.concat=n("rEZo").concat,e.concatAll=n("c4Wt").concatAll,e.concatMap=n("zL8a").concatMap,e.concatMapTo=n("8b5+").concatMapTo,e.count=n("SqDy").count,e.debounce=n("3/+b").debounce,e.debounceTime=n("dMDw").debounceTime,e.defaultIfEmpty=n("1Z+e").defaultIfEmpty,e.delay=n("U2p0").delay,e.delayWhen=n("AYHy").delayWhen,e.dematerialize=n("VFZO").dematerialize,e.distinct=n("Fh4B").distinct,e.distinctUntilChanged=n("B/hR").distinctUntilChanged,e.distinctUntilKeyChanged=n("Qlto").distinctUntilKeyChanged,e.elementAt=n("X7Z7").elementAt,e.every=n("T/FJ").every,e.exhaust=n("eeun").exhaust,e.exhaustMap=n("/JYr").exhaustMap,e.expand=n("Sxl1").expand,e.filter=n("4ik+").filter,e.finalize=n("44p1").finalize,e.find=n("rxKr").find,e.findIndex=n("VLYi").findIndex,e.first=n("XoMe").first,e.groupBy=n("w1o2").groupBy,e.ignoreElements=n("DXMP").ignoreElements,e.isEmpty=n("fMhY").isEmpty,e.last=n("HmDv").last,e.map=n("q3Kh").map,e.mapTo=n("bSa5").mapTo,e.materialize=n("wgpc").materialize,e.max=n("aOuE").max,e.merge=n("cHgL").merge,e.mergeAll=n("QtHX").mergeAll,e.mergeMap=n("UNqx").mergeMap,e.flatMap=n("UNqx").mergeMap,e.mergeMapTo=n("OHRA").mergeMapTo,e.mergeScan=n("cmCt").mergeScan,e.min=n("jFrH").min,e.multicast=n("7K7o").multicast,e.observeOn=n("AFwO").observeOn,e.onErrorResumeNext=n("q3SL").onErrorResumeNext,e.pairwise=n("Y34a").pairwise,e.partition=n("o4sL").partition,e.pluck=n("DDzh").pluck,e.publish=n("Wxhx").publish,e.publishBehavior=n("NZaV").publishBehavior,e.publishLast=n("ZHwm").publishLast,e.publishReplay=n("GvSz").publishReplay,e.race=n("naeu").race,e.reduce=n("YK4L").reduce,e.repeat=n("ZTPi").repeat,e.repeatWhen=n("nz4u").repeatWhen,e.retry=n("a6us").retry,e.retryWhen=n("F1k1").retryWhen,e.refCount=n("4mvG").refCount,e.sample=n("gzDA").sample,e.sampleTime=n("EzyC").sampleTime,e.scan=n("vrE+").scan,e.sequenceEqual=n("fnxQ").sequenceEqual,e.share=n("XKtA").share,e.shareReplay=n("WHuz").shareReplay,e.single=n("EdHE").single,e.skip=n("a7Bn").skip,e.skipLast=n("WDqD").skipLast,e.skipUntil=n("1VEF").skipUntil,e.skipWhile=n("f6gv").skipWhile,e.startWith=n("RmLz").startWith,e.subscribeOn=n("4xzy").subscribeOn,e.switchAll=n("TAn0").switchAll,e.switchMap=n("6aLS").switchMap,e.switchMapTo=n("MhJ4").switchMapTo,e.take=n("Dxa7").take,e.takeLast=n("76/Q").takeLast,e.takeUntil=n("IW2O").takeUntil,e.takeWhile=n("s3+Z").takeWhile,e.tap=n("pWCv").tap,e.throttle=n("EOBV").throttle,e.throttleTime=n("CdcT").throttleTime,e.timeInterval=n("Z303").timeInterval,e.timeout=n("3n9G").timeout,e.timeoutWith=n("Vf9T").timeoutWith,e.timestamp=n("2Sgo").timestamp,e.toArray=n("Tkif").toArray,e.window=n("Fa1C").window,e.windowCount=n("uXFP").windowCount,e.windowTime=n("067Y").windowTime,e.windowToggle=n("BmJ7").windowToggle,e.windowWhen=n("vUl8").windowWhen,e.withLatestFrom=n("2hO6").withLatestFrom,e.zip=n("eThW").zip,e.zipAll=n("d1Tk").zipAll},yx2s:function(t,e,n){"use strict";var r=n("FWf1");e.canReportError=function(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof r.Subscriber?e:null}return!0}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},"z+yo":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("8Y7J"),n("XNiG"),n("1G5W"),n("5VGP");class r{}},z6cu:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("HDdC");function i(t,e){return new r.a(e?n=>e.schedule(s,0,{error:t,subscriber:n}):e=>e.error(t))}function s({error:t,subscriber:e}){e.error(t)}},"zB/H":function(t,e,n){"use strict";var r=n("mbIT"),i=n("GMZp"),s=n("pshJ"),o=n("LBXl");function l(t){return t.reduce(function(t,e){return t.concat(e instanceof o.UnsubscriptionError?e.errors:e)},[])}e.Subscription=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,a=this._parents,u=this._unsubscribe,c=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,d=a?a.length:0;n;)n.remove(this),n=++h<d&&a[h]||null;if(s.isFunction(u))try{u.call(this)}catch(f){e=!0,t=f instanceof o.UnsubscriptionError?l(f.errors):[f]}if(r.isArray(c))for(h=-1,d=c.length;++h<d;){var p=c[h];if(i.isObject(p))try{p.unsubscribe()}catch(f){e=!0,t=t||[],f instanceof o.UnsubscriptionError?t=t.concat(l(f.errors)):t.push(f)}}if(e)throw new o.UnsubscriptionError(t)}},t.prototype.add=function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((e=new t).closed=!0,e),t}()},zGRt:function(t,e,n){var r=n("zM65");t.exports=function(t){return r(new Date,t)}},zL8a:function(t,e,n){"use strict";var r=n("UNqx");e.concatMap=function(t,e){return r.mergeMap(t,e,1)}},zM65:function(t,e,n){var r=n("G6+r");t.exports=function(t,e){return r(t,e,{weekStartsOn:1})}},zMNK:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"c",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"e",function(){return h}),n.d(e,"d",function(){return d});var r=n("8Y7J");function i(){throw Error("Host already has a portal attached")}class s{attach(t){return null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&i(),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null==t?function(){throw Error("Attempting to detach a portal that is not attached to a host")}():(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class o extends s{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class l extends s{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class a{constructor(){this._isDisposed=!1}hasAttached(){return!!this._attachedPortal}attach(t){return t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&i(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}(),t instanceof o?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof l?(this._attachedPortal=t,this.attachTemplatePortal(t)):void function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}()}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class u extends a{constructor(t,e,n,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.detectChanges(),n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}class c extends a{constructor(t,e){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new r.m}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(n,e.length,t.injector||e.injector);return super.setDisposeFn(()=>r.destroy()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}}class h{}class d{constructor(t,e){this._parentInjector=t,this._customTokens=e}get(t,e){const n=this._customTokens.get(t);return void 0!==n?n:this._parentInjector.get(t,e)}}},zP0r:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t){return e=>e.lift(new s(t))}class s{constructor(t){this.total=t}call(t,e){return e.subscribe(new o(t,this.total))}}class o extends r.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}},zTFG:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return l}),n.d(e,"d",function(){return c});var r=n("8Y7J"),i=n("mrSG"),s=n("5VGP"),o=n("2Vo4");class l{constructor(t,e){this.elementRef=t,this.renderer=e,this.avatarStr="",this.renderer.addClass(t.nativeElement,"ant-list-item-meta")}set nzAvatar(t){t instanceof r.L?(this.avatarStr="",this.avatarTpl=t):this.avatarStr=t}}let a=(()=>{class t{constructor(t,e){this.el=t,this.updateHostClassService=e,this.nzBordered=!1,this.nzItemLayout="horizontal",this.nzLoading=!1,this.nzSize="default",this.nzSplit=!0,this.prefixCls="ant-list",this.itemLayoutNotifySource=new o.a(this.nzItemLayout)}_setClassMap(){this.updateHostClassService.updateHostClass(this.el.nativeElement,{[this.prefixCls]:!0,[`${this.prefixCls}-vertical`]:"vertical"===this.nzItemLayout,[`${this.prefixCls}-lg`]:"large"===this.nzSize,[`${this.prefixCls}-sm`]:"small"===this.nzSize,[`${this.prefixCls}-split`]:this.nzSplit,[`${this.prefixCls}-bordered`]:this.nzBordered,[`${this.prefixCls}-loading`]:this.nzLoading,[`${this.prefixCls}-grid`]:this.nzGrid,[`${this.prefixCls}-something-after-last-item`]:!!(this.nzLoadMore||this.nzPagination||this.nzFooter)})}get itemLayoutNotify$(){return this.itemLayoutNotifySource.asObservable()}ngOnInit(){this._setClassMap()}ngOnChanges(t){this._setClassMap(),t.nzItemLayout&&this.itemLayoutNotifySource.next(this.nzItemLayout)}ngOnDestroy(){this.itemLayoutNotifySource.unsubscribe()}}return Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzBordered",void 0),Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzLoading",void 0),Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Object)],t.prototype,"nzSplit",void 0),t})(),u=(()=>{class t{constructor(t,e,n,r){this.parentComp=n,this.cdr=r,this.nzActions=[],this.nzNoFlex=!1,e.addClass(t.nativeElement,"ant-list-item")}get isVerticalAndExtra(){return"vertical"===this.itemLayout&&!!this.nzExtra}ngAfterViewInit(){this.itemLayout$=this.parentComp.itemLayoutNotify$.subscribe(t=>{this.itemLayout=t,this.cdr.detectChanges()})}ngOnDestroy(){this.itemLayout$&&this.itemLayout$.unsubscribe()}}return Object(i.__decorate)([Object(s.g)(),Object(i.__metadata)("design:type",Boolean)],t.prototype,"nzNoFlex",void 0),t})();class c{}},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J"),i=n("AytR");class s{}function o(t){return"{}"===JSON.stringify(t)}var l=n("DVTi"),a=n("DQLy"),u=n("kujU"),c=n("J66h");function h(t,e="encode"){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[c.Base64[e](r)]=c.Base64[e](t[r]));return n}var d=n("AWIJ"),p=n("iInd"),f=n("l5mm"),g=n("yrbL");class m{constructor(t,e,n,r,i,s,o,a,c,h){this.searchServe=t,this.store$=e,this.batchActionsServe=n,this.memberServe=r,this.messageServe=i,this.storageServe=s,this.router=o,this.activateRoute=a,this.titleServe=c,this.doc=h,this.menu=[{label:"\u53d1\u73b0",path:"/home"},{label:"\u6b4c\u5355",path:"/sheet"}],this.loadPercent=0,this.visible=!1,this.showSpin=!1,this.currentModalType=l.a.Default,this.routeTitle="";const d=this.storageServe.getStorage("wyUserId");d&&(this.store$.dispatch(Object(u.e)({id:d})),this.memberServe.getUserDetail(d).subscribe(t=>this.user=t));const f=this.storageServe.getStorage("wyRememberLogin");f&&(this.wyRememberLogin=JSON.parse(f)),this.listenStates(),this.router.events.pipe(Object(g.filter)(t=>t instanceof p.e)).subscribe(()=>{this.loadPercent=0,this.setTitle()}),this.navEnd=this.router.events.pipe(Object(g.filter)(t=>t instanceof p.d)),this.setLoadingBar()}setLoadingBar(){Object(f.a)(100).pipe(Object(g.takeUntil)(this.navEnd)).subscribe(()=>{this.loadPercent=Math.max(95,++this.loadPercent)}),this.navEnd.subscribe(()=>{this.loadPercent=100})}setTitle(){this.navEnd.pipe(Object(g.map)(()=>this.activateRoute),Object(g.map)(t=>{for(;t.firstChild;)t=t.firstChild;return t}),Object(g.mergeMap)(t=>t.data)).subscribe(t=>{this.routeTitle=t.title,this.titleServe.setTitle(this.routeTitle)})}listenStates(){const t=this.store$.pipe(Object(a.z)(d.b));t.pipe(Object(a.z)(d.a)).subscribe(t=>this.watchLikeId(t)),t.pipe(Object(a.z)(d.d)).subscribe(t=>this.watchModalVisible(t)),t.pipe(Object(a.z)(d.c)).subscribe(t=>this.watchModalType(t)),t.pipe(Object(a.z)(d.e)).subscribe(t=>this.watchShareInfo(t))}watchModalVisible(t){this.visible!==t&&(this.visible=t)}watchModalType(t){this.currentModalType!==t&&(t===l.a.Like&&this.onLoadMySheets(),this.currentModalType=t)}watchLikeId(t){t&&(this.likeId=t)}watchShareInfo(t){t&&(this.user?(this.shareInfo=t,this.openModal(l.a.Share)):this.openModal(l.a.Default))}openModalByMenu(t){this.openModal("loginByPhone"===t?l.a.LoginByPhone:l.a.Register)}openModal(t){this.batchActionsServe.controlModal(!0,t)}closeModal(){this.batchActionsServe.controlModal(!1)}onChangeModalType(t=l.a.Default){this.store$.dispatch(Object(u.b)({modalType:t}))}onLoadMySheets(){this.user?this.memberServe.getUserSheets(this.user.profile.userId.toString()).subscribe(t=>{this.mySheets=t.self,this.store$.dispatch(Object(u.c)({modalVisible:!0}))}):this.openModal(l.a.Default)}onSearch(t){t?this.searchServe.search(t).subscribe(e=>{this.searchResult=this.highlightKeyWords(t,e)}):this.searchResult={}}highlightKeyWords(t,e){if(!o(e)){const n=new RegExp(t,"ig");["artists","playlists","songs"].forEach(t=>{e[t]&&e[t].forEach(t=>{t.name=t.name.replace(n,'<span class="highlight">$&</span>')})})}return e}onLogin(t){this.showSpin=!0,this.memberServe.login(t).subscribe(e=>{this.user=e,this.closeModal(),this.alertMessage("success","\u767b\u9646\u6210\u529f"),this.storageServe.setStorage({key:"wyUserId",value:e.profile.userId}),this.store$.dispatch(Object(u.e)({id:e.profile.userId.toString()})),t.remember?this.storageServe.setStorage({key:"wyRememberLogin",value:JSON.stringify(h(t))}):this.storageServe.removeStorage("wyRememberLogin"),this.showSpin=!1},t=>{this.showSpin=!1,this.alertMessage("error",t.message||"\u767b\u9646\u5931\u8d25")})}onLogout(){this.memberServe.logout().subscribe(()=>{this.user=null,this.storageServe.removeStorage("wyUserId"),this.store$.dispatch(Object(u.e)({id:""})),this.alertMessage("success","\u5df2\u9000\u51fa")},t=>{this.alertMessage("error",t.message||"\u9000\u51fa\u5931\u8d25")})}onLikeSong(t){this.memberServe.likeSong(t).subscribe(()=>{this.closeModal(),this.alertMessage("success","\u6536\u85cf\u6210\u529f")},t=>{this.alertMessage("error",t.msg||"\u6536\u85cf\u5931\u8d25")})}onCreateSheet(t){this.memberServe.createSheet(t).subscribe(t=>{this.onLikeSong({pid:t,tracks:this.likeId})},t=>{this.alertMessage("error",t.msg||"\u65b0\u5efa\u5931\u8d25")})}onShare(t){this.memberServe.shareResource(t).subscribe(()=>{this.alertMessage("success","\u5206\u4eab\u6210\u529f"),this.closeModal()},t=>{this.alertMessage("error",t.msg||"\u5206\u4eab\u5931\u8d25")})}onRegister(t){this.alertMessage("success",t+"\u6ce8\u518c\u6210\u529f")}alertMessage(t,e){this.messageServe.create(t,e)}}var b=n("EdU/"),y=n("/Yna"),v=n("JRKe"),_=n("Ed4d"),w=n("8WaK"),x=n("QfCi"),C=n("CghO"),S=n("Sq/J"),O=n("rLnn"),k=n("pMnS"),E=n("1oRc"),T=n("XBfi"),z=n("gcVP"),P=n("bAjd"),I=n("8Iov"),M=n("JeDe"),D=n("jz81"),A=n("GH6G"),N=n("RVNi"),R=n("SVse"),F=n("/HVE"),$=n("66zS"),L=r.rb({encapsulation:2,styles:[],data:{}});function j(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(2,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,2,0,e.component.icon)},null)}function B(t){return r.Pb(0,[(t()(),r.Nb(0,null,[" "," "]))],null,function(t,e){var n=e.component;t(e,0,0,n.formatter(n.nzPercent))})}function V(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"span",[["class","ant-progress-text"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,j)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["formatTemplate",2]],null,0,null,B))],function(t,e){var n=e.component;t(e,2,0,"exception"===n.status||"success"===n.status&&!n.nzFormat,r.Fb(e,3))},null)}function W(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,V)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzShowInfo)},null)}function U(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function H(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"div",[],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,3,"div",[["class","ant-progress-outer"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,2,"div",[["class","ant-progress-inner"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,0,"div",[["class","ant-progress-bg"]],[[4,"width","%"],[4,"border-radius",null],[4,"background",null],[4,"height","px"]],null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"div",[["class","ant-progress-success-bg"]],[[4,"width","%"],[4,"border-radius",null],[4,"height","px"]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,U)),r.sb(6,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){t(e,6,0,r.Fb(e.parent,0))},function(t,e){var n=e.component;t(e,3,0,n.nzPercent,"round"===n.nzStrokeLinecap?"100px":"0",n.nzStrokeColor,n.strokeWidth),t(e,4,0,n.nzSuccessPercent,"round"===n.nzStrokeLinecap?"100px":"0",n.strokeWidth)})}function G(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function q(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,9,"div",[["class","ant-progress-inner"]],[[4,"width","px"],[4,"height","px"],[4,"fontSize","px"]],null,null,null,null)),(t()(),r.tb(1,0,null,null,6,":svg:svg",[["class","ant-progress-circle "],["viewBox","0 0 100 100"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,2,":svg:path",[["class","ant-progress-circle-trail"],["fill-opacity","0"],["stroke","#f3f3f3"]],[[1,"stroke-width",0],[1,"d",0]],null,null,null,null)),r.Kb(512,null,R.F,R.G,[r.k,r.s,r.D]),r.sb(4,278528,null,0,R.o,[R.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.tb(5,0,null,null,2,":svg:path",[["class","ant-progress-circle-path"],["fill-opacity","0"]],[[1,"d",0],[1,"stroke-linecap",0],[1,"stroke",0],[1,"stroke-width",0]],null,null,null,null)),r.Kb(512,null,R.F,R.G,[r.k,r.s,r.D]),r.sb(7,278528,null,0,R.o,[R.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.ib(16777216,null,null,1,null,G)),r.sb(9,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,4,0,n.trailPathStyle),t(e,7,0,n.strokePathStyle),t(e,9,0,r.Fb(e.parent,0))},function(t,e){var n=e.component;t(e,0,0,n.nzWidth,n.nzWidth,.15*n.nzWidth+6),t(e,2,0,n.strokeWidth,n.pathString),t(e,5,0,n.pathString,n.nzStrokeLinecap,n.nzStrokeColor||n.statusColorMap[n.status],n.nzPercent?n.strokeWidth:0)})}function K(t){return r.Pb(2,[(t()(),r.ib(0,[["progressInfoTemplate",2]],null,0,null,W)),(t()(),r.tb(1,0,null,null,6,"div",[],[[2,"ant-progress-line",null],[2,"ant-progress-small",null],[2,"ant-progress-show-info",null],[2,"ant-progress-circle",null]],null,null,null,null)),r.Kb(512,null,R.D,R.E,[r.r,r.s,r.k,r.D]),r.sb(3,278528,null,0,R.j,[R.D],{ngClass:[0,"ngClass"]},null),(t()(),r.ib(16777216,null,null,1,null,H)),r.sb(5,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,q)),r.sb(7,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,"ant-progress ant-progress-status-"+n.status),t(e,5,0,"line"===n.nzType),t(e,7,0,n.isCircleStyle)},function(t,e){var n=e.component;t(e,1,0,"line"==n.nzType,"small"==n.nzSize,n.nzShowInfo,n.isCircleStyle)})}var Y=n("5VGP"),X=n("/L1H"),Z=n("s7LF"),Q=n("POq0"),J=n("QQfA"),tt=n("IP0z"),et=n("GaVp"),nt=n("zMNK"),rt=n("hOhj"),it=n("omvX"),st=r.rb({encapsulation:2,styles:["\n      :root .ant-menu-submenu.ant-menu-submenu-placement-bottomLeft {\n        top: 6px;\n        position: relative;\n      }\n\n      :root .ant-menu-submenu.ant-menu-submenu-placement-rightTop {\n        left: 4px;\n        position: relative;\n      }\n\n      :root .ant-menu-submenu.ant-menu-submenu-placement-leftTop {\n        right: 4px;\n        position: relative;\n      }\n    "],data:{animation:[{type:7,name:"collapseMotion",definitions:[{type:0,name:"expanded",styles:{type:6,styles:{height:"*"},offset:null},options:void 0},{type:0,name:"collapsed",styles:{type:6,styles:{height:0,overflow:"hidden"},offset:null},options:void 0},{type:0,name:"hidden",styles:{type:6,styles:{height:0,overflow:"hidden",borderTopWidth:"0"},offset:null},options:void 0},{type:1,expr:"expanded => collapsed",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.645, 0.045, 0.355, 1)"},options:null},{type:1,expr:"expanded => hidden",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.645, 0.045, 0.355, 1)"},options:null},{type:1,expr:"collapsed => expanded",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.645, 0.045, 0.355, 1)"},options:null},{type:1,expr:"hidden => expanded",animation:{type:4,styles:null,timings:"150ms cubic-bezier(0.645, 0.045, 0.355, 1)"},options:null}],options:{}},{type:7,name:"zoomBigMotion",definitions:[{type:1,expr:"void => active",animation:[{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"0.2s cubic-bezier(0.08, 0.82, 0.17, 1)"}],options:null},{type:1,expr:"active => void",animation:[{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null},timings:"0.2s cubic-bezier(0.78, 0.14, 0.15, 0.86)"}],options:null}],options:{}},{type:7,name:"slideMotion",definitions:[{type:0,name:"bottom",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"},offset:null},options:void 0},{type:0,name:"top",styles:{type:6,styles:{opacity:1,transform:"scaleY(1)",transformOrigin:"0% 100%"},offset:null},options:void 0},{type:1,expr:"void => bottom",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"bottom => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null},{type:1,expr:"void => top",animation:[{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},{type:4,styles:null,timings:"0.2s cubic-bezier(0.23, 1, 0.32, 1)"}],options:null},{type:1,expr:"top => void",animation:[{type:4,styles:{type:6,styles:{opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 100%"},offset:null},timings:"0.2s cubic-bezier(0.755, 0.05, 0.855, 0.06)"}],options:null}],options:{}}]}});function ot(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(1,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,e.component.nzIcon)},null)}function lt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(2,null,["",""]))],null,function(t,e){t(e,2,0,e.component.nzTitle)})}function at(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function ut(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"span",[["class","ant-dropdown-menu-submenu-arrow"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"i",[["class","anticon-right ant-dropdown-menu-submenu-arrow-icon"],["nz-icon",""],["nzType","right"]],null,null,null,null,null)),r.sb(2,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,2,0,"right")},null)}function ct(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"i",[["class","ant-menu-submenu-arrow"]],null,null,null,null,null))],null,null)}function ht(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function dt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"ul",[["class","ant-menu ant-menu-inline ant-menu-sub"]],[[24,"@collapseMotion",0],[24,"@.disabled",0]],null,null,null,null)),r.Kb(512,null,R.D,R.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,R.j,[R.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.sb(3,4734976,null,0,Y.q,[r.k,r.D,[2,it.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.ib(16777216,null,null,1,null,ht)),r.sb(5,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-menu ant-menu-inline ant-menu-sub",n.nzMenuClassName),t(e,3,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,5,0,r.Fb(e.parent,17))},function(t,e){t(e,0,0,e.component.expandState,r.Fb(e,3).nzNoAnimation)})}function pt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function ft(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"div",[["class","ant-menu-submenu ant-menu-submenu-popup"]],[[24,"@slideMotion",0],[24,"@zoomBigMotion",0],[2,"ant-menu-light",null],[2,"ant-menu-dark",null],[2,"ant-menu-submenu-placement-bottomLeft",null],[2,"ant-menu-submenu-placement-rightTop",null],[2,"ant-menu-submenu-placement-leftTop",null],[24,"@.disabled",0]],[[null,"mouseleave"],[null,"mouseenter"]],function(t,e,n){var r=!0,i=t.component;return"mouseleave"===e&&(r=!1!==i.setMouseEnterState(!1)&&r),"mouseenter"===e&&(r=!1!==i.setMouseEnterState(!0)&&r),r},null,null)),r.sb(1,4734976,null,0,Y.q,[r.k,r.D,[2,it.a]],{nzNoAnimation:[0,"nzNoAnimation"]},null),(t()(),r.tb(2,0,null,null,4,"ul",[],[[2,"ant-dropdown-menu",null],[2,"ant-menu",null],[2,"ant-dropdown-menu-vertical",null],[2,"ant-menu-vertical",null],[2,"ant-dropdown-menu-sub",null],[2,"ant-menu-sub",null]],null,null,null,null)),r.Kb(512,null,R.D,R.E,[r.r,r.s,r.k,r.D]),r.sb(4,278528,null,0,R.j,[R.D],{ngClass:[0,"ngClass"]},null),(t()(),r.ib(16777216,null,null,1,null,pt)),r.sb(6,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,1,0,null==n.noAnimation?null:n.noAnimation.nzNoAnimation),t(e,4,0,n.nzMenuClassName),t(e,6,0,r.Fb(e.parent,17))},function(t,e){var n=e.component;t(e,0,0,n.expandState,n.expandState,"light"===n.nzMenuService.theme,"dark"===n.nzMenuService.theme,"horizontal"===n.nzSubmenuService.mode,"vertical"===n.nzSubmenuService.mode&&"rightTop"===n.placement,"vertical"===n.nzSubmenuService.mode&&"leftTop"===n.placement,r.Fb(e,1).nzNoAnimation),t(e,2,0,n.nzMenuService.isInDropDown,!n.nzMenuService.isInDropDown,n.nzMenuService.isInDropDown,!n.nzMenuService.isInDropDown,n.nzMenuService.isInDropDown,!n.nzMenuService.isInDropDown)})}function gt(t){return r.Pb(0,[r.Eb(null,1),(t()(),r.ib(0,null,null,0))],null,null)}function mt(t){return r.Pb(2,[r.Lb(402653184,1,{cdkConnectedOverlay:0}),r.Lb(402653184,2,{cdkOverlayOrigin:0}),(t()(),r.tb(2,0,[[2,0]],null,10,"div",[["cdkOverlayOrigin",""]],[[2,"ant-dropdown-menu-submenu-title",null],[2,"ant-menu-submenu-title",null],[4,"paddingLeft","px"]],[[null,"mouseenter"],[null,"mouseleave"],[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"mouseenter"===e&&(r=!1!==i.setMouseEnterState(!0)&&r),"mouseleave"===e&&(r=!1!==i.setMouseEnterState(!1)&&r),"click"===e&&(r=!1!==i.clickSubMenuTitle()&&r),r},null,null)),r.sb(3,16384,[["origin",4]],0,J.b,[r.k],null,null),(t()(),r.ib(16777216,null,null,1,null,ot)),r.sb(5,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,lt)),r.sb(7,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,at)),r.sb(9,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,ut)),r.sb(11,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["notDropdownTpl",2]],null,0,null,ct)),(t()(),r.ib(16777216,null,null,1,null,dt)),r.sb(14,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,function(t,e,n){var r=!0;return"positionChange"===e&&(r=!1!==t.component.onPositionChange(n)&&r),r},ft)),r.sb(16,671744,[[1,4]],0,J.a,[J.d,r.L,r.P,J.l,[2,tt.b]],{origin:[0,"origin"],positions:[1,"positions"],width:[2,"width"],open:[3,"open"]},{positionChange:"positionChange"}),(t()(),r.ib(0,[["subMenuTemplate",2]],null,0,null,gt))],function(t,e){var n=e.component;t(e,5,0,n.nzIcon),t(e,7,0,n.nzTitle),t(e,9,0,!n.nzTitle),t(e,11,0,n.nzMenuService.isInDropDown,r.Fb(e,12)),t(e,14,0,"inline"===n.nzMenuService.mode),t(e,16,0,r.Fb(e,3),n.overlayPositions,n.triggerWidth,n.nzOpen&&"inline"!==n.nzMenuService.mode)},function(t,e){var n=e.component;t(e,2,0,n.nzMenuService.isInDropDown,!n.nzMenuService.isInDropDown,"inline"===n.nzMenuService.mode?n.nzPaddingLeft?n.nzPaddingLeft:n.nzSubmenuService.level*n.nzMenuService.inlineIndent:null)})}var bt=n("anqq"),yt=r.rb({encapsulation:2,styles:[],data:{}});function vt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"i",[["nz-icon",""]],null,null,null,null,null)),r.Kb(512,null,R.D,R.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,R.j,[R.D],{ngClass:[0,"ngClass"]},null),r.sb(3,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{type:[0,"type"]},null)],function(t,e){var n=e.component;t(e,2,0,n.oldAPIIcon&&n.nzIcon),t(e,3,0,!n.oldAPIIcon&&n.nzIcon)},null)}function _t(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"img",[],[[8,"src",4],[1,"srcset",4],[1,"alt",0]],[[null,"error"]],function(t,e,n){var r=!0;return"error"===e&&(r=!1!==t.component.imgError()&&r),r},null,null))],null,function(t,e){var n=e.component;t(e,0,0,n.nzSrc,n.nzSrcSet,n.nzAlt)})}function wt(t){return r.Pb(0,[(t()(),r.tb(0,0,[[1,0],["textEl",1]],null,3,"span",[["class","ant-avatar-string"]],null,null,null,null,null)),r.Kb(512,null,R.F,R.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,R.o,[R.F],{ngStyle:[0,"ngStyle"]},null),(t()(),r.Nb(3,null,["",""]))],function(t,e){t(e,2,0,e.component.textStyles)},function(t,e){t(e,3,0,e.component.nzText)})}function xt(t){return r.Pb(2,[r.Lb(671088640,1,{textEl:0}),(t()(),r.ib(16777216,null,null,1,null,vt)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,_t)),r.sb(4,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,wt)),r.sb(6,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzIcon&&n.hasIcon),t(e,4,0,n.nzSrc&&n.hasSrc),t(e,6,0,n.nzText&&n.hasText)},null)}var Ct=n("Irb3"),St=n("nHXS"),Ot=n("7QIX"),kt=r.rb({encapsulation:2,styles:["\n      nz-content {\n        display: block;\n      }\n    "],data:{}});function Et(t){return r.Pb(2,[r.Eb(null,0)],null,null)}var Tt=r.rb({encapsulation:2,styles:["\n      nz-footer {\n        display: block;\n      }\n    "],data:{}});function zt(t){return r.Pb(2,[r.Eb(null,0)],null,null)}var Pt=r.rb({encapsulation:2,styles:["\n      nz-header {\n        display: block;\n      }\n    "],data:{}});function It(t){return r.Pb(2,[r.Eb(null,0)],null,null)}var Mt=r.rb({encapsulation:2,styles:[],data:{}});function Dt(t){return r.Pb(2,[r.Eb(null,0)],null,null)}var At=n("px0D"),Nt=r.rb({encapsulation:2,styles:[],data:{}});function Rt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(1,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,e.component.nzAddOnBeforeIcon)},null)}function Ft(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzAddOnBefore)})}function $t(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"span",[["class","ant-input-group-addon"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Rt)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Ft)),r.sb(4,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzAddOnBeforeIcon),t(e,4,0,n.nzAddOnBefore)},null)}function Lt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function jt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0,null,Lt))],null,null)}function Bt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,jt)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent.parent,7))},null)}function Vt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Wt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0,null,Vt))],null,null)}function Ut(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"span",[["class","ant-input-affix-wrapper"]],[[2,"ant-input-affix-wrapper-sm",null],[2,"ant-input-affix-wrapper-lg",null]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Wt)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){t(e,2,0,r.Fb(e.parent.parent,4))},function(t,e){var n=e.component;t(e,0,0,n.isSmall,n.isLarge)})}function Ht(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(1,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,e.component.nzAddOnAfterIcon)},null)}function Gt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzAddOnAfter)})}function qt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"span",[["class","ant-input-group-addon"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ht)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Gt)),r.sb(4,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzAddOnAfterIcon),t(e,4,0,n.nzAddOnAfter)},null)}function Kt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,8,"span",[["class","ant-input-wrapper ant-input-group"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,$t)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Bt)),r.sb(4,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Ut)),r.sb(6,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,qt)),r.sb(8,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzAddOnBefore||n.nzAddOnBeforeIcon),t(e,4,0,!n.isAffix),t(e,6,0,n.isAffix),t(e,8,0,n.nzAddOnAfter||n.nzAddOnAfterIcon)},null)}function Yt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Xt(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0,null,Yt))],null,null)}function Zt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Xt)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent,4))},null)}function Qt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""],["style","color: rgba(0, 0, 0, 0.25)"]],null,null,null,null,null)),r.sb(1,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,e.component.nzPrefixIcon)},null)}function Jt(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzPrefix)})}function te(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"span",[["class","ant-input-prefix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Qt)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Jt)),r.sb(4,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzPrefixIcon),t(e,4,0,n.nzPrefix)},null)}function ee(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function ne(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0,null,ee))],null,null)}function re(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(1,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,e.component.nzSuffixIcon)},null)}function ie(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzSuffix)})}function se(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"span",[["class","ant-input-suffix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,re)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,ie)),r.sb(4,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzSuffixIcon),t(e,4,0,n.nzSuffix)},null)}function oe(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,te)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,ne)),r.sb(3,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,se)),r.sb(5,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,n.nzPrefix||n.nzPrefixIcon),t(e,3,0,r.Fb(e.parent,7)),t(e,5,0,n.nzSuffix||n.nzSuffixIcon)},null)}function le(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function ae(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0,null,le))],null,null)}function ue(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ae)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,r.Fb(e.parent,7))},null)}function ce(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function he(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,Kt)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Zt)),r.sb(3,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,[["affixTemplate",2]],null,0,null,oe)),(t()(),r.ib(16777216,null,null,1,null,ue)),r.sb(6,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,[["contentTemplate",2]],null,0,null,ce))],function(t,e){var n=e.component;t(e,1,0,n.isAddOn),t(e,3,0,n.isAffix&&!n.isAddOn),t(e,6,0,n.isGroup)},null)}var de=n("xgIS"),pe=n("O4nG");class fe{constructor(t,e){this.overlay=t,this.viewContainerRef=e,this.onSearch=new r.m}ngOnInit(){}ngAfterViewInit(){Object(de.a)(this.nzInput.nativeElement,"input").pipe(Object(g.debounceTime)(300),Object(g.distinctUntilChanged)(),Object(g.pluck)("target","value")).subscribe(t=>{this.onSearch.emit(t)})}ngOnChanges(t){t.searchResult&&!t.searchResult.firstChange&&(o(this.searchResult),this.showOverlayPanel())}onFocus(){this.searchResult&&!o(this.searchResult)&&this.showOverlayPanel()}onBlur(){this.hideOverlayPanel()}showOverlayPanel(){this.hideOverlayPanel();const t=this.overlay.position().flexibleConnectedTo(this.connectedRef||this.defaultRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]).withLockedPosition(!0);this.overlayRef=this.overlay.create({positionStrategy:t,scrollStrategy:this.overlay.scrollStrategies.reposition()});const e=new nt.b(pe.a,this.viewContainerRef);this.overlayRef.attach(e).instance.searchResult=this.searchResult,this.overlayRef.backdropClick().subscribe(()=>{this.hideOverlayPanel()})}hideOverlayPanel(){this.overlayRef&&this.overlayRef.hasAttached&&this.overlayRef.dispose()}}var ge=r.rb({encapsulation:0,styles:[[""]],data:{}});function me(t){return r.Pb(0,[(t()(),r.tb(0,0,[[1,0],["search",1]],null,5,"div",[["class","search"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"nz-input-group",[["nzSuffixIcon","search"]],[[2,"ant-input-group-compact",null],[2,"ant-input-search-enter-button",null],[2,"ant-input-search",null],[2,"ant-input-search-sm",null],[2,"ant-input-affix-wrapper",null],[2,"ant-input-group-wrapper",null],[2,"ant-input-group",null],[2,"ant-input-group-lg",null],[2,"ant-input-group-wrapper-lg",null],[2,"ant-input-affix-wrapper-lg",null],[2,"ant-input-search-lg",null],[2,"ant-input-group-sm",null],[2,"ant-input-affix-wrapper-sm",null],[2,"ant-input-group-wrapper-sm",null]],null,null,he,Nt)),r.sb(2,1097728,null,1,At.b,[],{nzSuffixIcon:[0,"nzSuffixIcon"]},null),r.Lb(603979776,3,{listOfNzInputDirective:1}),(t()(),r.tb(4,0,[[2,0],["nzInput",1]],0,1,"input",[["nz-input",""],["placeholder","\u6b4c\u5355/\u6b4c\u624b/\u6b4c\u66f2"],["type","text"]],[[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"focus"],[null,"blur"]],function(t,e,n){var r=!0,i=t.component;return"focus"===e&&(r=!1!==i.onFocus()&&r),"blur"===e&&(r=!1!==i.onBlur()&&r),r},null,null)),r.sb(5,16384,[[3,4]],0,At.a,[r.D,r.k],null,null)],function(t,e){t(e,2,0,"search")},function(t,e){t(e,1,1,[r.Fb(e,2).nzCompact,r.Fb(e,2).nzSearch,r.Fb(e,2).nzSearch,r.Fb(e,2).isSmallSearch,r.Fb(e,2).isAffixWrapper,r.Fb(e,2).isAddOn,r.Fb(e,2).isGroup,r.Fb(e,2).isLargeGroup,r.Fb(e,2).isLargeGroupWrapper,r.Fb(e,2).isLargeAffix,r.Fb(e,2).isLargeSearch,r.Fb(e,2).isSmallGroup,r.Fb(e,2).isSmallAffix,r.Fb(e,2).isSmallGroupWrapper]),t(e,4,0,r.Fb(e,5).disabled,"large"===r.Fb(e,5).nzSize,"small"===r.Fb(e,5).nzSize)})}function be(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function ye(t){return r.Pb(0,[r.Lb(671088640,1,{defaultRef:0}),r.Lb(671088640,2,{nzInput:0}),(t()(),r.ib(0,[["defaultView",2]],null,0,null,me)),(t()(),r.ib(16777216,null,null,1,null,be)),r.sb(4,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,4,0,n.customView?n.customView:r.Fb(e,2))},null)}var ve=n("jvIg");class _e{constructor(t,e,n){this.el=t,this.rd=e,this.doc=n,this.bindFlag=!1,this.onClickOutSide=new r.m}ngOnChanges(t){t.bindFlag&&!t.bindFlag.firstChange&&(this.bindFlag?this.handleClick=this.rd.listen(this.doc,"click",t=>{const e=t.target;this.el.nativeElement.contains(e)||this.onClickOutSide.emit(e)}):this.handleClick())}}class we{constructor(){this.wyVertical=!1,this.wyBuffer=!1,this.style={}}ngOnInit(){}ngOnChanges(t){t.wyLength&&(this.wyVertical?(this.style.height=this.wyLength+"%",this.style.left=null,this.style.width=null):(this.style.width=this.wyLength+"%",this.style.bottom=null,this.style.height=null))}}var xe=r.rb({encapsulation:2,styles:[],data:{}});function Ce(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,2,"div",[["class","wy-slider-track"]],[[2,"buffer",null]],null,null,null,null)),r.Kb(512,null,R.F,R.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,R.o,[R.F],{ngStyle:[0,"ngStyle"]},null)],function(t,e){t(e,2,0,e.component.style)},function(t,e){t(e,0,0,e.component.wyBuffer)})}class Se{constructor(){this.wyVertical=!1,this.style={}}ngOnInit(){}ngOnChanges(t){t.wyOffset&&(this.style[this.wyVertical?"bottom":"left"]=this.wyOffset+"%")}}var Oe=r.rb({encapsulation:2,styles:[],data:{}});function ke(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,2,"div",[["class","wy-slider-handle"]],null,null,null,null,null)),r.Kb(512,null,R.F,R.G,[r.k,r.s,r.D]),r.sb(2,278528,null,0,R.o,[R.F],{ngStyle:[0,"ngStyle"]},null)],function(t,e){t(e,2,0,e.component.style)},null)}var Ee=n("VRyK");function Te(t){t.stopPropagation(),t.preventDefault()}var ze=n("calH"),Pe=n("LQIB");class Ie{constructor(t,e){this.doc=t,this.cdr=e,this.wyVertical=!1,this.wyMin=0,this.wyMax=100,this.bufferOffset=0,this.wyOnAfterChange=new r.m,this.isDragging=!1,this.value=null,this.offset=null}ngOnInit(){this.sliderDom=this.wySlider.nativeElement,this.createDraggingObservables(),this.subscribeDrag(["start"])}createDraggingObservables(){const t=this.wyVertical?"pageY":"pageX",e={start:"mousedown",move:"mousemove",end:"mouseup",filter:t=>t instanceof MouseEvent,pluckKey:[t]},n={start:"touchstart",move:"touchmove",end:"touchend",filter:t=>t instanceof TouchEvent,pluckKey:["touches","0",t]};[e,n].forEach(t=>{const{start:e,move:n,end:r,filter:i,pluckKey:s}=t;t.startPlucked$=Object(de.a)(this.sliderDom,e).pipe(Object(g.filter)(i),Object(g.tap)(Te),Object(g.pluck)(...s),Object(g.map)(t=>this.findClosestValue(t))),t.end$=Object(de.a)(this.doc,r),t.moveResolved$=Object(de.a)(this.doc,n).pipe(Object(g.filter)(i),Object(g.tap)(Te),Object(g.pluck)(...s),Object(g.distinctUntilChanged)(),Object(g.map)(t=>this.findClosestValue(t)),Object(g.takeUntil)(t.end$))}),this.dragStart$=Object(Ee.a)(e.startPlucked$,n.startPlucked$),this.dragMove$=Object(Ee.a)(e.moveResolved$,n.moveResolved$),this.dragEnd$=Object(Ee.a)(e.end$,n.end$)}subscribeDrag(t=["start","move","end"]){Object(ze.b)(t,"start")&&this.dragStart$&&!this.dragStart_&&(this.dragStart_=this.dragStart$.subscribe(this.onDragStart.bind(this))),Object(ze.b)(t,"move")&&this.dragMove$&&!this.dragMove_&&(this.dragMove_=this.dragMove$.subscribe(this.onDragMove.bind(this))),Object(ze.b)(t,"end")&&this.dragEnd$&&!this.dragEnd_&&(this.dragEnd_=this.dragEnd$.subscribe(this.onDragEnd.bind(this)))}unsubscribeDrag(t=["start","move","end"]){Object(ze.b)(t,"start")&&this.dragStart_&&(this.dragStart_.unsubscribe(),this.dragStart_=null),Object(ze.b)(t,"move")&&this.dragMove_&&(this.dragMove_.unsubscribe(),this.dragMove_=null),Object(ze.b)(t,"end")&&this.dragEnd_&&(this.dragEnd_.unsubscribe(),this.dragEnd_=null)}onDragStart(t){this.toggleDragMoving(!0),this.setValue(t)}onDragMove(t){this.isDragging&&(this.setValue(t),this.cdr.markForCheck())}onDragEnd(){this.wyOnAfterChange.emit(this.value),this.toggleDragMoving(!1),this.cdr.markForCheck()}setValue(t,e=!1){if(e){if(this.isDragging)return;this.value=this.formatValue(t),this.updateTrackAndHandles()}else this.valuesEqual(this.value,t)||(this.value=t,this.updateTrackAndHandles(),this.onValueChange(this.value))}formatValue(t){return this.assertValueValid(t)?this.wyMin:Object(Pe.c)(t,this.wyMin,this.wyMax)}assertValueValid(t){return isNaN("number"!=typeof t?parseFloat(t):t)}valuesEqual(t,e){return typeof t==typeof e&&t===e}updateTrackAndHandles(){this.offset=this.getValueToOffset(this.value),this.cdr.markForCheck()}getValueToOffset(t){return Object(Pe.a)(this.wyMin,this.wyMax,t)}toggleDragMoving(t){this.isDragging=t,t?this.subscribeDrag(["move","end"]):this.unsubscribeDrag(["move","end"])}findClosestValue(t){const e=this.getSliderLength(),n=this.getSliderStartPosition(),r=Object(Pe.c)((t-n)/e,0,1);return(this.wyVertical?1-r:r)*(this.wyMax-this.wyMin)+this.wyMin}getSliderLength(){return this.wyVertical?this.sliderDom.clientHeight:this.sliderDom.clientWidth}getSliderStartPosition(){const t=function(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView;return{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}}(this.sliderDom);return this.wyVertical?t.top:t.left}onValueChange(t){}onTouched(){}writeValue(t){this.setValue(t,!0)}registerOnChange(t){this.onValueChange=t}registerOnTouched(t){this.onTouched=t}ngOnDestroy(){this.unsubscribeDrag()}}var Me=r.rb({encapsulation:2,styles:[[".wy-slider{height:9px;color:rgba(0,0,0,.65);font-size:14px;position:relative;background:url(statbar.906bf73adcb93a86f52d.png) right 0;cursor:pointer}.wy-slider .wy-slider-track{position:absolute;left:0;width:0;height:100%;background:url(statbar.906bf73adcb93a86f52d.png) left -66px}.wy-slider .wy-slider-track.buffer{background-position:right -30px}.wy-slider .wy-slider-handle{position:absolute;margin-top:-7px;margin-left:-12px;display:inline-block;width:22px;height:24px;background:url(iconall.de77152ca400e40498b5.png) 0 -250px no-repeat;cursor:pointer;overflow:hidden}.wy-slider.wy-slider-vertical{width:4px;height:100%;background-color:#000000a6;background-image:none}.wy-slider.wy-slider-vertical .wy-slider-track{position:absolute;left:0;bottom:0;width:100%;height:0;background:url(playbar.db568b1cb780bab0b454.png) -40px bottom}.wy-slider.wy-slider-vertical .wy-slider-handle{margin-bottom:-10px;margin-left:-7px;bottom:0;display:inline-block;width:18px;height:20px;background:url(iconall.de77152ca400e40498b5.png) -40px -280px no-repeat;cursor:pointer;overflow:hidden}"]],data:{}});function De(t){return r.Pb(2,[r.Lb(402653184,1,{wySlider:0}),(t()(),r.tb(1,0,[[1,0],["wySlider",1]],null,6,"div",[["class","wy-slider"]],[[2,"wy-slider-vertical",null]],null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"app-wy-slider-track",[],null,null,null,Ce,xe)),r.sb(3,638976,null,0,we,[],{wyVertical:[0,"wyVertical"],wyLength:[1,"wyLength"],wyBuffer:[2,"wyBuffer"]},null),(t()(),r.tb(4,0,null,null,1,"app-wy-slider-track",[],null,null,null,Ce,xe)),r.sb(5,638976,null,0,we,[],{wyVertical:[0,"wyVertical"],wyLength:[1,"wyLength"]},null),(t()(),r.tb(6,0,null,null,1,"app-wy-slider-handle",[],null,null,null,ke,Oe)),r.sb(7,638976,null,0,Se,[],{wyVertical:[0,"wyVertical"],wyOffset:[1,"wyOffset"]},null)],function(t,e){var n=e.component;t(e,3,0,n.wyVertical,n.bufferOffset,!0),t(e,5,0,n.wyVertical,n.offset),t(e,7,0,n.wyVertical,n.offset)},function(t,e){t(e,1,0,e.component.wyVertical)})}var Ae=n("W4B1"),Ne=n("mrSG"),Re=function(t,e){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Fe(t,e){function n(){this.constructor=t}Re(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function $e(t){console.error("[BScroll warn]: "+t)}var Le="undefined"!=typeof window,je=Le&&navigator.userAgent.toLowerCase(),Be=je&&/wechatdevtools/.test(je),Ve=je&&je.indexOf("android")>0;function We(){return window.performance&&window.performance.now?window.performance.now()+window.performance.timing.navigationStart:+new Date}function Ue(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];for(var s in i)t[s]=i[s]}return t}function He(t){return null==t}var Ge=Le&&document.createElement("div").style,qe=function(){if(!Le)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==Ge[t[e]])return e;return!1}();function Ke(t){return!1===qe?t:"standard"===qe?"transitionEnd"===t?"transitionend":t:qe+t.charAt(0).toUpperCase()+t.substr(1)}function Ye(t){return"string"==typeof t?document.querySelector(t):t}function Xe(t,e,n,r){t.addEventListener(e,n,{passive:!1,capture:!!r})}function Ze(t,e,n,r){t.removeEventListener(e,n,{capture:!!r})}function Qe(t){for(var e=0,n=0;t;)e-=t.offsetLeft,n-=t.offsetTop,t=t.offsetParent;return{left:e,top:n}}qe&&"standard"!==qe&&qe.toLowerCase();var Je=Ke("transform"),tn=Ke("transition"),en=Le&&Ke("perspective")in Ge,nn=Le&&("ontouchstart"in window||Be),rn=Le&&tn in Ge,sn={transform:Je,transition:tn,transitionTimingFunction:Ke("transitionTimingFunction"),transitionDuration:Ke("transitionDuration"),transitionDelay:Ke("transitionDelay"),transformOrigin:Ke("transformOrigin"),transitionEnd:Ke("transitionEnd")},on={touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2};function ln(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}function an(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1}var un=an;function cn(t,e){var n;void 0===e&&(e="click"),"mouseup"===t.type?n=t:"touchend"!==t.type&&"touchcancel"!==t.type||(n=t.changedTouches[0]);var r,i={};n&&(i.screenX=n.screenX||0,i.screenY=n.screenY||0,i.clientX=n.clientX||0,i.clientY=n.clientY||0);var s=!0,o=!0;if("undefined"!=typeof MouseEvent)try{r=new MouseEvent(e,Ue({bubbles:s,cancelable:o},i))}catch(t){l()}else l();function l(){(r=document.createEvent("Event")).initEvent(e,s,o),Ue(r,i)}r.forwardedTouchEvent=!0,r._constructed=!0,t.target.dispatchEvent(r)}var hn={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},dn=Le&&window;function pn(){}var fn,gn,mn,bn,yn=Le?dn.requestAnimationFrame||dn.webkitRequestAnimationFrame||dn.mozRequestAnimationFrame||dn.oRequestAnimationFrame||function(t){return window.setTimeout(t,(t.interval||100/60)/2)}:pn,vn=Le?dn.cancelAnimationFrame||dn.webkitCancelAnimationFrame||dn.mozCancelAnimationFrame||dn.oCancelAnimationFrame||function(t){window.clearTimeout(t)}:pn,_n=function(t){},wn={enumerable:!0,configurable:!0,get:_n,set:_n},xn=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,n){return void 0===n&&(n=this),this._checkInTypes(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,n]),this},t.prototype.once=function(t,e,n){var r=this;void 0===n&&(n=this),this._checkInTypes(t);var i=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];r.off(t,i),e.apply(n,s)};return i.fn=e,this.on(t,i),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this._checkInTypes(t),!e)return this.events[t]=[],this;var n=this.events[t];if(!n)return this;for(var r=n.length;r--;)(n[r][0]===e||n[r][0]&&n[r][0].fn===e)&&n.splice(r,1);return this}},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._checkInTypes(t);var r=this.events[t];if(r)for(var i,s=r.length,o=r.slice(),l=0;l<s;l++){var a=o[l],u=a[0],c=a[1];if(u&&!0===(i=u.apply(c,e)))return i}},t.prototype.registerType=function(t){var e=this;t.forEach(function(t){e.eventTypes[t]=t})},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype._checkInTypes=function(t){var e=this.eventTypes;e[t]===t||$e('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e)+"]")},t}(),Cn=function(t){return t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative",t[t.Default=0]="Default",t}({}),Sn=function(t){return t.Default="",t.Horizontal="horizontal",t.Vertical="vertical",t.None="none",t}({}),On=function(t){return t.None="",t.Horizontal="horizontal",t.Vertical="vertical",t}({}),kn=function(t){return t[t.Touch=1]="Touch",t[t.Mouse=2]="Mouse",t}({}),En=function(t){return t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t}({}),Tn=function(t){return t[t.Default=0]="Default",t[t.Throttle=1]="Throttle",t[t.Normal=2]="Normal",t[t.Realtime=3]="Realtime",t}({}),zn=function(){function t(){this.startX=0,this.startY=0,this.scrollX=!1,this.scrollY=!0,this.freeScroll=!1,this.directionLockThreshold=5,this.eventPassthrough=On.None,this.click=!1,this.dblclick=!1,this.tap="",this.bounce={top:!0,bottom:!0,left:!0,right:!0},this.bounceTime=800,this.momentum=!0,this.momentumLimitTime=300,this.momentumLimitDistance=15,this.swipeTime=2500,this.swipeBounceTime=500,this.deceleration=.0015,this.flickLimitTime=200,this.flickLimitDistance=100,this.resizePolling=60,this.probeType=Tn.Default,this.stopPropagation=!1,this.preventDefault=!0,this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},this.tagException={tagName:/^TEXTAREA$/},this.HWCompositing=!0,this.useTransition=!0,this.bindToWrapper=!1,this.disableMouse=nn,this.disableTouch=!nn,this.autoBlur=!0}return t.prototype.merge=function(t){if(!t)return this;for(var e in t)this[e]=t[e];return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&en?" translateZ(0)":"",this.useTransition=this.useTransition&&rn,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX=this.eventPassthrough!==On.Horizontal&&this.scrollX,this.scrollY=this.eventPassthrough!==On.Vertical&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t}(),Pn=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(Xe)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Ze)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach(function(r){t(n,r.name,e,!!r.capture)})},t.prototype.handleEvent=function(t){var e=t.type;this.events.some(function(n){return n.name===e&&(n.handler(t),!0)})},t}(),In=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new xn(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return t.prototype.handleDOMEvents=function(){var t=this.options,e=this.wrapper,n=t.bindToWrapper?e:window,r=[],i=[],s=nn&&!t.disableTouch,o=!t.disableMouse;t.click&&r.push({name:"click",handler:this.click.bind(this),capture:!0}),s&&(r.push({name:"touchstart",handler:this.start.bind(this)}),i.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),o&&(r.push({name:"mousedown",handler:this.start.bind(this)}),i.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new Pn(e,r),this.targetEventRegister=new Pn(n,i)},t.prototype.beforeHandler=function(t,e){var n=this.options,r=n.preventDefault,i=n.stopPropagation,s=n.preventDefaultException;({start:function(){return r&&!an(t.target,s)},end:function(){return r&&!an(t.target,s)},move:function(){return r}})[e]()&&t.preventDefault(),i&&t.stopPropagation()},t.prototype.setInitiated=function(t){void 0===t&&(t=0),this.initiated=t},t.prototype.start=function(t){var e=on[t.type];if(!this.initiated||this.initiated===e)if(this.setInitiated(e),un(t.target,this.options.tagException))this.setInitiated();else if((e!==kn.Mouse||t.button===En.Left)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,t)){this.beforeHandler(t,"start");var n=t.touches?t.touches[0]:t;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,t)}},t.prototype.move=function(t){if(on[t.type]===this.initiated){this.beforeHandler(t,"move");var e=t.touches?t.touches[0]:t,n=e.pageX-this.pointX,r=e.pageY-this.pointY;if(this.pointX=e.pageX,this.pointY=e.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:r,e:t})){var i=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,s=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o=this.pointX-i,l=this.pointY-s;(o>document.documentElement.clientWidth-this.options.momentumLimitDistance||o<this.options.momentumLimitDistance||l<this.options.momentumLimitDistance||l>document.documentElement.clientHeight-this.options.momentumLimitDistance)&&this.end(t)}}},t.prototype.end=function(t){on[t.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(t,"end"),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.click=function(t){this.hooks.trigger(this.hooks.eventTypes.click,t)},t.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},t}(),Mn={x:["translateX","px"],y:["translateY","px"]},Dn=function(){function t(t){this.content=t,this.style=t.style,this.hooks=new xn(["beforeTranslate","translate"])}return t.prototype.getComputedPosition=function(){var t=window.getComputedStyle(this.content,null)[sn.transform].split(")")[0].split(", ");return{x:+(t[12]||t[4]),y:+(t[13]||t[5])}},t.prototype.translate=function(t){var e=[];Object.keys(t).forEach(function(n){if(Mn[n]){var r=Mn[n][0];r&&e.push(r+"("+t[n]+Mn[n][1]+")")}}),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,e,t),this.style[sn.transform]=""+e.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,t)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),An=function(){function t(t,e,n){this.content=t,this.translater=e,this.options=n,this.hooks=new xn(["move","end","beforeForceStop","forceStop","time","timeFunction"]),this.style=t.style}return t.prototype.translate=function(t){this.translater.translate(t)},t.prototype.setPending=function(t){this.pending=t},t.prototype.setForceStopped=function(t){this.forceStopped=t},t.prototype.destroy=function(){this.hooks.destroy(),vn(this.timer)},t}(),Nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fe(e,t),e.prototype.startProbe=function(){var t=this,e=function(){var n=t.translater.getComputedPosition();t.hooks.trigger(t.hooks.eventTypes.move,n),t.pending?t.timer=yn(e):t.hooks.trigger(t.hooks.eventTypes.end,n)};vn(this.timer),this.timer=yn(e)},e.prototype.transitionTime=function(t){void 0===t&&(t=0),this.style[sn.transitionDuration]=t+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},e.prototype.transitionTimingFunction=function(t){this.style[sn.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.move=function(t,e,n,r,i){this.setPending(n>0&&(t.x!==e.x||t.y!==e.y)),this.transitionTimingFunction(r),this.transitionTime(n),this.translate(e),n&&this.options.probeType===Tn.Realtime&&this.startProbe(),n||(this._reflow=this.content.offsetHeight),n||i||(this.hooks.trigger(this.hooks.eventTypes.move,e),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.stop=function(){if(this.pending){this.setPending(!1),vn(this.timer);var t=this.translater.getComputedPosition(),e=t.x,n=t.y;if(this.transitionTime(),this.translate({x:e,y:n}),this.setForceStopped(!0),this.hooks.trigger(this.hooks.eventTypes.beforeForceStop,{x:e,y:n}))return;this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:e,y:n})}},e}(An),Rn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fe(e,t),e.prototype.move=function(t,e,n,r,i){if(!n){if(this.translate(e),this._reflow=this.content.offsetHeight,i)return;return this.hooks.trigger(this.hooks.eventTypes.move,e),void this.hooks.trigger(this.hooks.eventTypes.end,e)}this.animate(t,e,n,r)},e.prototype.animate=function(t,e,n,r){var i=this,s=We(),o=s+n,l=function(){var a=We();if(a>=o)return i.translate(e),i.hooks.trigger(i.hooks.eventTypes.move,e),void i.hooks.trigger(i.hooks.eventTypes.end,e);var u=r(a=(a-s)/n),c={};Object.keys(e).forEach(function(n){var r=t[n];c[n]=(e[n]-r)*u+r}),i.translate(c),i.pending&&(i.timer=yn(l)),i.options.probeType===Tn.Realtime&&i.hooks.trigger(i.hooks.eventTypes.move,c)};this.setPending(!0),vn(this.timer),l()},e.prototype.stop=function(){if(this.pending){this.setPending(!1),vn(this.timer);var t=this.translater.getComputedPosition();if(this.setForceStopped(!0),this.hooks.trigger(this.hooks.eventTypes.beforeForceStop,t))return;this.hooks.trigger(this.hooks.eventTypes.forceStop,t)}},e}(An),Fn=function(){function t(t,e){this.wrapper=t,this.options=e,this.hooks=new xn(["momentum","end"]),this.content=this.wrapper.children[0],this.currentPos=0,this.startPos=0}return t.prototype.start=function(){this.direction=Cn.Default,this.movingDirection=Cn.Default,this.dist=0},t.prototype.move=function(t){this.movingDirection=(t=this.hasScroll?t:0)>0?Cn.Negative:t<0?Cn.Positive:Cn.Default;var e=this.currentPos+t;return(e>this.minScrollPos||e<this.maxScrollPos)&&(e=e>this.minScrollPos&&this.options.bounces[0]||e<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+t/3:e>this.minScrollPos?this.minScrollPos:this.maxScrollPos),e},t.prototype.end=function(t){var e={duration:0},n=Math.abs(this.currentPos-this.startPos);return this.options.momentum&&t<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance?e=this.hasScroll?this.momentum(this.currentPos,this.startPos,t,this.maxScrollPos,this.minScrollPos,this.direction===Cn.Negative&&this.options.bounces[0]||this.direction===Cn.Positive&&this.options.bounces[1]?this.wrapperSize:0,this.options):{destination:this.currentPos,duration:0}:this.hooks.trigger(this.hooks.eventTypes.end,e),e},t.prototype.momentum=function(t,e,n,r,i,s,o){void 0===o&&(o=this.options);var l=t-e,a=Math.abs(l)/n,u=o.swipeBounceTime,c={destination:t+a/o.deceleration*(l<0?-1:1),duration:o.swipeTime,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,c,l),c.destination<r?(c.destination=s?Math.max(r-s/4,r-s/c.rate*a):r,c.duration=u):c.destination>i&&(c.destination=s?Math.min(i+s/4,i+s/c.rate*a):i,c.duration=u),c.destination=Math.round(c.destination),c},t.prototype.updateDirection=function(){var t=Math.round(this.currentPos)-this.absStartPos;this.direction=t>0?Cn.Negative:t<0?Cn.Positive:Cn.Default},t.prototype.refresh=function(){var t=this.options.rect,e=t.size,n=t.position,r="static"===window.getComputedStyle(this.wrapper,null).position,i=ln(this.wrapper);this.wrapperSize=i[e];var s=ln(this.content);this.contentSize=s[e],this.relativeOffset=s[n],r&&(this.relativeOffset-=i[n]),this.minScrollPos=0,this.maxScrollPos=this.wrapperSize-this.contentSize,this.maxScrollPos<0&&(this.maxScrollPos-=this.relativeOffset,this.minScrollPos=-this.relativeOffset),this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,this.hasScroll||(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize),this.direction=0},t.prototype.updatePosition=function(t){this.currentPos=t},t.prototype.getCurrentPos=function(){return Math.round(this.currentPos)},t.prototype.checkInBoundary=function(){var t=this.adjustPosition(this.currentPos);return{position:t,inBoundary:t===this.getCurrentPos()}},t.prototype.adjustPosition=function(t){var e=Math.round(t);return!this.hasScroll||e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos),e},t.prototype.updateStartPos=function(){this.startPos=this.currentPos},t.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},t.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},t.prototype.getAbsDist=function(t){return this.dist+=t,Math.abs(this.dist)},t.prototype.destroy=function(){this.hooks.destroy()},t}(),$n=function(t){return t.Yes="yes",t.No="no",t}({}),Ln=((fn={})[$n.Yes]=function(t){return!0},fn[$n.No]=function(t){return t.preventDefault(),!1},fn),jn=((gn={})[Sn.Horizontal]=((mn={})[$n.Yes]=On.Horizontal,mn[$n.No]=On.Vertical,mn),gn[Sn.Vertical]=((bn={})[$n.Yes]=On.Vertical,bn[$n.No]=On.Horizontal,bn),gn),Bn=function(){function t(t,e,n){this.directionLockThreshold=t,this.freeScroll=e,this.eventPassthrough=n,this.reset()}return t.prototype.reset=function(){this.directionLocked=Sn.Default},t.prototype.checkMovingDirection=function(t,e,n){return this.computeDirectionLock(t,e),this.handleEventPassthrough(n)},t.prototype.adjustDelta=function(t,e){return this.directionLocked===Sn.Horizontal?e=0:this.directionLocked===Sn.Vertical&&(t=0),{deltaX:t,deltaY:e}},t.prototype.computeDirectionLock=function(t,e){this.directionLocked!==Sn.Default||this.freeScroll||(this.directionLocked=t>e+this.directionLockThreshold?Sn.Horizontal:e>=t+this.directionLockThreshold?Sn.Vertical:Sn.None)},t.prototype.handleEventPassthrough=function(t){var e=jn[this.directionLocked];if(e){if(this.eventPassthrough===e[$n.Yes])return Ln[$n.Yes](t);if(this.eventPassthrough===e[$n.No])return Ln[$n.No](t)}return!1},t}(),Vn=function(){function t(t,e,n,r,i){this.hooks=new xn(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd"]),this.scrollBehaviorX=t,this.scrollBehaviorY=e,this.actionsHandler=n,this.animater=r,this.options=i,this.directionLockAction=new Bn(i.directionLockThreshold,i.freeScroll,i.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return t.prototype.bindActionsHandler=function(){var t=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(e){return!t.enabled||t.handleStart(e)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(e){return!t.enabled||t.handleMove(e.deltaX,e.deltaY,e.e)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(e){return!t.enabled||t.handleEnd(e)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(e){t.enabled&&!e._constructed&&t.handleClick(e)})},t.prototype.handleStart=function(t){var e=We();this.moved=!1,this.startTime=e,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.stop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,t)},t.prototype.handleMove=function(t,e,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var r=this.scrollBehaviorX.getAbsDist(t),i=this.scrollBehaviorY.getAbsDist(e),s=We();if(this.checkMomentum(r,i,s))return!0;if(this.directionLockAction.checkMovingDirection(r,i,n))return this.actionsHandler.setInitiated(),!0;var o=this.directionLockAction.adjustDelta(t,e),l=this.scrollBehaviorX.move(o.deltaX),a=this.scrollBehaviorY.move(o.deltaY);this.moved||(this.moved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.animater.translate({x:l,y:a}),this.dispatchScroll(s)}},t.prototype.dispatchScroll=function(t){t-this.startTime>this.options.momentumLimitTime&&(this.startTime=t,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),this.options.probeType===Tn.Throttle&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>Tn.Throttle&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},t.prototype.checkMomentum=function(t,e,n){return n-this.endTime>this.options.momentumLimitTime&&e<this.options.momentumLimitDistance&&t<this.options.momentumLimitDistance},t.prototype.handleEnd=function(t){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,t)){var e=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,t,e))return!0;this.animater.translate(e),this.endTime=We(),this.hooks.trigger(this.hooks.eventTypes.scrollEnd,e,this.endTime-this.startTime)}},t.prototype.handleClick=function(t){an(t.target,this.options.preventDefaultException)||(t.preventDefault(),t.stopPropagation())},t.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},t.prototype.refresh=function(){this.endTime=0},t.prototype.destroy=function(){this.hooks.destroy()},t}();function Wn(t,e,n,r){var i=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime"].reduce(function(e,n){return e[n]=t[n],e},{});return i.scrollable=t[e],i.bounces=n,i.rect=r,i}function Un(t,e,n){n.forEach(function(n){var r,i;"string"==typeof n?r=i=n:(r=n.source,i=n.target),t.on(r,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.trigger.apply(e,[i].concat(t))})})}var Hn=function(){function t(t,e){this.hooks=new xn(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","refresh","touchEnd","end","flick","scrollCancel","momentum","scrollTo","ignoreDisMoveForSamePos","scrollToElement"]),this.wrapper=t,this.content=t.children[0],this.options=e;var n,r=this.options.bounce,i=r.left,s=r.right,o=r.top,l=void 0===o||o,a=r.bottom,u=void 0===a||a;this.scrollBehaviorX=new Fn(t,Wn(e,"scrollX",[void 0===i||i,void 0===s||s],{size:"width",position:"left"})),this.scrollBehaviorY=new Fn(t,Wn(e,"scrollY",[l,u],{size:"height",position:"top"})),this.translater=new Dn(this.content),this.animater=function(t,e,n){var r=n.useTransition,i={};return Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return n.probeType}}),r?new Nn(t,e,i):new Rn(t,e,i)}(this.content,this.translater,this.options),this.actionsHandler=new In(t,(n=this.options,["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException"].reduce(function(t,e){return t[e]=n[e],t},{}))),this.actions=new Vn(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var c=this.resize.bind(this);this.resizeRegister=new Pn(window,[{name:"orientationchange",handler:c},{name:"resize",handler:c}]),this.transitionEndRegister=new Pn(this.content,[{name:sn.transitionEnd,handler:this.transitionEnd.bind(this)}]),this.init()}return t.prototype.init=function(){var t=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,function(){t.togglePointerEvents(!0)})},t.prototype.bindTranslater=function(){var t=this,e=this.translater.hooks;e.on(e.eventTypes.beforeTranslate,function(e){t.options.translateZ&&e.push(t.options.translateZ)}),e.on(e.eventTypes.translate,function(e){t.updatePositions(e),t.togglePointerEvents(!1)})},t.prototype.bindAnimater=function(){var t=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(e){t.resetPosition(t.options.bounceTime)||(t.animater.setPending(!1),t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e))}),Un(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},t.prototype.bindActions=function(){var t=this,e=this.actions;Un(e.hooks,this.hooks,[{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:e.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:e.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:e.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:e.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:e.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),e.hooks.on(e.hooks.eventTypes.end,function(n,r){return t.hooks.trigger(t.hooks.eventTypes.touchEnd,r),!!t.hooks.trigger(t.hooks.eventTypes.end,r)||(!e.moved&&t.checkClick(n)?(t.animater.setForceStopped(!1),t.hooks.trigger(t.hooks.eventTypes.scrollCancel),!0):(t.animater.setForceStopped(!1),!!t.resetPosition(t.options.bounceTime,hn.bounce)||void 0))}),e.hooks.on(e.hooks.eventTypes.scrollEnd,function(e,n){var r=Math.abs(e.x-t.scrollBehaviorX.startPos),i=Math.abs(e.y-t.scrollBehaviorY.startPos);t.checkFlick(n,r,i)?t.hooks.trigger(t.hooks.eventTypes.flick):t.momentum(e,n)||t.hooks.trigger(t.hooks.eventTypes.scrollEnd,e)})},t.prototype.checkFlick=function(t,e,n){if(this.hooks.events.flick.length>1&&t<this.options.flickLimitTime&&e<this.options.flickLimitDistance&&n<this.options.flickLimitDistance)return!0},t.prototype.momentum=function(t,e){var n={time:0,easing:hn.swiper,newX:t.x,newY:t.y},r=this.scrollBehaviorX.end(e),i=this.scrollBehaviorY.end(e);if(n.newX=He(r.destination)?n.newX:r.destination,n.newY=He(i.destination)?n.newY:i.destination,n.time=Math.max(r.duration,i.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==t.x||n.newY!==t.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=hn.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},t.prototype.checkClick=function(t){var e=this.animater.forceStopped;if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return!0;if(!e){var n=this.options.dblclick,r=!1;if(n&&this.lastClickTime){var i=n.delay,s=void 0===i?300:i;We()-this.lastClickTime<s&&(r=!0,function(t){cn(t,"dblclick")}(t))}return this.options.tap&&function(t,e){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)}(t,this.options.tap),this.options.click&&!an(t.target,this.options.preventDefaultException)&&cn(t),this.lastClickTime=r?null:We(),!0}return!1},t.prototype.resize=function(){var t=this;this.actions.enabled&&(Ve&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){t.refresh()},this.options.resizePolling))},t.prototype.transitionEnd=function(t){t.target===this.content&&this.animater.pending&&(this.animater.transitionTime(),this.resetPosition(this.options.bounceTime,hn.bounce)||(this.animater.setPending(!1),this.options.probeType!==Tn.Realtime&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos())))},t.prototype.togglePointerEvents=function(t){void 0===t&&(t=!0);for(var e=this.content.children.length?this.content.children:[this.content],n=t?"auto":"none",r=0;r<e.length;r++){var i=e[r];i.isBScroll||(i.style.pointerEvents=n)}},t.prototype.refresh=function(){this.scrollBehaviorX.refresh(),this.scrollBehaviorY.refresh(),this.actions.refresh(),this.wrapperOffset=Qe(this.wrapper)},t.prototype.scrollBy=function(t,e,n,r){void 0===n&&(n=0);var i=this.getCurrentPos();this.scrollTo(t+=i.x,e+=i.y,n,r=r||hn.bounce)},t.prototype.scrollTo=function(t,e,n,r,i,s){void 0===n&&(n=0),void 0===i&&(i={start:{},end:{}}),r=r||hn.bounce;var o=this.options.useTransition?r.style:r.fn,l=this.getCurrentPos(),a=Object(Ne.__assign)({x:l.x,y:l.y},i.start),u=Object(Ne.__assign)({x:t,y:e},i.end);this.hooks.trigger(this.hooks.eventTypes.scrollTo,u),(this.hooks.trigger(this.hooks.eventTypes.ignoreDisMoveForSamePos)||a.x!==u.x||a.y!==u.y)&&this.animater.move(a,u,n,o,s)},t.prototype.scrollToElement=function(t,e,n,r,i){var s=Ye(t),o=Qe(s),l=function(t,e,n){return"number"==typeof t?t:t?Math.round(e/2-n/2):0};n=l(n,s.offsetWidth,this.wrapper.offsetWidth),r=l(r,s.offsetHeight,this.wrapper.offsetHeight);var a=function(t,e,n,r){return r.adjustPosition((t-=e)-n)};o.left=a(o.left,this.wrapperOffset.left,n,this.scrollBehaviorX),o.top=a(o.top,this.wrapperOffset.top,r,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,s,o)||this.scrollTo(o.left,o.top,e,i)},t.prototype.resetPosition=function(t,e){void 0===t&&(t=0),e=e||hn.bounce;var n=this.scrollBehaviorX.checkInBoundary(),r=n.position,i=n.inBoundary,s=this.scrollBehaviorY.checkInBoundary();return!(i&&s.inBoundary||(this.scrollTo(r,s.position,t,e),0))},t.prototype.updatePositions=function(t){this.scrollBehaviorX.updatePosition(t.x),this.scrollBehaviorY.updatePosition(t.y)},t.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},t.prototype.enable=function(){this.actions.enabled=!0},t.prototype.disable=function(){vn(this.animater.timer),this.actions.enabled=!1},t.prototype.destroy=function(){var t=this;["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"].forEach(function(e){return t[e].destroy()})},t}(),Gn=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}],qn=function(t){return t.Pre="pre",t.Post="post",t}({}),Kn=function(t){function e(e,n){var r=t.call(this,["refresh","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,i=Ye(e);return i?i.children[0]?(r.plugins={},r.options=(new zn).merge(n).process(),r.hooks=new xn(["init","refresh","enable","disable","destroy"]),r.init(i),r):($e("The wrapper need at least one child element to be scroller."),r):($e("Can not resolve the wrapper DOM."),r)}return Fe(e,t),e.use=function(t){var e=t.pluginName;return this.plugins.some(function(e){return t===e.ctor})?this:He(e)?($e("Plugin Class must specify plugin's name in static property by 'pluginName' field."),this):this.pluginsMap[e]?($e("This plugin has been registered, maybe you need change plugin's name"),this):(this.pluginsMap[e]=!0,this.plugins.push({name:e,enforce:t.enforce,ctor:t}),this)},e.prototype.init=function(t){this.wrapper=t,t.isBScroll=!0,this.scroller=new Hn(t,this.options),this.eventBubbling(),this.handleAutoBlur(),this.innerRefresh(),this.scroller.scrollTo(this.options.startX,this.options.startY),this.enable(),this.proxy(Gn),this.applyPlugins()},e.prototype.applyPlugins=function(){var t=this,e=this.options;this.constructor.plugins.sort(function(t,e){var n,r=((n={})[qn.Pre]=-1,n[qn.Post]=1,n);return(t.enforce?r[t.enforce]:0)-(e.enforce?r[e.enforce]:0)}).forEach(function(n){var r=n.ctor;e[n.name]&&"function"==typeof r&&(t.plugins[n.name]=new r(t))})},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,function(){var t=document.activeElement;!t||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||t.blur()})},e.prototype.eventBubbling=function(){Un(this.scroller.hooks,this,["beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick"])},e.prototype.innerRefresh=function(){this.scroller.refresh(),this.hooks.trigger(this.hooks.eventTypes.refresh),this.trigger(this.eventTypes.refresh)},e.prototype.proxy=function(t){var e=this;t.forEach(function(t){!function(t,e,n){wn.get=function(){return function(t,n){for(var r=e.split("."),i=0;i<r.length-1;i++)if("object"!=typeof(t=t[r[i]])||!t)return;var s=r.pop();return"function"==typeof t[s]?function(){return t[s].apply(t,arguments)}:t[s]}(this)},wn.set=function(t){!function(t,n,r){for(var i,s=e.split("."),o=0;o<s.length-1;o++)t[i=s[o]]||(t[i]={}),t=t[i];t[s.pop()]=r}(this,0,t)},Object.defineProperty(t,n,wn)}(e,t.sourceKey,t.key)})},e.prototype.refresh=function(){this.innerRefresh(),this.scroller.resetPosition()},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(xn),Yn=function(t){return t.Horizontal="horizontal",t.Vertical="vertical",t}({}),Xn="undefined"!=typeof window,Zn=Xn&&navigator.userAgent.toLowerCase(),Qn=(Zn&&/wechatdevtools/.test(Zn),Zn&&Zn.indexOf("android"),Xn&&document.createElement("div").style),Jn=function(){if(!Xn)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==Qn[t[e]])return e;return!1}();function tr(t){return!1===Jn?t:"standard"===Jn?"transitionEnd"===t?"transitionend":t:Jn+t.charAt(0).toUpperCase()+t.substr(1)}Jn&&"standard"!==Jn&&Jn.toLowerCase();var er=tr("transform"),nr=(tr("transition"),Xn&&tr("perspective"),er),rr=tr("transitionTimingFunction"),ir=tr("transitionDuration");tr("transitionDelay"),tr("transformOrigin"),tr("transitionEnd");var sr="undefined"!=typeof window,or=sr&&navigator.userAgent.toLowerCase(),lr=(or&&/wechatdevtools/.test(or),or&&or.indexOf("android"),sr&&document.createElement("div").style),ar=function(){if(!sr)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==lr[t[e]])return e;return!1}();function ur(t){return!1===ar?t:"standard"===ar?"transitionEnd"===t?"transitionend":t:ar+t.charAt(0).toUpperCase()+t.substr(1)}function cr(t,e,n,r){t.addEventListener(e,n,{passive:!1,capture:!!r})}function hr(t,e,n,r){t.removeEventListener(e,n,{capture:!!r})}ar&&"standard"!==ar&&ar.toLowerCase(),ur("transform"),ur("transition"),sr&&ur("perspective"),ur("transitionTimingFunction"),ur("transitionDuration"),ur("transitionDelay"),ur("transformOrigin"),ur("transitionEnd"),sr&&window;var dr=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(cr)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(hr)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach(function(r){t(n,r.name,e,!!r.capture)})},t.prototype.handleEvent=function(t){var e=t.type;this.events.some(function(n){return n.name===e&&(n.handler(t),!0)})},t}(),pr=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,n){return void 0===n&&(n=this),this._checkInTypes(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,n]),this},t.prototype.once=function(t,e,n){var r=this;void 0===n&&(n=this),this._checkInTypes(t);var i=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];r.off(t,i),e.apply(n,s)};return i.fn=e,this.on(t,i),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this._checkInTypes(t),!e)return this.events[t]=[],this;var n=this.events[t];if(!n)return this;for(var r=n.length;r--;)(n[r][0]===e||n[r][0]&&n[r][0].fn===e)&&n.splice(r,1);return this}},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this._checkInTypes(t);var r=this.events[t];if(r)for(var i,s=r.length,o=r.slice(),l=0;l<s;l++){var a=o[l],u=a[0],c=a[1];if(u&&!0===(i=u.apply(c,e)))return i}},t.prototype.registerType=function(t){var e=this;t.forEach(function(t){e.eventTypes[t]=t})},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype._checkInTypes=function(t){var e,n=this.eventTypes;n[t]===t||(e='EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(n)+"]",console.error("[BScroll warn]: "+e))},t}(),fr=function(){function t(t,e){this.indicator=t,this.options=e,this.bscroll=t.bscroll,this.startEventRegister=new dr(this.indicator.el,[{name:e.disableMouse?"touchstart":"mousedown",handler:this._start.bind(this)}]),this.endEventRegister=new dr(window,[{name:e.disableMouse?"touchend":"mouseup",handler:this._end.bind(this)}]),this.hooks=new pr(["touchStart","touchMove","touchEnd"])}return t.prototype._start=function(t){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.initiated=!0,this.moved=!1,this.lastPoint=e[this.indicator.keysMap.pointPos],this.moveEventRegister=new dr(window,[{name:this.bscroll.options.disableMouse?"touchmove":"mousemove",handler:this._move.bind(this)}]),this.hooks.trigger("touchStart")},t.prototype._move=function(t){var e=(t.touches?t.touches[0]:t)[this.indicator.keysMap.pointPos];t.preventDefault(),t.stopPropagation();var n=e-this.lastPoint;if(this.lastPoint=e,!this.moved)return this.hooks.trigger("touchMove",this.moved,n),void(this.moved=!0);this.hooks.trigger("touchMove",this.moved,n)},t.prototype._end=function(t){this.initiated&&(this.initiated=!1,t.preventDefault(),t.stopPropagation(),this.moveEventRegister.destroy(),this.hooks.trigger("touchEnd",this.moved))},t.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister&&this.moveEventRegister.destroy(),this.endEventRegister.destroy()},t}(),gr=function(){function t(t,e){this.bscroll=t,this.options=e,this.keyVals={sizeRatio:1,maxPos:0,initialSize:0},this.curPos=0,this.hooksHandlers=[],this.wrapper=e.wrapper,this.wrapperStyle=this.wrapper.style,this.el=this.wrapper.children[0],this.elStyle=this.el.style,this.bscroll=t,this.direction=e.direction,this.keysMap=this._getKeysMap(),e.fade?(this.visible=0,this.wrapperStyle.opacity="0"):this.visible=1,this._listenHooks(e.fade,e.interactive),this.refresh()}return t.prototype._listenHooks=function(t,e){var n=this,r=this.bscroll,i=r,s=r.scroller.translater.hooks,o=r.scroller.animater.hooks;if(this._listen(i,"refresh",this.refresh),this._listen(s,"translate",this.updatePosAndSize),this._listen(o,"time",function(t){n.setTransitionTime(t)}),this._listen(o,"timeFunction",function(t){n.setTransitionTimingFunction(t)}),t&&(this._listen(i,"scrollEnd",function(){n.fade()}),this._listen(i,"scrollStart",function(){n.fade(!0)}),r.eventTypes.mousewheelStart&&r.eventTypes.mousewheelEnd&&(this._listen(i,"mousewheelStart",function(){n.fade(!0)}),this._listen(i,"mousewheelEnd",function(){n.fade()}))),e){this.eventHandler=new fr(this,{disableMouse:this.bscroll.options.disableMouse});var l=this.eventHandler.hooks;this._listen(l,"touchStart",this.startHandler),this._listen(l,"touchMove",this.moveHandler),this._listen(l,"touchEnd",this.endHandler)}},t.prototype._getKeysMap=function(){return this.direction===Yn.Vertical?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScroll:"maxScrollY",pos:"y",pointPos:"pageY",translate:"translateY"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScroll:"maxScrollX",pos:"x",pointPos:"pageX",translate:"translateX"}},t.prototype.fade=function(t){this.wrapperStyle[ir]=(t?250:500)+"ms",this.wrapperStyle.opacity=t?"1":"0",this.visible=t?1:0},t.prototype.refresh=function(){if(this._setShowBy(this.bscroll[this.keysMap.hasScroll])){var t=this.keysMap;this.keyVals=this._refreshKeyValues(this.wrapper[t.wrapperSize],this.bscroll[t.scrollerSize],this.bscroll[t.maxScroll]),this.updatePosAndSize({x:this.bscroll.x,y:this.bscroll.y})}},t.prototype._setShowBy=function(t){return t?(this.wrapper.style.display="",!0):(this.wrapper.style.display="none",!1)},t.prototype._refreshKeyValues=function(t,e,n){var r=Math.max(Math.round(t*t/(e||t||1)),8),i=t-r;return{initialSize:r,maxPos:i,sizeRatio:i/n}},t.prototype.updatePosAndSize=function(t){var e=this._refreshPosAndSizeValue(t,this.keyVals),n=e.pos,r=e.size;this.curPos=n,this._refreshPosAndSizeStyle(r,n)},t.prototype._refreshPosAndSizeValue=function(t,e){var n,r=e.initialSize,i=e.maxPos,s=Math.round(e.sizeRatio*t[this.keysMap.pos]);return s<0?(n=Math.max(r+3*s,8),s=0):s>i?s=i+r-(n=Math.max(r-3*(s-i),8)):n=r,{pos:s,size:n}},t.prototype._refreshPosAndSizeStyle=function(t,e){var n=this.keysMap,r=n.translate;this.elStyle[n.size]=t+"px",this.elStyle[nr]=r+"("+e+"px)"+this.bscroll.options.translateZ},t.prototype.setTransitionTime=function(t){void 0===t&&(t=0),this.elStyle[ir]=t+"ms"},t.prototype.setTransitionTimingFunction=function(t){this.elStyle[rr]=t},t.prototype.startHandler=function(){this.setTransitionTime(),this.bscroll.trigger("beforeScrollStart")},t.prototype.moveHandler=function(t,e){t||this.bscroll.trigger("scrollStart");var n=this._calScrollDesPos(this.curPos,e,this.keyVals);this.direction===Yn.Vertical?this.bscroll.scrollTo(this.bscroll.x,n):this.bscroll.scrollTo(n,this.bscroll.y),this.bscroll.trigger("scroll",{x:this.bscroll.x,y:this.bscroll.y})},t.prototype._calScrollDesPos=function(t,e,n){var r=n.maxPos,i=t+e;return i<0?i=0:i>r&&(i=r),Math.round(i/n.sizeRatio)},t.prototype.endHandler=function(t){t&&this.bscroll.trigger("scrollEnd",{x:this.bscroll.x,y:this.bscroll.y})},t.prototype.destroy=function(){this.options.interactive&&this.eventHandler.destroy(),this.wrapper.parentNode.removeChild(this.wrapper),this.hooksHandlers.forEach(function(t){t[0].off(t[1],t[2])}),this.hooksHandlers.length=0},t.prototype._listen=function(t,e,n){t.on(e,n,this),this.hooksHandlers.push([t,e,n])},t}(),mr=function(){function t(t){this.indicators=[],t.options.scrollbar&&(this.indicators=this._initIndicators(t),t.on("destroy",this.destroy,this))}return t.prototype._initIndicators=function(t){for(var e,n=t.options.scrollbar,r=n.fade,i=void 0===r||r,s=n.interactive,o=void 0!==s&&s,l=[],a=0,u=Object.entries({scrollX:Yn.Horizontal,scrollY:Yn.Vertical});a<u.length;a++){var c=u[a],h=c[1];t.options[c[0]]&&(e={wrapper:this._createIndicatorElement(h),direction:h,fade:i,interactive:o},t.wrapper.appendChild(e.wrapper),l.push(new gr(t,e)))}return l},t.prototype._createIndicatorElement=function(t){var e=document.createElement("div"),n=document.createElement("div");return e.style.cssText="position:absolute;z-index:9999;pointerEvents:none",n.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",n.className="bscroll-indicator","horizontal"===t?(e.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%",e.className="bscroll-horizontal-scrollbar"):(e.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%",e.className="bscroll-vertical-scrollbar"),e.style.cssText+=";overflow:hidden",e.appendChild(n),e},t.prototype._insertIndicatorsTo=function(t){for(var e=0,n=this.indicators;e<n.length;e++)t.wrapper.appendChild(n[e].wrapper)},t.prototype.destroy=function(){for(var t=0,e=this.indicators;t<e.length;t++)e[t].destroy()},t.pluginName="scrollbar",t}(),br="undefined"!=typeof window,yr=br&&navigator.userAgent.toLowerCase();function vr(t,e,n){return t<e?e:t>n?n:t}yr&&/wechatdevtools/.test(yr),yr&&yr.indexOf("android");var _r=br&&document.createElement("div").style,wr=function(){if(!br)return!1;var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==_r[t[e]])return e;return!1}();function xr(t){return!1===wr?t:"standard"===wr?"transitionEnd"===t?"transitionend":t:wr+t.charAt(0).toUpperCase()+t.substr(1)}function Cr(t,e,n,r){t.addEventListener(e,n,{passive:!1,capture:!!r})}function Sr(t,e,n,r){t.removeEventListener(e,n,{capture:!!r})}wr&&"standard"!==wr&&wr.toLowerCase(),xr("transform"),xr("transition"),br&&xr("perspective"),xr("transitionTimingFunction"),xr("transitionDuration"),xr("transitionDelay"),xr("transformOrigin"),xr("transitionEnd"),br&&window;var Or=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(Cr)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Sr)},t.prototype.handleDOMEvents=function(t){var e=this,n=this.wrapper;this.events.forEach(function(r){t(n,r.name,e,!!r.capture)})},t.prototype.handleEvent=function(t){var e=t.type;this.events.some(function(n){return n.name===e&&(n.handler(t),!0)})},t}(),kr=function(t){return t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative",t[t.Default=0]="Default",t}({}),Er=function(t){return t.Pre="pre",t.Post="post",t}({}),Tr=function(){function t(t){this.scroll=t,this.wheelStart=!1,t.registerType(["mousewheelMove","mousewheelStart","mousewheelEnd"]),this.mouseWheelOpt=t.options.mouseWheel,this.deltaCache=[],this.registorEvent(),this.hooksFn=[],this.registorHooks(t.hooks,"destroy",this.destroy)}return t.prototype.destroy=function(){this.eventRegistor.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(t){t[0].off(t[1],t[2])})},t.prototype.registorEvent=function(){this.eventRegistor=new Or(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},t.prototype.wheelHandler=function(t){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMove(e),this.wheelStopDetactor(t,e)},t.prototype.wheelStartHandler=function(t){this.deltaCache=[],this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},t.prototype.wheelStopDetactor=function(t,e){var n=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){n.wheelStart=!1,window.clearTimeout(n.wheelMoveTimer),n.wheelMoveTimer=0,n.scroll.trigger(n.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.throttle||400)},t.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,n=e.speed,r=void 0===n?20:n,i=e.invert,s=0,o=0,l=void 0!==i&&i?kr.Negative:kr.Positive;switch(!0){case"deltaX"in t:1===t.deltaMode?(s=-t.deltaX*r,o=-t.deltaY*r):(s=-t.deltaX,o=-t.deltaY);break;case"wheelDeltaX"in t:s=t.wheelDeltaX/120*r,o=t.wheelDeltaY/120*r;break;case"wheelDelta"in t:s=o=t.wheelDelta/120*r;break;case"detail"in t:s=o=-t.detail/3*r}return s*=l,o*=l,this.scroll.scroller.scrollBehaviorY.hasScroll||(s=o,o=0),this.scroll.scroller.scrollBehaviorX.hasScroll||(s=0),{x:s,y:o,directionX:s>0?kr.Negative:s<0?kr.Positive:0,directionY:o>0?kr.Negative:o<0?kr.Positive:0}},t.prototype.beforeHandler=function(t){var e=this.scroll.options,n=e.stopPropagation;e.preventDefault&&!function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1}(t.target,e.preventDefaultException)&&t.preventDefault(),n&&t.stopPropagation()},t.prototype.wheelMove=function(t){var e=this;if(this.mouseWheelOpt.debounce&&this.wheelMoveTimer)this.deltaCache.push(t);else{var n=this.deltaCache.reduce(function(t,e){return{x:t.x+e.x,y:t.y+e.y}},{x:0,y:0});this.deltaCache=[];var r=this.scroll.x+Math.round(t.x)+n.x,i=this.scroll.y+Math.round(t.y)+n.y,s=this.scroll.scroller.scrollBehaviorX,o=this.scroll.scroller.scrollBehaviorY;if(r=vr(r,s.maxScrollPos,s.minScrollPos),i=vr(i,o.maxScrollPos,o.minScrollPos),!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:r,y:i})){var l=this.getEaseTime();r===this.scroll.x&&i===this.scroll.y||this.scroll.scrollTo(r,i,l)}this.mouseWheelOpt.debounce&&(this.wheelMoveTimer=window.setTimeout(function(){e.wheelMoveTimer=0},this.mouseWheelOpt.debounce))}},t.prototype.registorHooks=function(t,e,n){t.on(e,n,this),this.hooksFn.push([t,e,n])},t.prototype.getEaseTime=function(){var t=this.mouseWheelOpt.easeTime||300;return t<100&&console.error("[BScroll warn]: easeTime should be greater than 100.\n      If mouseWheel easeTime is too small, scrollEnd will be triggered many times."),t},t.pluginName="mouseWheel",t.enforce=Er.Pre,t}(),zr=n("PqYM");Kn.use(Tr),Kn.use(mr);class Pr{constructor(t){this.el=t,this.refreshDelay=50,this.onScrollEnd=new r.m}ngOnInit(){}ngAfterViewInit(){this.bs=new Kn(this.wrapRef.nativeElement,{scrollbar:{interactive:!0},mouseWheel:{}}),this.bs.on("scrollEnd",({y:t})=>this.onScrollEnd.emit(t))}ngOnChanges(t){t.data&&this.refreshScroll()}scrollToElement(...t){this.bs.scrollToElement.apply(this.bs,t)}scrollTo(...t){this.bs.scrollTo.apply(this.bs,t)}refresh(){this.bs.refresh()}refreshScroll(){Object(zr.a)(this.refreshDelay).subscribe(()=>{this.refresh()})}}var Ir=r.rb({encapsulation:2,styles:[".wy-scroll{width: 100%; height: 100%; overflow: hidden;}"],data:{}});function Mr(t){return r.Pb(2,[r.Lb(402653184,1,{wrapRef:0}),(t()(),r.tb(1,0,[[1,0],["wrap",1]],null,1,"div",[["class","wy-scroll"]],null,null,null,null,null)),r.Eb(null,0)],null,null)}var Dr=n("R36U");class Ar{constructor(t){this.songServe=t,this.onClose=new r.m,this.onChangeSong=new r.m,this.onDeleteSong=new r.m,this.onClearSong=new r.m,this.onToInfo=new r.m,this.onLikeSong=new r.m,this.onShareSong=new r.m,this.scrollY=0,this.startLine=2}ngOnInit(){}ngOnChanges(t){t.playing&&(t.playing.firstChange||this.lyric&&this.lyric.togglePlay(this.playing)),t.songList&&this.currentSong&&this.updateCurrentIndex(),t.currentSong&&(this.currentSong?(this.updateCurrentIndex(),this.updateLyric(),this.show&&this.scrollToCurrent()):this.resetLyric()),t.show&&!t.show.firstChange&&this.show&&(this.wyScroll.first.refreshScroll(),this.wyScroll.last.refreshScroll(),Object(zr.a)(80).subscribe(()=>{this.currentSong&&this.scrollToCurrent(0),this.lyricRefs&&this.scrollToCurrentLyric(0)}))}updateCurrentIndex(){this.currentIndex=Object(ze.a)(this.songList,this.currentSong)}updateLyric(){this.resetLyric(),this.songServe.getLyric(this.currentSong.id).subscribe(t=>{this.lyric=new Dr.a(t),this.currentLyric=this.lyric.lines,this.startLine=t.tlyric?1:3,this.handleLyric(),this.wyScroll.last.scrollTo(0,0),this.playing&&this.lyric.play()})}handleLyric(){this.lyric.handler.subscribe(({lineNum:t})=>{this.lyricRefs||(this.lyricRefs=this.wyScroll.last.el.nativeElement.querySelectorAll("ul li")),this.lyricRefs.length&&(this.currentLineNum=t,t>this.startLine?this.scrollToCurrentLyric(300):this.wyScroll.last.scrollTo(0,0))})}resetLyric(){this.lyric&&(this.lyric.stop(),this.lyric=null,this.currentLyric=[],this.currentLineNum=0,this.lyricRefs=null)}seekLyric(t){this.lyric&&this.lyric.seek(t)}scrollToCurrent(t=300){const e=this.wyScroll.first.el.nativeElement.querySelectorAll("ul li");if(e.length){const n=e[this.currentIndex||0],r=n.offsetTop,i=n.offsetHeight;(r-Math.abs(this.scrollY)>5*i||r<Math.abs(this.scrollY))&&this.wyScroll.first.scrollToElement(n,t,!1,!1)}}scrollToCurrentLyric(t=300){const e=this.lyricRefs[this.currentLineNum-this.startLine];e&&this.wyScroll.last.scrollToElement(e,t,!1,!1)}toInfo(t,e){t.stopPropagation(),this.onToInfo.emit(e)}likeSong(t,e){t.stopPropagation(),this.onLikeSong.emit(e)}shareSong(t,e){t.stopPropagation(),this.onShareSong.emit(e)}}var Nr=n("1w6q"),Rr=r.rb({encapsulation:0,styles:[[".play-panel[_ngcontent-%COMP%]{display:none;position:absolute;left:0;bottom:70px;width:100%;height:300px;background-color:#292929;overflow:hidden}.play-panel.show[_ngcontent-%COMP%]{display:block}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]{background:url(playlist_bg.ed5cf7aaf67380ad1d6c.png) no-repeat}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]{position:relative;height:40px}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{position:absolute;left:25px;top:0;height:39px;line-height:39px;font-size:14px;color:#e2e2e2}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .add-all[_ngcontent-%COMP%], .play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]{position:absolute;left:398px;top:12px;height:15px;line-height:15px;cursor:pointer;color:#989898;font-size:12px}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .add-all[_ngcontent-%COMP%]:hover, .play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]:hover{color:#e2e2e2}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .add-all[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%], .play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{background-position:-88px -189px}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .add-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:inline-block;width:25px;height:25px;background:url(playbar.db568b1cb780bab0b454.png) -88px -163px no-repeat;cursor:pointer;overflow:hidden;vertical-align:middle}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:absolute;top:15px;left:482px;height:15px;border-left:1px solid #000;border-right:1px solid #2c2c2c}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]{left:490px;top:15px}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]:hover   .trush[_ngcontent-%COMP%]{background-position:-51px -20px}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .clear-all[_ngcontent-%COMP%]   .trush[_ngcontent-%COMP%]{width:13px;height:16px;background-image:url(playlist.c4b7693a282867a3ee69.png);background-position:-51px 0}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .playing-name[_ngcontent-%COMP%]{position:absolute;left:595px;top:0;width:346px;text-align:center;height:39px;line-height:39px;color:#fff;font-size:14px}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:6px;right:8px;display:inline-block;width:30px;height:30px;background:url(playlist.c4b7693a282867a3ee69.png) -195px 9px no-repeat;cursor:pointer;overflow:hidden}.play-panel[_ngcontent-%COMP%]   .hd[_ngcontent-%COMP%]   .hdc[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{background-position:-195px -20px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]{position:relative;display:inline-block;width:976px;height:260px;background:url(playlist_bg.ed5cf7aaf67380ad1d6c.png) -1014px 0 repeat-y;cursor:pointer;overflow:hidden}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .imgbg[_ngcontent-%COMP%]{position:absolute;left:2px;top:0;width:980px;height:auto;opacity:.2}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .msk[_ngcontent-%COMP%]{position:absolute;left:2px;top:0;z-index:2;width:558px;height:260px;background-color:#121212;opacity:.5}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]{position:absolute;left:2px;top:0;z-index:3;height:260px;width:553px;color:#989898}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{overflow:hidden;padding:10px 0}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{float:left}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{display:inline-block;width:10px;height:13px;background:url(playlist.c4b7693a282867a3ee69.png) -182px 0 no-repeat;cursor:pointer;overflow:hidden;margin:6px 10px 0;visibility:hidden}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:280px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .singers[_ngcontent-%COMP%]{width:70px;margin:0 10px;float:left;height:20px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .singers[_ngcontent-%COMP%]   .singer-item[_ngcontent-%COMP%]{float:left}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]{margin:0 10px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:inline-block;width:14px;height:16px;background:url(playlist.c4b7693a282867a3ee69.png) -80px 0 no-repeat;cursor:pointer;overflow:hidden;margin-top:4px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{background-position:-80px -20px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{margin-top:4px;visibility:hidden;overflow:hidden}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico[_ngcontent-%COMP%]{float:left;margin:0 3px;display:inline-block;width:16px;height:16px;background:url(playlist.c4b7693a282867a3ee69.png) no-repeat;cursor:pointer;overflow:hidden}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico.like[_ngcontent-%COMP%]{background-position:-24px 0}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico.like[_ngcontent-%COMP%]:hover{background-position:-24px -20px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico.share[_ngcontent-%COMP%]{background-position:0 0}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico.share[_ngcontent-%COMP%]:hover{background-position:0 -20px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico.trush[_ngcontent-%COMP%]{background-position:-51px 0}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]   .ico.trush[_ngcontent-%COMP%]:hover{background-position:-51px -20px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#fff;background-color:#000}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .icons[_ngcontent-%COMP%]{visibility:visible}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#000}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-wrap[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{visibility:visible}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-lyric[_ngcontent-%COMP%]{position:absolute;right:2px;top:0;margin:21px 0 20px;height:219px;width:414px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-lyric[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#989898;word-wrap:break-word;text-align:center;line-height:32px;transition:color .3s;font-size:12px}.play-panel[_ngcontent-%COMP%]   .bd[_ngcontent-%COMP%]   .list-lyric[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.current[_ngcontent-%COMP%]{color:#fff}"]],data:{}});function Fr(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","singer-item"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"a",[["class","col ellipsis"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toInfo(n,["/singer",t.context.$implicit.id])&&r),r},null,null)),(t()(),r.Nb(2,null,["",""])),(t()(),r.tb(3,0,null,null,1,"span",[],[[8,"hidden",0]],null,null,null,null)),(t()(),r.Nb(-1,null,["/"]))],null,function(t,e){t(e,2,0,e.context.$implicit.name),t(e,3,0,e.context.last)})}function $r(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,14,"li",[],[[2,"current",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeSong.emit(t.context.$implicit)&&r),r},null,null)),(t()(),r.tb(1,0,null,null,0,"i",[["class","col arrow"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,1,"div",[["class","col name ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(3,null,["",""])),(t()(),r.tb(4,0,null,null,3,"div",[["class","col icons"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,0,"i",[["class","ico like"],["title","\u6536\u85cf"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.likeSong(n,t.context.$implicit.id)&&r),r},null,null)),(t()(),r.tb(6,0,null,null,0,"i",[["class","ico share"],["title","\u5206\u4eab"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.shareSong(n,t.context.$implicit)&&r),r},null,null)),(t()(),r.tb(7,0,null,null,0,"i",[["class","ico trush"],["data-act","delete"],["title","\u5220\u9664"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onDeleteSong.emit(t.context.$implicit)&&r),r},null,null)),(t()(),r.tb(8,0,null,null,2,"div",[["class","singers clearfix ellipsis"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Fr)),r.sb(10,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(11,0,null,null,2,"div",[["class","col duration"]],null,null,null,null,null)),(t()(),r.Nb(12,null,["",""])),r.Jb(13,1),(t()(),r.tb(14,0,null,null,0,"div",[["class","col link"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toInfo(n,["/songInfo",t.context.$implicit.id])&&r),r},null,null))],function(t,e){t(e,10,0,e.context.$implicit.ar)},function(t,e){t(e,0,0,e.component.currentIndex===e.context.index),t(e,3,0,e.context.$implicit.name);var n=r.Ob(e,12,0,t(e,13,0,r.Fb(e.parent,0),e.context.$implicit.dt/1e3));t(e,12,0,n)})}function Lr(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"li",[],[[2,"current",null]],null,null,null,null)),(t()(),r.Nb(1,null,[" "," "])),(t()(),r.tb(2,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.Nb(3,null,[" "," "]))],null,function(t,e){t(e,0,0,e.component.currentLineNum===e.context.index),t(e,1,0,e.context.$implicit.txt),t(e,3,0,e.context.$implicit.txtCn)})}function jr(t){return r.Pb(0,[r.Hb(0,ve.a,[]),r.Lb(671088640,1,{wyScroll:1}),(t()(),r.tb(2,0,null,null,30,"div",[["class","play-panel"]],[[2,"show",null]],null,null,null,null)),(t()(),r.tb(3,0,null,null,16,"div",[["class","hd"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,15,"div",[["class","hdc"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,4,"h4",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u64ad\u653e\u5217\u8868\uff08"])),(t()(),r.tb(7,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(8,null,["",""])),(t()(),r.Nb(-1,null,["\uff09"])),(t()(),r.tb(10,0,null,null,2,"div",[["class","add-all"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,0,"i",[["class","icon"],["title","\u6536\u85cf\u5168\u90e8"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6536\u85cf\u5168\u90e8 "])),(t()(),r.tb(13,0,null,null,0,"span",[["class","line"]],null,null,null,null,null)),(t()(),r.tb(14,0,null,null,2,"div",[["class","clear-all"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClearSong.emit()&&r),r},null,null)),(t()(),r.tb(15,0,null,null,0,"i",[["class","icon trush"],["title","\u6e05\u9664"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u6e05\u9664 "])),(t()(),r.tb(17,0,null,null,1,"p",[["class","playing-name"]],null,null,null,null,null)),(t()(),r.Nb(18,null,["",""])),(t()(),r.tb(19,0,null,null,0,"i",[["class","icon close"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClose.emit()&&r),r},null,null)),(t()(),r.tb(20,0,null,null,12,"div",[["class","bd"]],null,null,null,null,null)),(t()(),r.tb(21,0,null,null,0,"img",[["class","imgbg"],["src","//music.163.com/api/img/blur/109951163826278397"]],null,null,null,null,null)),(t()(),r.tb(22,0,null,null,0,"div",[["class","msk"]],null,null,null,null,null)),(t()(),r.tb(23,0,null,null,4,"app-wy-scroll",[["class","list-wrap"]],null,[[null,"onScrollEnd"]],function(t,e,n){var r=!0;return"onScrollEnd"===e&&(r=!1!==(t.component.scrollY=n)&&r),r},Mr,Ir)),r.sb(24,4833280,[[1,4]],0,Pr,[r.k],{data:[0,"data"]},{onScrollEnd:"onScrollEnd"}),(t()(),r.tb(25,0,null,0,2,"ul",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,$r)),r.sb(27,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(28,0,null,null,4,"app-wy-scroll",[["class","list-lyric"]],null,null,null,Mr,Ir)),r.sb(29,4833280,[[1,4]],0,Pr,[r.k],{data:[0,"data"]},null),(t()(),r.tb(30,0,null,0,2,"ul",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Lr)),r.sb(32,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,24,0,n.songList),t(e,27,0,n.songList),t(e,29,0,n.currentLyric),t(e,32,0,n.currentLyric)},function(t,e){var n=e.component;t(e,2,0,n.show),t(e,8,0,n.songList.length),t(e,18,0,null==n.currentSong?null:n.currentSong.name)})}var Br=n("hLrw"),Vr=n("6+H1"),Wr=n("eBR6");const Ur=[{type:"loop",label:"\u5faa\u73af"},{type:"random",label:"\u968f\u673a"},{type:"singleLoop",label:"\u5355\u66f2\u5faa\u73af"}];var Hr=function(t){return t.Add="\u5df2\u6dfb\u52a0\u5230\u5217\u8868",t.Play="\u5df2\u5f00\u59cb\u64ad\u653e",t}({});class Gr{constructor(t,e,n,r,i){this.store$=t,this.doc=e,this.nzModalServe=n,this.batchActionsServe=r,this.router=i,this.showPlayer="hide",this.isLocked=!1,this.controlTooltip={title:"",show:!1},this.animating=!1,this.percent=0,this.bufferPercent=0,this.playing=!1,this.songReady=!1,this.volume=60,this.showVolumnPanel=!1,this.showPanel=!1,this.bindFlag=!1,this.modeCount=0;const s=this.store$.pipe(Object(a.z)(Br.f));s.pipe(Object(a.z)(Br.g)).subscribe(t=>this.watchList(t,"songList")),s.pipe(Object(a.z)(Br.d)).subscribe(t=>this.watchList(t,"playList")),s.pipe(Object(a.z)(Br.b)).subscribe(t=>this.watchCurrentIndex(t)),s.pipe(Object(a.z)(Br.e)).subscribe(t=>this.watchPlayMode(t)),s.pipe(Object(a.z)(Br.c)).subscribe(t=>this.watchCurrentSong(t)),s.pipe(Object(a.z)(Br.a)).subscribe(t=>this.watchCurrentAction(t))}ngOnInit(){this.audioEl=this.audio.nativeElement}watchList(t,e){this[e]=t}watchCurrentIndex(t){this.currentIndex=t}watchPlayMode(t){if(this.currentMode=t,this.songList){let e=this.songList.slice();"random"===t.type&&(e=Object(ze.c)(this.songList)),this.updateCurrentIndex(e,this.currentSong),this.store$.dispatch(Object(Vr.c)({playList:e}))}}watchCurrentSong(t){this.currentSong=t,this.bufferPercent=0,t&&(this.duration=t.dt/1e3)}watchCurrentAction(t){const e=Hr[Wr.a[t]];e&&(this.controlTooltip.title=e,"hide"===this.showPlayer?this.togglePlayer("show"):this.showToolTip()),this.store$.dispatch(Object(Vr.a)({currentAction:Wr.a.Other}))}onAnimateDone(t){this.animating=!1,"show"===t.toState&&this.controlTooltip.title&&this.showToolTip()}showToolTip(){this.controlTooltip.show=!0,Object(zr.a)(1500).subscribe(()=>{this.controlTooltip={title:"",show:!1}})}updateCurrentIndex(t,e){const n=Object(ze.a)(t,e);this.store$.dispatch(Object(Vr.b)({currentIndex:n}))}changeMode(){this.store$.dispatch(Object(Vr.d)({playMode:Ur[++this.modeCount%3]}))}onClickOutSide(t){"delete"!==t.dataset.act&&(this.showVolumnPanel=!1,this.showPanel=!1,this.bindFlag=!1)}onPercentChange(t){if(this.currentSong){const e=this.duration*(t/100);this.audioEl.currentTime=e,this.playerPanel&&this.playerPanel.seekLyric(1e3*e)}}onVolumeChange(t){this.audioEl.volume=t/100}toggleVolPanel(){this.togglePanel("showVolumnPanel")}toggleListPanel(){this.songList.length&&this.togglePanel("showPanel")}togglePanel(t){this[t]=!this[t],this.bindFlag=this.showVolumnPanel||this.showPanel}onToggle(){this.currentSong?this.songReady&&(this.playing=!this.playing,this.playing?this.audioEl.play():this.audioEl.pause()):this.playList.length&&this.updateIndex(0)}onPrev(t){this.songReady&&(1===this.playList.length?this.loop():this.updateIndex(t<0?this.playList.length-1:t))}onNext(t){this.songReady&&(1===this.playList.length?this.loop():this.updateIndex(t>=this.playList.length?0:t))}onEnded(){this.playing=!1,"singleLoop"===this.currentMode.type?this.loop():this.onNext(this.currentIndex+1)}onError(){this.playing=!1,this.bufferPercent=0}loop(){this.audioEl.currentTime=0,this.play(),this.playerPanel&&this.playerPanel.seekLyric(0)}updateIndex(t){this.store$.dispatch(Object(Vr.b)({currentIndex:t})),this.songReady=!1}onCanplay(){this.songReady=!0,this.play()}onTimeUpdate(t){this.currentTime=t.target.currentTime,this.percent=this.currentTime/this.duration*100;const e=this.audioEl.buffered;e.length&&this.bufferPercent<100&&(this.bufferPercent=e.end(0)/this.duration*100)}play(){this.audioEl.play(),this.playing=!0}get picUrl(){return this.currentSong?this.currentSong.al.picUrl:"//s4.music.126.net/style/web2/img/default/default_album.jpg"}onChangeSong(t){this.updateCurrentIndex(this.playList,t)}onDeleteSong(t){this.batchActionsServe.deleteSong(t)}onClearSong(){this.nzModalServe.confirm({nzTitle:"\u786e\u8ba4\u6e05\u7a7a\u5217\u8868?",nzOnOk:()=>{this.batchActionsServe.clearSong()}})}toInfo(t){t[1]&&(this.showVolumnPanel=!1,this.showPanel=!1,this.router.navigate(t))}togglePlayer(t){this.isLocked||this.animating||(this.showPlayer=t)}onLikeSong(t){this.batchActionsServe.likeSong(t)}onShareSong(t,e="song"){const n=this.makeTxt("\u6b4c\u66f2",t.name,t.ar);this.store$.dispatch(Object(u.d)({info:{id:t.id.toString(),type:e,txt:n}}))}makeTxt(t,e,n){return`${t}: ${e} -- ${n.map(t=>t.name).join("/")}`}}var qr=n("NFMk"),Kr=n("ssPz"),Yr=r.rb({encapsulation:0,styles:[[".m-player[_ngcontent-%COMP%]{position:fixed;zoom:1;left:0;bottom:-71px;width:100%}.m-player[_ngcontent-%COMP%]   .hand[_ngcontent-%COMP%]{width:100%;height:15px;cursor:pointer;opacity:.3}.m-player[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{position:relative;z-index:1}.m-player[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{position:absolute;top:-5px;right:15px;display:inline-block;width:52px;height:67px;background:url(playbar.db568b1cb780bab0b454.png) 0 -380px no-repeat;cursor:pointer;overflow:hidden}.m-player[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:6px 0 0 17px;display:inline-block;width:18px;height:18px;background:url(playbar.db568b1cb780bab0b454.png) -80px -380px no-repeat;cursor:pointer;overflow:hidden}.m-player[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{background-position:-80px -400px}.m-player[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   i.locked[_ngcontent-%COMP%]{background-position:-100px -380px}.m-player[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   i.locked[_ngcontent-%COMP%]:hover{background-position:-100px -400px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{background-color:#292929}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{position:relative;display:flex;padding:8px 0}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{width:137px;padding-top:6px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;border-radius:50%;display:inline-block;width:28px;height:28px;background:url(playbar.db568b1cb780bab0b454.png) no-repeat;overflow:hidden;cursor:pointer}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i.prev[_ngcontent-%COMP%]{background-position:0 -130px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i.prev[_ngcontent-%COMP%]:hover{background-position:-30px -130px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i.toggle[_ngcontent-%COMP%]{width:36px;height:36px;background-position:-40px -204px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i.toggle.playing[_ngcontent-%COMP%]{background-position:0 -165px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i.next[_ngcontent-%COMP%]{background-position:-80px -130px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   i.next[_ngcontent-%COMP%]:hover{background-position:-110px -130px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;margin:6px 15px 0 0}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:34px;height:34px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .mask[_ngcontent-%COMP%]{position:absolute;top:0;left:0;display:inline-block;width:34px;height:34px;background:url(playbar.db568b1cb780bab0b454.png) 0 -80px no-repeat;cursor:pointer;overflow:hidden}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{width:608px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .words[_ngcontent-%COMP%]{color:#fff;min-height:18px;text-shadow:0 1px 0 0 5px 16px rgba(0,0,0,.8)}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .words.hide[_ngcontent-%COMP%]{visibility:hidden}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{float:left;max-width:300px;margin-right:10px;cursor:pointer}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .words[_ngcontent-%COMP%]   .songs[_ngcontent-%COMP%], .m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .words[_ngcontent-%COMP%]   .songs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{color:#fff}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]   .slider-wrap[_ngcontent-%COMP%]{display:inline-block;width:490px;margin-right:10px;vertical-align:bottom;padding:8px 0}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .oper[_ngcontent-%COMP%]{width:60px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .oper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:11px 2px 0 0;display:inline-block;width:25px;height:25px;background:url(playbar.db568b1cb780bab0b454.png) no-repeat;cursor:pointer;overflow:hidden}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .oper[_ngcontent-%COMP%]   i.like[_ngcontent-%COMP%]{background-position:-88px -163px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .oper[_ngcontent-%COMP%]   i.like[_ngcontent-%COMP%]:hover{background-position:-88px -189px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .oper[_ngcontent-%COMP%]   i.share[_ngcontent-%COMP%]{background-position:-114px -163px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .oper[_ngcontent-%COMP%]   i.share[_ngcontent-%COMP%]:hover{background-position:-114px -189px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]{position:relative;width:113px;padding-left:13px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:11px 2px 0 0;display:inline-block;width:25px;height:25px;background:url(playbar.db568b1cb780bab0b454.png) no-repeat;cursor:pointer;overflow:hidden}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.volume[_ngcontent-%COMP%]{background-position:-2px -248px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.volume[_ngcontent-%COMP%]:hover{background-position:-31px -248px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.random[_ngcontent-%COMP%]{background-position:-66px -248px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.random[_ngcontent-%COMP%]:hover{background-position:-93px -248px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.loop[_ngcontent-%COMP%]{background-position:-3px -344px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.loop[_ngcontent-%COMP%]:hover{background-position:-33px -344px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.singleLoop[_ngcontent-%COMP%]{background-position:-66px -344px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   i.singleLoop[_ngcontent-%COMP%]:hover{background-position:-93px -344px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]{display:inline-block;cursor:pointer}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:rgba(0,0,0,.65);text-shadow:0 1px 0 0 5px 16px rgba(0,0,0,.8);display:inline-block;width:24px;height:24px;background:url(playbar.db568b1cb780bab0b454.png) -42px -68px no-repeat;cursor:pointer;overflow:hidden}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{background-position:-42px -98px}.m-player[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .ctrl[_ngcontent-%COMP%]   .control-vol[_ngcontent-%COMP%]{position:absolute;top:-128px;left:9px;padding:14px;height:120px;background-color:#292929;z-index:1}"]],data:{animation:[{type:7,name:"showHide",definitions:[{type:0,name:"show",styles:{type:6,styles:{bottom:0},offset:null},options:void 0},{type:0,name:"hide",styles:{type:6,styles:{bottom:-71},offset:null},options:void 0},{type:1,expr:"show=>hide",animation:[{type:4,styles:null,timings:"0.3s"}],options:null},{type:1,expr:"hide=>show",animation:[{type:4,styles:null,timings:"0.1s"}],options:null}],options:{}}]}});function Xr(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toInfo(["/singer",t.context.$implicit.id])&&r),r},null,null)),(t()(),r.Nb(2,null,["",""])),(t()(),r.tb(3,0,null,null,1,"span",[],[[8,"hidden",0]],null,null,null,null)),(t()(),r.Nb(-1,null,["/"]))],null,function(t,e){t(e,2,0,e.context.$implicit.name),t(e,3,0,e.context.last)})}function Zr(t){return r.Pb(0,[r.Hb(0,ve.a,[]),r.Lb(402653184,1,{audio:0}),r.Lb(671088640,2,{playerPanel:0}),(t()(),r.tb(3,0,null,null,56,"div",[["appClickoutside",""],["class","m-player"]],[[24,"@showHide",0]],[[null,"onClickOutSide"],[null,"mouseenter"],[null,"mouseleave"],[null,"@showHide.start"],[null,"@showHide.done"]],function(t,e,n){var r=!0,i=t.component;return"onClickOutSide"===e&&(r=!1!==i.onClickOutSide(n)&&r),"mouseenter"===e&&(r=!1!==i.togglePlayer("show")&&r),"mouseleave"===e&&(r=!1!==i.togglePlayer("hide")&&r),"@showHide.start"===e&&(r=0!=(i.animating=!0)&&r),"@showHide.done"===e&&(r=!1!==i.onAnimateDone(n)&&r),r},null,null)),r.sb(4,540672,null,0,_e,[r.k,r.D,R.d],{bindFlag:[0,"bindFlag"]},{onClickOutSide:"onClickOutSide"}),(t()(),r.tb(5,0,null,null,2,"div",[["class","lock"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=0!=(i.isLocked=!i.isLocked)&&r),r},null,null)),(t()(),r.tb(6,0,null,null,1,"div",[["class","left"]],null,null,null,null,null)),(t()(),r.tb(7,0,null,null,0,"i",[],[[2,"locked",null]],null,null,null,null)),(t()(),r.tb(8,0,null,null,0,"div",[["class","hand"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,49,"div",[["class","container"]],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,48,"div",[["class","wrap"]],null,null,null,null,null)),(t()(),r.tb(11,0,null,null,3,"div",[["class","btns"]],null,null,null,null,null)),(t()(),r.tb(12,0,null,null,0,"i",[["class","prev"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onPrev(i.currentIndex-1)&&r),r},null,null)),(t()(),r.tb(13,0,null,null,0,"i",[["class","toggle"]],[[2,"playing",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onToggle()&&r),r},null,null)),(t()(),r.tb(14,0,null,null,0,"i",[["class","next"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onNext(i.currentIndex+1)&&r),r},null,null)),(t()(),r.tb(15,0,null,null,2,"div",[["class","head"]],null,null,null,null,null)),(t()(),r.tb(16,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),r.tb(17,0,null,null,0,"i",[["class","mask"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.toInfo(["/songInfo",i.currentSong&&i.currentSong.id])&&r),r},null,null)),(t()(),r.tb(18,0,null,null,20,"div",[["class","play"]],null,null,null,null,null)),(t()(),r.tb(19,0,null,null,5,"div",[["class","words clearfix"]],null,null,null,null,null)),(t()(),r.tb(20,0,null,null,1,"p",[["class","ellipsis margin-bottom-none"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.toInfo(["/songInfo",i.currentSong.id])&&r),r},null,null)),(t()(),r.Nb(21,null,["",""])),(t()(),r.tb(22,0,null,null,2,"ul",[["class","songs clearfix margin-bottom-none"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Xr)),r.sb(24,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(25,0,null,null,13,"div",[["class","bar"]],null,null,null,null,null)),(t()(),r.tb(26,0,null,null,6,"div",[["class","slider-wrap"]],null,null,null,null,null)),(t()(),r.tb(27,0,null,null,5,"app-wy-slider",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"wyOnAfterChange"]],function(t,e,n){var r=!0,i=t.component;return"ngModelChange"===e&&(r=!1!==(i.percent=n)&&r),"wyOnAfterChange"===e&&(r=!1!==i.onPercentChange(n)&&r),r},De,Me)),r.sb(28,245760,null,0,Ie,[R.d,r.h],{bufferOffset:[0,"bufferOffset"]},{wyOnAfterChange:"wyOnAfterChange"}),r.Kb(1024,null,Z.l,function(t){return[t]},[Ie]),r.sb(30,671744,null,0,Z.p,[[8,null],[8,null],[8,null],[6,Z.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,Z.m,null,[Z.p]),r.sb(32,16384,null,0,Z.n,[[4,Z.m]],null,null),(t()(),r.tb(33,0,null,null,5,"span",[["class","time"]],null,null,null,null,null)),(t()(),r.tb(34,0,null,null,2,"em",[],null,null,null,null,null)),(t()(),r.Nb(35,null,["",""])),r.Jb(36,1),(t()(),r.Nb(37,null,[" / "," "])),r.Jb(38,1),(t()(),r.tb(39,0,null,null,2,"div",[["class","oper"]],null,null,null,null,null)),(t()(),r.tb(40,0,null,null,0,"i",[["class","like"],["title","\u6536\u85cf"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onLikeSong(i.currentSong.id.toString())&&r),r},null,null)),(t()(),r.tb(41,0,null,null,0,"i",[["class","share"],["title","\u5206\u4eab"]],null,[[null,"click"]],function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.onShareSong(i.currentSong)&&r),r},null,null)),(t()(),r.tb(42,0,null,null,14,"div",[["class","ctrl"]],null,null,null,null,null)),(t()(),r.tb(43,0,null,null,0,"i",[["class","volume"],["title","\u97f3\u91cf"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleVolPanel()&&r),r},null,null)),(t()(),r.tb(44,0,null,null,2,"i",[],[[8,"title",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.changeMode()&&r),r},null,null)),r.Kb(512,null,R.D,R.E,[r.r,r.s,r.k,r.D]),r.sb(46,278528,null,0,R.j,[R.D],{ngClass:[0,"ngClass"]},null),(t()(),r.tb(47,16777216,null,null,2,"p",[["class","open"],["nz-tooltip",""],["nzOverlayClassName","tip-bg"]],[[2,"ant-tooltip-open",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.toggleListPanel()&&r),r},null,null)),r.sb(48,4931584,null,0,Ae.c,[r.k,r.P,r.j,r.D,[2,Ae.a],[8,null]],{nzTitle:[0,"nzTitle"],setTitle:[1,"setTitle"],nzOverlayClassName:[2,"nzOverlayClassName"],nzVisible:[3,"nzVisible"]},null),(t()(),r.tb(49,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),r.tb(50,0,null,null,6,"div",[["class","control-vol"]],[[8,"hidden",0]],null,null,null,null)),(t()(),r.tb(51,0,null,null,5,"app-wy-slider",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(t,e,n){var r=!0,i=t.component;return"ngModelChange"===e&&(r=!1!==(i.volume=n)&&r),"ngModelChange"===e&&(r=!1!==i.onVolumeChange(n)&&r),r},De,Me)),r.sb(52,245760,null,0,Ie,[R.d,r.h],{wyVertical:[0,"wyVertical"]},null),r.Kb(1024,null,Z.l,function(t){return[t]},[Ie]),r.sb(54,671744,null,0,Z.p,[[8,null],[8,null],[8,null],[6,Z.l]],{model:[0,"model"]},{update:"ngModelChange"}),r.Kb(2048,null,Z.m,null,[Z.p]),r.sb(56,16384,null,0,Z.n,[[4,Z.m]],null,null),(t()(),r.tb(57,0,null,null,1,"app-wy-player-panel",[],null,[[null,"onChangeSong"],[null,"onClose"],[null,"onDeleteSong"],[null,"onClearSong"],[null,"onToInfo"],[null,"onLikeSong"],[null,"onShareSong"]],function(t,e,n){var r=!0,i=t.component;return"onChangeSong"===e&&(r=!1!==i.onChangeSong(n)&&r),"onClose"===e&&(r=0!=(i.showPanel=!1)&&r),"onDeleteSong"===e&&(r=!1!==i.onDeleteSong(n)&&r),"onClearSong"===e&&(r=!1!==i.onClearSong()&&r),"onToInfo"===e&&(r=!1!==i.toInfo(n)&&r),"onLikeSong"===e&&(r=!1!==i.onLikeSong(n)&&r),"onShareSong"===e&&(r=!1!==i.onShareSong(n)&&r),r},jr,Rr)),r.sb(58,638976,[[2,4]],0,Ar,[Nr.a],{playing:[0,"playing"],songList:[1,"songList"],currentSong:[2,"currentSong"],show:[3,"show"]},{onClose:"onClose",onChangeSong:"onChangeSong",onDeleteSong:"onDeleteSong",onClearSong:"onClearSong",onToInfo:"onToInfo",onLikeSong:"onLikeSong",onShareSong:"onShareSong"}),(t()(),r.tb(59,0,[[1,0],["audio",1]],null,0,"audio",[],[[8,"src",4]],[[null,"canplay"],[null,"timeupdate"],[null,"ended"],[null,"error"]],function(t,e,n){var r=!0,i=t.component;return"canplay"===e&&(r=!1!==i.onCanplay()&&r),"timeupdate"===e&&(r=!1!==i.onTimeUpdate(n)&&r),"ended"===e&&(r=!1!==i.onEnded()&&r),"error"===e&&(r=!1!==i.onError()&&r),r},null,null))],function(t,e){var n=e.component;t(e,4,0,n.bindFlag),t(e,24,0,null==n.currentSong?null:n.currentSong.ar),t(e,28,0,n.bufferPercent),t(e,30,0,n.percent),t(e,46,0,n.currentMode.type),t(e,48,0,"",n.controlTooltip.title,"tip-bg",n.controlTooltip.show),t(e,52,0,!0),t(e,54,0,n.volume),t(e,58,0,n.playing,n.songList,n.currentSong,n.showPanel)},function(t,e){var n=e.component;t(e,3,0,n.showPlayer),t(e,7,0,n.isLocked),t(e,13,0,n.playing),t(e,16,0,n.picUrl),t(e,21,0,null==n.currentSong?null:n.currentSong.name),t(e,27,0,r.Fb(e,32).ngClassUntouched,r.Fb(e,32).ngClassTouched,r.Fb(e,32).ngClassPristine,r.Fb(e,32).ngClassDirty,r.Fb(e,32).ngClassValid,r.Fb(e,32).ngClassInvalid,r.Fb(e,32).ngClassPending);var i=r.Ob(e,35,0,t(e,36,0,r.Fb(e,0),n.currentTime));t(e,35,0,i);var s=r.Ob(e,37,0,t(e,38,0,r.Fb(e,0),n.duration));t(e,37,0,s),t(e,44,0,n.currentMode.label),t(e,47,0,r.Fb(e,48).isTooltipOpen),t(e,50,0,!n.showVolumnPanel),t(e,51,0,r.Fb(e,56).ngClassUntouched,r.Fb(e,56).ngClassTouched,r.Fb(e,56).ngClassPristine,r.Fb(e,56).ngClassDirty,r.Fb(e,56).ngClassValid,r.Fb(e,56).ngClassInvalid,r.Fb(e,56).ngClassPending),t(e,59,0,null==n.currentSong?null:n.currentSong.url)})}var Qr=n("NVjP"),Jr=n("fb/r"),ti=n("Mc5n"),ei=n("dvZr");class ni{constructor(t,e,n,i,s,o,a,u,c){this.plateformId=t,this.doc=e,this.overlay=n,this.elementRef=i,this.overlayKeyboardDispatcher=s,this.cdr=o,this.batchActionsServe=a,this.rd=u,this.overlayContainerServe=c,this.modalTitle={register:"\u6ce8\u518c",loginByPhone:"\u624b\u673a\u767b\u5f55",share:"\u5206\u4eab",like:"\u6536\u85cf",default:""},this.showModal="hide",this.visible=!1,this.showSpin=!1,this.currentModalType=l.a.Default,this.onLoadMySheets=new r.m,this.isBrowser=Object(R.A)(this.plateformId),this.scrollStrategy=this.overlay.scrollStrategies.block()}ngOnInit(){this.createOverlay()}ngAfterViewInit(){this.overlayContainerEl=this.overlayContainerServe.getContainerElement(),this.listenResizeToCenter()}ngOnChanges(t){t.visible&&!t.visible.firstChange&&this.handleVisibleChange(this.visible)}createOverlay(){this.overlayRef=this.overlay.create(),this.overlayRef.overlayElement.appendChild(this.elementRef.nativeElement),this.overlayRef.keydownEvents().subscribe(t=>this.keydownListener(t))}keydownListener(t){t.keyCode===ei.e&&this.hide()}handleVisibleChange(t){t?(this.showModal="show",this.scrollStrategy.enable(),this.overlayKeyboardDispatcher.add(this.overlayRef),this.listenResizeToCenter(),this.changePointerEvents("auto")):(this.showModal="hide",this.scrollStrategy.disable(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.resizeHandler(),this.changePointerEvents("none")),this.cdr.markForCheck()}changePointerEvents(t){this.overlayContainerEl&&(this.overlayContainerEl.style.pointerEvents=t)}hide(){this.batchActionsServe.controlModal(!1)}listenResizeToCenter(){if(this.isBrowser){const t=this.modalRef.nativeElement,e=this.getHideDomSize(t);this.keepCenter(t,e),this.resizeHandler=this.rd.listen("window","resize",()=>this.keepCenter(t,e))}}keepCenter(t,e){const n=(this.getWIndowSize().w-e.w)/2,r=(this.getWIndowSize().h-e.h)/2;t.style.left=n+"px",t.style.top=r+"px"}getHideDomSize(t){return{w:t.offsetWidth,h:t.offsetHeight}}getWIndowSize(){return{w:window.innerWidth||this.doc.documentElement.clientWidth||this.doc.body.offsetWidth,h:window.innerHeight||this.doc.documentElement.clientHeight||this.doc.body.offsetHeight}}}var ri=r.rb({encapsulation:0,styles:[[".m-layer[_ngcontent-%COMP%]{position:absolute;width:530px;box-shadow:0 5px 16px rgba(0,0,0,.8);background-color:#fff;transform-origin:50% 50%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-width:0 1px 1px}.m-layer[_ngcontent-%COMP%]   .zbar[_ngcontent-%COMP%]{position:relative;height:38px;line-height:38px;border:1px solid #292929;background-color:#292929;text-indent:20px;font-weight:700;color:#fff;cursor:move}.m-layer[_ngcontent-%COMP%]   .zcls[_ngcontent-%COMP%]{position:absolute;top:16px;right:20px;display:inline-block;width:10px;height:10px;background:url(layer.c3811556cb5c698eee7b.png) 0 -95px no-repeat;cursor:pointer;overflow:hidden}.m-layer[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;background-color:#fff;opacity:.5}"]],data:{animation:[{type:7,name:"showHide",definitions:[{type:0,name:"show",styles:{type:6,styles:{transform:"scale(1)",opacity:1},offset:null},options:void 0},{type:0,name:"hide",styles:{type:6,styles:{transform:"scale(0)",opacity:0},offset:null},options:void 0},{type:1,expr:"show<=>hide",animation:{type:4,styles:null,timings:"0.1s"},options:null}],options:{}}]}});function ii(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),r.Eb(null,0),(t()(),r.ib(0,null,null,0))],null,null)}function si(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),r.Eb(null,1),(t()(),r.ib(0,null,null,0))],null,null)}function oi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),r.Eb(null,2),(t()(),r.ib(0,null,null,0))],null,null)}function li(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),r.Eb(null,3),(t()(),r.ib(0,null,null,0))],null,null)}function ai(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),r.Eb(null,4),(t()(),r.ib(0,null,null,0))],null,null)}function ui(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-spin",[["class","spin"],["nzTip","loading..."]],[[2,"ant-spin-nested-loading",null]],null,null,Qr.b,Qr.a)),r.sb(1,770048,null,0,Jr.a,[r.h],{nzTip:[0,"nzTip"]},null)],function(t,e){t(e,1,0,"loading...")},function(t,e){t(e,0,0,!r.Fb(e,1).nzSimple)})}function ci(t){return r.Pb(2,[r.Lb(671088640,1,{modalRef:0}),(t()(),r.tb(1,16777216,[[1,0],["modalContainer",1]],null,24,"div",[["cdkDrag",""],["cdkDragBoundary",".cdk-overlay-container"],["class","m-layer cdk-drag"]],[[24,"@showHide",0],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),r.sb(2,4866048,null,3,ti.c,[r.k,[3,ti.b],R.d,r.y,r.P,ti.a,[2,tt.b],ti.e,r.h],{boundaryElement:[0,"boundaryElement"]},null),r.Lb(603979776,2,{_handles:1}),r.Lb(603979776,3,{_previewTemplate:0}),r.Lb(603979776,4,{_placeholderTemplate:0}),r.Kb(2048,null,ti.h,null,[ti.c]),(t()(),r.tb(7,0,null,null,3,"div",[["cdkDragHandle",""],["class","zbar cdk-drag-handle"]],null,null,null,null,null)),r.sb(8,147456,[[2,4]],0,ti.d,[r.k,[2,ti.h]],null,null),(t()(),r.tb(9,0,null,null,1,"div",[["class","zttl f-thide"]],null,null,null,null,null)),(t()(),r.Nb(10,null,["",""])),(t()(),r.tb(11,0,null,null,11,null,null,null,null,null,null,null)),r.sb(12,16384,null,0,R.p,[],{ngSwitch:[0,"ngSwitch"]},null),(t()(),r.ib(16777216,null,null,1,null,ii)),r.sb(14,278528,null,0,R.q,[r.P,r.L,R.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,si)),r.sb(16,278528,null,0,R.q,[r.P,r.L,R.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,oi)),r.sb(18,278528,null,0,R.q,[r.P,r.L,R.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,li)),r.sb(20,278528,null,0,R.q,[r.P,r.L,R.p],{ngSwitchCase:[0,"ngSwitchCase"]},null),(t()(),r.ib(16777216,null,null,1,null,ai)),r.sb(22,16384,null,0,R.r,[r.P,r.L,R.p],null,null),(t()(),r.tb(23,0,null,null,0,"div",[["class","zcls"],["title","\u5173\u95ed"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.hide()&&r),r},null,null)),(t()(),r.ib(16777216,null,null,1,null,ui)),r.sb(25,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,".cdk-overlay-container"),t(e,12,0,n.currentModalType),t(e,14,0,"loginByPhone"),t(e,16,0,"register"),t(e,18,0,"like"),t(e,20,0,"share"),t(e,25,0,n.showSpin)},function(t,e){var n=e.component;t(e,1,0,n.showModal,r.Fb(e,2).disabled,r.Fb(e,2)._dragRef.isDragging()),t(e,10,0,n.modalTitle[n.currentModalType])})}var hi=n("wf2+"),di=n("tYkK"),pi=r.rb({encapsulation:2,styles:["\n      nz-form-control {\n        display: block;\n      }\n      form .has-feedback .ant-input-suffix i {\n        margin-right: 18px;\n      }\n    "],data:{animation:[{type:7,name:"helpMotion",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0,transform:"translateY(-5px)"},offset:null},{type:4,styles:{type:6,styles:{opacity:1,transform:"translateY(0)"},offset:null},timings:"0.3s cubic-bezier(0.645, 0.045, 0.355, 1)"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1,transform:"translateY(0)"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,transform:"translateY(-5px)"},offset:null},timings:"0.3s cubic-bezier(0.645, 0.045, 0.355, 1)"}],options:null}],options:{}}]}});function fi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"i",[["nz-icon",""]],null,null,null,null,null)),r.sb(1,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"]},null)],function(t,e){t(e,1,0,e.component.iconType)},null)}function gi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzSuccessTip)})}function mi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,gi)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutletContext:[0,"nzStringTemplateOutletContext"],nzStringTemplateOutlet:[1,"nzStringTemplateOutlet"]},null),r.Ib(3,{$implicit:0}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,r=t(e,3,0,n.validateControl);t(e,2,0,r,n.nzSuccessTip)},null)}function bi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzWarningTip)})}function yi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,bi)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutletContext:[0,"nzStringTemplateOutletContext"],nzStringTemplateOutlet:[1,"nzStringTemplateOutlet"]},null),r.Ib(3,{$implicit:0}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,r=t(e,3,0,n.validateControl);t(e,2,0,r,n.nzWarningTip)},null)}function vi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzErrorTip)})}function _i(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,vi)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutletContext:[0,"nzStringTemplateOutletContext"],nzStringTemplateOutlet:[1,"nzStringTemplateOutlet"]},null),r.Ib(3,{$implicit:0}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,r=t(e,3,0,n.validateControl);t(e,2,0,r,n.nzErrorTip)},null)}function wi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzValidatingTip)})}function xi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,wi)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutletContext:[0,"nzStringTemplateOutletContext"],nzStringTemplateOutlet:[1,"nzStringTemplateOutlet"]},null),r.Ib(3,{$implicit:0}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,r=t(e,3,0,n.validateControl);t(e,2,0,r,n.nzValidatingTip)},null)}function Ci(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,9,"div",[["class","ant-form-explain"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,8,"div",[],[[24,"@helpMotion",0]],null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,mi)),r.sb(3,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,yi)),r.sb(5,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,_i)),r.sb(7,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,xi)),r.sb(9,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,3,0,n.showSuccessTip),t(e,5,0,n.showWarningTip),t(e,7,0,n.showErrorTip),t(e,9,0,n.showValidatingTip)},function(t,e){t(e,1,0,void 0)})}function Si(t){return r.Pb(0,[r.Eb(null,1),(t()(),r.ib(0,null,null,0))],null,null)}function Oi(t){return r.Pb(0,[r.Eb(null,2),(t()(),r.ib(0,null,null,0))],null,null)}function ki(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzExtra)})}function Ei(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-form-extra"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ki)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzExtra)},null)}function Ti(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,15,"div",[["class","ant-form-item-control"]],null,null,null,null,null)),r.Kb(512,null,R.D,R.E,[r.r,r.s,r.k,r.D]),r.sb(2,278528,null,0,R.j,[R.D],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(t()(),r.tb(3,0,null,null,4,"span",[["class","ant-form-item-children"]],null,null,null,null,null)),r.Eb(null,0),(t()(),r.tb(5,0,null,null,2,"span",[["class","ant-form-item-children-icon"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,fi)),r.sb(7,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Ci)),r.sb(9,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Si)),r.sb(11,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Oi)),r.sb(13,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Ei)),r.sb(15,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,"ant-form-item-control",n.controlClassMap),t(e,7,0,n.nzHasFeedback&&n.iconType),t(e,9,0,n.showSuccessTip||n.showWarningTip||n.showErrorTip||n.showValidatingTip),t(e,11,0,!n.hasTips),t(e,13,0,!n.nzExtra),t(e,15,0,n.nzExtra)},null)}var zi=r.rb({encapsulation:2,styles:["\n      nz-form-item {\n        display: block;\n      }\n    "],data:{}});function Pi(t){return r.Pb(2,[r.Eb(null,0)],null,null)}var Ii=r.rb({encapsulation:2,styles:[],data:{}});function Mi(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,1,"label",[],[[1,"for",0],[2,"ant-form-item-no-colon",null],[2,"ant-form-item-required",null]],null,null,null,null)),r.Eb(null,0)],null,function(t,e){var n=e.component;t(e,0,0,n.nzFor,"default"===n.noColon?n.defaultNoColon:n.nzNoColon,n.nzRequired)})}var Di=n("9iie"),Ai=n("CYS+"),Ni=n("5GAg");class Ri{constructor(t){this.fb=t,this.visible=!1,this.onChangeModalType=new r.m,this.onLogin=new r.m}ngOnInit(){}ngOnChanges(t){const e=t.wyRememberLogin,n=t.visible;if(e){let t="",n="",r=!1;if(e.currentValue){const i=h(e.currentValue,"decode");t=i.phone,n=i.password,r=i.remember}this.setModel({phone:t,password:n,remember:r})}n&&!n.firstChange&&this.formModel.markAllAsTouched()}setModel({phone:t,password:e,remember:n}){this.formModel=this.fb.group({phone:[t,[Z.r.required,Z.r.pattern(/^1\d{10}$/)]],password:[e,[Z.r.required,Z.r.minLength(6)]],remember:[n]})}onSubmit(){const t=this.formModel;t.valid&&this.onLogin.emit(t.value)}}var Fi=r.rb({encapsulation:0,styles:[[".m-footer[_ngcontent-%COMP%]{padding:0 19px;height:48px;border-top:1px solid #c6c6c6;border-radius:0 0 4px 4px;line-height:48px;background-color:#f7f7f7}.m-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}.m-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:first-child{float:left}.m-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{float:right}"]],data:{}});function $i(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,67,"div",[["class","login-phone modal-content"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,66,"div",[["class","modal-wrap"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,65,"form",[["class","login-form"],["novalidate",""],["nz-form",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,s=t.component;return"submit"===e&&(i=!1!==r.Fb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Fb(t,4).onReset()&&i),"ngSubmit"===e&&(i=!1!==s.onSubmit()&&i),i},null,null)),r.sb(3,16384,null,0,Z.v,[],null,null),r.sb(4,540672,null,0,Z.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Kb(2048,null,Z.c,null,[Z.j]),r.sb(6,16384,null,0,Z.o,[[4,Z.c]],null,null),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(8,1785856,null,1,hi.b,[r.k,r.D,Y.y],null,null),r.Lb(603979776,1,{nzFormLabelComponent:1}),(t()(),r.tb(10,0,null,null,17,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(12,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,2,{listOfNzFormExplainComponent:1}),(t()(),r.tb(14,0,null,0,13,"nz-form-control",[["nzErrorTip","\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"],["nzHasFeedback",""]],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(16,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],{nzErrorTip:[0,"nzErrorTip"],nzHasFeedback:[1,"nzHasFeedback"]},null),r.Lb(603979776,3,{defaultValidateControl:0}),(t()(),r.tb(18,0,null,0,9,"nz-input-group",[["nzPrefixIcon","mobile"]],[[2,"ant-input-group-compact",null],[2,"ant-input-search-enter-button",null],[2,"ant-input-search",null],[2,"ant-input-search-sm",null],[2,"ant-input-affix-wrapper",null],[2,"ant-input-group-wrapper",null],[2,"ant-input-group",null],[2,"ant-input-group-lg",null],[2,"ant-input-group-wrapper-lg",null],[2,"ant-input-affix-wrapper-lg",null],[2,"ant-input-search-lg",null],[2,"ant-input-group-sm",null],[2,"ant-input-affix-wrapper-sm",null],[2,"ant-input-group-wrapper-sm",null]],null,null,he,Nt)),r.sb(19,1097728,null,1,At.b,[],{nzPrefixIcon:[0,"nzPrefixIcon"]},null),r.Lb(603979776,4,{listOfNzInputDirective:1}),(t()(),r.tb(21,0,null,0,6,"input",[["formControlName","phone"],["nz-input",""],["placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7"],["type","tel"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Fb(t,22)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,22).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,22)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,22)._compositionEnd(n.target.value)&&i),i},null,null)),r.sb(22,16384,null,0,Z.d,[r.D,r.k,[2,Z.a]],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Z.d]),r.sb(24,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[3,4]],Z.m,null,[Z.h]),r.sb(26,16384,null,0,Z.n,[[4,Z.m]],null,null),r.sb(27,16384,[[4,4]],0,At.a,[r.D,r.k],null,null),(t()(),r.tb(28,0,null,null,17,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(30,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,5,{listOfNzFormExplainComponent:1}),(t()(),r.tb(32,0,null,0,13,"nz-form-control",[["nzErrorTip","\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801"],["nzHasFeedback",""]],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(34,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],{nzErrorTip:[0,"nzErrorTip"],nzHasFeedback:[1,"nzHasFeedback"]},null),r.Lb(603979776,6,{defaultValidateControl:0}),(t()(),r.tb(36,0,null,0,9,"nz-input-group",[["nzPrefixIcon","lock"]],[[2,"ant-input-group-compact",null],[2,"ant-input-search-enter-button",null],[2,"ant-input-search",null],[2,"ant-input-search-sm",null],[2,"ant-input-affix-wrapper",null],[2,"ant-input-group-wrapper",null],[2,"ant-input-group",null],[2,"ant-input-group-lg",null],[2,"ant-input-group-wrapper-lg",null],[2,"ant-input-affix-wrapper-lg",null],[2,"ant-input-search-lg",null],[2,"ant-input-group-sm",null],[2,"ant-input-affix-wrapper-sm",null],[2,"ant-input-group-wrapper-sm",null]],null,null,he,Nt)),r.sb(37,1097728,null,1,At.b,[],{nzPrefixIcon:[0,"nzPrefixIcon"]},null),r.Lb(603979776,7,{listOfNzInputDirective:1}),(t()(),r.tb(39,0,null,0,6,"input",[["formControlName","password"],["nz-input",""],["placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Fb(t,40)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,40).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,40)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,40)._compositionEnd(n.target.value)&&i),i},null,null)),r.sb(40,16384,null,0,Z.d,[r.D,r.k,[2,Z.a]],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Z.d]),r.sb(42,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[6,4]],Z.m,null,[Z.h]),r.sb(44,16384,null,0,Z.n,[[4,Z.m]],null,null),r.sb(45,16384,[[7,4]],0,At.a,[r.D,r.k],null,null),(t()(),r.tb(46,0,null,null,21,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(48,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,8,{listOfNzFormExplainComponent:1}),(t()(),r.tb(50,0,null,0,17,"nz-form-control",[],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(52,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],null,null),r.Lb(603979776,9,{defaultValidateControl:0}),(t()(),r.tb(54,0,null,0,8,"div",[["class","tools"]],null,null,null,null,null)),(t()(),r.tb(55,0,null,null,7,"label",[["class","remember"],["formControlName","remember"],["nz-checkbox",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,56).hostClick(n)&&i),i},Di.b,Di.a)),r.sb(56,4964352,null,0,Ai.a,[r.k,r.D,[2,Ai.d],r.h,Ni.a],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Ai.a]),r.sb(58,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[9,4]],Z.m,null,[Z.h]),r.sb(60,16384,null,0,Z.n,[[4,Z.m]],null,null),(t()(),r.tb(61,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u8bb0\u4f4f\u5bc6\u7801"])),(t()(),r.tb(63,0,null,0,4,"button",[["class","login-form-button"],["nz-button",""],["nzBlock",""],["nzType","primary"]],[[8,"disabled",0],[1,"nz-wave",0]],null,null,Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(65,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzBlock:[0,"nzBlock"],nzType:[1,"nzType"]},null),r.Lb(603979776,10,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u767b\u9646"])),(t()(),r.tb(68,0,null,null,4,"div",[["class","m-footer clearfix"]],null,null,null,null,null)),(t()(),r.tb(69,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeModalType.emit("defult")&&r),r},null,null)),(t()(),r.Nb(-1,null,["< \u5176\u5b83\u767b\u9646\u65b9\u5f0f"])),(t()(),r.tb(71,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeModalType.emit("register")&&r),r},null,null)),(t()(),r.Nb(-1,null,["\u6ca1\u6709\u8d26\u53f7\uff1f\u514d\u8d39\u6ce8\u518c"]))],function(t,e){t(e,4,0,e.component.formModel),t(e,8,0),t(e,12,0),t(e,16,0,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7",""),t(e,19,0,"mobile"),t(e,24,0,"phone"),t(e,30,0),t(e,34,0,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5bc6\u7801",""),t(e,37,0,"lock"),t(e,42,0,"password"),t(e,48,0),t(e,52,0),t(e,56,0),t(e,58,0,"remember"),t(e,65,0,"","primary")},function(t,e){var n=e.component;t(e,2,0,r.Fb(e,6).ngClassUntouched,r.Fb(e,6).ngClassTouched,r.Fb(e,6).ngClassPristine,r.Fb(e,6).ngClassDirty,r.Fb(e,6).ngClassValid,r.Fb(e,6).ngClassInvalid,r.Fb(e,6).ngClassPending),t(e,10,0,r.Fb(e,12).withHelpClass),t(e,18,1,[r.Fb(e,19).nzCompact,r.Fb(e,19).nzSearch,r.Fb(e,19).nzSearch,r.Fb(e,19).isSmallSearch,r.Fb(e,19).isAffixWrapper,r.Fb(e,19).isAddOn,r.Fb(e,19).isGroup,r.Fb(e,19).isLargeGroup,r.Fb(e,19).isLargeGroupWrapper,r.Fb(e,19).isLargeAffix,r.Fb(e,19).isLargeSearch,r.Fb(e,19).isSmallGroup,r.Fb(e,19).isSmallAffix,r.Fb(e,19).isSmallGroupWrapper]),t(e,21,0,r.Fb(e,26).ngClassUntouched,r.Fb(e,26).ngClassTouched,r.Fb(e,26).ngClassPristine,r.Fb(e,26).ngClassDirty,r.Fb(e,26).ngClassValid,r.Fb(e,26).ngClassInvalid,r.Fb(e,26).ngClassPending,r.Fb(e,27).disabled,"large"===r.Fb(e,27).nzSize,"small"===r.Fb(e,27).nzSize),t(e,28,0,r.Fb(e,30).withHelpClass),t(e,36,1,[r.Fb(e,37).nzCompact,r.Fb(e,37).nzSearch,r.Fb(e,37).nzSearch,r.Fb(e,37).isSmallSearch,r.Fb(e,37).isAffixWrapper,r.Fb(e,37).isAddOn,r.Fb(e,37).isGroup,r.Fb(e,37).isLargeGroup,r.Fb(e,37).isLargeGroupWrapper,r.Fb(e,37).isLargeAffix,r.Fb(e,37).isLargeSearch,r.Fb(e,37).isSmallGroup,r.Fb(e,37).isSmallAffix,r.Fb(e,37).isSmallGroupWrapper]),t(e,39,0,r.Fb(e,44).ngClassUntouched,r.Fb(e,44).ngClassTouched,r.Fb(e,44).ngClassPristine,r.Fb(e,44).ngClassDirty,r.Fb(e,44).ngClassValid,r.Fb(e,44).ngClassInvalid,r.Fb(e,44).ngClassPending,r.Fb(e,45).disabled,"large"===r.Fb(e,45).nzSize,"small"===r.Fb(e,45).nzSize),t(e,46,0,r.Fb(e,48).withHelpClass),t(e,55,0,r.Fb(e,60).ngClassUntouched,r.Fb(e,60).ngClassTouched,r.Fb(e,60).ngClassPristine,r.Fb(e,60).ngClassDirty,r.Fb(e,60).ngClassValid,r.Fb(e,60).ngClassInvalid,r.Fb(e,60).ngClassPending),t(e,63,0,!n.formModel.valid,r.Fb(e,65).nzWave)})}var Li=n("zTFG"),ji=n("Rgb0"),Bi=n("mW00"),Vi=n("t4eL"),Wi=n("cUpR"),Ui=r.rb({encapsulation:2,styles:[],data:{}});function Hi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,2,"nz-avatar",[],null,null,null,xt,yt)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(3,573440,null,0,bt.a,[r.k,r.h,Y.y,r.D,F.a],{nzSrc:[0,"nzSrc"]},null)],function(t,e){t(e,3,0,e.component.avatarStr)},null)}function Gi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-item-meta-avatar"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Hi)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null)],function(t,e){var n=e.component;t(e,2,0,n.avatarStr,n.avatarTpl)},null)}function qi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzTitle)})}function Ki(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"h4",[["class","ant-list-item-meta-title"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,qi)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzTitle)},null)}function Yi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzDescription)})}function Xi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-item-meta-description"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Yi)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzDescription)},null)}function Zi(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["class","ant-list-item-meta-content"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ki)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Xi)),r.sb(4,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzTitle),t(e,4,0,n.nzDescription)},null)}function Qi(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,Gi)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Zi)),r.sb(3,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.avatarStr||n.avatarTpl),t(e,3,0,n.nzTitle||n.nzDescription)},null)}var Ji=r.rb({encapsulation:2,styles:[],data:{}});function ts(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function es(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"em",[["class","ant-list-item-action-split"]],null,null,null,null,null))],null,null)}function ns(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"li",[],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ts)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,es)),r.sb(4,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,2,0,e.context.$implicit),t(e,4,0,!e.context.last)},null)}function rs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"ul",[["class","ant-list-item-action"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ns)),r.sb(2,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.nzActions)},null)}function is(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,rs)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,(null==n.nzActions?null:n.nzActions.length)>0)},null)}function ss(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzContent)})}function os(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ss)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,e.component.nzContent)},null)}function ls(t){return r.Pb(0,[r.Eb(null,0),(t()(),r.ib(16777216,null,null,1,null,os)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,2,0,e.component.nzContent)},null)}function as(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function us(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function cs(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function hs(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,as)),r.sb(1,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,us)),r.sb(3,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,cs)),r.sb(5,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,1,0,r.Fb(e.parent,1)),t(e,3,0,n.nzExtra),t(e,5,0,r.Fb(e.parent,0))},null)}function ds(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function ps(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function fs(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function gs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,8,null,null,null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"div",[["class","ant-list-item-main"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,ds)),r.sb(3,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,ps)),r.sb(5,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.tb(6,0,null,null,2,"div",[["class","ant-list-item-extra"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,fs)),r.sb(8,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){var n=e.component;t(e,3,0,r.Fb(e.parent,1)),t(e,5,0,r.Fb(e.parent,0)),t(e,8,0,n.nzExtra)},null)}function ms(t){return r.Pb(2,[(t()(),r.ib(0,[["actionsTpl",2]],null,0,null,is)),(t()(),r.ib(0,[["contentTpl",2]],null,0,null,ls)),(t()(),r.ib(0,[["simpleTpl",2]],null,0,null,hs)),(t()(),r.ib(16777216,null,null,1,null,gs)),r.sb(4,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null)],function(t,e){t(e,4,0,e.component.isVerticalAndExtra,r.Fb(e,2))},null)}var bs=r.rb({encapsulation:2,styles:["\n      nz-list,\n      nz-list nz-spin {\n        display: block;\n      }\n    "],data:{}});function ys(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function vs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,2,null,ys)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(3,{$implicit:0,index:1}),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component,r=t(e,3,0,e.context.$implicit,e.context.index);t(e,2,0,r,n.nzRenderItem)},null)}function _s(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-items"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,vs)),r.sb(2,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.nzDataSource)},null)}function ws(t){return r.Pb(0,[(t()(),r.ib(16777216,null,null,1,null,_s)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){t(e,1,0,e.component.nzDataSource.length>0)},null)}function xs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzHeader)})}function Cs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-header"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,xs)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzHeader)},null)}function Ss(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,0,"div",[],[[4,"min-height","px"]],null,null,null,null))],null,function(t,e){t(e,0,0,53)})}function Os(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function ks(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"div",[["nz-col",""]],null,null,null,null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(2,4931584,null,0,di.a,[Y.y,r.k,[2,di.c],r.D],{nzSpan:[0,"nzSpan"],nzXs:[1,"nzXs"],nzSm:[2,"nzSm"],nzMd:[3,"nzMd"],nzLg:[4,"nzLg"],nzXl:[5,"nzXl"],nzXXl:[6,"nzXXl"]},null),(t()(),r.ib(16777216,null,null,2,null,Os)),r.sb(4,540672,null,0,R.s,[r.P],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),r.Ib(5,{$implicit:0,index:1})],function(t,e){var n=e.component;t(e,2,0,n.nzGrid.span,n.nzGrid.xs,n.nzGrid.sm,n.nzGrid.md,n.nzGrid.lg,n.nzGrid.xl,n.nzGrid.xxl);var r=t(e,5,0,e.context.$implicit,e.context.index);t(e,4,0,r,n.nzRenderItem)},null)}function Es(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,4,"div",[["nz-row",""]],null,null,null,null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(2,4931584,null,0,di.c,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n],{nzGutter:[0,"nzGutter"]},null),(t()(),r.ib(16777216,null,null,1,null,ks)),r.sb(4,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzGrid.gutter),t(e,4,0,n.nzDataSource)},null)}function Ts(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-empty-text"]],null,null,null,null,null)),(t()(),r.tb(1,16777216,null,null,1,"nz-embed-empty",[],null,null,null,Vi.b,Vi.a)),r.sb(2,770048,null,0,Bi.a,[Bi.d,Wi.b,r.P,r.h,r.q],{nzComponentName:[0,"nzComponentName"],specificContent:[1,"specificContent"]},null)],function(t,e){t(e,2,0,"list",e.component.nzNoResult)},null)}function zs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,null,null,null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ss)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Es)),r.sb(4,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(16777216,null,null,1,null,Ts)),r.sb(6,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(0,null,null,0))],function(t,e){var n=e.component;t(e,2,0,n.nzLoading&&0===n.nzDataSource.length),t(e,4,0,n.nzGrid,r.Fb(e.parent,0)),t(e,6,0,!n.nzLoading&&0===n.nzDataSource.length)},null)}function Ps(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,null,null,null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.component.nzFooter)})}function Is(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-footer"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ps)),r.sb(2,540672,null,0,Y.u,[r.P,r.L],{nzStringTemplateOutlet:[0,"nzStringTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzFooter)},null)}function Ms(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function Ds(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function As(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","ant-list-pagination"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Ds)),r.sb(2,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){t(e,2,0,e.component.nzPagination)},null)}function Ns(t){return r.Pb(2,[(t()(),r.ib(0,[["itemsTpl",2]],null,0,null,ws)),(t()(),r.ib(16777216,null,null,1,null,Cs)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(3,0,null,null,4,"nz-spin",[],[[2,"ant-spin-nested-loading",null]],null,null,Qr.b,Qr.a)),r.sb(4,770048,null,0,Jr.a,[r.h],{nzSpinning:[0,"nzSpinning"]},null),(t()(),r.ib(16777216,null,0,1,null,zs)),r.sb(6,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),r.Eb(0,0),(t()(),r.ib(16777216,null,null,1,null,Is)),r.sb(9,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.ib(16777216,null,null,1,null,Ms)),r.sb(11,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(t()(),r.ib(16777216,null,null,1,null,As)),r.sb(13,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.nzHeader),t(e,4,0,n.nzLoading),t(e,6,0,n.nzDataSource),t(e,9,0,n.nzFooter),t(e,11,0,n.nzLoadMore),t(e,13,0,n.nzPagination)},function(t,e){t(e,3,0,!r.Fb(e,4).nzSimple)})}class Rs{constructor(t){this.fb=t,this.onLikeSong=new r.m,this.onCreateSheet=new r.m,this.creating=!1,this.formModel=this.fb.group({sheetName:["",[Z.r.required]]})}ngOnInit(){}ngOnChanges(t){t.visible&&(this.visible||(this.formModel.get("sheetName").reset(),this.creating=!1))}onLike(t){this.onLikeSong.emit({pid:t,tracks:this.likeId})}onSubmit(){this.onCreateSheet.emit(this.formModel.get("sheetName").value)}}var Fs=r.rb({encapsulation:0,styles:[[".like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]{height:300px;overflow-y:auto}.like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:10px 0 10px 30px;border-bottom:1px solid #e8e8e8;background-color:#e6e6e6;cursor:pointer}.like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:40px}.like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:super;margin-left:10px}.like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{padding:10px 0 10px 30px;cursor:pointer}.like[_ngcontent-%COMP%]   .sheet-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#f2f2f2}.like[_ngcontent-%COMP%]   .create-sheet[_ngcontent-%COMP%]{padding:40px 0 30px}.like[_ngcontent-%COMP%]   .create-sheet[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{text-align:center}.like[_ngcontent-%COMP%]   .create-sheet[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{margin-right:8px}"]],data:{}});function $s(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.$implicit.name)})}function Ls(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,5,"nz-list-item",[["class","list-item"]],[[2,"ant-list-item-no-flex",null]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onLike(t.context.$implicit.id.toString())&&r),r},ms,Ji)),r.sb(1,4374528,null,1,Li.b,[r.k,r.D,Li.a,r.h],null,null),r.Lb(603979776,1,{metas:1}),(t()(),r.tb(3,0,null,0,2,"nz-list-item-meta",[],null,null,null,Qi,Ui)),r.sb(4,49152,[[1,4]],0,Li.c,[r.k,r.D],{nzAvatar:[0,"nzAvatar"],nzTitle:[1,"nzTitle"],nzDescription:[2,"nzDescription"]},null),(t()(),r.ib(0,[["nzTitle",2]],null,0,null,$s))],function(t,e){t(e,4,0,e.context.$implicit.coverImgUrl,r.Fb(e,5),e.context.$implicit.trackCount)},function(t,e){t(e,0,0,r.Fb(e,1).nzNoFlex)})}function js(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,9,"div",[["class","sheet-list"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"div",[["class","header"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=0!=(t.component.creating=!0)&&r),r},null,null)),(t()(),r.tb(2,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","folder-add"]],null,null,null,null,null)),r.sb(3,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.tb(4,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u65b0\u5efa\u6b4c\u5355"])),(t()(),r.tb(6,0,null,null,3,"nz-list",[],null,null,null,Ns,bs)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(8,770048,null,0,Li.a,[r.k,Y.y],{nzDataSource:[0,"nzDataSource"],nzRenderItem:[1,"nzRenderItem"]},null),(t()(),r.ib(0,[["itemTpl",2]],0,0,null,Ls))],function(t,e){var n=e.component;t(e,3,0,"folder-add","outline"),t(e,8,0,n.mySheets,r.Fb(e,9))},null)}function Bs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,42,"div",[["class","create-sheet"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,41,"form",[["novalidate",""],["nz-form",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,s=t.component;return"submit"===e&&(i=!1!==r.Fb(t,3).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Fb(t,3).onReset()&&i),"ngSubmit"===e&&(i=!1!==s.onSubmit()&&i),i},null,null)),r.sb(2,16384,null,0,Z.v,[],null,null),r.sb(3,540672,null,0,Z.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Kb(2048,null,Z.c,null,[Z.j]),r.sb(5,16384,null,0,Z.o,[[4,Z.c]],null,null),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(7,1785856,null,1,hi.b,[r.k,r.D,Y.y],null,null),r.Lb(603979776,2,{nzFormLabelComponent:1}),(t()(),r.tb(9,0,null,null,18,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(11,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,3,{listOfNzFormExplainComponent:1}),(t()(),r.tb(13,0,null,0,3,"nz-form-label",[["nzSpan","5"]],null,null,null,Mi,Ii)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(15,4964352,[[2,4]],0,hi.f,[Y.y,r.k,[2,hi.e],[8,null],r.D,r.h],{nzSpan:[0,"nzSpan"]},null),(t()(),r.Nb(-1,0,["\u6b4c\u5355\u540d\uff1a"])),(t()(),r.tb(17,0,null,0,10,"nz-form-control",[["nzErrorTip","\u8bf7\u586b\u5199\u6b4c\u5355\u540d\u79f0"],["nzHasFeedback",""],["nzSpan","12"]],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(19,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],{nzSpan:[0,"nzSpan"],nzErrorTip:[1,"nzErrorTip"],nzHasFeedback:[2,"nzHasFeedback"]},null),r.Lb(603979776,4,{defaultValidateControl:0}),(t()(),r.tb(21,0,null,0,6,"input",[["formControlName","sheetName"],["nz-input",""],["placeholder","\u6b4c\u5355\u540d"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Fb(t,22)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,22).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,22)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,22)._compositionEnd(n.target.value)&&i),i},null,null)),r.sb(22,16384,null,0,Z.d,[r.D,r.k,[2,Z.a]],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Z.d]),r.sb(24,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[4,4]],Z.m,null,[Z.h]),r.sb(26,16384,null,0,Z.n,[[4,Z.m]],null,null),r.sb(27,16384,null,0,At.a,[r.D,r.k],null,null),(t()(),r.tb(28,0,null,null,14,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(30,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,5,{listOfNzFormExplainComponent:1}),(t()(),r.tb(32,0,null,0,10,"div",[["class","btns"]],null,null,null,null,null)),(t()(),r.tb(33,0,null,null,4,"button",[["class","btn-back"],["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=0!=(t.component.creating=!1)&&r),r},Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(35,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],null,null),r.Lb(603979776,6,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u8fd4\u56de"])),(t()(),r.tb(38,0,null,null,4,"button",[["nz-button",""],["nzType","primary"]],[[8,"disabled",0],[1,"nz-wave",0]],null,null,Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(40,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,7,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u65b0\u5efa"]))],function(t,e){t(e,3,0,e.component.formModel),t(e,7,0),t(e,11,0),t(e,15,0,"5"),t(e,19,0,"12","\u8bf7\u586b\u5199\u6b4c\u5355\u540d\u79f0",""),t(e,24,0,"sheetName"),t(e,30,0),t(e,35,0),t(e,40,0,"primary")},function(t,e){var n=e.component;t(e,1,0,r.Fb(e,5).ngClassUntouched,r.Fb(e,5).ngClassTouched,r.Fb(e,5).ngClassPristine,r.Fb(e,5).ngClassDirty,r.Fb(e,5).ngClassValid,r.Fb(e,5).ngClassInvalid,r.Fb(e,5).ngClassPending),t(e,9,0,r.Fb(e,11).withHelpClass),t(e,21,0,r.Fb(e,26).ngClassUntouched,r.Fb(e,26).ngClassTouched,r.Fb(e,26).ngClassPristine,r.Fb(e,26).ngClassDirty,r.Fb(e,26).ngClassValid,r.Fb(e,26).ngClassInvalid,r.Fb(e,26).ngClassPending,r.Fb(e,27).disabled,"large"===r.Fb(e,27).nzSize,"small"===r.Fb(e,27).nzSize),t(e,28,0,r.Fb(e,30).withHelpClass),t(e,33,0,r.Fb(e,35).nzWave),t(e,38,0,!n.formModel.valid,r.Fb(e,40).nzWave)})}function Vs(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,3,"div",[["class","like"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,js)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["createSheet",2]],null,0,null,Bs))],function(t,e){t(e,2,0,!e.component.creating,r.Fb(e,3))},null)}const Ws=140;class Us{constructor(){this.visible=!1,this.onCancel=new r.m,this.onShare=new r.m,this.surplusMsgCount=Ws,this.formModel=new Z.i({msg:new Z.f("",Z.r.maxLength(Ws))}),this.formModel.get("msg").valueChanges.subscribe(t=>{this.surplusMsgCount=Ws-t.length})}ngOnInit(){}ngOnChanges(t){t.visible&&!t.visible.firstChange&&this.formModel.get("msg").markAsTouched()}onSubmit(){this.formModel.valid&&this.onShare.emit({id:this.shareInfo.id,msg:this.formModel.get("msg").value,type:this.shareInfo.type})}}var Hs=r.rb({encapsulation:0,styles:[[".share[_ngcontent-%COMP%]{padding:30px 20px}.share[_ngcontent-%COMP%]   .u-txtwrap[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:2px;padding-right:14px}.share[_ngcontent-%COMP%]   .u-txtwrap[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border:none;resize:none}.share[_ngcontent-%COMP%]   .u-txtwrap[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{height:45px;line-height:45px;margin:0 -14px 0 0;padding:0 10px}.share[_ngcontent-%COMP%]   .u-txtwrap[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{width:100%;font-size:14px;border-top:1px solid #e5e5e5}.share[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{margin:15px 0;text-align:right}.share[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   .txt-count[_ngcontent-%COMP%]{float:left;color:#999}.share[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   .txt-count.exceed[_ngcontent-%COMP%]{color:#f5222d}.share[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{float:right}.share[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-left:8px}"]],data:{}});function Gs(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,42,"div",[["class","share"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,27,"div",[["class","u-txtwrap"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,22,"form",[["novalidate",""],["nz-form",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0;return"submit"===e&&(i=!1!==r.Fb(t,4).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Fb(t,4).onReset()&&i),i},null,null)),r.sb(3,16384,null,0,Z.v,[],null,null),r.sb(4,540672,null,0,Z.j,[[8,null],[8,null]],{form:[0,"form"]},null),r.Kb(2048,null,Z.c,null,[Z.j]),r.sb(6,16384,null,0,Z.o,[[4,Z.c]],null,null),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(8,1785856,null,1,hi.b,[r.k,r.D,Y.y],null,null),r.Lb(603979776,1,{nzFormLabelComponent:1}),(t()(),r.tb(10,0,null,null,14,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(12,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,2,{listOfNzFormExplainComponent:1}),(t()(),r.tb(14,0,null,0,10,"nz-form-control",[["nzErrorTip","\u4e0d\u80fd\u8d85\u8fc7140\u4e2a\u5b57"]],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(16,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],{nzErrorTip:[0,"nzErrorTip"]},null),r.Lb(603979776,3,{defaultValidateControl:0}),(t()(),r.tb(18,0,null,0,6,"textarea",[["formControlName","msg"],["nz-input",""],["rows","6"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Fb(t,19)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,19).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,19)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,19)._compositionEnd(n.target.value)&&i),i},null,null)),r.sb(19,16384,null,0,Z.d,[r.D,r.k,[2,Z.a]],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Z.d]),r.sb(21,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[3,4]],Z.m,null,[Z.h]),r.sb(23,16384,null,0,Z.n,[[4,Z.m]],null,null),r.sb(24,16384,null,0,At.a,[r.D,r.k],null,null),(t()(),r.tb(25,0,null,null,3,"div",[["class","info"]],null,null,null,null,null)),(t()(),r.tb(26,0,null,null,2,"div",[["class","text"]],null,null,null,null,null)),(t()(),r.tb(27,0,null,null,1,"p",[["class","f-thide ellipsis"]],null,null,null,null,null)),(t()(),r.Nb(28,null,["",""])),(t()(),r.tb(29,0,null,null,13,"div",[["class","tools clearfix"]],null,null,null,null,null)),(t()(),r.tb(30,0,null,null,1,"span",[["class","txt-count"]],[[2,"exceed",null]],null,null,null,null)),(t()(),r.Nb(31,null,["",""])),(t()(),r.tb(32,0,null,null,10,"div",[["class","btns"]],null,null,null,null,null)),(t()(),r.tb(33,0,null,null,4,"button",[["nz-button",""]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onCancel.emit()&&r),r},Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(35,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],null,null),r.Lb(603979776,4,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u53d6\u6d88"])),(t()(),r.tb(38,0,null,null,4,"button",[["nz-button",""],["nzType","primary"]],[[8,"disabled",0],[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onSubmit()&&r),r},Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(40,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzType:[0,"nzType"]},null),r.Lb(603979776,5,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u5206\u4eab"]))],function(t,e){t(e,4,0,e.component.formModel),t(e,8,0),t(e,12,0),t(e,16,0,"\u4e0d\u80fd\u8d85\u8fc7140\u4e2a\u5b57"),t(e,21,0,"msg"),t(e,35,0),t(e,40,0,"primary")},function(t,e){var n=e.component;t(e,2,0,r.Fb(e,6).ngClassUntouched,r.Fb(e,6).ngClassTouched,r.Fb(e,6).ngClassPristine,r.Fb(e,6).ngClassDirty,r.Fb(e,6).ngClassValid,r.Fb(e,6).ngClassInvalid,r.Fb(e,6).ngClassPending),t(e,10,0,r.Fb(e,12).withHelpClass),t(e,18,0,r.Fb(e,23).ngClassUntouched,r.Fb(e,23).ngClassTouched,r.Fb(e,23).ngClassPristine,r.Fb(e,23).ngClassDirty,r.Fb(e,23).ngClassValid,r.Fb(e,23).ngClassInvalid,r.Fb(e,23).ngClassPending,r.Fb(e,24).disabled,"large"===r.Fb(e,24).nzSize,"small"===r.Fb(e,24).nzSize),t(e,28,0,null==n.shareInfo?null:n.shareInfo.txt),t(e,30,0,n.surplusMsgCount<0),t(e,31,0,n.surplusMsgCount),t(e,33,0,r.Fb(e,35).nzWave),t(e,38,0,!n.formModel.valid,r.Fb(e,40).nzWave)})}var qs=n("XNiG");const Ks=4;class Ys{constructor(t){this.cdr=t,this.inputArr=[],this.result=[],this.currentFocusIndex=0,this.destory$=new qs.a,this.inputArr=Array(Ks).fill("")}ngOnInit(){}ngAfterViewInit(){this.inputsEl=this.codeWrap.nativeElement.getElementsByClassName("item"),this.inputsEl[0].focus();for(let t=0;t<this.inputsEl.length;t++){const e=this.inputsEl[t];Object(de.a)(e,"keyup").pipe(Object(g.takeUntil)(this.destory$)).subscribe(t=>this.listenKeyUp(t)),Object(de.a)(e,"click").pipe(Object(g.takeUntil)(this.destory$)).subscribe(()=>this.currentFocusIndex=t)}}listenKeyUp(t){const e=t.target,n=e.value,r=t.keyCode===ei.b;/\D/.test(n)?(e.value="",this.result[this.currentFocusIndex]=""):n?(this.result[this.currentFocusIndex]=n,this.currentFocusIndex=(this.currentFocusIndex+1)%Ks,this.inputsEl[this.currentFocusIndex].focus()):r&&(this.result[this.currentFocusIndex]="",this.currentFocusIndex=Math.max(this.currentFocusIndex-1,0),this.inputsEl[this.currentFocusIndex].focus()),this.checkResult(this.result)}checkResult(t){const e=t.join("");this.setValue(e)}setValue(t){this.code=t,this.onValueChange(t),this.cdr.markForCheck()}onValueChange(t){}onTouched(){}writeValue(t){this.setValue(t)}registerOnChange(t){this.onValueChange=t}registerOnTouched(t){this.onTouched=t}ngOnDestroy(){this.destory$.next(),this.destory$.complete()}}var Xs=r.rb({encapsulation:0,styles:[[".code-wrap[_ngcontent-%COMP%]   .u-word[_ngcontent-%COMP%]{position:relative;width:70px;float:left;margin-right:5px}.code-wrap[_ngcontent-%COMP%]   .u-word[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin:0 13px;border:none;font-size:24px;height:19px;padding:5px 6px 6px;border-radius:2px;line-height:19px}.code-wrap[_ngcontent-%COMP%]   .u-word[_ngcontent-%COMP%]::before{content:'';position:absolute;bottom:0;width:100%;height:2px;background-color:rgba(0,0,0,.1)}.code-wrap[_ngcontent-%COMP%]   .u-word[_ngcontent-%COMP%]::after{content:'';position:absolute;bottom:0;width:0;height:2px;background-color:#b82712;transition:width .2s}.code-wrap[_ngcontent-%COMP%]   .u-word.focus[_ngcontent-%COMP%]::after{width:100%}"]],data:{}});function Zs(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"div",[["class","u-word"]],[[2,"focus",null]],null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"input",[["class","item"],["maxlength","1"]],null,null,null,null,null))],null,function(t,e){t(e,0,0,e.component.result[e.context.index])})}function Qs(t){return r.Pb(2,[r.Lb(402653184,1,{codeWrap:0}),(t()(),r.tb(1,0,[[1,0],["codeWrap",1]],null,2,"div",[["class","code-wrap clearfix"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Zs)),r.sb(3,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,3,0,e.component.inputArr)},null)}class Js{constructor(){this.phoneHideStr="",this.showRepeatBtn=!1,this.showErrorTip=!1,this.codePass=!1,this.onCheckCode=new r.m,this.onReatSendCode=new r.m,this.onCheckExist=new r.m,this.formModel=new Z.i({code:new Z.f("",[Z.r.required,Z.r.pattern(/\d{4}/)])}),this.formModel.get("code").statusChanges.subscribe(t=>{"VALID"===t&&this.onCheckCode.emit(this.formModel.value.code)})}set phone(t){const e=t.split("");e.splice(3,4,"****"),this.phoneHideStr=e.join("")}get phone(){return this.phoneHideStr}ngOnInit(){}ngOnChanges(t){t.timing&&(this.showRepeatBtn=this.timing<=0),t.codePass&&!t.codePass.firstChange&&(this.showErrorTip=!this.codePass)}onSubmit(){this.formModel.valid&&this.codePass&&this.onCheckExist.emit()}}var to=r.rb({encapsulation:0,styles:[[".check-code[_ngcontent-%COMP%]   .js-mobwrap[_ngcontent-%COMP%]{padding-bottom:20px}.check-code[_ngcontent-%COMP%]   .js-mobwrap[_ngcontent-%COMP%]   .s-fc3[_ngcontent-%COMP%]{color:#666}.check-code[_ngcontent-%COMP%]   .js-mobwrap[_ngcontent-%COMP%]   .s-fc3[_ngcontent-%COMP%]   .s-fc1[_ngcontent-%COMP%]{color:#333}.check-code[_ngcontent-%COMP%]   .js-mobwrap[_ngcontent-%COMP%]   .s-fc4[_ngcontent-%COMP%]{margin-top:5px;color:#999}.check-code[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]{margin-top:4px}.check-code[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{float:left;color:#f5222d}.check-code[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]   .txt[_ngcontent-%COMP%]{float:right;color:#0c73c2;padding-right:6px;line-height:18px}.check-code[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]   .txt.repeat[_ngcontent-%COMP%]{cursor:pointer}"]],data:{}});function eo(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"span",[["class","txt"]],null,null,null,null,null)),(t()(),r.Nb(1,null,["","s"]))],null,function(t,e){t(e,1,0,e.component.timing)})}function no(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"span",[["class","txt repeat"]],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onReatSendCode.emit()&&r),r},null,null)),(t()(),r.Nb(-1,null,["\u91cd\u65b0\u53d1\u9001"]))],null,null)}function ro(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,50,"div",[["class","check-code"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,7,"div",[["class","js-mobwrap"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,4,"p",[["class","s-fc3"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,[" \u4f60\u7684\u624b\u673a\u53f7\uff1a "])),(t()(),r.tb(4,0,null,null,2,"strong",[["class","s-fc1"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,1,"span",[["class","js-mob"]],null,null,null,null,null)),(t()(),r.Nb(6,null,["",""])),(t()(),r.tb(7,0,null,null,1,"p",[["class","s-fc4"]],null,null,null,null,null)),(t()(),r.Nb(-1,null,["\u4e3a\u4e86\u5b89\u5168\uff0c\u6211\u4eec\u4f1a\u7ed9\u60a8\u53d1\u9001\u77ed\u4fe1\u9a8c\u8bc1\u7801"])),(t()(),r.tb(9,0,null,null,41,"div",[["class","form"]],null,null,null,null,null)),(t()(),r.tb(10,0,null,null,40,"form",[["novalidate",""],["nz-form",""],["nzLayout","vertical"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,s=t.component;return"submit"===e&&(i=!1!==r.Fb(t,12).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Fb(t,12).onReset()&&i),"ngSubmit"===e&&(i=!1!==s.onSubmit()&&i),i},null,null)),r.sb(11,16384,null,0,Z.v,[],null,null),r.sb(12,540672,null,0,Z.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Kb(2048,null,Z.c,null,[Z.j]),r.sb(14,16384,null,0,Z.o,[[4,Z.c]],null,null),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(16,1785856,null,1,hi.b,[r.k,r.D,Y.y],{nzLayout:[0,"nzLayout"]},null),r.Lb(603979776,1,{nzFormLabelComponent:1}),(t()(),r.tb(18,0,null,null,19,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(20,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,2,{listOfNzFormExplainComponent:1}),(t()(),r.tb(22,0,null,0,15,"nz-form-control",[],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(24,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],null,null),r.Lb(603979776,3,{defaultValidateControl:0}),(t()(),r.tb(26,0,null,0,5,"app-wy-code",[["formControlName","code"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,Qs,Xs)),r.sb(27,4440064,null,0,Ys,[r.h],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Ys]),r.sb(29,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[3,4]],Z.m,null,[Z.h]),r.sb(31,16384,null,0,Z.n,[[4,Z.m]],null,null),(t()(),r.tb(32,0,null,0,5,"div",[["class","send clearfix"]],null,null,null,null,null)),(t()(),r.tb(33,0,null,null,1,"span",[["class","err"]],[[8,"hidden",0]],null,null,null,null)),(t()(),r.Nb(-1,null,["\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"])),(t()(),r.ib(16777216,null,null,1,null,eo)),r.sb(36,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["repeatBtn",2]],null,0,null,no)),(t()(),r.tb(38,0,null,null,12,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(40,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,4,{listOfNzFormExplainComponent:1}),(t()(),r.tb(42,0,null,0,8,"nz-form-control",[],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(44,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],null,null),r.Lb(603979776,5,{defaultValidateControl:0}),(t()(),r.tb(46,0,null,0,4,"button",[["nz-button",""],["nzBlock",""],["nzType","primary"]],[[1,"nz-wave",0]],null,null,Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(48,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzBlock:[0,"nzBlock"],nzType:[1,"nzType"]},null),r.Lb(603979776,6,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u4e0b\u4e00\u6b65"]))],function(t,e){var n=e.component;t(e,12,0,n.formModel),t(e,16,0,"vertical"),t(e,20,0),t(e,24,0),t(e,27,0),t(e,29,0,"code"),t(e,36,0,!n.showRepeatBtn,r.Fb(e,37)),t(e,40,0),t(e,44,0),t(e,48,0,"","primary")},function(t,e){var n=e.component;t(e,6,0,n.phone),t(e,10,0,r.Fb(e,14).ngClassUntouched,r.Fb(e,14).ngClassTouched,r.Fb(e,14).ngClassPristine,r.Fb(e,14).ngClassDirty,r.Fb(e,14).ngClassValid,r.Fb(e,14).ngClassInvalid,r.Fb(e,14).ngClassPending),t(e,18,0,r.Fb(e,20).withHelpClass),t(e,26,0,r.Fb(e,31).ngClassUntouched,r.Fb(e,31).ngClassTouched,r.Fb(e,31).ngClassPristine,r.Fb(e,31).ngClassDirty,r.Fb(e,31).ngClassValid,r.Fb(e,31).ngClassInvalid,r.Fb(e,31).ngClassPending),t(e,33,0,!n.showErrorTip),t(e,38,0,r.Fb(e,40).withHelpClass),t(e,46,0,r.Fb(e,48).nzWave)})}var io=function(t){return t[t["\u5b58\u5728"]=1]="\u5b58\u5728",t[t["\u4e0d\u5b58\u5728"]=-1]="\u4e0d\u5b58\u5728",t}({});class so{constructor(t,e,n,i){this.fb=t,this.memberServe=e,this.messageServe=n,this.cdr=i,this.visible=!1,this.onChangeModalType=new r.m,this.onRegister=new r.m,this.showCode=!1,this.codePass="",this.formModel=this.fb.group({phone:["",[Z.r.required,Z.r.pattern(/^1\d{10}$/)]],password:["",[Z.r.required,Z.r.minLength(6)]]})}ngOnInit(){}ngOnChanges(t){t.visible&&!t.visible.firstChange&&(this.formModel.markAllAsTouched(),this.visible||(this.showCode=!1))}onSubmit(){this.formModel.valid&&this.sendCode()}sendCode(){this.memberServe.sendCode(this.formModel.get("phone").value).subscribe(()=>{this.timing=60,this.showCode||(this.showCode=!0),this.cdr.markForCheck(),Object(f.a)(1e3).pipe(Object(g.take)(60)).subscribe(()=>{this.timing--,this.cdr.markForCheck()})},t=>this.messageServe.error(t.message))}onCheckCode(t){this.memberServe.checkCode(this.formModel.get("phone").value,Number(t)).subscribe(()=>this.codePass=!0,()=>this.codePass=!1,()=>this.cdr.markForCheck())}onCheckExist(){const t=this.formModel.get("phone").value;this.memberServe.checkExist(Number(t)).subscribe(e=>{"\u5b58\u5728"===io[e]?(this.messageServe.error("\u8d26\u53f7\u5df2\u5b58\u5728\uff0c\u53ef\u76f4\u63a5\u767b\u9646"),this.changeType(l.a.LoginByPhone)):this.onRegister.emit(t)})}changeType(t=l.a.Default){this.onChangeModalType.emit(t),this.showCode=!1,this.formModel.reset()}}var oo=n("XPT/"),lo=n("JXeA"),ao=r.rb({encapsulation:0,styles:[[".m-footer[_ngcontent-%COMP%]{padding:0 19px;height:48px;border-top:1px solid #c6c6c6;border-radius:0 0 4px 4px;line-height:48px;background-color:#f7f7f7}.m-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block}"]],data:{}});function uo(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,65,"div",[["class","modal-wrap"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,64,"form",[["novalidate",""],["nz-form",""],["nzLayout","vertical"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,s=t.component;return"submit"===e&&(i=!1!==r.Fb(t,3).onSubmit(n)&&i),"reset"===e&&(i=!1!==r.Fb(t,3).onReset()&&i),"ngSubmit"===e&&(i=!1!==s.onSubmit()&&i),i},null,null)),r.sb(2,16384,null,0,Z.v,[],null,null),r.sb(3,540672,null,0,Z.j,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r.Kb(2048,null,Z.c,null,[Z.j]),r.sb(5,16384,null,0,Z.o,[[4,Z.c]],null,null),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(7,1785856,null,1,hi.b,[r.k,r.D,Y.y],{nzLayout:[0,"nzLayout"]},null),r.Lb(603979776,1,{nzFormLabelComponent:1}),(t()(),r.tb(9,0,null,null,21,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(11,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,2,{listOfNzFormExplainComponent:1}),(t()(),r.tb(13,0,null,0,3,"nz-form-label",[],null,null,null,Mi,Ii)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(15,4964352,[[1,4]],0,hi.f,[Y.y,r.k,[2,hi.e],[8,null],r.D,r.h],null,null),(t()(),r.Nb(-1,0,["\u624b\u673a\u53f7"])),(t()(),r.tb(17,0,null,0,13,"nz-form-control",[["nzErrorTip","\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7"],["nzHasFeedback",""]],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(19,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],{nzErrorTip:[0,"nzErrorTip"],nzHasFeedback:[1,"nzHasFeedback"]},null),r.Lb(603979776,3,{defaultValidateControl:0}),(t()(),r.tb(21,0,null,0,9,"nz-input-group",[["nzPrefixIcon","mobile"]],[[2,"ant-input-group-compact",null],[2,"ant-input-search-enter-button",null],[2,"ant-input-search",null],[2,"ant-input-search-sm",null],[2,"ant-input-affix-wrapper",null],[2,"ant-input-group-wrapper",null],[2,"ant-input-group",null],[2,"ant-input-group-lg",null],[2,"ant-input-group-wrapper-lg",null],[2,"ant-input-affix-wrapper-lg",null],[2,"ant-input-search-lg",null],[2,"ant-input-group-sm",null],[2,"ant-input-affix-wrapper-sm",null],[2,"ant-input-group-wrapper-sm",null]],null,null,he,Nt)),r.sb(22,1097728,null,1,At.b,[],{nzPrefixIcon:[0,"nzPrefixIcon"]},null),r.Lb(603979776,4,{listOfNzInputDirective:1}),(t()(),r.tb(24,0,null,0,6,"input",[["formControlName","phone"],["nz-input",""],["placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7"],["type","tel"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Fb(t,25)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,25).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,25)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,25)._compositionEnd(n.target.value)&&i),i},null,null)),r.sb(25,16384,null,0,Z.d,[r.D,r.k,[2,Z.a]],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Z.d]),r.sb(27,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[3,4]],Z.m,null,[Z.h]),r.sb(29,16384,null,0,Z.n,[[4,Z.m]],null,null),r.sb(30,16384,[[4,4]],0,At.a,[r.D,r.k],null,null),(t()(),r.tb(31,0,null,null,21,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(33,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,5,{listOfNzFormExplainComponent:1}),(t()(),r.tb(35,0,null,0,3,"nz-form-label",[],null,null,null,Mi,Ii)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(37,4964352,[[1,4]],0,hi.f,[Y.y,r.k,[2,hi.e],[8,null],r.D,r.h],null,null),(t()(),r.Nb(-1,0,["\u5bc6\u7801"])),(t()(),r.tb(39,0,null,0,13,"nz-form-control",[["nzErrorTip","\u8bf7\u8f93\u5165\u5bc6\u7801"],["nzHasFeedback",""]],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(41,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],{nzErrorTip:[0,"nzErrorTip"],nzHasFeedback:[1,"nzHasFeedback"]},null),r.Lb(603979776,6,{defaultValidateControl:0}),(t()(),r.tb(43,0,null,0,9,"nz-input-group",[["nzPrefixIcon","lock"]],[[2,"ant-input-group-compact",null],[2,"ant-input-search-enter-button",null],[2,"ant-input-search",null],[2,"ant-input-search-sm",null],[2,"ant-input-affix-wrapper",null],[2,"ant-input-group-wrapper",null],[2,"ant-input-group",null],[2,"ant-input-group-lg",null],[2,"ant-input-group-wrapper-lg",null],[2,"ant-input-affix-wrapper-lg",null],[2,"ant-input-search-lg",null],[2,"ant-input-group-sm",null],[2,"ant-input-affix-wrapper-sm",null],[2,"ant-input-group-wrapper-sm",null]],null,null,he,Nt)),r.sb(44,1097728,null,1,At.b,[],{nzPrefixIcon:[0,"nzPrefixIcon"]},null),r.Lb(603979776,7,{listOfNzInputDirective:1}),(t()(),r.tb(46,0,null,0,6,"input",[["formControlName","password"],["nz-input",""],["placeholder","\u8bf7\u8f93\u5165\u5bc6\u7801"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"ant-input-disabled",null],[2,"ant-input-lg",null],[2,"ant-input-sm",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,e,n){var i=!0;return"input"===e&&(i=!1!==r.Fb(t,47)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Fb(t,47).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Fb(t,47)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Fb(t,47)._compositionEnd(n.target.value)&&i),i},null,null)),r.sb(47,16384,null,0,Z.d,[r.D,r.k,[2,Z.a]],null,null),r.Kb(1024,null,Z.l,function(t){return[t]},[Z.d]),r.sb(49,671744,null,0,Z.h,[[3,Z.c],[8,null],[8,null],[6,Z.l],[2,Z.u]],{name:[0,"name"]},null),r.Kb(2048,[[6,4]],Z.m,null,[Z.h]),r.sb(51,16384,null,0,Z.n,[[4,Z.m]],null,null),r.sb(52,16384,[[7,4]],0,At.a,[r.D,r.k],null,null),(t()(),r.tb(53,0,null,null,12,"nz-form-item",[],[[2,"ant-form-item-with-help",null]],null,null,Pi,zi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(55,6012928,null,1,hi.e,[r.k,r.D,Y.y,Ot.b,r.y,F.a,Y.n,r.h],null,null),r.Lb(603979776,8,{listOfNzFormExplainComponent:1}),(t()(),r.tb(57,0,null,0,8,"nz-form-control",[],null,null,null,Ti,pi)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(59,6012928,null,1,hi.a,[Y.y,r.k,[2,hi.e],[8,null],r.h,r.D],null,null),r.Lb(603979776,9,{defaultValidateControl:0}),(t()(),r.tb(61,0,null,0,4,"button",[["nz-button",""],["nzBlock",""],["nzType","primary"]],[[8,"disabled",0],[1,"nz-wave",0]],null,null,Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(63,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzBlock:[0,"nzBlock"],nzType:[1,"nzType"]},null),r.Lb(603979776,10,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u4e0b\u4e00\u6b65"]))],function(t,e){t(e,3,0,e.component.formModel),t(e,7,0,"vertical"),t(e,11,0),t(e,15,0),t(e,19,0,"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7",""),t(e,22,0,"mobile"),t(e,27,0,"phone"),t(e,33,0),t(e,37,0),t(e,41,0,"\u8bf7\u8f93\u5165\u5bc6\u7801",""),t(e,44,0,"lock"),t(e,49,0,"password"),t(e,55,0),t(e,59,0),t(e,63,0,"","primary")},function(t,e){var n=e.component;t(e,1,0,r.Fb(e,5).ngClassUntouched,r.Fb(e,5).ngClassTouched,r.Fb(e,5).ngClassPristine,r.Fb(e,5).ngClassDirty,r.Fb(e,5).ngClassValid,r.Fb(e,5).ngClassInvalid,r.Fb(e,5).ngClassPending),t(e,9,0,r.Fb(e,11).withHelpClass),t(e,21,1,[r.Fb(e,22).nzCompact,r.Fb(e,22).nzSearch,r.Fb(e,22).nzSearch,r.Fb(e,22).isSmallSearch,r.Fb(e,22).isAffixWrapper,r.Fb(e,22).isAddOn,r.Fb(e,22).isGroup,r.Fb(e,22).isLargeGroup,r.Fb(e,22).isLargeGroupWrapper,r.Fb(e,22).isLargeAffix,r.Fb(e,22).isLargeSearch,r.Fb(e,22).isSmallGroup,r.Fb(e,22).isSmallAffix,r.Fb(e,22).isSmallGroupWrapper]),t(e,24,0,r.Fb(e,29).ngClassUntouched,r.Fb(e,29).ngClassTouched,r.Fb(e,29).ngClassPristine,r.Fb(e,29).ngClassDirty,r.Fb(e,29).ngClassValid,r.Fb(e,29).ngClassInvalid,r.Fb(e,29).ngClassPending,r.Fb(e,30).disabled,"large"===r.Fb(e,30).nzSize,"small"===r.Fb(e,30).nzSize),t(e,31,0,r.Fb(e,33).withHelpClass),t(e,43,1,[r.Fb(e,44).nzCompact,r.Fb(e,44).nzSearch,r.Fb(e,44).nzSearch,r.Fb(e,44).isSmallSearch,r.Fb(e,44).isAffixWrapper,r.Fb(e,44).isAddOn,r.Fb(e,44).isGroup,r.Fb(e,44).isLargeGroup,r.Fb(e,44).isLargeGroupWrapper,r.Fb(e,44).isLargeAffix,r.Fb(e,44).isLargeSearch,r.Fb(e,44).isSmallGroup,r.Fb(e,44).isSmallAffix,r.Fb(e,44).isSmallGroupWrapper]),t(e,46,0,r.Fb(e,51).ngClassUntouched,r.Fb(e,51).ngClassTouched,r.Fb(e,51).ngClassPristine,r.Fb(e,51).ngClassDirty,r.Fb(e,51).ngClassValid,r.Fb(e,51).ngClassInvalid,r.Fb(e,51).ngClassPending,r.Fb(e,52).disabled,"large"===r.Fb(e,52).nzSize,"small"===r.Fb(e,52).nzSize),t(e,53,0,r.Fb(e,55).withHelpClass),t(e,61,0,!n.formModel.valid,r.Fb(e,63).nzWave)})}function co(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,2,"div",[["class","modal-wrap"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,1,"app-wy-check-code",[],null,[[null,"onCheckCode"],[null,"onReatSendCode"],[null,"onCheckExist"]],function(t,e,n){var r=!0,i=t.component;return"onCheckCode"===e&&(r=!1!==i.onCheckCode(n)&&r),"onReatSendCode"===e&&(r=!1!==i.sendCode()&&r),"onCheckExist"===e&&(r=!1!==i.onCheckExist()&&r),r},ro,to)),r.sb(2,638976,null,0,Js,[],{codePass:[0,"codePass"],timing:[1,"timing"],phone:[2,"phone"]},{onCheckCode:"onCheckCode",onReatSendCode:"onReatSendCode",onCheckExist:"onCheckExist"})],function(t,e){var n=e.component;t(e,2,0,n.codePass,n.timing,n.formModel.get("phone").value)},null)}function ho(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,3,"div",[["class","register modal-content"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,uo)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["code",2]],null,0,null,co)),(t()(),r.tb(4,0,null,null,2,"div",[["class","m-footer clearfix"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,1,"a",[],null,[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.changeType()&&r),r},null,null)),(t()(),r.Nb(-1,null,["< \u5176\u5b83\u767b\u9646\u65b9\u5f0f"]))],function(t,e){t(e,2,0,!e.component.showCode,r.Fb(e,3))},null)}class po{constructor(){this.onChangeModalType=new r.m}ngOnInit(){}}var fo=r.rb({encapsulation:0,styles:[[".cnzt[_ngcontent-%COMP%]{position:relative;border:1px solid #d3d3d3;border-top:none;border-width:0 1px 1px;border-radius:0 0 4px 4px;background:#fff}.cnzt[_ngcontent-%COMP%]   .select-log[_ngcontent-%COMP%]{padding:40px 0 39px}.cnzt[_ngcontent-%COMP%]   .select-log[_ngcontent-%COMP%]   .mid-wrap[_ngcontent-%COMP%]{width:60%;margin:0 auto}.cnzt[_ngcontent-%COMP%]   .select-log[_ngcontent-%COMP%]   .mid-wrap[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{margin-bottom:20px}.cnzt[_ngcontent-%COMP%]   .select-log[_ngcontent-%COMP%]   .mid-wrap[_ngcontent-%COMP%]   .methods[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;margin-top:10px}"]],data:{}});function go(t){return r.Pb(2,[(t()(),r.tb(0,0,null,null,15,"div",[["class","cnzt"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,14,"div",[["class","select-log"]],null,null,null,null,null)),(t()(),r.tb(2,0,null,null,13,"div",[["class","mid-wrap"]],null,null,null,null,null)),(t()(),r.tb(3,0,null,null,1,"div",[["class","pic"]],null,null,null,null,null)),(t()(),r.tb(4,0,null,null,0,"img",[["src","../../../../../assets/images/platform.png"]],null,null,null,null,null)),(t()(),r.tb(5,0,null,null,10,"div",[["class","methods"]],null,null,null,null,null)),(t()(),r.tb(6,0,null,null,4,"button",[["nz-button",""],["nzBlock",""],["nzSize","large"],["nzType","primary"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeModalType.emit("loginByPhone")&&r),r},Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(8,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzBlock:[0,"nzBlock"],nzType:[1,"nzType"],nzSize:[2,"nzSize"]},null),r.Lb(603979776,1,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u624b\u673a\u53f7\u767b\u9646"])),(t()(),r.tb(11,0,null,null,4,"button",[["nz-button",""],["nzBlock",""],["nzSize","large"]],[[1,"nz-wave",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onChangeModalType.emit("register")&&r),r},Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(13,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzBlock:[0,"nzBlock"],nzSize:[1,"nzSize"]},null),r.Lb(603979776,2,{listOfIconElement:1}),(t()(),r.Nb(-1,0,["\u6ce8\u518c"]))],function(t,e){t(e,8,0,"","primary","large"),t(e,13,0,"","large")},function(t,e){t(e,6,0,r.Fb(e,8).nzWave),t(e,11,0,r.Fb(e,13).nzWave)})}var mo=n("IYs4"),bo=r.rb({encapsulation:2,styles:[],data:{animation:[{type:7,name:"fadeMotion",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"0.2s"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"0.2s"}],options:null}],options:{}}]}});function yo(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"div",[["class","ant-back-top-content"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,0,"div",[["class","ant-back-top-icon"]],null,null,null,null,null))],null,null)}function vo(t){return r.Pb(0,[(t()(),r.ib(0,null,null,0))],null,null)}function _o(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,3,"div",[["class","ant-back-top"]],[[24,"@fadeMotion",0]],[[null,"click"]],function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.clickBackTop()&&r),r},null,null)),(t()(),r.ib(0,[["defaultContent",2]],null,0,null,yo)),(t()(),r.ib(16777216,null,null,1,null,vo)),r.sb(3,540672,null,0,R.s,[r.P],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null)],function(t,e){t(e,3,0,e.component.nzTemplate||r.Fb(e,1))},function(t,e){t(e,0,0,void 0)})}function wo(t){return r.Pb(2,[(t()(),r.ib(16777216,null,null,1,null,_o)),r.sb(1,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null)],function(t,e){t(e,1,0,e.component.visible)},null)}var xo=n("IheW"),Co=n("334H");let So=(()=>{class t{constructor(t,e){this.http=t,this.uri=e}search(t){const e=(new xo.i).set("keywords",t);return this.http.get(this.uri+"search/suggest",{params:e}).pipe(Object(g.map)(t=>t.result))}}return t.ngInjectableDef=r.Tb({factory:function(){return new t(r.Ub(xo.c),r.Ub(Co.a))},token:t,providedIn:Co.b}),t})(),Oo=(()=>{class t{constructor(t){this.plateformId=t,this.isBrowser=Object(R.A)(this.plateformId)}getStorage(t,e="local"){return this.isBrowser?window[e+"Storage"].getItem(t):""}setStorage(t,e="local"){if(this.isBrowser){const n=Array.isArray(t)?t:[t];for(const{key:t,value:r}of n)window[e+"Storage"].setItem(t,r.toString())}}removeStorage(t,e="local"){if(this.isBrowser){const n=Array.isArray(t)?t:[t];for(const t of n)window[e+"Storage"].removeItem(t)}}}return t.ngInjectableDef=r.Tb({factory:function(){return new t(r.Ub(r.A))},token:t,providedIn:Co.b}),t})();var ko=r.rb({encapsulation:0,styles:[["#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:2000px}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{display:flex}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{width:157px;color:#d3d3d3;font-size:26px;margin-bottom:0;margin-right:20px;text-align:center}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{height:64px;line-height:64px}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .wrap[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .member[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{background-color:#f2f2f2}#app[_ngcontent-%COMP%]   .layout[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]     .ant-back-top{bottom:80px}"]],data:{}});function Eo(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"nz-progress",[["nzStatus","active"],["nzStrokeWidth","5"]],null,null,null,K,L)),r.sb(1,638976,null,0,N.a,[],{nzShowInfo:[0,"nzShowInfo"],nzPercent:[1,"nzPercent"],nzStrokeWidth:[2,"nzStrokeWidth"],nzStatus:[3,"nzStatus"]},null)],function(t,e){t(e,1,0,!1,e.component.loadPercent,"5","active")},null)}function To(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,2).onClick()&&i),"click"===e&&(i=!1!==r.Fb(t,3).clickMenuItem(n)&&i),i},null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(2,16384,[[3,4]],0,p.o,[p.n,p.a,[8,null],r.D,r.k],{routerLink:[0,"routerLink"]},null),r.sb(3,1785856,[[1,4]],2,X.c,[Y.y,Y.p,[2,X.h],r.D,r.k,[2,p.o],[2,p.p],[2,p.n]],{nzSelected:[0,"nzSelected"]},null),r.Lb(603979776,3,{listOfRouterLink:1}),r.Lb(603979776,4,{listOfRouterLinkWithHref:1}),(t()(),r.Nb(6,null,["",""]))],function(t,e){var n=e.component;t(e,2,0,e.context.$implicit.path),t(e,3,0,n.routeTitle===e.context.$implicit.label)},function(t,e){t(e,6,0,e.context.$implicit.label)})}function zo(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,35,"div",[["class","no-login"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,34,"ul",[["nz-menu",""],["nzMode","horizontal"],["nzTheme","dark"]],null,null,null,null,null)),r.Kb(512,null,X.e,X.e,[]),r.Kb(1024,null,Y.p,X.f,[[3,Y.o],X.e]),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(5,1785856,null,2,X.a,[r.k,Y.p,Y.y],{nzTheme:[0,"nzTheme"],nzMode:[1,"nzMode"]},null),r.Lb(603979776,5,{listOfNzMenuItemDirective:1}),r.Lb(603979776,6,{listOfNzSubMenuComponent:1}),(t()(),r.tb(8,0,null,null,27,"li",[["nz-submenu",""]],null,null,null,mt,st)),r.Kb(512,null,X.h,X.h,[[3,X.h],X.e]),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(11,1818624,[[7,4],[6,4]],2,X.g,[r.k,Y.p,r.h,X.h,Y.y,F.a,[8,null]],null,null),r.Lb(603979776,7,{listOfNzSubMenuComponent:1}),r.Lb(603979776,8,{listOfNzMenuItemDirective:1}),(t()(),r.tb(14,0,null,0,4,"div",[["title",""]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["Login"])),(t()(),r.tb(17,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["type","down"]],null,null,null,null,null)),r.sb(18,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{type:[0,"type"],nzTheme:[1,"nzTheme"]},null),(t()(),r.tb(19,0,null,1,16,"ul",[],null,null,null,null,null)),(t()(),r.tb(20,0,null,null,7,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,22).clickMenuItem(n)&&i),"click"===e&&(i=!1!==s.openModalByMenu("loginByPhone")&&i),i},null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(22,1785856,[[8,4],[5,4]],2,X.c,[Y.y,Y.p,[2,X.h],r.D,r.k,[2,p.o],[2,p.p],[2,p.n]],null,null),r.Lb(603979776,9,{listOfRouterLink:1}),r.Lb(603979776,10,{listOfRouterLinkWithHref:1}),(t()(),r.tb(25,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["type","mobile"]],null,null,null,null,null)),r.sb(26,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{type:[0,"type"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,null,[" MobileLogin "])),(t()(),r.tb(28,0,null,null,7,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,30).clickMenuItem(n)&&i),"click"===e&&(i=!1!==s.openModalByMenu("register")&&i),i},null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(30,1785856,[[8,4],[5,4]],2,X.c,[Y.y,Y.p,[2,X.h],r.D,r.k,[2,p.o],[2,p.p],[2,p.n]],null,null),r.Lb(603979776,11,{listOfRouterLink:1}),r.Lb(603979776,12,{listOfRouterLinkWithHref:1}),(t()(),r.tb(33,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["type","user-add"]],null,null,null,null,null)),r.sb(34,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{type:[0,"type"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,null,[" register "]))],function(t,e){t(e,5,0,"dark","horizontal"),t(e,11,0),t(e,18,0,"down","outline"),t(e,22,0),t(e,26,0,"mobile","outline"),t(e,30,0),t(e,34,0,"user-add","outline")},null)}function Po(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,38,"div",[["class","login"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,37,"ul",[["nz-menu",""],["nzMode","horizontal"],["nzTheme","dark"]],null,null,null,null,null)),r.Kb(512,null,X.e,X.e,[]),r.Kb(1024,null,Y.p,X.f,[[3,Y.o],X.e]),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(5,1785856,null,2,X.a,[r.k,Y.p,Y.y],{nzTheme:[0,"nzTheme"],nzMode:[1,"nzMode"]},null),r.Lb(603979776,13,{listOfNzMenuItemDirective:1}),r.Lb(603979776,14,{listOfNzSubMenuComponent:1}),(t()(),r.tb(8,0,null,null,30,"li",[["nz-submenu",""]],null,null,null,mt,st)),r.Kb(512,null,X.h,X.h,[[3,X.h],X.e]),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(11,1818624,[[15,4],[14,4]],2,X.g,[r.k,Y.p,r.h,X.h,Y.y,F.a,[8,null]],null,null),r.Lb(603979776,15,{listOfNzSubMenuComponent:1}),r.Lb(603979776,16,{listOfNzMenuItemDirective:1}),(t()(),r.tb(14,0,null,0,5,"div",[["title",""]],null,null,null,null,null)),(t()(),r.tb(15,0,null,null,2,"nz-avatar",[["nzIcon","user"]],null,null,null,xt,yt)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(17,573440,null,0,bt.a,[r.k,r.h,Y.y,r.D,F.a],{nzSrc:[0,"nzSrc"],nzIcon:[1,"nzIcon"]},null),(t()(),r.tb(18,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["type","down"]],null,null,null,null,null)),r.sb(19,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{type:[0,"type"],nzTheme:[1,"nzTheme"]},null),(t()(),r.tb(20,0,null,1,18,"ul",[],null,null,null,null,null)),(t()(),r.tb(21,0,null,null,9,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Fb(t,23).onClick()&&i),"click"===e&&(i=!1!==r.Fb(t,25).clickMenuItem(n)&&i),i},null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(23,16384,[[17,4]],0,p.o,[p.n,p.a,[8,null],r.D,r.k],{routerLink:[0,"routerLink"]},null),r.Gb(24,2),r.sb(25,1785856,[[16,4],[13,4]],2,X.c,[Y.y,Y.p,[2,X.h],r.D,r.k,[2,p.o],[2,p.p],[2,p.n]],null,null),r.Lb(603979776,17,{listOfRouterLink:1}),r.Lb(603979776,18,{listOfRouterLinkWithHref:1}),(t()(),r.tb(28,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","user"]],null,null,null,null,null)),r.sb(29,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,null,["my profile "])),(t()(),r.tb(31,0,null,null,7,"li",[["nz-menu-item",""]],null,[[null,"click"]],function(t,e,n){var i=!0,s=t.component;return"click"===e&&(i=!1!==r.Fb(t,33).clickMenuItem(n)&&i),"click"===e&&(i=!1!==s.onLogout()&&i),i},null,null)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(33,1785856,[[16,4],[13,4]],2,X.c,[Y.y,Y.p,[2,X.h],r.D,r.k,[2,p.o],[2,p.p],[2,p.n]],null,null),r.Lb(603979776,19,{listOfRouterLink:1}),r.Lb(603979776,20,{listOfRouterLinkWithHref:1}),(t()(),r.tb(36,0,null,null,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","close-circle"]],null,null,null,null,null)),r.sb(37,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null),(t()(),r.Nb(-1,null,["logout "]))],function(t,e){var n=e.component;t(e,5,0,"dark","horizontal"),t(e,11,0),t(e,17,0,n.user.profile.avatarUrl,"user"),t(e,19,0,"down","outline");var r=t(e,24,0,"/member",n.user.profile.userId);t(e,23,0,r),t(e,25,0),t(e,29,0,"user","outline"),t(e,33,0),t(e,37,0,"close-circle","outline")},null)}function Io(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,6,"div",[["class","ant-back-top-inner"]],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,5,"button",[["nz-button",""],["nzSize","large"],["nzType","primary"]],[[1,"nz-wave",0]],null,null,Ct.c,Ct.a)),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(3,1818624,null,1,et.a,[r.k,r.h,r.D,Q.b,Y.y,r.y,[2,Y.i],[2,it.a]],{nzType:[0,"nzType"],nzSize:[1,"nzSize"]},null),r.Lb(603979776,21,{listOfIconElement:1}),(t()(),r.tb(5,0,[[21,0]],0,1,"i",[["nz-icon",""],["nzTheme","outline"],["nzType","to-top"]],null,null,null,null,null)),r.sb(6,2834432,null,0,$.a,[$.c,r.k,r.D,F.a],{nzType:[0,"nzType"],nzTheme:[1,"nzTheme"]},null)],function(t,e){t(e,3,0,"primary","large"),t(e,6,0,"to-top","outline")},function(t,e){t(e,1,0,r.Fb(e,3).nzWave)})}function Mo(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,33,"div",[["id","app"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,Eo)),r.sb(2,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"]},null),(t()(),r.tb(3,0,null,null,30,"nz-layout",[["class","layout"]],null,null,null,Dt,Mt)),r.sb(4,49152,null,0,St.d,[r.k,r.D],null,null),(t()(),r.tb(5,0,null,0,21,"nz-header",[["class","header"]],null,null,null,It,Pt)),r.sb(6,49152,null,0,St.c,[r.k,r.D],null,null),(t()(),r.tb(7,0,null,0,19,"div",[["class","wrap"]],null,null,null,null,null)),(t()(),r.tb(8,0,null,null,11,"div",[["class","left"]],null,null,null,null,null)),(t()(),r.tb(9,0,null,null,1,"h1",[],null,null,null,null,null)),(t()(),r.Nb(-1,null,["AIYoga"])),(t()(),r.tb(11,0,null,null,8,"ul",[["nz-menu",""],["nzMode","horizontal"],["nzTheme","dark"]],null,null,null,null,null)),r.Kb(512,null,X.e,X.e,[]),r.Kb(1024,null,Y.p,X.f,[[3,Y.o],X.e]),r.Kb(512,null,Y.y,Y.y,[r.E]),r.sb(15,1785856,null,2,X.a,[r.k,Y.p,Y.y],{nzTheme:[0,"nzTheme"],nzMode:[1,"nzMode"]},null),r.Lb(603979776,1,{listOfNzMenuItemDirective:1}),r.Lb(603979776,2,{listOfNzSubMenuComponent:1}),(t()(),r.ib(16777216,null,null,1,null,To)),r.sb(19,278528,null,0,R.k,[r.P,r.L,r.r],{ngForOf:[0,"ngForOf"]},null),(t()(),r.tb(20,0,null,null,6,"div",[["class","right"]],null,null,null,null,null)),(t()(),r.tb(21,16777216,null,null,1,"app-wy-search",[],null,[[null,"onSearch"]],function(t,e,n){var r=!0;return"onSearch"===e&&(r=!1!==t.component.onSearch(n)&&r),r},ye,ge)),r.sb(22,4833280,null,0,fe,[J.d,r.P],{searchResult:[0,"searchResult"]},{onSearch:"onSearch"}),(t()(),r.tb(23,0,null,null,3,"div",[["class","member"]],null,null,null,null,null)),(t()(),r.ib(16777216,null,null,1,null,zo)),r.sb(25,16384,null,0,R.l,[r.P,r.L],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r.ib(0,[["logined",2]],null,0,null,Po)),(t()(),r.tb(27,0,null,0,3,"nz-content",[["class","content"]],null,null,null,Et,kt)),r.sb(28,49152,null,0,St.a,[r.k,r.D],null,null),(t()(),r.tb(29,16777216,null,0,1,"router-outlet",[],null,null,null,null,null)),r.sb(30,212992,null,0,p.r,[p.b,r.P,r.j,[8,null],r.h],null,null),(t()(),r.tb(31,0,null,0,2,"nz-footer",[["class","footer"]],null,null,null,zt,Tt)),r.sb(32,49152,null,0,St.b,[r.k,r.D],null,null),(t()(),r.Nb(-1,0,[" Ant Design \xa92019 Implement By Angular "])),(t()(),r.tb(34,0,null,null,1,"app-wy-player",[],null,null,null,Zr,Yr)),r.sb(35,114688,null,0,Gr,[a.m,R.d,qr.g,Kr.a,p.n],null,null),(t()(),r.tb(36,0,null,null,11,"app-wy-layer-modal",[],null,[[null,"onLoadMySheets"]],function(t,e,n){var r=!0;return"onLoadMySheets"===e&&(r=!1!==t.component.onLoadMySheets()&&r),r},ci,ri)),r.sb(37,4833280,null,0,ni,[r.A,R.d,J.d,r.k,J.g,r.h,Kr.a,r.D,J.f],{visible:[0,"visible"],showSpin:[1,"showSpin"],currentModalType:[2,"currentModalType"]},{onLoadMySheets:"onLoadMySheets"}),(t()(),r.tb(38,0,null,0,1,"app-wy-layer-login",[["name","login"]],null,[[null,"onLogin"],[null,"onChangeModalType"]],function(t,e,n){var r=!0,i=t.component;return"onLogin"===e&&(r=!1!==i.onLogin(n)&&r),"onChangeModalType"===e&&(r=!1!==i.onChangeModalType(n)&&r),r},$i,Fi)),r.sb(39,638976,null,0,Ri,[Z.e],{wyRememberLogin:[0,"wyRememberLogin"],visible:[1,"visible"]},{onChangeModalType:"onChangeModalType",onLogin:"onLogin"}),(t()(),r.tb(40,0,null,2,1,"app-wy-layer-like",[["name","like"]],null,[[null,"onCreateSheet"],[null,"onLikeSong"]],function(t,e,n){var r=!0,i=t.component;return"onCreateSheet"===e&&(r=!1!==i.onCreateSheet(n)&&r),"onLikeSong"===e&&(r=!1!==i.onLikeSong(n)&&r),r},Vs,Fs)),r.sb(41,638976,null,0,Rs,[Z.e],{mySheets:[0,"mySheets"],likeId:[1,"likeId"],visible:[2,"visible"]},{onLikeSong:"onLikeSong",onCreateSheet:"onCreateSheet"}),(t()(),r.tb(42,0,null,3,1,"app-wy-layer-share",[["name","share"]],null,[[null,"onCancel"],[null,"onShare"]],function(t,e,n){var r=!0,i=t.component;return"onCancel"===e&&(r=!1!==i.closeModal()&&r),"onShare"===e&&(r=!1!==i.onShare(n)&&r),r},Gs,Hs)),r.sb(43,638976,null,0,Us,[],{shareInfo:[0,"shareInfo"],visible:[1,"visible"]},{onCancel:"onCancel",onShare:"onShare"}),(t()(),r.tb(44,0,null,1,1,"app-wy-layer-register",[["name","register"]],null,[[null,"onChangeModalType"],[null,"onRegister"]],function(t,e,n){var r=!0,i=t.component;return"onChangeModalType"===e&&(r=!1!==i.onChangeModalType(n)&&r),"onRegister"===e&&(r=!1!==i.onRegister(n)&&r),r},ho,ao)),r.sb(45,638976,null,0,so,[Z.e,oo.a,lo.g,r.h],{visible:[0,"visible"]},{onChangeModalType:"onChangeModalType",onRegister:"onRegister"}),(t()(),r.tb(46,0,null,4,1,"app-wy-layer-default",[],null,[[null,"onChangeModalType"]],function(t,e,n){var r=!0;return"onChangeModalType"===e&&(r=!1!==t.component.onChangeModalType(n)&&r),r},go,fo)),r.sb(47,114688,null,0,po,[],null,{onChangeModalType:"onChangeModalType"}),(t()(),r.tb(48,0,null,null,2,"nz-back-top",[],null,null,null,wo,bo)),r.sb(49,245760,null,0,mo.a,[Y.t,R.d,F.a,r.h],{nzTemplate:[0,"nzTemplate"]},null),(t()(),r.ib(0,[["tpl",2]],null,0,null,Io))],function(t,e){var n=e.component;t(e,2,0,n.loadPercent<100),t(e,15,0,"dark","horizontal"),t(e,19,0,n.menu),t(e,22,0,n.searchResult),t(e,25,0,!n.user,r.Fb(e,26)),t(e,30,0),t(e,35,0),t(e,37,0,n.visible,n.showSpin,n.currentModalType),t(e,39,0,n.wyRememberLogin,n.visible),t(e,41,0,n.mySheets,n.likeId,n.visible),t(e,43,0,n.shareInfo,n.visible),t(e,45,0,n.visible),t(e,47,0),t(e,49,0,r.Fb(e,50))},null)}function Do(t){return r.Pb(0,[(t()(),r.tb(0,0,null,null,1,"app-root",[],null,null,null,Mo,ko)),r.sb(1,49152,null,0,m,[So,a.m,Kr.a,oo.a,lo.g,Oo,p.n,p.a,Wi.h,R.d],null,null)],null,null)}var Ao=r.pb("app-root",m,Do,{},{},[]),No=n("fDlF");class Ro{intercept(t,e){return e.handle(t.clone({withCredentials:!0})).pipe(Object(g.catchError)(this.handleError))}handleError(t){throw t.error}}var Fo=n("GS7A"),$o=n("Ez21"),Lo=n("nr5L"),jo=n("uHTM"),Bo=n("7iOB"),Vo=n("mKz/"),Wo=n("WnZk"),Uo=n("xkaR"),Ho=n("Yzca"),Go=n("SiFy"),qo=n("9pFA"),Ko=n("v1Dh"),Yo=n("5Izy"),Xo=n("yTpB"),Zo=n("r19J"),Qo=n("EcpC"),Jo=n("phDe"),tl=n("rJp6"),el=n("kS4m"),nl=n("jTf7"),rl=n("WPSl"),il=n("YdS3"),sl=n("wQFA"),ol=n("3ZFI"),ll=n("oBm0"),al=n("A7zk"),ul=n("YRt3"),cl=n("lAiz"),hl=n("ce6n"),dl=n("SBNi"),pl=n("iC8E"),fl=n("eCGT"),gl=n("JK0T"),ml=n("0CZq"),bl=n("qU0y"),yl=n("vZsH"),vl=n("SHEi"),_l=n("FPpa"),wl=n("NDed"),xl=n("5A4h"),Cl=n("N2O2"),Sl=n("ozKM"),Ol=n("OvZZ"),kl=n("z+yo"),El=n("DQmg"),Tl=n("haRT"),zl=n("1+nf"),Pl=n("XFzh"),Il=n("p+Sl"),Ml=n("HhpN"),Dl=n("SN7N"),Al=n("fwnu"),Nl=n("VbP7"),Rl=n("gaRz"),Fl=n("e15G"),$l=n("QFPx"),Ll=n("rjGf"),jl=n("aFrj"),Bl=n("1eu+"),Vl=n("PmpX"),Wl=n("ADsi"),Ul=n("1LmZ"),Hl=n("9oos"),Gl=n("7kRp"),ql=n("tboP"),Kl=n("RDh8"),Yl=n("6/vs"),Xl=n("RGEn"),Zl=n("6B6o"),Ql=n("SrrE"),Jl=n("WmCX"),ta=n("yQYE"),ea=n("C6bk"),na=n("2iAc"),ra=n("Bf1V");const ia=()=>n.e(5).then(n.bind(null,"TbC0")).then(t=>t.HomeModuleNgFactory),sa=()=>n.e(8).then(n.bind(null,"LO3a")).then(t=>t.SheetListModuleNgFactory),oa=()=>n.e(7).then(n.bind(null,"z7AA")).then(t=>t.SheetInfoModuleNgFactory),la=()=>n.e(10).then(n.bind(null,"LpcO")).then(t=>t.SongInfoModuleNgFactory),aa=()=>n.e(6).then(n.bind(null,"NuYn")).then(t=>t.MemberModuleNgFactory),ua=()=>n.e(9).then(n.bind(null,"n2m2")).then(t=>t.SingerModuleNgFactory);class ca{}var ha=n("99Un"),da=n("m0v+"),pa=n("5uBk"),fa=n("G7d8"),ga=n("EBYK"),ma=n("Agmr"),ba=n("aBn6"),ya=n("9Qnf");class va{}var _a=n("YZbJ"),wa=n("Kd/A"),xa=n.n(wa);Object(R.C)(xa.a);const Ca=ji.e;class Sa{constructor(t){if(t)throw new Error("CoreModule \u53ea\u80fd\u88abappModule\u5f15\u5165")}}var Oa=r.qb(s,[m],function(t){return r.Cb([r.Db(512,r.j,r.bb,[[8,[b.a,b.b,y.a,v.a,_.a,w.a,x.a,C.a,S.a,O.a,k.a,E.a,T.a,z.a,P.a,I.a,M.a,D.a,A.a,Ao]],[3,r.j],r.w]),r.Db(5120,r.t,r.nb,[[3,r.t]]),r.Db(4608,R.n,R.m,[r.t,[2,R.I]]),r.Db(5120,r.jb,r.ob,[r.y]),r.Db(5120,r.c,r.kb,[]),r.Db(5120,r.r,r.lb,[]),r.Db(5120,r.s,r.mb,[]),r.Db(4608,Wi.b,Wi.l,[R.d]),r.Db(6144,r.G,null,[Wi.b]),r.Db(4608,Wi.e,Wi.g,[]),r.Db(5120,Wi.c,function(t,e,n,r,i,s,o,l){return[new Wi.j(t,e,n),new Wi.o(r),new Wi.n(i,s,o,l)]},[R.d,r.y,r.A,R.d,R.d,Wi.e,r.cb,[2,Wi.f]]),r.Db(4608,Wi.d,Wi.d,[Wi.c,r.y]),r.Db(135680,Wi.m,Wi.m,[R.d]),r.Db(4608,Wi.k,Wi.k,[Wi.d,Wi.m,r.c]),r.Db(5120,No.a,it.e,[]),r.Db(5120,No.c,it.f,[]),r.Db(4608,No.b,it.d,[R.d,No.a,No.c]),r.Db(5120,r.E,it.g,[Wi.k,No.b,r.y]),r.Db(6144,Wi.p,null,[Wi.m]),r.Db(4608,r.M,r.M,[r.y]),r.Db(4608,xo.m,xo.s,[R.d,r.A,xo.q]),r.Db(4608,xo.t,xo.t,[xo.m,xo.r]),r.Db(5120,xo.a,function(t){return[t,new Ro]},[xo.t]),r.Db(4608,xo.p,xo.p,[]),r.Db(6144,xo.n,null,[xo.p]),r.Db(4608,xo.l,xo.l,[xo.n]),r.Db(6144,xo.b,null,[xo.l]),r.Db(4608,xo.g,xo.o,[xo.b,r.q]),r.Db(4608,xo.c,xo.c,[xo.g]),r.Db(4608,Fo.b,it.c,[r.E,R.d]),r.Db(5120,Y.t,Y.D,[R.d,[3,Y.t]]),r.Db(4608,J.d,J.d,[J.k,J.f,r.j,J.i,J.g,r.q,r.y,R.d,tt.b,[2,R.h]]),r.Db(5120,J.l,J.m,[J.d]),r.Db(4608,Z.t,Z.t,[]),r.Db(4608,Q.c,Q.c,[]),r.Db(4608,ti.e,ti.e,[R.d,r.y,rt.j,ti.g]),r.Db(4608,Z.e,Z.e,[]),r.Db(4608,$o.a,$o.a,[Lo.a,jo.a]),r.Db(4608,Bo.a,Bo.a,[Vo.a]),r.Db(4608,Wo.a,Wo.a,[Nr.a]),r.Db(4608,Uo.a,Uo.a,[jo.a]),r.Db(4608,Ho.a,Ho.a,[oo.a,p.n]),r.Db(4608,Go.a,Go.a,[oo.a,p.n]),r.Db(135680,a.k,a.k,[a.a,a.i,a.j,a.d]),r.Db(5120,qo.c,qo.d,[qo.j,qo.g]),r.Db(5120,p.a,p.B,[p.n]),r.Db(4608,p.f,p.f,[]),r.Db(6144,p.i,null,[p.f]),r.Db(135680,p.s,p.s,[p.n,r.v,r.i,r.q,p.i]),r.Db(4608,p.h,p.h,[]),r.Db(5120,p.G,p.x,[p.n,R.x,p.j]),r.Db(5120,p.k,p.E,[p.C]),r.Db(5120,r.b,function(t){return[t]},[p.k]),r.Db(1073742336,R.c,R.c,[]),r.Db(1024,r.l,Wi.q,[]),r.Db(1024,r.x,function(){return[p.w()]},[]),r.Db(512,p.C,p.C,[r.q]),r.Db(1024,r.d,function(t,e){return[Wi.r(t),p.D(e)]},[[2,r.x],p.C]),r.Db(512,r.e,r.e,[[2,r.d]]),r.Db(131584,r.g,r.g,[r.y,r.cb,r.q,r.l,r.j,r.e]),r.Db(1073742336,r.f,r.f,[r.g]),r.Db(1073742336,Wi.a,Wi.a,[[3,Wi.a]]),r.Db(1073742336,xo.e,xo.e,[]),r.Db(1073742336,xo.d,xo.d,[]),r.Db(1073742336,it.b,it.b,[]),r.Db(1073742336,Co.b,Co.b,[]),r.Db(1073742336,F.b,F.b,[]),r.Db(1073742336,Ko.a,Ko.a,[]),r.Db(1073742336,$.b,$.b,[]),r.Db(1073742336,Y.j,Y.j,[]),r.Db(1073742336,Yo.a,Yo.a,[]),r.Db(1073742336,Xo.a,Xo.a,[]),r.Db(1073742336,tt.a,tt.a,[]),r.Db(1073742336,nt.e,nt.e,[]),r.Db(1073742336,rt.g,rt.g,[]),r.Db(1073742336,J.h,J.h,[]),r.Db(1073742336,Z.s,Z.s,[]),r.Db(1073742336,Z.k,Z.k,[]),r.Db(1073742336,Y.r,Y.r,[]),r.Db(1073742336,Zo.a,Zo.a,[]),r.Db(1073742336,bt.b,bt.b,[]),r.Db(1073742336,mo.b,mo.b,[]),r.Db(1073742336,Q.d,Q.d,[]),r.Db(1073742336,Qo.a,Qo.a,[]),r.Db(1073742336,Y.A,Y.A,[]),r.Db(1073742336,et.c,et.c,[]),r.Db(1073742336,Y.s,Y.s,[]),r.Db(1073742336,X.d,X.d,[]),r.Db(1073742336,Jo.h,Jo.h,[]),r.Db(1073742336,Jo.a,Jo.a,[]),r.Db(1073742336,Jo.e,Jo.e,[]),r.Db(1073742336,tl.a,tl.a,[]),r.Db(1073742336,ji.b,ji.b,[]),r.Db(1073742336,el.d,el.d,[]),r.Db(1073742336,Bi.c,Bi.c,[]),r.Db(1073742336,nl.h,nl.h,[]),r.Db(1073742336,rl.a,rl.a,[]),r.Db(1073742336,il.a,il.a,[]),r.Db(1073742336,sl.d,sl.d,[]),r.Db(1073742336,At.c,At.c,[]),r.Db(1073742336,ol.a,ol.a,[]),r.Db(1073742336,Ai.c,Ai.c,[]),r.Db(1073742336,ll.a,ll.a,[]),r.Db(1073742336,al.a,al.a,[]),r.Db(1073742336,ul.a,ul.a,[]),r.Db(1073742336,cl.b,cl.b,[]),r.Db(1073742336,cl.a,cl.a,[]),r.Db(1073742336,hl.a,hl.a,[]),r.Db(1073742336,dl.b,dl.b,[]),r.Db(1073742336,pl.c,pl.c,[]),r.Db(1073742336,pl.b,pl.b,[]),r.Db(1073742336,Ot.a,Ot.a,[]),r.Db(1073742336,di.b,di.b,[]),r.Db(1073742336,hi.g,hi.g,[]),r.Db(1073742336,fl.a,fl.a,[]),r.Db(1073742336,St.e,St.e,[]),r.Db(1073742336,Jr.b,Jr.b,[]),r.Db(1073742336,Li.d,Li.d,[]),r.Db(1073742336,gl.a,gl.a,[]),r.Db(1073742336,lo.h,lo.h,[]),r.Db(1073742336,lo.f,lo.f,[]),r.Db(1073742336,qr.h,qr.h,[]),r.Db(1073742336,qr.e,qr.e,[]),r.Db(1073742336,qr.f,qr.f,[]),r.Db(1073742336,ml.f,ml.f,[]),r.Db(1073742336,ml.e,ml.e,[]),r.Db(1073742336,bl.a,bl.a,[]),r.Db(1073742336,yl.b,yl.b,[]),r.Db(1073742336,Ae.b,Ae.b,[]),r.Db(1073742336,vl.b,vl.b,[]),r.Db(1073742336,_l.b,_l.b,[]),r.Db(1073742336,N.b,N.b,[]),r.Db(1073742336,wl.a,wl.a,[]),r.Db(1073742336,xl.a,xl.a,[]),r.Db(1073742336,Cl.a,Cl.a,[]),r.Db(1073742336,Sl.a,Sl.a,[]),r.Db(1073742336,Ol.a,Ol.a,[]),r.Db(1073742336,kl.a,kl.a,[]),r.Db(1073742336,El.a,El.a,[]),r.Db(1073742336,Tl.b,Tl.b,[]),r.Db(1073742336,zl.a,zl.a,[]),r.Db(1073742336,Pl.b,Pl.b,[]),r.Db(1073742336,Il.a,Il.a,[]),r.Db(1073742336,Y.v,Y.v,[]),r.Db(1073742336,Ml.a,Ml.a,[]),r.Db(1073742336,Dl.a,Dl.a,[]),r.Db(1073742336,Al.a,Al.a,[]),r.Db(1073742336,Y.m,Y.m,[]),r.Db(1073742336,Nl.a,Nl.a,[]),r.Db(1073742336,Rl.a,Rl.a,[]),r.Db(1073742336,Fl.a,Fl.a,[]),r.Db(1073742336,$l.a,$l.a,[]),r.Db(1073742336,Ll.a,Ll.a,[]),r.Db(1073742336,jl.a,jl.a,[]),r.Db(1073742336,ti.f,ti.f,[]),r.Db(1073742336,Z.q,Z.q,[]),r.Db(1073742336,Bl.a,Bl.a,[]),r.Db(1073742336,Vl.a,Vl.a,[]),r.Db(1073742336,Wl.a,Wl.a,[]),r.Db(1024,p.v,p.z,[[3,p.n]]),r.Db(512,p.u,p.c,[]),r.Db(512,p.b,p.b,[]),r.Db(256,p.j,{scrollPositionRestoration:"enabled"},[]),r.Db(1024,R.i,p.y,[R.v,[2,R.a],p.j]),r.Db(512,R.h,R.h,[R.i,R.v]),r.Db(512,r.i,r.i,[]),r.Db(512,r.v,r.J,[r.i,[2,r.K]]),r.Db(1024,p.l,function(){return[[{path:"",component:Ul.a,data:Hl.b,resolve:{homeDatas:$o.a}}],[{path:"",component:Gl.a,data:ql.b}],[{path:"",component:Kl.a,data:Yl.b,resolve:{sheetInfo:Bo.a}}],[{path:"myrtc/:id",component:Xl.a}],[{path:"",component:Zl.a,data:Ql.b,resolve:{songInfo:Wo.a}}],[{path:"singer/:id",component:Jl.a,data:ta.b,resolve:{singerDetail:Uo.a}}],[{path:"member/:id",component:ea.a,data:na.b,resolve:{user:Ho.a}},{path:"records/:id",component:ra.a,data:na.c,resolve:{user:Go.a}}],[{path:"home",loadChildren:ia},{path:"sheet",loadChildren:sa},{path:"sheetInfo/:id",loadChildren:oa},{path:"songInfo/:id",loadChildren:la},{path:"member/:id",loadChildren:aa},{path:"singer/:id",loadChildren:ua},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",redirectTo:"/home"}]]},[]),r.Db(1024,p.n,p.A,[r.g,p.u,p.b,R.h,r.q,r.v,r.i,p.l,p.j,[2,p.t],[2,p.m]]),r.Db(1073742336,p.q,p.q,[[2,p.v],[2,p.n]]),r.Db(1073742336,Hl.a,Hl.a,[]),r.Db(1073742336,ha.a,ha.a,[]),r.Db(1073742336,ql.a,ql.a,[]),r.Db(1073742336,da.a,da.a,[]),r.Db(1073742336,Yl.a,Yl.a,[]),r.Db(1073742336,pa.a,pa.a,[]),r.Db(1073742336,fa.a,fa.a,[]),r.Db(1073742336,ga.a,ga.a,[]),r.Db(1073742336,Ql.a,Ql.a,[]),r.Db(1073742336,ma.a,ma.a,[]),r.Db(1073742336,ta.a,ta.a,[]),r.Db(1073742336,ba.a,ba.a,[]),r.Db(1073742336,na.a,na.a,[]),r.Db(1073742336,ya.a,ya.a,[]),r.Db(1073742336,va,va,[]),r.Db(131584,a.a,a.a,[]),r.Db(131584,qo.l,qo.l,[]),r.Db(2048,a.h,null,[qo.l]),r.Db(256,a.E,void 0,[]),r.Db(1024,a.d,a.M,[a.E]),r.Db(256,a.G,{player:Wr.b,member:l.b},[]),r.Db(2048,a.H,null,[a.G]),r.Db(1024,a.c,a.L,[r.q,a.G,a.H]),r.Db(256,a.F,a.r,[]),r.Db(256,a.J,{strictStateImmutability:!0,strictActionImmutability:!0,strictStateSerializability:!0,strictActionSerializability:!0},[]),r.Db(1024,a.q,a.C,[a.J]),r.Db(1024,a.K,a.P,[a.q]),r.Db(1024,a.e,function(t,e){return[a.B(t),a.A(e)]},[a.K,a.K]),r.Db(256,a.p,[],[]),r.Db(1024,a.I,a.N,[a.e,a.p]),r.Db(1024,a.f,a.v,[a.F,a.I]),r.Db(131584,a.g,a.g,[a.h,a.d,a.c,a.f]),r.Db(2048,a.i,null,[a.g]),r.Db(131584,a.j,a.j,[]),r.Db(1024,qo.j,qo.e,[]),r.Db(256,qo.h,{maxAge:20,logOnly:!0},[]),r.Db(1024,qo.g,qo.i,[qo.h]),r.Db(512,qo.k,qo.k,[qo.j,qo.g,qo.l]),r.Db(512,qo.a,qo.a,[qo.l,a.a,a.i,qo.k,a.j,r.l,a.d,qo.g]),r.Db(1024,a.l,qo.f,[qo.a]),r.Db(512,a.m,a.m,[a.l,a.a,a.g]),r.Db(1024,a.D,a.O,[[3,a.m]]),r.Db(1073742336,a.n,a.n,[a.a,a.i,a.j,a.m,[2,a.D]]),r.Db(1073742336,qo.b,qo.b,[]),r.Db(1073742336,_a.a,_a.a,[]),r.Db(1073742336,ca,ca,[]),r.Db(1073742336,Sa,Sa,[[3,Sa]]),r.Db(1073742336,s,s,[]),r.Db(256,r.ab,!0,[]),r.Db(256,xo.q,"XSRF-TOKEN",[]),r.Db(256,xo.r,"X-XSRF-TOKEN",[]),r.Db(256,it.a,"BrowserAnimations",[]),r.Db(256,Co.a,Co.c,[]),r.Db(256,lo.b,{nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24},[]),r.Db(256,ml.b,{nzTop:"24px",nzBottom:"24px",nzPlacement:"topRight",nzDuration:4500,nzMaxStack:7,nzPauseOnHover:!0,nzAnimate:!0},[]),r.Db(256,ji.a,Ca,[])])});i.a.production&&Object(r.T)(),Wi.i().bootstrapModuleFactory(Oa).catch(t=>console.error(t))},zfKp:function(t,e,n){"use strict";e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},zj0I:function(t,e,n){var r=n("yNUO");t.exports=function(t){var e=r(t),n=e.getMonth();return e.setMonth(n-n%3+3,0),e.setHours(0,0,0,0),e}},"zk/k":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}r.prototype=Object.create(Error.prototype),e.TimeoutError=r},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zp1y:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("l7GE"),i=n("ZUHj");function s(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new o(t,n))}}class o{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new l(t,this.observables,this.project))}}class l extends r.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let s=0;s<r;s++){let t=e[s];this.add(Object(i.a)(this,t,t,s))}}notifyNext(t,e,n,r,i){this.values[n]=e;const s=this.toRespond;if(s.length>0){const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},zvlq:function(t,e,n){"use strict";var r=n("XdTn");e.asap=new(n("UGPC").AsapScheduler)(r.AsapAction)},zzsZ:function(t,e,n){"use strict";var r=n("Q1FS"),i=n("zB/H"),s=n("OAkW");e.fromArray=function(t,e){return new r.Observable(e?function(n){var r=new i.Subscription,s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r}:s.subscribeToArray(t))}}},[[0,0]]]);