import t from"./interpret";import e from"./math";import s from"./toString";import r from"../utils/common";var i=function(){function e(){this.__state=t.apply(this,arguments);if(this.__state===false){throw new Error("Failed to interpret color arguments")}this.__state.a=this.__state.a||1}var r=e.prototype;r.toString=function t(){return s(this)};r.toHexString=function t(){return s(this,true)};r.toOriginal=function t(){return this.__state.conversion.write(this)};return e}();function _(t,e,s){Object.defineProperty(t,e,{get:function t(){if(this.__state.space==="RGB"){return this.__state[e]}i.recalculateRGB(this,e,s);return this.__state[e]},set:function t(r){if(this.__state.space!=="RGB"){i.recalculateRGB(this,e,s);this.__state.space="RGB"}this.__state[e]=r}})}function a(t,e){Object.defineProperty(t,e,{get:function t(){if(this.__state.space==="HSV"){return this.__state[e]}i.recalculateHSV(this);return this.__state[e]},set:function t(s){if(this.__state.space!=="HSV"){i.recalculateHSV(this);this.__state.space="HSV"}this.__state[e]=s}})}i.recalculateRGB=function(t,s,i){if(t.__state.space==="HEX"){t.__state[s]=e.component_from_hex(t.__state.hex,i)}else if(t.__state.space==="HSV"){r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}else{throw new Error("Corrupted color state")}};i.recalculateHSV=function(t){var s=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:s.s,v:s.v});if(!r.isNaN(s.h)){t.__state.h=s.h}else if(r.isUndefined(t.__state.h)){t.__state.h=0}};i.COMPONENTS=["r","g","b","h","s","v","hex","a"];_(i.prototype,"r",2);_(i.prototype,"g",1);_(i.prototype,"b",0);a(i.prototype,"h");a(i.prototype,"s");a(i.prototype,"v");Object.defineProperty(i.prototype,"a",{get:function t(){return this.__state.a},set:function t(e){this.__state.a=e}});Object.defineProperty(i.prototype,"hex",{get:function t(){if(!this.__state.space!=="HEX"){this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)}return this.__state.hex},set:function t(e){this.__state.space="HEX";this.__state.hex=e}});export default i;